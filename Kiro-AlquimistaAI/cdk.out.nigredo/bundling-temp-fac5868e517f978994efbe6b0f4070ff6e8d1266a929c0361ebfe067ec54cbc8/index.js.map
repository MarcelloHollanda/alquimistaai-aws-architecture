{
  "version": 3,
  "sources": ["../../node_modules/lodash.merge/index.js", "../../node_modules/postgres-array/index.js", "../../node_modules/pg-types/lib/arrayParser.js", "../../node_modules/postgres-date/index.js", "../../node_modules/xtend/mutable.js", "../../node_modules/postgres-interval/index.js", "../../node_modules/postgres-bytea/index.js", "../../node_modules/pg-types/lib/textParsers.js", "../../node_modules/pg-int8/index.js", "../../node_modules/pg-types/lib/binaryParsers.js", "../../node_modules/pg-types/lib/builtins.js", "../../node_modules/pg-types/index.js", "../../node_modules/pg/lib/defaults.js", "../../node_modules/pg/lib/utils.js", "../../node_modules/pg/lib/crypto/utils-legacy.js", "../../node_modules/pg/lib/crypto/utils-webcrypto.js", "../../node_modules/pg/lib/crypto/utils.js", "../../node_modules/pg/lib/crypto/cert-signatures.js", "../../node_modules/pg/lib/crypto/sasl.js", "../../node_modules/pg/lib/type-overrides.js", "../../node_modules/pg-connection-string/index.js", "../../node_modules/pg/lib/connection-parameters.js", "../../node_modules/pg/lib/result.js", "../../node_modules/pg/lib/query.js", "../../node_modules/pg-protocol/src/messages.ts", "../../node_modules/pg-protocol/src/buffer-writer.ts", "../../node_modules/pg-protocol/src/serializer.ts", "../../node_modules/pg-protocol/src/buffer-reader.ts", "../../node_modules/pg-protocol/src/parser.ts", "../../node_modules/pg-protocol/src/index.ts", "../../node_modules/pg-cloudflare/src/empty.ts", "../../node_modules/pg/lib/stream.js", "../../node_modules/pg/lib/connection.js", "../../node_modules/split2/index.js", "../../node_modules/pgpass/lib/helper.js", "../../node_modules/pgpass/lib/index.js", "../../node_modules/pg/lib/client.js", "../../node_modules/pg-pool/index.js", "../../node_modules/pg/lib/native/query.js", "../../node_modules/pg/lib/native/client.js", "../../node_modules/pg/lib/native/index.js", "../../node_modules/pg/lib/index.js", "../../node_modules/shimmer/index.js", "../../node_modules/emitter-listener/listener.js", "../../node_modules/cls-hooked/context.js", "../../node_modules/aws-xray-sdk-core/dist/lib/logger.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/attributes/captured_exception.js", "../../node_modules/atomic-batcher/index.js", "../../node_modules/aws-xray-sdk-core/dist/lib/daemon_config.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segment_emitter.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/attributes/trace_id.js", "../../node_modules/aws-xray-sdk-core/dist/lib/utils.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/segment_utils.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/attributes/remote_request_data.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/attributes/subsegment.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/segment.js", "../../node_modules/aws-xray-sdk-core/dist/lib/context_utils.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/incoming_request_data.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/local_reservoir.js", "../../node_modules/aws-xray-sdk-core/dist/lib/resources/default_sampling_rules.json", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/local_sampler.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/reservoir.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/sampling_rule.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/service_connector.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/rule_cache.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/rule_poller.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/target_poller.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/sampling/default_sampler.js", "../../node_modules/aws-xray-sdk-core/dist/lib/middleware/mw_utils.js", "../../node_modules/aws-xray-sdk-core/node_modules/@aws/lambda-invoke-store/dist/invoke-store.js", "../../node_modules/aws-xray-sdk-core/dist/lib/env/aws_lambda.js", "../../node_modules/aws-xray-sdk-core/package.json", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/plugins/plugin.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/plugins/ec2_plugin.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/plugins/ecs_plugin.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/plugins/elastic_beanstalk_plugin.js", "../../node_modules/aws-xray-sdk-core/dist/lib/resources/aws_whitelist.json", "../../node_modules/aws-xray-sdk-core/dist/lib/patchers/call_capturer.js", "../../node_modules/aws-xray-sdk-core/dist/lib/segments/attributes/aws.js", "../../node_modules/aws-xray-sdk-core/dist/lib/capture.js", "../../node_modules/semver/internal/constants.js", "../../node_modules/semver/internal/debug.js", "../../node_modules/semver/internal/re.js", "../../node_modules/semver/internal/parse-options.js", "../../node_modules/semver/internal/identifiers.js", "../../node_modules/semver/classes/semver.js", "../../node_modules/semver/functions/parse.js", "../../node_modules/semver/functions/valid.js", "../../node_modules/semver/functions/clean.js", "../../node_modules/semver/functions/inc.js", "../../node_modules/semver/functions/diff.js", "../../node_modules/semver/functions/major.js", "../../node_modules/semver/functions/minor.js", "../../node_modules/semver/functions/patch.js", "../../node_modules/semver/functions/prerelease.js", "../../node_modules/semver/functions/compare.js", "../../node_modules/semver/functions/rcompare.js", "../../node_modules/semver/functions/compare-loose.js", "../../node_modules/semver/functions/compare-build.js", "../../node_modules/semver/functions/sort.js", "../../node_modules/semver/functions/rsort.js", "../../node_modules/semver/functions/gt.js", "../../node_modules/semver/functions/lt.js", "../../node_modules/semver/functions/eq.js", "../../node_modules/semver/functions/neq.js", "../../node_modules/semver/functions/gte.js", "../../node_modules/semver/functions/lte.js", "../../node_modules/semver/functions/cmp.js", "../../node_modules/semver/functions/coerce.js", "../../node_modules/semver/internal/lrucache.js", "../../node_modules/semver/classes/range.js", "../../node_modules/semver/classes/comparator.js", "../../node_modules/semver/functions/satisfies.js", "../../node_modules/semver/ranges/to-comparators.js", "../../node_modules/semver/ranges/max-satisfying.js", "../../node_modules/semver/ranges/min-satisfying.js", "../../node_modules/semver/ranges/min-version.js", "../../node_modules/semver/ranges/valid.js", "../../node_modules/semver/ranges/outside.js", "../../node_modules/semver/ranges/gtr.js", "../../node_modules/semver/ranges/ltr.js", "../../node_modules/semver/ranges/intersects.js", "../../node_modules/semver/ranges/simplify.js", "../../node_modules/semver/ranges/subset.js", "../../node_modules/semver/index.js", "../../node_modules/aws-xray-sdk-core/dist/lib/patchers/aws_p.js", "../../node_modules/aws-xray-sdk-core/node_modules/@smithy/service-error-classification/dist-cjs/index.js", "../../node_modules/aws-xray-sdk-core/dist/lib/patchers/aws3_p.js", "../../node_modules/aws-xray-sdk-core/dist/lib/patchers/http_p.js", "../../node_modules/aws-xray-sdk-core/dist/lib/patchers/promise_p.js", "../../node_modules/aws-xray-sdk-core/dist/lib/database/sql_data.js", "../../node_modules/aws-xray-sdk-core/dist/lib/aws-xray.js", "../../node_modules/aws-xray-sdk-core/dist/lib/index.js", "../../lambda/nigredo/list-leads.ts", "../../node_modules/@aws-lambda-powertools/metrics/lib/esm/constants.js", "../../node_modules/@aws-lambda-powertools/metrics/lib/esm/Metrics.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/version.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/awsSdkUtils.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/middleware/constants.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/typeUtils.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/Utility.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/index.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/constants.js", "../../node_modules/@aws-lambda-powertools/commons/lib/esm/envUtils.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/constants.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/formatter/LogFormatter.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/formatter/LogItem.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/Logger.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/formatter/PowertoolsLogFormatter.js", "../../node_modules/@aws-lambda-powertools/logger/lib/esm/logBuffer.js", "../../node_modules/uuid/dist/esm-node/stringify.js", "../../node_modules/uuid/dist/esm-node/rng.js", "../../node_modules/uuid/dist/esm-node/native.js", "../../node_modules/uuid/dist/esm-node/v4.js", "../../lambda/shared/logger.ts", "../../node_modules/pg/esm/index.mjs", "../../lambda/shared/database.ts", "../../node_modules/@aws-lambda-powertools/tracer/lib/esm/Tracer.js", "../../node_modules/@aws-lambda-powertools/tracer/lib/esm/provider/ProviderService.js", "../../node_modules/@aws-lambda-powertools/tracer/lib/esm/provider/utilities.js", "../../lambda/shared/xray-tracer.ts", "../../node_modules/zod/v3/external.js", "../../node_modules/zod/v3/helpers/util.js", "../../node_modules/zod/v3/ZodError.js", "../../node_modules/zod/v3/locales/en.js", "../../node_modules/zod/v3/errors.js", "../../node_modules/zod/v3/helpers/parseUtil.js", "../../node_modules/zod/v3/helpers/errorUtil.js", "../../node_modules/zod/v3/types.js"],
  "sourcesContent": ["/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeMax = Math.max,\n    nativeNow = Date.now;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\n/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\n/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = merge;\n", "'use strict'\n\nexports.parse = function (source, transform) {\n  return new ArrayParser(source, transform).parse()\n}\n\nclass ArrayParser {\n  constructor (source, transform) {\n    this.source = source\n    this.transform = transform || identity\n    this.position = 0\n    this.entries = []\n    this.recorded = []\n    this.dimension = 0\n  }\n\n  isEof () {\n    return this.position >= this.source.length\n  }\n\n  nextCharacter () {\n    var character = this.source[this.position++]\n    if (character === '\\\\') {\n      return {\n        value: this.source[this.position++],\n        escaped: true\n      }\n    }\n    return {\n      value: character,\n      escaped: false\n    }\n  }\n\n  record (character) {\n    this.recorded.push(character)\n  }\n\n  newEntry (includeEmpty) {\n    var entry\n    if (this.recorded.length > 0 || includeEmpty) {\n      entry = this.recorded.join('')\n      if (entry === 'NULL' && !includeEmpty) {\n        entry = null\n      }\n      if (entry !== null) entry = this.transform(entry)\n      this.entries.push(entry)\n      this.recorded = []\n    }\n  }\n\n  consumeDimensions () {\n    if (this.source[0] === '[') {\n      while (!this.isEof()) {\n        var char = this.nextCharacter()\n        if (char.value === '=') break\n      }\n    }\n  }\n\n  parse (nested) {\n    var character, parser, quote\n    this.consumeDimensions()\n    while (!this.isEof()) {\n      character = this.nextCharacter()\n      if (character.value === '{' && !quote) {\n        this.dimension++\n        if (this.dimension > 1) {\n          parser = new ArrayParser(this.source.substr(this.position - 1), this.transform)\n          this.entries.push(parser.parse(true))\n          this.position += parser.position - 2\n        }\n      } else if (character.value === '}' && !quote) {\n        this.dimension--\n        if (!this.dimension) {\n          this.newEntry()\n          if (nested) return this.entries\n        }\n      } else if (character.value === '\"' && !character.escaped) {\n        if (quote) this.newEntry(true)\n        quote = !quote\n      } else if (character.value === ',' && !quote) {\n        this.newEntry()\n      } else {\n        this.record(character.value)\n      }\n    }\n    if (this.dimension !== 0) {\n      throw new Error('array dimension not balanced')\n    }\n    return this.entries\n  }\n}\n\nfunction identity (value) {\n  return value\n}\n", "var array = require('postgres-array');\n\nmodule.exports = {\n  create: function (source, transform) {\n    return {\n      parse: function() {\n        return array.parse(source, transform);\n      }\n    };\n  }\n};\n", "'use strict'\n\nvar DATE_TIME = /(\\d{1,})-(\\d{2})-(\\d{2}) (\\d{2}):(\\d{2}):(\\d{2})(\\.\\d{1,})?.*?( BC)?$/\nvar DATE = /^(\\d{1,})-(\\d{2})-(\\d{2})( BC)?$/\nvar TIME_ZONE = /([Z+-])(\\d{2})?:?(\\d{2})?:?(\\d{2})?/\nvar INFINITY = /^-?infinity$/\n\nmodule.exports = function parseDate (isoDate) {\n  if (INFINITY.test(isoDate)) {\n    // Capitalize to Infinity before passing to Number\n    return Number(isoDate.replace('i', 'I'))\n  }\n  var matches = DATE_TIME.exec(isoDate)\n\n  if (!matches) {\n    // Force YYYY-MM-DD dates to be parsed as local time\n    return getDate(isoDate) || null\n  }\n\n  var isBC = !!matches[8]\n  var year = parseInt(matches[1], 10)\n  if (isBC) {\n    year = bcYearToNegativeYear(year)\n  }\n\n  var month = parseInt(matches[2], 10) - 1\n  var day = matches[3]\n  var hour = parseInt(matches[4], 10)\n  var minute = parseInt(matches[5], 10)\n  var second = parseInt(matches[6], 10)\n\n  var ms = matches[7]\n  ms = ms ? 1000 * parseFloat(ms) : 0\n\n  var date\n  var offset = timeZoneOffset(isoDate)\n  if (offset != null) {\n    date = new Date(Date.UTC(year, month, day, hour, minute, second, ms))\n\n    // Account for years from 0 to 99 being interpreted as 1900-1999\n    // by Date.UTC / the multi-argument form of the Date constructor\n    if (is0To99(year)) {\n      date.setUTCFullYear(year)\n    }\n\n    if (offset !== 0) {\n      date.setTime(date.getTime() - offset)\n    }\n  } else {\n    date = new Date(year, month, day, hour, minute, second, ms)\n\n    if (is0To99(year)) {\n      date.setFullYear(year)\n    }\n  }\n\n  return date\n}\n\nfunction getDate (isoDate) {\n  var matches = DATE.exec(isoDate)\n  if (!matches) {\n    return\n  }\n\n  var year = parseInt(matches[1], 10)\n  var isBC = !!matches[4]\n  if (isBC) {\n    year = bcYearToNegativeYear(year)\n  }\n\n  var month = parseInt(matches[2], 10) - 1\n  var day = matches[3]\n  // YYYY-MM-DD will be parsed as local time\n  var date = new Date(year, month, day)\n\n  if (is0To99(year)) {\n    date.setFullYear(year)\n  }\n\n  return date\n}\n\n// match timezones:\n// Z (UTC)\n// -05\n// +06:30\nfunction timeZoneOffset (isoDate) {\n  if (isoDate.endsWith('+00')) {\n    return 0\n  }\n\n  var zone = TIME_ZONE.exec(isoDate.split(' ')[1])\n  if (!zone) return\n  var type = zone[1]\n\n  if (type === 'Z') {\n    return 0\n  }\n  var sign = type === '-' ? -1 : 1\n  var offset = parseInt(zone[2], 10) * 3600 +\n    parseInt(zone[3] || 0, 10) * 60 +\n    parseInt(zone[4] || 0, 10)\n\n  return offset * sign * 1000\n}\n\nfunction bcYearToNegativeYear (year) {\n  // Account for numerical difference between representations of BC years\n  // See: https://github.com/bendrucker/postgres-date/issues/5\n  return -(year - 1)\n}\n\nfunction is0To99 (num) {\n  return num >= 0 && num < 100\n}\n", "module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend(target) {\n    for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n", "'use strict'\n\nvar extend = require('xtend/mutable')\n\nmodule.exports = PostgresInterval\n\nfunction PostgresInterval (raw) {\n  if (!(this instanceof PostgresInterval)) {\n    return new PostgresInterval(raw)\n  }\n  extend(this, parse(raw))\n}\nvar properties = ['seconds', 'minutes', 'hours', 'days', 'months', 'years']\nPostgresInterval.prototype.toPostgres = function () {\n  var filtered = properties.filter(this.hasOwnProperty, this)\n\n  // In addition to `properties`, we need to account for fractions of seconds.\n  if (this.milliseconds && filtered.indexOf('seconds') < 0) {\n    filtered.push('seconds')\n  }\n\n  if (filtered.length === 0) return '0'\n  return filtered\n    .map(function (property) {\n      var value = this[property] || 0\n\n      // Account for fractional part of seconds,\n      // remove trailing zeroes.\n      if (property === 'seconds' && this.milliseconds) {\n        value = (value + this.milliseconds / 1000).toFixed(6).replace(/\\.?0+$/, '')\n      }\n\n      return value + ' ' + property\n    }, this)\n    .join(' ')\n}\n\nvar propertiesISOEquivalent = {\n  years: 'Y',\n  months: 'M',\n  days: 'D',\n  hours: 'H',\n  minutes: 'M',\n  seconds: 'S'\n}\nvar dateProperties = ['years', 'months', 'days']\nvar timeProperties = ['hours', 'minutes', 'seconds']\n// according to ISO 8601\nPostgresInterval.prototype.toISOString = PostgresInterval.prototype.toISO = function () {\n  var datePart = dateProperties\n    .map(buildProperty, this)\n    .join('')\n\n  var timePart = timeProperties\n    .map(buildProperty, this)\n    .join('')\n\n  return 'P' + datePart + 'T' + timePart\n\n  function buildProperty (property) {\n    var value = this[property] || 0\n\n    // Account for fractional part of seconds,\n    // remove trailing zeroes.\n    if (property === 'seconds' && this.milliseconds) {\n      value = (value + this.milliseconds / 1000).toFixed(6).replace(/0+$/, '')\n    }\n\n    return value + propertiesISOEquivalent[property]\n  }\n}\n\nvar NUMBER = '([+-]?\\\\d+)'\nvar YEAR = NUMBER + '\\\\s+years?'\nvar MONTH = NUMBER + '\\\\s+mons?'\nvar DAY = NUMBER + '\\\\s+days?'\nvar TIME = '([+-])?([\\\\d]*):(\\\\d\\\\d):(\\\\d\\\\d)\\\\.?(\\\\d{1,6})?'\nvar INTERVAL = new RegExp([YEAR, MONTH, DAY, TIME].map(function (regexString) {\n  return '(' + regexString + ')?'\n})\n  .join('\\\\s*'))\n\n// Positions of values in regex match\nvar positions = {\n  years: 2,\n  months: 4,\n  days: 6,\n  hours: 9,\n  minutes: 10,\n  seconds: 11,\n  milliseconds: 12\n}\n// We can use negative time\nvar negatives = ['hours', 'minutes', 'seconds', 'milliseconds']\n\nfunction parseMilliseconds (fraction) {\n  // add omitted zeroes\n  var microseconds = fraction + '000000'.slice(fraction.length)\n  return parseInt(microseconds, 10) / 1000\n}\n\nfunction parse (interval) {\n  if (!interval) return {}\n  var matches = INTERVAL.exec(interval)\n  var isNegative = matches[8] === '-'\n  return Object.keys(positions)\n    .reduce(function (parsed, property) {\n      var position = positions[property]\n      var value = matches[position]\n      // no empty string\n      if (!value) return parsed\n      // milliseconds are actually microseconds (up to 6 digits)\n      // with omitted trailing zeroes.\n      value = property === 'milliseconds'\n        ? parseMilliseconds(value)\n        : parseInt(value, 10)\n      // no zeros\n      if (!value) return parsed\n      if (isNegative && ~negatives.indexOf(property)) {\n        value *= -1\n      }\n      parsed[property] = value\n      return parsed\n    }, {})\n}\n", "'use strict'\n\nmodule.exports = function parseBytea (input) {\n  if (/^\\\\x/.test(input)) {\n    // new 'hex' style response (pg >9.0)\n    return new Buffer(input.substr(2), 'hex')\n  }\n  var output = ''\n  var i = 0\n  while (i < input.length) {\n    if (input[i] !== '\\\\') {\n      output += input[i]\n      ++i\n    } else {\n      if (/[0-7]{3}/.test(input.substr(i + 1, 3))) {\n        output += String.fromCharCode(parseInt(input.substr(i + 1, 3), 8))\n        i += 4\n      } else {\n        var backslashes = 1\n        while (i + backslashes < input.length && input[i + backslashes] === '\\\\') {\n          backslashes++\n        }\n        for (var k = 0; k < Math.floor(backslashes / 2); ++k) {\n          output += '\\\\'\n        }\n        i += Math.floor(backslashes / 2) * 2\n      }\n    }\n  }\n  return new Buffer(output, 'binary')\n}\n", "var array = require('postgres-array')\nvar arrayParser = require('./arrayParser');\nvar parseDate = require('postgres-date');\nvar parseInterval = require('postgres-interval');\nvar parseByteA = require('postgres-bytea');\n\nfunction allowNull (fn) {\n  return function nullAllowed (value) {\n    if (value === null) return value\n    return fn(value)\n  }\n}\n\nfunction parseBool (value) {\n  if (value === null) return value\n  return value === 'TRUE' ||\n    value === 't' ||\n    value === 'true' ||\n    value === 'y' ||\n    value === 'yes' ||\n    value === 'on' ||\n    value === '1';\n}\n\nfunction parseBoolArray (value) {\n  if (!value) return null\n  return array.parse(value, parseBool)\n}\n\nfunction parseBaseTenInt (string) {\n  return parseInt(string, 10)\n}\n\nfunction parseIntegerArray (value) {\n  if (!value) return null\n  return array.parse(value, allowNull(parseBaseTenInt))\n}\n\nfunction parseBigIntegerArray (value) {\n  if (!value) return null\n  return array.parse(value, allowNull(function (entry) {\n    return parseBigInteger(entry).trim()\n  }))\n}\n\nvar parsePointArray = function(value) {\n  if(!value) { return null; }\n  var p = arrayParser.create(value, function(entry) {\n    if(entry !== null) {\n      entry = parsePoint(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseFloatArray = function(value) {\n  if(!value) { return null; }\n  var p = arrayParser.create(value, function(entry) {\n    if(entry !== null) {\n      entry = parseFloat(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseStringArray = function(value) {\n  if(!value) { return null; }\n\n  var p = arrayParser.create(value);\n  return p.parse();\n};\n\nvar parseDateArray = function(value) {\n  if (!value) { return null; }\n\n  var p = arrayParser.create(value, function(entry) {\n    if (entry !== null) {\n      entry = parseDate(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseIntervalArray = function(value) {\n  if (!value) { return null; }\n\n  var p = arrayParser.create(value, function(entry) {\n    if (entry !== null) {\n      entry = parseInterval(entry);\n    }\n    return entry;\n  });\n\n  return p.parse();\n};\n\nvar parseByteAArray = function(value) {\n  if (!value) { return null; }\n\n  return array.parse(value, allowNull(parseByteA));\n};\n\nvar parseInteger = function(value) {\n  return parseInt(value, 10);\n};\n\nvar parseBigInteger = function(value) {\n  var valStr = String(value);\n  if (/^\\d+$/.test(valStr)) { return valStr; }\n  return value;\n};\n\nvar parseJsonArray = function(value) {\n  if (!value) { return null; }\n\n  return array.parse(value, allowNull(JSON.parse));\n};\n\nvar parsePoint = function(value) {\n  if (value[0] !== '(') { return null; }\n\n  value = value.substring( 1, value.length - 1 ).split(',');\n\n  return {\n    x: parseFloat(value[0])\n  , y: parseFloat(value[1])\n  };\n};\n\nvar parseCircle = function(value) {\n  if (value[0] !== '<' && value[1] !== '(') { return null; }\n\n  var point = '(';\n  var radius = '';\n  var pointParsed = false;\n  for (var i = 2; i < value.length - 1; i++){\n    if (!pointParsed) {\n      point += value[i];\n    }\n\n    if (value[i] === ')') {\n      pointParsed = true;\n      continue;\n    } else if (!pointParsed) {\n      continue;\n    }\n\n    if (value[i] === ','){\n      continue;\n    }\n\n    radius += value[i];\n  }\n  var result = parsePoint(point);\n  result.radius = parseFloat(radius);\n\n  return result;\n};\n\nvar init = function(register) {\n  register(20, parseBigInteger); // int8\n  register(21, parseInteger); // int2\n  register(23, parseInteger); // int4\n  register(26, parseInteger); // oid\n  register(700, parseFloat); // float4/real\n  register(701, parseFloat); // float8/double\n  register(16, parseBool);\n  register(1082, parseDate); // date\n  register(1114, parseDate); // timestamp without timezone\n  register(1184, parseDate); // timestamp\n  register(600, parsePoint); // point\n  register(651, parseStringArray); // cidr[]\n  register(718, parseCircle); // circle\n  register(1000, parseBoolArray);\n  register(1001, parseByteAArray);\n  register(1005, parseIntegerArray); // _int2\n  register(1007, parseIntegerArray); // _int4\n  register(1028, parseIntegerArray); // oid[]\n  register(1016, parseBigIntegerArray); // _int8\n  register(1017, parsePointArray); // point[]\n  register(1021, parseFloatArray); // _float4\n  register(1022, parseFloatArray); // _float8\n  register(1231, parseFloatArray); // _numeric\n  register(1014, parseStringArray); //char\n  register(1015, parseStringArray); //varchar\n  register(1008, parseStringArray);\n  register(1009, parseStringArray);\n  register(1040, parseStringArray); // macaddr[]\n  register(1041, parseStringArray); // inet[]\n  register(1115, parseDateArray); // timestamp without time zone[]\n  register(1182, parseDateArray); // _date\n  register(1185, parseDateArray); // timestamp with time zone[]\n  register(1186, parseInterval);\n  register(1187, parseIntervalArray);\n  register(17, parseByteA);\n  register(114, JSON.parse.bind(JSON)); // json\n  register(3802, JSON.parse.bind(JSON)); // jsonb\n  register(199, parseJsonArray); // json[]\n  register(3807, parseJsonArray); // jsonb[]\n  register(3907, parseStringArray); // numrange[]\n  register(2951, parseStringArray); // uuid[]\n  register(791, parseStringArray); // money[]\n  register(1183, parseStringArray); // time[]\n  register(1270, parseStringArray); // timetz[]\n};\n\nmodule.exports = {\n  init: init\n};\n", "'use strict';\n\n// selected so (BASE - 1) * 0x100000000 + 0xffffffff is a safe integer\nvar BASE = 1000000;\n\nfunction readInt8(buffer) {\n\tvar high = buffer.readInt32BE(0);\n\tvar low = buffer.readUInt32BE(4);\n\tvar sign = '';\n\n\tif (high < 0) {\n\t\thigh = ~high + (low === 0);\n\t\tlow = (~low + 1) >>> 0;\n\t\tsign = '-';\n\t}\n\n\tvar result = '';\n\tvar carry;\n\tvar t;\n\tvar digits;\n\tvar pad;\n\tvar l;\n\tvar i;\n\n\t{\n\t\tcarry = high % BASE;\n\t\thigh = high / BASE >>> 0;\n\n\t\tt = 0x100000000 * carry + low;\n\t\tlow = t / BASE >>> 0;\n\t\tdigits = '' + (t - BASE * low);\n\n\t\tif (low === 0 && high === 0) {\n\t\t\treturn sign + digits + result;\n\t\t}\n\n\t\tpad = '';\n\t\tl = 6 - digits.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tpad += '0';\n\t\t}\n\n\t\tresult = pad + digits + result;\n\t}\n\n\t{\n\t\tcarry = high % BASE;\n\t\thigh = high / BASE >>> 0;\n\n\t\tt = 0x100000000 * carry + low;\n\t\tlow = t / BASE >>> 0;\n\t\tdigits = '' + (t - BASE * low);\n\n\t\tif (low === 0 && high === 0) {\n\t\t\treturn sign + digits + result;\n\t\t}\n\n\t\tpad = '';\n\t\tl = 6 - digits.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tpad += '0';\n\t\t}\n\n\t\tresult = pad + digits + result;\n\t}\n\n\t{\n\t\tcarry = high % BASE;\n\t\thigh = high / BASE >>> 0;\n\n\t\tt = 0x100000000 * carry + low;\n\t\tlow = t / BASE >>> 0;\n\t\tdigits = '' + (t - BASE * low);\n\n\t\tif (low === 0 && high === 0) {\n\t\t\treturn sign + digits + result;\n\t\t}\n\n\t\tpad = '';\n\t\tl = 6 - digits.length;\n\n\t\tfor (i = 0; i < l; i++) {\n\t\t\tpad += '0';\n\t\t}\n\n\t\tresult = pad + digits + result;\n\t}\n\n\t{\n\t\tcarry = high % BASE;\n\t\tt = 0x100000000 * carry + low;\n\t\tdigits = '' + t % BASE;\n\n\t\treturn sign + digits + result;\n\t}\n}\n\nmodule.exports = readInt8;\n", "var parseInt64 = require('pg-int8');\n\nvar parseBits = function(data, bits, offset, invert, callback) {\n  offset = offset || 0;\n  invert = invert || false;\n  callback = callback || function(lastValue, newValue, bits) { return (lastValue * Math.pow(2, bits)) + newValue; };\n  var offsetBytes = offset >> 3;\n\n  var inv = function(value) {\n    if (invert) {\n      return ~value & 0xff;\n    }\n\n    return value;\n  };\n\n  // read first (maybe partial) byte\n  var mask = 0xff;\n  var firstBits = 8 - (offset % 8);\n  if (bits < firstBits) {\n    mask = (0xff << (8 - bits)) & 0xff;\n    firstBits = bits;\n  }\n\n  if (offset) {\n    mask = mask >> (offset % 8);\n  }\n\n  var result = 0;\n  if ((offset % 8) + bits >= 8) {\n    result = callback(0, inv(data[offsetBytes]) & mask, firstBits);\n  }\n\n  // read bytes\n  var bytes = (bits + offset) >> 3;\n  for (var i = offsetBytes + 1; i < bytes; i++) {\n    result = callback(result, inv(data[i]), 8);\n  }\n\n  // bits to read, that are not a complete byte\n  var lastBits = (bits + offset) % 8;\n  if (lastBits > 0) {\n    result = callback(result, inv(data[bytes]) >> (8 - lastBits), lastBits);\n  }\n\n  return result;\n};\n\nvar parseFloatFromBits = function(data, precisionBits, exponentBits) {\n  var bias = Math.pow(2, exponentBits - 1) - 1;\n  var sign = parseBits(data, 1);\n  var exponent = parseBits(data, exponentBits, 1);\n\n  if (exponent === 0) {\n    return 0;\n  }\n\n  // parse mantissa\n  var precisionBitsCounter = 1;\n  var parsePrecisionBits = function(lastValue, newValue, bits) {\n    if (lastValue === 0) {\n      lastValue = 1;\n    }\n\n    for (var i = 1; i <= bits; i++) {\n      precisionBitsCounter /= 2;\n      if ((newValue & (0x1 << (bits - i))) > 0) {\n        lastValue += precisionBitsCounter;\n      }\n    }\n\n    return lastValue;\n  };\n\n  var mantissa = parseBits(data, precisionBits, exponentBits + 1, false, parsePrecisionBits);\n\n  // special cases\n  if (exponent == (Math.pow(2, exponentBits + 1) - 1)) {\n    if (mantissa === 0) {\n      return (sign === 0) ? Infinity : -Infinity;\n    }\n\n    return NaN;\n  }\n\n  // normale number\n  return ((sign === 0) ? 1 : -1) * Math.pow(2, exponent - bias) * mantissa;\n};\n\nvar parseInt16 = function(value) {\n  if (parseBits(value, 1) == 1) {\n    return -1 * (parseBits(value, 15, 1, true) + 1);\n  }\n\n  return parseBits(value, 15, 1);\n};\n\nvar parseInt32 = function(value) {\n  if (parseBits(value, 1) == 1) {\n    return -1 * (parseBits(value, 31, 1, true) + 1);\n  }\n\n  return parseBits(value, 31, 1);\n};\n\nvar parseFloat32 = function(value) {\n  return parseFloatFromBits(value, 23, 8);\n};\n\nvar parseFloat64 = function(value) {\n  return parseFloatFromBits(value, 52, 11);\n};\n\nvar parseNumeric = function(value) {\n  var sign = parseBits(value, 16, 32);\n  if (sign == 0xc000) {\n    return NaN;\n  }\n\n  var weight = Math.pow(10000, parseBits(value, 16, 16));\n  var result = 0;\n\n  var digits = [];\n  var ndigits = parseBits(value, 16);\n  for (var i = 0; i < ndigits; i++) {\n    result += parseBits(value, 16, 64 + (16 * i)) * weight;\n    weight /= 10000;\n  }\n\n  var scale = Math.pow(10, parseBits(value, 16, 48));\n  return ((sign === 0) ? 1 : -1) * Math.round(result * scale) / scale;\n};\n\nvar parseDate = function(isUTC, value) {\n  var sign = parseBits(value, 1);\n  var rawValue = parseBits(value, 63, 1);\n\n  // discard usecs and shift from 2000 to 1970\n  var result = new Date((((sign === 0) ? 1 : -1) * rawValue / 1000) + 946684800000);\n\n  if (!isUTC) {\n    result.setTime(result.getTime() + result.getTimezoneOffset() * 60000);\n  }\n\n  // add microseconds to the date\n  result.usec = rawValue % 1000;\n  result.getMicroSeconds = function() {\n    return this.usec;\n  };\n  result.setMicroSeconds = function(value) {\n    this.usec = value;\n  };\n  result.getUTCMicroSeconds = function() {\n    return this.usec;\n  };\n\n  return result;\n};\n\nvar parseArray = function(value) {\n  var dim = parseBits(value, 32);\n\n  var flags = parseBits(value, 32, 32);\n  var elementType = parseBits(value, 32, 64);\n\n  var offset = 96;\n  var dims = [];\n  for (var i = 0; i < dim; i++) {\n    // parse dimension\n    dims[i] = parseBits(value, 32, offset);\n    offset += 32;\n\n    // ignore lower bounds\n    offset += 32;\n  }\n\n  var parseElement = function(elementType) {\n    // parse content length\n    var length = parseBits(value, 32, offset);\n    offset += 32;\n\n    // parse null values\n    if (length == 0xffffffff) {\n      return null;\n    }\n\n    var result;\n    if ((elementType == 0x17) || (elementType == 0x14)) {\n      // int/bigint\n      result = parseBits(value, length * 8, offset);\n      offset += length * 8;\n      return result;\n    }\n    else if (elementType == 0x19) {\n      // string\n      result = value.toString(this.encoding, offset >> 3, (offset += (length << 3)) >> 3);\n      return result;\n    }\n    else {\n      console.log(\"ERROR: ElementType not implemented: \" + elementType);\n    }\n  };\n\n  var parse = function(dimension, elementType) {\n    var array = [];\n    var i;\n\n    if (dimension.length > 1) {\n      var count = dimension.shift();\n      for (i = 0; i < count; i++) {\n        array[i] = parse(dimension, elementType);\n      }\n      dimension.unshift(count);\n    }\n    else {\n      for (i = 0; i < dimension[0]; i++) {\n        array[i] = parseElement(elementType);\n      }\n    }\n\n    return array;\n  };\n\n  return parse(dims, elementType);\n};\n\nvar parseText = function(value) {\n  return value.toString('utf8');\n};\n\nvar parseBool = function(value) {\n  if(value === null) return null;\n  return (parseBits(value, 8) > 0);\n};\n\nvar init = function(register) {\n  register(20, parseInt64);\n  register(21, parseInt16);\n  register(23, parseInt32);\n  register(26, parseInt32);\n  register(1700, parseNumeric);\n  register(700, parseFloat32);\n  register(701, parseFloat64);\n  register(16, parseBool);\n  register(1114, parseDate.bind(null, false));\n  register(1184, parseDate.bind(null, true));\n  register(1000, parseArray);\n  register(1007, parseArray);\n  register(1016, parseArray);\n  register(1008, parseArray);\n  register(1009, parseArray);\n  register(25, parseText);\n};\n\nmodule.exports = {\n  init: init\n};\n", "/**\n * Following query was used to generate this file:\n\n SELECT json_object_agg(UPPER(PT.typname), PT.oid::int4 ORDER BY pt.oid)\n FROM pg_type PT\n WHERE typnamespace = (SELECT pgn.oid FROM pg_namespace pgn WHERE nspname = 'pg_catalog') -- Take only builting Postgres types with stable OID (extension types are not guaranted to be stable)\n AND typtype = 'b' -- Only basic types\n AND typelem = 0 -- Ignore aliases\n AND typisdefined -- Ignore undefined types\n */\n\nmodule.exports = {\n    BOOL: 16,\n    BYTEA: 17,\n    CHAR: 18,\n    INT8: 20,\n    INT2: 21,\n    INT4: 23,\n    REGPROC: 24,\n    TEXT: 25,\n    OID: 26,\n    TID: 27,\n    XID: 28,\n    CID: 29,\n    JSON: 114,\n    XML: 142,\n    PG_NODE_TREE: 194,\n    SMGR: 210,\n    PATH: 602,\n    POLYGON: 604,\n    CIDR: 650,\n    FLOAT4: 700,\n    FLOAT8: 701,\n    ABSTIME: 702,\n    RELTIME: 703,\n    TINTERVAL: 704,\n    CIRCLE: 718,\n    MACADDR8: 774,\n    MONEY: 790,\n    MACADDR: 829,\n    INET: 869,\n    ACLITEM: 1033,\n    BPCHAR: 1042,\n    VARCHAR: 1043,\n    DATE: 1082,\n    TIME: 1083,\n    TIMESTAMP: 1114,\n    TIMESTAMPTZ: 1184,\n    INTERVAL: 1186,\n    TIMETZ: 1266,\n    BIT: 1560,\n    VARBIT: 1562,\n    NUMERIC: 1700,\n    REFCURSOR: 1790,\n    REGPROCEDURE: 2202,\n    REGOPER: 2203,\n    REGOPERATOR: 2204,\n    REGCLASS: 2205,\n    REGTYPE: 2206,\n    UUID: 2950,\n    TXID_SNAPSHOT: 2970,\n    PG_LSN: 3220,\n    PG_NDISTINCT: 3361,\n    PG_DEPENDENCIES: 3402,\n    TSVECTOR: 3614,\n    TSQUERY: 3615,\n    GTSVECTOR: 3642,\n    REGCONFIG: 3734,\n    REGDICTIONARY: 3769,\n    JSONB: 3802,\n    REGNAMESPACE: 4089,\n    REGROLE: 4096\n};\n", "var textParsers = require('./lib/textParsers');\nvar binaryParsers = require('./lib/binaryParsers');\nvar arrayParser = require('./lib/arrayParser');\nvar builtinTypes = require('./lib/builtins');\n\nexports.getTypeParser = getTypeParser;\nexports.setTypeParser = setTypeParser;\nexports.arrayParser = arrayParser;\nexports.builtins = builtinTypes;\n\nvar typeParsers = {\n  text: {},\n  binary: {}\n};\n\n//the empty parse function\nfunction noParse (val) {\n  return String(val);\n};\n\n//returns a function used to convert a specific type (specified by\n//oid) into a result javascript type\n//note: the oid can be obtained via the following sql query:\n//SELECT oid FROM pg_type WHERE typname = 'TYPE_NAME_HERE';\nfunction getTypeParser (oid, format) {\n  format = format || 'text';\n  if (!typeParsers[format]) {\n    return noParse;\n  }\n  return typeParsers[format][oid] || noParse;\n};\n\nfunction setTypeParser (oid, format, parseFn) {\n  if(typeof format == 'function') {\n    parseFn = format;\n    format = 'text';\n  }\n  typeParsers[format][oid] = parseFn;\n};\n\ntextParsers.init(function(oid, converter) {\n  typeParsers.text[oid] = converter;\n});\n\nbinaryParsers.init(function(oid, converter) {\n  typeParsers.binary[oid] = converter;\n});\n", "'use strict'\n\nmodule.exports = {\n  // database host. defaults to localhost\n  host: 'localhost',\n\n  // database user's name\n  user: process.platform === 'win32' ? process.env.USERNAME : process.env.USER,\n\n  // name of database to connect\n  database: undefined,\n\n  // database user's password\n  password: null,\n\n  // a Postgres connection string to be used instead of setting individual connection items\n  // NOTE:  Setting this value will cause it to override any other value (such as database or user) defined\n  // in the defaults object.\n  connectionString: undefined,\n\n  // database port\n  port: 5432,\n\n  // number of rows to return at a time from a prepared statement's\n  // portal. 0 will return all rows at once\n  rows: 0,\n\n  // binary result mode\n  binary: false,\n\n  // Connection pool options - see https://github.com/brianc/node-pg-pool\n\n  // number of connections to use in connection pool\n  // 0 will disable connection pooling\n  max: 10,\n\n  // max milliseconds a client can go unused before it is removed\n  // from the pool and destroyed\n  idleTimeoutMillis: 30000,\n\n  client_encoding: '',\n\n  ssl: false,\n\n  application_name: undefined,\n\n  fallback_application_name: undefined,\n\n  options: undefined,\n\n  parseInputDatesAsUTC: false,\n\n  // max milliseconds any query using this connection will execute for before timing out in error.\n  // false=unlimited\n  statement_timeout: false,\n\n  // Abort any statement that waits longer than the specified duration in milliseconds while attempting to acquire a lock.\n  // false=unlimited\n  lock_timeout: false,\n\n  // Terminate any session with an open transaction that has been idle for longer than the specified duration in milliseconds\n  // false=unlimited\n  idle_in_transaction_session_timeout: false,\n\n  // max milliseconds to wait for query to complete (client side)\n  query_timeout: false,\n\n  connect_timeout: 0,\n\n  keepalives: 1,\n\n  keepalives_idle: 0,\n}\n\nconst pgTypes = require('pg-types')\n// save default parsers\nconst parseBigInteger = pgTypes.getTypeParser(20, 'text')\nconst parseBigIntegerArray = pgTypes.getTypeParser(1016, 'text')\n\n// parse int8 so you can get your count values as actual numbers\nmodule.exports.__defineSetter__('parseInt8', function (val) {\n  pgTypes.setTypeParser(20, 'text', val ? pgTypes.getTypeParser(23, 'text') : parseBigInteger)\n  pgTypes.setTypeParser(1016, 'text', val ? pgTypes.getTypeParser(1007, 'text') : parseBigIntegerArray)\n})\n", "'use strict'\n\nconst defaults = require('./defaults')\n\nconst util = require('util')\nconst { isDate } = util.types || util // Node 8 doesn't have `util.types`\n\nfunction escapeElement(elementRepresentation) {\n  const escaped = elementRepresentation.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')\n\n  return '\"' + escaped + '\"'\n}\n\n// convert a JS array to a postgres array literal\n// uses comma separator so won't work for types like box that use\n// a different array separator.\nfunction arrayString(val) {\n  let result = '{'\n  for (let i = 0; i < val.length; i++) {\n    if (i > 0) {\n      result = result + ','\n    }\n    if (val[i] === null || typeof val[i] === 'undefined') {\n      result = result + 'NULL'\n    } else if (Array.isArray(val[i])) {\n      result = result + arrayString(val[i])\n    } else if (ArrayBuffer.isView(val[i])) {\n      let item = val[i]\n      if (!(item instanceof Buffer)) {\n        const buf = Buffer.from(item.buffer, item.byteOffset, item.byteLength)\n        if (buf.length === item.byteLength) {\n          item = buf\n        } else {\n          item = buf.slice(item.byteOffset, item.byteOffset + item.byteLength)\n        }\n      }\n      result += '\\\\\\\\x' + item.toString('hex')\n    } else {\n      result += escapeElement(prepareValue(val[i]))\n    }\n  }\n  result = result + '}'\n  return result\n}\n\n// converts values from javascript types\n// to their 'raw' counterparts for use as a postgres parameter\n// note: you can override this function to provide your own conversion mechanism\n// for complex types, etc...\nconst prepareValue = function (val, seen) {\n  // null and undefined are both null for postgres\n  if (val == null) {\n    return null\n  }\n  if (typeof val === 'object') {\n    if (val instanceof Buffer) {\n      return val\n    }\n    if (ArrayBuffer.isView(val)) {\n      const buf = Buffer.from(val.buffer, val.byteOffset, val.byteLength)\n      if (buf.length === val.byteLength) {\n        return buf\n      }\n      return buf.slice(val.byteOffset, val.byteOffset + val.byteLength) // Node.js v4 does not support those Buffer.from params\n    }\n    if (isDate(val)) {\n      if (defaults.parseInputDatesAsUTC) {\n        return dateToStringUTC(val)\n      } else {\n        return dateToString(val)\n      }\n    }\n    if (Array.isArray(val)) {\n      return arrayString(val)\n    }\n\n    return prepareObject(val, seen)\n  }\n  return val.toString()\n}\n\nfunction prepareObject(val, seen) {\n  if (val && typeof val.toPostgres === 'function') {\n    seen = seen || []\n    if (seen.indexOf(val) !== -1) {\n      throw new Error('circular reference detected while preparing \"' + val + '\" for query')\n    }\n    seen.push(val)\n\n    return prepareValue(val.toPostgres(prepareValue), seen)\n  }\n  return JSON.stringify(val)\n}\n\nfunction dateToString(date) {\n  let offset = -date.getTimezoneOffset()\n\n  let year = date.getFullYear()\n  const isBCYear = year < 1\n  if (isBCYear) year = Math.abs(year) + 1 // negative years are 1 off their BC representation\n\n  let ret =\n    String(year).padStart(4, '0') +\n    '-' +\n    String(date.getMonth() + 1).padStart(2, '0') +\n    '-' +\n    String(date.getDate()).padStart(2, '0') +\n    'T' +\n    String(date.getHours()).padStart(2, '0') +\n    ':' +\n    String(date.getMinutes()).padStart(2, '0') +\n    ':' +\n    String(date.getSeconds()).padStart(2, '0') +\n    '.' +\n    String(date.getMilliseconds()).padStart(3, '0')\n\n  if (offset < 0) {\n    ret += '-'\n    offset *= -1\n  } else {\n    ret += '+'\n  }\n\n  ret += String(Math.floor(offset / 60)).padStart(2, '0') + ':' + String(offset % 60).padStart(2, '0')\n  if (isBCYear) ret += ' BC'\n  return ret\n}\n\nfunction dateToStringUTC(date) {\n  let year = date.getUTCFullYear()\n  const isBCYear = year < 1\n  if (isBCYear) year = Math.abs(year) + 1 // negative years are 1 off their BC representation\n\n  let ret =\n    String(year).padStart(4, '0') +\n    '-' +\n    String(date.getUTCMonth() + 1).padStart(2, '0') +\n    '-' +\n    String(date.getUTCDate()).padStart(2, '0') +\n    'T' +\n    String(date.getUTCHours()).padStart(2, '0') +\n    ':' +\n    String(date.getUTCMinutes()).padStart(2, '0') +\n    ':' +\n    String(date.getUTCSeconds()).padStart(2, '0') +\n    '.' +\n    String(date.getUTCMilliseconds()).padStart(3, '0')\n\n  ret += '+00:00'\n  if (isBCYear) ret += ' BC'\n  return ret\n}\n\nfunction normalizeQueryConfig(config, values, callback) {\n  // can take in strings or config objects\n  config = typeof config === 'string' ? { text: config } : config\n  if (values) {\n    if (typeof values === 'function') {\n      config.callback = values\n    } else {\n      config.values = values\n    }\n  }\n  if (callback) {\n    config.callback = callback\n  }\n  return config\n}\n\n// Ported from PostgreSQL 9.2.4 source code in src/interfaces/libpq/fe-exec.c\nconst escapeIdentifier = function (str) {\n  return '\"' + str.replace(/\"/g, '\"\"') + '\"'\n}\n\nconst escapeLiteral = function (str) {\n  let hasBackslash = false\n  let escaped = \"'\"\n\n  if (str == null) {\n    return \"''\"\n  }\n\n  if (typeof str !== 'string') {\n    return \"''\"\n  }\n\n  for (let i = 0; i < str.length; i++) {\n    const c = str[i]\n    if (c === \"'\") {\n      escaped += c + c\n    } else if (c === '\\\\') {\n      escaped += c + c\n      hasBackslash = true\n    } else {\n      escaped += c\n    }\n  }\n\n  escaped += \"'\"\n\n  if (hasBackslash === true) {\n    escaped = ' E' + escaped\n  }\n\n  return escaped\n}\n\nmodule.exports = {\n  prepareValue: function prepareValueWrapper(value) {\n    // this ensures that extra arguments do not get passed into prepareValue\n    // by accident, eg: from calling values.map(utils.prepareValue)\n    return prepareValue(value)\n  },\n  normalizeQueryConfig,\n  escapeIdentifier,\n  escapeLiteral,\n}\n", "'use strict'\n// This file contains crypto utility functions for versions of Node.js < 15.0.0,\n// which does not support the WebCrypto.subtle API.\n\nconst nodeCrypto = require('crypto')\n\nfunction md5(string) {\n  return nodeCrypto.createHash('md5').update(string, 'utf-8').digest('hex')\n}\n\n// See AuthenticationMD5Password at https://www.postgresql.org/docs/current/static/protocol-flow.html\nfunction postgresMd5PasswordHash(user, password, salt) {\n  const inner = md5(password + user)\n  const outer = md5(Buffer.concat([Buffer.from(inner), salt]))\n  return 'md5' + outer\n}\n\nfunction sha256(text) {\n  return nodeCrypto.createHash('sha256').update(text).digest()\n}\n\nfunction hashByName(hashName, text) {\n  hashName = hashName.replace(/(\\D)-/, '$1') // e.g. SHA-256 -> SHA256\n  return nodeCrypto.createHash(hashName).update(text).digest()\n}\n\nfunction hmacSha256(key, msg) {\n  return nodeCrypto.createHmac('sha256', key).update(msg).digest()\n}\n\nasync function deriveKey(password, salt, iterations) {\n  return nodeCrypto.pbkdf2Sync(password, salt, iterations, 32, 'sha256')\n}\n\nmodule.exports = {\n  postgresMd5PasswordHash,\n  randomBytes: nodeCrypto.randomBytes,\n  deriveKey,\n  sha256,\n  hashByName,\n  hmacSha256,\n  md5,\n}\n", "const nodeCrypto = require('crypto')\n\nmodule.exports = {\n  postgresMd5PasswordHash,\n  randomBytes,\n  deriveKey,\n  sha256,\n  hashByName,\n  hmacSha256,\n  md5,\n}\n\n/**\n * The Web Crypto API - grabbed from the Node.js library or the global\n * @type Crypto\n */\n// eslint-disable-next-line no-undef\nconst webCrypto = nodeCrypto.webcrypto || globalThis.crypto\n/**\n * The SubtleCrypto API for low level crypto operations.\n * @type SubtleCrypto\n */\nconst subtleCrypto = webCrypto.subtle\nconst textEncoder = new TextEncoder()\n\n/**\n *\n * @param {*} length\n * @returns\n */\nfunction randomBytes(length) {\n  return webCrypto.getRandomValues(Buffer.alloc(length))\n}\n\nasync function md5(string) {\n  try {\n    return nodeCrypto.createHash('md5').update(string, 'utf-8').digest('hex')\n  } catch (e) {\n    // `createHash()` failed so we are probably not in Node.js, use the WebCrypto API instead.\n    // Note that the MD5 algorithm on WebCrypto is not available in Node.js.\n    // This is why we cannot just use WebCrypto in all environments.\n    const data = typeof string === 'string' ? textEncoder.encode(string) : string\n    const hash = await subtleCrypto.digest('MD5', data)\n    return Array.from(new Uint8Array(hash))\n      .map((b) => b.toString(16).padStart(2, '0'))\n      .join('')\n  }\n}\n\n// See AuthenticationMD5Password at https://www.postgresql.org/docs/current/static/protocol-flow.html\nasync function postgresMd5PasswordHash(user, password, salt) {\n  const inner = await md5(password + user)\n  const outer = await md5(Buffer.concat([Buffer.from(inner), salt]))\n  return 'md5' + outer\n}\n\n/**\n * Create a SHA-256 digest of the given data\n * @param {Buffer} data\n */\nasync function sha256(text) {\n  return await subtleCrypto.digest('SHA-256', text)\n}\n\nasync function hashByName(hashName, text) {\n  return await subtleCrypto.digest(hashName, text)\n}\n\n/**\n * Sign the message with the given key\n * @param {ArrayBuffer} keyBuffer\n * @param {string} msg\n */\nasync function hmacSha256(keyBuffer, msg) {\n  const key = await subtleCrypto.importKey('raw', keyBuffer, { name: 'HMAC', hash: 'SHA-256' }, false, ['sign'])\n  return await subtleCrypto.sign('HMAC', key, textEncoder.encode(msg))\n}\n\n/**\n * Derive a key from the password and salt\n * @param {string} password\n * @param {Uint8Array} salt\n * @param {number} iterations\n */\nasync function deriveKey(password, salt, iterations) {\n  const key = await subtleCrypto.importKey('raw', textEncoder.encode(password), 'PBKDF2', false, ['deriveBits'])\n  const params = { name: 'PBKDF2', hash: 'SHA-256', salt: salt, iterations: iterations }\n  return await subtleCrypto.deriveBits(params, key, 32 * 8, ['deriveBits'])\n}\n", "'use strict'\n\nconst useLegacyCrypto = parseInt(process.versions && process.versions.node && process.versions.node.split('.')[0]) < 15\nif (useLegacyCrypto) {\n  // We are on an old version of Node.js that requires legacy crypto utilities.\n  module.exports = require('./utils-legacy')\n} else {\n  module.exports = require('./utils-webcrypto')\n}\n", "function x509Error(msg, cert) {\n  return new Error('SASL channel binding: ' + msg + ' when parsing public certificate ' + cert.toString('base64'))\n}\n\nfunction readASN1Length(data, index) {\n  let length = data[index++]\n  if (length < 0x80) return { length, index }\n\n  const lengthBytes = length & 0x7f\n  if (lengthBytes > 4) throw x509Error('bad length', data)\n\n  length = 0\n  for (let i = 0; i < lengthBytes; i++) {\n    length = (length << 8) | data[index++]\n  }\n\n  return { length, index }\n}\n\nfunction readASN1OID(data, index) {\n  if (data[index++] !== 0x6) throw x509Error('non-OID data', data) // 6 = OID\n\n  const { length: OIDLength, index: indexAfterOIDLength } = readASN1Length(data, index)\n  index = indexAfterOIDLength\n  const lastIndex = index + OIDLength\n\n  const byte1 = data[index++]\n  let oid = ((byte1 / 40) >> 0) + '.' + (byte1 % 40)\n\n  while (index < lastIndex) {\n    // loop over numbers in OID\n    let value = 0\n    while (index < lastIndex) {\n      // loop over bytes in number\n      const nextByte = data[index++]\n      value = (value << 7) | (nextByte & 0x7f)\n      if (nextByte < 0x80) break\n    }\n    oid += '.' + value\n  }\n\n  return { oid, index }\n}\n\nfunction expectASN1Seq(data, index) {\n  if (data[index++] !== 0x30) throw x509Error('non-sequence data', data) // 30 = Sequence\n  return readASN1Length(data, index)\n}\n\nfunction signatureAlgorithmHashFromCertificate(data, index) {\n  // read this thread: https://www.postgresql.org/message-id/17760-b6c61e752ec07060%40postgresql.org\n  if (index === undefined) index = 0\n  index = expectASN1Seq(data, index).index\n  const { length: certInfoLength, index: indexAfterCertInfoLength } = expectASN1Seq(data, index)\n  index = indexAfterCertInfoLength + certInfoLength // skip over certificate info\n  index = expectASN1Seq(data, index).index // skip over signature length field\n  const { oid, index: indexAfterOID } = readASN1OID(data, index)\n  switch (oid) {\n    // RSA\n    case '1.2.840.113549.1.1.4':\n      return 'MD5'\n    case '1.2.840.113549.1.1.5':\n      return 'SHA-1'\n    case '1.2.840.113549.1.1.11':\n      return 'SHA-256'\n    case '1.2.840.113549.1.1.12':\n      return 'SHA-384'\n    case '1.2.840.113549.1.1.13':\n      return 'SHA-512'\n    case '1.2.840.113549.1.1.14':\n      return 'SHA-224'\n    case '1.2.840.113549.1.1.15':\n      return 'SHA512-224'\n    case '1.2.840.113549.1.1.16':\n      return 'SHA512-256'\n    // ECDSA\n    case '1.2.840.10045.4.1':\n      return 'SHA-1'\n    case '1.2.840.10045.4.3.1':\n      return 'SHA-224'\n    case '1.2.840.10045.4.3.2':\n      return 'SHA-256'\n    case '1.2.840.10045.4.3.3':\n      return 'SHA-384'\n    case '1.2.840.10045.4.3.4':\n      return 'SHA-512'\n    // RSASSA-PSS: hash is indicated separately\n    case '1.2.840.113549.1.1.10': {\n      index = indexAfterOID\n      index = expectASN1Seq(data, index).index\n      if (data[index++] !== 0xa0) throw x509Error('non-tag data', data) // a0 = constructed tag 0\n      index = readASN1Length(data, index).index // skip over tag length field\n      index = expectASN1Seq(data, index).index // skip over sequence length field\n      const { oid: hashOID } = readASN1OID(data, index)\n      switch (hashOID) {\n        // standalone hash OIDs\n        case '1.2.840.113549.2.5':\n          return 'MD5'\n        case '1.3.14.3.2.26':\n          return 'SHA-1'\n        case '2.16.840.1.101.3.4.2.1':\n          return 'SHA-256'\n        case '2.16.840.1.101.3.4.2.2':\n          return 'SHA-384'\n        case '2.16.840.1.101.3.4.2.3':\n          return 'SHA-512'\n      }\n      throw x509Error('unknown hash OID ' + hashOID, data)\n    }\n    // Ed25519 -- see https: return//github.com/openssl/openssl/issues/15477\n    case '1.3.101.110':\n    case '1.3.101.112': // ph\n      return 'SHA-512'\n    // Ed448 -- still not in pg 17.2 (if supported, digest would be SHAKE256 x 64 bytes)\n    case '1.3.101.111':\n    case '1.3.101.113': // ph\n      throw x509Error('Ed448 certificate channel binding is not currently supported by Postgres')\n  }\n  throw x509Error('unknown OID ' + oid, data)\n}\n\nmodule.exports = { signatureAlgorithmHashFromCertificate }\n", "'use strict'\nconst crypto = require('./utils')\nconst { signatureAlgorithmHashFromCertificate } = require('./cert-signatures')\n\nfunction startSession(mechanisms, stream) {\n  const candidates = ['SCRAM-SHA-256']\n  if (stream) candidates.unshift('SCRAM-SHA-256-PLUS') // higher-priority, so placed first\n\n  const mechanism = candidates.find((candidate) => mechanisms.includes(candidate))\n\n  if (!mechanism) {\n    throw new Error('SASL: Only mechanism(s) ' + candidates.join(' and ') + ' are supported')\n  }\n\n  if (mechanism === 'SCRAM-SHA-256-PLUS' && typeof stream.getPeerCertificate !== 'function') {\n    // this should never happen if we are really talking to a Postgres server\n    throw new Error('SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate')\n  }\n\n  const clientNonce = crypto.randomBytes(18).toString('base64')\n  const gs2Header = mechanism === 'SCRAM-SHA-256-PLUS' ? 'p=tls-server-end-point' : stream ? 'y' : 'n'\n\n  return {\n    mechanism,\n    clientNonce,\n    response: gs2Header + ',,n=*,r=' + clientNonce,\n    message: 'SASLInitialResponse',\n  }\n}\n\nasync function continueSession(session, password, serverData, stream) {\n  if (session.message !== 'SASLInitialResponse') {\n    throw new Error('SASL: Last message was not SASLInitialResponse')\n  }\n  if (typeof password !== 'string') {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string')\n  }\n  if (password === '') {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string')\n  }\n  if (typeof serverData !== 'string') {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string')\n  }\n\n  const sv = parseServerFirstMessage(serverData)\n\n  if (!sv.nonce.startsWith(session.clientNonce)) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce')\n  } else if (sv.nonce.length === session.clientNonce.length) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short')\n  }\n\n  const clientFirstMessageBare = 'n=*,r=' + session.clientNonce\n  const serverFirstMessage = 'r=' + sv.nonce + ',s=' + sv.salt + ',i=' + sv.iteration\n\n  // without channel binding:\n  let channelBinding = stream ? 'eSws' : 'biws' // 'y,,' or 'n,,', base64-encoded\n\n  // override if channel binding is in use:\n  if (session.mechanism === 'SCRAM-SHA-256-PLUS') {\n    const peerCert = stream.getPeerCertificate().raw\n    let hashName = signatureAlgorithmHashFromCertificate(peerCert)\n    if (hashName === 'MD5' || hashName === 'SHA-1') hashName = 'SHA-256'\n    const certHash = await crypto.hashByName(hashName, peerCert)\n    const bindingData = Buffer.concat([Buffer.from('p=tls-server-end-point,,'), Buffer.from(certHash)])\n    channelBinding = bindingData.toString('base64')\n  }\n\n  const clientFinalMessageWithoutProof = 'c=' + channelBinding + ',r=' + sv.nonce\n  const authMessage = clientFirstMessageBare + ',' + serverFirstMessage + ',' + clientFinalMessageWithoutProof\n\n  const saltBytes = Buffer.from(sv.salt, 'base64')\n  const saltedPassword = await crypto.deriveKey(password, saltBytes, sv.iteration)\n  const clientKey = await crypto.hmacSha256(saltedPassword, 'Client Key')\n  const storedKey = await crypto.sha256(clientKey)\n  const clientSignature = await crypto.hmacSha256(storedKey, authMessage)\n  const clientProof = xorBuffers(Buffer.from(clientKey), Buffer.from(clientSignature)).toString('base64')\n  const serverKey = await crypto.hmacSha256(saltedPassword, 'Server Key')\n  const serverSignatureBytes = await crypto.hmacSha256(serverKey, authMessage)\n\n  session.message = 'SASLResponse'\n  session.serverSignature = Buffer.from(serverSignatureBytes).toString('base64')\n  session.response = clientFinalMessageWithoutProof + ',p=' + clientProof\n}\n\nfunction finalizeSession(session, serverData) {\n  if (session.message !== 'SASLResponse') {\n    throw new Error('SASL: Last message was not SASLResponse')\n  }\n  if (typeof serverData !== 'string') {\n    throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string')\n  }\n\n  const { serverSignature } = parseServerFinalMessage(serverData)\n\n  if (serverSignature !== session.serverSignature) {\n    throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match')\n  }\n}\n\n/**\n * printable       = %x21-2B / %x2D-7E\n *                   ;; Printable ASCII except \",\".\n *                   ;; Note that any \"printable\" is also\n *                   ;; a valid \"value\".\n */\nfunction isPrintableChars(text) {\n  if (typeof text !== 'string') {\n    throw new TypeError('SASL: text must be a string')\n  }\n  return text\n    .split('')\n    .map((_, i) => text.charCodeAt(i))\n    .every((c) => (c >= 0x21 && c <= 0x2b) || (c >= 0x2d && c <= 0x7e))\n}\n\n/**\n * base64-char     = ALPHA / DIGIT / \"/\" / \"+\"\n *\n * base64-4        = 4base64-char\n *\n * base64-3        = 3base64-char \"=\"\n *\n * base64-2        = 2base64-char \"==\"\n *\n * base64          = *base64-4 [base64-3 / base64-2]\n */\nfunction isBase64(text) {\n  return /^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(text)\n}\n\nfunction parseAttributePairs(text) {\n  if (typeof text !== 'string') {\n    throw new TypeError('SASL: attribute pairs text must be a string')\n  }\n\n  return new Map(\n    text.split(',').map((attrValue) => {\n      if (!/^.=/.test(attrValue)) {\n        throw new Error('SASL: Invalid attribute pair entry')\n      }\n      const name = attrValue[0]\n      const value = attrValue.substring(2)\n      return [name, value]\n    })\n  )\n}\n\nfunction parseServerFirstMessage(data) {\n  const attrPairs = parseAttributePairs(data)\n\n  const nonce = attrPairs.get('r')\n  if (!nonce) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing')\n  } else if (!isPrintableChars(nonce)) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters')\n  }\n  const salt = attrPairs.get('s')\n  if (!salt) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing')\n  } else if (!isBase64(salt)) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64')\n  }\n  const iterationText = attrPairs.get('i')\n  if (!iterationText) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing')\n  } else if (!/^[1-9][0-9]*$/.test(iterationText)) {\n    throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count')\n  }\n  const iteration = parseInt(iterationText, 10)\n\n  return {\n    nonce,\n    salt,\n    iteration,\n  }\n}\n\nfunction parseServerFinalMessage(serverData) {\n  const attrPairs = parseAttributePairs(serverData)\n  const serverSignature = attrPairs.get('v')\n  if (!serverSignature) {\n    throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing')\n  } else if (!isBase64(serverSignature)) {\n    throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64')\n  }\n  return {\n    serverSignature,\n  }\n}\n\nfunction xorBuffers(a, b) {\n  if (!Buffer.isBuffer(a)) {\n    throw new TypeError('first argument must be a Buffer')\n  }\n  if (!Buffer.isBuffer(b)) {\n    throw new TypeError('second argument must be a Buffer')\n  }\n  if (a.length !== b.length) {\n    throw new Error('Buffer lengths must match')\n  }\n  if (a.length === 0) {\n    throw new Error('Buffers cannot be empty')\n  }\n  return Buffer.from(a.map((_, i) => a[i] ^ b[i]))\n}\n\nmodule.exports = {\n  startSession,\n  continueSession,\n  finalizeSession,\n}\n", "'use strict'\n\nconst types = require('pg-types')\n\nfunction TypeOverrides(userTypes) {\n  this._types = userTypes || types\n  this.text = {}\n  this.binary = {}\n}\n\nTypeOverrides.prototype.getOverrides = function (format) {\n  switch (format) {\n    case 'text':\n      return this.text\n    case 'binary':\n      return this.binary\n    default:\n      return {}\n  }\n}\n\nTypeOverrides.prototype.setTypeParser = function (oid, format, parseFn) {\n  if (typeof format === 'function') {\n    parseFn = format\n    format = 'text'\n  }\n  this.getOverrides(format)[oid] = parseFn\n}\n\nTypeOverrides.prototype.getTypeParser = function (oid, format) {\n  format = format || 'text'\n  return this.getOverrides(format)[oid] || this._types.getTypeParser(oid, format)\n}\n\nmodule.exports = TypeOverrides\n", "'use strict'\n\n//Parse method copied from https://github.com/brianc/node-postgres\n//Copyright (c) 2010-2014 Brian Carlson (brian.m.carlson@gmail.com)\n//MIT License\n\n//parses a connection string\nfunction parse(str, options = {}) {\n  //unix socket\n  if (str.charAt(0) === '/') {\n    const config = str.split(' ')\n    return { host: config[0], database: config[1] }\n  }\n\n  // Check for empty host in URL\n\n  const config = {}\n  let result\n  let dummyHost = false\n  if (/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(str)) {\n    // Ensure spaces are encoded as %20\n    str = encodeURI(str).replace(/%25(\\d\\d)/g, '%$1')\n  }\n\n  try {\n    try {\n      result = new URL(str, 'postgres://base')\n    } catch (e) {\n      // The URL is invalid so try again with a dummy host\n      result = new URL(str.replace('@/', '@___DUMMY___/'), 'postgres://base')\n      dummyHost = true\n    }\n  } catch (err) {\n    // Remove the input from the error message to avoid leaking sensitive information\n    err.input && (err.input = '*****REDACTED*****')\n  }\n\n  // We'd like to use Object.fromEntries() here but Node.js 10 does not support it\n  for (const entry of result.searchParams.entries()) {\n    config[entry[0]] = entry[1]\n  }\n\n  config.user = config.user || decodeURIComponent(result.username)\n  config.password = config.password || decodeURIComponent(result.password)\n\n  if (result.protocol == 'socket:') {\n    config.host = decodeURI(result.pathname)\n    config.database = result.searchParams.get('db')\n    config.client_encoding = result.searchParams.get('encoding')\n    return config\n  }\n  const hostname = dummyHost ? '' : result.hostname\n  if (!config.host) {\n    // Only set the host if there is no equivalent query param.\n    config.host = decodeURIComponent(hostname)\n  } else if (hostname && /^%2f/i.test(hostname)) {\n    // Only prepend the hostname to the pathname if it is not a URL encoded Unix socket host.\n    result.pathname = hostname + result.pathname\n  }\n  if (!config.port) {\n    // Only set the port if there is no equivalent query param.\n    config.port = result.port\n  }\n\n  const pathname = result.pathname.slice(1) || null\n  config.database = pathname ? decodeURI(pathname) : null\n\n  if (config.ssl === 'true' || config.ssl === '1') {\n    config.ssl = true\n  }\n\n  if (config.ssl === '0') {\n    config.ssl = false\n  }\n\n  if (config.sslcert || config.sslkey || config.sslrootcert || config.sslmode) {\n    config.ssl = {}\n  }\n\n  // Only try to load fs if we expect to read from the disk\n  const fs = config.sslcert || config.sslkey || config.sslrootcert ? require('fs') : null\n\n  if (config.sslcert) {\n    config.ssl.cert = fs.readFileSync(config.sslcert).toString()\n  }\n\n  if (config.sslkey) {\n    config.ssl.key = fs.readFileSync(config.sslkey).toString()\n  }\n\n  if (config.sslrootcert) {\n    config.ssl.ca = fs.readFileSync(config.sslrootcert).toString()\n  }\n\n  if (options.useLibpqCompat && config.uselibpqcompat) {\n    throw new Error('Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.')\n  }\n\n  if (config.uselibpqcompat === 'true' || options.useLibpqCompat) {\n    switch (config.sslmode) {\n      case 'disable': {\n        config.ssl = false\n        break\n      }\n      case 'prefer': {\n        config.ssl.rejectUnauthorized = false\n        break\n      }\n      case 'require': {\n        if (config.sslrootcert) {\n          // If a root CA is specified, behavior of `sslmode=require` will be the same as that of `verify-ca`\n          config.ssl.checkServerIdentity = function () {}\n        } else {\n          config.ssl.rejectUnauthorized = false\n        }\n        break\n      }\n      case 'verify-ca': {\n        if (!config.ssl.ca) {\n          throw new Error(\n            'SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.'\n          )\n        }\n        config.ssl.checkServerIdentity = function () {}\n        break\n      }\n      case 'verify-full': {\n        break\n      }\n    }\n  } else {\n    switch (config.sslmode) {\n      case 'disable': {\n        config.ssl = false\n        break\n      }\n      case 'prefer':\n      case 'require':\n      case 'verify-ca':\n      case 'verify-full': {\n        break\n      }\n      case 'no-verify': {\n        config.ssl.rejectUnauthorized = false\n        break\n      }\n    }\n  }\n\n  return config\n}\n\n// convert pg-connection-string ssl config to a ClientConfig.ConnectionOptions\nfunction toConnectionOptions(sslConfig) {\n  const connectionOptions = Object.entries(sslConfig).reduce((c, [key, value]) => {\n    // we explicitly check for undefined and null instead of `if (value)` because some\n    // options accept falsy values. Example: `ssl.rejectUnauthorized = false`\n    if (value !== undefined && value !== null) {\n      c[key] = value\n    }\n\n    return c\n  }, {})\n\n  return connectionOptions\n}\n\n// convert pg-connection-string config to a ClientConfig\nfunction toClientConfig(config) {\n  const poolConfig = Object.entries(config).reduce((c, [key, value]) => {\n    if (key === 'ssl') {\n      const sslConfig = value\n\n      if (typeof sslConfig === 'boolean') {\n        c[key] = sslConfig\n      }\n\n      if (typeof sslConfig === 'object') {\n        c[key] = toConnectionOptions(sslConfig)\n      }\n    } else if (value !== undefined && value !== null) {\n      if (key === 'port') {\n        // when port is not specified, it is converted into an empty string\n        // we want to avoid NaN or empty string as a values in ClientConfig\n        if (value !== '') {\n          const v = parseInt(value, 10)\n          if (isNaN(v)) {\n            throw new Error(`Invalid ${key}: ${value}`)\n          }\n\n          c[key] = v\n        }\n      } else {\n        c[key] = value\n      }\n    }\n\n    return c\n  }, {})\n\n  return poolConfig\n}\n\n// parses a connection string into ClientConfig\nfunction parseIntoClientConfig(str) {\n  return toClientConfig(parse(str))\n}\n\nmodule.exports = parse\n\nparse.parse = parse\nparse.toClientConfig = toClientConfig\nparse.parseIntoClientConfig = parseIntoClientConfig\n", "'use strict'\n\nconst dns = require('dns')\n\nconst defaults = require('./defaults')\n\nconst parse = require('pg-connection-string').parse // parses a connection string\n\nconst val = function (key, config, envVar) {\n  if (envVar === undefined) {\n    envVar = process.env['PG' + key.toUpperCase()]\n  } else if (envVar === false) {\n    // do nothing ... use false\n  } else {\n    envVar = process.env[envVar]\n  }\n\n  return config[key] || envVar || defaults[key]\n}\n\nconst readSSLConfigFromEnvironment = function () {\n  switch (process.env.PGSSLMODE) {\n    case 'disable':\n      return false\n    case 'prefer':\n    case 'require':\n    case 'verify-ca':\n    case 'verify-full':\n      return true\n    case 'no-verify':\n      return { rejectUnauthorized: false }\n  }\n  return defaults.ssl\n}\n\n// Convert arg to a string, surround in single quotes, and escape single quotes and backslashes\nconst quoteParamValue = function (value) {\n  return \"'\" + ('' + value).replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\") + \"'\"\n}\n\nconst add = function (params, config, paramName) {\n  const value = config[paramName]\n  if (value !== undefined && value !== null) {\n    params.push(paramName + '=' + quoteParamValue(value))\n  }\n}\n\nclass ConnectionParameters {\n  constructor(config) {\n    // if a string is passed, it is a raw connection string so we parse it into a config\n    config = typeof config === 'string' ? parse(config) : config || {}\n\n    // if the config has a connectionString defined, parse IT into the config we use\n    // this will override other default values with what is stored in connectionString\n    if (config.connectionString) {\n      config = Object.assign({}, config, parse(config.connectionString))\n    }\n\n    this.user = val('user', config)\n    this.database = val('database', config)\n\n    if (this.database === undefined) {\n      this.database = this.user\n    }\n\n    this.port = parseInt(val('port', config), 10)\n    this.host = val('host', config)\n\n    // \"hiding\" the password so it doesn't show up in stack traces\n    // or if the client is console.logged\n    Object.defineProperty(this, 'password', {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: val('password', config),\n    })\n\n    this.binary = val('binary', config)\n    this.options = val('options', config)\n\n    this.ssl = typeof config.ssl === 'undefined' ? readSSLConfigFromEnvironment() : config.ssl\n\n    if (typeof this.ssl === 'string') {\n      if (this.ssl === 'true') {\n        this.ssl = true\n      }\n    }\n    // support passing in ssl=no-verify via connection string\n    if (this.ssl === 'no-verify') {\n      this.ssl = { rejectUnauthorized: false }\n    }\n    if (this.ssl && this.ssl.key) {\n      Object.defineProperty(this.ssl, 'key', {\n        enumerable: false,\n      })\n    }\n\n    this.client_encoding = val('client_encoding', config)\n    this.replication = val('replication', config)\n    // a domain socket begins with '/'\n    this.isDomainSocket = !(this.host || '').indexOf('/')\n\n    this.application_name = val('application_name', config, 'PGAPPNAME')\n    this.fallback_application_name = val('fallback_application_name', config, false)\n    this.statement_timeout = val('statement_timeout', config, false)\n    this.lock_timeout = val('lock_timeout', config, false)\n    this.idle_in_transaction_session_timeout = val('idle_in_transaction_session_timeout', config, false)\n    this.query_timeout = val('query_timeout', config, false)\n\n    if (config.connectionTimeoutMillis === undefined) {\n      this.connect_timeout = process.env.PGCONNECT_TIMEOUT || 0\n    } else {\n      this.connect_timeout = Math.floor(config.connectionTimeoutMillis / 1000)\n    }\n\n    if (config.keepAlive === false) {\n      this.keepalives = 0\n    } else if (config.keepAlive === true) {\n      this.keepalives = 1\n    }\n\n    if (typeof config.keepAliveInitialDelayMillis === 'number') {\n      this.keepalives_idle = Math.floor(config.keepAliveInitialDelayMillis / 1000)\n    }\n  }\n\n  getLibpqConnectionString(cb) {\n    const params = []\n    add(params, this, 'user')\n    add(params, this, 'password')\n    add(params, this, 'port')\n    add(params, this, 'application_name')\n    add(params, this, 'fallback_application_name')\n    add(params, this, 'connect_timeout')\n    add(params, this, 'options')\n\n    const ssl = typeof this.ssl === 'object' ? this.ssl : this.ssl ? { sslmode: this.ssl } : {}\n    add(params, ssl, 'sslmode')\n    add(params, ssl, 'sslca')\n    add(params, ssl, 'sslkey')\n    add(params, ssl, 'sslcert')\n    add(params, ssl, 'sslrootcert')\n\n    if (this.database) {\n      params.push('dbname=' + quoteParamValue(this.database))\n    }\n    if (this.replication) {\n      params.push('replication=' + quoteParamValue(this.replication))\n    }\n    if (this.host) {\n      params.push('host=' + quoteParamValue(this.host))\n    }\n    if (this.isDomainSocket) {\n      return cb(null, params.join(' '))\n    }\n    if (this.client_encoding) {\n      params.push('client_encoding=' + quoteParamValue(this.client_encoding))\n    }\n    dns.lookup(this.host, function (err, address) {\n      if (err) return cb(err, null)\n      params.push('hostaddr=' + quoteParamValue(address))\n      return cb(null, params.join(' '))\n    })\n  }\n}\n\nmodule.exports = ConnectionParameters\n", "'use strict'\n\nconst types = require('pg-types')\n\nconst matchRegexp = /^([A-Za-z]+)(?: (\\d+))?(?: (\\d+))?/\n\n// result object returned from query\n// in the 'end' event and also\n// passed as second argument to provided callback\nclass Result {\n  constructor(rowMode, types) {\n    this.command = null\n    this.rowCount = null\n    this.oid = null\n    this.rows = []\n    this.fields = []\n    this._parsers = undefined\n    this._types = types\n    this.RowCtor = null\n    this.rowAsArray = rowMode === 'array'\n    if (this.rowAsArray) {\n      this.parseRow = this._parseRowAsArray\n    }\n    this._prebuiltEmptyResultObject = null\n  }\n\n  // adds a command complete message\n  addCommandComplete(msg) {\n    let match\n    if (msg.text) {\n      // pure javascript\n      match = matchRegexp.exec(msg.text)\n    } else {\n      // native bindings\n      match = matchRegexp.exec(msg.command)\n    }\n    if (match) {\n      this.command = match[1]\n      if (match[3]) {\n        // COMMAND OID ROWS\n        this.oid = parseInt(match[2], 10)\n        this.rowCount = parseInt(match[3], 10)\n      } else if (match[2]) {\n        // COMMAND ROWS\n        this.rowCount = parseInt(match[2], 10)\n      }\n    }\n  }\n\n  _parseRowAsArray(rowData) {\n    const row = new Array(rowData.length)\n    for (let i = 0, len = rowData.length; i < len; i++) {\n      const rawValue = rowData[i]\n      if (rawValue !== null) {\n        row[i] = this._parsers[i](rawValue)\n      } else {\n        row[i] = null\n      }\n    }\n    return row\n  }\n\n  parseRow(rowData) {\n    const row = { ...this._prebuiltEmptyResultObject }\n    for (let i = 0, len = rowData.length; i < len; i++) {\n      const rawValue = rowData[i]\n      const field = this.fields[i].name\n      if (rawValue !== null) {\n        const v = this.fields[i].format === 'binary' ? Buffer.from(rawValue) : rawValue\n        row[field] = this._parsers[i](v)\n      } else {\n        row[field] = null\n      }\n    }\n    return row\n  }\n\n  addRow(row) {\n    this.rows.push(row)\n  }\n\n  addFields(fieldDescriptions) {\n    // clears field definitions\n    // multiple query statements in 1 action can result in multiple sets\n    // of rowDescriptions...eg: 'select NOW(); select 1::int;'\n    // you need to reset the fields\n    this.fields = fieldDescriptions\n    if (this.fields.length) {\n      this._parsers = new Array(fieldDescriptions.length)\n    }\n\n    const row = {}\n\n    for (let i = 0; i < fieldDescriptions.length; i++) {\n      const desc = fieldDescriptions[i]\n      row[desc.name] = null\n\n      if (this._types) {\n        this._parsers[i] = this._types.getTypeParser(desc.dataTypeID, desc.format || 'text')\n      } else {\n        this._parsers[i] = types.getTypeParser(desc.dataTypeID, desc.format || 'text')\n      }\n    }\n\n    this._prebuiltEmptyResultObject = { ...row }\n  }\n}\n\nmodule.exports = Result\n", "'use strict'\n\nconst { EventEmitter } = require('events')\n\nconst Result = require('./result')\nconst utils = require('./utils')\n\nclass Query extends EventEmitter {\n  constructor(config, values, callback) {\n    super()\n\n    config = utils.normalizeQueryConfig(config, values, callback)\n\n    this.text = config.text\n    this.values = config.values\n    this.rows = config.rows\n    this.types = config.types\n    this.name = config.name\n    this.queryMode = config.queryMode\n    this.binary = config.binary\n    // use unique portal name each time\n    this.portal = config.portal || ''\n    this.callback = config.callback\n    this._rowMode = config.rowMode\n    if (process.domain && config.callback) {\n      this.callback = process.domain.bind(config.callback)\n    }\n    this._result = new Result(this._rowMode, this.types)\n\n    // potential for multiple results\n    this._results = this._result\n    this._canceledDueToError = false\n  }\n\n  requiresPreparation() {\n    if (this.queryMode === 'extended') {\n      return true\n    }\n\n    // named queries must always be prepared\n    if (this.name) {\n      return true\n    }\n    // always prepare if there are max number of rows expected per\n    // portal execution\n    if (this.rows) {\n      return true\n    }\n    // don't prepare empty text queries\n    if (!this.text) {\n      return false\n    }\n    // prepare if there are values\n    if (!this.values) {\n      return false\n    }\n    return this.values.length > 0\n  }\n\n  _checkForMultirow() {\n    // if we already have a result with a command property\n    // then we've already executed one query in a multi-statement simple query\n    // turn our results into an array of results\n    if (this._result.command) {\n      if (!Array.isArray(this._results)) {\n        this._results = [this._result]\n      }\n      this._result = new Result(this._rowMode, this._result._types)\n      this._results.push(this._result)\n    }\n  }\n\n  // associates row metadata from the supplied\n  // message with this query object\n  // metadata used when parsing row results\n  handleRowDescription(msg) {\n    this._checkForMultirow()\n    this._result.addFields(msg.fields)\n    this._accumulateRows = this.callback || !this.listeners('row').length\n  }\n\n  handleDataRow(msg) {\n    let row\n\n    if (this._canceledDueToError) {\n      return\n    }\n\n    try {\n      row = this._result.parseRow(msg.fields)\n    } catch (err) {\n      this._canceledDueToError = err\n      return\n    }\n\n    this.emit('row', row, this._result)\n    if (this._accumulateRows) {\n      this._result.addRow(row)\n    }\n  }\n\n  handleCommandComplete(msg, connection) {\n    this._checkForMultirow()\n    this._result.addCommandComplete(msg)\n    // need to sync after each command complete of a prepared statement\n    // if we were using a row count which results in multiple calls to _getRows\n    if (this.rows) {\n      connection.sync()\n    }\n  }\n\n  // if a named prepared statement is created with empty query text\n  // the backend will send an emptyQuery message but *not* a command complete message\n  // since we pipeline sync immediately after execute we don't need to do anything here\n  // unless we have rows specified, in which case we did not pipeline the initial sync call\n  handleEmptyQuery(connection) {\n    if (this.rows) {\n      connection.sync()\n    }\n  }\n\n  handleError(err, connection) {\n    // need to sync after error during a prepared statement\n    if (this._canceledDueToError) {\n      err = this._canceledDueToError\n      this._canceledDueToError = false\n    }\n    // if callback supplied do not emit error event as uncaught error\n    // events will bubble up to node process\n    if (this.callback) {\n      return this.callback(err)\n    }\n    this.emit('error', err)\n  }\n\n  handleReadyForQuery(con) {\n    if (this._canceledDueToError) {\n      return this.handleError(this._canceledDueToError, con)\n    }\n    if (this.callback) {\n      try {\n        this.callback(null, this._results)\n      } catch (err) {\n        process.nextTick(() => {\n          throw err\n        })\n      }\n    }\n    this.emit('end', this._results)\n  }\n\n  submit(connection) {\n    if (typeof this.text !== 'string' && typeof this.name !== 'string') {\n      return new Error('A query must have either text or a name. Supplying neither is unsupported.')\n    }\n    const previous = connection.parsedStatements[this.name]\n    if (this.text && previous && this.text !== previous) {\n      return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`)\n    }\n    if (this.values && !Array.isArray(this.values)) {\n      return new Error('Query values must be an array')\n    }\n    if (this.requiresPreparation()) {\n      // If we're using the extended query protocol we fire off several separate commands\n      // to the backend. On some versions of node & some operating system versions\n      // the network stack writes each message separately instead of buffering them together\n      // causing the client & network to send more slowly. Corking & uncorking the stream\n      // allows node to buffer up the messages internally before sending them all off at once.\n      // note: we're checking for existence of cork/uncork because some versions of streams\n      // might not have this (cloudflare?)\n      connection.stream.cork && connection.stream.cork()\n      try {\n        this.prepare(connection)\n      } finally {\n        // while unlikely for this.prepare to throw, if it does & we don't uncork this stream\n        // this client becomes unresponsive, so put in finally block \"just in case\"\n        connection.stream.uncork && connection.stream.uncork()\n      }\n    } else {\n      connection.query(this.text)\n    }\n    return null\n  }\n\n  hasBeenParsed(connection) {\n    return this.name && connection.parsedStatements[this.name]\n  }\n\n  handlePortalSuspended(connection) {\n    this._getRows(connection, this.rows)\n  }\n\n  _getRows(connection, rows) {\n    connection.execute({\n      portal: this.portal,\n      rows: rows,\n    })\n    // if we're not reading pages of rows send the sync command\n    // to indicate the pipeline is finished\n    if (!rows) {\n      connection.sync()\n    } else {\n      // otherwise flush the call out to read more rows\n      connection.flush()\n    }\n  }\n\n  // http://developer.postgresql.org/pgdocs/postgres/protocol-flow.html#PROTOCOL-FLOW-EXT-QUERY\n  prepare(connection) {\n    // TODO refactor this poor encapsulation\n    if (!this.hasBeenParsed(connection)) {\n      connection.parse({\n        text: this.text,\n        name: this.name,\n        types: this.types,\n      })\n    }\n\n    // because we're mapping user supplied values to\n    // postgres wire protocol compatible values it could\n    // throw an exception, so try/catch this section\n    try {\n      connection.bind({\n        portal: this.portal,\n        statement: this.name,\n        values: this.values,\n        binary: this.binary,\n        valueMapper: utils.prepareValue,\n      })\n    } catch (err) {\n      this.handleError(err, connection)\n      return\n    }\n\n    connection.describe({\n      type: 'P',\n      name: this.portal || '',\n    })\n\n    this._getRows(connection, this.rows)\n  }\n\n  handleCopyInResponse(connection) {\n    connection.sendCopyFail('No source stream defined')\n  }\n\n  handleCopyData(msg, connection) {\n    // noop\n  }\n}\n\nmodule.exports = Query\n", "export type Mode = 'text' | 'binary'\n\nexport type MessageName =\n  | 'parseComplete'\n  | 'bindComplete'\n  | 'closeComplete'\n  | 'noData'\n  | 'portalSuspended'\n  | 'replicationStart'\n  | 'emptyQuery'\n  | 'copyDone'\n  | 'copyData'\n  | 'rowDescription'\n  | 'parameterDescription'\n  | 'parameterStatus'\n  | 'backendKeyData'\n  | 'notification'\n  | 'readyForQuery'\n  | 'commandComplete'\n  | 'dataRow'\n  | 'copyInResponse'\n  | 'copyOutResponse'\n  | 'authenticationOk'\n  | 'authenticationMD5Password'\n  | 'authenticationCleartextPassword'\n  | 'authenticationSASL'\n  | 'authenticationSASLContinue'\n  | 'authenticationSASLFinal'\n  | 'error'\n  | 'notice'\n\nexport interface BackendMessage {\n  name: MessageName\n  length: number\n}\n\nexport const parseComplete: BackendMessage = {\n  name: 'parseComplete',\n  length: 5,\n}\n\nexport const bindComplete: BackendMessage = {\n  name: 'bindComplete',\n  length: 5,\n}\n\nexport const closeComplete: BackendMessage = {\n  name: 'closeComplete',\n  length: 5,\n}\n\nexport const noData: BackendMessage = {\n  name: 'noData',\n  length: 5,\n}\n\nexport const portalSuspended: BackendMessage = {\n  name: 'portalSuspended',\n  length: 5,\n}\n\nexport const replicationStart: BackendMessage = {\n  name: 'replicationStart',\n  length: 4,\n}\n\nexport const emptyQuery: BackendMessage = {\n  name: 'emptyQuery',\n  length: 4,\n}\n\nexport const copyDone: BackendMessage = {\n  name: 'copyDone',\n  length: 4,\n}\n\ninterface NoticeOrError {\n  message: string | undefined\n  severity: string | undefined\n  code: string | undefined\n  detail: string | undefined\n  hint: string | undefined\n  position: string | undefined\n  internalPosition: string | undefined\n  internalQuery: string | undefined\n  where: string | undefined\n  schema: string | undefined\n  table: string | undefined\n  column: string | undefined\n  dataType: string | undefined\n  constraint: string | undefined\n  file: string | undefined\n  line: string | undefined\n  routine: string | undefined\n}\n\nexport class DatabaseError extends Error implements NoticeOrError {\n  public severity: string | undefined\n  public code: string | undefined\n  public detail: string | undefined\n  public hint: string | undefined\n  public position: string | undefined\n  public internalPosition: string | undefined\n  public internalQuery: string | undefined\n  public where: string | undefined\n  public schema: string | undefined\n  public table: string | undefined\n  public column: string | undefined\n  public dataType: string | undefined\n  public constraint: string | undefined\n  public file: string | undefined\n  public line: string | undefined\n  public routine: string | undefined\n  constructor(\n    message: string,\n    public readonly length: number,\n    public readonly name: MessageName\n  ) {\n    super(message)\n  }\n}\n\nexport class CopyDataMessage {\n  public readonly name = 'copyData'\n  constructor(\n    public readonly length: number,\n    public readonly chunk: Buffer\n  ) {}\n}\n\nexport class CopyResponse {\n  public readonly columnTypes: number[]\n  constructor(\n    public readonly length: number,\n    public readonly name: MessageName,\n    public readonly binary: boolean,\n    columnCount: number\n  ) {\n    this.columnTypes = new Array(columnCount)\n  }\n}\n\nexport class Field {\n  constructor(\n    public readonly name: string,\n    public readonly tableID: number,\n    public readonly columnID: number,\n    public readonly dataTypeID: number,\n    public readonly dataTypeSize: number,\n    public readonly dataTypeModifier: number,\n    public readonly format: Mode\n  ) {}\n}\n\nexport class RowDescriptionMessage {\n  public readonly name: MessageName = 'rowDescription'\n  public readonly fields: Field[]\n  constructor(\n    public readonly length: number,\n    public readonly fieldCount: number\n  ) {\n    this.fields = new Array(this.fieldCount)\n  }\n}\n\nexport class ParameterDescriptionMessage {\n  public readonly name: MessageName = 'parameterDescription'\n  public readonly dataTypeIDs: number[]\n  constructor(\n    public readonly length: number,\n    public readonly parameterCount: number\n  ) {\n    this.dataTypeIDs = new Array(this.parameterCount)\n  }\n}\n\nexport class ParameterStatusMessage {\n  public readonly name: MessageName = 'parameterStatus'\n  constructor(\n    public readonly length: number,\n    public readonly parameterName: string,\n    public readonly parameterValue: string\n  ) {}\n}\n\nexport class AuthenticationMD5Password implements BackendMessage {\n  public readonly name: MessageName = 'authenticationMD5Password'\n  constructor(\n    public readonly length: number,\n    public readonly salt: Buffer\n  ) {}\n}\n\nexport class BackendKeyDataMessage {\n  public readonly name: MessageName = 'backendKeyData'\n  constructor(\n    public readonly length: number,\n    public readonly processID: number,\n    public readonly secretKey: number\n  ) {}\n}\n\nexport class NotificationResponseMessage {\n  public readonly name: MessageName = 'notification'\n  constructor(\n    public readonly length: number,\n    public readonly processId: number,\n    public readonly channel: string,\n    public readonly payload: string\n  ) {}\n}\n\nexport class ReadyForQueryMessage {\n  public readonly name: MessageName = 'readyForQuery'\n  constructor(\n    public readonly length: number,\n    public readonly status: string\n  ) {}\n}\n\nexport class CommandCompleteMessage {\n  public readonly name: MessageName = 'commandComplete'\n  constructor(\n    public readonly length: number,\n    public readonly text: string\n  ) {}\n}\n\nexport class DataRowMessage {\n  public readonly fieldCount: number\n  public readonly name: MessageName = 'dataRow'\n  constructor(\n    public length: number,\n    public fields: any[]\n  ) {\n    this.fieldCount = fields.length\n  }\n}\n\nexport class NoticeMessage implements BackendMessage, NoticeOrError {\n  constructor(\n    public readonly length: number,\n    public readonly message: string | undefined\n  ) {}\n  public readonly name = 'notice'\n  public severity: string | undefined\n  public code: string | undefined\n  public detail: string | undefined\n  public hint: string | undefined\n  public position: string | undefined\n  public internalPosition: string | undefined\n  public internalQuery: string | undefined\n  public where: string | undefined\n  public schema: string | undefined\n  public table: string | undefined\n  public column: string | undefined\n  public dataType: string | undefined\n  public constraint: string | undefined\n  public file: string | undefined\n  public line: string | undefined\n  public routine: string | undefined\n}\n", "//binary data writer tuned for encoding binary specific to the postgres binary protocol\n\nexport class Writer {\n  private buffer: Buffer\n  private offset: number = 5\n  private headerPosition: number = 0\n  constructor(private size = 256) {\n    this.buffer = Buffer.allocUnsafe(size)\n  }\n\n  private ensure(size: number): void {\n    const remaining = this.buffer.length - this.offset\n    if (remaining < size) {\n      const oldBuffer = this.buffer\n      // exponential growth factor of around ~ 1.5\n      // https://stackoverflow.com/questions/2269063/buffer-growth-strategy\n      const newSize = oldBuffer.length + (oldBuffer.length >> 1) + size\n      this.buffer = Buffer.allocUnsafe(newSize)\n      oldBuffer.copy(this.buffer)\n    }\n  }\n\n  public addInt32(num: number): Writer {\n    this.ensure(4)\n    this.buffer[this.offset++] = (num >>> 24) & 0xff\n    this.buffer[this.offset++] = (num >>> 16) & 0xff\n    this.buffer[this.offset++] = (num >>> 8) & 0xff\n    this.buffer[this.offset++] = (num >>> 0) & 0xff\n    return this\n  }\n\n  public addInt16(num: number): Writer {\n    this.ensure(2)\n    this.buffer[this.offset++] = (num >>> 8) & 0xff\n    this.buffer[this.offset++] = (num >>> 0) & 0xff\n    return this\n  }\n\n  public addCString(string: string): Writer {\n    if (!string) {\n      this.ensure(1)\n    } else {\n      const len = Buffer.byteLength(string)\n      this.ensure(len + 1) // +1 for null terminator\n      this.buffer.write(string, this.offset, 'utf-8')\n      this.offset += len\n    }\n\n    this.buffer[this.offset++] = 0 // null terminator\n    return this\n  }\n\n  public addString(string: string = ''): Writer {\n    const len = Buffer.byteLength(string)\n    this.ensure(len)\n    this.buffer.write(string, this.offset)\n    this.offset += len\n    return this\n  }\n\n  public add(otherBuffer: Buffer): Writer {\n    this.ensure(otherBuffer.length)\n    otherBuffer.copy(this.buffer, this.offset)\n    this.offset += otherBuffer.length\n    return this\n  }\n\n  private join(code?: number): Buffer {\n    if (code) {\n      this.buffer[this.headerPosition] = code\n      //length is everything in this packet minus the code\n      const length = this.offset - (this.headerPosition + 1)\n      this.buffer.writeInt32BE(length, this.headerPosition + 1)\n    }\n    return this.buffer.slice(code ? 0 : 5, this.offset)\n  }\n\n  public flush(code?: number): Buffer {\n    const result = this.join(code)\n    this.offset = 5\n    this.headerPosition = 0\n    this.buffer = Buffer.allocUnsafe(this.size)\n    return result\n  }\n}\n", "import { Writer } from './buffer-writer'\n\nconst enum code {\n  startup = 0x70,\n  query = 0x51,\n  parse = 0x50,\n  bind = 0x42,\n  execute = 0x45,\n  flush = 0x48,\n  sync = 0x53,\n  end = 0x58,\n  close = 0x43,\n  describe = 0x44,\n  copyFromChunk = 0x64,\n  copyDone = 0x63,\n  copyFail = 0x66,\n}\n\nconst writer = new Writer()\n\nconst startup = (opts: Record<string, string>): Buffer => {\n  // protocol version\n  writer.addInt16(3).addInt16(0)\n  for (const key of Object.keys(opts)) {\n    writer.addCString(key).addCString(opts[key])\n  }\n\n  writer.addCString('client_encoding').addCString('UTF8')\n\n  const bodyBuffer = writer.addCString('').flush()\n  // this message is sent without a code\n\n  const length = bodyBuffer.length + 4\n\n  return new Writer().addInt32(length).add(bodyBuffer).flush()\n}\n\nconst requestSsl = (): Buffer => {\n  const response = Buffer.allocUnsafe(8)\n  response.writeInt32BE(8, 0)\n  response.writeInt32BE(80877103, 4)\n  return response\n}\n\nconst password = (password: string): Buffer => {\n  return writer.addCString(password).flush(code.startup)\n}\n\nconst sendSASLInitialResponseMessage = function (mechanism: string, initialResponse: string): Buffer {\n  // 0x70 = 'p'\n  writer.addCString(mechanism).addInt32(Buffer.byteLength(initialResponse)).addString(initialResponse)\n\n  return writer.flush(code.startup)\n}\n\nconst sendSCRAMClientFinalMessage = function (additionalData: string): Buffer {\n  return writer.addString(additionalData).flush(code.startup)\n}\n\nconst query = (text: string): Buffer => {\n  return writer.addCString(text).flush(code.query)\n}\n\ntype ParseOpts = {\n  name?: string\n  types?: number[]\n  text: string\n}\n\nconst emptyArray: any[] = []\n\nconst parse = (query: ParseOpts): Buffer => {\n  // expect something like this:\n  // { name: 'queryName',\n  //   text: 'select * from blah',\n  //   types: ['int8', 'bool'] }\n\n  // normalize missing query names to allow for null\n  const name = query.name || ''\n  if (name.length > 63) {\n    console.error('Warning! Postgres only supports 63 characters for query names.')\n    console.error('You supplied %s (%s)', name, name.length)\n    console.error('This can cause conflicts and silent errors executing queries')\n  }\n\n  const types = query.types || emptyArray\n\n  const len = types.length\n\n  const buffer = writer\n    .addCString(name) // name of query\n    .addCString(query.text) // actual query text\n    .addInt16(len)\n\n  for (let i = 0; i < len; i++) {\n    buffer.addInt32(types[i])\n  }\n\n  return writer.flush(code.parse)\n}\n\ntype ValueMapper = (param: any, index: number) => any\n\ntype BindOpts = {\n  portal?: string\n  binary?: boolean\n  statement?: string\n  values?: any[]\n  // optional map from JS value to postgres value per parameter\n  valueMapper?: ValueMapper\n}\n\nconst paramWriter = new Writer()\n\n// make this a const enum so typescript will inline the value\nconst enum ParamType {\n  STRING = 0,\n  BINARY = 1,\n}\n\nconst writeValues = function (values: any[], valueMapper?: ValueMapper): void {\n  for (let i = 0; i < values.length; i++) {\n    const mappedVal = valueMapper ? valueMapper(values[i], i) : values[i]\n    if (mappedVal == null) {\n      // add the param type (string) to the writer\n      writer.addInt16(ParamType.STRING)\n      // write -1 to the param writer to indicate null\n      paramWriter.addInt32(-1)\n    } else if (mappedVal instanceof Buffer) {\n      // add the param type (binary) to the writer\n      writer.addInt16(ParamType.BINARY)\n      // add the buffer to the param writer\n      paramWriter.addInt32(mappedVal.length)\n      paramWriter.add(mappedVal)\n    } else {\n      // add the param type (string) to the writer\n      writer.addInt16(ParamType.STRING)\n      paramWriter.addInt32(Buffer.byteLength(mappedVal))\n      paramWriter.addString(mappedVal)\n    }\n  }\n}\n\nconst bind = (config: BindOpts = {}): Buffer => {\n  // normalize config\n  const portal = config.portal || ''\n  const statement = config.statement || ''\n  const binary = config.binary || false\n  const values = config.values || emptyArray\n  const len = values.length\n\n  writer.addCString(portal).addCString(statement)\n  writer.addInt16(len)\n\n  writeValues(values, config.valueMapper)\n\n  writer.addInt16(len)\n  writer.add(paramWriter.flush())\n\n  // all results use the same format code\n  writer.addInt16(1)\n  // format code\n  writer.addInt16(binary ? ParamType.BINARY : ParamType.STRING)\n  return writer.flush(code.bind)\n}\n\ntype ExecOpts = {\n  portal?: string\n  rows?: number\n}\n\nconst emptyExecute = Buffer.from([code.execute, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00])\n\nconst execute = (config?: ExecOpts): Buffer => {\n  // this is the happy path for most queries\n  if (!config || (!config.portal && !config.rows)) {\n    return emptyExecute\n  }\n\n  const portal = config.portal || ''\n  const rows = config.rows || 0\n\n  const portalLength = Buffer.byteLength(portal)\n  const len = 4 + portalLength + 1 + 4\n  // one extra bit for code\n  const buff = Buffer.allocUnsafe(1 + len)\n  buff[0] = code.execute\n  buff.writeInt32BE(len, 1)\n  buff.write(portal, 5, 'utf-8')\n  buff[portalLength + 5] = 0 // null terminate portal cString\n  buff.writeUInt32BE(rows, buff.length - 4)\n  return buff\n}\n\nconst cancel = (processID: number, secretKey: number): Buffer => {\n  const buffer = Buffer.allocUnsafe(16)\n  buffer.writeInt32BE(16, 0)\n  buffer.writeInt16BE(1234, 4)\n  buffer.writeInt16BE(5678, 6)\n  buffer.writeInt32BE(processID, 8)\n  buffer.writeInt32BE(secretKey, 12)\n  return buffer\n}\n\ntype PortalOpts = {\n  type: 'S' | 'P'\n  name?: string\n}\n\nconst cstringMessage = (code: code, string: string): Buffer => {\n  const stringLen = Buffer.byteLength(string)\n  const len = 4 + stringLen + 1\n  // one extra bit for code\n  const buffer = Buffer.allocUnsafe(1 + len)\n  buffer[0] = code\n  buffer.writeInt32BE(len, 1)\n  buffer.write(string, 5, 'utf-8')\n  buffer[len] = 0 // null terminate cString\n  return buffer\n}\n\nconst emptyDescribePortal = writer.addCString('P').flush(code.describe)\nconst emptyDescribeStatement = writer.addCString('S').flush(code.describe)\n\nconst describe = (msg: PortalOpts): Buffer => {\n  return msg.name\n    ? cstringMessage(code.describe, `${msg.type}${msg.name || ''}`)\n    : msg.type === 'P'\n    ? emptyDescribePortal\n    : emptyDescribeStatement\n}\n\nconst close = (msg: PortalOpts): Buffer => {\n  const text = `${msg.type}${msg.name || ''}`\n  return cstringMessage(code.close, text)\n}\n\nconst copyData = (chunk: Buffer): Buffer => {\n  return writer.add(chunk).flush(code.copyFromChunk)\n}\n\nconst copyFail = (message: string): Buffer => {\n  return cstringMessage(code.copyFail, message)\n}\n\nconst codeOnlyBuffer = (code: code): Buffer => Buffer.from([code, 0x00, 0x00, 0x00, 0x04])\n\nconst flushBuffer = codeOnlyBuffer(code.flush)\nconst syncBuffer = codeOnlyBuffer(code.sync)\nconst endBuffer = codeOnlyBuffer(code.end)\nconst copyDoneBuffer = codeOnlyBuffer(code.copyDone)\n\nconst serialize = {\n  startup,\n  password,\n  requestSsl,\n  sendSASLInitialResponseMessage,\n  sendSCRAMClientFinalMessage,\n  query,\n  parse,\n  bind,\n  execute,\n  describe,\n  close,\n  flush: () => flushBuffer,\n  sync: () => syncBuffer,\n  end: () => endBuffer,\n  copyData,\n  copyDone: () => copyDoneBuffer,\n  copyFail,\n  cancel,\n}\n\nexport { serialize }\n", "const emptyBuffer = Buffer.allocUnsafe(0)\n\nexport class BufferReader {\n  private buffer: Buffer = emptyBuffer\n\n  // TODO(bmc): support non-utf8 encoding?\n  private encoding: string = 'utf-8'\n\n  constructor(private offset: number = 0) {}\n\n  public setBuffer(offset: number, buffer: Buffer): void {\n    this.offset = offset\n    this.buffer = buffer\n  }\n\n  public int16(): number {\n    const result = this.buffer.readInt16BE(this.offset)\n    this.offset += 2\n    return result\n  }\n\n  public byte(): number {\n    const result = this.buffer[this.offset]\n    this.offset++\n    return result\n  }\n\n  public int32(): number {\n    const result = this.buffer.readInt32BE(this.offset)\n    this.offset += 4\n    return result\n  }\n\n  public uint32(): number {\n    const result = this.buffer.readUInt32BE(this.offset)\n    this.offset += 4\n    return result\n  }\n\n  public string(length: number): string {\n    const result = this.buffer.toString(this.encoding, this.offset, this.offset + length)\n    this.offset += length\n    return result\n  }\n\n  public cstring(): string {\n    const start = this.offset\n    let end = start\n    // eslint-disable-next-line no-empty\n    while (this.buffer[end++] !== 0) {}\n    this.offset = end\n    return this.buffer.toString(this.encoding, start, end - 1)\n  }\n\n  public bytes(length: number): Buffer {\n    const result = this.buffer.slice(this.offset, this.offset + length)\n    this.offset += length\n    return result\n  }\n}\n", "import { TransformOptions } from 'stream'\nimport {\n  Mode,\n  bindComplete,\n  parseComplete,\n  closeComplete,\n  noData,\n  portalSuspended,\n  copyDone,\n  replicationStart,\n  emptyQuery,\n  ReadyForQueryMessage,\n  CommandCompleteMessage,\n  CopyDataMessage,\n  CopyResponse,\n  NotificationResponseMessage,\n  RowDescriptionMessage,\n  ParameterDescriptionMessage,\n  Field,\n  DataRowMessage,\n  ParameterStatusMessage,\n  BackendKeyDataMessage,\n  DatabaseError,\n  BackendMessage,\n  MessageName,\n  AuthenticationMD5Password,\n  NoticeMessage,\n} from './messages'\nimport { BufferReader } from './buffer-reader'\n\n// every message is prefixed with a single bye\nconst CODE_LENGTH = 1\n// every message has an int32 length which includes itself but does\n// NOT include the code in the length\nconst LEN_LENGTH = 4\n\nconst HEADER_LENGTH = CODE_LENGTH + LEN_LENGTH\n\nexport type Packet = {\n  code: number\n  packet: Buffer\n}\n\nconst emptyBuffer = Buffer.allocUnsafe(0)\n\ntype StreamOptions = TransformOptions & {\n  mode: Mode\n}\n\nconst enum MessageCodes {\n  DataRow = 0x44, // D\n  ParseComplete = 0x31, // 1\n  BindComplete = 0x32, // 2\n  CloseComplete = 0x33, // 3\n  CommandComplete = 0x43, // C\n  ReadyForQuery = 0x5a, // Z\n  NoData = 0x6e, // n\n  NotificationResponse = 0x41, // A\n  AuthenticationResponse = 0x52, // R\n  ParameterStatus = 0x53, // S\n  BackendKeyData = 0x4b, // K\n  ErrorMessage = 0x45, // E\n  NoticeMessage = 0x4e, // N\n  RowDescriptionMessage = 0x54, // T\n  ParameterDescriptionMessage = 0x74, // t\n  PortalSuspended = 0x73, // s\n  ReplicationStart = 0x57, // W\n  EmptyQuery = 0x49, // I\n  CopyIn = 0x47, // G\n  CopyOut = 0x48, // H\n  CopyDone = 0x63, // c\n  CopyData = 0x64, // d\n}\n\nexport type MessageCallback = (msg: BackendMessage) => void\n\nexport class Parser {\n  private buffer: Buffer = emptyBuffer\n  private bufferLength: number = 0\n  private bufferOffset: number = 0\n  private reader = new BufferReader()\n  private mode: Mode\n\n  constructor(opts?: StreamOptions) {\n    if (opts?.mode === 'binary') {\n      throw new Error('Binary mode not supported yet')\n    }\n    this.mode = opts?.mode || 'text'\n  }\n\n  public parse(buffer: Buffer, callback: MessageCallback) {\n    this.mergeBuffer(buffer)\n    const bufferFullLength = this.bufferOffset + this.bufferLength\n    let offset = this.bufferOffset\n    while (offset + HEADER_LENGTH <= bufferFullLength) {\n      // code is 1 byte long - it identifies the message type\n      const code = this.buffer[offset]\n      // length is 1 Uint32BE - it is the length of the message EXCLUDING the code\n      const length = this.buffer.readUInt32BE(offset + CODE_LENGTH)\n      const fullMessageLength = CODE_LENGTH + length\n      if (fullMessageLength + offset <= bufferFullLength) {\n        const message = this.handlePacket(offset + HEADER_LENGTH, code, length, this.buffer)\n        callback(message)\n        offset += fullMessageLength\n      } else {\n        break\n      }\n    }\n    if (offset === bufferFullLength) {\n      // No more use for the buffer\n      this.buffer = emptyBuffer\n      this.bufferLength = 0\n      this.bufferOffset = 0\n    } else {\n      // Adjust the cursors of remainingBuffer\n      this.bufferLength = bufferFullLength - offset\n      this.bufferOffset = offset\n    }\n  }\n\n  private mergeBuffer(buffer: Buffer): void {\n    if (this.bufferLength > 0) {\n      const newLength = this.bufferLength + buffer.byteLength\n      const newFullLength = newLength + this.bufferOffset\n      if (newFullLength > this.buffer.byteLength) {\n        // We can't concat the new buffer with the remaining one\n        let newBuffer: Buffer\n        if (newLength <= this.buffer.byteLength && this.bufferOffset >= this.bufferLength) {\n          // We can move the relevant part to the beginning of the buffer instead of allocating a new buffer\n          newBuffer = this.buffer\n        } else {\n          // Allocate a new larger buffer\n          let newBufferLength = this.buffer.byteLength * 2\n          while (newLength >= newBufferLength) {\n            newBufferLength *= 2\n          }\n          newBuffer = Buffer.allocUnsafe(newBufferLength)\n        }\n        // Move the remaining buffer to the new one\n        this.buffer.copy(newBuffer, 0, this.bufferOffset, this.bufferOffset + this.bufferLength)\n        this.buffer = newBuffer\n        this.bufferOffset = 0\n      }\n      // Concat the new buffer with the remaining one\n      buffer.copy(this.buffer, this.bufferOffset + this.bufferLength)\n      this.bufferLength = newLength\n    } else {\n      this.buffer = buffer\n      this.bufferOffset = 0\n      this.bufferLength = buffer.byteLength\n    }\n  }\n\n  private handlePacket(offset: number, code: number, length: number, bytes: Buffer): BackendMessage {\n    switch (code) {\n      case MessageCodes.BindComplete:\n        return bindComplete\n      case MessageCodes.ParseComplete:\n        return parseComplete\n      case MessageCodes.CloseComplete:\n        return closeComplete\n      case MessageCodes.NoData:\n        return noData\n      case MessageCodes.PortalSuspended:\n        return portalSuspended\n      case MessageCodes.CopyDone:\n        return copyDone\n      case MessageCodes.ReplicationStart:\n        return replicationStart\n      case MessageCodes.EmptyQuery:\n        return emptyQuery\n      case MessageCodes.DataRow:\n        return this.parseDataRowMessage(offset, length, bytes)\n      case MessageCodes.CommandComplete:\n        return this.parseCommandCompleteMessage(offset, length, bytes)\n      case MessageCodes.ReadyForQuery:\n        return this.parseReadyForQueryMessage(offset, length, bytes)\n      case MessageCodes.NotificationResponse:\n        return this.parseNotificationMessage(offset, length, bytes)\n      case MessageCodes.AuthenticationResponse:\n        return this.parseAuthenticationResponse(offset, length, bytes)\n      case MessageCodes.ParameterStatus:\n        return this.parseParameterStatusMessage(offset, length, bytes)\n      case MessageCodes.BackendKeyData:\n        return this.parseBackendKeyData(offset, length, bytes)\n      case MessageCodes.ErrorMessage:\n        return this.parseErrorMessage(offset, length, bytes, 'error')\n      case MessageCodes.NoticeMessage:\n        return this.parseErrorMessage(offset, length, bytes, 'notice')\n      case MessageCodes.RowDescriptionMessage:\n        return this.parseRowDescriptionMessage(offset, length, bytes)\n      case MessageCodes.ParameterDescriptionMessage:\n        return this.parseParameterDescriptionMessage(offset, length, bytes)\n      case MessageCodes.CopyIn:\n        return this.parseCopyInMessage(offset, length, bytes)\n      case MessageCodes.CopyOut:\n        return this.parseCopyOutMessage(offset, length, bytes)\n      case MessageCodes.CopyData:\n        return this.parseCopyData(offset, length, bytes)\n      default:\n        return new DatabaseError('received invalid response: ' + code.toString(16), length, 'error')\n    }\n  }\n\n  private parseReadyForQueryMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const status = this.reader.string(1)\n    return new ReadyForQueryMessage(length, status)\n  }\n\n  private parseCommandCompleteMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const text = this.reader.cstring()\n    return new CommandCompleteMessage(length, text)\n  }\n\n  private parseCopyData(offset: number, length: number, bytes: Buffer) {\n    const chunk = bytes.slice(offset, offset + (length - 4))\n    return new CopyDataMessage(length, chunk)\n  }\n\n  private parseCopyInMessage(offset: number, length: number, bytes: Buffer) {\n    return this.parseCopyMessage(offset, length, bytes, 'copyInResponse')\n  }\n\n  private parseCopyOutMessage(offset: number, length: number, bytes: Buffer) {\n    return this.parseCopyMessage(offset, length, bytes, 'copyOutResponse')\n  }\n\n  private parseCopyMessage(offset: number, length: number, bytes: Buffer, messageName: MessageName) {\n    this.reader.setBuffer(offset, bytes)\n    const isBinary = this.reader.byte() !== 0\n    const columnCount = this.reader.int16()\n    const message = new CopyResponse(length, messageName, isBinary, columnCount)\n    for (let i = 0; i < columnCount; i++) {\n      message.columnTypes[i] = this.reader.int16()\n    }\n    return message\n  }\n\n  private parseNotificationMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const processId = this.reader.int32()\n    const channel = this.reader.cstring()\n    const payload = this.reader.cstring()\n    return new NotificationResponseMessage(length, processId, channel, payload)\n  }\n\n  private parseRowDescriptionMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const fieldCount = this.reader.int16()\n    const message = new RowDescriptionMessage(length, fieldCount)\n    for (let i = 0; i < fieldCount; i++) {\n      message.fields[i] = this.parseField()\n    }\n    return message\n  }\n\n  private parseField(): Field {\n    const name = this.reader.cstring()\n    const tableID = this.reader.uint32()\n    const columnID = this.reader.int16()\n    const dataTypeID = this.reader.uint32()\n    const dataTypeSize = this.reader.int16()\n    const dataTypeModifier = this.reader.int32()\n    const mode = this.reader.int16() === 0 ? 'text' : 'binary'\n    return new Field(name, tableID, columnID, dataTypeID, dataTypeSize, dataTypeModifier, mode)\n  }\n\n  private parseParameterDescriptionMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const parameterCount = this.reader.int16()\n    const message = new ParameterDescriptionMessage(length, parameterCount)\n    for (let i = 0; i < parameterCount; i++) {\n      message.dataTypeIDs[i] = this.reader.int32()\n    }\n    return message\n  }\n\n  private parseDataRowMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const fieldCount = this.reader.int16()\n    const fields: any[] = new Array(fieldCount)\n    for (let i = 0; i < fieldCount; i++) {\n      const len = this.reader.int32()\n      // a -1 for length means the value of the field is null\n      fields[i] = len === -1 ? null : this.reader.string(len)\n    }\n    return new DataRowMessage(length, fields)\n  }\n\n  private parseParameterStatusMessage(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const name = this.reader.cstring()\n    const value = this.reader.cstring()\n    return new ParameterStatusMessage(length, name, value)\n  }\n\n  private parseBackendKeyData(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const processID = this.reader.int32()\n    const secretKey = this.reader.int32()\n    return new BackendKeyDataMessage(length, processID, secretKey)\n  }\n\n  public parseAuthenticationResponse(offset: number, length: number, bytes: Buffer) {\n    this.reader.setBuffer(offset, bytes)\n    const code = this.reader.int32()\n    // TODO(bmc): maybe better types here\n    const message: BackendMessage & any = {\n      name: 'authenticationOk',\n      length,\n    }\n\n    switch (code) {\n      case 0: // AuthenticationOk\n        break\n      case 3: // AuthenticationCleartextPassword\n        if (message.length === 8) {\n          message.name = 'authenticationCleartextPassword'\n        }\n        break\n      case 5: // AuthenticationMD5Password\n        if (message.length === 12) {\n          message.name = 'authenticationMD5Password'\n          const salt = this.reader.bytes(4)\n          return new AuthenticationMD5Password(length, salt)\n        }\n        break\n      case 10: // AuthenticationSASL\n        {\n          message.name = 'authenticationSASL'\n          message.mechanisms = []\n          let mechanism: string\n          do {\n            mechanism = this.reader.cstring()\n            if (mechanism) {\n              message.mechanisms.push(mechanism)\n            }\n          } while (mechanism)\n        }\n        break\n      case 11: // AuthenticationSASLContinue\n        message.name = 'authenticationSASLContinue'\n        message.data = this.reader.string(length - 8)\n        break\n      case 12: // AuthenticationSASLFinal\n        message.name = 'authenticationSASLFinal'\n        message.data = this.reader.string(length - 8)\n        break\n      default:\n        throw new Error('Unknown authenticationOk message type ' + code)\n    }\n    return message\n  }\n\n  private parseErrorMessage(offset: number, length: number, bytes: Buffer, name: MessageName) {\n    this.reader.setBuffer(offset, bytes)\n    const fields: Record<string, string> = {}\n    let fieldType = this.reader.string(1)\n    while (fieldType !== '\\0') {\n      fields[fieldType] = this.reader.cstring()\n      fieldType = this.reader.string(1)\n    }\n\n    const messageValue = fields.M\n\n    const message =\n      name === 'notice' ? new NoticeMessage(length, messageValue) : new DatabaseError(messageValue, length, name)\n\n    message.severity = fields.S\n    message.code = fields.C\n    message.detail = fields.D\n    message.hint = fields.H\n    message.position = fields.P\n    message.internalPosition = fields.p\n    message.internalQuery = fields.q\n    message.where = fields.W\n    message.schema = fields.s\n    message.table = fields.t\n    message.column = fields.c\n    message.dataType = fields.d\n    message.constraint = fields.n\n    message.file = fields.F\n    message.line = fields.L\n    message.routine = fields.R\n    return message\n  }\n}\n", "import { DatabaseError } from './messages'\nimport { serialize } from './serializer'\nimport { Parser, MessageCallback } from './parser'\n\nexport function parse(stream: NodeJS.ReadableStream, callback: MessageCallback): Promise<void> {\n  const parser = new Parser()\n  stream.on('data', (buffer: Buffer) => parser.parse(buffer, callback))\n  return new Promise((resolve) => stream.on('end', () => resolve()))\n}\n\nexport { serialize, DatabaseError }\n", "// This is an empty module that is served up when outside of a workerd environment\n// See the `exports` field in package.json\nexport default {}\n", "const { getStream, getSecureStream } = getStreamFuncs()\n\nmodule.exports = {\n  /**\n   * Get a socket stream compatible with the current runtime environment.\n   * @returns {Duplex}\n   */\n  getStream,\n  /**\n   * Get a TLS secured socket, compatible with the current environment,\n   * using the socket and other settings given in `options`.\n   * @returns {Duplex}\n   */\n  getSecureStream,\n}\n\n/**\n * The stream functions that work in Node.js\n */\nfunction getNodejsStreamFuncs() {\n  function getStream(ssl) {\n    const net = require('net')\n    return new net.Socket()\n  }\n\n  function getSecureStream(options) {\n    const tls = require('tls')\n    return tls.connect(options)\n  }\n  return {\n    getStream,\n    getSecureStream,\n  }\n}\n\n/**\n * The stream functions that work in Cloudflare Workers\n */\nfunction getCloudflareStreamFuncs() {\n  function getStream(ssl) {\n    const { CloudflareSocket } = require('pg-cloudflare')\n    return new CloudflareSocket(ssl)\n  }\n\n  function getSecureStream(options) {\n    options.socket.startTls(options)\n    return options.socket\n  }\n  return {\n    getStream,\n    getSecureStream,\n  }\n}\n\n/**\n * Are we running in a Cloudflare Worker?\n *\n * @returns true if the code is currently running inside a Cloudflare Worker.\n */\nfunction isCloudflareRuntime() {\n  // Since 2022-03-21 the `global_navigator` compatibility flag is on for Cloudflare Workers\n  // which means that `navigator.userAgent` will be defined.\n  // eslint-disable-next-line no-undef\n  if (typeof navigator === 'object' && navigator !== null && typeof navigator.userAgent === 'string') {\n    // eslint-disable-next-line no-undef\n    return navigator.userAgent === 'Cloudflare-Workers'\n  }\n  // In case `navigator` or `navigator.userAgent` is not defined then try a more sneaky approach\n  if (typeof Response === 'function') {\n    const resp = new Response(null, { cf: { thing: true } })\n    if (typeof resp.cf === 'object' && resp.cf !== null && resp.cf.thing) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction getStreamFuncs() {\n  if (isCloudflareRuntime()) {\n    return getCloudflareStreamFuncs()\n  }\n  return getNodejsStreamFuncs()\n}\n", "'use strict'\n\nconst EventEmitter = require('events').EventEmitter\n\nconst { parse, serialize } = require('pg-protocol')\nconst { getStream, getSecureStream } = require('./stream')\n\nconst flushBuffer = serialize.flush()\nconst syncBuffer = serialize.sync()\nconst endBuffer = serialize.end()\n\n// TODO(bmc) support binary mode at some point\nclass Connection extends EventEmitter {\n  constructor(config) {\n    super()\n    config = config || {}\n\n    this.stream = config.stream || getStream(config.ssl)\n    if (typeof this.stream === 'function') {\n      this.stream = this.stream(config)\n    }\n\n    this._keepAlive = config.keepAlive\n    this._keepAliveInitialDelayMillis = config.keepAliveInitialDelayMillis\n    this.lastBuffer = false\n    this.parsedStatements = {}\n    this.ssl = config.ssl || false\n    this._ending = false\n    this._emitMessage = false\n    const self = this\n    this.on('newListener', function (eventName) {\n      if (eventName === 'message') {\n        self._emitMessage = true\n      }\n    })\n  }\n\n  connect(port, host) {\n    const self = this\n\n    this._connecting = true\n    this.stream.setNoDelay(true)\n    this.stream.connect(port, host)\n\n    this.stream.once('connect', function () {\n      if (self._keepAlive) {\n        self.stream.setKeepAlive(true, self._keepAliveInitialDelayMillis)\n      }\n      self.emit('connect')\n    })\n\n    const reportStreamError = function (error) {\n      // errors about disconnections should be ignored during disconnect\n      if (self._ending && (error.code === 'ECONNRESET' || error.code === 'EPIPE')) {\n        return\n      }\n      self.emit('error', error)\n    }\n    this.stream.on('error', reportStreamError)\n\n    this.stream.on('close', function () {\n      self.emit('end')\n    })\n\n    if (!this.ssl) {\n      return this.attachListeners(this.stream)\n    }\n\n    this.stream.once('data', function (buffer) {\n      const responseCode = buffer.toString('utf8')\n      switch (responseCode) {\n        case 'S': // Server supports SSL connections, continue with a secure connection\n          break\n        case 'N': // Server does not support SSL connections\n          self.stream.end()\n          return self.emit('error', new Error('The server does not support SSL connections'))\n        default:\n          // Any other response byte, including 'E' (ErrorResponse) indicating a server error\n          self.stream.end()\n          return self.emit('error', new Error('There was an error establishing an SSL connection'))\n      }\n      const options = {\n        socket: self.stream,\n      }\n\n      if (self.ssl !== true) {\n        Object.assign(options, self.ssl)\n\n        if ('key' in self.ssl) {\n          options.key = self.ssl.key\n        }\n      }\n\n      const net = require('net')\n      if (net.isIP && net.isIP(host) === 0) {\n        options.servername = host\n      }\n      try {\n        self.stream = getSecureStream(options)\n      } catch (err) {\n        return self.emit('error', err)\n      }\n      self.attachListeners(self.stream)\n      self.stream.on('error', reportStreamError)\n\n      self.emit('sslconnect')\n    })\n  }\n\n  attachListeners(stream) {\n    parse(stream, (msg) => {\n      const eventName = msg.name === 'error' ? 'errorMessage' : msg.name\n      if (this._emitMessage) {\n        this.emit('message', msg)\n      }\n      this.emit(eventName, msg)\n    })\n  }\n\n  requestSsl() {\n    this.stream.write(serialize.requestSsl())\n  }\n\n  startup(config) {\n    this.stream.write(serialize.startup(config))\n  }\n\n  cancel(processID, secretKey) {\n    this._send(serialize.cancel(processID, secretKey))\n  }\n\n  password(password) {\n    this._send(serialize.password(password))\n  }\n\n  sendSASLInitialResponseMessage(mechanism, initialResponse) {\n    this._send(serialize.sendSASLInitialResponseMessage(mechanism, initialResponse))\n  }\n\n  sendSCRAMClientFinalMessage(additionalData) {\n    this._send(serialize.sendSCRAMClientFinalMessage(additionalData))\n  }\n\n  _send(buffer) {\n    if (!this.stream.writable) {\n      return false\n    }\n    return this.stream.write(buffer)\n  }\n\n  query(text) {\n    this._send(serialize.query(text))\n  }\n\n  // send parse message\n  parse(query) {\n    this._send(serialize.parse(query))\n  }\n\n  // send bind message\n  bind(config) {\n    this._send(serialize.bind(config))\n  }\n\n  // send execute message\n  execute(config) {\n    this._send(serialize.execute(config))\n  }\n\n  flush() {\n    if (this.stream.writable) {\n      this.stream.write(flushBuffer)\n    }\n  }\n\n  sync() {\n    this._ending = true\n    this._send(syncBuffer)\n  }\n\n  ref() {\n    this.stream.ref()\n  }\n\n  unref() {\n    this.stream.unref()\n  }\n\n  end() {\n    // 0x58 = 'X'\n    this._ending = true\n    if (!this._connecting || !this.stream.writable) {\n      this.stream.end()\n      return\n    }\n    return this.stream.write(endBuffer, () => {\n      this.stream.end()\n    })\n  }\n\n  close(msg) {\n    this._send(serialize.close(msg))\n  }\n\n  describe(msg) {\n    this._send(serialize.describe(msg))\n  }\n\n  sendCopyFromChunk(chunk) {\n    this._send(serialize.copyData(chunk))\n  }\n\n  endCopyFrom() {\n    this._send(serialize.copyDone())\n  }\n\n  sendCopyFail(msg) {\n    this._send(serialize.copyFail(msg))\n  }\n}\n\nmodule.exports = Connection\n", "/*\nCopyright (c) 2014-2021, Matteo Collina <hello@matteocollina.com>\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted, provided that the above\ncopyright notice and this permission notice appear in all copies.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\nWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\nMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\nANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\nWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\nACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR\nIN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n*/\n\n'use strict'\n\nconst { Transform } = require('stream')\nconst { StringDecoder } = require('string_decoder')\nconst kLast = Symbol('last')\nconst kDecoder = Symbol('decoder')\n\nfunction transform (chunk, enc, cb) {\n  let list\n  if (this.overflow) { // Line buffer is full. Skip to start of next line.\n    const buf = this[kDecoder].write(chunk)\n    list = buf.split(this.matcher)\n\n    if (list.length === 1) return cb() // Line ending not found. Discard entire chunk.\n\n    // Line ending found. Discard trailing fragment of previous line and reset overflow state.\n    list.shift()\n    this.overflow = false\n  } else {\n    this[kLast] += this[kDecoder].write(chunk)\n    list = this[kLast].split(this.matcher)\n  }\n\n  this[kLast] = list.pop()\n\n  for (let i = 0; i < list.length; i++) {\n    try {\n      push(this, this.mapper(list[i]))\n    } catch (error) {\n      return cb(error)\n    }\n  }\n\n  this.overflow = this[kLast].length > this.maxLength\n  if (this.overflow && !this.skipOverflow) {\n    cb(new Error('maximum buffer reached'))\n    return\n  }\n\n  cb()\n}\n\nfunction flush (cb) {\n  // forward any gibberish left in there\n  this[kLast] += this[kDecoder].end()\n\n  if (this[kLast]) {\n    try {\n      push(this, this.mapper(this[kLast]))\n    } catch (error) {\n      return cb(error)\n    }\n  }\n\n  cb()\n}\n\nfunction push (self, val) {\n  if (val !== undefined) {\n    self.push(val)\n  }\n}\n\nfunction noop (incoming) {\n  return incoming\n}\n\nfunction split (matcher, mapper, options) {\n  // Set defaults for any arguments not supplied.\n  matcher = matcher || /\\r?\\n/\n  mapper = mapper || noop\n  options = options || {}\n\n  // Test arguments explicitly.\n  switch (arguments.length) {\n    case 1:\n      // If mapper is only argument.\n      if (typeof matcher === 'function') {\n        mapper = matcher\n        matcher = /\\r?\\n/\n      // If options is only argument.\n      } else if (typeof matcher === 'object' && !(matcher instanceof RegExp) && !matcher[Symbol.split]) {\n        options = matcher\n        matcher = /\\r?\\n/\n      }\n      break\n\n    case 2:\n      // If mapper and options are arguments.\n      if (typeof matcher === 'function') {\n        options = mapper\n        mapper = matcher\n        matcher = /\\r?\\n/\n      // If matcher and options are arguments.\n      } else if (typeof mapper === 'object') {\n        options = mapper\n        mapper = noop\n      }\n  }\n\n  options = Object.assign({}, options)\n  options.autoDestroy = true\n  options.transform = transform\n  options.flush = flush\n  options.readableObjectMode = true\n\n  const stream = new Transform(options)\n\n  stream[kLast] = ''\n  stream[kDecoder] = new StringDecoder('utf8')\n  stream.matcher = matcher\n  stream.mapper = mapper\n  stream.maxLength = options.maxLength\n  stream.skipOverflow = options.skipOverflow || false\n  stream.overflow = false\n  stream._destroy = function (err, cb) {\n    // Weird Node v12 bug that we need to work around\n    this._writableState.errorEmitted = false\n    cb(err)\n  }\n\n  return stream\n}\n\nmodule.exports = split\n", "'use strict';\n\nvar path = require('path')\n  , Stream = require('stream').Stream\n  , split = require('split2')\n  , util = require('util')\n  , defaultPort = 5432\n  , isWin = (process.platform === 'win32')\n  , warnStream = process.stderr\n;\n\n\nvar S_IRWXG = 56     //    00070(8)\n  , S_IRWXO = 7      //    00007(8)\n  , S_IFMT  = 61440  // 00170000(8)\n  , S_IFREG = 32768  //  0100000(8)\n;\nfunction isRegFile(mode) {\n    return ((mode & S_IFMT) == S_IFREG);\n}\n\nvar fieldNames = [ 'host', 'port', 'database', 'user', 'password' ];\nvar nrOfFields = fieldNames.length;\nvar passKey = fieldNames[ nrOfFields -1 ];\n\n\nfunction warn() {\n    var isWritable = (\n        warnStream instanceof Stream &&\n          true === warnStream.writable\n    );\n\n    if (isWritable) {\n        var args = Array.prototype.slice.call(arguments).concat(\"\\n\");\n        warnStream.write( util.format.apply(util, args) );\n    }\n}\n\n\nObject.defineProperty(module.exports, 'isWin', {\n    get : function() {\n        return isWin;\n    } ,\n    set : function(val) {\n        isWin = val;\n    }\n});\n\n\nmodule.exports.warnTo = function(stream) {\n    var old = warnStream;\n    warnStream = stream;\n    return old;\n};\n\nmodule.exports.getFileName = function(rawEnv){\n    var env = rawEnv || process.env;\n    var file = env.PGPASSFILE || (\n        isWin ?\n          path.join( env.APPDATA || './' , 'postgresql', 'pgpass.conf' ) :\n          path.join( env.HOME || './', '.pgpass' )\n    );\n    return file;\n};\n\nmodule.exports.usePgPass = function(stats, fname) {\n    if (Object.prototype.hasOwnProperty.call(process.env, 'PGPASSWORD')) {\n        return false;\n    }\n\n    if (isWin) {\n        return true;\n    }\n\n    fname = fname || '<unkn>';\n\n    if (! isRegFile(stats.mode)) {\n        warn('WARNING: password file \"%s\" is not a plain file', fname);\n        return false;\n    }\n\n    if (stats.mode & (S_IRWXG | S_IRWXO)) {\n        /* If password file is insecure, alert the user and ignore it. */\n        warn('WARNING: password file \"%s\" has group or world access; permissions should be u=rw (0600) or less', fname);\n        return false;\n    }\n\n    return true;\n};\n\n\nvar matcher = module.exports.match = function(connInfo, entry) {\n    return fieldNames.slice(0, -1).reduce(function(prev, field, idx){\n        if (idx == 1) {\n            // the port\n            if ( Number( connInfo[field] || defaultPort ) === Number( entry[field] ) ) {\n                return prev && true;\n            }\n        }\n        return prev && (\n            entry[field] === '*' ||\n              entry[field] === connInfo[field]\n        );\n    }, true);\n};\n\n\nmodule.exports.getPassword = function(connInfo, stream, cb) {\n    var pass;\n    var lineStream = stream.pipe(split());\n\n    function onLine(line) {\n        var entry = parseLine(line);\n        if (entry && isValidEntry(entry) && matcher(connInfo, entry)) {\n            pass = entry[passKey];\n            lineStream.end(); // -> calls onEnd(), but pass is set now\n        }\n    }\n\n    var onEnd = function() {\n        stream.destroy();\n        cb(pass);\n    };\n\n    var onErr = function(err) {\n        stream.destroy();\n        warn('WARNING: error on reading file: %s', err);\n        cb(undefined);\n    };\n\n    stream.on('error', onErr);\n    lineStream\n        .on('data', onLine)\n        .on('end', onEnd)\n        .on('error', onErr)\n    ;\n\n};\n\n\nvar parseLine = module.exports.parseLine = function(line) {\n    if (line.length < 11 || line.match(/^\\s+#/)) {\n        return null;\n    }\n\n    var curChar = '';\n    var prevChar = '';\n    var fieldIdx = 0;\n    var startIdx = 0;\n    var endIdx = 0;\n    var obj = {};\n    var isLastField = false;\n    var addToObj = function(idx, i0, i1) {\n        var field = line.substring(i0, i1);\n\n        if (! Object.hasOwnProperty.call(process.env, 'PGPASS_NO_DEESCAPE')) {\n            field = field.replace(/\\\\([:\\\\])/g, '$1');\n        }\n\n        obj[ fieldNames[idx] ] = field;\n    };\n\n    for (var i = 0 ; i < line.length-1 ; i += 1) {\n        curChar = line.charAt(i+1);\n        prevChar = line.charAt(i);\n\n        isLastField = (fieldIdx == nrOfFields-1);\n\n        if (isLastField) {\n            addToObj(fieldIdx, startIdx);\n            break;\n        }\n\n        if (i >= 0 && curChar == ':' && prevChar !== '\\\\') {\n            addToObj(fieldIdx, startIdx, i+1);\n\n            startIdx = i+2;\n            fieldIdx += 1;\n        }\n    }\n\n    obj = ( Object.keys(obj).length === nrOfFields ) ? obj : null;\n\n    return obj;\n};\n\n\nvar isValidEntry = module.exports.isValidEntry = function(entry){\n    var rules = {\n        // host\n        0 : function(x){\n            return x.length > 0;\n        } ,\n        // port\n        1 : function(x){\n            if (x === '*') {\n                return true;\n            }\n            x = Number(x);\n            return (\n                isFinite(x) &&\n                  x > 0 &&\n                  x < 9007199254740992 &&\n                  Math.floor(x) === x\n            );\n        } ,\n        // database\n        2 : function(x){\n            return x.length > 0;\n        } ,\n        // username\n        3 : function(x){\n            return x.length > 0;\n        } ,\n        // password\n        4 : function(x){\n            return x.length > 0;\n        }\n    };\n\n    for (var idx = 0 ; idx < fieldNames.length ; idx += 1) {\n        var rule = rules[idx];\n        var value = entry[ fieldNames[idx] ] || '';\n\n        var res = rule(value);\n        if (!res) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n", "'use strict';\n\nvar path = require('path')\n  , fs = require('fs')\n  , helper = require('./helper.js')\n;\n\n\nmodule.exports = function(connInfo, cb) {\n    var file = helper.getFileName();\n    \n    fs.stat(file, function(err, stat){\n        if (err || !helper.usePgPass(stat, file)) {\n            return cb(undefined);\n        }\n\n        var st = fs.createReadStream(file);\n\n        helper.getPassword(connInfo, st, cb);\n    });\n};\n\nmodule.exports.warnTo = helper.warnTo;\n", "'use strict'\n\nconst EventEmitter = require('events').EventEmitter\nconst utils = require('./utils')\nconst sasl = require('./crypto/sasl')\nconst TypeOverrides = require('./type-overrides')\n\nconst ConnectionParameters = require('./connection-parameters')\nconst Query = require('./query')\nconst defaults = require('./defaults')\nconst Connection = require('./connection')\nconst crypto = require('./crypto/utils')\n\nclass Client extends EventEmitter {\n  constructor(config) {\n    super()\n\n    this.connectionParameters = new ConnectionParameters(config)\n    this.user = this.connectionParameters.user\n    this.database = this.connectionParameters.database\n    this.port = this.connectionParameters.port\n    this.host = this.connectionParameters.host\n\n    // \"hiding\" the password so it doesn't show up in stack traces\n    // or if the client is console.logged\n    Object.defineProperty(this, 'password', {\n      configurable: true,\n      enumerable: false,\n      writable: true,\n      value: this.connectionParameters.password,\n    })\n\n    this.replication = this.connectionParameters.replication\n\n    const c = config || {}\n\n    this._Promise = c.Promise || global.Promise\n    this._types = new TypeOverrides(c.types)\n    this._ending = false\n    this._ended = false\n    this._connecting = false\n    this._connected = false\n    this._connectionError = false\n    this._queryable = true\n\n    this.enableChannelBinding = Boolean(c.enableChannelBinding) // set true to use SCRAM-SHA-256-PLUS when offered\n    this.connection =\n      c.connection ||\n      new Connection({\n        stream: c.stream,\n        ssl: this.connectionParameters.ssl,\n        keepAlive: c.keepAlive || false,\n        keepAliveInitialDelayMillis: c.keepAliveInitialDelayMillis || 0,\n        encoding: this.connectionParameters.client_encoding || 'utf8',\n      })\n    this.queryQueue = []\n    this.binary = c.binary || defaults.binary\n    this.processID = null\n    this.secretKey = null\n    this.ssl = this.connectionParameters.ssl || false\n    // As with Password, make SSL->Key (the private key) non-enumerable.\n    // It won't show up in stack traces\n    // or if the client is console.logged\n    if (this.ssl && this.ssl.key) {\n      Object.defineProperty(this.ssl, 'key', {\n        enumerable: false,\n      })\n    }\n\n    this._connectionTimeoutMillis = c.connectionTimeoutMillis || 0\n  }\n\n  _errorAllQueries(err) {\n    const enqueueError = (query) => {\n      process.nextTick(() => {\n        query.handleError(err, this.connection)\n      })\n    }\n\n    if (this.activeQuery) {\n      enqueueError(this.activeQuery)\n      this.activeQuery = null\n    }\n\n    this.queryQueue.forEach(enqueueError)\n    this.queryQueue.length = 0\n  }\n\n  _connect(callback) {\n    const self = this\n    const con = this.connection\n    this._connectionCallback = callback\n\n    if (this._connecting || this._connected) {\n      const err = new Error('Client has already been connected. You cannot reuse a client.')\n      process.nextTick(() => {\n        callback(err)\n      })\n      return\n    }\n    this._connecting = true\n\n    if (this._connectionTimeoutMillis > 0) {\n      this.connectionTimeoutHandle = setTimeout(() => {\n        con._ending = true\n        con.stream.destroy(new Error('timeout expired'))\n      }, this._connectionTimeoutMillis)\n\n      if (this.connectionTimeoutHandle.unref) {\n        this.connectionTimeoutHandle.unref()\n      }\n    }\n\n    if (this.host && this.host.indexOf('/') === 0) {\n      con.connect(this.host + '/.s.PGSQL.' + this.port)\n    } else {\n      con.connect(this.port, this.host)\n    }\n\n    // once connection is established send startup message\n    con.on('connect', function () {\n      if (self.ssl) {\n        con.requestSsl()\n      } else {\n        con.startup(self.getStartupConf())\n      }\n    })\n\n    con.on('sslconnect', function () {\n      con.startup(self.getStartupConf())\n    })\n\n    this._attachListeners(con)\n\n    con.once('end', () => {\n      const error = this._ending ? new Error('Connection terminated') : new Error('Connection terminated unexpectedly')\n\n      clearTimeout(this.connectionTimeoutHandle)\n      this._errorAllQueries(error)\n      this._ended = true\n\n      if (!this._ending) {\n        // if the connection is ended without us calling .end()\n        // on this client then we have an unexpected disconnection\n        // treat this as an error unless we've already emitted an error\n        // during connection.\n        if (this._connecting && !this._connectionError) {\n          if (this._connectionCallback) {\n            this._connectionCallback(error)\n          } else {\n            this._handleErrorEvent(error)\n          }\n        } else if (!this._connectionError) {\n          this._handleErrorEvent(error)\n        }\n      }\n\n      process.nextTick(() => {\n        this.emit('end')\n      })\n    })\n  }\n\n  connect(callback) {\n    if (callback) {\n      this._connect(callback)\n      return\n    }\n\n    return new this._Promise((resolve, reject) => {\n      this._connect((error) => {\n        if (error) {\n          reject(error)\n        } else {\n          resolve()\n        }\n      })\n    })\n  }\n\n  _attachListeners(con) {\n    // password request handling\n    con.on('authenticationCleartextPassword', this._handleAuthCleartextPassword.bind(this))\n    // password request handling\n    con.on('authenticationMD5Password', this._handleAuthMD5Password.bind(this))\n    // password request handling (SASL)\n    con.on('authenticationSASL', this._handleAuthSASL.bind(this))\n    con.on('authenticationSASLContinue', this._handleAuthSASLContinue.bind(this))\n    con.on('authenticationSASLFinal', this._handleAuthSASLFinal.bind(this))\n    con.on('backendKeyData', this._handleBackendKeyData.bind(this))\n    con.on('error', this._handleErrorEvent.bind(this))\n    con.on('errorMessage', this._handleErrorMessage.bind(this))\n    con.on('readyForQuery', this._handleReadyForQuery.bind(this))\n    con.on('notice', this._handleNotice.bind(this))\n    con.on('rowDescription', this._handleRowDescription.bind(this))\n    con.on('dataRow', this._handleDataRow.bind(this))\n    con.on('portalSuspended', this._handlePortalSuspended.bind(this))\n    con.on('emptyQuery', this._handleEmptyQuery.bind(this))\n    con.on('commandComplete', this._handleCommandComplete.bind(this))\n    con.on('parseComplete', this._handleParseComplete.bind(this))\n    con.on('copyInResponse', this._handleCopyInResponse.bind(this))\n    con.on('copyData', this._handleCopyData.bind(this))\n    con.on('notification', this._handleNotification.bind(this))\n  }\n\n  // TODO(bmc): deprecate pgpass \"built in\" integration since this.password can be a function\n  // it can be supplied by the user if required - this is a breaking change!\n  _checkPgPass(cb) {\n    const con = this.connection\n    if (typeof this.password === 'function') {\n      this._Promise\n        .resolve()\n        .then(() => this.password())\n        .then((pass) => {\n          if (pass !== undefined) {\n            if (typeof pass !== 'string') {\n              con.emit('error', new TypeError('Password must be a string'))\n              return\n            }\n            this.connectionParameters.password = this.password = pass\n          } else {\n            this.connectionParameters.password = this.password = null\n          }\n          cb()\n        })\n        .catch((err) => {\n          con.emit('error', err)\n        })\n    } else if (this.password !== null) {\n      cb()\n    } else {\n      try {\n        const pgPass = require('pgpass')\n        pgPass(this.connectionParameters, (pass) => {\n          if (undefined !== pass) {\n            this.connectionParameters.password = this.password = pass\n          }\n          cb()\n        })\n      } catch (e) {\n        this.emit('error', e)\n      }\n    }\n  }\n\n  _handleAuthCleartextPassword(msg) {\n    this._checkPgPass(() => {\n      this.connection.password(this.password)\n    })\n  }\n\n  _handleAuthMD5Password(msg) {\n    this._checkPgPass(async () => {\n      try {\n        const hashedPassword = await crypto.postgresMd5PasswordHash(this.user, this.password, msg.salt)\n        this.connection.password(hashedPassword)\n      } catch (e) {\n        this.emit('error', e)\n      }\n    })\n  }\n\n  _handleAuthSASL(msg) {\n    this._checkPgPass(() => {\n      try {\n        this.saslSession = sasl.startSession(msg.mechanisms, this.enableChannelBinding && this.connection.stream)\n        this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism, this.saslSession.response)\n      } catch (err) {\n        this.connection.emit('error', err)\n      }\n    })\n  }\n\n  async _handleAuthSASLContinue(msg) {\n    try {\n      await sasl.continueSession(\n        this.saslSession,\n        this.password,\n        msg.data,\n        this.enableChannelBinding && this.connection.stream\n      )\n      this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)\n    } catch (err) {\n      this.connection.emit('error', err)\n    }\n  }\n\n  _handleAuthSASLFinal(msg) {\n    try {\n      sasl.finalizeSession(this.saslSession, msg.data)\n      this.saslSession = null\n    } catch (err) {\n      this.connection.emit('error', err)\n    }\n  }\n\n  _handleBackendKeyData(msg) {\n    this.processID = msg.processID\n    this.secretKey = msg.secretKey\n  }\n\n  _handleReadyForQuery(msg) {\n    if (this._connecting) {\n      this._connecting = false\n      this._connected = true\n      clearTimeout(this.connectionTimeoutHandle)\n\n      // process possible callback argument to Client#connect\n      if (this._connectionCallback) {\n        this._connectionCallback(null, this)\n        // remove callback for proper error handling\n        // after the connect event\n        this._connectionCallback = null\n      }\n      this.emit('connect')\n    }\n    const { activeQuery } = this\n    this.activeQuery = null\n    this.readyForQuery = true\n    if (activeQuery) {\n      activeQuery.handleReadyForQuery(this.connection)\n    }\n    this._pulseQueryQueue()\n  }\n\n  // if we receive an error event or error message\n  // during the connection process we handle it here\n  _handleErrorWhileConnecting(err) {\n    if (this._connectionError) {\n      // TODO(bmc): this is swallowing errors - we shouldn't do this\n      return\n    }\n    this._connectionError = true\n    clearTimeout(this.connectionTimeoutHandle)\n    if (this._connectionCallback) {\n      return this._connectionCallback(err)\n    }\n    this.emit('error', err)\n  }\n\n  // if we're connected and we receive an error event from the connection\n  // this means the socket is dead - do a hard abort of all queries and emit\n  // the socket error on the client as well\n  _handleErrorEvent(err) {\n    if (this._connecting) {\n      return this._handleErrorWhileConnecting(err)\n    }\n    this._queryable = false\n    this._errorAllQueries(err)\n    this.emit('error', err)\n  }\n\n  // handle error messages from the postgres backend\n  _handleErrorMessage(msg) {\n    if (this._connecting) {\n      return this._handleErrorWhileConnecting(msg)\n    }\n    const activeQuery = this.activeQuery\n\n    if (!activeQuery) {\n      this._handleErrorEvent(msg)\n      return\n    }\n\n    this.activeQuery = null\n    activeQuery.handleError(msg, this.connection)\n  }\n\n  _handleRowDescription(msg) {\n    // delegate rowDescription to active query\n    this.activeQuery.handleRowDescription(msg)\n  }\n\n  _handleDataRow(msg) {\n    // delegate dataRow to active query\n    this.activeQuery.handleDataRow(msg)\n  }\n\n  _handlePortalSuspended(msg) {\n    // delegate portalSuspended to active query\n    this.activeQuery.handlePortalSuspended(this.connection)\n  }\n\n  _handleEmptyQuery(msg) {\n    // delegate emptyQuery to active query\n    this.activeQuery.handleEmptyQuery(this.connection)\n  }\n\n  _handleCommandComplete(msg) {\n    if (this.activeQuery == null) {\n      const error = new Error('Received unexpected commandComplete message from backend.')\n      this._handleErrorEvent(error)\n      return\n    }\n    // delegate commandComplete to active query\n    this.activeQuery.handleCommandComplete(msg, this.connection)\n  }\n\n  _handleParseComplete() {\n    if (this.activeQuery == null) {\n      const error = new Error('Received unexpected parseComplete message from backend.')\n      this._handleErrorEvent(error)\n      return\n    }\n    // if a prepared statement has a name and properly parses\n    // we track that its already been executed so we don't parse\n    // it again on the same client\n    if (this.activeQuery.name) {\n      this.connection.parsedStatements[this.activeQuery.name] = this.activeQuery.text\n    }\n  }\n\n  _handleCopyInResponse(msg) {\n    this.activeQuery.handleCopyInResponse(this.connection)\n  }\n\n  _handleCopyData(msg) {\n    this.activeQuery.handleCopyData(msg, this.connection)\n  }\n\n  _handleNotification(msg) {\n    this.emit('notification', msg)\n  }\n\n  _handleNotice(msg) {\n    this.emit('notice', msg)\n  }\n\n  getStartupConf() {\n    const params = this.connectionParameters\n\n    const data = {\n      user: params.user,\n      database: params.database,\n    }\n\n    const appName = params.application_name || params.fallback_application_name\n    if (appName) {\n      data.application_name = appName\n    }\n    if (params.replication) {\n      data.replication = '' + params.replication\n    }\n    if (params.statement_timeout) {\n      data.statement_timeout = String(parseInt(params.statement_timeout, 10))\n    }\n    if (params.lock_timeout) {\n      data.lock_timeout = String(parseInt(params.lock_timeout, 10))\n    }\n    if (params.idle_in_transaction_session_timeout) {\n      data.idle_in_transaction_session_timeout = String(parseInt(params.idle_in_transaction_session_timeout, 10))\n    }\n    if (params.options) {\n      data.options = params.options\n    }\n\n    return data\n  }\n\n  cancel(client, query) {\n    if (client.activeQuery === query) {\n      const con = this.connection\n\n      if (this.host && this.host.indexOf('/') === 0) {\n        con.connect(this.host + '/.s.PGSQL.' + this.port)\n      } else {\n        con.connect(this.port, this.host)\n      }\n\n      // once connection is established send cancel message\n      con.on('connect', function () {\n        con.cancel(client.processID, client.secretKey)\n      })\n    } else if (client.queryQueue.indexOf(query) !== -1) {\n      client.queryQueue.splice(client.queryQueue.indexOf(query), 1)\n    }\n  }\n\n  setTypeParser(oid, format, parseFn) {\n    return this._types.setTypeParser(oid, format, parseFn)\n  }\n\n  getTypeParser(oid, format) {\n    return this._types.getTypeParser(oid, format)\n  }\n\n  // escapeIdentifier and escapeLiteral moved to utility functions & exported\n  // on PG\n  // re-exported here for backwards compatibility\n  escapeIdentifier(str) {\n    return utils.escapeIdentifier(str)\n  }\n\n  escapeLiteral(str) {\n    return utils.escapeLiteral(str)\n  }\n\n  _pulseQueryQueue() {\n    if (this.readyForQuery === true) {\n      this.activeQuery = this.queryQueue.shift()\n      if (this.activeQuery) {\n        this.readyForQuery = false\n        this.hasExecuted = true\n\n        const queryError = this.activeQuery.submit(this.connection)\n        if (queryError) {\n          process.nextTick(() => {\n            this.activeQuery.handleError(queryError, this.connection)\n            this.readyForQuery = true\n            this._pulseQueryQueue()\n          })\n        }\n      } else if (this.hasExecuted) {\n        this.activeQuery = null\n        this.emit('drain')\n      }\n    }\n  }\n\n  query(config, values, callback) {\n    // can take in strings, config object or query object\n    let query\n    let result\n    let readTimeout\n    let readTimeoutTimer\n    let queryCallback\n\n    if (config === null || config === undefined) {\n      throw new TypeError('Client was passed a null or undefined query')\n    } else if (typeof config.submit === 'function') {\n      readTimeout = config.query_timeout || this.connectionParameters.query_timeout\n      result = query = config\n      if (typeof values === 'function') {\n        query.callback = query.callback || values\n      }\n    } else {\n      readTimeout = config.query_timeout || this.connectionParameters.query_timeout\n      query = new Query(config, values, callback)\n      if (!query.callback) {\n        result = new this._Promise((resolve, reject) => {\n          query.callback = (err, res) => (err ? reject(err) : resolve(res))\n        }).catch((err) => {\n          // replace the stack trace that leads to `TCP.onStreamRead` with one that leads back to the\n          // application that created the query\n          Error.captureStackTrace(err)\n          throw err\n        })\n      }\n    }\n\n    if (readTimeout) {\n      queryCallback = query.callback\n\n      readTimeoutTimer = setTimeout(() => {\n        const error = new Error('Query read timeout')\n\n        process.nextTick(() => {\n          query.handleError(error, this.connection)\n        })\n\n        queryCallback(error)\n\n        // we already returned an error,\n        // just do nothing if query completes\n        query.callback = () => {}\n\n        // Remove from queue\n        const index = this.queryQueue.indexOf(query)\n        if (index > -1) {\n          this.queryQueue.splice(index, 1)\n        }\n\n        this._pulseQueryQueue()\n      }, readTimeout)\n\n      query.callback = (err, res) => {\n        clearTimeout(readTimeoutTimer)\n        queryCallback(err, res)\n      }\n    }\n\n    if (this.binary && !query.binary) {\n      query.binary = true\n    }\n\n    if (query._result && !query._result._types) {\n      query._result._types = this._types\n    }\n\n    if (!this._queryable) {\n      process.nextTick(() => {\n        query.handleError(new Error('Client has encountered a connection error and is not queryable'), this.connection)\n      })\n      return result\n    }\n\n    if (this._ending) {\n      process.nextTick(() => {\n        query.handleError(new Error('Client was closed and is not queryable'), this.connection)\n      })\n      return result\n    }\n\n    this.queryQueue.push(query)\n    this._pulseQueryQueue()\n    return result\n  }\n\n  ref() {\n    this.connection.ref()\n  }\n\n  unref() {\n    this.connection.unref()\n  }\n\n  end(cb) {\n    this._ending = true\n\n    // if we have never connected, then end is a noop, callback immediately\n    if (!this.connection._connecting || this._ended) {\n      if (cb) {\n        cb()\n      } else {\n        return this._Promise.resolve()\n      }\n    }\n\n    if (this.activeQuery || !this._queryable) {\n      // if we have an active query we need to force a disconnect\n      // on the socket - otherwise a hung query could block end forever\n      this.connection.stream.destroy()\n    } else {\n      this.connection.end()\n    }\n\n    if (cb) {\n      this.connection.once('end', cb)\n    } else {\n      return new this._Promise((resolve) => {\n        this.connection.once('end', resolve)\n      })\n    }\n  }\n}\n\n// expose a Query constructor\nClient.Query = Query\n\nmodule.exports = Client\n", "'use strict'\nconst EventEmitter = require('events').EventEmitter\n\nconst NOOP = function () {}\n\nconst removeWhere = (list, predicate) => {\n  const i = list.findIndex(predicate)\n\n  return i === -1 ? undefined : list.splice(i, 1)[0]\n}\n\nclass IdleItem {\n  constructor(client, idleListener, timeoutId) {\n    this.client = client\n    this.idleListener = idleListener\n    this.timeoutId = timeoutId\n  }\n}\n\nclass PendingItem {\n  constructor(callback) {\n    this.callback = callback\n  }\n}\n\nfunction throwOnDoubleRelease() {\n  throw new Error('Release called on client which has already been released to the pool.')\n}\n\nfunction promisify(Promise, callback) {\n  if (callback) {\n    return { callback: callback, result: undefined }\n  }\n  let rej\n  let res\n  const cb = function (err, client) {\n    err ? rej(err) : res(client)\n  }\n  const result = new Promise(function (resolve, reject) {\n    res = resolve\n    rej = reject\n  }).catch((err) => {\n    // replace the stack trace that leads to `TCP.onStreamRead` with one that leads back to the\n    // application that created the query\n    Error.captureStackTrace(err)\n    throw err\n  })\n  return { callback: cb, result: result }\n}\n\nfunction makeIdleListener(pool, client) {\n  return function idleListener(err) {\n    err.client = client\n\n    client.removeListener('error', idleListener)\n    client.on('error', () => {\n      pool.log('additional client error after disconnection due to error', err)\n    })\n    pool._remove(client)\n    // TODO - document that once the pool emits an error\n    // the client has already been closed & purged and is unusable\n    pool.emit('error', err, client)\n  }\n}\n\nclass Pool extends EventEmitter {\n  constructor(options, Client) {\n    super()\n    this.options = Object.assign({}, options)\n\n    if (options != null && 'password' in options) {\n      // \"hiding\" the password so it doesn't show up in stack traces\n      // or if the client is console.logged\n      Object.defineProperty(this.options, 'password', {\n        configurable: true,\n        enumerable: false,\n        writable: true,\n        value: options.password,\n      })\n    }\n    if (options != null && options.ssl && options.ssl.key) {\n      // \"hiding\" the ssl->key so it doesn't show up in stack traces\n      // or if the client is console.logged\n      Object.defineProperty(this.options.ssl, 'key', {\n        enumerable: false,\n      })\n    }\n\n    this.options.max = this.options.max || this.options.poolSize || 10\n    this.options.min = this.options.min || 0\n    this.options.maxUses = this.options.maxUses || Infinity\n    this.options.allowExitOnIdle = this.options.allowExitOnIdle || false\n    this.options.maxLifetimeSeconds = this.options.maxLifetimeSeconds || 0\n    this.log = this.options.log || function () {}\n    this.Client = this.options.Client || Client || require('pg').Client\n    this.Promise = this.options.Promise || global.Promise\n\n    if (typeof this.options.idleTimeoutMillis === 'undefined') {\n      this.options.idleTimeoutMillis = 10000\n    }\n\n    this._clients = []\n    this._idle = []\n    this._expired = new WeakSet()\n    this._pendingQueue = []\n    this._endCallback = undefined\n    this.ending = false\n    this.ended = false\n  }\n\n  _isFull() {\n    return this._clients.length >= this.options.max\n  }\n\n  _isAboveMin() {\n    return this._clients.length > this.options.min\n  }\n\n  _pulseQueue() {\n    this.log('pulse queue')\n    if (this.ended) {\n      this.log('pulse queue ended')\n      return\n    }\n    if (this.ending) {\n      this.log('pulse queue on ending')\n      if (this._idle.length) {\n        this._idle.slice().map((item) => {\n          this._remove(item.client)\n        })\n      }\n      if (!this._clients.length) {\n        this.ended = true\n        this._endCallback()\n      }\n      return\n    }\n\n    // if we don't have any waiting, do nothing\n    if (!this._pendingQueue.length) {\n      this.log('no queued requests')\n      return\n    }\n    // if we don't have any idle clients and we have no more room do nothing\n    if (!this._idle.length && this._isFull()) {\n      return\n    }\n    const pendingItem = this._pendingQueue.shift()\n    if (this._idle.length) {\n      const idleItem = this._idle.pop()\n      clearTimeout(idleItem.timeoutId)\n      const client = idleItem.client\n      client.ref && client.ref()\n      const idleListener = idleItem.idleListener\n\n      return this._acquireClient(client, pendingItem, idleListener, false)\n    }\n    if (!this._isFull()) {\n      return this.newClient(pendingItem)\n    }\n    throw new Error('unexpected condition')\n  }\n\n  _remove(client, callback) {\n    const removed = removeWhere(this._idle, (item) => item.client === client)\n\n    if (removed !== undefined) {\n      clearTimeout(removed.timeoutId)\n    }\n\n    this._clients = this._clients.filter((c) => c !== client)\n    const context = this\n    client.end(() => {\n      context.emit('remove', client)\n\n      if (typeof callback === 'function') {\n        callback()\n      }\n    })\n  }\n\n  connect(cb) {\n    if (this.ending) {\n      const err = new Error('Cannot use a pool after calling end on the pool')\n      return cb ? cb(err) : this.Promise.reject(err)\n    }\n\n    const response = promisify(this.Promise, cb)\n    const result = response.result\n\n    // if we don't have to connect a new client, don't do so\n    if (this._isFull() || this._idle.length) {\n      // if we have idle clients schedule a pulse immediately\n      if (this._idle.length) {\n        process.nextTick(() => this._pulseQueue())\n      }\n\n      if (!this.options.connectionTimeoutMillis) {\n        this._pendingQueue.push(new PendingItem(response.callback))\n        return result\n      }\n\n      const queueCallback = (err, res, done) => {\n        clearTimeout(tid)\n        response.callback(err, res, done)\n      }\n\n      const pendingItem = new PendingItem(queueCallback)\n\n      // set connection timeout on checking out an existing client\n      const tid = setTimeout(() => {\n        // remove the callback from pending waiters because\n        // we're going to call it with a timeout error\n        removeWhere(this._pendingQueue, (i) => i.callback === queueCallback)\n        pendingItem.timedOut = true\n        response.callback(new Error('timeout exceeded when trying to connect'))\n      }, this.options.connectionTimeoutMillis)\n\n      if (tid.unref) {\n        tid.unref()\n      }\n\n      this._pendingQueue.push(pendingItem)\n      return result\n    }\n\n    this.newClient(new PendingItem(response.callback))\n\n    return result\n  }\n\n  newClient(pendingItem) {\n    const client = new this.Client(this.options)\n    this._clients.push(client)\n    const idleListener = makeIdleListener(this, client)\n\n    this.log('checking client timeout')\n\n    // connection timeout logic\n    let tid\n    let timeoutHit = false\n    if (this.options.connectionTimeoutMillis) {\n      tid = setTimeout(() => {\n        this.log('ending client due to timeout')\n        timeoutHit = true\n        // force kill the node driver, and let libpq do its teardown\n        client.connection ? client.connection.stream.destroy() : client.end()\n      }, this.options.connectionTimeoutMillis)\n    }\n\n    this.log('connecting new client')\n    client.connect((err) => {\n      if (tid) {\n        clearTimeout(tid)\n      }\n      client.on('error', idleListener)\n      if (err) {\n        this.log('client failed to connect', err)\n        // remove the dead client from our list of clients\n        this._clients = this._clients.filter((c) => c !== client)\n        if (timeoutHit) {\n          err = new Error('Connection terminated due to connection timeout', { cause: err })\n        }\n\n        // this client won\u2019t be released, so move on immediately\n        this._pulseQueue()\n\n        if (!pendingItem.timedOut) {\n          pendingItem.callback(err, undefined, NOOP)\n        }\n      } else {\n        this.log('new client connected')\n\n        if (this.options.maxLifetimeSeconds !== 0) {\n          const maxLifetimeTimeout = setTimeout(() => {\n            this.log('ending client due to expired lifetime')\n            this._expired.add(client)\n            const idleIndex = this._idle.findIndex((idleItem) => idleItem.client === client)\n            if (idleIndex !== -1) {\n              this._acquireClient(\n                client,\n                new PendingItem((err, client, clientRelease) => clientRelease()),\n                idleListener,\n                false\n              )\n            }\n          }, this.options.maxLifetimeSeconds * 1000)\n\n          maxLifetimeTimeout.unref()\n          client.once('end', () => clearTimeout(maxLifetimeTimeout))\n        }\n\n        return this._acquireClient(client, pendingItem, idleListener, true)\n      }\n    })\n  }\n\n  // acquire a client for a pending work item\n  _acquireClient(client, pendingItem, idleListener, isNew) {\n    if (isNew) {\n      this.emit('connect', client)\n    }\n\n    this.emit('acquire', client)\n\n    client.release = this._releaseOnce(client, idleListener)\n\n    client.removeListener('error', idleListener)\n\n    if (!pendingItem.timedOut) {\n      if (isNew && this.options.verify) {\n        this.options.verify(client, (err) => {\n          if (err) {\n            client.release(err)\n            return pendingItem.callback(err, undefined, NOOP)\n          }\n\n          pendingItem.callback(undefined, client, client.release)\n        })\n      } else {\n        pendingItem.callback(undefined, client, client.release)\n      }\n    } else {\n      if (isNew && this.options.verify) {\n        this.options.verify(client, client.release)\n      } else {\n        client.release()\n      }\n    }\n  }\n\n  // returns a function that wraps _release and throws if called more than once\n  _releaseOnce(client, idleListener) {\n    let released = false\n\n    return (err) => {\n      if (released) {\n        throwOnDoubleRelease()\n      }\n\n      released = true\n      this._release(client, idleListener, err)\n    }\n  }\n\n  // release a client back to the poll, include an error\n  // to remove it from the pool\n  _release(client, idleListener, err) {\n    client.on('error', idleListener)\n\n    client._poolUseCount = (client._poolUseCount || 0) + 1\n\n    this.emit('release', err, client)\n\n    // TODO(bmc): expose a proper, public interface _queryable and _ending\n    if (err || this.ending || !client._queryable || client._ending || client._poolUseCount >= this.options.maxUses) {\n      if (client._poolUseCount >= this.options.maxUses) {\n        this.log('remove expended client')\n      }\n\n      return this._remove(client, this._pulseQueue.bind(this))\n    }\n\n    const isExpired = this._expired.has(client)\n    if (isExpired) {\n      this.log('remove expired client')\n      this._expired.delete(client)\n      return this._remove(client, this._pulseQueue.bind(this))\n    }\n\n    // idle timeout\n    let tid\n    if (this.options.idleTimeoutMillis && this._isAboveMin()) {\n      tid = setTimeout(() => {\n        this.log('remove idle client')\n        this._remove(client, this._pulseQueue.bind(this))\n      }, this.options.idleTimeoutMillis)\n\n      if (this.options.allowExitOnIdle) {\n        // allow Node to exit if this is all that's left\n        tid.unref()\n      }\n    }\n\n    if (this.options.allowExitOnIdle) {\n      client.unref()\n    }\n\n    this._idle.push(new IdleItem(client, idleListener, tid))\n    this._pulseQueue()\n  }\n\n  query(text, values, cb) {\n    // guard clause against passing a function as the first parameter\n    if (typeof text === 'function') {\n      const response = promisify(this.Promise, text)\n      setImmediate(function () {\n        return response.callback(new Error('Passing a function as the first parameter to pool.query is not supported'))\n      })\n      return response.result\n    }\n\n    // allow plain text query without values\n    if (typeof values === 'function') {\n      cb = values\n      values = undefined\n    }\n    const response = promisify(this.Promise, cb)\n    cb = response.callback\n\n    this.connect((err, client) => {\n      if (err) {\n        return cb(err)\n      }\n\n      let clientReleased = false\n      const onError = (err) => {\n        if (clientReleased) {\n          return\n        }\n        clientReleased = true\n        client.release(err)\n        cb(err)\n      }\n\n      client.once('error', onError)\n      this.log('dispatching query')\n      try {\n        client.query(text, values, (err, res) => {\n          this.log('query dispatched')\n          client.removeListener('error', onError)\n          if (clientReleased) {\n            return\n          }\n          clientReleased = true\n          client.release(err)\n          if (err) {\n            return cb(err)\n          }\n          return cb(undefined, res)\n        })\n      } catch (err) {\n        client.release(err)\n        return cb(err)\n      }\n    })\n    return response.result\n  }\n\n  end(cb) {\n    this.log('ending')\n    if (this.ending) {\n      const err = new Error('Called end on pool more than once')\n      return cb ? cb(err) : this.Promise.reject(err)\n    }\n    this.ending = true\n    const promised = promisify(this.Promise, cb)\n    this._endCallback = promised.callback\n    this._pulseQueue()\n    return promised.result\n  }\n\n  get waitingCount() {\n    return this._pendingQueue.length\n  }\n\n  get idleCount() {\n    return this._idle.length\n  }\n\n  get expiredCount() {\n    return this._clients.reduce((acc, client) => acc + (this._expired.has(client) ? 1 : 0), 0)\n  }\n\n  get totalCount() {\n    return this._clients.length\n  }\n}\nmodule.exports = Pool\n", "'use strict'\n\nconst EventEmitter = require('events').EventEmitter\nconst util = require('util')\nconst utils = require('../utils')\n\nconst NativeQuery = (module.exports = function (config, values, callback) {\n  EventEmitter.call(this)\n  config = utils.normalizeQueryConfig(config, values, callback)\n  this.text = config.text\n  this.values = config.values\n  this.name = config.name\n  this.queryMode = config.queryMode\n  this.callback = config.callback\n  this.state = 'new'\n  this._arrayMode = config.rowMode === 'array'\n\n  // if the 'row' event is listened for\n  // then emit them as they come in\n  // without setting singleRowMode to true\n  // this has almost no meaning because libpq\n  // reads all rows into memory before returning any\n  this._emitRowEvents = false\n  this.on(\n    'newListener',\n    function (event) {\n      if (event === 'row') this._emitRowEvents = true\n    }.bind(this)\n  )\n})\n\nutil.inherits(NativeQuery, EventEmitter)\n\nconst errorFieldMap = {\n  sqlState: 'code',\n  statementPosition: 'position',\n  messagePrimary: 'message',\n  context: 'where',\n  schemaName: 'schema',\n  tableName: 'table',\n  columnName: 'column',\n  dataTypeName: 'dataType',\n  constraintName: 'constraint',\n  sourceFile: 'file',\n  sourceLine: 'line',\n  sourceFunction: 'routine',\n}\n\nNativeQuery.prototype.handleError = function (err) {\n  // copy pq error fields into the error object\n  const fields = this.native.pq.resultErrorFields()\n  if (fields) {\n    for (const key in fields) {\n      const normalizedFieldName = errorFieldMap[key] || key\n      err[normalizedFieldName] = fields[key]\n    }\n  }\n  if (this.callback) {\n    this.callback(err)\n  } else {\n    this.emit('error', err)\n  }\n  this.state = 'error'\n}\n\nNativeQuery.prototype.then = function (onSuccess, onFailure) {\n  return this._getPromise().then(onSuccess, onFailure)\n}\n\nNativeQuery.prototype.catch = function (callback) {\n  return this._getPromise().catch(callback)\n}\n\nNativeQuery.prototype._getPromise = function () {\n  if (this._promise) return this._promise\n  this._promise = new Promise(\n    function (resolve, reject) {\n      this._once('end', resolve)\n      this._once('error', reject)\n    }.bind(this)\n  )\n  return this._promise\n}\n\nNativeQuery.prototype.submit = function (client) {\n  this.state = 'running'\n  const self = this\n  this.native = client.native\n  client.native.arrayMode = this._arrayMode\n\n  let after = function (err, rows, results) {\n    client.native.arrayMode = false\n    setImmediate(function () {\n      self.emit('_done')\n    })\n\n    // handle possible query error\n    if (err) {\n      return self.handleError(err)\n    }\n\n    // emit row events for each row in the result\n    if (self._emitRowEvents) {\n      if (results.length > 1) {\n        rows.forEach((rowOfRows, i) => {\n          rowOfRows.forEach((row) => {\n            self.emit('row', row, results[i])\n          })\n        })\n      } else {\n        rows.forEach(function (row) {\n          self.emit('row', row, results)\n        })\n      }\n    }\n\n    // handle successful result\n    self.state = 'end'\n    self.emit('end', results)\n    if (self.callback) {\n      self.callback(null, results)\n    }\n  }\n\n  if (process.domain) {\n    after = process.domain.bind(after)\n  }\n\n  // named query\n  if (this.name) {\n    if (this.name.length > 63) {\n      console.error('Warning! Postgres only supports 63 characters for query names.')\n      console.error('You supplied %s (%s)', this.name, this.name.length)\n      console.error('This can cause conflicts and silent errors executing queries')\n    }\n    const values = (this.values || []).map(utils.prepareValue)\n\n    // check if the client has already executed this named query\n    // if so...just execute it again - skip the planning phase\n    if (client.namedQueries[this.name]) {\n      if (this.text && client.namedQueries[this.name] !== this.text) {\n        const err = new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`)\n        return after(err)\n      }\n      return client.native.execute(this.name, values, after)\n    }\n    // plan the named query the first time, then execute it\n    return client.native.prepare(this.name, this.text, values.length, function (err) {\n      if (err) return after(err)\n      client.namedQueries[self.name] = self.text\n      return self.native.execute(self.name, values, after)\n    })\n  } else if (this.values) {\n    if (!Array.isArray(this.values)) {\n      const err = new Error('Query values must be an array')\n      return after(err)\n    }\n    const vals = this.values.map(utils.prepareValue)\n    client.native.query(this.text, vals, after)\n  } else if (this.queryMode === 'extended') {\n    client.native.query(this.text, [], after)\n  } else {\n    client.native.query(this.text, after)\n  }\n}\n", "'use strict'\n\n// eslint-disable-next-line\nvar Native\n// eslint-disable-next-line no-useless-catch\ntry {\n  // Wrap this `require()` in a try-catch to avoid upstream bundlers from complaining that this might not be available since it is an optional import\n  Native = require('pg-native')\n} catch (e) {\n  throw e\n}\nconst TypeOverrides = require('../type-overrides')\nconst EventEmitter = require('events').EventEmitter\nconst util = require('util')\nconst ConnectionParameters = require('../connection-parameters')\n\nconst NativeQuery = require('./query')\n\nconst Client = (module.exports = function (config) {\n  EventEmitter.call(this)\n  config = config || {}\n\n  this._Promise = config.Promise || global.Promise\n  this._types = new TypeOverrides(config.types)\n\n  this.native = new Native({\n    types: this._types,\n  })\n\n  this._queryQueue = []\n  this._ending = false\n  this._connecting = false\n  this._connected = false\n  this._queryable = true\n\n  // keep these on the object for legacy reasons\n  // for the time being. TODO: deprecate all this jazz\n  const cp = (this.connectionParameters = new ConnectionParameters(config))\n  if (config.nativeConnectionString) cp.nativeConnectionString = config.nativeConnectionString\n  this.user = cp.user\n\n  // \"hiding\" the password so it doesn't show up in stack traces\n  // or if the client is console.logged\n  Object.defineProperty(this, 'password', {\n    configurable: true,\n    enumerable: false,\n    writable: true,\n    value: cp.password,\n  })\n  this.database = cp.database\n  this.host = cp.host\n  this.port = cp.port\n\n  // a hash to hold named queries\n  this.namedQueries = {}\n})\n\nClient.Query = NativeQuery\n\nutil.inherits(Client, EventEmitter)\n\nClient.prototype._errorAllQueries = function (err) {\n  const enqueueError = (query) => {\n    process.nextTick(() => {\n      query.native = this.native\n      query.handleError(err)\n    })\n  }\n\n  if (this._hasActiveQuery()) {\n    enqueueError(this._activeQuery)\n    this._activeQuery = null\n  }\n\n  this._queryQueue.forEach(enqueueError)\n  this._queryQueue.length = 0\n}\n\n// connect to the backend\n// pass an optional callback to be called once connected\n// or with an error if there was a connection error\nClient.prototype._connect = function (cb) {\n  const self = this\n\n  if (this._connecting) {\n    process.nextTick(() => cb(new Error('Client has already been connected. You cannot reuse a client.')))\n    return\n  }\n\n  this._connecting = true\n\n  this.connectionParameters.getLibpqConnectionString(function (err, conString) {\n    if (self.connectionParameters.nativeConnectionString) conString = self.connectionParameters.nativeConnectionString\n    if (err) return cb(err)\n    self.native.connect(conString, function (err) {\n      if (err) {\n        self.native.end()\n        return cb(err)\n      }\n\n      // set internal states to connected\n      self._connected = true\n\n      // handle connection errors from the native layer\n      self.native.on('error', function (err) {\n        self._queryable = false\n        self._errorAllQueries(err)\n        self.emit('error', err)\n      })\n\n      self.native.on('notification', function (msg) {\n        self.emit('notification', {\n          channel: msg.relname,\n          payload: msg.extra,\n        })\n      })\n\n      // signal we are connected now\n      self.emit('connect')\n      self._pulseQueryQueue(true)\n\n      cb()\n    })\n  })\n}\n\nClient.prototype.connect = function (callback) {\n  if (callback) {\n    this._connect(callback)\n    return\n  }\n\n  return new this._Promise((resolve, reject) => {\n    this._connect((error) => {\n      if (error) {\n        reject(error)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\n\n// send a query to the server\n// this method is highly overloaded to take\n// 1) string query, optional array of parameters, optional function callback\n// 2) object query with {\n//    string query\n//    optional array values,\n//    optional function callback instead of as a separate parameter\n//    optional string name to name & cache the query plan\n//    optional string rowMode = 'array' for an array of results\n//  }\nClient.prototype.query = function (config, values, callback) {\n  let query\n  let result\n  let readTimeout\n  let readTimeoutTimer\n  let queryCallback\n\n  if (config === null || config === undefined) {\n    throw new TypeError('Client was passed a null or undefined query')\n  } else if (typeof config.submit === 'function') {\n    readTimeout = config.query_timeout || this.connectionParameters.query_timeout\n    result = query = config\n    // accept query(new Query(...), (err, res) => { }) style\n    if (typeof values === 'function') {\n      config.callback = values\n    }\n  } else {\n    readTimeout = config.query_timeout || this.connectionParameters.query_timeout\n    query = new NativeQuery(config, values, callback)\n    if (!query.callback) {\n      let resolveOut, rejectOut\n      result = new this._Promise((resolve, reject) => {\n        resolveOut = resolve\n        rejectOut = reject\n      }).catch((err) => {\n        Error.captureStackTrace(err)\n        throw err\n      })\n      query.callback = (err, res) => (err ? rejectOut(err) : resolveOut(res))\n    }\n  }\n\n  if (readTimeout) {\n    queryCallback = query.callback\n\n    readTimeoutTimer = setTimeout(() => {\n      const error = new Error('Query read timeout')\n\n      process.nextTick(() => {\n        query.handleError(error, this.connection)\n      })\n\n      queryCallback(error)\n\n      // we already returned an error,\n      // just do nothing if query completes\n      query.callback = () => {}\n\n      // Remove from queue\n      const index = this._queryQueue.indexOf(query)\n      if (index > -1) {\n        this._queryQueue.splice(index, 1)\n      }\n\n      this._pulseQueryQueue()\n    }, readTimeout)\n\n    query.callback = (err, res) => {\n      clearTimeout(readTimeoutTimer)\n      queryCallback(err, res)\n    }\n  }\n\n  if (!this._queryable) {\n    query.native = this.native\n    process.nextTick(() => {\n      query.handleError(new Error('Client has encountered a connection error and is not queryable'))\n    })\n    return result\n  }\n\n  if (this._ending) {\n    query.native = this.native\n    process.nextTick(() => {\n      query.handleError(new Error('Client was closed and is not queryable'))\n    })\n    return result\n  }\n\n  this._queryQueue.push(query)\n  this._pulseQueryQueue()\n  return result\n}\n\n// disconnect from the backend server\nClient.prototype.end = function (cb) {\n  const self = this\n\n  this._ending = true\n\n  if (!this._connected) {\n    this.once('connect', this.end.bind(this, cb))\n  }\n  let result\n  if (!cb) {\n    result = new this._Promise(function (resolve, reject) {\n      cb = (err) => (err ? reject(err) : resolve())\n    })\n  }\n  this.native.end(function () {\n    self._errorAllQueries(new Error('Connection terminated'))\n\n    process.nextTick(() => {\n      self.emit('end')\n      if (cb) cb()\n    })\n  })\n  return result\n}\n\nClient.prototype._hasActiveQuery = function () {\n  return this._activeQuery && this._activeQuery.state !== 'error' && this._activeQuery.state !== 'end'\n}\n\nClient.prototype._pulseQueryQueue = function (initialConnection) {\n  if (!this._connected) {\n    return\n  }\n  if (this._hasActiveQuery()) {\n    return\n  }\n  const query = this._queryQueue.shift()\n  if (!query) {\n    if (!initialConnection) {\n      this.emit('drain')\n    }\n    return\n  }\n  this._activeQuery = query\n  query.submit(this)\n  const self = this\n  query.once('_done', function () {\n    self._pulseQueryQueue()\n  })\n}\n\n// attempt to cancel an in-progress query\nClient.prototype.cancel = function (query) {\n  if (this._activeQuery === query) {\n    this.native.cancel(function () {})\n  } else if (this._queryQueue.indexOf(query) !== -1) {\n    this._queryQueue.splice(this._queryQueue.indexOf(query), 1)\n  }\n}\n\nClient.prototype.ref = function () {}\nClient.prototype.unref = function () {}\n\nClient.prototype.setTypeParser = function (oid, format, parseFn) {\n  return this._types.setTypeParser(oid, format, parseFn)\n}\n\nClient.prototype.getTypeParser = function (oid, format) {\n  return this._types.getTypeParser(oid, format)\n}\n", "'use strict'\nmodule.exports = require('./client')\n", "'use strict'\n\nconst Client = require('./client')\nconst defaults = require('./defaults')\nconst Connection = require('./connection')\nconst Result = require('./result')\nconst utils = require('./utils')\nconst Pool = require('pg-pool')\nconst TypeOverrides = require('./type-overrides')\nconst { DatabaseError } = require('pg-protocol')\nconst { escapeIdentifier, escapeLiteral } = require('./utils')\n\nconst poolFactory = (Client) => {\n  return class BoundPool extends Pool {\n    constructor(options) {\n      super(options, Client)\n    }\n  }\n}\n\nconst PG = function (clientConstructor) {\n  this.defaults = defaults\n  this.Client = clientConstructor\n  this.Query = this.Client.Query\n  this.Pool = poolFactory(this.Client)\n  this._pools = []\n  this.Connection = Connection\n  this.types = require('pg-types')\n  this.DatabaseError = DatabaseError\n  this.TypeOverrides = TypeOverrides\n  this.escapeIdentifier = escapeIdentifier\n  this.escapeLiteral = escapeLiteral\n  this.Result = Result\n  this.utils = utils\n}\n\nif (typeof process.env.NODE_PG_FORCE_NATIVE !== 'undefined') {\n  module.exports = new PG(require('./native'))\n} else {\n  module.exports = new PG(Client)\n\n  // lazy require native module...the native module may not have installed\n  Object.defineProperty(module.exports, 'native', {\n    configurable: true,\n    enumerable: false,\n    get() {\n      let native = null\n      try {\n        native = new PG(require('./native'))\n      } catch (err) {\n        if (err.code !== 'MODULE_NOT_FOUND') {\n          throw err\n        }\n      }\n\n      // overwrite module.exports.native so that getter is never called again\n      Object.defineProperty(module.exports, 'native', {\n        value: native,\n      })\n\n      return native\n    },\n  })\n}\n", "'use strict'\n\nfunction isFunction (funktion) {\n  return typeof funktion === 'function'\n}\n\n// Default to complaining loudly when things don't go according to plan.\nvar logger = console.error.bind(console)\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty (obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name)\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  })\n}\n\n// Keep initialization idempotent.\nfunction shimmer (options) {\n  if (options && options.logger) {\n    if (!isFunction(options.logger)) logger(\"new logger isn't a function, not replacing\")\n    else logger = options.logger\n  }\n}\n\nfunction wrap (nodule, name, wrapper) {\n  if (!nodule || !nodule[name]) {\n    logger('no original function ' + name + ' to wrap')\n    return\n  }\n\n  if (!wrapper) {\n    logger('no wrapper function')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!isFunction(nodule[name]) || !isFunction(wrapper)) {\n    logger('original object and wrapper must be functions')\n    return\n  }\n\n  var original = nodule[name]\n  var wrapped = wrapper(original, name)\n\n  defineProperty(wrapped, '__original', original)\n  defineProperty(wrapped, '__unwrap', function () {\n    if (nodule[name] === wrapped) defineProperty(nodule, name, original)\n  })\n  defineProperty(wrapped, '__wrapped', true)\n\n  defineProperty(nodule, name, wrapped)\n  return wrapped\n}\n\nfunction massWrap (nodules, names, wrapper) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to wrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      wrap(nodule, name, wrapper)\n    })\n  })\n}\n\nfunction unwrap (nodule, name) {\n  if (!nodule || !nodule[name]) {\n    logger('no function to unwrap.')\n    logger((new Error()).stack)\n    return\n  }\n\n  if (!nodule[name].__unwrap) {\n    logger('no original to unwrap to -- has ' + name + ' already been unwrapped?')\n  } else {\n    return nodule[name].__unwrap()\n  }\n}\n\nfunction massUnwrap (nodules, names) {\n  if (!nodules) {\n    logger('must provide one or more modules to patch')\n    logger((new Error()).stack)\n    return\n  } else if (!Array.isArray(nodules)) {\n    nodules = [nodules]\n  }\n\n  if (!(names && Array.isArray(names))) {\n    logger('must provide one or more functions to unwrap on modules')\n    return\n  }\n\n  nodules.forEach(function (nodule) {\n    names.forEach(function (name) {\n      unwrap(nodule, name)\n    })\n  })\n}\n\nshimmer.wrap = wrap\nshimmer.massWrap = massWrap\nshimmer.unwrap = unwrap\nshimmer.massUnwrap = massUnwrap\n\nmodule.exports = shimmer\n", "'use strict';\n\nvar shimmer = require('shimmer');\nvar wrap    = shimmer.wrap;\nvar unwrap  = shimmer.unwrap;\n\n// Default to complaining loudly when things don't go according to plan.\n// dunderscores are boring\nvar SYMBOL = 'wrap@before';\n\n// Sets a property on an object, preserving its enumerability.\n// This function assumes that the property is already writable.\nfunction defineProperty(obj, name, value) {\n  var enumerable = !!obj[name] && obj.propertyIsEnumerable(name);\n  Object.defineProperty(obj, name, {\n    configurable: true,\n    enumerable: enumerable,\n    writable: true,\n    value: value\n  });\n}\n\nfunction _process(self, listeners) {\n  var l = listeners.length;\n  for (var p = 0; p < l; p++) {\n    var listener = listeners[p];\n    // set up the listener so that onEmit can do whatever it needs\n    var before = self[SYMBOL];\n    if (typeof before === 'function') {\n      before(listener);\n    }\n    else if (Array.isArray(before)) {\n      var length = before.length;\n      for (var i = 0; i < length; i++) before[i](listener);\n    }\n  }\n}\n\nfunction _listeners(self, event) {\n  var listeners;\n  listeners = self._events && self._events[event];\n  if (!Array.isArray(listeners)) {\n    if (listeners) {\n      listeners = [listeners];\n    }\n    else {\n      listeners = [];\n    }\n  }\n\n  return listeners;\n}\n\nfunction _findAndProcess(self, event, before) {\n  var after = _listeners(self, event);\n  var unprocessed = after.filter(function(fn) { return before.indexOf(fn) === -1; });\n  if (unprocessed.length > 0) _process(self, unprocessed);\n}\n\nfunction _wrap(unwrapped, visit) {\n  if (!unwrapped) return;\n\n  var wrapped = unwrapped;\n  if (typeof unwrapped === 'function') {\n    wrapped = visit(unwrapped);\n  }\n  else if (Array.isArray(unwrapped)) {\n    wrapped = [];\n    for (var i = 0; i < unwrapped.length; i++) {\n      wrapped[i] = visit(unwrapped[i]);\n    }\n  }\n  return wrapped;\n}\n\nmodule.exports = function wrapEmitter(emitter, onAddListener, onEmit) {\n  if (!emitter || !emitter.on || !emitter.addListener ||\n      !emitter.removeListener || !emitter.emit) {\n    throw new Error(\"can only wrap real EEs\");\n  }\n\n  if (!onAddListener) throw new Error(\"must have function to run on listener addition\");\n  if (!onEmit) throw new Error(\"must have function to wrap listeners when emitting\");\n\n  /* Attach a context to a listener, and make sure that this hook stays\n   * attached to the emitter forevermore.\n   */\n  function adding(on) {\n    return function added(event, listener) {\n      var existing = _listeners(this, event).slice();\n\n      try {\n        var returned = on.call(this, event, listener);\n        _findAndProcess(this, event, existing);\n        return returned;\n      }\n      finally {\n        // old-style streaming overwrites .on and .addListener, so rewrap\n        if (!this.on.__wrapped) wrap(this, 'on', adding);\n        if (!this.addListener.__wrapped) wrap(this, 'addListener', adding);\n      }\n    };\n  }\n\n  function emitting(emit) {\n    return function emitted(event) {\n      if (!this._events || !this._events[event]) return emit.apply(this, arguments);\n\n      var unwrapped = this._events[event];\n\n      /* Ensure that if removeListener gets called, it's working with the\n       * unwrapped listeners.\n       */\n      function remover(removeListener) {\n        return function removed() {\n          this._events[event] = unwrapped;\n          try {\n            return removeListener.apply(this, arguments);\n          }\n          finally {\n            unwrapped = this._events[event];\n            this._events[event] = _wrap(unwrapped, onEmit);\n          }\n        };\n      }\n      wrap(this, 'removeListener', remover);\n\n      try {\n        /* At emit time, ensure that whatever else is going on, removeListener will\n         * still work while at the same time running whatever hooks are necessary to\n         * make sure the listener is run in the correct context.\n         */\n        this._events[event] = _wrap(unwrapped, onEmit);\n        return emit.apply(this, arguments);\n      }\n      finally {\n        /* Ensure that regardless of what happens when preparing and running the\n         * listeners, the status quo ante is restored before continuing.\n         */\n        unwrap(this, 'removeListener');\n        this._events[event] = unwrapped;\n      }\n    };\n  }\n\n  // support multiple onAddListeners\n  if (!emitter[SYMBOL]) {\n    defineProperty(emitter, SYMBOL, onAddListener);\n  }\n  else if (typeof emitter[SYMBOL] === 'function') {\n    defineProperty(emitter, SYMBOL, [emitter[SYMBOL], onAddListener]);\n  }\n  else if (Array.isArray(emitter[SYMBOL])) {\n    emitter[SYMBOL].push(onAddListener);\n  }\n\n  // only wrap the core functions once\n  if (!emitter.__wrapped) {\n    wrap(emitter, 'addListener', adding);\n    wrap(emitter, 'on',          adding);\n    wrap(emitter, 'emit',        emitting);\n\n    defineProperty(emitter, '__unwrap', function () {\n      unwrap(emitter, 'addListener');\n      unwrap(emitter, 'on');\n      unwrap(emitter, 'emit');\n      delete emitter[SYMBOL];\n      delete emitter.__wrapped;\n    });\n    defineProperty(emitter, '__wrapped', true);\n  }\n};\n", "/* eslint-disable max-len */\n'use strict';\n\nconst util = require('util');\nconst assert = require('assert');\nconst wrapEmitter = require('emitter-listener');\nconst async_hooks = require('async_hooks');\n\nconst CONTEXTS_SYMBOL = 'cls@contexts';\nconst ERROR_SYMBOL = 'error@context';\n\nconst DEBUG_CLS_HOOKED = process.env.DEBUG_CLS_HOOKED;\n\nlet currentUid = -1;\n\nmodule.exports = {\n  getNamespace: getNamespace,\n  createNamespace: createNamespace,\n  destroyNamespace: destroyNamespace,\n  reset: reset,\n  ERROR_SYMBOL: ERROR_SYMBOL\n};\n\nfunction Namespace(name) {\n  this.name = name;\n  // changed in 2.7: no default context\n  this.active = null;\n  this._set = [];\n  this.id = null;\n  this._contexts = new Map();\n  this._indent = 0;\n}\n\nNamespace.prototype.set = function set(key, value) {\n  if (!this.active) {\n    throw new Error('No context available. ns.run() or ns.bind() must be called first.');\n  }\n\n  this.active[key] = value;\n\n  if (DEBUG_CLS_HOOKED) {\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-SET KEY:' + key + '=' + value + ' in ns:' + this.name + ' currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n  }\n\n  return value;\n};\n\nNamespace.prototype.get = function get(key) {\n  if (!this.active) {\n    if (DEBUG_CLS_HOOKED) {\n      const asyncHooksCurrentId = async_hooks.currentId();\n      const triggerId = async_hooks.triggerAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      //debug2(indentStr + 'CONTEXT-GETTING KEY NO ACTIVE NS:' + key + '=undefined' + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n      debug2(`${indentStr}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${key}=undefined currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length}`);\n    }\n    return undefined;\n  }\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(indentStr + 'CONTEXT-GETTING KEY:' + key + '=' + this.active[key] + ' (' + this.name + ') currentUid:' + currentUid + ' active:' + util.inspect(this.active, {showHidden:true, depth:2, colors:true}));\n    debug2(`${indentStr}CONTEXT-GETTING KEY: (${this.name}) ${key}=${this.active[key]} currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} active:${util.inspect(this.active)}`);\n  }\n  return this.active[key];\n};\n\nNamespace.prototype.createContext = function createContext() {\n  // Prototype inherit existing context if created a new child context within existing context.\n  let context = Object.create(this.active ? this.active : Object.prototype);\n  context._ns_name = this.name;\n  context.id = currentUid;\n\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-CREATED Context: (${this.name}) currentUid:${currentUid} asyncHooksCurrentId:${asyncHooksCurrentId} triggerId:${triggerId} len:${this._set.length} context:${util.inspect(context, {showHidden:true, depth:2, colors:true})}`);\n  }\n\n  return context;\n};\n\nNamespace.prototype.run = function run(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  try {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} context:${util.inspect(context)}`);\n    }\n    fn(context);\n    return context;\n  } catch (exception) {\n    if (exception) {\n      exception[ERROR_SYMBOL] = context;\n    }\n    throw exception;\n  } finally {\n    if (DEBUG_CLS_HOOKED) {\n      const triggerId = async_hooks.triggerAsyncId();\n      const asyncHooksCurrentId = async_hooks.executionAsyncId();\n      const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n      debug2(`${indentStr}CONTEXT-RUN END: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n    }\n    this.exit(context);\n  }\n};\n\nNamespace.prototype.runAndReturn = function runAndReturn(fn) {\n  let value;\n  this.run(function (context) {\n    value = fn(context);\n  });\n  return value;\n};\n\n/**\n * Uses global Promise and assumes Promise is cls friendly or wrapped already.\n * @param {function} fn\n * @returns {*}\n */\nNamespace.prototype.runPromise = function runPromise(fn) {\n  let context = this.createContext();\n  this.enter(context);\n\n  let promise = fn(context);\n  if (!promise || !promise.then || !promise.catch) {\n    throw new Error('fn must return a promise.');\n  }\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2('CONTEXT-runPromise BEFORE: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n  }\n\n  return promise\n    .then(result => {\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER then: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      return result;\n    })\n    .catch(err => {\n      err[ERROR_SYMBOL] = context;\n      if (DEBUG_CLS_HOOKED) {\n        debug2('CONTEXT-runPromise AFTER catch: (' + this.name + ') currentUid:' + currentUid + ' len:' + this._set.length + ' ' + util.inspect(context));\n      }\n      this.exit(context);\n      throw err;\n    });\n};\n\nNamespace.prototype.bind = function bindFactory(fn, context) {\n  if (!context) {\n    if (!this.active) {\n      context = this.createContext();\n    } else {\n      context = this.active;\n    }\n  }\n\n  let self = this;\n  return function clsBind() {\n    self.enter(context);\n    try {\n      return fn.apply(this, arguments);\n    } catch (exception) {\n      if (exception) {\n        exception[ERROR_SYMBOL] = context;\n      }\n      throw exception;\n    } finally {\n      self.exit(context);\n    }\n  };\n};\n\nNamespace.prototype.enter = function enter(context) {\n  assert.ok(context, 'context must be provided for entering');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-ENTER: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  this._set.push(this.active);\n  this.active = context;\n};\n\nNamespace.prototype.exit = function exit(context) {\n  assert.ok(context, 'context must be provided for exiting');\n  if (DEBUG_CLS_HOOKED) {\n    const asyncHooksCurrentId = async_hooks.executionAsyncId();\n    const triggerId = async_hooks.triggerAsyncId();\n    const indentStr = ' '.repeat(this._indent < 0 ? 0 : this._indent);\n    debug2(`${indentStr}CONTEXT-EXIT: (${this.name}) currentUid:${currentUid} triggerId:${triggerId} asyncHooksCurrentId:${asyncHooksCurrentId} len:${this._set.length} ${util.inspect(context)}`);\n  }\n\n  // Fast path for most exits that are at the top of the stack\n  if (this.active === context) {\n    assert.ok(this._set.length, 'can\\'t remove top context');\n    this.active = this._set.pop();\n    return;\n  }\n\n  // Fast search in the stack using lastIndexOf\n  let index = this._set.lastIndexOf(context);\n\n  if (index < 0) {\n    if (DEBUG_CLS_HOOKED) {\n      debug2('??ERROR?? context exiting but not entered - ignoring: ' + util.inspect(context));\n    }\n    assert.ok(index >= 0, 'context not currently entered; can\\'t exit. \\n' + util.inspect(this) + '\\n' + util.inspect(context));\n  } else {\n    assert.ok(index, 'can\\'t remove top context');\n    this._set.splice(index, 1);\n  }\n};\n\nNamespace.prototype.bindEmitter = function bindEmitter(emitter) {\n  assert.ok(emitter.on && emitter.addListener && emitter.emit, 'can only bind real EEs');\n\n  let namespace = this;\n  let thisSymbol = 'context@' + this.name;\n\n  // Capture the context active at the time the emitter is bound.\n  function attach(listener) {\n    if (!listener) {\n      return;\n    }\n    if (!listener[CONTEXTS_SYMBOL]) {\n      listener[CONTEXTS_SYMBOL] = Object.create(null);\n    }\n\n    listener[CONTEXTS_SYMBOL][thisSymbol] = {\n      namespace: namespace,\n      context: namespace.active\n    };\n  }\n\n  // At emit time, bind the listener within the correct context.\n  function bind(unwrapped) {\n    if (!(unwrapped && unwrapped[CONTEXTS_SYMBOL])) {\n      return unwrapped;\n    }\n\n    let wrapped = unwrapped;\n    let unwrappedContexts = unwrapped[CONTEXTS_SYMBOL];\n    Object.keys(unwrappedContexts).forEach(function (name) {\n      let thunk = unwrappedContexts[name];\n      wrapped = thunk.namespace.bind(wrapped, thunk.context);\n    });\n    return wrapped;\n  }\n\n  wrapEmitter(emitter, attach, bind);\n};\n\n/**\n * If an error comes out of a namespace, it will have a context attached to it.\n * This function knows how to find it.\n *\n * @param {Error} exception Possibly annotated error.\n */\nNamespace.prototype.fromException = function fromException(exception) {\n  return exception[ERROR_SYMBOL];\n};\n\nfunction getNamespace(name) {\n  return process.namespaces[name];\n}\n\nfunction createNamespace(name) {\n  assert.ok(name, 'namespace must be given a name.');\n\n  if (DEBUG_CLS_HOOKED) {\n    debug2(`NS-CREATING NAMESPACE (${name})`);\n  }\n  let namespace = new Namespace(name);\n  namespace.id = currentUid;\n\n  const hook = async_hooks.createHook({\n    init(asyncId, type, triggerId, resource) {\n      currentUid = async_hooks.executionAsyncId();\n\n      //CHAIN Parent's Context onto child if none exists. This is needed to pass net-events.spec\n      // let initContext = namespace.active;\n      // if(!initContext && triggerId) {\n      //   let parentContext = namespace._contexts.get(triggerId);\n      //   if (parentContext) {\n      //     namespace.active = parentContext;\n      //     namespace._contexts.set(currentUid, parentContext);\n      //     if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) WITH PARENT CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      //   } else if (DEBUG_CLS_HOOKED) {\n      //       const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //       debug2(`${indentStr}INIT [${type}] (${name}) MISSING CONTEXT asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //     }\n      // }else {\n      //   namespace._contexts.set(currentUid, namespace.active);\n      //   if (DEBUG_CLS_HOOKED) {\n      //     const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n      //     debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, true)} resource:${resource}`);\n      //   }\n      // }\n      if(namespace.active) {\n        namespace._contexts.set(asyncId, namespace.active);\n\n        if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n        }\n      }else if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        const triggerId = async_hooks.triggerAsyncId();\n        const triggerIdContext = namespace._contexts.get(triggerId);\n        if (triggerIdContext) {\n          namespace._contexts.set(asyncId, triggerIdContext);\n          if (DEBUG_CLS_HOOKED) {\n            const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n            debug2(`${indentStr}INIT USING CONTEXT FROM TRIGGERID [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n          }\n        } else if (DEBUG_CLS_HOOKED) {\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}INIT MISSING CONTEXT [${type}] (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, { showHidden: true, depth: 2, colors: true })} resource:${resource}`);\n        }\n      }\n\n\n      if(DEBUG_CLS_HOOKED && type === 'PROMISE'){\n        debug2(util.inspect(resource, {showHidden: true}));\n        const parentId = resource.parentId;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}INIT RESOURCE-PROMISE [${type}] (${name}) parentId:${parentId} asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} resource:${resource}`);\n      }\n\n    },\n    before(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context;\n\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}BEFORE (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n          namespace._indent += 2;\n        }\n\n        namespace.enter(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}BEFORE MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} namespace._contexts:${util.inspect(namespace._contexts, {showHidden:true, depth:2, colors:true})}`);\n        namespace._indent += 2;\n      }\n    },\n    after(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      let context; // = namespace._contexts.get(currentUid);\n      /*\n      if(currentUid === 0){\n        // CurrentId will be 0 when triggered from C++. Promise events\n        // https://github.com/nodejs/node/blob/master/doc/api/async_hooks.md#triggerid\n        //const triggerId = async_hooks.triggerAsyncId();\n        context = namespace._contexts.get(asyncId); // || namespace._contexts.get(triggerId);\n      }else{\n        context = namespace._contexts.get(currentUid);\n      }\n      */\n      //HACK to work with promises until they are fixed in node > 8.1.1\n      context = namespace._contexts.get(asyncId) || namespace._contexts.get(currentUid);\n\n      if (context) {\n        if (DEBUG_CLS_HOOKED) {\n          const triggerId = async_hooks.triggerAsyncId();\n          namespace._indent -= 2;\n          const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n          debug2(`${indentStr}AFTER (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n        }\n\n        namespace.exit(context);\n\n      } else if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        namespace._indent -= 2;\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}AFTER MISSING CONTEXT (${name}) asyncId:${asyncId} currentUid:${currentUid} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(context)}`);\n      }\n    },\n    destroy(asyncId) {\n      currentUid = async_hooks.executionAsyncId();\n      if (DEBUG_CLS_HOOKED) {\n        const triggerId = async_hooks.triggerAsyncId();\n        const indentStr = ' '.repeat(namespace._indent < 0 ? 0 : namespace._indent);\n        debug2(`${indentStr}DESTROY (${name}) currentUid:${currentUid} asyncId:${asyncId} triggerId:${triggerId} active:${util.inspect(namespace.active, {showHidden:true, depth:2, colors:true})} context:${util.inspect(namespace._contexts.get(currentUid))}`);\n      }\n\n      namespace._contexts.delete(asyncId);\n    }\n  });\n\n  hook.enable();\n\n  process.namespaces[name] = namespace;\n  return namespace;\n}\n\nfunction destroyNamespace(name) {\n  let namespace = getNamespace(name);\n\n  assert.ok(namespace, 'can\\'t delete nonexistent namespace! \"' + name + '\"');\n  assert.ok(namespace.id, 'don\\'t assign to process.namespaces directly! ' + util.inspect(namespace));\n\n  process.namespaces[name] = null;\n}\n\nfunction reset() {\n  // must unregister async listeners\n  if (process.namespaces) {\n    Object.keys(process.namespaces).forEach(function (name) {\n      destroyNamespace(name);\n    });\n  }\n  process.namespaces = Object.create(null);\n}\n\nprocess.namespaces = {};\n\n//const fs = require('fs');\nfunction debug2(...args) {\n  if (DEBUG_CLS_HOOKED) {\n    //fs.writeSync(1, `${util.format(...args)}\\n`);\n    process._rawDebug(`${util.format(...args)}`);\n  }\n}\n\n/*function getFunctionName(fn) {\n  if (!fn) {\n    return fn;\n  }\n  if (typeof fn === 'function') {\n    if (fn.name) {\n      return fn.name;\n    }\n    return (fn.toString().trim().match(/^function\\s*([^\\s(]+)/) || [])[1];\n  } else if (fn.constructor && fn.constructor.name) {\n    return fn.constructor.name;\n  }\n}*/\n\n\n", "\"use strict\";\nvar validLogLevels = ['debug', 'info', 'warn', 'error', 'silent'];\nvar defaultLogLevel = validLogLevels.indexOf('error');\nvar logLevel = calculateLogLevel(process.env.AWS_XRAY_DEBUG_MODE ? 'debug' : process.env.AWS_XRAY_LOG_LEVEL);\nvar logger = {\n    error: createLoggerForLevel('error'),\n    info: createLoggerForLevel('info'),\n    warn: createLoggerForLevel('warn'),\n    debug: createLoggerForLevel('debug'),\n};\nfunction createLoggerForLevel(level) {\n    var loggerLevel = validLogLevels.indexOf(level);\n    var consoleMethod = console[level] || console.log || (() => { });\n    if (loggerLevel >= logLevel) {\n        return (message, meta) => {\n            if (message || meta) {\n                consoleMethod(formatLogMessage(level, message, meta));\n            }\n        };\n    }\n    else {\n        return () => { };\n    }\n}\nfunction calculateLogLevel(level) {\n    if (level) {\n        var normalisedLevel = level.toLowerCase();\n        var index = validLogLevels.indexOf(normalisedLevel);\n        return index >= 0 ? index : defaultLogLevel;\n    }\n    // Silently ignore invalid log levels, default to default level\n    return defaultLogLevel;\n}\nfunction createTimestamp(date) {\n    var tzo = -date.getTimezoneOffset(), // Negate to make this tzo = local - UTC\n    dif = tzo >= 0 ? '+' : '-', pad = function (num) {\n        var norm = Math.floor(Math.abs(num));\n        return (norm < 10 ? '0' : '') + norm;\n    };\n    return new Date(date.getTime() + (tzo * 60 * 1000)).toISOString()\n        .replace(/T/, ' ')\n        .replace(/Z/, ' ') +\n        dif + pad(tzo / 60) +\n        ':' + pad(tzo % 60);\n}\nfunction isLambdaFunction() {\n    return process.env.LAMBDA_TASK_ROOT !== undefined;\n}\nfunction formatLogMessage(level, message, meta) {\n    var messageParts = [];\n    if (!isLambdaFunction()) {\n        messageParts.push(createTimestamp(new Date()));\n        messageParts.push(`[${level.toUpperCase()}]`);\n    }\n    if (message) {\n        messageParts.push(message);\n    }\n    var logString = messageParts.join(' ');\n    var metaDataString = formatMetaData(meta);\n    return [logString, metaDataString].filter(str => str.length > 0).join('\\n  ');\n}\nfunction formatMetaData(meta) {\n    if (!meta) {\n        return '';\n    }\n    return ((typeof (meta) === 'string') ? meta : JSON.stringify(meta));\n}\nvar logging = {\n    setLogger: function setLogger(logObj) {\n        logger = logObj;\n    },\n    getLogger: function getLogger() {\n        return logger;\n    }\n};\nmodule.exports = logging;\n", "\"use strict\";\nconst crypto = require('crypto');\n/**\n * Represents a captured exception.\n * @constructor\n * @param {Exception} err - The exception to capture.\n * @param {boolean} [remote] - Flag for whether the error was remote.\n */\nfunction CapturedException(err, remote) {\n    this.init(err, remote);\n}\nCapturedException.prototype.init = function init(err, remote) {\n    var e = (typeof err === 'string' || err instanceof String) ? { message: err, name: '' } : err;\n    this.message = e.message;\n    this.type = e.name;\n    this.stack = [];\n    this.remote = !!remote;\n    this.id = crypto.randomBytes(8).toString('hex');\n    if (e.stack) {\n        var stack = e.stack.split('\\n');\n        stack.shift();\n        stack.forEach((stackline) => {\n            var line = stackline.trim().replace(/\\(|\\)/g, '');\n            line = line.substring(line.indexOf(' ') + 1);\n            var label = line.lastIndexOf(' ') >= 0 ? line.slice(0, line.lastIndexOf(' ')) : null;\n            var path = Array.isArray(label) && !label.length ? line : line.slice(line.lastIndexOf(' ') + 1);\n            path = path.split(':');\n            var entry = {\n                path: path[0],\n                line: parseInt(path[1]),\n                label: label || 'anonymous'\n            };\n            this.stack.push(entry);\n        }, this);\n    }\n};\nmodule.exports = CapturedException;\n", "module.exports = batcher\n\nfunction batcher (run) {\n  var running = false\n  var pendingBatch = null\n  var pendingCallbacks = null\n  var callbacks = null\n\n  return append\n\n  function done (err) {\n    if (callbacks) callAll(callbacks, err)\n\n    running = false\n    callbacks = pendingCallbacks\n    var nextBatch = pendingBatch\n\n    pendingBatch = null\n    pendingCallbacks = null\n\n    if (!nextBatch || !nextBatch.length) {\n      if (!callbacks || !callbacks.length) {\n        callbacks = null\n        return\n      }\n      if (!nextBatch) nextBatch = []\n    }\n\n    running = true\n    run(nextBatch, done)\n  }\n\n  function append (val, cb) {\n    if (running) {\n      if (!pendingBatch) {\n        pendingBatch = []\n        pendingCallbacks = []\n      }\n      pushAll(pendingBatch, val)\n      if (cb) pendingCallbacks.push(cb)\n    } else {\n      if (cb) callbacks = [cb]\n      running = true\n      run(Array.isArray(val) ? val : [val], done)\n    }\n  }\n}\n\nfunction pushAll (list, val) {\n  if (Array.isArray(val)) pushArray(list, val)\n  else list.push(val)\n}\n\nfunction pushArray (list, val) {\n  for (var i = 0; i < val.length; i++) list.push(val[i])\n}\n\nfunction callAll (list, err) {\n  for (var i = 0; i < list.length; i++) list[i](err)\n}\n", "\"use strict\";\nvar logger = require('./logger');\n/**\n * A module representing the X-Ray daemon configuration including the udp and tcp addresses.\n * @module DaemonConfig\n */\nvar DaemonConfig = {\n    udp_ip: '127.0.0.1',\n    udp_port: 2000,\n    tcp_ip: '127.0.0.1',\n    tcp_port: 2000,\n    setDaemonAddress: function setDaemonAddress(address) {\n        if (!process.env.AWS_XRAY_DAEMON_ADDRESS) {\n            processAddress(address);\n            logger.getLogger().info('Configured daemon address to ' + address + '.');\n        }\n        else {\n            logger.getLogger().warn('Ignoring call to setDaemonAddress as AWS_XRAY_DAEMON_ADDRESS is set. ' +\n                'The current daemon address will not be changed.');\n        }\n    }\n};\nvar processAddress = function processAddress(address) {\n    if (address.indexOf(':') === -1) {\n        throw new Error('Invalid Daemon Address. You must specify an ip and port.');\n    }\n    else {\n        var splitAddress = address.split(' ');\n        if (splitAddress.length === 1) {\n            // in format of 127.0.0.1:2000\n            if (address.indexOf('udp') > -1 || address.indexOf('tcp') > -1) {\n                throw new Error('Invalid Daemon Address. You must specify both tcp and udp addresses.');\n            }\n            var addr = address.split(':');\n            if (!addr[0]) {\n                throw new Error('Invalid Daemon Address. You must specify an ip.');\n            }\n            DaemonConfig.udp_ip = addr[0];\n            DaemonConfig.tcp_ip = addr[0];\n            DaemonConfig.udp_port = addr[1];\n            DaemonConfig.tcp_port = addr[1];\n        }\n        else if (splitAddress.length === 2) {\n            // in format of udp:127.0.0.1:2000 tcp:127.0.0.1:2001\n            var part_1 = splitAddress[0].split(':');\n            var part_2 = splitAddress[1].split(':');\n            var addr_map = {};\n            addr_map[part_1[0]] = part_1;\n            addr_map[part_2[0]] = part_2;\n            DaemonConfig.udp_ip = addr_map['udp'][1];\n            DaemonConfig.udp_port = parseInt(addr_map['udp'][2]);\n            DaemonConfig.tcp_ip = addr_map['tcp'][1];\n            DaemonConfig.tcp_port = parseInt(addr_map['tcp'][2]);\n            if (!DaemonConfig.udp_port || !DaemonConfig.tcp_port) {\n                throw new Error('Invalid Daemon Address. You must specify port number.');\n            }\n        }\n    }\n};\nif (process.env.AWS_XRAY_DAEMON_ADDRESS) {\n    processAddress(process.env.AWS_XRAY_DAEMON_ADDRESS);\n}\nmodule.exports = DaemonConfig;\n", "\"use strict\";\nvar dgram = require('dgram');\nvar batcher = require('atomic-batcher');\nvar logger = require('./logger');\nvar PROTOCOL_HEADER = '{\"format\":\"json\",\"version\":1}';\nvar PROTOCOL_DELIMITER = '\\n';\n/**\n * Sends a collection of data over a UDP socket. This method\n * is designed to be used by `atomic-batcher` as a way to share\n * a single UDP socket for sending multiple data blocks.\n *\n * @param {object} ops - Details of the data to send\n * @param {Function} callback - The function to call when done\n */\nfunction batchSendData(ops, callback) {\n    var client = dgram.createSocket('udp4');\n    executeSendData(client, ops, 0, function () {\n        try {\n            client.close();\n        }\n        finally {\n            callback();\n        }\n    });\n}\n/**\n * Execute sending data starting at the specified index and\n * using the provided client.\n *\n * @param {Socket} client - Socket to send data with\n * @param {object} ops - Details of data to send\n * @param {number} index - Starting index for sending\n * @param {Function} callback - Function to call when done\n */\nfunction executeSendData(client, ops, index, callback) {\n    if (index >= ops.length) {\n        callback();\n        return;\n    }\n    sendMessage(client, ops[index], function () {\n        executeSendData(client, ops, index + 1, callback);\n    });\n}\n/**\n * Send a single message over a UDP socket.\n *\n * @param {Socket} client - Socket to send data with\n * @param {object} data - Details of the data to send\n * @param {Function} batchCallback - Function to call when done\n */\nfunction sendMessage(client, data, batchCallback) {\n    var msg = data.msg;\n    var offset = data.offset;\n    var length = data.length;\n    var port = data.port;\n    var address = data.address;\n    var callback = data.callback;\n    client.send(msg, offset, length, port, address, function (err) {\n        try {\n            callback(err);\n        }\n        finally {\n            batchCallback();\n        }\n    });\n}\n/**\n * Class to mimic the Socket interface for a UDP client, but to provided\n * batching of outgoing sends using temporary Sockets that are created and\n * destroyed as needed.\n */\nfunction BatchingTemporarySocket() {\n    this.batchSend = batcher(batchSendData);\n}\n/**\n * Provide the same signature as the Socket.send method but the work will be\n * batched to share temporary UDP sockets whenever possible.\n */\nBatchingTemporarySocket.prototype.send = function (msg, offset, length, port, address, callback) {\n    var work = {\n        msg: msg,\n        offset: offset,\n        length: length,\n        port: port,\n        address: address,\n        callback: callback\n    };\n    this.batchSend(work);\n};\n/**\n * Segment emitter module.\n * @module SegmentEmitter\n */\nvar SegmentEmitter = {\n    daemonConfig: require('./daemon_config'),\n    /**\n     * Returns the formatted segment JSON string.\n     * @param {Segment} segment - The segment to format.\n     */\n    format: function format(segment) {\n        return PROTOCOL_HEADER + PROTOCOL_DELIMITER + segment.toString();\n    },\n    /**\n     * Creates a UDP socket connection and send the formatted segment.\n     * @param {Segment} segment - The segment to send to the daemon.\n     */\n    send: function send(segment) {\n        if (!this.socket) {\n            if (this.useBatchingTemporarySocket) {\n                this.socket = new BatchingTemporarySocket();\n            }\n            else {\n                this.socket = dgram.createSocket('udp4').unref();\n            }\n        }\n        var client = this.socket;\n        var formatted = segment.format();\n        var data = PROTOCOL_HEADER + PROTOCOL_DELIMITER + formatted;\n        var message = Buffer.from(data);\n        var short = '{\"trace_id:\"' + segment.trace_id + '\",\"id\":\"' + segment.id + '\"}';\n        var type = segment.type === 'subsegment' ? 'Subsegment' : 'Segment';\n        client.send(message, 0, message.length, this.daemonConfig.udp_port, this.daemonConfig.udp_ip, function (err) {\n            if (err) {\n                if (err.code === 'EMSGSIZE') {\n                    logger.getLogger().error(type + ' too large to send: ' + short + ' (' + message.length + ' bytes).');\n                }\n                else {\n                    logger.getLogger().error('Error occured sending segment: ', err);\n                }\n            }\n            else {\n                logger.getLogger().debug(type + ' sent: {\"trace_id:\"' + segment.trace_id + '\",\"id\":\"' + segment.id + '\"}');\n                logger.getLogger().debug('UDP message sent: ' + segment);\n            }\n        });\n    },\n    /**\n     * Configures the address and/or port the daemon is expected to be on.\n     * @param {string} address - Address of the daemon the segments should be sent to. Should be formatted as an IPv4 address.\n     * @module SegmentEmitter\n     * @function setDaemonAddress\n     */\n    setDaemonAddress: function setDaemonAddress(address) {\n        this.daemonConfig.setDaemonAddress(address);\n    },\n    /**\n     * Get the UDP IP the emitter is configured to.\n     * @module SegmentEmitter\n     * @function getIp\n     */\n    getIp: function getIp() {\n        return this.daemonConfig.udp_ip;\n    },\n    /**\n     * Get the UDP port the emitter is configured to.\n     * @module SegmentEmitter\n     * @function getPort\n     */\n    getPort: function getPort() {\n        return this.daemonConfig.udp_port;\n    },\n    /**\n     * Forces the segment emitter to create a new socket on send, and close it on complete.\n     * @module SegmentEmitter\n     * @function disableReusableSocket\n     */\n    disableReusableSocket: function () {\n        this.useBatchingTemporarySocket = true;\n    }\n};\nmodule.exports = SegmentEmitter;\n", "\"use strict\";\nvar crypto = require('crypto');\nvar logger = require('../../logger');\n/**\n * Class describing an AWS X-Ray trace ID.\n * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-traces\n */\nclass TraceID {\n    /**\n     * Constructs a new trace ID using the current time.\n     * @param {string} [tsHex] - time stamp to use for trace ID in hexadecimal format\n     * @param {string} [numberhex] - string of hexadecimal characters for random portion of Trace ID\n     * @constructor\n     */\n    constructor(tsHex, numberhex) {\n        this.version = 1;\n        this.timestamp = tsHex || Math.round(new Date().getTime() / 1000).toString(16);\n        this.id = numberhex || crypto.randomBytes(12).toString('hex');\n    }\n    /**\n     * @returns {TraceID} - a hardcoded trace ID using zeroed timestamp and random ID\n     */\n    static Invalid() {\n        return new TraceID('00000000', '000000000000000000000000');\n    }\n    /**\n     * Constructs a new trace ID from provided string. If no string is provided or the provided string is invalid,\n     * log an error but a new trace ID still returned. This can be used as a trace ID string validator.\n     * @param {string} [rawID] - string to create a Trace ID object from.\n     */\n    static FromString(rawID) {\n        const DELIMITER = '-';\n        var traceID = new TraceID();\n        var version, timestamp;\n        if (!rawID || typeof rawID !== 'string') {\n            logger.getLogger().error('Empty or non-string trace ID provided');\n            return traceID;\n        }\n        const parts = rawID.trim().split(DELIMITER);\n        if (parts.length !== 3) {\n            logger.getLogger().error('Unrecognized trace ID format');\n            return traceID;\n        }\n        version = parseInt(parts[0]);\n        if (isNaN(version) || version < 1) {\n            logger.getLogger().error('Trace ID version must be positive integer');\n            return traceID;\n        }\n        timestamp = parseInt(parts[1], 16).toString(16);\n        if (timestamp === 'NaN') {\n            logger.getLogger().error('Trace ID timestamp must be a hex-encoded value');\n            return traceID;\n        }\n        else {\n            timestamp = timestamp.padStart(8, '0');\n        }\n        traceID.version = version;\n        traceID.timestamp = timestamp;\n        traceID.id = parts[2];\n        return traceID;\n    }\n    /**\n     * Returns a string representation of the trace ID.\n     * @returns {string} - stringified trace ID, e.g. 1-57fbe041-2c7ad569f5d6ff149137be86\n     */\n    toString() {\n        return `${this.version.toString()}-${this.timestamp}-${this.id}`;\n    }\n}\nmodule.exports = TraceID;\n", "\"use strict\";\n/**\n * @module utils\n */\nvar crypto = require('crypto');\nvar logger = require('./logger');\nvar TraceID = require('./segments/attributes/trace_id');\nvar utils = {\n    /**\n     * Checks a HTTP response code, where 4xx are 'error' and 5xx are 'fault'.\n     * @param {string} status - the HTTP response status code.\n     * @returns [string] - 'error', 'fault' or nothing on no match\n     * @alias module:utils.getCauseTypeFromHttpStatus\n     */\n    getCauseTypeFromHttpStatus: function getCauseTypeFromHttpStatus(status) {\n        var stat = status.toString();\n        if (stat.match(/^[4][0-9]{2}$/) !== null) {\n            return 'error';\n        }\n        else if (stat.match(/^[5][0-9]{2}$/) !== null) {\n            return 'fault';\n        }\n    },\n    /**\n     * Removes the query string parameters from a given http request path\n     * as it may contain sensitive information\n     *\n     * Related issue: https://github.com/aws/aws-xray-sdk-node/issues/246\n     *\n     * Node documentation: https://nodejs.org/api/http.html#http_http_request_url_options_callback\n     *\n     * @param {string} path - options.path in a http.request callback\n     * @returns [string] - removes query string element from path\n     * @alias module:utils.stripQueryStringFromPath\n     */\n    stripQueryStringFromPath: function stripQueryStringFromPath(path) {\n        return path ? path.split('?')[0] : '';\n    },\n    /**\n     * Performs a case-insensitive wildcard match against two strings. This method works with pseduo-regex chars; specifically ? and * are supported.\n     *   An asterisk (*) represents any combination of characters\n     *   A question mark (?) represents any single character\n     *\n     * @param {string} pattern - the regex-like pattern to be compared against.\n     * @param {string} text - the string to compare against the pattern.\n     * @returns boolean\n     * @alias module:utils.wildcardMatch\n     */\n    wildcardMatch: function wildcardMatch(pattern, text) {\n        if (pattern === undefined || text === undefined) {\n            return false;\n        }\n        if (pattern.length === 1 && pattern.charAt(0) === '*') {\n            return true;\n        }\n        var patternLength = pattern.length;\n        var textLength = text.length;\n        var indexOfGlob = pattern.indexOf('*');\n        pattern = pattern.toLowerCase();\n        text = text.toLowerCase();\n        // Infix globs are relatively rare, and the below search is expensive especially when\n        // Balsa is used a lot. Check for infix globs and, in their absence, do the simple thing\n        if (indexOfGlob === -1 || indexOfGlob === (patternLength - 1)) {\n            var match = function simpleWildcardMatch() {\n                var j = 0;\n                for (var i = 0; i < patternLength; i++) {\n                    var patternChar = pattern.charAt(i);\n                    if (patternChar === '*') {\n                        // Presumption for this method is that globs only occur at end\n                        return true;\n                    }\n                    else if (patternChar === '?') {\n                        if (j === textLength) {\n                            return false;\n                        } // No character to match\n                        j++;\n                    }\n                    else {\n                        if (j >= textLength || patternChar != text.charAt(j)) {\n                            return false;\n                        }\n                        j++;\n                    }\n                }\n                // Ate up all the pattern and didn't end at a glob, so a match will have consumed all\n                // the text\n                return j === textLength;\n            };\n            return match();\n        }\n        /*\n         * The matchArray[i] is used to record if there is a match between the first i chars in =\n         * text and the first j chars in pattern.\n         * So will return matchArray[textLength+1] in the end\n         * Loop from the beginning of the pattern\n         * case not '*': if text[i]==pattern[j] or pattern[j] is '?', and matchArray[i] is true,\n         *   set matchArray[i+1] to true, otherwise false\n         * case '*': since '*' can match any globing, as long as there is a true in matchArray before i\n         *   all the matchArray[i+1], matchArray[i+2],...,matchArray[textLength] could be true\n        */\n        var matchArray = [];\n        matchArray[0] = true;\n        for (var j = 0; j < patternLength; j++) {\n            var i;\n            var patternChar = pattern.charAt(j);\n            if (patternChar != '*') {\n                for (i = textLength - 1; i >= 0; i--) {\n                    matchArray[i + 1] = !!matchArray[i] && (patternChar === '?' || (patternChar === text.charAt(i)));\n                }\n            }\n            else {\n                i = 0;\n                while (i <= textLength && !matchArray[i]) {\n                    i++;\n                }\n                for (i; i <= textLength; i++) {\n                    matchArray[i] = true;\n                }\n            }\n            matchArray[0] = (matchArray[0] && patternChar === '*');\n        }\n        return matchArray[textLength];\n    },\n    LambdaUtils: {\n        validTraceData: function (xAmznTraceId) {\n            var valid = false;\n            if (xAmznTraceId) {\n                var data = utils.processTraceData(xAmznTraceId);\n                valid = !!(data && data.root && data.parent && data.sampled);\n            }\n            return valid;\n        },\n        /**\n         * Populates trace ID, parent ID, and sampled decision of given segment. Will always populate valid values,\n         * even if xAmznTraceId contains missing or invalid values. This ensures downstream services receive valid\n         * headers.\n         * @param {Segment} segment - Facade segment to be populated\n         * @param {String} xAmznTraceId - Raw Trace Header to supply trace data\n         * @returns {Boolean} - true if required fields are present and Trace ID is valid, false otherwise\n         */\n        populateTraceData: function (segment, xAmznTraceId) {\n            logger.getLogger().debug('Lambda trace data found: ' + xAmznTraceId);\n            let traceData = utils.processTraceData(xAmznTraceId);\n            var valid = false;\n            if (!traceData) {\n                traceData = {};\n                logger.getLogger().error('_X_AMZN_TRACE_ID is empty or has an invalid format');\n            }\n            else if (traceData.root && !traceData.parent && !traceData.sampled) {\n                // Lambda PassThrough only has root, treat as valid in this case and mark the segment\n                segment.noOp = true;\n                valid = true;\n            }\n            else if (!traceData.root || !traceData.parent || !traceData.sampled) {\n                logger.getLogger().error('_X_AMZN_TRACE_ID is missing required information');\n            }\n            else {\n                valid = true;\n            }\n            segment.trace_id = TraceID.FromString(traceData.root).toString(); // Will always assign valid trace_id\n            segment.id = traceData.parent || crypto.randomBytes(8).toString('hex');\n            if (traceData.root && segment.trace_id !== traceData.root) {\n                logger.getLogger().error('_X_AMZN_TRACE_ID contains invalid trace ID');\n                valid = false;\n            }\n            if (!parseInt(traceData.sampled)) {\n                segment.notTraced = true;\n            }\n            else {\n                delete segment.notTraced;\n            }\n            if (traceData.data) {\n                segment.additionalTraceData = traceData.data;\n            }\n            logger.getLogger().debug('Segment started: ' + JSON.stringify(traceData));\n            return valid;\n        }\n    },\n    /**\n     * Splits out the data from the trace id format.  Used by the middleware.\n     * @param {String} traceData - The additional trace data (typically in req.headers.x-amzn-trace-id).\n     * @returns {object}\n     * @alias module:mw_utils.processTraceData\n     */\n    processTraceData: function processTraceData(traceData) {\n        var amznTraceData = {};\n        var data = {};\n        var reservedKeywords = ['root', 'parent', 'sampled', 'self'];\n        var remainingBytes = 256;\n        if (!(typeof traceData === 'string' && traceData)) {\n            return amznTraceData;\n        }\n        traceData.split(';').forEach(function (header) {\n            if (!header) {\n                return;\n            }\n            var pair = header.split('=');\n            if (pair[0] && pair[1]) {\n                let key = pair[0].trim();\n                let value = pair[1].trim();\n                let lowerCaseKey = key.toLowerCase();\n                let reserved = reservedKeywords.indexOf(lowerCaseKey) !== -1;\n                if (reserved) {\n                    amznTraceData[lowerCaseKey] = value;\n                }\n                else if (!reserved && remainingBytes - (lowerCaseKey.length + value.length) >= 0) {\n                    data[key] = value;\n                    remainingBytes -= (key.length + value.length);\n                }\n            }\n        });\n        amznTraceData['data'] = data;\n        return amznTraceData;\n    },\n    /**\n     * Makes a shallow copy of an object without given keys - keeps prototype\n     * @param {Object} obj - The object to copy\n     * @param {string[]} [keys=[]] - The keys that won't be copied\n     * @param {boolean} [preservePrototype=false] - If true also copy prototype properties\n     * @returns {}\n     */\n    objectWithoutProperties: function objectWithoutProperties(obj, keys, preservePrototype) {\n        keys = Array.isArray(keys) ? keys : [];\n        preservePrototype = typeof preservePrototype === 'boolean' ? preservePrototype : false;\n        var target = preservePrototype ? Object.create(Object.getPrototypeOf(obj)) : {};\n        for (var property in obj) {\n            if (keys.indexOf(property) >= 0) {\n                continue;\n            }\n            if (!Object.prototype.hasOwnProperty.call(obj, property)) {\n                continue;\n            }\n            target[property] = obj[property];\n        }\n        return target;\n    },\n    /**\n     * Safely gets an integer from a string or number\n     * @param {String | Number} - input to cast to integer\n     * @returns {Number} - Integer representation of input, or 0 if input is not castable to int\n     */\n    safeParseInt: (val) => {\n        if (!val || isNaN(val)) {\n            return 0;\n        }\n        return parseInt(val);\n    }\n};\nmodule.exports = utils;\n", "\"use strict\";\nconst { safeParseInt } = require('../utils');\nvar logger = require('../logger');\nvar DEFAULT_STREAMING_THRESHOLD = 100;\nvar utils = {\n    streamingThreshold: DEFAULT_STREAMING_THRESHOLD,\n    getCurrentTime: function getCurrentTime() {\n        return Date.now() / 1000;\n    },\n    setOrigin: function setOrigin(origin) {\n        this.origin = origin;\n    },\n    setPluginData: function setPluginData(pluginData) {\n        this.pluginData = pluginData;\n    },\n    setSDKData: function setSDKData(sdkData) {\n        this.sdkData = sdkData;\n    },\n    setServiceData: function setServiceData(serviceData) {\n        this.serviceData = serviceData;\n    },\n    /**\n     * Overrides the default streaming threshold (100).\n     * The threshold represents the maximum number of subsegments on a single segment before\n     * the SDK beings to send the completed subsegments out of band of the main segment.\n     * Reduce this threshold if you see the 'Segment too large to send' error.\n     * @param {number} threshold - The new threshold to use.\n     * @memberof AWSXRay\n     */\n    setStreamingThreshold: function setStreamingThreshold(threshold) {\n        if (isFinite(threshold) && threshold >= 0) {\n            utils.streamingThreshold = threshold;\n            logger.getLogger().debug('Subsegment streaming threshold set to: ' + threshold);\n        }\n        else {\n            logger.getLogger().error('Invalid threshold: ' + threshold + '. Must be a whole number >= 0.');\n        }\n    },\n    getStreamingThreshold: function getStreamingThreshold() {\n        return utils.streamingThreshold;\n    },\n    /**\n     * Parses an HTTP response object to return an X-Ray compliant HTTP response object.\n     * @param {http.ServerResponse} res\n     * @returns {Object} - X-Ray response object to be added to (sub)segment\n     */\n    getHttpResponseData: (res) => {\n        const ret = {};\n        if (!res) {\n            return ret;\n        }\n        const status = safeParseInt(res.statusCode);\n        if (status !== 0) {\n            ret.status = status;\n        }\n        if (res.headers && res.headers['content-length']) {\n            ret.content_length = safeParseInt(res.headers['content-length']);\n        }\n        return ret;\n    },\n    getJsonStringifyReplacer: () => (_, value) => {\n        if (typeof value === 'bigint') {\n            return value.toString();\n        }\n        return value;\n    }\n};\nmodule.exports = utils;\n", "\"use strict\";\nconst { getHttpResponseData } = require('../segment_utils');\nvar { stripQueryStringFromPath } = require('../../utils');\n/**\n * Represents an outgoing HTTP/HTTPS call.\n * @constructor\n * @param {http.ClientRequest|https.ClientRequest} req - The request object from the HTTP/HTTPS call.\n * @param {http.IncomingMessage|https.IncomingMessage} res - The response object from the HTTP/HTTPS call.\n * @param {boolean} downstreamXRayEnabled - when true, adds a \"traced\": true hint to generated subsegments such that the AWS X-Ray service expects a corresponding segment from the downstream service.\n */\nfunction RemoteRequestData(req, res, downstreamXRayEnabled) {\n    this.init(req, res, downstreamXRayEnabled);\n}\nRemoteRequestData.prototype.init = function init(req, res, downstreamXRayEnabled) {\n    this.request = {\n        url: (req.agent && req.agent.protocol) ? (req.agent.protocol + '//' + (req.host || req.getHeader('host')) + stripQueryStringFromPath(req.path)) : '',\n        method: req.method || '',\n    };\n    if (downstreamXRayEnabled) {\n        this.request.traced = true;\n    }\n    if (res) {\n        this.response = getHttpResponseData(res);\n    }\n};\nmodule.exports = RemoteRequestData;\n", "\"use strict\";\nvar crypto = require('crypto');\nvar CapturedException = require('./captured_exception');\nvar RemoteRequestData = require('./remote_request_data');\nvar SegmentEmitter = require('../../segment_emitter');\nvar SegmentUtils = require('../segment_utils');\nvar Utils = require('../../utils');\nvar logger = require('../../logger');\n/**\n * Represents a subsegment.\n * @constructor\n * @param {string} name - The name of the subsegment.\n */\nfunction Subsegment(name) {\n    this.init(name);\n}\nSubsegment.prototype.init = function init(name) {\n    if (typeof name != 'string') {\n        throw new Error('Subsegment name must be of type string.');\n    }\n    this.id = crypto.randomBytes(8).toString('hex');\n    this.name = name;\n    this.start_time = SegmentUtils.getCurrentTime();\n    this.in_progress = true;\n    this.counter = 0;\n    this.notTraced = false;\n};\n/**\n * Nests a new subsegment to the array of subsegments.\n * @param {string} name - The name of the new subsegment to append.\n * @returns {Subsegment} - The newly created subsegment.\n */\nSubsegment.prototype.addNewSubsegment = function addNewSubsegment(name) {\n    const subsegment = new Subsegment(name);\n    this.addSubsegment(subsegment);\n    return subsegment;\n};\nSubsegment.prototype.addSubsegmentWithoutSampling = function addSubsegmentWithoutSampling(subsegment) {\n    this.addSubsegment(subsegment);\n    subsegment.notTraced = true;\n};\nSubsegment.prototype.addNewSubsegmentWithoutSampling = function addNewSubsegmentWithoutSampling(name) {\n    const subsegment = new Subsegment(name);\n    this.addSubsegment(subsegment);\n    subsegment.notTraced = true;\n    return subsegment;\n};\n/**\n * Adds a subsegment to the array of subsegments.\n * @param {Subsegment} subsegment - The subsegment to append.\n */\nSubsegment.prototype.addSubsegment = function (subsegment) {\n    if (!(subsegment instanceof Subsegment)) {\n        throw new Error('Failed to add subsegment:' + subsegment + ' to subsegment \"' + this.name +\n            '\".  Not a subsegment.');\n    }\n    if (this.subsegments === undefined) {\n        this.subsegments = [];\n    }\n    subsegment.segment = this.segment;\n    subsegment.parent = this;\n    subsegment.notTraced = subsegment.parent.notTraced;\n    subsegment.noOp = subsegment.parent.noOp;\n    if (subsegment.end_time === undefined) {\n        this.incrementCounter(subsegment.counter);\n    }\n    this.subsegments.push(subsegment);\n};\n/**\n * Removes the subsegment from the subsegments array, used in subsegment streaming.\n */\nSubsegment.prototype.removeSubsegment = function removeSubsegment(subsegment) {\n    if (!(subsegment instanceof Subsegment)) {\n        throw new Error('Failed to remove subsegment:' + subsegment + ' from subsegment \"' + this.name +\n            '\".  Not a subsegment.');\n    }\n    if (this.subsegments !== undefined) {\n        var index = this.subsegments.indexOf(subsegment);\n        if (index >= 0) {\n            this.subsegments.splice(index, 1);\n        }\n    }\n};\n/**\n * Adds a property with associated data into the subsegment.\n * @param {string} name - The name of the property to add.\n * @param {Object} data - The data of the property to add.\n */\nSubsegment.prototype.addAttribute = function addAttribute(name, data) {\n    this[name] = data;\n};\n/**\n * Adds a subsegement id to record ordering.\n * @param {string} id - A subsegment id.\n */\nSubsegment.prototype.addPrecursorId = function (id) {\n    if (typeof id !== 'string') {\n        logger.getLogger().error('Failed to add id:' + id + ' to subsegment ' + this.name +\n            '.  Precursor Ids must be of type string.');\n    }\n    if (this.precursor_ids === undefined) {\n        this.precursor_ids = [];\n    }\n    this.precursor_ids.push(id);\n};\n/**\n * Adds a key-value pair that can be queryable through GetTraceSummaries.\n * Only acceptable types are string, float/int and boolean.\n * @param {string} key - The name of key to add.\n * @param {boolean|string|number} value - The value to add for the given key.\n */\nSubsegment.prototype.addAnnotation = function (key, value) {\n    if (typeof value !== 'boolean' && typeof value !== 'string' && !isFinite(value)) {\n        logger.getLogger().error('Failed to add annotation key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Value must be of type string, number or boolean.');\n        return;\n    }\n    if (typeof key !== 'string') {\n        logger.getLogger().error('Failed to add annotation key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Key must be of type string.');\n        return;\n    }\n    if (this.annotations === undefined) {\n        this.annotations = {};\n    }\n    this.annotations[key] = value;\n};\n/**\n * Adds a key-value pair to the metadata.default attribute when no namespace is given.\n * Metadata is not queryable, but is recorded.\n * @param {string} key - The name of the key to add.\n * @param {object|null} value - The value of the associated key.\n * @param {string} [namespace] - The property name to put the key/value pair under.\n */\nSubsegment.prototype.addMetadata = function (key, value, namespace) {\n    if (typeof key !== 'string') {\n        logger.getLogger().error('Failed to add metadata key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Key must be of type string.');\n        return;\n    }\n    if (namespace && typeof namespace !== 'string') {\n        logger.getLogger().error('Failed to add metadata key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Namespace must be of type string.');\n        return;\n    }\n    var ns = namespace || 'default';\n    if (!this.metadata) {\n        this.metadata = {};\n    }\n    if (!this.metadata[ns]) {\n        this.metadata[ns] = {};\n    }\n    if (ns !== '__proto__') {\n        this.metadata[ns][key] = value !== null && value !== undefined ? value : '';\n    }\n};\nSubsegment.prototype.addSqlData = function addSqlData(sqlData) {\n    this.sql = sqlData;\n};\n/**\n * Adds an error with associated data into the subsegment.\n * To handle propagating errors, the subsegment also sets a copy of the error on the\n * root segment.  As the error passes up the execution stack, a reference is created\n * on each subsegment to the originating subsegment.\n * @param {Error|string} err - The error to capture.\n * @param {boolean} [remote] - Flag for whether the exception caught was remote or not.\n */\nSubsegment.prototype.addError = function addError(err, remote) {\n    if (err == null || typeof err !== 'object' && typeof (err) !== 'string') {\n        logger.getLogger().error('Failed to add error:' + err + ' to subsegment \"' + this.name +\n            '\".  Not an object or string literal.');\n        return;\n    }\n    this.addFaultFlag();\n    if (this.segment && this.segment.exception) {\n        if (err === this.segment.exception.ex) {\n            this.fault = true;\n            this.cause = { id: this.segment.exception.cause, exceptions: [] };\n            return;\n        }\n        delete this.segment.exception;\n    }\n    if (this.segment) {\n        this.segment.exception = {\n            ex: err,\n            cause: this.id\n        };\n    }\n    else {\n        //error, cannot propagate exception if not added to segment\n    }\n    if (this.cause === undefined) {\n        this.cause = {\n            working_directory: process.cwd(),\n            exceptions: []\n        };\n    }\n    this.cause.exceptions.unshift(new CapturedException(err, remote));\n};\n/**\n * Adds data for an outgoing HTTP/HTTPS call.\n * @param {http.ClientRequest/https.ClientRequest} req - The request object from the HTTP/HTTPS call.\n * @param {http.IncomingMessage/https.IncomingMessage} res - The response object from the HTTP/HTTPS call.\n * @param {boolean} downstreamXRayEnabled - when true, adds a \"traced\": true hint to generated subsegments such that the AWS X-Ray service expects a corresponding segment from the downstream service.\n */\nSubsegment.prototype.addRemoteRequestData = function addRemoteRequestData(req, res, downstreamXRayEnabled) {\n    this.http = new RemoteRequestData(req, res, downstreamXRayEnabled);\n    if ('traced' in this.http.request) {\n        this.traced = this.http.request.traced;\n        delete this.http.request.traced;\n    }\n};\n/**\n * Adds fault flag to the subsegment.\n */\nSubsegment.prototype.addFaultFlag = function addFaultFlag() {\n    this.fault = true;\n};\n/**\n * Adds error flag to the subsegment.\n */\nSubsegment.prototype.addErrorFlag = function addErrorFlag() {\n    this.error = true;\n};\n/**\n * Adds throttle flag to the subsegment.\n */\nSubsegment.prototype.addThrottleFlag = function addThrottleFlag() {\n    this.throttle = true;\n};\n/**\n * Closes the current subsegment.  This automatically captures any exceptions and sets the end time.\n * @param {Error|string} [err] - The error to capture.\n * @param {boolean} [remote] - Flag for whether the exception caught was remote or not.\n */\nSubsegment.prototype.close = function close(err, remote) {\n    var root = this.segment;\n    this.end_time = SegmentUtils.getCurrentTime();\n    delete this.in_progress;\n    if (err) {\n        this.addError(err, remote);\n    }\n    if (this.parent) {\n        this.parent.decrementCounter();\n    }\n    if (root && root.counter > SegmentUtils.getStreamingThreshold()) {\n        if (this.streamSubsegments() && this.parent) {\n            this.parent.removeSubsegment(this);\n        }\n    }\n};\n/**\n * Each subsegment holds a counter of open subsegments.  This increments\n * the counter such that it can be called from a child and propagate up.\n * @param {Number} [additional] - An additional amount to increment.  Used when adding subsegment trees.\n */\nSubsegment.prototype.incrementCounter = function incrementCounter(additional) {\n    this.counter = additional ? this.counter + additional + 1 : this.counter + 1;\n    if (this.parent) {\n        this.parent.incrementCounter(additional);\n    }\n};\n/**\n * Each subsegment holds a counter of its open subsegments.  This decrements\n * the counter such that it can be called from a child and propagate up.\n */\nSubsegment.prototype.decrementCounter = function decrementCounter() {\n    this.counter--;\n    if (this.parent) {\n        this.parent.decrementCounter();\n    }\n};\n/**\n * Returns a boolean indicating whether or not the subsegment has been closed.\n * @returns {boolean} - Returns true if the subsegment is closed.\n */\nSubsegment.prototype.isClosed = function isClosed() {\n    return !this.in_progress;\n};\n/**\n * Sends the subsegment to the daemon.\n */\nSubsegment.prototype.flush = function flush() {\n    if (!this.parent || !this.segment) {\n        logger.getLogger().error('Failed to flush subsegment: ' + this.name + '. Subsegment must be added ' +\n            'to a segment chain to flush.');\n        return;\n    }\n    if (this.segment.trace_id) {\n        if (this.segment.notTraced !== true && !this.notTraced) {\n            SegmentEmitter.send(this);\n        }\n        else {\n            logger.getLogger().debug('Ignoring flush on subsegment ' + this.id + '. Associated segment is marked as not sampled.');\n        }\n    }\n    else {\n        logger.getLogger().debug('Ignoring flush on subsegment ' + this.id + '. Associated segment is missing a trace ID.');\n    }\n};\n/**\n * Returns true if the subsegment was streamed in its entirety\n */\nSubsegment.prototype.streamSubsegments = function streamSubsegments() {\n    if (this.isClosed() && this.counter <= 0) {\n        this.flush();\n        return true;\n    }\n    else if (this.subsegments && this.subsegments.length > 0) {\n        var open = [];\n        this.subsegments.forEach(function (child) {\n            if (!child.streamSubsegments()) {\n                open.push(child);\n            }\n        });\n        this.subsegments = open;\n    }\n};\n/**\n * Returns the formatted, trimmed subsegment JSON string to send to the daemon.\n */\nSubsegment.prototype.format = function format() {\n    this.type = 'subsegment';\n    if (this.parent) {\n        this.parent_id = this.parent.id;\n    }\n    if (this.segment) {\n        this.trace_id = this.segment.trace_id;\n    }\n    return this.serialize();\n};\n/**\n * Returns the formatted subsegment JSON string.\n */\nSubsegment.prototype.toString = function toString() {\n    return this.serialize();\n};\nSubsegment.prototype.toJSON = function toJSON() {\n    var ignore = ['segment', 'parent', 'counter'];\n    if (this.subsegments == null || this.subsegments.length === 0) {\n        ignore.push('subsegments');\n    }\n    var thisCopy = Utils.objectWithoutProperties(this, ignore, false);\n    return thisCopy;\n};\n/**\n * Returns the serialized subsegment JSON string, replacing any BigInts with strings.\n */\nSubsegment.prototype.serialize = function serialize(object) {\n    return JSON.stringify(object !== null && object !== void 0 ? object : this, SegmentUtils.getJsonStringifyReplacer());\n};\nmodule.exports = Subsegment;\n", "\"use strict\";\nvar crypto = require('crypto');\nvar CapturedException = require('./attributes/captured_exception');\nvar SegmentEmitter = require('../segment_emitter');\nvar SegmentUtils = require('./segment_utils');\nvar Subsegment = require('./attributes/subsegment');\nvar TraceID = require('./attributes/trace_id');\nvar Utils = require('../utils');\nvar logger = require('../logger');\n/**\n * Represents a segment.\n * @constructor\n * @param {string} name - The name of the subsegment.\n * @param {string} [rootId] - The trace ID of the spawning parent, included in the 'X-Amzn-Trace-Id' header of the incoming request.  If one is not supplied, it will be generated.\n * @param {string} [parentId] - The sub/segment ID of the spawning parent, included in the 'X-Amzn-Trace-Id' header of the incoming request.\n */\nfunction Segment(name, rootId, parentId) {\n    this.init(name, rootId, parentId);\n}\nSegment.prototype.init = function init(name, rootId, parentId) {\n    if (typeof name != 'string') {\n        throw new Error('Segment name must be of type string.');\n    }\n    // Validate the Trace ID\n    var traceId;\n    if (rootId && typeof rootId == 'string') {\n        traceId = TraceID.FromString(rootId);\n    }\n    else {\n        traceId = new TraceID();\n    }\n    var id = crypto.randomBytes(8).toString('hex');\n    var startTime = SegmentUtils.getCurrentTime();\n    this.trace_id = traceId.toString();\n    this.id = id;\n    this.start_time = startTime;\n    this.name = name || '';\n    this.in_progress = true;\n    this.counter = 0;\n    if (parentId) {\n        this.parent_id = parentId;\n    }\n    if (SegmentUtils.serviceData) {\n        this.setServiceData(SegmentUtils.serviceData);\n    }\n    if (SegmentUtils.pluginData) {\n        this.addPluginData(SegmentUtils.pluginData);\n    }\n    if (SegmentUtils.origin) {\n        this.origin = SegmentUtils.origin;\n    }\n    if (SegmentUtils.sdkData) {\n        this.setSDKData(SegmentUtils.sdkData);\n    }\n};\n/**\n * Adds incoming request data to the http block of the segment.\n * @param {IncomingRequestData} data - The data of the property to add.\n */\nSegment.prototype.addIncomingRequestData = function addIncomingRequestData(data) {\n    this.http = data;\n};\n/**\n * Adds a key-value pair that can be queryable through GetTraceSummaries.\n * Only acceptable types are string, float/int and boolean.\n * @param {string} key - The name of key to add.\n * @param {boolean|string|number} value - The value to add for the given key.\n */\nSegment.prototype.addAnnotation = function addAnnotation(key, value) {\n    if (typeof value !== 'boolean' && typeof value !== 'string' && !isFinite(value)) {\n        logger.getLogger().error('Failed to add annotation key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Value must be of type string, number or boolean.');\n        return;\n    }\n    if (typeof key !== 'string') {\n        logger.getLogger().error('Failed to add annotation key: ' + key + ' value: ' + value + ' to subsegment ' +\n            this.name + '. Key must be of type string.');\n        return;\n    }\n    if (this.annotations === undefined) {\n        this.annotations = {};\n    }\n    this.annotations[key] = value;\n};\n/**\n * Adds a User ID that can be queried from the X-Ray console. User ID\n * must be a string.\n * @param {string} user - The ID of the user corresponding to this segment\n */\nSegment.prototype.setUser = function (user) {\n    if (typeof user !== 'string') {\n        logger.getLogger().error('Set user: ' + user + ' failed. User IDs must be of type string.');\n    }\n    this.user = user;\n};\n/**\n * Adds a key-value pair to the metadata.default attribute when no namespace is given.\n * Metadata is not queryable, but is recorded.\n * @param {string} key - The name of the key to add.\n * @param {object|null} value - The value of the associated key.\n * @param {string} [namespace] - The property name to put the key/value pair under.\n */\nSegment.prototype.addMetadata = function (key, value, namespace) {\n    if (typeof key !== 'string') {\n        logger.getLogger().error('Failed to add metadata key: ' + key + ' value: ' + value + ' to segment ' +\n            this.name + '. Key must be of type string.');\n        return;\n    }\n    if (namespace && typeof namespace !== 'string') {\n        logger.getLogger().error('Failed to add metadata key: ' + key + ' value: ' + value + ' to segment ' +\n            this.name + '. Namespace must be of type string.');\n        return;\n    }\n    var ns = namespace || 'default';\n    if (!this.metadata) {\n        this.metadata = {};\n    }\n    if (!this.metadata[ns]) {\n        this.metadata[ns] = {};\n    }\n    if (ns !== '__proto__') {\n        this.metadata[ns][key] = value !== null && value !== undefined ? value : '';\n    }\n};\n/**\n * Adds data about the AWS X-Ray SDK onto the segment.\n * @param {Object} data - Object that contains the version of the SDK, and other information.\n */\nSegment.prototype.setSDKData = function setSDKData(data) {\n    if (!data) {\n        logger.getLogger().error('Add SDK data: ' + data + ' failed.' +\n            'Must not be empty.');\n        return;\n    }\n    if (!this.aws) {\n        this.aws = {};\n    }\n    this.aws.xray = data;\n};\nSegment.prototype.setMatchedSamplingRule = function setMatchedSamplingRule(ruleName) {\n    if (this.aws) {\n        this.aws = JSON.parse(JSON.stringify(this.aws));\n    }\n    if (this.aws && this.aws['xray']) {\n        this.aws.xray['rule_name'] = ruleName;\n    }\n    else {\n        this.aws = { xray: { 'rule_name': ruleName } };\n    }\n};\n/**\n * Adds data about the service into the segment.\n * @param {Object} data - Object that contains the version of the application, and other information.\n */\nSegment.prototype.setServiceData = function setServiceData(data) {\n    if (!data) {\n        logger.getLogger().error('Add service data: ' + data + ' failed.' +\n            'Must not be empty.');\n        return;\n    }\n    this.service = data;\n};\n/**\n * Adds a service with associated version data into the segment.\n * @param {Object} data - The associated AWS data.\n */\nSegment.prototype.addPluginData = function addPluginData(data) {\n    if (this.aws === undefined) {\n        this.aws = {};\n    }\n    Object.assign(this.aws, data);\n};\n/**\n * Adds a new subsegment to the array of subsegments.\n * @param {string} name - The name of the new subsegment to append.\n */\nSegment.prototype.addNewSubsegment = function addNewSubsegment(name) {\n    var subsegment = new Subsegment(name);\n    this.addSubsegment(subsegment);\n    return subsegment;\n};\nSegment.prototype.addSubsegmentWithoutSampling = function addSubsegmentWithoutSampling(subsegment) {\n    this.addSubsegment(subsegment);\n    subsegment.notTraced = true;\n};\nSegment.prototype.addNewSubsegmentWithoutSampling = function addNewSubsegmentWithoutSampling(name) {\n    const subsegment = new Subsegment(name);\n    this.addSubsegment(subsegment);\n    subsegment.notTraced = true;\n    return subsegment;\n};\n/**\n * Adds a subsegment to the array of subsegments.\n * @param {Subsegment} subsegment - The subsegment to append.\n */\nSegment.prototype.addSubsegment = function addSubsegment(subsegment) {\n    if (!(subsegment instanceof Subsegment)) {\n        throw new Error('Cannot add subsegment: ' + subsegment + '. Not a subsegment.');\n    }\n    if (this.subsegments === undefined) {\n        this.subsegments = [];\n    }\n    subsegment.segment = this;\n    subsegment.parent = this;\n    subsegment.notTraced = subsegment.parent.notTraced;\n    subsegment.noOp = subsegment.parent.noOp;\n    this.subsegments.push(subsegment);\n    if (!subsegment.end_time) {\n        this.incrementCounter(subsegment.counter);\n    }\n};\n/**\n * Removes the subsegment from the subsegments array, used in subsegment streaming.\n */\nSegment.prototype.removeSubsegment = function removeSubsegment(subsegment) {\n    if (!(subsegment instanceof Subsegment)) {\n        throw new Error('Failed to remove subsegment:' + subsegment + ' from subsegment \"' + this.name +\n            '\".  Not a subsegment.');\n    }\n    if (this.subsegments !== undefined) {\n        var index = this.subsegments.indexOf(subsegment);\n        if (index >= 0) {\n            this.subsegments.splice(index, 1);\n        }\n    }\n};\n/**\n * Adds error data into the segment.\n * @param {Error|string} err - The error to capture.\n * @param {boolean} [remote] - Flag for whether the exception caught was remote or not.\n */\nSegment.prototype.addError = function addError(err, remote) {\n    if (err == null || typeof err !== 'object' && typeof (err) !== 'string') {\n        logger.getLogger().error('Failed to add error:' + err + ' to subsegment \"' + this.name +\n            '\".  Not an object or string literal.');\n        return;\n    }\n    this.addFaultFlag();\n    if (this.exception) {\n        if (err === this.exception.ex) {\n            this.cause = { id: this.exception.cause };\n            delete this.exception;\n            return;\n        }\n        delete this.exception;\n    }\n    if (this.cause === undefined) {\n        this.cause = {\n            working_directory: process.cwd(),\n            exceptions: []\n        };\n    }\n    this.cause.exceptions.push(new CapturedException(err, remote));\n};\n/**\n * Adds fault flag to the subsegment.\n */\nSegment.prototype.addFaultFlag = function addFaultFlag() {\n    this.fault = true;\n};\n/**\n * Adds error flag to the subsegment.\n */\nSegment.prototype.addErrorFlag = function addErrorFlag() {\n    this.error = true;\n};\n/**\n * Adds throttle flag to the subsegment.\n */\nSegment.prototype.addThrottleFlag = function addThrottleFlag() {\n    this.throttle = true;\n};\n/**\n * Returns a boolean indicating whether or not the segment has been closed.\n * @returns {boolean} - Returns true if the subsegment is closed.\n */\nSegment.prototype.isClosed = function isClosed() {\n    return !this.in_progress;\n};\n/**\n * Each segment holds a counter of open subsegments.  This increments the counter.\n * @param {Number} [additional] - An additional amount to increment.  Used when adding subsegment trees.\n */\nSegment.prototype.incrementCounter = function incrementCounter(additional) {\n    this.counter = additional ? this.counter + additional + 1 : this.counter + 1;\n    if (this.counter > SegmentUtils.streamingThreshold && this.subsegments && this.subsegments.length > 0) {\n        var open = [];\n        this.subsegments.forEach(function (child) {\n            if (!child.streamSubsegments()) {\n                open.push(child);\n            }\n        });\n        this.subsegments = open;\n    }\n};\n/**\n * Each segment holds a counter of open subsegments.  This decrements\n * the counter such that it can be called from a child and propagate up.\n */\nSegment.prototype.decrementCounter = function decrementCounter() {\n    this.counter--;\n    if (this.counter <= 0 && this.isClosed()) {\n        this.flush();\n    }\n};\n/**\n * Closes the current segment.  This automatically sets the end time.\n * @param {Error|string} [err] - The error to capture.\n * @param {boolean} [remote] - Flag for whether the exception caught was remote or not.\n */\nSegment.prototype.close = function (err, remote) {\n    if (!this.end_time) {\n        this.end_time = SegmentUtils.getCurrentTime();\n    }\n    if (err !== undefined) {\n        this.addError(err, remote);\n    }\n    delete this.in_progress;\n    delete this.exception;\n    if (this.counter <= 0) {\n        this.flush();\n    }\n};\n/**\n * Sends the segment to the daemon.\n */\nSegment.prototype.flush = function flush() {\n    if (this.notTraced !== true) {\n        delete this.exception;\n        var thisCopy = Utils.objectWithoutProperties(this, ['counter', 'notTraced'], true);\n        SegmentEmitter.send(thisCopy);\n    }\n};\nSegment.prototype.format = function format() {\n    var ignore = ['segment', 'parent', 'counter'];\n    if (this.subsegments == null || this.subsegments.length === 0) {\n        ignore.push('subsegments');\n    }\n    var thisCopy = Utils.objectWithoutProperties(this, ignore, false);\n    return this.serialize(thisCopy);\n};\nSegment.prototype.toString = function toString() {\n    return this.serialize();\n};\nSegment.prototype.serialize = function serialize(object) {\n    return JSON.stringify(object !== null && object !== void 0 ? object : this, SegmentUtils.getJsonStringifyReplacer());\n};\nmodule.exports = Segment;\n", "\"use strict\";\n/**\n * @module context_utils\n */\nvar cls = require('cls-hooked/context');\nvar logger = require('./logger');\nvar Segment = require('./segments/segment');\nvar Subsegment = require('./segments/attributes/subsegment');\nvar cls_mode = true;\nvar NAMESPACE = 'AWSXRay';\nvar SEGMENT = 'segment';\nvar contextOverride = false;\nvar contextUtils = {\n    CONTEXT_MISSING_STRATEGY: {\n        RUNTIME_ERROR: {\n            contextMissing: function contextMissingRuntimeError(message) {\n                throw new Error(message);\n            }\n        },\n        LOG_ERROR: {\n            contextMissing: function contextMissingLogError(message) {\n                var err = new Error(message);\n                logger.getLogger().error(err.stack);\n            }\n        },\n        IGNORE_ERROR: {\n            contextMissing: function contextMissingIgnoreError() {\n            }\n        }\n    },\n    contextMissingStrategy: {},\n    /**\n     * Resolves the segment or subsegment given manual mode and params on the call required.\n     * @param [Segment|Subsegment] segment - The segment manually provided via params.XraySegment, if provided.\n     * @returns {Segment|Subsegment}\n     * @alias module:context_utils.resolveManualSegmentParams\n     */\n    resolveManualSegmentParams: function resolveManualSegmentParams(params) {\n        if (params && !contextUtils.isAutomaticMode()) {\n            var xraySegment = params.XRaySegment || params.XraySegment;\n            var segment = params.Segment;\n            var found = null;\n            if (xraySegment && (xraySegment instanceof Segment || xraySegment instanceof Subsegment)) {\n                found = xraySegment;\n                delete params.XRaySegment;\n                delete params.XraySegment;\n            }\n            else if (segment && (segment instanceof Segment || segment instanceof Subsegment)) {\n                found = segment;\n                delete params.Segment;\n            }\n            return found;\n        }\n    },\n    /**\n     * Gets current CLS namespace for X-Ray SDK or creates one if absent.\n     * @returns {Namespace}\n     * @alias module:context_utils.getNamespace\n     */\n    getNamespace: function getNamespace() {\n        return cls.getNamespace(NAMESPACE) || cls.createNamespace(NAMESPACE);\n    },\n    /**\n     * Resolves the segment or subsegment given manual or automatic mode.\n     * @param [Segment|Subsegment] segment - The segment manually provided, if provided.\n     * @returns {Segment|Subsegment}\n     * @alias module:context_utils.resolveSegment\n     */\n    resolveSegment: function resolveSegment(segment) {\n        if (cls_mode) {\n            return this.getSegment();\n        }\n        else if (segment && !cls_mode) {\n            return segment;\n        }\n        else if (!segment && !cls_mode) {\n            contextUtils.contextMissingStrategy.contextMissing('No sub/segment specified. A sub/segment must be provided for manual mode.');\n        }\n    },\n    /**\n     * Returns the current segment or subsegment.  For use with in automatic mode only.\n     * @returns {Segment|Subsegment}\n     * @alias module:context_utils.getSegment\n     */\n    getSegment: function getSegment() {\n        if (cls_mode) {\n            var segment = contextUtils.getNamespace(NAMESPACE).get(SEGMENT);\n            if (!segment) {\n                contextUtils.contextMissingStrategy.contextMissing('Failed to get the current sub/segment from the context.');\n            }\n            else if (segment instanceof Segment && process.env.LAMBDA_TASK_ROOT && segment.facade == true) {\n                segment.resolveLambdaTraceData();\n            }\n            return segment;\n        }\n        else {\n            contextUtils.contextMissingStrategy.contextMissing('Cannot get sub/segment from context. Not supported in manual mode.');\n        }\n    },\n    /**\n     * Sets the current segment or subsegment.  For use with in automatic mode only.\n     * @param [Segment|Subsegment] segment - The sub/segment to set.\n     * @returns {Segment|Subsegment}\n     * @alias module:context_utils.setSegment\n     */\n    setSegment: function setSegment(segment) {\n        if (cls_mode) {\n            if (!contextUtils.getNamespace(NAMESPACE).set(SEGMENT, segment)) {\n                logger.getLogger().warn('Failed to set the current sub/segment on the context.');\n            }\n        }\n        else {\n            contextUtils.contextMissingStrategy.contextMissing('Cannot set sub/segment on context. Not supported in manual mode.');\n        }\n    },\n    /**\n     * Returns true if in automatic mode, otherwise false.\n     * @returns {Segment|Subsegment}\n     * @alias module:context_utils.isAutomaticMode\n     */\n    isAutomaticMode: function isAutomaticMode() {\n        return cls_mode;\n    },\n    /**\n     * Enables automatic mode. Automatic mode uses 'cls-hooked'.\n     * @see https://github.com/jeff-lewis/cls-hooked\n     * @alias module:context_utils.enableAutomaticMode\n     */\n    enableAutomaticMode: function enableAutomaticMode() {\n        cls_mode = true;\n        contextUtils.getNamespace(NAMESPACE);\n        logger.getLogger().debug('Overriding AWS X-Ray SDK mode. Set to automatic mode.');\n    },\n    /**\n     * Disables automatic mode. Current segment or subsegment then must be passed manually\n     * via the parent optional on captureFunc, captureAsyncFunc etc.\n     * @alias module:context_utils.enableManualMode\n     */\n    enableManualMode: function enableManualMode() {\n        cls_mode = false;\n        if (cls.getNamespace(NAMESPACE)) {\n            cls.destroyNamespace(NAMESPACE);\n        }\n        logger.getLogger().debug('Overriding AWS X-Ray SDK mode. Set to manual mode.');\n    },\n    /**\n     * Sets the context missing strategy if no context missing strategy is set using the environment variable with\n     * key AWS_XRAY_CONTEXT_MISSING. The context missing strategy's contextMissing function will be called whenever\n     * trace context is not found.\n     * @param {string|function} strategy - The strategy to set. Valid string values are 'LOG_ERROR' and 'RUNTIME_ERROR'.\n     *                                     Alternatively, a custom function can be supplied, which takes a error message string.\n     */\n    setContextMissingStrategy: function setContextMissingStrategy(strategy) {\n        if (!contextOverride) {\n            if (typeof strategy === 'string') {\n                var lookupStrategy = contextUtils.CONTEXT_MISSING_STRATEGY[strategy.toUpperCase()];\n                if (lookupStrategy) {\n                    contextUtils.contextMissingStrategy.contextMissing = lookupStrategy.contextMissing;\n                    if (process.env.AWS_XRAY_CONTEXT_MISSING) {\n                        logger.getLogger().debug('AWS_XRAY_CONTEXT_MISSING is set. Configured context missing strategy to ' +\n                            process.env.AWS_XRAY_CONTEXT_MISSING + '.');\n                    }\n                    else {\n                        logger.getLogger().debug('Configured context missing strategy to: ' + strategy);\n                    }\n                }\n                else {\n                    throw new Error('Invalid context missing strategy: ' + strategy + '. Valid values are ' +\n                        Object.keys(contextUtils.CONTEXT_MISSING_STRATEGY) + '.');\n                }\n            }\n            else if (typeof strategy === 'function') {\n                contextUtils.contextMissingStrategy.contextMissing = strategy;\n                logger.getLogger().info('Configured custom context missing strategy to function: ' + strategy.name);\n            }\n            else {\n                throw new Error('Context missing strategy must be either a string or a custom function.');\n            }\n        }\n        else {\n            logger.getLogger().warn('Ignoring call to setContextMissingStrategy as AWS_XRAY_CONTEXT_MISSING is set. ' +\n                'The current context missing strategy will not be changed.');\n        }\n    }\n};\nif (process.env.AWS_XRAY_MANUAL_MODE) {\n    cls_mode = false;\n    logger.getLogger().debug('Starting the AWS X-Ray SDK in manual mode.');\n}\nelse {\n    cls.createNamespace(NAMESPACE);\n    logger.getLogger().debug('Starting the AWS X-Ray SDK in automatic mode (default).');\n}\nif (process.env.AWS_XRAY_CONTEXT_MISSING) {\n    contextUtils.setContextMissingStrategy(process.env.AWS_XRAY_CONTEXT_MISSING);\n    contextOverride = true;\n}\nelse {\n    contextUtils.contextMissingStrategy.contextMissing = contextUtils.CONTEXT_MISSING_STRATEGY.LOG_ERROR.contextMissing;\n    logger.getLogger().debug('Using default context missing strategy: LOG_ERROR');\n}\nmodule.exports = contextUtils;\n", "\"use strict\";\nvar { getHttpResponseData } = require('../segments/segment_utils');\n/**\n * Represents an incoming HTTP/HTTPS call.\n * @constructor\n * @param {http.IncomingMessage|https.IncomingMessage} req - The request object from the HTTP/HTTPS call.\n */\nfunction IncomingRequestData(req) {\n    this.init(req);\n}\nIncomingRequestData.prototype.init = function init(req) {\n    var forwarded = !!req.headers['x-forwarded-for'];\n    var url;\n    if (req.connection) {\n        url = ((req.connection.secure || req.connection.encrypted) ? 'https://' : 'http://') +\n            ((req.headers['host'] || '') + (req.url || ''));\n    }\n    this.request = {\n        method: req.method || '',\n        user_agent: req.headers['user-agent'] || '',\n        client_ip: getClientIp(req) || '',\n        url: url || '',\n    };\n    if (forwarded) {\n        this.request.x_forwarded_for = forwarded;\n    }\n};\nvar getClientIp = function getClientIp(req) {\n    var clientIp;\n    if (req.headers['x-forwarded-for']) {\n        clientIp = (req.headers['x-forwarded-for'] || '').split(',')[0];\n    }\n    else if (req.connection && req.connection.remoteAddress) {\n        clientIp = req.connection.remoteAddress;\n    }\n    else if (req.socket && req.socket.remoteAddress) {\n        clientIp = req.socket.remoteAddress;\n    }\n    else if (req.connection && req.connection.socket && req.connection.socket.remoteAddress) {\n        clientIp = req.connection.socket.remoteAddress;\n    }\n    return clientIp;\n};\n/**\n * Closes the local and automatically captures the response data.\n * @param {http.ServerResponse|https.ServerResponse} res - The response object from the HTTP/HTTPS call.\n */\nIncomingRequestData.prototype.close = function close(res) {\n    this.response = getHttpResponseData(res);\n};\nmodule.exports = IncomingRequestData;\n", "\"use strict\";\n/**\n * Represents a LocalReservoir object that keeps track of the number of traces per second sampled and\n * the fixed rate for a given sampling rule defined locally.\n * It also decides if a given trace should be sampled or not based on the state of current second.\n * @constructor\n * @param {number} fixedTarget - An integer value to specify the maximum number of traces per second to sample.\n * @param {number} fallbackRate - A value between 0 and 1 indicating the sampling rate after the maximum traces per second has been hit.\n */\nfunction LocalReservoir(fixedTarget, fallbackRate) {\n    this.init(fixedTarget, fallbackRate);\n}\nLocalReservoir.prototype.init = function init(fixedTarget, fallbackRate) {\n    this.usedThisSecond = 0;\n    if (typeof fixedTarget === 'number' && fixedTarget % 1 === 0 && fixedTarget >= 0) {\n        this.fixedTarget = fixedTarget;\n    }\n    else {\n        throw new Error('Error in sampling file. Rule attribute \"fixed_target\" must be a non-negative integer.');\n    }\n    if (typeof fallbackRate === 'number' && fallbackRate >= 0 && fallbackRate <= 1) {\n        this.fallbackRate = fallbackRate;\n    }\n    else {\n        throw new Error('Error in sampling file. Rule attribute \"rate\" must be a number between 0 and 1 inclusive.');\n    }\n};\nLocalReservoir.prototype.isSampled = function isSampled() {\n    var now = Math.round(new Date().getTime() / 1000);\n    if (now !== this.thisSecond) {\n        this.usedThisSecond = 0;\n        this.thisSecond = now;\n    }\n    if (this.usedThisSecond >= this.fixedTarget) {\n        return Math.random() < this.fallbackRate;\n    }\n    this.usedThisSecond++;\n    return true;\n};\nmodule.exports = LocalReservoir;\n", "{\n  \"default\": {\n    \"fixed_target\": 1,\n    \"rate\": 0.05\n  },\n  \"version\": 2\n}\n", "\"use strict\";\nvar fs = require('fs');\nvar LocalReservoir = require('./local_reservoir');\nvar Utils = require('../../utils');\nvar defaultRules = require('../../resources/default_sampling_rules.json');\nvar logger = require('../../logger');\n/**\n * The local sampler used to make sampling decisions when the decisions are absent in the incoming requests\n * and the default sampler needs to fall back on local rules. It will also be the primary sampler\n * if the default sampler is disabled.\n * @module LocalSampler\n */\nvar LocalSampler = {\n    /**\n     * Makes a sample decision based on the sample request.\n     * @param {object} sampleRequest - Contains information for rules matching.\n     * @module LocalSampler\n     * @function shouldSample\n     */\n    shouldSample: function shouldSample(sampleRequest) {\n        var host = sampleRequest.host;\n        var httpMethod = sampleRequest.httpMethod;\n        var urlPath = sampleRequest.urlPath;\n        var formatted = '{ http_method: ' + httpMethod + ', host: ' + host + ', url_path: ' + urlPath + ' }';\n        var matched;\n        this.rules.some(function (rule) {\n            // Any null parameters provided will be considered an implicit match.\n            if (rule.default || (host == null || (Utils.wildcardMatch(rule.host, host))\n                && (httpMethod == null || Utils.wildcardMatch(rule.http_method, httpMethod))\n                && (urlPath == null || Utils.wildcardMatch(rule.url_path, urlPath)))) {\n                matched = rule.reservoir;\n                logger.getLogger().debug('Local sampling rule match found for ' + formatted + '. Matched ' + (rule.default ?\n                    'default' : '{ http_method: ' + rule.http_method + ', host: ' + rule.host + ', url_path: ' +\n                    rule.url_path + ' }') + '. Using fixed_target: ' + matched.fixedTarget + ' and rate: ' + matched.fallbackRate + '.');\n                return true;\n            }\n        });\n        if (matched) {\n            return matched.isSampled();\n        }\n        else {\n            logger.getLogger().debug('No sampling rule matched for ' + formatted);\n            return false;\n        }\n    },\n    /**\n     * Set local rules for making sampling decisions.\n     * @module LocalSampler\n     * @function setLocalRules\n     */\n    setLocalRules: function setLocalRules(source) {\n        if (source) {\n            if (typeof source === 'string') {\n                logger.getLogger().info('Using custom sampling rules file: ' + source);\n                this.rules = loadRulesConfig(JSON.parse(fs.readFileSync(source, 'utf8')));\n            }\n            else {\n                logger.getLogger().info('Using custom sampling rules source.');\n                this.rules = loadRulesConfig(source);\n            }\n        }\n        else {\n            this.rules = parseRulesConfig(defaultRules);\n        }\n    }\n};\nvar loadRulesConfig = function loadRulesConfig(config) {\n    if (!config.version) {\n        throw new Error('Error in sampling file. Missing \"version\" attribute.');\n    }\n    if (config.version === 1 || config.version === 2) {\n        return parseRulesConfig(config);\n    }\n    else {\n        throw new Error('Error in sampling file. Unknown version \"' + config.version + '\".');\n    }\n};\nvar parseRulesConfig = function parseRulesConfig(config) {\n    var defaultRule;\n    var rules = [];\n    if (config.default) {\n        var missing = [];\n        for (var key in config.default) {\n            if (key !== 'fixed_target' && key !== 'rate') {\n                throw new Error('Error in sampling file. Invalid attribute for default: ' + key +\n                    '. Valid attributes for default are \"fixed_target\" and \"rate\".');\n            }\n            else if (typeof config.default[key] !== 'number') {\n                throw new Error('Error in sampling file. Default ' + key + ' must be a number.');\n            }\n        }\n        if (typeof config.default.fixed_target === 'undefined') {\n            missing.push('fixed_target');\n        }\n        if (typeof config.default.rate === 'undefined') {\n            missing.push('rate');\n        }\n        if (missing.length !== 0) {\n            throw new Error('Error in sampling file. Missing required attributes for default: ' + missing + '.');\n        }\n        defaultRule = { default: true, reservoir: new LocalReservoir(config.default.fixed_target, config.default.rate) };\n    }\n    else {\n        throw new Error('Error in sampling file. Expecting \"default\" object to be defined with attributes \"fixed_target\" and \"rate\".');\n    }\n    if (Array.isArray(config.rules)) {\n        config.rules.forEach(function (rawRule) {\n            var params = {};\n            var required;\n            if (config.version === 2) {\n                required = { host: 1, http_method: 1, url_path: 1, fixed_target: 1, rate: 1 };\n            }\n            if (config.version === 1) {\n                required = { service_name: 1, http_method: 1, url_path: 1, fixed_target: 1, rate: 1 };\n            }\n            for (var key in rawRule) {\n                var value = rawRule[key];\n                if (!required[key] && key != 'description') {\n                    throw new Error('Error in sampling file. Rule ' + JSON.stringify(rawRule) + ' has invalid attribute: ' + key + '.');\n                }\n                else if (key != 'description' && !value && value !== 0) {\n                    throw new Error('Error in sampling file. Rule ' + JSON.stringify(rawRule) + ' attribute \"' + key + '\" has invalid value: ' + value + '.');\n                }\n                else {\n                    if (config.version === 2) {\n                        params[key] = value;\n                    }\n                    if (config.version === 1 && key === 'service_name') {\n                        params['host'] = value;\n                    }\n                    else {\n                        params[key] = value;\n                    }\n                    delete required[key];\n                }\n            }\n            if (Object.keys(required).length !== 0 && required.constructor === Object) {\n                throw new Error('Error in sampling file. Rule ' + JSON.stringify(rawRule) + ' is missing required attributes: ' + Object.keys(required) + '.');\n            }\n            var rule = params;\n            rule.reservoir = new LocalReservoir(rawRule.fixed_target, rawRule.rate);\n            rules.push(rule);\n        });\n    }\n    rules.push(defaultRule);\n    return rules;\n};\nLocalSampler.setLocalRules();\nmodule.exports = LocalSampler;\n", "\"use strict\";\n/**\n * Represents a Reservoir object that keeps track of the number of traces per second sampled and\n * the fixed rate for a given sampling rule. This information is fetched from X-Ray serivce.\n * It decides if a given trace should be borrowed or sampled or not sampled based on the state of current second.\n * @constructor\n */\nfunction Reservoir() {\n    this.init();\n}\nReservoir.prototype.init = function init() {\n    this.quota = null;\n    this.TTL = null;\n    this.takenThisSec = 0;\n    this.borrowedThisSec = 0;\n    this.reportInterval = 1;\n    this.reportElapsed = 0;\n};\nReservoir.prototype.borrowOrTake = function borrowOrTake(now, canBorrow) {\n    this.adjustThisSec(now);\n    // Don't borrow if the quota is available and fresh.\n    if (this.quota >= 0 && this.TTL >= now) {\n        if (this.takenThisSec >= this.quota) {\n            return false;\n        }\n        this.takenThisSec++;\n        return 'take';\n    }\n    // Otherwise try to borrow if the quota is not present or expired.\n    if (canBorrow) {\n        if (this.borrowedThisSec >= 1) {\n            return false;\n        }\n        this.borrowedThisSec++;\n        return 'borrow';\n    }\n};\nReservoir.prototype.adjustThisSec = function adjustThisSec(now) {\n    if (now !== this.thisSec) {\n        this.takenThisSec = 0;\n        this.borrowedThisSec = 0;\n        this.thisSec = now;\n    }\n};\nReservoir.prototype.loadNewQuota = function loadNewQuota(quota, TTL, interval) {\n    if (quota) {\n        this.quota = quota;\n    }\n    if (TTL) {\n        this.TTL = TTL;\n    }\n    if (interval) {\n        this.reportInterval = interval / 10;\n    } // Report interval is always time of 10.\n};\nReservoir.prototype.timeToReport = function timeToReport() {\n    if (this.reportElapsed + 1 >= this.reportInterval) {\n        this.reportElapsed = 0;\n        return true;\n    }\n    else {\n        this.reportElapsed += 1;\n        return false;\n    }\n};\nmodule.exports = Reservoir;\n", "\"use strict\";\nvar Utils = require('../../utils');\nvar Reservoir = require('./reservoir');\n/**\n * The data model for a sampling rule defined using X-Ray API CreateSamplingRules.\n * It should be only instantiated directly from the X-Ray API response.\n * @constructor\n */\nfunction SamplingRule(name, priority, rate, reservoirSize, host, httpMethod, urlPath, serviceName, serviceType) {\n    this.init(name, priority, rate, reservoirSize, host, httpMethod, urlPath, serviceName, serviceType);\n}\nSamplingRule.prototype.init = function init(name, priority, rate, reservoirSize, host, httpMethod, urlPath, serviceName, serviceType) {\n    this.name = name;\n    this.priority = priority;\n    this.rate = rate;\n    this.host = host;\n    this.httpMethod = httpMethod;\n    this.urlPath = urlPath;\n    this.serviceName = serviceName;\n    this.serviceType = serviceType;\n    this.reservoir = new Reservoir();\n    this.borrow = !!reservoirSize;\n    this.resetStatistics();\n};\nSamplingRule.prototype.match = function match(sampleRequest) {\n    var host = sampleRequest.host;\n    var httpMethod = sampleRequest.httpMethod;\n    var serviceName = sampleRequest.serviceName;\n    var urlPath = sampleRequest.urlPath;\n    var serviceType = sampleRequest.serviceType;\n    return this.isDefault() || (!host || Utils.wildcardMatch(this.host, host))\n        && (!httpMethod || Utils.wildcardMatch(this.httpMethod, httpMethod))\n        && (!serviceName || Utils.wildcardMatch(this.serviceName, serviceName))\n        && (!urlPath || Utils.wildcardMatch(this.urlPath, urlPath))\n        && (!serviceType || Utils.wildcardMatch(this.serviceType, serviceType));\n};\nSamplingRule.prototype.snapshotStatistics = function snapshotStatistics() {\n    var statistics = {\n        requestCount: this.requestCount,\n        borrowCount: this.borrowCount,\n        sampledCount: this.sampledCount\n    };\n    this.resetStatistics();\n    return statistics;\n};\nSamplingRule.prototype.merge = function merge(rule) {\n    this.reservoir = rule.reservoir;\n    this.requestCount = rule.requestCount;\n    this.borrowCount = rule.borrowCount;\n    this.sampledCount = rule.sampledCount;\n    rule = null; // unref the old rule so it can be garbage collected.\n};\nSamplingRule.prototype.isDefault = function isDefault() {\n    return this.name === 'Default'; // \"Default\" is a reserved keyword from X-Ray back-end.\n};\nSamplingRule.prototype.incrementRequestCount = function incrementRequestCount() {\n    this.requestCount++;\n};\nSamplingRule.prototype.incrementBorrowCount = function incrementBorrowCount() {\n    this.borrowCount++;\n};\nSamplingRule.prototype.incrementSampledCount = function incrementSampledCount() {\n    this.sampledCount++;\n};\nSamplingRule.prototype.setRate = function setRate(rate) {\n    this.rate = rate;\n};\nSamplingRule.prototype.getRate = function getRate() {\n    return this.rate;\n};\nSamplingRule.prototype.getName = function getName() {\n    return this.name;\n};\nSamplingRule.prototype.getPriority = function getPriority() {\n    return this.priority;\n};\nSamplingRule.prototype.getReservoir = function getReservoir() {\n    return this.reservoir;\n};\nSamplingRule.prototype.resetStatistics = function resetStatistics() {\n    this.requestCount = 0;\n    this.borrowCount = 0;\n    this.sampledCount = 0;\n};\nSamplingRule.prototype.canBorrow = function canBorrow() {\n    return this.borrow;\n};\nSamplingRule.prototype.everMatched = function everMatched() {\n    return this.requestCount > 0;\n};\nSamplingRule.prototype.timeToReport = function timeToReport() {\n    return this.reservoir.timeToReport();\n};\nmodule.exports = SamplingRule;\n", "\"use strict\";\nvar crypto = require('crypto');\nvar logger = require('../../logger');\nvar SamplingRule = require('./sampling_rule');\nvar DaemonConfig = require('../../daemon_config');\nconst util = require('util');\nconst http = require('http');\n/**\n * The ServiceConnector that calls X-Ray service and convert the API response bodies to data models\n * defined in the X-Ray SDK and return them to the pollers.\n * @module ServiceConnector\n */\nvar ServiceConnector = {\n    // client_id is a 12 byte cryptographically secure random hex\n    // identifying the SDK instance and is generated during SDK initialization/\n    // This is required when reporting sampling to X-Ray back-end.\n    clientId: crypto.randomBytes(12).toString('hex'),\n    samplingRulesPath: '/GetSamplingRules',\n    samplingTargetsPath: '/SamplingTargets',\n    logger: logger,\n    httpClient: http,\n    fetchSamplingRules: function fetchSamplingRules(callback) {\n        const body = '{}'; // Payload needed for GetSamplingRules POST request\n        const options = getOptions(this.samplingRulesPath, body.length);\n        const httpReq = this.httpClient.__request ? this.httpClient.__request : this.httpClient.request;\n        const req = httpReq(options, res => {\n            var data = '';\n            res.on('data', d => {\n                data += d;\n            });\n            res.on('error', error => {\n                callback(error);\n            });\n            res.on('end', () => {\n                var dataObj;\n                try {\n                    dataObj = JSON.parse(data);\n                }\n                catch (err) {\n                    callback(err);\n                    return;\n                }\n                if (!dataObj) {\n                    callback(new Error('AWS X-Ray GetSamplingRules API returned empty response'));\n                    return;\n                }\n                var newRules = assembleRules(dataObj);\n                callback(null, newRules);\n            });\n        });\n        req.on('error', () => {\n            callback(new Error(`Failed to connect to X-Ray daemon at ${options.hostname}:${options.port} to get sampling rules.`));\n        });\n        req.write(body);\n        req.end();\n    },\n    fetchTargets: function fetchTargets(rules, callback) {\n        const body = JSON.stringify(constructStatisticsDocs(rules));\n        const options = getOptions(this.samplingTargetsPath, body.length);\n        const httpReq = this.httpClient.__request ? this.httpClient.__request : this.httpClient.request;\n        const req = httpReq(options, res => {\n            var data = '';\n            res.on('data', d => {\n                data += d;\n            });\n            res.on('error', error => {\n                callback(error);\n            });\n            res.on('end', () => {\n                var dataObj;\n                try {\n                    dataObj = JSON.parse(data);\n                }\n                catch (err) {\n                    callback(err);\n                    return;\n                }\n                if (!dataObj || typeof dataObj['LastRuleModification'] != 'number') {\n                    callback(new Error('AWS X-Ray SamplingTargets API returned invalid response'));\n                    return;\n                }\n                var targetsMapping = assembleTargets(dataObj);\n                var ruleFreshness = dateToEpoch(dataObj['LastRuleModification']);\n                callback(null, targetsMapping, ruleFreshness);\n            });\n        });\n        req.on('error', () => {\n            callback(new Error(`Failed to connect to X-Ray daemon at ${options.hostname}:${options.port} to get sampling targets.`));\n        });\n        req.write(body);\n        req.end();\n    }\n};\nvar constructStatisticsDocs = function constructStatisticsDocs(rules) {\n    var documents = [];\n    var now = Math.floor(new Date().getTime() / 1000);\n    rules.forEach(function (rule) {\n        var statistics = rule.snapshotStatistics();\n        var doc = {\n            'RuleName': rule.getName(),\n            'ClientID': ServiceConnector.clientId,\n            'RequestCount': statistics.requestCount,\n            'BorrowCount': statistics.borrowCount,\n            'SampledCount': statistics.sampledCount,\n            'Timestamp': now\n        };\n        documents.push(doc);\n    });\n    return { SamplingStatisticsDocuments: documents };\n};\nvar assembleRules = function assembleRules(data) {\n    var newRules = [];\n    var ruleList = data['SamplingRuleRecords'] || [];\n    ruleList.forEach(function (ruleRecord) {\n        ruleRecord = ruleRecord['SamplingRule'];\n        // For forward compatibility reason right now it only\n        // deals with version 1 sampling rules.\n        if (isRuleValid(ruleRecord)) {\n            var newRule = new SamplingRule(ruleRecord['RuleName'], ruleRecord['Priority'], ruleRecord['FixedRate'], ruleRecord['ReservoirSize'], ruleRecord['Host'], ruleRecord['HTTPMethod'], ruleRecord['URLPath'], ruleRecord['ServiceName'], ruleRecord['ServiceType']);\n            newRules.push(newRule);\n        }\n    });\n    return newRules;\n};\nvar assembleTargets = function assembleTargets(data) {\n    var docs = data['SamplingTargetDocuments'] || [];\n    var targetsMapping = {};\n    docs.forEach(function (doc) {\n        var newTarget = {\n            rate: doc['FixedRate'],\n            quota: doc['ReservoirQuota'],\n            TTL: dateToEpoch(doc['ReservoirQuotaTTL']),\n            interval: doc['Interval']\n        };\n        targetsMapping[doc['RuleName']] = newTarget;\n    });\n    return targetsMapping;\n};\nvar isRuleValid = function isRuleValid(record) {\n    return record['Version'] === 1\n        && record['ResourceARN'] === '*'\n        && record['Attributes'] && Object.keys(record['Attributes']).length === 0\n        && record['ServiceType']\n        && record['RuleName']\n        && record['Priority']\n        && typeof record['FixedRate'] == 'number';\n};\nvar dateToEpoch = function dateToEpoch(date) {\n    return new Date(date).getTime() / 1000;\n};\nvar getOptions = function getOptions(path, contentLength) {\n    const options = {\n        hostname: DaemonConfig.tcp_ip,\n        port: DaemonConfig.tcp_port,\n        method: 'POST',\n        path: path,\n        headers: {\n            'Content-Type': 'application/json',\n            'Content-Length': contentLength,\n            'Host': util.format('%s:%d', DaemonConfig.tcp_ip, DaemonConfig.tcp_port)\n        }\n    };\n    return options;\n};\nmodule.exports = ServiceConnector;\n", "\"use strict\";\nvar TTL = 60 * 60; // The cache expires 1 hour after the last refresh time.\n/**\n * The rule cache that stores sampling rules fetched from X-Ray service.\n * @module RuleCache\n */\nvar RuleCache = {\n    rules: [],\n    lastUpdated: null,\n    /**\n     * Tries to find a valid rule that matches the sample request.\n     * @param {object} sampleRequest - Contains information for rules matching.\n     * @param {number} now - Current epoch in seconds.\n     * @module RuleCache\n     * @function getMatchedRule\n     */\n    getMatchedRule: function getMatchedRule(sampleRequest, now) {\n        if (isExpired(now)) {\n            return null;\n        }\n        var matchedRule;\n        this.rules.forEach(function (rule) {\n            if (!matchedRule && rule.match(sampleRequest)) {\n                matchedRule = rule;\n            }\n            if (rule.isDefault() && !matchedRule) {\n                matchedRule = rule;\n            }\n        });\n        return matchedRule;\n    },\n    /**\n     * Load rules fetched from X-Ray service in order sorted by priorities.\n     * @param {object} rules - Newly fetched rules to load.\n     * @module RuleCache\n     * @function loadRules\n     */\n    loadRules: function loadRules(rules) {\n        // Record the old rules for later merging.\n        var oldRules = {};\n        this.rules.forEach(function (rule) {\n            oldRules[rule.getName()] = rule;\n        });\n        // Update the rules in the cache.\n        this.rules = rules;\n        // Transfer state information to refreshed rules.\n        this.rules.forEach(function (rule) {\n            var oldRule = oldRules[rule.getName()];\n            if (oldRule) {\n                rule.merge(oldRule);\n            }\n        });\n        // The cache should maintain the order of the rules based on\n        // priority. If priority is the same we sort name by alphabet\n        // as rule name is unique.\n        this.rules.sort(function (a, b) {\n            var v = a.getPriority() - b.getPriority();\n            if (v !== 0) {\n                return v;\n            }\n            if (a.getName() > b.getName()) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        });\n    },\n    /**\n     * Load targets fetched from X-Ray service.\n     * @param {object} targetsMapping - Newly fetched targets map with rule name as key.\n     * @module RuleCache\n     * @function loadTargets\n     */\n    loadTargets: function loadTargets(targetsMapping) {\n        this.rules.forEach(function (rule) {\n            var target = targetsMapping[rule.getName()];\n            if (target) {\n                rule.getReservoir().loadNewQuota(target.quota, target.TTL, target.interval);\n                rule.setRate(target.rate);\n            }\n        });\n    },\n    getRules: function getRules() {\n        return this.rules;\n    },\n    timestamp: function timestamp(now) {\n        this.lastUpdated = now;\n    },\n    getLastUpdated: function getLastUpdated() {\n        return this.lastUpdated;\n    }\n};\nvar isExpired = function isExpired(now) {\n    // The cache is considered expired if it is never loaded.\n    if (!RuleCache.getLastUpdated()) {\n        return true;\n    }\n    return now > RuleCache.getLastUpdated() + TTL;\n};\nmodule.exports = RuleCache;\n", "\"use strict\";\nvar logger = require('../../logger');\nvar ServiceConnector = require('./service_connector');\nvar ruleCache = require('./rule_cache');\nvar DEFAULT_INTERVAL = 5 * 60 * 1000; // 5 minutes on sampling rules fetch\n/**\n * The RulePoller that periodically fetch sampling rules from X-Ray service\n * and load them into RuleCache.\n * @module RulePoller\n */\nvar RulePoller = {\n    start: function start() {\n        if (this.poller) {\n            clearInterval(this.poller);\n        }\n        // Refresh sampling rules cache with no jitter upon start.\n        refresh(false);\n        this.poller = setInterval(refresh, DEFAULT_INTERVAL);\n        this.poller.unref();\n    },\n};\nvar refresh = function refresh(jitter) {\n    // Add jitter by default unless explicitly told not to.\n    jitter = typeof jitter === 'undefined' ? true : jitter;\n    if (jitter) {\n        var delay = getJitter();\n        setTimeout(refreshWithFirewall, delay);\n    }\n    else {\n        refreshWithFirewall();\n    }\n};\nvar refreshWithFirewall = function refreshWithFirewall() {\n    try {\n        refreshCache();\n    }\n    catch (e) {\n        logger.getLogger().warn('Encountered unexpected exception when fetching sampling rules: ' + e);\n    }\n};\nvar refreshCache = function refreshCache() {\n    // Timestamp should be generated *before* the actual outbound call to ensure\n    // we don't mark the cache as being fresher than it actually is.\n    var now = Math.floor(new Date().getTime() / 1000);\n    // Pass a callback that only runs when the new rules are\n    // successfully fetched.\n    ServiceConnector.fetchSamplingRules(function (err, newRules) {\n        if (err) {\n            logger.getLogger().warn('Failed to retrieve sampling rules from X-Ray service:', err);\n        }\n        else if (newRules.length !== 0) {\n            ruleCache.loadRules(newRules);\n            ruleCache.timestamp(now);\n            logger.getLogger().info('Successfully refreshed centralized sampling rule cache.');\n        }\n    });\n};\n// A random jitter of up to 5 seconds is injected after every run to ensure\n// the calls eventually get evenly distributed over the 5 minute window.\nvar getJitter = function getJitter() {\n    return Math.random() * 5;\n};\nmodule.exports = RulePoller;\n", "\"use strict\";\nvar rulePoller = require('./rule_poller');\nvar serviceConnector = require('./service_connector');\nvar ruleCache = require('./rule_cache');\nvar logger = require('../../logger');\nvar DEFAULT_INTERVAL = 10 * 1000; // 10 seconds on sampling targets fetch\n/**\n * The TargetPoller that periodically fetch sampling targets from X-Ray service\n * and load them into RuleCache.\n * @module TargetPoller\n */\nvar TargetPoller = {\n    interval: DEFAULT_INTERVAL,\n    start: function start() {\n        this.poller = setInterval(refreshWithFirewall, DEFAULT_INTERVAL + getJitter());\n        this.poller.unref();\n    },\n};\nvar refreshWithFirewall = function refreshWithFirewall() {\n    try {\n        refresh();\n    }\n    catch (e) {\n        logger.getLogger().warn('Encountered unexpected exception when fetching sampling targets: ' + e);\n    }\n};\nvar refresh = function refresh() {\n    var candidates = getCandidates();\n    if (candidates && candidates.length > 0) {\n        serviceConnector.fetchTargets(candidates, function (err, targetsMapping, ruleFreshness) {\n            if (err) {\n                logger.getLogger().warn('Failed to retrieve sampling targets from X-Ray service:', err);\n                return;\n            }\n            ruleCache.loadTargets(targetsMapping);\n            if (ruleFreshness > ruleCache.getLastUpdated()) {\n                logger.getLogger().info('Performing out-of-band sampling rule polling to fetch updated rules.');\n                rulePoller.start();\n            }\n            logger.getLogger().info('Successfully reported rule statistics to get new sampling quota.');\n        });\n    }\n};\n// Don't report a rule statistics if any of the conditions is met:\n// 1. The report time hasn't come (some rules might have larger report intervals).\n// 2. The rule is never matched.\nvar getCandidates = function getCandidates() {\n    var rules = ruleCache.getRules();\n    var candidates = [];\n    rules.forEach(function (rule) {\n        if (rule.everMatched() && rule.timeToReport()) {\n            candidates.push(rule);\n        }\n    });\n    return candidates;\n};\n// A random jitter of up to 0.1 seconds is injected after every run to ensure\n// the calls eventually get evenly distributed over the 10 second window.\nvar getJitter = function getJitter() {\n    return Math.random() / TargetPoller.interval;\n};\nmodule.exports = TargetPoller;\n", "\"use strict\";\nvar logger = require('../../logger');\nconst util = require('util');\nvar SegmentUtils = require('../../segments/segment_utils');\n/**\n * The default sampler used to make sampling decisions when the decisions are absent in the incoming requests.\n * The sampler use pollers to poll sampling rules from X-Ray service.\n * @module DefaultSampler\n */\nvar DefaultSampler = {\n    localSampler: require('./local_sampler'),\n    rulePoller: require('./rule_poller'),\n    targetPoller: require('./target_poller'),\n    ruleCache: require('./rule_cache'),\n    started: false,\n    /**\n     * Makes a sample decision based on the sample request.\n     * @param {object} sampleRequest - Contains information for rules matching.\n     * @module DefaultSampler\n     * @function shouldSample\n     */\n    shouldSample: function shouldSample(sampleRequest) {\n        try {\n            if (!this.started) {\n                this.start();\n            }\n            if (!sampleRequest.serviceType) {\n                sampleRequest.serviceType = SegmentUtils.origin;\n            }\n            var now = Math.floor(new Date().getTime() / 1000);\n            var matchedRule = this.ruleCache.getMatchedRule(sampleRequest, now);\n            if (matchedRule) {\n                logger.getLogger().debug(util.format('Rule %s is matched.', matchedRule.getName()));\n                return processMatchedRule(matchedRule, now);\n            }\n            else {\n                logger.getLogger().info('No effective centralized sampling rule match. Fallback to local rules.');\n                return this.localSampler.shouldSample(sampleRequest);\n            }\n        }\n        catch (err) {\n            logger.getLogger().error('Unhandled exception by the SDK during making sampling decisions: ' + err);\n        }\n    },\n    /**\n     * Set local rules in case there is a need to fallback.\n     * @module DefaultSampler\n     * @function setLocalRules\n     */\n    setLocalRules: function setLocalRules(source) {\n        this.localSampler.setLocalRules(source);\n    },\n    /**\n     * Start the pollers to poll sampling rules and targets from X-Ray service.\n     * @module DefaultSampler\n     * @function start\n     */\n    start: function start() {\n        if (!this.started) {\n            this.rulePoller.start();\n            this.targetPoller.start();\n            this.started = true;\n        }\n    }\n};\nvar processMatchedRule = function processMatchedRule(rule, now) {\n    // As long as a rule is matched we increment request counter.\n    rule.incrementRequestCount();\n    var reservoir = rule.getReservoir();\n    var sample = true;\n    // We check if we can borrow or take from reservoir first.\n    var decision = reservoir.borrowOrTake(now, rule.canBorrow());\n    if (decision === 'borrow') {\n        rule.incrementBorrowCount();\n    }\n    else if (decision === 'take') {\n        rule.incrementSampledCount();\n    }\n    else if (Math.random() <= rule.getRate()) {\n        // Otherwise we compute based on FixedRate of this sampling rule.\n        rule.incrementSampledCount();\n    }\n    else {\n        sample = false;\n    }\n    if (sample) {\n        return rule.getName();\n    }\n    else {\n        return false;\n    }\n};\nmodule.exports = DefaultSampler;\n", "\"use strict\";\n/**\n * Middleware Utils module.\n *\n * Exposes various configuration and helper methods to be used by the middleware.\n * @module mw_utils\n */\nvar Segment = require('../segments/segment');\nvar IncomingRequestData = require('./incoming_request_data');\nvar logger = require('../logger');\nvar coreUtils = require('../utils');\nvar wildcardMatch = require('../utils').wildcardMatch;\nvar processTraceData = require('../utils').processTraceData;\n//headers are case-insensitive\nvar XRAY_HEADER = 'x-amzn-trace-id';\nvar overrideFlag = !!process.env.AWS_XRAY_TRACING_NAME;\nvar utils = {\n    defaultName: process.env.AWS_XRAY_TRACING_NAME,\n    dynamicNaming: false,\n    hostPattern: null,\n    sampler: require('./sampling/default_sampler'),\n    /**\n     * Enables dynamic naming for segments via the middleware. Use 'AWSXRay.middleware.enableDynamicNaming()'.\n     * @param {string} [hostPattern] - The pattern to match the host header. See the README on dynamic and fixed naming modes.\n     * @alias module:mw_utils.enableDynamicNaming\n     */\n    enableDynamicNaming: function (hostPattern) {\n        this.dynamicNaming = true;\n        if (hostPattern && typeof hostPattern !== 'string') {\n            throw new Error('Host pattern must be a string.');\n        }\n        this.hostPattern = hostPattern || null;\n    },\n    /**\n     * Splits out the 'x-amzn-trace-id' header params from the incoming request.  Used by the middleware.\n     * @param {http.IncomingMessage|https.IncomingMessage} req - The request object from the incoming call.\n     * @returns {object}\n     * @alias module:mw_utils.processHeaders\n     */\n    processHeaders: function processHeaders(req) {\n        var amznTraceHeader = {};\n        if (req && req.headers && req.headers[XRAY_HEADER]) {\n            amznTraceHeader = processTraceData(req.headers[XRAY_HEADER]);\n        }\n        return amznTraceHeader;\n    },\n    /**\n     * Resolves the name of the segment as determined by fixed or dynamic mode options. Used by the middleware.\n     * @param {string} hostHeader - The string from the request.headers.host property.\n     * @returns {string}\n     * @alias module:mw_utils.resolveName\n     */\n    resolveName: function resolveName(hostHeader) {\n        var name;\n        if (this.dynamicNaming && hostHeader) {\n            name = this.hostPattern ? (wildcardMatch(this.hostPattern, hostHeader) ? hostHeader : this.defaultName) : hostHeader;\n        }\n        else {\n            name = this.defaultName;\n        }\n        return name;\n    },\n    /**\n     * Resolves the sampling decision as determined by the values given and options set. Used by the middleware.\n     * @param {object} amznTraceHeader - The object as returned by the processHeaders function.\n     * @param {Segment} segment - The string from the request.headers.host property.\n     * @param {http.ServerResponse|https.ServerResponse} res - The response object from the incoming call.\n     * @returns {boolean}\n     * @alias module:mw_utils.resolveSampling\n     */\n    resolveSampling: function resolveSampling(amznTraceHeader, segment, res) {\n        var isSampled;\n        if (amznTraceHeader.sampled === '1') {\n            isSampled = true;\n        }\n        else if (amznTraceHeader.sampled === '0') {\n            isSampled = false;\n        }\n        else {\n            var sampleRequest = {\n                host: res.req.headers.host,\n                httpMethod: res.req.method,\n                urlPath: res.req.url,\n                serviceName: segment.name\n            };\n            isSampled = this.sampler.shouldSample(sampleRequest);\n            if (isSampled instanceof String || typeof isSampled === 'string') {\n                segment.setMatchedSamplingRule(isSampled);\n                isSampled = true;\n            }\n        }\n        if (amznTraceHeader.sampled === '?' && res.header) {\n            res.header(XRAY_HEADER, 'Root=' + amznTraceHeader.root + ';Sampled=' + (isSampled ? '1' : '0'));\n        }\n        if (!isSampled) {\n            segment.notTraced = true;\n        }\n    },\n    /**\n     * Sets the default name of created segments. Used with the middleware.\n     * Can be overridden by the AWS_XRAY_TRACING_NAME environment variable.\n     * @param {string} name - The default name for segments created in the middleware.\n     * @alias module:mw_utils.setDefaultName\n     */\n    setDefaultName: function setDefaultName(name) {\n        if (!overrideFlag) {\n            this.defaultName = name;\n        }\n    },\n    disableCentralizedSampling: function disableCentralizedSampling() {\n        this.sampler = require('./sampling/local_sampler');\n    },\n    /**\n     * Overrides the default sampling rules file to specify at what rate to sample at for specific routes.\n     * The base sampling rules file can be found at /lib/resources/default_sampling_rules.json\n     * @param {string|Object} source - The path to the custom sampling rules file, or the source JSON object.\n     * @memberof AWSXRay\n     */\n    setSamplingRules: function setSamplingRules(source) {\n        if (!source || source instanceof String || !(typeof source === 'string' || (source instanceof Object))) {\n            throw new Error('Please specify a path to the local sampling rules file, or supply an object containing the rules.');\n        }\n        this.sampler.setLocalRules(source);\n    },\n    /**\n     * Logs a debug message including core request and segment information\n     * @param {string} message - The message to be logged\n     * @param {string} url - The request url being traced\n     * @param {Segment} - The current segment\n     */\n    middlewareLog: function middlewareLog(message, url, segment) {\n        logger.getLogger().debug(message + ': { url: ' + url + ', name: ' + segment.name + ', trace_id: ' +\n            segment.trace_id + ', id: ' + segment.id + ', sampled: ' + !segment.notTraced + ' }');\n    },\n    /**\n     * Traces the request/response cycle of an http.IncomingMessage / http.ServerResponse pair.\n     * Resolves sampling rules, creates a segment, adds the core request / response data adding\n     * throttling / error / fault flags based on the response status code.\n     * @param {http.IncomingMessage} req - The incoming request.\n     * @param {http.ServerResponse} res - The server response.\n     * @returns {Segment}\n     * @memberof AWSXRay\n     */\n    traceRequestResponseCycle: function traceRequestResponseCycle(req, res) {\n        var amznTraceHeader = this.processHeaders(req);\n        var name = this.resolveName(req.headers.host);\n        var segment = new Segment(name, amznTraceHeader.root, amznTraceHeader.parent);\n        if (!res.req) {\n            res.req = req;\n        }\n        this.resolveSampling(amznTraceHeader, segment, res);\n        segment.addIncomingRequestData(new IncomingRequestData(req));\n        this.middlewareLog('Starting middleware segment', req.url, segment);\n        var middlewareLog = this.middlewareLog;\n        var didEnd = false;\n        var endSegment = function () {\n            // ensure `endSegment` is only called once\n            // in some versions of node.js 10.x and in all versions of node.js 11.x and higher,\n            // the 'finish' and 'close' event are BOTH triggered.\n            // Previously, only one or the other was triggered:\n            // https://github.com/nodejs/node/pull/20611\n            if (didEnd) {\n                return;\n            }\n            didEnd = true;\n            if (res.statusCode === 429) {\n                segment.addThrottleFlag();\n            }\n            const cause = coreUtils.getCauseTypeFromHttpStatus(res.statusCode);\n            if (cause) {\n                segment[cause] = true;\n            }\n            segment.http.close(res);\n            segment.close();\n            middlewareLog('Closed middleware segment successfully', req.url, segment);\n        };\n        res.on('finish', endSegment);\n        res.on('close', endSegment);\n        return segment;\n    }\n};\nmodule.exports = utils;\n", "\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvokeStore = void 0;\nconst async_hooks_1 = require(\"async_hooks\");\n// AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA provides an escape hatch since we're modifying the global object which may not be expected to a customer's handler.\nconst noGlobalAwsLambda = process.env[\"AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA\"] === \"1\" ||\n    process.env[\"AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA\"] === \"true\";\nif (!noGlobalAwsLambda) {\n    globalThis.awslambda = globalThis.awslambda || {};\n}\nconst PROTECTED_KEYS = {\n    REQUEST_ID: Symbol(\"_AWS_LAMBDA_REQUEST_ID\"),\n    X_RAY_TRACE_ID: Symbol(\"_AWS_LAMBDA_X_RAY_TRACE_ID\"),\n};\n/**\n * InvokeStore implementation class\n */\nclass InvokeStoreImpl {\n    static storage = new async_hooks_1.AsyncLocalStorage();\n    // Protected keys for Lambda context fields\n    static PROTECTED_KEYS = PROTECTED_KEYS;\n    /**\n     * Initialize and run code within an invoke context\n     */\n    static run(context, fn) {\n        return this.storage.run({ ...context }, fn);\n    }\n    /**\n     * Get the complete current context\n     */\n    static getContext() {\n        return this.storage.getStore();\n    }\n    /**\n     * Get a specific value from the context by key\n     */\n    static get(key) {\n        const context = this.storage.getStore();\n        return context?.[key];\n    }\n    /**\n     * Set a custom value in the current context\n     * Protected Lambda context fields cannot be overwritten\n     */\n    static set(key, value) {\n        if (this.isProtectedKey(key)) {\n            throw new Error(`Cannot modify protected Lambda context field`);\n        }\n        const context = this.storage.getStore();\n        if (context) {\n            context[key] = value;\n        }\n    }\n    /**\n     * Get the current request ID\n     */\n    static getRequestId() {\n        return this.get(this.PROTECTED_KEYS.REQUEST_ID) ?? \"-\";\n    }\n    /**\n     * Get the current X-ray trace ID\n     */\n    static getXRayTraceId() {\n        return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID);\n    }\n    /**\n     * Check if we're currently within an invoke context\n     */\n    static hasContext() {\n        return this.storage.getStore() !== undefined;\n    }\n    /**\n     * Check if a key is protected (readonly Lambda context field)\n     */\n    static isProtectedKey(key) {\n        return (key === this.PROTECTED_KEYS.REQUEST_ID ||\n            key === this.PROTECTED_KEYS.X_RAY_TRACE_ID);\n    }\n}\nlet instance;\nif (!noGlobalAwsLambda && globalThis.awslambda?.InvokeStore) {\n    instance = globalThis.awslambda.InvokeStore;\n}\nelse {\n    instance = InvokeStoreImpl;\n    if (!noGlobalAwsLambda && globalThis.awslambda) {\n        globalThis.awslambda.InvokeStore = instance;\n    }\n}\nexports.InvokeStore = instance;\n", "\"use strict\";\nvar contextUtils = require('../context_utils');\nvar mwUtils = require('../middleware/mw_utils');\nvar LambdaUtils = require('../utils').LambdaUtils;\nvar Segment = require('../segments/segment');\nvar SegmentEmitter = require('../segment_emitter');\nvar SegmentUtils = require('../segments/segment_utils');\nvar logger = require('../logger');\nconst TraceID = require('../segments/attributes/trace_id');\nconst { InvokeStore } = require('@aws/lambda-invoke-store');\n/**\n * @namespace\n * @ignore\n */\nvar xAmznTraceIdPrev = null;\n/**\n* Used to initialize segments on AWS Lambda with extra data from the context.\n*/\nmodule.exports.init = function init() {\n    contextUtils.enableManualMode = function () {\n        logger.getLogger().warn('AWS Lambda does not support AWS X-Ray manual mode.');\n    };\n    SegmentEmitter.disableReusableSocket();\n    SegmentUtils.setStreamingThreshold(0);\n    /**\n     * Disabling all centralized sampling in Lambda environments. The sampling decisions would be\n     * uselessly applied to the facade segment, and the sampling pollers were causing errors.\n     *\n     * See: https://github.com/aws/aws-xray-sdk-node/issues/217\n     */\n    logger.getLogger().info('Disabling centralized sampling in Lambda environment.');\n    mwUtils.disableCentralizedSampling();\n    var namespace = contextUtils.getNamespace();\n    namespace.enter(namespace.createContext());\n    contextUtils.setSegment(facadeSegment());\n};\nvar facadeSegment = function facadeSegment() {\n    var segment = new Segment('facade');\n    var whitelistFcn = ['addNewSubsegment', 'addSubsegment', 'removeSubsegment', 'toString', 'addSubsegmentWithoutSampling', 'addNewSubsegmentWithoutSampling'];\n    var silentFcn = ['incrementCounter', 'decrementCounter', 'isClosed', 'close', 'format', 'flush'];\n    var xAmznTraceId = process.env._X_AMZN_TRACE_ID;\n    for (var key in segment) {\n        if (typeof segment[key] === 'function' && whitelistFcn.indexOf(key) === -1) {\n            if (silentFcn.indexOf(key) === -1) {\n                segment[key] = (function () {\n                    var func = key;\n                    return function facade() {\n                        logger.getLogger().warn('Function \"' + func + '\" cannot be called on an AWS Lambda segment. Please use a subsegment to record data.');\n                        return;\n                    };\n                })();\n            }\n            else {\n                segment[key] = function facade() {\n                    return;\n                };\n            }\n        }\n    }\n    segment.trace_id = TraceID.Invalid().toString();\n    segment.isClosed = function () {\n        return true;\n    };\n    segment.in_progress = false;\n    segment.counter = 1;\n    segment.notTraced = true;\n    segment.facade = true;\n    segment.reset = function reset() {\n        this.trace_id = TraceID.Invalid().toString();\n        this.id = '00000000';\n        delete this.subsegments;\n        this.notTraced = true;\n    };\n    segment.resolveLambdaTraceData = function resolveLambdaTraceData() {\n        const traceIdFromInvokeStore = InvokeStore.getXRayTraceId();\n        const traceIdFromEnv = process.env._X_AMZN_TRACE_ID;\n        var xAmznLambda = traceIdFromInvokeStore !== null && traceIdFromInvokeStore !== void 0 ? traceIdFromInvokeStore : traceIdFromEnv;\n        if (xAmznLambda) {\n            // This check resets the trace data whenever a new trace header is read to not leak data between invocations\n            if (xAmznLambda != xAmznTraceIdPrev) {\n                this.reset();\n                if (LambdaUtils.populateTraceData(segment, xAmznLambda)) {\n                    xAmznTraceIdPrev = xAmznLambda;\n                }\n            }\n        }\n        else {\n            this.reset();\n            contextUtils.contextMissingStrategy.contextMissing('Missing AWS Lambda trace data for X-Ray. ' +\n                'Ensure Active Tracing is enabled and no subsegments are created outside the function handler.');\n        }\n    };\n    // Test for valid trace data during SDK startup. It's likely we're still in the cold-start portion of the\n    // code at this point and a valid trace header has not been set\n    if (LambdaUtils.validTraceData(xAmznTraceId)) {\n        if (LambdaUtils.populateTraceData(segment, xAmznTraceId)) {\n            xAmznTraceIdPrev = xAmznTraceId;\n        }\n    }\n    return segment;\n};\n", "{\n  \"name\": \"aws-xray-sdk-core\",\n  \"version\": \"3.11.0\",\n  \"description\": \"AWS X-Ray SDK for Javascript\",\n  \"author\": \"Amazon Web Services\",\n  \"contributors\": [\n    \"Sandra McMullen <mcmuls@amazon.com>\",\n    \"William Armiros <armiros@amazon.com>\",\n    \"Moritz Onken <onken@netcubed.de>\"\n  ],\n  \"files\": [\n    \"dist/lib/**/*\",\n    \"LICENSE\",\n    \"README.md\"\n  ],\n  \"main\": \"dist/lib/index.js\",\n  \"types\": \"dist/lib/index.d.ts\",\n  \"engines\": {\n    \"node\": \">= 14.x\"\n  },\n  \"directories\": {\n    \"test\": \"test\"\n  },\n  \"//\": \"@types/cls-hooked is exposed in API so must be in dependencies, not devDependencies\",\n  \"dependencies\": {\n    \"@aws-sdk/types\": \"^3.4.1\",\n    \"@aws/lambda-invoke-store\": \"^0.0.1\",\n    \"@smithy/service-error-classification\": \"^2.0.4\",\n    \"@types/cls-hooked\": \"^4.3.3\",\n    \"atomic-batcher\": \"^1.0.2\",\n    \"cls-hooked\": \"^4.2.2\",\n    \"semver\": \"^7.5.3\"\n  },\n  \"scripts\": {\n    \"prepare\": \"npm run compile\",\n    \"compile\": \"tsc && npm run copy-lib && npm run copy-test\",\n    \"copy-lib\": \"find lib -type f \\\\( -name '*.d.ts' -o -name '*.json' \\\\) | xargs -I % ../../scripts/cp-with-structure.sh % dist\",\n    \"copy-test\": \"find test -name '*.json' | xargs -I % ../../scripts/cp-with-structure.sh % dist\",\n    \"lint\": \"eslint .\",\n    \"lint:fix\": \"eslint . --fix\",\n    \"test\": \"npm run compile && mocha --recursive ./dist/test/ -R spec && tsd && mocha --recursive ./dist/test_async/ -R spec\",\n    \"test-d\": \"tsd\",\n    \"test-async\": \"npm run compile && mocha --recursive ./dist/test_async/ -R spec\",\n    \"clean\": \"rm -rf dist && rm -rf node_modules\",\n    \"testcov\": \"nyc npm run test\",\n    \"reportcov\": \"nyc report --reporter=text-lcov > coverage.lcov\"\n  },\n  \"keywords\": [\n    \"amazon\",\n    \"api\",\n    \"aws\",\n    \"core\",\n    \"xray\",\n    \"x-ray\",\n    \"x ray\"\n  ],\n  \"license\": \"Apache-2.0\",\n  \"repository\": \"https://github.com/aws/aws-xray-sdk-node/tree/master/packages/core\",\n  \"gitHead\": \"4e6f43ed3c4686418c2139d4b86ab5513e0ca8ed\"\n}\n", "\"use strict\";\nvar http = require('http');\nvar Plugin = {\n    METADATA_TIMEOUT: 1000,\n    /**\n     * Asynchronously retrieves metadata from on-instance endpoint with an HTTP request using retries for\n     * requests that time out.\n     * @param {object} options - The HTTP options to make the request with\n     * @param {function} callback - callback to plugin\n     */\n    getPluginMetadata: function (options, callback) {\n        const METADATA_RETRY_TIMEOUT = 250; // Millis\n        const METADATA_RETRIES = 5;\n        var retries = METADATA_RETRIES;\n        var getMetadata = function () {\n            var httpReq = http.__request ? http.__request : http.request;\n            var req = httpReq(options, function (res) {\n                var body = '';\n                res.on('data', function (chunk) {\n                    body += chunk;\n                });\n                res.on('end', function () {\n                    if (this.statusCode === 200 || this.statusCode === 300) {\n                        try {\n                            body = JSON.parse(body);\n                        }\n                        catch (e) {\n                            callback(e);\n                            return;\n                        }\n                        callback(null, body);\n                    }\n                    else if (retries > 0 && Math.floor(this.statusCode / 100) === 5) {\n                        retries--;\n                        setTimeout(getMetadata, METADATA_RETRY_TIMEOUT);\n                    }\n                    else {\n                        callback(new Error(`Failed to retrieve metadata with options: ${options}`));\n                    }\n                });\n            });\n            req.on('error', function (err) {\n                callback(err);\n            });\n            req.on('timeout', function () {\n                req.abort();\n            });\n            req.setTimeout(Plugin.METADATA_TIMEOUT);\n            req.end();\n        };\n        getMetadata();\n    }\n};\nmodule.exports = Plugin;\n", "\"use strict\";\nvar Plugin = require('./plugin');\nvar logger = require('../../logger');\nvar http = require('http');\nvar EC2Plugin = {\n    /**\n     * A function to get the instance data from the EC2 metadata service.\n     * @param {function} callback - The callback for the plugin loader.\n     */\n    getData: function (callback) {\n        const METADATA_PATH = '/latest/dynamic/instance-identity/document';\n        function populateMetadata(token) {\n            const options = getOptions(METADATA_PATH, 'GET', token ? { 'X-aws-ec2-metadata-token': token } : {});\n            Plugin.getPluginMetadata(options, function (err, data) {\n                if (err || !data) {\n                    logger.getLogger().error('Error loading EC2 plugin metadata: ', err ? err.toString() : 'Could not retrieve data from IMDS.');\n                    callback();\n                    return;\n                }\n                const metadata = {\n                    ec2: {\n                        instance_id: data.instanceId,\n                        availability_zone: data.availabilityZone,\n                        instance_size: data.instanceType,\n                        ami_id: data.imageId\n                    }\n                };\n                callback(metadata);\n            });\n        }\n        /**\n         * This kicks off a requet to get a token used for requests to IMDSv2. If the request for the token\n         * fails, we fall back to IMDSv1. Otherwise, the token will be used for an IMDSv2 request.\n         */\n        getToken(function (token) {\n            if (token === null) {\n                logger.getLogger().debug('EC2Plugin failed to get token from IMDSv2. Falling back to IMDSv1.');\n            }\n            populateMetadata(token);\n        });\n    },\n    originName: 'AWS::EC2::Instance'\n};\n/**\n * Asynchronously retrieves a token used in requests to EC2 instance metadata service.\n * @param {function} callback - callback to plugin\n */\nfunction getToken(callback) {\n    const httpReq = http.__request ? http.__request : http.request;\n    const TTL = 60; //seconds\n    const TOKEN_PATH = '/latest/api/token';\n    const options = getOptions(TOKEN_PATH, 'PUT', {\n        'X-aws-ec2-metadata-token-ttl-seconds': TTL\n    });\n    let req = httpReq(options, function (res) {\n        let body = '';\n        res.on('data', function (chunk) {\n            body += chunk;\n        });\n        res.on('end', function () {\n            if (this.statusCode === 200 || this.statusCode === 300) {\n                callback(body);\n            }\n            else {\n                callback(null);\n            }\n        });\n    });\n    req.on('error', function () {\n        callback(null);\n    });\n    req.on('timeout', function () {\n        req.abort();\n        callback(null);\n    });\n    req.setTimeout(Plugin.METADATA_TIMEOUT);\n    req.end();\n}\nfunction getOptions(path, method, headers) {\n    if (!method) {\n        method = 'GET';\n    }\n    if (!headers) {\n        headers = {};\n    }\n    return {\n        host: '169.254.169.254',\n        path: path,\n        method: method,\n        headers: headers\n    };\n}\nmodule.exports = EC2Plugin;\n", "\"use strict\";\nvar os = require('os');\nvar ECSPlugin = {\n    /**\n     * A function to get the instance data from the ECS instance.\n     * @param {function} callback - The callback for the plugin loader.\n     */\n    getData: function (callback) {\n        callback({ ecs: { container: os.hostname() } });\n    },\n    originName: 'AWS::ECS::Container'\n};\nmodule.exports = ECSPlugin;\n", "\"use strict\";\nvar fs = require('fs');\nvar logger = require('../../logger');\nvar ENV_CONFIG_LOCATION = '/var/elasticbeanstalk/xray/environment.conf';\nvar ElasticBeanstalkPlugin = {\n    /**\n     * A function to get data from the Elastic Beanstalk environment configuration file.\n     * @param {function} callback - The callback for the plugin loader.\n     */\n    getData: function (callback) {\n        fs.readFile(ENV_CONFIG_LOCATION, 'utf8', function (err, rawData) {\n            if (err) {\n                logger.getLogger().error('Error loading Elastic Beanstalk plugin:', err.stack);\n                callback();\n            }\n            else {\n                var data = JSON.parse(rawData);\n                var metadata = {\n                    elastic_beanstalk: {\n                        environment: data.environment_name,\n                        version_label: data.version_label,\n                        deployment_id: data.deployment_id\n                    }\n                };\n                callback(metadata);\n            }\n        });\n    },\n    originName: 'AWS::ElasticBeanstalk::Environment'\n};\nmodule.exports = ElasticBeanstalkPlugin;\n", "{\n  \"services\": {\n    \"dynamodb\": {\n      \"operations\": {\n        \"batchGetItem\": {\n          \"request_descriptors\": {\n            \"RequestItems\": {\n              \"get_keys\": true,\n              \"rename_to\": \"table_names\"\n            }\n          },\n          \"response_parameters\": [\n            \"ConsumedCapacity\"\n          ]\n        },\n        \"batchWriteItem\": {\n          \"request_descriptors\": {\n            \"RequestItems\": {\n              \"get_keys\": true,\n              \"rename_to\": \"table_names\"\n            }\n          },\n          \"response_parameters\": [\n            \"ConsumedCapacity\",\n            \"ItemCollectionMetrics\"\n          ]\n        },\n        \"createTable\": {\n          \"request_parameters\": [\n            \"GlobalSecondaryIndexes\",\n            \"LocalSecondaryIndexes\",\n            \"ProvisionedThroughput\",\n            \"TableName\"\n          ]\n        },\n        \"deleteItem\": {\n          \"request_parameters\": [\n            \"TableName\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\",\n            \"ItemCollectionMetrics\"\n          ]\n        },\n        \"deleteTable\": {\n          \"request_parameters\": [\n            \"TableName\"\n          ]\n        },\n        \"describeTable\": {\n          \"request_parameters\": [\n            \"TableName\"\n          ]\n        },\n        \"getItem\": {\n          \"request_parameters\": [\n            \"ConsistentRead\",\n            \"ProjectionExpression\",\n            \"TableName\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\"\n          ]\n        },\n        \"listTables\": {\n          \"request_parameters\": [\n            \"ExclusiveStartTableName\",\n            \"Limit\"\n          ],\n          \"response_descriptors\": {\n            \"TableNames\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"table_count\"\n            }\n          }\n        },\n        \"putItem\": {\n          \"request_parameters\": [\n            \"TableName\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\",\n            \"ItemCollectionMetrics\"\n          ]\n        },\n        \"query\": {\n          \"request_parameters\": [\n            \"AttributesToGet\",\n            \"ConsistentRead\",\n            \"IndexName\",\n            \"Limit\",\n            \"ProjectionExpression\",\n            \"ScanIndexForward\",\n            \"Select\",\n            \"TableName\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\"\n          ]\n        },\n        \"scan\": {\n          \"request_parameters\": [\n            \"AttributesToGet\",\n            \"ConsistentRead\",\n            \"IndexName\",\n            \"Limit\",\n            \"ProjectionExpression\",\n            \"Segment\",\n            \"Select\",\n            \"TableName\",\n            \"TotalSegments\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\",\n            \"Count\",\n            \"ScannedCount\"\n          ]\n        },\n        \"updateItem\": {\n          \"request_parameters\": [\n            \"TableName\"\n          ],\n          \"response_parameters\": [\n            \"ConsumedCapacity\",\n            \"ItemCollectionMetrics\"\n          ]\n        },\n        \"updateTable\": {\n          \"request_parameters\": [\n            \"AttributeDefinitions\",\n            \"GlobalSecondaryIndexUpdates\",\n            \"ProvisionedThroughput\",\n            \"TableName\"\n          ]\n        }\n      }\n    },\n    \"sqs\": {\n      \"operations\": {\n        \"addPermission\": {\n          \"request_parameters\": [\n            \"Label\",\n            \"QueueUrl\"\n          ]\n        },\n        \"changeMessageVisibility\": {\n          \"request_parameters\": [\n            \"QueueUrl\",\n            \"VisibilityTimeout\"\n          ]\n        },\n        \"changeMessageVisibilityBatch\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"response_parameters\": [\n            \"Failed\"\n          ]\n        },\n        \"createQueue\": {\n          \"request_parameters\": [\n            \"Attributes\",\n            \"QueueName\"\n          ]\n        },\n        \"deleteMessage\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ]\n        },\n        \"deleteMessageBatch\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"response_parameters\": [\n            \"Failed\"\n          ]\n        },\n        \"deleteQueue\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ]\n        },\n        \"getQueueAttributes\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"response_parameters\": [\n            \"Attributes\"\n          ]\n        },\n        \"getQueueUrl\": {\n          \"request_parameters\": [\n            \"QueueName\",\n            \"QueueOwnerAWSAccountId\"\n          ],\n          \"response_parameters\": [\n            \"QueueUrl\"\n          ]\n        },\n        \"listDeadLetterSourceQueues\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"response_parameters\": [\n            \"QueueUrls\"\n          ]\n        },\n        \"listQueues\": {\n          \"request_parameters\": [\n            \"QueueNamePrefix\"\n          ],\n          \"response_descriptors\": {\n            \"QueueUrls\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"queue_count\"\n            }\n          }\n        },\n        \"purgeQueue\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ]\n        },\n        \"receiveMessage\": {\n          \"request_parameters\": [\n            \"AttributeNames\",\n            \"MaxNumberOfMessages\",\n            \"MessageAttributeNames\",\n            \"QueueUrl\",\n            \"VisibilityTimeout\",\n            \"WaitTimeSeconds\"\n          ],\n          \"response_descriptors\": {\n            \"Messages\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"message_count\"\n            }\n          }\n        },\n        \"removePermission\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ]\n        },\n        \"sendMessage\": {\n          \"request_parameters\": [\n            \"DelaySeconds\",\n            \"QueueUrl\"\n          ],\n          \"request_descriptors\": {\n            \"MessageAttributes\": {\n              \"get_keys\": true,\n              \"rename_to\": \"message_attribute_names\"\n            }\n          },\n          \"response_parameters\": [\n            \"MessageId\"\n          ]\n        },\n        \"sendMessageBatch\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"request_descriptors\": {\n            \"Entries\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"message_count\"\n            }\n          },\n          \"response_descriptors\": {\n            \"Failed\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"failed_count\"\n            },\n            \"Successful\": {\n              \"list\": true,\n              \"get_count\": true,\n              \"rename_to\": \"successful_count\"\n            }\n          }\n        },\n        \"setQueueAttributes\": {\n          \"request_parameters\": [\n            \"QueueUrl\"\n          ],\n          \"request_descriptors\": {\n            \"Attributes\": {\n              \"get_keys\": true,\n              \"rename_to\": \"attribute_names\"\n            }\n          }\n        }\n      }\n    },\n    \"sns\": {\n      \"operations\": {\n        \"publish\": {\n          \"request_parameters\": [\n            \"TopicArn\"\n          ]\n        },\n        \"publishBatch\": {\n          \"request_parameters\": [\n            \"TopicArn\"\n          ]\n        }\n      }\n    },\n    \"lambda\": {\n      \"operations\": {\n        \"invoke\": {\n          \"request_parameters\": [\n            \"FunctionName\",\n            \"InvocationType\",\n            \"LogType\",\n            \"Qualifier\"\n          ],\n          \"response_parameters\": [\n            \"FunctionError\",\n            \"StatusCode\"\n          ]\n        },\n        \"invokeAsync\": {\n          \"request_parameters\": [\n            \"FunctionName\"\n          ],\n          \"response_parameters\": [\n            \"Status\"\n          ]\n        }\n      }\n    },\n    \"s3\": {\n      \"operations\": {\n        \"abortMultipartUpload\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"completeMultipartUpload\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"copyObject\": {\n          \"request_parameters\": [\n            \"CopySource\",\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"createBucket\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"createMultipartUpload\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucket\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketAnalyticsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketCors\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketEncryption\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketInventoryConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketLifecycle\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketMetricsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketPolicy\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketReplication\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketTagging\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteBucketWebsite\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteObject\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteObjectTagging\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"deleteObjects\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketAccelerateConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketAcl\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketAnalyticsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketCors\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketEncryption\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketInventoryConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketLifecycle\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketLifecycleConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketLocation\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketLogging\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketMetricsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketNotification\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketNotificationConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketPolicy\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketReplication\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketRequestPayment\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketTagging\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketVersioning\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getBucketWebsite\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getObject\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getObjectAcl\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getObjectTagging\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"getObjectTorrent\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"headBucket\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"headObject\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listBucketAnalyticsConfigurations\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listBucketInventoryConfigurations\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listBucketMetricsConfigurations\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listMultipartUploads\": {\n          \"request_parameters\": [\n            \"Prefix\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listObjectVersions\": {\n          \"request_parameters\": [\n            \"Prefix\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listObjects\": {\n          \"request_parameters\": [\n            \"Prefix\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listObjectsV2\": {\n          \"request_parameters\": [\n            \"Prefix\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"listParts\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketAccelerateConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketAcl\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketAnalyticsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketCors\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketEncryption\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketInventoryConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketLifecycle\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketLifecycleConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketLogging\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketMetricsConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketNotification\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketNotificationConfiguration\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketPolicy\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketReplication\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketRequestPayment\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketTagging\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketVersioning\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putBucketWebsite\": {\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putObject\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putObjectAcl\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"putObjectTagging\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"restoreObject\": {\n          \"request_parameters\": [\n            \"Key\",\n            \"VersionId\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"uploadPart\": {\n          \"request_parameters\": [\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        },\n        \"uploadPartCopy\": {\n          \"request_parameters\": [\n            \"CopySource\",\n            \"Key\"\n          ],\n          \"request_descriptors\": {\n            \"Bucket\": {\n              \"rename_to\": \"bucket_name\"\n            }\n          }\n        }\n      }\n    },\n    \"sagemakerruntime\": {\n      \"operations\": {\n        \"invokeEndpoint\": {\n          \"request_parameters\": [\n            \"EndpointName\"\n          ]\n        }\n      }\n    }\n  }\n}\n", "\"use strict\";\nvar fs = require('fs');\nvar logger = require('../logger');\nvar whitelist = require('../resources/aws_whitelist.json');\nvar paramTypes = {\n    REQ_DESC: 'request_descriptors',\n    REQ_PARAMS: 'request_parameters',\n    RES_DESC: 'response_descriptors',\n    RES_PARAMS: 'response_parameters'\n};\n/**\n * Represents a set of AWS services, operations and keys or params to capture.\n * @constructor\n * @param {string|Object} [source] - The location or source JSON object of the custom AWS whitelist file. If none is provided, the default file will be used.\n */\nfunction CallCapturer(source) {\n    this.init(source);\n}\nCallCapturer.prototype.init = function init(source) {\n    if (source) {\n        if (typeof source === 'string') {\n            logger.getLogger().info('Using custom AWS whitelist file: ' + source);\n            this.services = loadWhitelist(JSON.parse(fs.readFileSync(source, 'utf8')));\n        }\n        else {\n            logger.getLogger().info('Using custom AWS whitelist source.');\n            this.services = loadWhitelist(source);\n        }\n    }\n    else {\n        this.services = whitelist.services;\n    }\n};\nCallCapturer.prototype.append = function append(source) {\n    var newServices = {};\n    if (typeof source === 'string') {\n        logger.getLogger().info('Appending AWS whitelist with custom file: ' + source);\n        newServices = loadWhitelist(JSON.parse(fs.readFileSync(source, 'utf8')));\n    }\n    else {\n        logger.getLogger().info('Appending AWS whitelist with a custom source.');\n        newServices = loadWhitelist(source);\n    }\n    for (var attribute in newServices) {\n        this.services[attribute] = newServices[attribute];\n    }\n};\nCallCapturer.prototype.capture = function capture(serviceName, response) {\n    var operation = response.request.operation;\n    var call = this.services[serviceName] !== undefined ? this.services[serviceName].operations[operation] : null;\n    if (call === null) {\n        logger.getLogger().debug('Call \"' + serviceName + '.' + operation + '\" is not whitelisted for additional data capturing. Ignoring.');\n        return;\n    }\n    var dataCaptured = {};\n    for (var paramType in call) {\n        var params = call[paramType];\n        if (paramType === paramTypes.REQ_PARAMS) {\n            captureCallParams(params, response.request.params, dataCaptured);\n        }\n        else if (paramType === paramTypes.REQ_DESC) {\n            captureDescriptors(params, response.request.params, dataCaptured);\n        }\n        else if (paramType === paramTypes.RES_PARAMS) {\n            if (response.data) {\n                captureCallParams(params, response.data, dataCaptured);\n            }\n        }\n        else if (paramType === paramTypes.RES_DESC) {\n            if (response.data) {\n                captureDescriptors(params, response.data, dataCaptured);\n            }\n        }\n        else {\n            logger.getLogger().error('Unknown parameter type \"' + paramType + '\". Must be \"request_descriptors\", \"response_descriptors\", ' +\n                '\"request_parameters\" or \"response_parameters\".');\n        }\n    }\n    return dataCaptured;\n};\nfunction captureCallParams(params, call, data) {\n    params.forEach(function (param) {\n        if (typeof call[param] !== 'undefined') {\n            var formatted = toSnakeCase(param);\n            this[formatted] = call[param];\n        }\n    }, data);\n}\nfunction captureDescriptors(descriptors, params, data) {\n    for (var paramName in descriptors) {\n        var attributes = descriptors[paramName];\n        if (typeof params[paramName] !== 'undefined') {\n            var paramData;\n            if (attributes.list && attributes.get_count) {\n                paramData = params[paramName] ? params[paramName].length : 0;\n            }\n            else {\n                paramData = attributes.get_keys === true ? Object.keys(params[paramName]) : params[paramName];\n            }\n            if (typeof attributes.rename_to === 'string') {\n                data[attributes.rename_to] = paramData;\n            }\n            else {\n                var formatted = toSnakeCase(paramName);\n                data[formatted] = paramData;\n            }\n        }\n    }\n}\nfunction toSnakeCase(param) {\n    if (param === 'IPAddress') {\n        return 'ip_address';\n    }\n    else {\n        return param.split(/(?=[A-Z])/).join('_').toLowerCase();\n    }\n}\nfunction loadWhitelist(source) {\n    var doc = source;\n    if (doc.services === undefined) {\n        throw new Error('Document formatting is incorrect. Expecting \"services\" param.');\n    }\n    return doc.services;\n}\nmodule.exports = CallCapturer;\n", "\"use strict\";\nvar CallCapturer = require('../../patchers/call_capturer.js');\nvar capturer = new CallCapturer();\n/**\n * Represents a AWS client call. Automatically captures data from the supplied response object,\n * Data captured depends on the whitelisting file supplied.\n * The base whitelisting file can be found at /lib/resources/aws_whitelist.json.\n * @constructor\n * @param {any} res - The response object from the AWS call. Typed as any to avoid AWS SDK dependency. Otherwise would be AWS.Response.\n * @param {string} serviceName - The service name of the AWS client.\n * @see https://github.com/aws/aws-sdk-js/blob/master/lib/response.js\n */\nfunction Aws(res, serviceName) {\n    this.init(res, serviceName);\n}\nAws.prototype.init = function init(res, serviceName) {\n    //TODO: account ID\n    this.operation = formatOperation(res.request.operation) || '';\n    if (res && res.request && res.request.httpRequest && res.request.httpRequest.region) {\n        this.region = res.request.httpRequest.region;\n    }\n    if (res && res.requestId) {\n        this.request_id = res.requestId;\n    }\n    this.retries = res.retryCount || 0;\n    if (res.extendedRequestId && serviceName && serviceName.toLowerCase() === 's3') {\n        this.id_2 = res.extendedRequestId;\n    }\n    if (serviceName) {\n        this.addData(capturer.capture(serviceName.toLowerCase(), res));\n    }\n};\nAws.prototype.addData = function addData(data) {\n    for (var attribute in data) {\n        this[attribute] = data[attribute];\n    }\n};\n/**\n * Overrides the default whitelisting file to specify what params to capture on each AWS Service call.\n * @param {string|Object} source - The path to the custom whitelist file, or a whitelist source JSON object.\n * @exports setAWSWhitelist\n */\nvar setAWSWhitelist = function setAWSWhitelist(source) {\n    if (!source || source instanceof String || !(typeof source === 'string' || (source instanceof Object))) {\n        throw new Error('Please specify a path to the local whitelist file, or supply a whitelist source object.');\n    }\n    capturer = new CallCapturer(source);\n};\n/**\n * Appends to the default whitelisting file to specify what params to capture on each AWS Service call.\n * @param {string|Object} source - The path to the custom whitelist file, or a whitelist source JSON object.\n * @exports appendAWSWhitelist\n */\nvar appendAWSWhitelist = function appendAWSWhitelist(source) {\n    if (!source || source instanceof String || !(typeof source === 'string' || (source instanceof Object))) {\n        throw new Error('Please specify a path to the local whitelist file, or supply a whitelist source object.');\n    }\n    capturer.append(source);\n};\nfunction formatOperation(operation) {\n    if (!operation) {\n        return;\n    }\n    return operation.charAt(0).toUpperCase() + operation.slice(1);\n}\nmodule.exports = Aws;\nmodule.exports.appendAWSWhitelist = appendAWSWhitelist;\nmodule.exports.setAWSWhitelist = setAWSWhitelist;\n", "\"use strict\";\n/**\n * Capture module.\n * @module capture\n */\nvar contextUtils = require('./context_utils');\nvar logger = require('./logger');\n/**\n * Wrap to automatically capture information for the segment.\n * @param {string} name - The name of the new subsegment.\n * @param {function} fcn - The function context to wrap. Can take a single 'subsegment' argument.\n * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n * @alias module:capture.captureFunc\n * @return {*} - Returns the result if any by executing the provided function.\n */\nvar captureFunc = function captureFunc(name, fcn, parent) {\n    validate(name, fcn);\n    var current, executeFcn;\n    var parentSeg = contextUtils.resolveSegment(parent);\n    if (!parentSeg) {\n        logger.getLogger().warn('Failed to capture function.');\n        return fcn();\n    }\n    current = parentSeg.addNewSubsegment(name);\n    executeFcn = captureFcn(fcn, current);\n    try {\n        const response = executeFcn(current);\n        current.close();\n        return response;\n    }\n    catch (e) {\n        current.close(e);\n        throw (e);\n    }\n};\n/**\n * Wrap to automatically capture information for the sub/segment.  You must close the segment\n * manually from within the function.\n * @param {string} name - The name of the new subsegment.\n * @param {function} fcn - The function context to wrap. Must take a single 'subsegment' argument and call 'subsegment.close([optional error])' when the async function completes.\n * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n * @alias module:capture.captureAsyncFunc\n * @return {*} - Returns a promise by executing the provided async function.\n */\nvar captureAsyncFunc = function captureAsyncFunc(name, fcn, parent) {\n    validate(name, fcn);\n    var current, executeFcn;\n    var parentSeg = contextUtils.resolveSegment(parent);\n    if (!parentSeg) {\n        logger.getLogger().warn('Failed to capture async function.');\n        return fcn();\n    }\n    current = parentSeg.addNewSubsegment(name);\n    executeFcn = captureFcn(fcn, current);\n    try {\n        return executeFcn(current);\n    }\n    catch (e) {\n        current.close(e);\n        throw (e);\n    }\n};\n/**\n * Wrap to automatically capture information for the sub/segment. This wraps the callback and returns a function.\n * when executed, all arguments are passed through accordingly. An additional argument is appended to gain access to the newly created subsegment.\n * For this reason, always call the captured callback with the full list of arguments.\n * @param {string} name - The name of the new subsegment.\n * @param {function} fcn - The function context to wrap. Can take a single 'subsegment' argument.\n * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n * @alias module:capture.captureCallbackFunc\n */\nvar captureCallbackFunc = function captureCallbackFunc(name, fcn, parent) {\n    validate(name, fcn);\n    var base = contextUtils.resolveSegment(parent);\n    if (!base) {\n        logger.getLogger().warn('Failed to capture callback function.');\n        return fcn;\n    }\n    base.incrementCounter();\n    return function () {\n        var parentSeg = contextUtils.resolveSegment(parent);\n        var args = Array.prototype.slice.call(arguments);\n        captureFunc(name, fcn.bind.apply(fcn, [null].concat(args)), parentSeg);\n        base.decrementCounter();\n    }.bind(this);\n};\nfunction captureFcn(fcn, current) {\n    var executeFcn;\n    if (contextUtils.isAutomaticMode()) {\n        var session = contextUtils.getNamespace();\n        var contextFcn = function () {\n            var value;\n            session.run(function () {\n                contextUtils.setSegment(current);\n                value = fcn(current);\n            });\n            return value;\n        };\n        executeFcn = contextFcn;\n    }\n    else {\n        executeFcn = fcn;\n    }\n    return executeFcn;\n}\nfunction validate(name, fcn) {\n    var error;\n    if (!name || typeof name !== 'string') {\n        error = 'Param \"name\" must be a non-empty string.';\n        logger.getLogger().error(error);\n        throw new Error(error);\n    }\n    else if (typeof fcn !== 'function') {\n        error = 'Param \"fcn\" must be a function.';\n        logger.getLogger().error(error);\n        throw new Error(error);\n    }\n}\nmodule.exports.captureFunc = captureFunc;\nmodule.exports.captureAsyncFunc = captureAsyncFunc;\nmodule.exports.captureCallbackFunc = captureCallbackFunc;\n", "'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a === b ? 0 : a < b ? -1 : 1\n  }\n\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    if (this.major < other.major) {\n      return -1\n    }\n    if (this.major > other.major) {\n      return 1\n    }\n    if (this.minor < other.minor) {\n      return -1\n    }\n    if (this.minor > other.minor) {\n      return 1\n    }\n    if (this.patch < other.patch) {\n      return -1\n    }\n    if (this.patch > other.patch) {\n      return 1\n    }\n    return 0\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n", "'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n", "'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n", "'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n", "'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n", "'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n", "'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n", "'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  comp = comp.replace(re[t.BUILD], '')\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n", "'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n", "'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n", "'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n", "'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n", "'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n", "\"use strict\";\n/**\n * Capture module.\n * @module aws_p\n */\nvar semver = require('semver');\nvar Aws = require('../segments/attributes/aws');\nvar contextUtils = require('../context_utils');\nvar Utils = require('../utils');\nvar logger = require('../logger');\nvar minVersion = '2.7.15';\nvar throttledErrorDefault = function throttledErrorDefault() {\n    return false; // If the customer doesn't provide an aws-sdk with a throttled error function, we can't make assumptions.\n};\n/**\n * Configures the AWS SDK to automatically capture information for the segment.\n * All created clients will automatically be captured.  See 'captureAWSClient'\n * for additional details.\n * @param {AWS} awssdk - The Javascript AWS SDK.\n * @alias module:aws_p.captureAWS\n * @returns {AWS}\n * @see https://github.com/aws/aws-sdk-js\n */\nvar captureAWS = function captureAWS(awssdk) {\n    if (!semver.gte(awssdk.VERSION, minVersion)) {\n        throw new Error('AWS SDK version ' + minVersion + ' or greater required.');\n    }\n    for (var prop in awssdk) {\n        if (awssdk[prop].serviceIdentifier) {\n            var Service = awssdk[prop];\n            Service.prototype.customizeRequests(captureAWSRequest);\n        }\n    }\n    return awssdk;\n};\n/**\n * Configures any AWS Client instance to automatically capture information for the segment.\n * For manual mode, a param with key called 'Segment' is required as a part of the AWS\n * call paramaters, and must reference a Segment or Subsegment object.\n * @param {AWS.Service} service - An instance of a AWS service to wrap.\n * @alias module:aws_p.captureAWSClient\n * @returns {AWS.Service}\n * @see https://github.com/aws/aws-sdk-js\n */\nvar captureAWSClient = function captureAWSClient(service) {\n    service.customizeRequests(captureAWSRequest);\n    return service;\n};\nfunction captureAWSRequest(req) {\n    var parent = contextUtils.resolveSegment(contextUtils.resolveManualSegmentParams(req.params));\n    if (!parent) {\n        var output = this.serviceIdentifier + '.' + req.operation;\n        if (!contextUtils.isAutomaticMode()) {\n            logger.getLogger().info('Call ' + output + ' requires a segment object' +\n                ' on the request params as \"XRaySegment\" for tracing in manual mode. Ignoring.');\n        }\n        else {\n            logger.getLogger().info('Call ' + output +\n                ' is missing the sub/segment context for automatic mode. Ignoring.');\n        }\n        return req;\n    }\n    var throttledError = this.throttledError || throttledErrorDefault;\n    var stack = (new Error()).stack;\n    let subsegment;\n    if (parent.notTraced) {\n        subsegment = parent.addNewSubsegmentWithoutSampling(this.serviceIdentifier);\n    }\n    else {\n        subsegment = parent.addNewSubsegment(this.serviceIdentifier);\n    }\n    var traceId = parent.segment ? parent.segment.trace_id : parent.trace_id;\n    const data = parent.segment ? parent.segment.additionalTraceData : parent.additionalTraceData;\n    var buildListener = function (req) {\n        if (parent.noOp) {\n            return;\n        }\n        let traceHeader = 'Root=' + traceId + ';Parent=' + subsegment.id +\n            ';Sampled=' + (subsegment.notTraced ? '0' : '1');\n        if (data != null) {\n            for (const [key, value] of Object.entries(data)) {\n                traceHeader += ';' + key + '=' + value;\n            }\n        }\n        req.httpRequest.headers['X-Amzn-Trace-Id'] = traceHeader;\n    };\n    var completeListener = function (res) {\n        subsegment.addAttribute('namespace', 'aws');\n        subsegment.addAttribute('aws', new Aws(res, subsegment.name));\n        var httpRes = res.httpResponse;\n        if (httpRes) {\n            subsegment.addAttribute('http', new HttpResponse(httpRes));\n            if (httpRes.statusCode === 429 || (res.error && throttledError(res.error))) {\n                subsegment.addThrottleFlag();\n            }\n        }\n        if (res.error) {\n            var err = { message: res.error.message, name: res.error.code, stack: stack };\n            if (httpRes && httpRes.statusCode) {\n                if (Utils.getCauseTypeFromHttpStatus(httpRes.statusCode) == 'error') {\n                    subsegment.addErrorFlag();\n                }\n                subsegment.close(err, true);\n            }\n            else {\n                subsegment.close(err);\n            }\n        }\n        else {\n            if (httpRes && httpRes.statusCode) {\n                var cause = Utils.getCauseTypeFromHttpStatus(httpRes.statusCode);\n                if (cause) {\n                    subsegment[cause] = true;\n                }\n            }\n            subsegment.close();\n        }\n    };\n    req.on('beforePresign', function (req) {\n        // Only the AWS Presigner triggers this event,\n        // so we can rely on this event to notify us when\n        // a request is for a presigned url\n        parent.removeSubsegment(subsegment);\n        parent.decrementCounter();\n        req.removeListener('build', buildListener);\n        req.removeListener('complete', completeListener);\n    });\n    req.on('build', buildListener).on('complete', completeListener);\n    if (!req.__send) {\n        req.__send = req.send;\n        req.send = function (callback) {\n            if (contextUtils.isAutomaticMode()) {\n                var session = contextUtils.getNamespace();\n                session.run(function () {\n                    contextUtils.setSegment(subsegment);\n                    req.__send(callback);\n                });\n            }\n            else {\n                req.__send(callback);\n            }\n        };\n    }\n}\nfunction HttpResponse(res) {\n    this.init(res);\n}\nHttpResponse.prototype.init = function init(res) {\n    this.response = {\n        status: res.statusCode || '',\n    };\n    if (res.headers && res.headers['content-length']) {\n        this.response.content_length = res.headers['content-length'];\n    }\n};\nmodule.exports.captureAWSClient = captureAWSClient;\nmodule.exports.captureAWS = captureAWS;\n", "var __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  isClockSkewCorrectedError: () => isClockSkewCorrectedError,\n  isClockSkewError: () => isClockSkewError,\n  isRetryableByTrait: () => isRetryableByTrait,\n  isServerError: () => isServerError,\n  isThrottlingError: () => isThrottlingError,\n  isTransientError: () => isTransientError\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/constants.ts\nvar CLOCK_SKEW_ERROR_CODES = [\n  \"AuthFailure\",\n  \"InvalidSignatureException\",\n  \"RequestExpired\",\n  \"RequestInTheFuture\",\n  \"RequestTimeTooSkewed\",\n  \"SignatureDoesNotMatch\"\n];\nvar THROTTLING_ERROR_CODES = [\n  \"BandwidthLimitExceeded\",\n  \"EC2ThrottledException\",\n  \"LimitExceededException\",\n  \"PriorRequestNotComplete\",\n  \"ProvisionedThroughputExceededException\",\n  \"RequestLimitExceeded\",\n  \"RequestThrottled\",\n  \"RequestThrottledException\",\n  \"SlowDown\",\n  \"ThrottledException\",\n  \"Throttling\",\n  \"ThrottlingException\",\n  \"TooManyRequestsException\",\n  \"TransactionInProgressException\"\n  // DynamoDB\n];\nvar TRANSIENT_ERROR_CODES = [\"TimeoutError\", \"RequestTimeout\", \"RequestTimeoutException\"];\nvar TRANSIENT_ERROR_STATUS_CODES = [500, 502, 503, 504];\nvar NODEJS_TIMEOUT_ERROR_CODES = [\"ECONNRESET\", \"ECONNREFUSED\", \"EPIPE\", \"ETIMEDOUT\"];\n\n// src/index.ts\nvar isRetryableByTrait = /* @__PURE__ */ __name((error) => error.$retryable !== void 0, \"isRetryableByTrait\");\nvar isClockSkewError = /* @__PURE__ */ __name((error) => CLOCK_SKEW_ERROR_CODES.includes(error.name), \"isClockSkewError\");\nvar isClockSkewCorrectedError = /* @__PURE__ */ __name((error) => {\n  var _a;\n  return (_a = error.$metadata) == null ? void 0 : _a.clockSkewCorrected;\n}, \"isClockSkewCorrectedError\");\nvar isThrottlingError = /* @__PURE__ */ __name((error) => {\n  var _a, _b;\n  return ((_a = error.$metadata) == null ? void 0 : _a.httpStatusCode) === 429 || THROTTLING_ERROR_CODES.includes(error.name) || ((_b = error.$retryable) == null ? void 0 : _b.throttling) == true;\n}, \"isThrottlingError\");\nvar isTransientError = /* @__PURE__ */ __name((error) => {\n  var _a;\n  return isClockSkewCorrectedError(error) || TRANSIENT_ERROR_CODES.includes(error.name) || NODEJS_TIMEOUT_ERROR_CODES.includes((error == null ? void 0 : error.code) || \"\") || TRANSIENT_ERROR_STATUS_CODES.includes(((_a = error.$metadata) == null ? void 0 : _a.httpStatusCode) || 0);\n}, \"isTransientError\");\nvar isServerError = /* @__PURE__ */ __name((error) => {\n  var _a;\n  if (((_a = error.$metadata) == null ? void 0 : _a.httpStatusCode) !== void 0) {\n    const statusCode = error.$metadata.httpStatusCode;\n    if (500 <= statusCode && statusCode <= 599 && !isTransientError(error)) {\n      return true;\n    }\n    return false;\n  }\n  return false;\n}, \"isServerError\");\n// Annotate the CommonJS export names for ESM import in node:\n\n0 && (module.exports = {\n  isRetryableByTrait,\n  isClockSkewError,\n  isClockSkewCorrectedError,\n  isThrottlingError,\n  isTransientError,\n  isServerError\n});\n\n", "\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.captureAWSClient = void 0;\nconst service_error_classification_1 = require(\"@smithy/service-error-classification\");\nconst aws_1 = __importDefault(require(\"../segments/attributes/aws\"));\nconst querystring_1 = require(\"querystring\");\nconst subsegment_1 = __importDefault(require(\"../segments/attributes/subsegment\"));\nconst contextUtils = require('../context_utils');\nconst logger = require('../logger');\nconst { safeParseInt } = require('../utils');\nconst utils_1 = require(\"../utils\");\nconst XRAY_PLUGIN_NAME = 'XRaySDKInstrumentation';\nconst buildAttributesFromMetadata = async (service, operation, region, commandInput, res, error) => {\n    var _a, _b, _c;\n    const { extendedRequestId, requestId, httpStatusCode: statusCode, attempts } = ((_a = res === null || res === void 0 ? void 0 : res.output) === null || _a === void 0 ? void 0 : _a.$metadata) || (error === null || error === void 0 ? void 0 : error.$metadata);\n    const aws = new aws_1.default({\n        extendedRequestId,\n        requestId,\n        retryCount: attempts,\n        data: res === null || res === void 0 ? void 0 : res.output,\n        request: {\n            operation,\n            params: commandInput,\n            httpRequest: {\n                region,\n                statusCode,\n            },\n        },\n    }, service);\n    const http = {};\n    if (statusCode) {\n        http.response = {};\n        http.response.status = statusCode;\n    }\n    if (((_b = res === null || res === void 0 ? void 0 : res.response) === null || _b === void 0 ? void 0 : _b.headers) && ((_c = res === null || res === void 0 ? void 0 : res.response) === null || _c === void 0 ? void 0 : _c.headers['content-length']) !== undefined) {\n        if (!http.response) {\n            http.response = {};\n        }\n        http.response.content_length = safeParseInt(res.response.headers['content-length']);\n    }\n    return [aws, http];\n};\nfunction addFlags(http, subsegment, err) {\n    var _a, _b, _c;\n    if (err && (0, service_error_classification_1.isThrottlingError)(err)) {\n        subsegment.addThrottleFlag();\n    }\n    else if (safeParseInt((_a = http.response) === null || _a === void 0 ? void 0 : _a.status) === 429 || safeParseInt((_b = err === null || err === void 0 ? void 0 : err.$metadata) === null || _b === void 0 ? void 0 : _b.httpStatusCode) === 429) {\n        subsegment.addThrottleFlag();\n    }\n    const cause = (0, utils_1.getCauseTypeFromHttpStatus)(safeParseInt((_c = http.response) === null || _c === void 0 ? void 0 : _c.status));\n    if (cause === 'fault') {\n        subsegment.addFaultFlag();\n    }\n    else if (cause === 'error') {\n        subsegment.addErrorFlag();\n    }\n}\nconst getXRayMiddleware = (config, manualSegment) => (next, context) => async (args) => {\n    var _a;\n    const segment = contextUtils.isAutomaticMode() ? contextUtils.resolveSegment() : manualSegment;\n    const { clientName, commandName } = context;\n    const commandInput = (_a = args === null || args === void 0 ? void 0 : args.input) !== null && _a !== void 0 ? _a : {};\n    const commandOperation = commandName.slice(0, -7); // Strip trailing \"Command\" string\n    const operation = commandOperation.charAt(0).toLowerCase() + commandOperation.slice(1);\n    const service = clientName.slice(0, -6); // Strip trailing \"Client\" string\n    if (!segment) {\n        const output = service + '.' + operation;\n        if (!contextUtils.isAutomaticMode()) {\n            logger.getLogger().info('Call ' + output + ' requires a segment object' +\n                ' passed to captureAWSv3Client for tracing in manual mode. Ignoring.');\n        }\n        else {\n            logger.getLogger().info('Call ' + output +\n                ' is missing the sub/segment context for automatic mode. Ignoring.');\n        }\n        return next(args);\n    }\n    let subsegment;\n    if (segment.notTraced) {\n        subsegment = segment.addNewSubsegmentWithoutSampling(service);\n    }\n    else {\n        subsegment = segment.addNewSubsegment(service);\n    }\n    subsegment.addAttribute('namespace', 'aws');\n    const parent = (segment instanceof subsegment_1.default ? segment.segment : segment);\n    const data = parent.segment ? parent.segment.additionalTraceData : parent.additionalTraceData;\n    let traceHeader = (0, querystring_1.stringify)({\n        Root: parent.trace_id,\n        Parent: subsegment.id,\n        Sampled: subsegment.notTraced ? '0' : '1',\n    }, ';');\n    if (data != null) {\n        for (const [key, value] of Object.entries(data)) {\n            traceHeader += ';' + key + '=' + value;\n        }\n    }\n    if (!segment.noOp) {\n        args.request.headers['X-Amzn-Trace-Id'] = traceHeader;\n    }\n    let res;\n    try {\n        res = await next(args);\n        if (!res) {\n            throw new Error('Failed to get response from instrumented AWS Client.');\n        }\n        const [aws, http] = await buildAttributesFromMetadata(service, operation, await config.region(), commandInput, res, null);\n        subsegment.addAttribute('aws', aws);\n        subsegment.addAttribute('http', http);\n        addFlags(http, subsegment);\n        subsegment.close();\n        return res;\n    }\n    catch (err) {\n        if (err.$metadata) {\n            const [aws, http] = await buildAttributesFromMetadata(service, operation, await config.region(), commandInput, null, err);\n            subsegment.addAttribute('aws', aws);\n            subsegment.addAttribute('http', http);\n            addFlags(http, subsegment, err);\n        }\n        const errObj = { message: err.message, name: err.name, stack: err.stack || new Error().stack };\n        subsegment.close(errObj, true);\n        throw err;\n    }\n};\nconst xRayMiddlewareOptions = {\n    name: XRAY_PLUGIN_NAME,\n    step: 'build',\n};\nconst getXRayPlugin = (config, manualSegment) => ({\n    applyToStack: (stack) => {\n        stack.add(getXRayMiddleware(config, manualSegment), xRayMiddlewareOptions);\n    },\n});\n/**\n * Instruments AWS SDK V3 clients with X-Ray via middleware.\n *\n * @param client - AWS SDK V3 client to instrument\n * @param manualSegment - Parent segment or subsegment that is passed in for manual mode users\n * @returns - the client with the X-Ray instrumentation middleware added to its middleware stack\n */\nfunction captureAWSClient(client, manualSegment) {\n    // Remove existing middleware to ensure operation is idempotent\n    client.middlewareStack.remove(XRAY_PLUGIN_NAME);\n    client.middlewareStack.use(getXRayPlugin(client.config, manualSegment));\n    return client;\n}\nexports.captureAWSClient = captureAWSClient;\n", "\"use strict\";\n/**\n * @module http_p\n */\n/**\n * This module patches the HTTP and HTTPS node built-in libraries and returns a copy of the module with tracing enabled.\n */\nvar url = require('url');\nvar contextUtils = require('../context_utils');\nvar Utils = require('../utils');\nvar logger = require('../logger');\nvar events = require('events');\n/**\n * Wraps the http/https.request() and .get() calls to automatically capture information for the segment.\n * This patches the built-in HTTP and HTTPS modules globally. If using a 3rd party HTTP library,\n * it should still use HTTP under the hood. Be sure to patch globally before requiring the 3rd party library.\n * 3rd party library compatibility is best effort. Some incompatibility issues may arise.\n * @param {http|https} module - The built in Node.js HTTP or HTTPS module.\n * @param {boolean} downstreamXRayEnabled - when true, adds a \"traced:true\" property to the subsegment\n *   so the AWS X-Ray service expects a corresponding segment from the downstream service.\n * @param {function} subsegmentCallback - a callback that is called with the subsegment, the Node.js\n *   http.ClientRequest, the Node.js http.IncomingMessage (if a response was received) and any error issued,\n *   allowing custom annotations and metadata to be added.\n *   to be added to the subsegment.\n * @alias module:http_p.captureHTTPsGlobal\n */\nvar captureHTTPsGlobal = function captureHTTPsGlobal(module, downstreamXRayEnabled, subsegmentCallback) {\n    if (!module.__request) {\n        enableCapture(module, downstreamXRayEnabled, subsegmentCallback);\n    }\n};\n/**\n * Wraps the http/https.request() and .get() calls to automatically capture information for the segment.\n * Returns an instance of the HTTP or HTTPS module that is patched.\n * @param {http|https} module - The built in Node.js HTTP or HTTPS module.\n * @param {boolean} downstreamXRayEnabled - when true, adds a \"traced:true\" property to the subsegment\n *   so the AWS X-Ray service expects a corresponding segment from the downstream service.\n * @param {function} subsegmentCallback - a callback that is called with the subsegment, the Node.js\n *   http.ClientRequest, and the Node.js http.IncomingMessage to allow custom annotations and metadata\n *   to be added to the subsegment.\n * @alias module:http_p.captureHTTPs\n * @returns {http|https}\n */\nvar captureHTTPs = function captureHTTPs(module, downstreamXRayEnabled, subsegmentCallback) {\n    if (module.__request) {\n        return module;\n    }\n    var tracedModule = {};\n    Object.keys(module).forEach(function (val) {\n        tracedModule[val] = module[val];\n    });\n    enableCapture(tracedModule, downstreamXRayEnabled, subsegmentCallback);\n    return tracedModule;\n};\nfunction enableCapture(module, downstreamXRayEnabled, subsegmentCallback) {\n    function captureOutgoingHTTPs(baseFunc, ...args) {\n        let options;\n        let callback;\n        let hasUrl;\n        let urlObj;\n        let arg0 = args[0];\n        if (typeof args[1] === 'object') {\n            hasUrl = true;\n            urlObj = typeof arg0 === 'string' ? new url.URL(arg0) : arg0;\n            options = args[1],\n                callback = args[2];\n        }\n        else {\n            hasUrl = false;\n            options = arg0;\n            callback = args[1];\n        }\n        // Short circuit if the HTTP request has no options or is already being captured\n        if (!options || (options.headers && (options.headers['X-Amzn-Trace-Id']))) {\n            return baseFunc(...args);\n        }\n        // Case of calling a string URL without options, e.g.: http.request('http://amazon.com', callback)\n        if (typeof options === 'string') {\n            options = new url.URL(options);\n        }\n        if (!hasUrl) {\n            urlObj = options;\n        }\n        const parent = contextUtils.resolveSegment(contextUtils.resolveManualSegmentParams(options));\n        const hostname = options.hostname || options.host || urlObj.hostname || urlObj.host || 'Unknown host';\n        if (!parent) {\n            let output = '[ host: ' + hostname;\n            output = options.method ? (output + ', method: ' + options.method) : output;\n            output += ', path: ' + (urlObj.pathname || Utils.stripQueryStringFromPath(options.path)) + ' ]';\n            if (!contextUtils.isAutomaticMode()) {\n                logger.getLogger().info('Options for request ' + output +\n                    ' requires a segment object on the options params as \"XRaySegment\" for tracing in manual mode. Ignoring.');\n            }\n            else {\n                logger.getLogger().info('Options for request ' + output +\n                    ' is missing the sub/segment context for automatic mode. Ignoring.');\n            }\n            // Options are not modified, only parsed for logging. We can pass in the original arguments.\n            return baseFunc(...args);\n        }\n        let subsegment;\n        if (parent.notTraced) {\n            subsegment = parent.addNewSubsegmentWithoutSampling(hostname);\n        }\n        else {\n            subsegment = parent.addNewSubsegment(hostname);\n        }\n        const root = parent.segment ? parent.segment : parent;\n        subsegment.namespace = 'remote';\n        if (!options.headers) {\n            options.headers = {};\n        }\n        if (!parent.noOp) {\n            options.headers['X-Amzn-Trace-Id'] = 'Root=' + root.trace_id + ';Parent=' + subsegment.id +\n                ';Sampled=' + (subsegment.notTraced ? '0' : '1');\n        }\n        const errorCapturer = function errorCapturer(e) {\n            if (subsegmentCallback) {\n                subsegmentCallback(subsegment, this, null, e);\n            }\n            if (subsegment.http && subsegment.http.response) {\n                if (Utils.getCauseTypeFromHttpStatus(subsegment.http.response.status) === 'error') {\n                    subsegment.addErrorFlag();\n                }\n                subsegment.close(e, true);\n            }\n            else {\n                const madeItToDownstream = (e.code !== 'ECONNREFUSED');\n                subsegment.addRemoteRequestData(this, null, madeItToDownstream && downstreamXRayEnabled);\n                subsegment.close(e);\n            }\n        };\n        const optionsCopy = Utils.objectWithoutProperties(options, ['Segment'], true);\n        let req = baseFunc(...(hasUrl ? [arg0, optionsCopy] : [options]), function (res) {\n            res.on('end', function () {\n                if (subsegmentCallback) {\n                    subsegmentCallback(subsegment, this.req, res);\n                }\n                if (res.statusCode === 429) {\n                    subsegment.addThrottleFlag();\n                }\n                const cause = Utils.getCauseTypeFromHttpStatus(res.statusCode);\n                if (cause) {\n                    subsegment[cause] = true;\n                }\n                subsegment.addRemoteRequestData(res.req, res, !!downstreamXRayEnabled);\n                subsegment.close();\n            });\n            if (typeof callback === 'function') {\n                if (contextUtils.isAutomaticMode()) {\n                    const session = contextUtils.getNamespace();\n                    session.run(function () {\n                        contextUtils.setSegment(subsegment);\n                        callback(res);\n                    });\n                }\n                else {\n                    callback(res);\n                }\n                // if no callback provided by user application, AND no explicit response listener\n                // added by user application, then we consume the response so the 'end' event fires\n                // See: https://nodejs.org/api/http.html#http_class_http_clientrequest\n            }\n            else if (res.req && res.req.listenerCount('response') === 0) {\n                res.resume();\n            }\n        });\n        // Use errorMonitor if available (in Node 12.17+), otherwise fall back to standard error listener\n        // See: https://nodejs.org/dist/latest-v12.x/docs/api/events.html#events_eventemitter_errormonitor\n        req.on(events.errorMonitor || 'error', errorCapturer);\n        return req;\n    }\n    module.__request = module.request;\n    function captureHTTPsRequest(...args) {\n        return captureOutgoingHTTPs(module.__request, ...args);\n    }\n    module.__get = module.get;\n    function captureHTTPsGet(...args) {\n        return captureOutgoingHTTPs(module.__get, ...args);\n    }\n    Object.defineProperties(module, {\n        request: { value: captureHTTPsRequest, configurable: true, enumerable: true, writable: true },\n        get: { value: captureHTTPsGet, configurable: true, enumerable: true, writable: true },\n    });\n}\nmodule.exports.captureHTTPsGlobal = captureHTTPsGlobal;\nmodule.exports.captureHTTPs = captureHTTPs;\n", "\"use strict\";\n/**\n * @module promise_p\n */\n/**\n * This module patches native Promise libraries provided by V8 engine\n * so all subsegments generated within Promise are attached to the correct parent.\n */\nconst contextUtils = require('../context_utils');\nconst originalThen = Symbol('original then');\nconst originalCatch = Symbol('original catch');\nfunction patchPromise(Promise) {\n    const then = Promise.prototype.then;\n    if (!then[originalThen]) {\n        Promise.prototype.then = function (onFulfilled, onRejected) {\n            if (contextUtils.isAutomaticMode()\n                && tryGetCurrentSegment()) {\n                const ns = contextUtils.getNamespace();\n                onFulfilled = onFulfilled && ns.bind(onFulfilled);\n                onRejected = onRejected && ns.bind(onRejected);\n            }\n            return then.call(this, onFulfilled, onRejected);\n        };\n        Promise.prototype.then[originalThen] = then;\n    }\n    const origCatch = Promise.prototype.catch;\n    if (origCatch && !origCatch[originalCatch]) {\n        Promise.prototype.catch = function (onRejected) {\n            if (contextUtils.isAutomaticMode()\n                && tryGetCurrentSegment()) {\n                const ns = contextUtils.getNamespace();\n                onRejected = onRejected && ns.bind(onRejected);\n            }\n            return origCatch.call(this, onRejected);\n        };\n        Promise.prototype.catch[originalCatch] = origCatch;\n    }\n}\nfunction unpatchPromise(Promise) {\n    const then = Promise.prototype.then;\n    if (then[originalThen]) {\n        Promise.prototype.then = then[originalThen];\n    }\n    const origCatch = Promise.prototype.catch;\n    if (origCatch && origCatch[originalCatch]) {\n        Promise.prototype.catch = origCatch[originalCatch];\n    }\n}\nfunction tryGetCurrentSegment() {\n    try {\n        return contextUtils.getSegment();\n    }\n    catch (e) {\n        return undefined;\n    }\n}\nfunction capturePromise() {\n    patchPromise(Promise);\n}\nfunction uncapturePromise() {\n    unpatchPromise(Promise);\n}\ncapturePromise.patchThirdPartyPromise = patchPromise;\nmodule.exports.capturePromise = capturePromise;\nmodule.exports.uncapturePromise = uncapturePromise;\n", "\"use strict\";\n/**\n * Represents a SQL database call.\n * @constructor\n * @param {string} databaseVer - The version on the database (user supplied).\n * @param {string} driverVer - The version on the database driver (user supplied).\n * @param {string} user - The user associated to the database call.\n * @param {string} queryType - The SQL query type.\n */\nfunction SqlData(databaseVer, driverVer, user, url, queryType) {\n    this.init(databaseVer, driverVer, user, url, queryType);\n}\nSqlData.prototype.init = function init(databaseVer, driverVer, user, url, queryType) {\n    if (databaseVer) {\n        this.database_version = databaseVer;\n    }\n    if (driverVer) {\n        this.driver_version = driverVer;\n    }\n    if (queryType) {\n        this.preparation = queryType;\n    }\n    this.url = url;\n    this.user = user;\n};\nmodule.exports = SqlData;\n", "\"use strict\";\nvar contextUtils = require('./context_utils');\nvar logging = require('./logger');\nvar segmentUtils = require('./segments/segment_utils');\nvar utils = require('./utils');\nvar LambdaEnv = require('./env/aws_lambda');\n// Import Data from package.json,\n// If the importing of package.json fails leave\n// pkginfo as an empty object\nvar pkginfo = {};\ntry {\n    pkginfo = require('../../package.json');\n}\ncatch (err) {\n    logging.getLogger().debug('Failed to load SDK data:', err);\n}\nvar UNKNOWN = 'unknown';\n/**\n * A module representing the AWSXRay SDK.\n * @namespace AWSXRay\n */\nvar AWSXRay = {\n    /**\n     * @memberof AWSXRay\n     * @type {object}\n     * @namespace AWSXRay.plugins\n     */\n    plugins: {\n        /**\n         * Exposes the AWS EC2 plugin.\n         * @memberof AWSXRay.plugins\n         */\n        EC2Plugin: require('./segments/plugins/ec2_plugin'),\n        /**\n         * Exposes the AWS ECS plugin.\n         * @memberof AWSXRay.plugins\n         */\n        ECSPlugin: require('./segments/plugins/ecs_plugin'),\n        /**\n         * Exposes the AWS Elastic Beanstalk plugin.\n         * @memberof AWSXRay.plugins\n         */\n        ElasticBeanstalkPlugin: require('./segments/plugins/elastic_beanstalk_plugin'),\n    },\n    /**\n     * Enables use of plugins to capture additional data for segments.\n     * @param {Array} plugins - A configurable subset of AWSXRay.plugins.\n     * @memberof AWSXRay\n     * @see AWSXRay.plugins\n     */\n    config: function (plugins) {\n        var pluginData = {};\n        plugins.forEach(function (plugin) {\n            plugin.getData(function (data) {\n                if (data) {\n                    for (var attribute in data) {\n                        pluginData[attribute] = data[attribute];\n                    }\n                }\n            });\n            segmentUtils.setOrigin(plugin.originName);\n            segmentUtils.setPluginData(pluginData);\n        });\n    },\n    /**\n     * Overrides the default whitelisting file to specify what params to capture on each AWS Service call.\n     * If a service or API is not listed, no additional data is captured.\n     * The base whitelisting file can be found at /lib/resources/aws_whitelist.json\n     * @param {string|Object} source - The path to the custom whitelist file, or a whitelist source JSON object.\n     * @memberof AWSXRay\n     */\n    setAWSWhitelist: require('./segments/attributes/aws').setAWSWhitelist,\n    /**\n     * Appends to the current whitelisting file.\n     * In the case of a duplicate service API listed, the new source will override the previous values.\n     * @param {string|Object} source - The path to the custom whitelist file, or a whitelist source JSON object.\n     * @memberof AWSXRay\n     */\n    appendAWSWhitelist: require('./segments/attributes/aws').appendAWSWhitelist,\n    /**\n     * Overrides the default streaming threshold (100).\n     * The threshold represents the maximum number of subsegments on a single segment before\n     * the SDK begins to send the completed subsegments out of band of the main segment.\n     * Reduce this threshold if you see the 'Segment too large to send' error.\n     * @param {number} threshold - The new threshold to use.\n     * @memberof AWSXRay\n     */\n    setStreamingThreshold: segmentUtils.setStreamingThreshold,\n    /**\n     * Set your own logger for the SDK.\n     * @param {Object} logger - A logger which responds to debug/info/warn/error calls.\n     * @memberof AWSXRay\n     */\n    setLogger: logging.setLogger,\n    /**\n     * Gets the set logger for the SDK.\n     * @memberof AWSXRay\n     */\n    getLogger: logging.getLogger,\n    /**\n     * Configures the address and port the daemon is expected to be on.\n     * @param {string} address - Address of the daemon the segments should be sent to.  Expects 'x.x.x.x', ':yyyy' or 'x.x.x.x:yyyy' IPv4 formats.\n     * @module DaemonConfig\n     * @memberof AWSXRay\n     * @function\n     * @see module:DaemonConfig.setDaemonAddress\n     */\n    setDaemonAddress: require('./daemon_config').setDaemonAddress,\n    /**\n     * @param {string} name - The name of the new subsegment.\n     * @param {function} fcn - The function conext to wrap.\n     * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n     * @memberof AWSXRay\n     * @function\n     * @see module:capture.captureFunc\n     */\n    captureFunc: require('./capture').captureFunc,\n    /**\n     * @param {string} name - The name of the new subsegment.\n     * @param {function} fcn - The function conext to wrap.\n     * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n     * @memberof AWSXRay\n     * @function\n     * @see module:capture.captureAsyncFunc\n     */\n    captureAsyncFunc: require('./capture').captureAsyncFunc,\n    /**\n     * @param {string} name - The name of the new subsegment.\n     * @param {function} fcn - The function conext to wrap.\n     * @param {Segment|Subsegment} [parent] - The parent for the new subsegment, for manual mode.\n     * @memberof AWSXRay\n     * @function\n     * @see module:capture.captureCallbackFunc\n     */\n    captureCallbackFunc: require('./capture').captureCallbackFunc,\n    /**\n     * @param {AWS} awssdk - The Javascript AWS SDK.\n     * @memberof AWSXRay\n     * @function\n     * @see module:aws_p.captureAWS\n     */\n    captureAWS: require('./patchers/aws_p').captureAWS,\n    /**\n     * @param {AWS.Service} service - An instance of a AWS service to wrap.\n     * @memberof AWSXRay\n     * @function\n     * @see module:aws_p.captureAWSClient\n     */\n    captureAWSClient: require('./patchers/aws_p').captureAWSClient,\n    /**\n     * @param {AWSv3.Service} service - An instance of a AWS SDK v3 service to wrap.\n     * @param {Segment|Subsegment} segment - Optional segment for manual mode.\n     * @memberof AWSXRay\n     * @function\n     * @see module:aws3_p.captureAWSClient\n     */\n    captureAWSv3Client: require('./patchers/aws3_p').captureAWSClient,\n    /**\n     * @param {http|https} module - The built in Node.js HTTP or HTTPS module.\n     * @memberof AWSXRay\n     * @function\n     * @returns {http|https}\n     * @see module:http_p.captureHTTPs\n     */\n    captureHTTPs: require('./patchers/http_p').captureHTTPs,\n    /**\n     * @param {http|https} module - The built in Node.js HTTP or HTTPS module.\n     * @memberof AWSXRay\n     * @function\n     * @see module:http_p.captureHTTPsGlobal\n     */\n    captureHTTPsGlobal: require('./patchers/http_p').captureHTTPsGlobal,\n    /**\n     * @memberof AWSXRay\n     * @function\n     * @see module:promise_p.capturePromise\n     */\n    capturePromise: require('./patchers/promise_p').capturePromise,\n    /**\n     * Exposes various helper methods.\n     * @memberof AWSXRay\n     * @function\n     * @see module:utils\n     */\n    utils: utils,\n    /**\n     * @memberof AWSXRay\n     * @type {object}\n     * @namespace AWSXRay.database\n     */\n    database: {\n        /**\n         * Exposes the SqlData class.\n         * @memberof AWSXRay.database\n         * @see SqlData\n         */\n        SqlData: require('./database/sql_data'),\n    },\n    /**\n     * Exposes the Middleware Utils class.\n     * @memberof AWSXRay\n     * @function\n     * @see module:mw_utils\n     */\n    middleware: require('./middleware/mw_utils'),\n    /**\n     * Gets the current namespace of the context.\n     * Used for supporting functions that can be used in automatic mode.\n     * @memberof AWSXRay\n     * @function\n     * @returns {Segment|Subsegment}\n     * @see module:context_utils.getNamespace\n     */\n    getNamespace: contextUtils.getNamespace,\n    /**\n     * Resolves the current segment or subsegment, checks manual and automatic modes.\n     * Used for supporting functions that can be used in both manual and automatic modes.\n     * @memberof AWSXRay\n     * @function\n     * @returns {Segment|Subsegment}\n     * @see module:context_utils.resolveSegment\n     */\n    resolveSegment: contextUtils.resolveSegment,\n    /**\n     * Resolves the segment or subsegment given manual mode and params on the call required.\n     * @param [Segment|Subsegment] segment - The segment manually provided via params.XraySegment, if provided.\n     * @memberof AWSXRay\n     * @function\n     * @returns {Segment|Subsegment}\n     * @see module:context_utils.resolveManualSegmentParams\n     */\n    resolveManualSegmentParams: contextUtils.resolveManualSegmentParams,\n    /**\n     * Returns the current segment or subsegment. For use with automatic mode only.\n     * @memberof AWSXRay\n     * @function\n     * @returns {Segment|Subsegment}\n     * @see module:context_utils.getSegment\n     */\n    getSegment: contextUtils.getSegment,\n    /**\n     * Sets the current segment or subsegment.  For use with automatic mode only.\n     * @memberof AWSXRay\n     * @function\n     * @see module:context_utils.setSegment\n     */\n    setSegment: contextUtils.setSegment,\n    /**\n     * Returns true if automatic mode is enabled, otherwise false.\n     * @memberof AWSXRay\n     * @function\n     * @see module:context_utils.isAutomaticMode\n     */\n    isAutomaticMode: contextUtils.isAutomaticMode,\n    /**\n     * Enables automatic mode. Automatic mode uses 'cls-hooked'.\n     * @see https://github.com/jeff-lewis/cls-hooked\n     * @memberof AWSXRay\n     * @function\n     * @see module:context_utils.enableAutomaticMode\n     */\n    enableAutomaticMode: contextUtils.enableAutomaticMode,\n    /**\n     * Disables automatic mode. Current segment or subsegment must be passed manually\n     * via the parent optional on captureFunc, captureAsyncFunc etc.\n     * @memberof AWSXRay\n     * @function\n     * @see module:context_utils.enableManualMode\n     */\n    enableManualMode: contextUtils.enableManualMode,\n    /**\n     * Sets the context missing strategy.\n     * @param {Object} strategy - The strategy to set. This object's contextMissing function will be called whenever trace context is not found.\n     */\n    setContextMissingStrategy: contextUtils.setContextMissingStrategy,\n    /**\n     * Exposes the segment class.\n     * @memberof AWSXRay\n     * @function\n     */\n    Segment: require('./segments/segment'),\n    /**\n     * Exposes the subsegment class.\n     * @memberof AWSXRay\n     * @see Subsegment\n     */\n    Subsegment: require('./segments/attributes/subsegment'),\n    SegmentUtils: segmentUtils\n};\n/**\n * Exposes the IncomingRequestData, to capture incoming request data.\n * For use with middleware.\n * @memberof AWSXRay.middleware\n * @see IncomingRequestData\n */\nAWSXRay.middleware.IncomingRequestData = require('./middleware/incoming_request_data'),\n    (function () {\n        var data = {\n            runtime: (process.release && process.release.name) ? process.release.name : UNKNOWN,\n            runtime_version: process.version,\n            version: process.env.npm_package_version || UNKNOWN,\n            name: process.env.npm_package_name || UNKNOWN\n        };\n        var sdkData = {\n            sdk: 'X-Ray for Node.js',\n            sdk_version: pkginfo.version ? pkginfo.version : UNKNOWN,\n            package: pkginfo.name ? pkginfo.name : UNKNOWN,\n        };\n        segmentUtils.setSDKData(sdkData);\n        segmentUtils.setServiceData(data);\n        if (process.env.LAMBDA_TASK_ROOT) {\n            LambdaEnv.init();\n        }\n    })();\nmodule.exports = AWSXRay;\n", "\"use strict\";\n// Convenience file to require the SDK from the root of the repository\nmodule.exports = require('./aws-xray');\n", "/**\r\n * Nigredo Prospecting Core - List Leads Lambda\r\n * \r\n * GET /api/leads\r\n * Protected endpoint for listing leads with pagination and filters\r\n * \r\n * Requirements: 6.2, 6.4, 7.1, 7.3\r\n */\r\n\r\nimport { APIGatewayProxyEventV2, APIGatewayProxyResultV2, Context } from 'aws-lambda';\r\nimport { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\r\nimport { Logger } from '../shared/logger';\r\nimport { getClient } from '../shared/database';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport {\r\n  traceSubsegment,\r\n  traceQuery,\r\n  addAnnotations,\r\n  addMetadata,\r\n} from '../shared/xray-tracer';\r\nimport { z } from 'zod';\r\n\r\n// Initialize metrics and logger\r\nconst metrics = new Metrics({\r\n  namespace: 'Nigredo/Prospecting',\r\n  serviceName: 'nigredo-list-leads',\r\n});\r\nconst logger = new Logger('nigredo-list-leads');\r\n\r\n// Environment variables\r\nconst DEFAULT_TENANT_ID = process.env.DEFAULT_TENANT_ID || '00000000-0000-0000-0000-000000000000';\r\n\r\n// Query parameters schema\r\nconst ListLeadsQuerySchema = z.object({\r\n  page: z.coerce.number().int().min(1).default(1),\r\n  limit: z.coerce.number().int().min(1).max(100).default(20),\r\n  status: z.string().optional(),\r\n  source: z.string().optional(),\r\n  from_date: z.string().datetime().optional(),\r\n  to_date: z.string().datetime().optional(),\r\n  search: z.string().min(2).max(100).optional(),\r\n});\r\n\r\ntype ListLeadsQuery = z.infer<typeof ListLeadsQuerySchema>;\r\n\r\ninterface Lead {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  phone: string | null;\r\n  company: string | null;\r\n  message: string;\r\n  source: string | null;\r\n  utm_source: string | null;\r\n  utm_medium: string | null;\r\n  utm_campaign: string | null;\r\n  status: string;\r\n  created_at: Date;\r\n  updated_at: Date;\r\n}\r\n\r\n/**\r\n * Main Lambda handler\r\n */\r\nexport const handler = async (\r\n  event: APIGatewayProxyEventV2,\r\n  context: Context\r\n): Promise<APIGatewayProxyResultV2> => {\r\n  const correlationId = uuidv4();\r\n  \r\n  logger.updateContext({\r\n    traceId: correlationId,\r\n    requestId: context.awsRequestId,\r\n    functionName: context.functionName,\r\n  });\r\n\r\n  addAnnotations({\r\n    correlationId,\r\n    service: 'nigredo-prospecting',\r\n    operation: 'list-leads',\r\n  });\r\n\r\n  const startTime = Date.now();\r\n\r\n  try {\r\n    logger.info('Processing list leads request', {\r\n      correlationId,\r\n      requestId: context.awsRequestId,\r\n    });\r\n\r\n    // ========================================================================\r\n    // 1. Extract and validate tenant ID from JWT\r\n    // ========================================================================\r\n    \r\n    const tenantId = await traceSubsegment(\r\n      'ExtractTenantId',\r\n      () => {\r\n        // Extract tenant ID from JWT claims\r\n        // For now, use default tenant ID (will be updated when Cognito is integrated)\r\n        const tid = DEFAULT_TENANT_ID;\r\n        \r\n        logger.info('Tenant ID extracted', {\r\n          correlationId,\r\n          tenantId: tid,\r\n        });\r\n\r\n        addAnnotations({\r\n          tenantId: tid,\r\n        });\r\n\r\n        return tid;\r\n      },\r\n      { operation: 'extract_tenant' }\r\n    );\r\n\r\n    // ========================================================================\r\n    // 2. Parse and validate query parameters\r\n    // ========================================================================\r\n    \r\n    const queryParams = await traceSubsegment(\r\n      'ValidateQueryParams',\r\n      () => {\r\n        const params = event.queryStringParameters || {};\r\n        \r\n        try {\r\n          const validated = ListLeadsQuerySchema.parse(params);\r\n          \r\n          logger.info('Query parameters validated', {\r\n            correlationId,\r\n            params: validated,\r\n          });\r\n\r\n          addMetadata({\r\n            queryParams: validated,\r\n          }, 'request');\r\n\r\n          return validated;\r\n        } catch (error) {\r\n          if (error instanceof z.ZodError) {\r\n            logger.warn('Query parameter validation failed', {\r\n              correlationId,\r\n              errors: error.errors,\r\n            });\r\n\r\n            throw new Error('Invalid query parameters');\r\n          }\r\n          throw error;\r\n        }\r\n      },\r\n      { operation: 'validate_params' }\r\n    );\r\n\r\n    // ========================================================================\r\n    // 3. Build dynamic SQL query with filters\r\n    // ========================================================================\r\n    \r\n    const { query, countQuery, values } = await traceSubsegment(\r\n      'BuildQuery',\r\n      () => {\r\n        const conditions: string[] = ['tenant_id = $1'];\r\n        const queryValues: any[] = [tenantId];\r\n        let paramIndex = 2;\r\n\r\n        // Add status filter\r\n        if (queryParams.status) {\r\n          conditions.push(`status = $${paramIndex}`);\r\n          queryValues.push(queryParams.status);\r\n          paramIndex++;\r\n        }\r\n\r\n        // Add source filter\r\n        if (queryParams.source) {\r\n          conditions.push(`source = $${paramIndex}`);\r\n          queryValues.push(queryParams.source);\r\n          paramIndex++;\r\n        }\r\n\r\n        // Add date range filters\r\n        if (queryParams.from_date) {\r\n          conditions.push(`created_at >= $${paramIndex}`);\r\n          queryValues.push(queryParams.from_date);\r\n          paramIndex++;\r\n        }\r\n\r\n        if (queryParams.to_date) {\r\n          conditions.push(`created_at <= $${paramIndex}`);\r\n          queryValues.push(queryParams.to_date);\r\n          paramIndex++;\r\n        }\r\n\r\n        // Add search filter\r\n        if (queryParams.search) {\r\n          conditions.push(`(\r\n            name ILIKE $${paramIndex} OR \r\n            email ILIKE $${paramIndex} OR \r\n            company ILIKE $${paramIndex}\r\n          )`);\r\n          queryValues.push(`%${queryParams.search}%`);\r\n          paramIndex++;\r\n        }\r\n\r\n        const whereClause = conditions.join(' AND ');\r\n        const offset = (queryParams.page - 1) * queryParams.limit;\r\n\r\n        const selectQuery = `\r\n          SELECT \r\n            id, name, email, phone, company, message,\r\n            source, utm_source, utm_medium, utm_campaign,\r\n            status, created_at, updated_at\r\n          FROM nigredo_leads.leads\r\n          WHERE ${whereClause}\r\n          ORDER BY created_at DESC\r\n          LIMIT $${paramIndex} OFFSET $${paramIndex + 1}\r\n        `;\r\n\r\n        const countSql = `\r\n          SELECT COUNT(*) as total\r\n          FROM nigredo_leads.leads\r\n          WHERE ${whereClause}\r\n        `;\r\n\r\n        queryValues.push(queryParams.limit, offset);\r\n\r\n        logger.info('Query built', {\r\n          correlationId,\r\n          conditions: conditions.length,\r\n          hasSearch: !!queryParams.search,\r\n        });\r\n\r\n        return {\r\n          query: selectQuery,\r\n          countQuery: countSql,\r\n          values: queryValues,\r\n        };\r\n      },\r\n      { operation: 'build_query' }\r\n    );\r\n\r\n    // ========================================================================\r\n    // 4. Execute database queries\r\n    // ========================================================================\r\n    \r\n    const { leads, total } = await traceSubsegment(\r\n      'QueryDatabase',\r\n      async () => {\r\n        const client = await getClient();\r\n\r\n        try {\r\n          // Get total count\r\n          const countResult = await traceQuery(\r\n            'CountLeads',\r\n            () => client.query(countQuery, values.slice(0, -2)),\r\n            { tenantId }\r\n          );\r\n\r\n          const totalCount = parseInt(countResult.rows[0].total, 10);\r\n\r\n          // Get leads\r\n          const leadsResult = await traceQuery(\r\n            'SelectLeads',\r\n            () => client.query(query, values),\r\n            {\r\n              tenantId,\r\n              page: queryParams.page,\r\n              limit: queryParams.limit,\r\n            }\r\n          );\r\n\r\n          const leadsData: Lead[] = leadsResult.rows;\r\n\r\n          logger.info('Leads queried successfully', {\r\n            correlationId,\r\n            count: leadsData.length,\r\n            total: totalCount,\r\n          });\r\n\r\n          return {\r\n            leads: leadsData,\r\n            total: totalCount,\r\n          };\r\n        } finally {\r\n          client.release();\r\n        }\r\n      },\r\n      {\r\n        operation: 'database',\r\n        tenantId,\r\n      }\r\n    );\r\n\r\n    // ========================================================================\r\n    // 5. Build response with pagination metadata\r\n    // ========================================================================\r\n    \r\n    const totalPages = Math.ceil(total / queryParams.limit);\r\n\r\n    const response = {\r\n      leads,\r\n      pagination: {\r\n        page: queryParams.page,\r\n        limit: queryParams.limit,\r\n        total,\r\n        total_pages: totalPages,\r\n        has_next: queryParams.page < totalPages,\r\n        has_prev: queryParams.page > 1,\r\n      },\r\n    };\r\n\r\n    // ========================================================================\r\n    // 6. Emit metrics and return response\r\n    // ========================================================================\r\n    \r\n    const duration = Date.now() - startTime;\r\n    \r\n    metrics.addMetric('ListLeadsSuccess', MetricUnit.Count, 1);\r\n    metrics.addMetric('ListLeadsDuration', MetricUnit.Milliseconds, duration);\r\n    metrics.addMetric('LeadsReturned', MetricUnit.Count, leads.length);\r\n    metrics.publishStoredMetrics();\r\n\r\n    addAnnotations({\r\n      status: 'success',\r\n      leadsCount: leads.length,\r\n    });\r\n\r\n    addMetadata({\r\n      pagination: response.pagination,\r\n    }, 'response');\r\n\r\n    logger.info('List leads completed successfully', {\r\n      correlationId,\r\n      count: leads.length,\r\n      total,\r\n      durationMs: duration,\r\n    });\r\n\r\n    return {\r\n      statusCode: 200,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-Correlation-Id': correlationId,\r\n        'X-Request-Id': context.awsRequestId,\r\n      },\r\n      body: JSON.stringify(response),\r\n    };\r\n\r\n  } catch (error: any) {\r\n    logger.error('Error listing leads', error as Error, {\r\n      correlationId,\r\n    });\r\n\r\n    addAnnotations({\r\n      error: true,\r\n      status: 'error',\r\n    });\r\n\r\n    metrics.addMetric('ListLeadsError', MetricUnit.Count, 1);\r\n    metrics.publishStoredMetrics();\r\n\r\n    // Handle specific error types\r\n    if (error.message === 'Invalid query parameters') {\r\n      return {\r\n        statusCode: 400,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'X-Correlation-Id': correlationId,\r\n          'X-Request-Id': context.awsRequestId,\r\n        },\r\n        body: JSON.stringify({\r\n          error: 'Bad Request',\r\n          message: 'Invalid query parameters',\r\n          requestId: correlationId,\r\n        }),\r\n      };\r\n    }\r\n\r\n    return {\r\n      statusCode: 500,\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'X-Correlation-Id': correlationId,\r\n        'X-Request-Id': context.awsRequestId,\r\n      },\r\n      body: JSON.stringify({\r\n        error: 'Internal Server Error',\r\n        message: 'Failed to list leads',\r\n        requestId: correlationId,\r\n      }),\r\n    };\r\n  }\r\n};\r\n", "/**\n * The dimension key for the cold start metric.\n */\nconst COLD_START_METRIC = 'ColdStart';\n/**\n * The default namespace for metrics.\n */\nconst DEFAULT_NAMESPACE = 'default_namespace';\n/**\n * The minimum length constraint of the metric name\n */\nconst MIN_METRIC_NAME_LENGTH = 1;\n/**\n * The maximum length constraint of the metric name\n */\nconst MAX_METRIC_NAME_LENGTH = 255;\n/**\n * The maximum number of metrics that can be emitted in a single EMF blob.\n */\nconst MAX_METRICS_SIZE = 100;\n/**\n * The maximum number of metric values that can be emitted in a single metric.\n */\nconst MAX_METRIC_VALUES_SIZE = 100;\n/**\n * The maximum number of dimensions that can be added to a metric (0-indexed).\n */\nconst MAX_DIMENSION_COUNT = 29;\n/**\n * The maximum age of a timestamp in milliseconds that can be emitted in a metric.\n * This is set to 14 days.\n */\nconst EMF_MAX_TIMESTAMP_PAST_AGE = 14 * 24 * 60 * 60 * 1000;\n/**\n * The maximum age of a timestamp in milliseconds that can be emitted in a metric.\n * This is set to 2 hours.\n */\nconst EMF_MAX_TIMESTAMP_FUTURE_AGE = 2 * 60 * 60 * 1000;\n/**\n * The unit of the metric.\n *\n * @see {@link https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Unit | Amazon CloudWatch Units}\n * @see {@link https://docs.aws.amazon.com/AmazonCloudWatch/latest/APIReference/API_MetricDatum.html | Amazon CloudWatch MetricDatum}\n */\nconst MetricUnit = {\n    Seconds: 'Seconds',\n    Microseconds: 'Microseconds',\n    Milliseconds: 'Milliseconds',\n    Bytes: 'Bytes',\n    Kilobytes: 'Kilobytes',\n    Megabytes: 'Megabytes',\n    Gigabytes: 'Gigabytes',\n    Terabytes: 'Terabytes',\n    Bits: 'Bits',\n    Kilobits: 'Kilobits',\n    Megabits: 'Megabits',\n    Gigabits: 'Gigabits',\n    Terabits: 'Terabits',\n    Percent: 'Percent',\n    Count: 'Count',\n    BytesPerSecond: 'Bytes/Second',\n    KilobytesPerSecond: 'Kilobytes/Second',\n    MegabytesPerSecond: 'Megabytes/Second',\n    GigabytesPerSecond: 'Gigabytes/Second',\n    TerabytesPerSecond: 'Terabytes/Second',\n    BitsPerSecond: 'Bits/Second',\n    KilobitsPerSecond: 'Kilobits/Second',\n    MegabitsPerSecond: 'Megabits/Second',\n    GigabitsPerSecond: 'Gigabits/Second',\n    TerabitsPerSecond: 'Terabits/Second',\n    CountPerSecond: 'Count/Second',\n    NoUnit: 'None',\n};\n/**\n * The resolution of the metric.\n *\n * @see {@link https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Resolution_definition | Amazon CloudWatch Resolution}\n */\nconst MetricResolution = {\n    Standard: 60,\n    High: 1,\n};\nexport { COLD_START_METRIC, DEFAULT_NAMESPACE, MIN_METRIC_NAME_LENGTH, MAX_METRIC_NAME_LENGTH, MAX_METRICS_SIZE, MAX_METRIC_VALUES_SIZE, MAX_DIMENSION_COUNT, MetricUnit, MetricResolution, EMF_MAX_TIMESTAMP_PAST_AGE, EMF_MAX_TIMESTAMP_FUTURE_AGE, };\n", "import { Console } from 'node:console';\nimport { isIntegerNumber, isNumber, isString, isStringUndefinedNullEmpty, Utility, } from '@aws-lambda-powertools/commons';\nimport { getBooleanFromEnv, getServiceName, getStringFromEnv, isDevMode, } from '@aws-lambda-powertools/commons/utils/env';\nimport { COLD_START_METRIC, DEFAULT_NAMESPACE, EMF_MAX_TIMESTAMP_FUTURE_AGE, EMF_MAX_TIMESTAMP_PAST_AGE, MAX_DIMENSION_COUNT, MAX_METRIC_NAME_LENGTH, MAX_METRIC_VALUES_SIZE, MAX_METRICS_SIZE, MetricResolution as MetricResolutions, MetricUnit as MetricUnits, MIN_METRIC_NAME_LENGTH, } from './constants.js';\n/**\n * The Metrics utility creates custom metrics asynchronously by logging metrics to standard output following {@link https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format.html | Amazon CloudWatch Embedded Metric Format (EMF)}.\n *\n * These metrics can be visualized through Amazon CloudWatch Console.\n *\n * **Key features**\n * - Aggregating up to 100 metrics using a single CloudWatch EMF object (large JSON blob).\n * - Validating your metrics against common metric definitions mistakes (for example, metric unit, values, max dimensions, max metrics).\n * - Metrics are created asynchronously by the CloudWatch service. You do not need any custom stacks, and there is no impact to Lambda function latency.\n * - Creating a one-off metric with different dimensions.\n *\n * After initializing the Metrics class, you can add metrics using the {@link Metrics.addMetric | `addMetric()`} method.\n * The metrics are stored in a buffer and are flushed when calling {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`}.\n * Each metric can have dimensions and metadata added to it.\n *\n * @example\n * ```typescript\n * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n *\n * const metrics = new Metrics({\n *   namespace: 'serverlessAirline',\n *   serviceName: 'orders',\n *   defaultDimensions: { environment: 'dev' },\n * });\n *\n * export const handler = async (event: { requestId: string }) => {\n *   metrics.addMetadata('request_id', event.requestId);\n *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n *   metrics.publishStoredMetrics();\n * };\n * ```\n *\n * If you don't want to manually flush the metrics, you can use the {@link Metrics.logMetrics | `logMetrics()`} decorator or\n * the Middy.js middleware to automatically flush the metrics after the handler function returns or throws an error.\n *\n * In addition to this, the decorator and middleware can also be configured to capture a `ColdStart` metric and\n * set default dimensions for all metrics.\n *\n * **Class method decorator**\n *\n * @example\n *\n * ```typescript\n * import type { Context } from 'aws-lambda';\n * import type { LambdaInterface } from '@aws-lambda-powertools/commons/types';\n * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n *\n * const metrics = new Metrics({\n *   namespace: 'serverlessAirline',\n *   serviceName: 'orders'\n * });\n *\n * class Lambda implements LambdaInterface {\n *   \u2063@metrics.logMetrics({ captureColdStartMetric: true, throwOnEmptyMetrics: true })\n *   public async handler(_event: { requestId: string }, _: Context) {\n *     metrics.addMetadata('request_id', event.requestId);\n *     metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n *   }\n * }\n *\n * const handlerClass = new Lambda();\n * export const handler = handlerClass.handler.bind(handlerClass);\n * ```\n *\n * Note that decorators are a Stage 3 proposal for JavaScript and are not yet part of the ECMAScript standard.\n * The current implmementation in this library is based on the legacy TypeScript decorator syntax enabled by the [`experimentalDecorators` flag](https://www.typescriptlang.org/tsconfig/#experimentalDecorators)\n * set to `true` in the `tsconfig.json` file.\n *\n * **Middy.js middleware**\n *\n * @example\n *\n * ```typescript\n * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n * import { logMetrics } from '@aws-lambda-powertools/metrics/middleware';\n * import middy from '@middy/core';\n *\n * const metrics = new Metrics({\n *   namespace: 'serverlessAirline',\n *   serviceName: 'orders'\n * });\n *\n * export const handler = middy(async () => {\n *   metrics.addMetadata('request_id', event.requestId);\n *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n * }).use(logMetrics(metrics, {\n *   captureColdStartMetric: true,\n *   throwOnEmptyMetrics: true,\n * }));\n * ```\n *\n * The `logMetrics()` middleware is compatible with `@middy/core@3.x` and above.\n *\n */\nclass Metrics extends Utility {\n    /**\n     * Console instance used to print logs.\n     *\n     * In AWS Lambda, we create a new instance of the Console class so that we can have\n     * full control over the output of the logs. In testing environments, we use the\n     * default console instance.\n     *\n     * This property is initialized in the constructor in setOptions().\n     *\n     * @private\n     */\n    console;\n    /**\n     * Custom configuration service for metrics\n     */\n    customConfigService;\n    /**\n     * Default dimensions to be added to all metrics\n     * @default {}\n     */\n    defaultDimensions = {};\n    /**\n     * Additional dimensions for the current metrics context\n     * @default {}\n     */\n    dimensions = {};\n    /**\n     * Additional dimension sets for the current metrics context\n     * @default []\n     */\n    dimensionSets = [];\n    /**\n     * Name of the Lambda function\n     */\n    functionName;\n    /**\n     * Custom logger object used for emitting debug, warning, and error messages.\n     *\n     * Note that this logger is not used for emitting metrics which are emitted to standard output using the `Console` object.\n     */\n    #logger;\n    /**\n     * Flag indicating if this is a single metric instance\n     * @default false\n     */\n    isSingleMetric = false;\n    /**\n     * Additional metadata to be included with metrics\n     * @default {}\n     */\n    metadata = {};\n    /**\n     * Namespace for the metrics\n     */\n    namespace;\n    /**\n     * Flag to determine if an error should be thrown when no metrics are recorded\n     * @default false\n     */\n    shouldThrowOnEmptyMetrics = false;\n    /**\n     * Storage for metrics before they are published\n     * @default {}\n     */\n    storedMetrics = {};\n    /**\n     * Whether to disable metrics\n     */\n    disabled = false;\n    /**\n     * Cached environment config values.\n     * Initialized once in setEnvConfig().\n     */\n    #envConfig = {\n        namespace: '',\n        functionName: '',\n        serviceName: '',\n        disabled: false,\n        devMode: false,\n    };\n    /**\n     * Custom timestamp for the metrics\n     */\n    #timestamp;\n    constructor(options = {}) {\n        super();\n        this.dimensions = {};\n        this.setEnvConfig();\n        this.setConsole();\n        this.#logger = options.logger || this.console;\n        this.setOptions(options);\n    }\n    /**\n     * Add a dimension to metrics.\n     *\n     * A dimension is a key-value pair that is used to group metrics, and it is included in all metrics emitted after it is added.\n     * Invalid dimension values are skipped and a warning is logged.\n     *\n     * When calling the {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`} method, the dimensions are cleared. This type of\n     * dimension is useful when you want to add request-specific dimensions to your metrics. If you want to add dimensions that are\n     * included in all metrics, use the {@link Metrics.setDefaultDimensions | `setDefaultDimensions()`} method.\n     *\n     * @param name - The name of the dimension\n     * @param value - The value of the dimension\n     */\n    addDimension(name, value) {\n        if (isStringUndefinedNullEmpty(name) || isStringUndefinedNullEmpty(value)) {\n            this.#logger.warn(`The dimension ${name} doesn't meet the requirements and won't be added. Ensure the dimension name and value are non empty strings`);\n            return;\n        }\n        if (MAX_DIMENSION_COUNT <= this.getCurrentDimensionsCount()) {\n            throw new RangeError(`The number of metric dimensions must be lower than ${MAX_DIMENSION_COUNT}`);\n        }\n        if (Object.hasOwn(this.dimensions, name) ||\n            Object.hasOwn(this.defaultDimensions, name)) {\n            this.#logger.warn(`Dimension \"${name}\" has already been added. The previous value will be overwritten.`);\n        }\n        this.dimensions[name] = value;\n    }\n    /**\n     * Add multiple dimensions to the metrics.\n     *\n     * This method is useful when you want to add multiple dimensions to the metrics at once.\n     * Invalid dimension values are skipped and a warning is logged.\n     *\n     * When calling the {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`} method, the dimensions are cleared. This type of\n     * dimension is useful when you want to add request-specific dimensions to your metrics. If you want to add dimensions that are\n     * included in all metrics, use the {@link Metrics.setDefaultDimensions | `setDefaultDimensions()`} method.\n     *\n     * @param dimensions - An object with key-value pairs of dimensions\n     */\n    addDimensions(dimensions) {\n        const newDimensions = this.#sanitizeDimensions(dimensions);\n        const currentCount = this.getCurrentDimensionsCount();\n        const newSetCount = Object.keys(newDimensions).length;\n        if (currentCount + newSetCount >= MAX_DIMENSION_COUNT) {\n            throw new RangeError(`The number of metric dimensions must be lower than ${MAX_DIMENSION_COUNT}`);\n        }\n        this.dimensionSets.push(newDimensions);\n    }\n    /**\n     * A metadata key-value pair to be included with metrics.\n     *\n     * You can use this method to add high-cardinality data as part of your metrics.\n     * This is useful when you want to search highly contextual information along with your metrics in your logs.\n     *\n     * Note that the metadata is not included in the Amazon CloudWatch UI, but it can be used to search and filter logs.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async (event) => {\n     *   metrics.addMetadata('request_id', event.requestId);\n     *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     *   metrics.publishStoredMetrics();\n     * };\n     * ```\n     *\n     * @param key - The key of the metadata\n     * @param value - The value of the metadata\n     */\n    addMetadata(key, value) {\n        this.metadata[key] = value;\n    }\n    /**\n     * Add a metric to the metrics buffer.\n     *\n     * By default, metrics are buffered and flushed when calling {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`} method,\n     * or at the end of the handler function when using the {@link Metrics.logMetrics | `logMetrics()`} decorator or the Middy.js middleware.\n     *\n     * Metrics are emitted to standard output in the Amazon CloudWatch EMF (Embedded Metric Format) schema.\n     *\n     * You can add a metric by specifying the metric name, unit, and value. For convenience,\n     * we provide a set of constants for the most common units in the {@link MetricUnits | MetricUnit} dictionary object.\n     *\n     * Optionally, you can specify a {@link https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#Resolution_definition | resolution}, which can be either `High` or `Standard`, using the {@link MetricResolutions | MetricResolution} dictionary object.\n     * By default, metrics are published with a resolution of `Standard`.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async () => {\n     *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     *   metrics.publishStoredMetrics();\n     * };\n     * ```\n     *\n     * @param name - The metric name\n     * @param unit - The metric unit, see {@link MetricUnits | MetricUnit}\n     * @param value - The metric value\n     * @param resolution - The metric resolution, see {@link MetricResolutions | MetricResolution}\n     */\n    addMetric(name, unit, value, resolution = MetricResolutions.Standard) {\n        this.storeMetric(name, unit, value, resolution);\n        if (this.isSingleMetric)\n            this.publishStoredMetrics();\n    }\n    /**\n     * Immediately emit a `ColdStart` metric if this is a cold start invocation.\n     *\n     * A cold start is when AWS Lambda initializes a new instance of your function. To take advantage of this feature,\n     * you must instantiate the Metrics class outside of the handler function.\n     *\n     * By using this method, the metric will be emitted immediately without you having to call {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`}.\n     *\n     * If you are using the {@link Metrics.logMetrics | `logMetrics()`} decorator, or the Middy.js middleware, you can enable this\n     * feature by setting the `captureColdStartMetric` option to `true`.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async () => {\n     *   metrics.captureColdStartMetric();\n     * };\n     * ```\n     *\n     * @param functionName - Optional function name to use as `function_name` dimension in the metric. It's used only if the `functionName` constructor parameter or environment variable are not set.\n     */\n    captureColdStartMetric(functionName) {\n        if (!this.getColdStart())\n            return;\n        const singleMetric = this.singleMetric();\n        const value = this.functionName?.trim() ?? functionName?.trim();\n        if (value && value.length > 0) {\n            singleMetric.addDimension('function_name', value);\n        }\n        singleMetric.addMetric(COLD_START_METRIC, MetricUnits.Count, 1);\n    }\n    /**\n     * Clear all previously set default dimensions.\n     *\n     * This will remove all default dimensions set by the {@link Metrics.setDefaultDimensions | `setDefaultDimensions()`} method\n     * or via the `defaultDimensions` parameter in the constructor.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders',\n     *   defaultDimensions: { environment: 'dev' },\n     * });\n     *\n     * metrics.setDefaultDimensions({ region: 'us-west-2' });\n     *\n     * // both environment and region dimensions are removed\n     * metrics.clearDefaultDimensions();\n     * ```\n     */\n    clearDefaultDimensions() {\n        this.defaultDimensions = {};\n    }\n    /**\n     * Clear all the dimensions added to the Metrics instance via {@link Metrics.addDimension | `addDimension()`} or {@link Metrics.addDimensions | `addDimensions()`}.\n     *\n     * These dimensions are normally cleared when calling {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`}, but\n     * you can use this method to clear specific dimensions that you no longer need at runtime.\n     *\n     * This method does not clear the default dimensions set via {@link Metrics.setDefaultDimensions | `setDefaultDimensions()`} or via\n     * the `defaultDimensions` parameter in the constructor.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async () => {\n     *   metrics.addDimension('region', 'us-west-2');\n     *\n     *   // ...\n     *\n     *   metrics.clearDimensions(); // olnly the region dimension is removed\n     * };\n     * ```\n     *\n     * The method is primarily intended for internal use, but it is exposed for advanced use cases.\n     */\n    clearDimensions() {\n        this.dimensions = {};\n        this.dimensionSets = [];\n    }\n    /**\n     * Clear all the metadata added to the Metrics instance.\n     *\n     * Metadata is normally cleared when calling {@link Metrics.publishStoredMetrics | `publishStoredMetrics()`}, but\n     * you can use this method to clear specific metadata that you no longer need at runtime.\n     *\n     * The method is primarily intended for internal use, but it is exposed for advanced use cases.\n     */\n    clearMetadata() {\n        this.metadata = {};\n    }\n    /**\n     * Clear all the metrics stored in the buffer.\n     *\n     * This is useful when you want to clear the metrics stored in the buffer without publishing them.\n     *\n     * The method is primarily intended for internal use, but it is exposed for advanced use cases.\n     */\n    clearMetrics() {\n        this.storedMetrics = {};\n    }\n    /**\n     * Check if there are stored metrics in the buffer.\n     */\n    hasStoredMetrics() {\n        return Object.keys(this.storedMetrics).length > 0;\n    }\n    /**\n     * Whether metrics are disabled.\n     */\n    isDisabled() {\n        return this.disabled;\n    }\n    /**\n     * A class method decorator to automatically log metrics after the method returns or throws an error.\n     *\n     * The decorator can be used with TypeScript classes and can be configured to optionally capture a `ColdStart` metric (see {@link Metrics.captureColdStartMetric | `captureColdStartMetric()`}),\n     * throw an error if no metrics are emitted (see {@link Metrics.setThrowOnEmptyMetrics | `setThrowOnEmptyMetrics()`}),\n     * and set default dimensions for all metrics (see {@link Metrics.setDefaultDimensions | `setDefaultDimensions()`}).\n     *\n     * @example\n     *\n     * ```typescript\n     * import type { Context } from 'aws-lambda';\n     * import type { LambdaInterface } from '@aws-lambda-powertools/commons/types';\n     * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * class Lambda implements LambdaInterface {\n     *   \u2063@metrics.logMetrics({ captureColdStartMetric: true })\n     *   public async handler(_event: { requestId: string }, _: Context) {\n     *     metrics.addMetadata('request_id', event.requestId);\n     *     metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     *   }\n     * }\n     *\n     * const handlerClass = new Lambda();\n     * export const handler = handlerClass.handler.bind(handlerClass);\n     * ```\n     *\n     * You can configure the decorator with the following options:\n     * - `captureColdStartMetric` - Whether to capture a `ColdStart` metric\n     * - `defaultDimensions` - Default dimensions to add to all metrics\n     * - `throwOnEmptyMetrics` - Whether to throw an error if no metrics are emitted\n     *\n     * @param options - Options to configure the behavior of the decorator, see {@link ExtraOptions}\n     */\n    logMetrics(options = {}) {\n        const { throwOnEmptyMetrics, defaultDimensions, captureColdStartMetric } = options;\n        if (throwOnEmptyMetrics) {\n            this.setThrowOnEmptyMetrics(throwOnEmptyMetrics);\n        }\n        if (defaultDimensions !== undefined) {\n            this.setDefaultDimensions(defaultDimensions);\n        }\n        return (_target, _propertyKey, descriptor) => {\n            // biome-ignore lint/style/noNonNullAssertion: The descriptor.value is the method this decorator decorates, it cannot be undefined.\n            const originalMethod = descriptor.value;\n            const metricsRef = this;\n            // Use a function() {} instead of an () => {} arrow function so that we can\n            // access `myClass` as `this` in a decorated `myClass.myMethod()`.\n            descriptor.value = async function (...args) {\n                if (captureColdStartMetric) {\n                    metricsRef.captureColdStartMetric(args[1].functionName);\n                }\n                let result;\n                try {\n                    result = await originalMethod.apply(this, args);\n                }\n                finally {\n                    metricsRef.publishStoredMetrics();\n                }\n                return result;\n            };\n            return descriptor;\n        };\n    }\n    /**\n     * Flush the stored metrics to standard output.\n     *\n     * The method empties the metrics buffer and emits the metrics to standard output in the Amazon CloudWatch EMF (Embedded Metric Format) schema.\n     *\n     * When using the {@link Metrics.logMetrics | `logMetrics()`} decorator, or the Middy.js middleware, the metrics are automatically flushed after the handler function returns or throws an error.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics, MetricUnit } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async () => {\n     *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     *   metrics.publishStoredMetrics();\n     * };\n     * ```\n     */\n    publishStoredMetrics() {\n        const hasMetrics = this.hasStoredMetrics();\n        if (!this.shouldThrowOnEmptyMetrics && !hasMetrics) {\n            this.#logger.warn('No application metrics to publish. The cold-start metric may be published if enabled. ' +\n                'If application metrics should never be empty, consider using `throwOnEmptyMetrics`');\n        }\n        if (!this.disabled) {\n            const emfOutput = this.serializeMetrics();\n            hasMetrics && this.console.log(JSON.stringify(emfOutput));\n        }\n        this.clearMetrics();\n        this.clearDimensions();\n        this.clearMetadata();\n    }\n    /**\n     * Sets the timestamp for the metric.\n     *\n     * If an integer is provided, it is assumed to be the epoch time in milliseconds.\n     * If a Date object is provided, it will be converted to epoch time in milliseconds.\n     *\n     * The timestamp must be a Date object or an integer representing an epoch time.\n     * This should not exceed 14 days in the past or be more than 2 hours in the future.\n     * Any metrics failing to meet this criteria will be skipped by Amazon CloudWatch.\n     *\n     * See: https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/CloudWatch_Embedded_Metric_Format_Specification.html\n     * See: https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/CloudWatch-Logs-Monitoring-CloudWatch-Metrics.html\n     *\n     * @example\n     * ```typescript\n     * import { MetricUnit, Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders',\n     * });\n     *\n     * export const handler = async () => {\n     *   const metricTimestamp = new Date(Date.now() - 24 * 60 * 60 * 1000); // 24 hours ago\n     *   metrics.setTimestamp(metricTimestamp);\n     *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     * };\n     * ```\n     * @param timestamp - The timestamp to set, which can be a number or a Date object.\n     */\n    setTimestamp(timestamp) {\n        if (!this.#validateEmfTimestamp(timestamp)) {\n            this.#logger.warn(\"This metric doesn't meet the requirements and will be skipped by Amazon CloudWatch. \" +\n                'Ensure the timestamp is within 14 days in the past or up to 2 hours in the future and is also a valid number or Date object.');\n        }\n        this.#timestamp = this.#convertTimestampToEmfFormat(timestamp);\n    }\n    /**\n     * Serialize the stored metrics into a JSON object compliant with the Amazon CloudWatch EMF (Embedded Metric Format) schema.\n     *\n     * The EMF schema is a JSON object that contains the following properties:\n     * - `_aws`: An object containing the timestamp and the CloudWatch metrics.\n     * - `CloudWatchMetrics`: An array of CloudWatch metrics objects.\n     * - `Namespace`: The namespace of the metrics.\n     * - `Dimensions`: An array of dimensions for the metrics.\n     * - `Metrics`: An array of metric definitions.\n     *\n     * The object is then emitted to standard output, which in AWS Lambda is picked up by CloudWatch logs and processed asynchronously.\n     */\n    serializeMetrics() {\n        // Storage resolution is included only for High resolution metrics\n        const metricDefinitions = Object.values(this.storedMetrics).map((metricDefinition) => ({\n            Name: metricDefinition.name,\n            Unit: metricDefinition.unit,\n            ...(metricDefinition.resolution === MetricResolutions.High\n                ? { StorageResolution: metricDefinition.resolution }\n                : {}),\n        }));\n        if (metricDefinitions.length === 0 && this.shouldThrowOnEmptyMetrics) {\n            throw new RangeError('The number of metrics recorded must be higher than zero');\n        }\n        if (!this.namespace)\n            this.#logger.warn('Namespace should be defined, default used');\n        // We reduce the stored metrics to a single object with the metric\n        // name as the key and the value as the value.\n        const metricValues = Object.values(this.storedMetrics).reduce((result, { name, value }) => {\n            result[name] = value;\n            return result;\n        }, {});\n        const dimensionNames = [];\n        const allDimensionKeys = new Set([\n            ...Object.keys(this.defaultDimensions),\n            ...Object.keys(this.dimensions),\n        ]);\n        if (Object.keys(this.dimensions).length > 0) {\n            dimensionNames.push([...allDimensionKeys]);\n        }\n        for (const dimensionSet of this.dimensionSets) {\n            const dimensionSetKeys = new Set([\n                ...Object.keys(this.defaultDimensions),\n                ...Object.keys(dimensionSet),\n            ]);\n            dimensionNames.push([...dimensionSetKeys]);\n        }\n        if (dimensionNames.length === 0 &&\n            Object.keys(this.defaultDimensions).length > 0) {\n            dimensionNames.push([...Object.keys(this.defaultDimensions)]);\n        }\n        return {\n            _aws: {\n                Timestamp: this.#timestamp ?? Date.now(),\n                CloudWatchMetrics: [\n                    {\n                        Namespace: this.namespace || DEFAULT_NAMESPACE,\n                        Dimensions: dimensionNames,\n                        Metrics: metricDefinitions,\n                    },\n                ],\n            },\n            ...this.defaultDimensions,\n            ...this.dimensions,\n            // Merge all dimension sets efficiently by mutating the accumulator\n            ...this.dimensionSets.reduce((acc, dims) => {\n                for (const [key, value] of Object.entries(dims)) {\n                    acc[key] = value;\n                }\n                return acc;\n            }, {}),\n            ...metricValues,\n            ...this.metadata,\n        };\n    }\n    /**\n     * Set default dimensions that will be added to all metrics.\n     *\n     * This method will merge the provided dimensions with the existing default dimensions.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders',\n     *   defaultDimensions: { environment: 'dev' },\n     * });\n     *\n     * // Default dimensions will contain both region and environment\n     * metrics.setDefaultDimensions({\n     *   region: 'us-west-2',\n     *   environment: 'prod',\n     * });\n     * ```\n     *\n     * @param dimensions - The dimensions to be added to the default dimensions object\n     */\n    setDefaultDimensions(dimensions) {\n        const newDimensions = this.#sanitizeDimensions(dimensions);\n        const currentCount = Object.keys(this.defaultDimensions).length;\n        const newSetCount = Object.keys(newDimensions).length;\n        if (currentCount + newSetCount >= MAX_DIMENSION_COUNT) {\n            throw new RangeError(`The number of metric dimensions must be lower than ${MAX_DIMENSION_COUNT}`);\n        }\n        this.defaultDimensions = {\n            ...this.defaultDimensions,\n            ...newDimensions,\n        };\n    }\n    /**\n     * @deprecated Override the function name for `ColdStart` metrics inferred from the context either via:\n     * - `functionName` constructor parameter\n     * - `POWERTOOLS_FUNCTION_NAME` environment variable\n     * - {@link Metrics.captureColdStartMetric | `captureColdStartMetric('myFunctionName')`} method\n     */\n    /* v8 ignore start */ setFunctionName(name) {\n        this.functionName = name;\n    } /* v8 ignore end */\n    /**\n     * Set the flag to throw an error if no metrics are emitted.\n     *\n     * You can use this method to enable or disable this opt-in feature. This is useful if you want to ensure\n     * that at least one metric is emitted when flushing the metrics. This can be useful to catch bugs where\n     * metrics are not being emitted as expected.\n     *\n     * @param enabled - Whether to throw an error if no metrics are emitted\n     */\n    setThrowOnEmptyMetrics(enabled) {\n        this.shouldThrowOnEmptyMetrics = enabled;\n    }\n    /**\n     * Create a new Metrics instance configured to immediately flush a single metric.\n     *\n     * CloudWatch EMF uses the same dimensions and timestamp across all your metrics, this is useful when you have a metric that should have different dimensions\n     * or when you want to emit a single metric without buffering it.\n     *\n     * This method is used internally by the {@link Metrics.captureColdStartMetric | `captureColdStartMetric()`} method to emit the `ColdStart` metric immediately\n     * after the handler function is called.\n     *\n     * @example\n     * ```typescript\n     * import { Metrics } from '@aws-lambda-powertools/metrics';\n     *\n     * const metrics = new Metrics({\n     *   namespace: 'serverlessAirline',\n     *   serviceName: 'orders'\n     * });\n     *\n     * export const handler = async () => {\n     *   const singleMetric = metrics.singleMetric();\n     *   // The single metric will be emitted immediately\n     *   singleMetric.addMetric('ColdStart', MetricUnit.Count, 1);\n     *\n     *   // These other metrics will be buffered and emitted when calling `publishStoredMetrics()`\n     *   metrics.addMetric('successfulBooking', MetricUnit.Count, 1);\n     *   metrics.publishStoredMetrics();\n     * };\n     */\n    singleMetric() {\n        return new Metrics({\n            namespace: this.namespace,\n            defaultDimensions: this.defaultDimensions,\n            singleMetric: true,\n            logger: this.#logger,\n        });\n    }\n    /**\n     * @deprecated Use {@link Metrics.setThrowOnEmptyMetrics | `setThrowOnEmptyMetrics()`} instead.\n     */\n    /* v8 ignore start */ throwOnEmptyMetrics() {\n        this.shouldThrowOnEmptyMetrics = true;\n    } /* v8 ignore stop */\n    /**\n     * Gets the current number of dimensions count.\n     */\n    getCurrentDimensionsCount() {\n        const dimensionSetsCount = this.dimensionSets.reduce((total, dimensionSet) => total + Object.keys(dimensionSet).length, 0);\n        return (Object.keys(this.dimensions).length +\n            Object.keys(this.defaultDimensions).length +\n            dimensionSetsCount);\n    }\n    /**\n     * Get the custom config service if it exists.\n     */\n    getCustomConfigService() {\n        return this.customConfigService;\n    }\n    /**\n     * Check if a metric is new or not.\n     *\n     * A metric is considered new if there is no metric with the same name already stored.\n     *\n     * When a metric is not new, we also check if the unit is consistent with the stored metric with\n     * the same name. If the units are inconsistent, we throw an error as this is likely a bug or typo.\n     * This can happen if a metric is added without using the `MetricUnit` helper in JavaScript codebases.\n     *\n     * @param name - The name of the metric\n     * @param unit - The unit of the metric\n     */\n    isNewMetric(name, unit) {\n        if (this.storedMetrics[name]) {\n            if (this.storedMetrics[name].unit !== unit) {\n                const currentUnit = this.storedMetrics[name].unit;\n                throw new Error(`Metric \"${name}\" has already been added with unit \"${currentUnit}\", but we received unit \"${unit}\". Did you mean to use metric unit \"${currentUnit}\"?`);\n            }\n            return false;\n        }\n        return true;\n    }\n    /**\n     * Initialize the console property as an instance of the internal version of `Console()` class (PR #748)\n     * or as the global node console if the `POWERTOOLS_DEV' env variable is set and has truthy value.\n     *\n     * @private\n     */\n    setConsole() {\n        if (!this.#envConfig.devMode) {\n            this.console = new Console({\n                stdout: process.stdout,\n                stderr: process.stderr,\n            });\n        }\n        else {\n            this.console = console;\n        }\n    }\n    /**\n     * Set the custom config service to be used.\n     *\n     * @param customConfigService The custom config service to be used\n     */\n    setCustomConfigService(customConfigService) {\n        this.customConfigService = customConfigService\n            ? customConfigService\n            : undefined;\n    }\n    /**\n     * Set the environment variables service to be used.\n     */\n    setEnvConfig() {\n        this.#envConfig.namespace = getStringFromEnv({\n            key: 'POWERTOOLS_METRICS_NAMESPACE',\n            defaultValue: '',\n        });\n        this.#envConfig.functionName = getStringFromEnv({\n            key: 'POWERTOOLS_METRICS_FUNCTION_NAME',\n            defaultValue: '',\n        });\n        this.#envConfig.serviceName = getServiceName();\n        this.#envConfig.disabled = getBooleanFromEnv({\n            key: 'POWERTOOLS_METRICS_DISABLED',\n            defaultValue: false,\n            extendedParsing: true,\n        });\n        this.#envConfig.devMode = isDevMode();\n    }\n    /**\n     * Set the function name for the cold start metric.\n     *\n     * @param functionName - The function name to be used for the cold start metric set in the constructor\n     */\n    setFunctionNameForColdStartMetric(functionName) {\n        const value = functionName?.trim() ?? this.#envConfig.functionName;\n        if (value && value.length > 0) {\n            this.functionName = value;\n        }\n    }\n    /**\n     * Set the namespace to be used.\n     *\n     * @param namespace - The namespace to be used\n     */\n    setNamespace(namespace) {\n        this.namespace =\n            namespace ||\n                this.getCustomConfigService()?.getNamespace() ||\n                this.#envConfig.namespace;\n    }\n    /**\n     * Set the disbaled flag based on the environment variables `POWERTOOLS_METRICS_DISABLED` and `POWERTOOLS_DEV`.\n     *\n     * The `POWERTOOLS_METRICS_DISABLED` environment variable takes precedence over `POWERTOOLS_DEV`.\n     */\n    setDisabled() {\n        if ('POWERTOOLS_METRICS_DISABLED' in process.env &&\n            process.env.POWERTOOLS_METRICS_DISABLED !== undefined) {\n            this.disabled = this.#envConfig.disabled;\n            return;\n        }\n        this.disabled = this.#envConfig.devMode;\n    }\n    /**\n     * Set the options to be used by the Metrics instance.\n     *\n     * This method is used during the initialization of the Metrics instance.\n     *\n     * @param options - The options to be used\n     */\n    setOptions(options) {\n        const { customConfigService, namespace, serviceName, singleMetric, defaultDimensions, functionName, } = options;\n        this.setCustomConfigService(customConfigService);\n        this.setDisabled();\n        this.setNamespace(namespace);\n        const resolvedServiceName = this.#resolveServiceName(serviceName);\n        this.setDefaultDimensions(defaultDimensions\n            ? { service: resolvedServiceName, ...defaultDimensions }\n            : { service: resolvedServiceName });\n        this.setFunctionNameForColdStartMetric(functionName);\n        this.isSingleMetric = singleMetric || false;\n        return this;\n    }\n    /**\n     * Set the service dimension that will be included in the metrics.\n     *\n     * @param service - The service to be used\n     */\n    #resolveServiceName(service) {\n        return (service ||\n            this.getCustomConfigService()?.getServiceName() ||\n            this.#envConfig.serviceName ||\n            this.defaultServiceName);\n    }\n    /**\n     * Store a metric in the buffer.\n     *\n     * If the buffer is full, or the metric reaches the maximum number of values,\n     * the metrics are flushed to stdout.\n     *\n     * @param name - The name of the metric to store\n     * @param unit - The unit of the metric to store\n     * @param value - The value of the metric to store\n     * @param resolution - The resolution of the metric to store\n     */\n    storeMetric(name, unit, value, resolution) {\n        if (!isString(name))\n            throw new Error(`${name} is not a valid string`);\n        if (name.length < MIN_METRIC_NAME_LENGTH ||\n            name.length > MAX_METRIC_NAME_LENGTH)\n            throw new RangeError(`The metric name should be between ${MIN_METRIC_NAME_LENGTH} and ${MAX_METRIC_NAME_LENGTH} characters`);\n        if (!isNumber(value))\n            throw new RangeError(`${value} is not a valid number`);\n        if (!Object.values(MetricUnits).includes(unit))\n            throw new RangeError(`Invalid metric unit '${unit}', expected either option: ${Object.values(MetricUnits).join(',')}`);\n        if (!Object.values(MetricResolutions).includes(resolution))\n            throw new RangeError(`Invalid metric resolution '${resolution}', expected either option: ${Object.values(MetricResolutions).join(',')}`);\n        if (Object.keys(this.storedMetrics).length >= MAX_METRICS_SIZE) {\n            this.publishStoredMetrics();\n        }\n        if (this.isNewMetric(name, unit)) {\n            this.storedMetrics[name] = {\n                unit,\n                value,\n                name,\n                resolution,\n            };\n        }\n        else {\n            const storedMetric = this.storedMetrics[name];\n            if (!Array.isArray(storedMetric.value)) {\n                storedMetric.value = [storedMetric.value];\n            }\n            storedMetric.value.push(value);\n            if (storedMetric.value.length === MAX_METRIC_VALUES_SIZE) {\n                this.publishStoredMetrics();\n            }\n        }\n    }\n    /**\n     * Validates a given timestamp based on CloudWatch Timestamp guidelines.\n     *\n     * Timestamp must meet CloudWatch requirements.\n     * The time stamp can be up to two weeks in the past and up to two hours into the future.\n     * See [Timestamps](https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/cloudwatch_concepts.html#about_timestamp)\n     * for valid values.\n     *\n     * @param timestamp - Date object or epoch time in milliseconds representing the timestamp to validate.\n     */\n    #validateEmfTimestamp(timestamp) {\n        const isDate = timestamp instanceof Date;\n        if (!isDate && !isIntegerNumber(timestamp)) {\n            return false;\n        }\n        const timestampMs = isDate ? timestamp.getTime() : timestamp;\n        const currentTime = Date.now();\n        const minValidTimestamp = currentTime - EMF_MAX_TIMESTAMP_PAST_AGE;\n        const maxValidTimestamp = currentTime + EMF_MAX_TIMESTAMP_FUTURE_AGE;\n        return timestampMs >= minValidTimestamp && timestampMs <= maxValidTimestamp;\n    }\n    /**\n     * Converts a given timestamp to EMF compatible format.\n     *\n     * @param timestamp - The timestamp to convert, which can be either a number (in milliseconds) or a Date object.\n     * @returns The timestamp in milliseconds. If the input is invalid, returns 0.\n     */\n    #convertTimestampToEmfFormat(timestamp) {\n        if (isIntegerNumber(timestamp)) {\n            return timestamp;\n        }\n        if (timestamp instanceof Date) {\n            return timestamp.getTime();\n        }\n        /**\n         * If this point is reached, it indicates timestamp was neither a valid number nor Date\n         * Returning zero represents the initial date of epoch time,\n         * which will be skipped by Amazon CloudWatch.\n         */\n        return 0;\n    }\n    /**\n     * Sanitizes the dimensions by removing invalid entries and skipping duplicates.\n     *\n     * @param dimensions - The dimensions to sanitize.\n     */\n    #sanitizeDimensions(dimensions) {\n        const newDimensions = {};\n        for (const [key, value] of Object.entries(dimensions)) {\n            if (isStringUndefinedNullEmpty(key) ||\n                isStringUndefinedNullEmpty(value)) {\n                this.#logger.warn(`The dimension ${key} doesn't meet the requirements and won't be added. Ensure the dimension name and value are non empty strings`);\n                continue;\n            }\n            if (Object.hasOwn(this.dimensions, key) ||\n                Object.hasOwn(this.defaultDimensions, key) ||\n                Object.hasOwn(newDimensions, key)) {\n                this.#logger.warn(`Dimension \"${key}\" has already been added. The previous value will be overwritten.`);\n            }\n            newDimensions[key] = value;\n        }\n        return newDimensions;\n    }\n}\nexport { Metrics };\n", "// this file is auto generated, do not modify\nexport const PT_VERSION = '2.28.1';\n", "import { PT_VERSION } from './version.js';\nconst EXEC_ENV = process.env.AWS_EXECUTION_ENV || 'NA';\nconst middlewareOptions = {\n    relation: 'after',\n    toMiddleware: 'getUserAgentMiddleware',\n    name: 'addPowertoolsToUserAgent',\n    tags: ['POWERTOOLS', 'USER_AGENT'],\n};\n/**\n * Type guard to check if the client provided is a valid AWS SDK v3 client.\n *\n * @internal\n */\nconst isSdkClient = (client) => typeof client === 'object' &&\n    client !== null &&\n    'send' in client &&\n    typeof client.send === 'function' &&\n    'config' in client &&\n    client.config !== undefined &&\n    typeof client.config === 'object' &&\n    client.config !== null &&\n    'middlewareStack' in client &&\n    client.middlewareStack !== undefined &&\n    typeof client.middlewareStack === 'object' &&\n    client.middlewareStack !== null &&\n    'identify' in client.middlewareStack &&\n    typeof client.middlewareStack.identify === 'function' &&\n    'addRelativeTo' in client.middlewareStack &&\n    typeof client.middlewareStack.addRelativeTo === 'function';\n/**\n * Helper function to create a custom user agent middleware for the AWS SDK v3 clients.\n *\n * The middleware will append the provided feature name and the current version of\n * the Powertools for AWS Lambda library to the user agent string.\n *\n * @example \"PT/Tracer/2.1.0 PTEnv/nodejs20x\"\n *\n * @param feature The feature name to be added to the user agent\n *\n * @internal\n */\nconst customUserAgentMiddleware = (feature) => {\n    return (next) => async (args) => {\n        const existingUserAgent = args.request.headers['user-agent'] || '';\n        if (existingUserAgent.includes('PT/NO-OP')) {\n            const featureSpecificUserAgent = existingUserAgent.replace('PT/NO-OP', `PT/${feature}/${PT_VERSION} PTEnv/${EXEC_ENV}`);\n            args.request.headers['user-agent'] = featureSpecificUserAgent;\n            return await next(args);\n        }\n        if (existingUserAgent.includes('PT/')) {\n            return await next(args);\n        }\n        args.request.headers['user-agent'] =\n            existingUserAgent === ''\n                ? `PT/${feature}/${PT_VERSION} PTEnv/${EXEC_ENV}`\n                : `${existingUserAgent} PT/${feature}/${PT_VERSION} PTEnv/${EXEC_ENV}`;\n        return await next(args);\n    };\n};\n/**\n * Check if the provided middleware stack already has the Powertools for AWS Lambda\n * user agent middleware.\n *\n * @param middlewareStack The middleware stack to check\n *\n * @internal\n */\nconst hasPowertools = (middlewareStack) => {\n    let found = false;\n    for (const middleware of middlewareStack) {\n        if (middleware.includes('addPowertoolsToUserAgent')) {\n            found = true;\n        }\n    }\n    return found;\n};\n/**\n * Add the Powertools for AWS Lambda user agent middleware to the\n * AWS SDK v3 client provided.\n *\n * We use this middleware to unbotrusively track the usage of the library\n * and secure continued investment in the project.\n *\n * @param client The AWS SDK v3 client to add the middleware to\n * @param feature The feature name to be added to the user agent\n */\nconst addUserAgentMiddleware = (client, feature) => {\n    try {\n        if (isSdkClient(client)) {\n            if (hasPowertools(client.middlewareStack.identify())) {\n                return;\n            }\n            client.middlewareStack.addRelativeTo(customUserAgentMiddleware(feature), middlewareOptions);\n        }\n        else {\n            throw new Error('The client provided does not match the expected interface');\n        }\n    }\n    catch (error) {\n        console.warn('Failed to add user agent middleware', error);\n    }\n};\nexport { customUserAgentMiddleware, addUserAgentMiddleware, isSdkClient };\n", "/**\n * These constants are used to store cleanup functions in Middy's `request.internal` object.\n * They are used by the `cleanupPowertools` function to check if any cleanup function\n * is present and execute it.\n */\nconst PREFIX = 'powertools-for-aws';\n/**\n * Key to store the tracer instance in the `request.internal` object.\n *\n * @see {@link cleanupMiddlewares}\n */\nconst TRACER_KEY = `${PREFIX}.tracer`;\n/**\n * Key to store the metrics instance in the `request.internal` object.\n *\n * @see {@link cleanupMiddlewares}\n */\nconst METRICS_KEY = `${PREFIX}.metrics`;\n/**\n * Key to store the logger instance in the `request.internal` object.\n *\n * @see {@link cleanupMiddlewares}\n */\nconst LOGGER_KEY = `${PREFIX}.logger`;\n/**\n * Key to store the idempotency instance in the `request.internal` object.\n *\n * @see {@link cleanupMiddlewares}\n */\nconst IDEMPOTENCY_KEY = `${PREFIX}.idempotency`;\nexport { PREFIX, TRACER_KEY, METRICS_KEY, LOGGER_KEY, IDEMPOTENCY_KEY };\n", "/**\n * Check if a value is a record.\n *\n * @example\n * ```typescript\n * import { isRecord } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = { key: 'value' };\n * if (isRecord(value)) {\n *   // value is a record\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isRecord = (value) => {\n    return (Object.prototype.toString.call(value) === '[object Object]' &&\n        !Object.is(value, null));\n};\n/**\n * Check if a value is a string.\n *\n * @example\n * ```typescript\n * import { isString } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = 'foo';\n * if (isString(value)) {\n *   // value is a string\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isString = (value) => {\n    return typeof value === 'string';\n};\n/**\n * Check if a value is a number.\n *\n * @example\n * ```typescript\n * import { isNumber } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = 42;\n * if (isNumber(value)) {\n *   // value is a number\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isNumber = (value) => {\n    return typeof value === 'number';\n};\n/**\n * Check if a value is an integer number.\n *\n * @example\n * ```typescript\n * import { isIntegerNumber } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = 42;\n * if (isIntegerNumber(value)) {\n *   // value is an integer number\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isIntegerNumber = (value) => {\n    return isNumber(value) && Number.isInteger(value);\n};\n/**\n * Check if a value is truthy.\n *\n * @example\n * ```typescript\n * import { isTruthy } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = 'yes';\n * if (isTruthy(value)) {\n *   // value is truthy\n * }\n * ```\n *\n * @see https://github.com/getify/You-Dont-Know-JS/blob/2nd-ed/types-grammar/ch4.md#toboolean\n *\n * @param value - The value to check\n */\nconst isTruthy = (value) => {\n    if (isString(value)) {\n        return value !== '';\n    }\n    if (isNumber(value)) {\n        return value !== 0;\n    }\n    if (typeof value === 'boolean') {\n        return value;\n    }\n    if (Array.isArray(value)) {\n        return value.length > 0;\n    }\n    if (isRecord(value)) {\n        return Object.keys(value).length > 0;\n    }\n    return false;\n};\n/**\n * Check if a value is `null`.\n *\n * @example\n * ```typescript\n * import { isNull } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = null;\n * if (isNull(value)) {\n *   // value is null\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isNull = (value) => {\n    return Object.is(value, null);\n};\n/**\n * Check if a value is `null` or `undefined`.\n *\n * @example\n * ```typescript\n * import { isNullOrUndefined } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = null;\n * if (isNullOrUndefined(value)) {\n *   // value is null or undefined\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isNullOrUndefined = (value) => {\n    return isNull(value) || Object.is(value, undefined);\n};\n/**\n * Check if string is undefined, null, empty.\n *\n * @example\n * ```typescript\n * import { isStringUndefinedNullEmpty } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = 'foo';\n * if (isStringUndefinedNullEmpty(value)) {\n *   // value is either undefined, null, or an empty string\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isStringUndefinedNullEmpty = (value) => {\n    if (isNullOrUndefined(value))\n        return true;\n    if (!isString(value))\n        return true;\n    if (value.trim().length === 0)\n        return true;\n    return false;\n};\n/**\n * Check if a Regular Expression\n *\n * @example\n * ```typescript\n * import { isRegExp } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const value = /^foo.+$/;\n * if (isRegExp(value)) {\n *   // value is a Regular Expression\n * }\n * ```\n *\n * @param value - The value to check\n */\nconst isRegExp = (value) => {\n    return value instanceof RegExp;\n};\n/**\n * Get the type of a value as a string.\n *\n * @example\n * ```typescript\n * import { getType } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const type = getType('foo'); // 'string'\n * const otherType = getType(42); // 'number'\n * const anotherType = getType({ key: 'value' }); // 'object'\n * const unknownType = getType(Symbol('foo')); // 'unknown'\n * ```\n *\n * @param value - The value to check\n */\nconst getType = (value) => {\n    if (Array.isArray(value)) {\n        return 'array';\n    }\n    if (isRecord(value)) {\n        return 'object';\n    }\n    if (isString(value)) {\n        return 'string';\n    }\n    if (isNumber(value)) {\n        return 'number';\n    }\n    if (typeof value === 'boolean') {\n        return 'boolean';\n    }\n    if (isNull(value)) {\n        return 'null';\n    }\n    return 'unknown';\n};\n/**\n * Compare two arrays for strict equality.\n *\n * This function compares each element in the arrays, regardless of order.\n *\n * @example\n * ```typescript\n * import { areArraysEqual } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const left = [1, 2, 3];\n * const right = [3, 2, 1];\n * const equal = areArraysEqual(left, right); // true\n *\n * const otherLeft = [1, 2, 3];\n * const otherRight = [1, 2, 4];\n * const otherEqual = areArraysEqual(otherLeft, otherRight); // false\n * ```\n *\n * @param left - The left array to compare\n * @param right - The right array to compare\n */\nconst areArraysEqual = (left, right) => {\n    if (left.length !== right.length) {\n        return false;\n    }\n    return left.every((value, i) => isStrictEqual(value, right[i]));\n};\n/**\n * Compare two records for strict equality.\n *\n * @example\n * ```typescript\n * import { areRecordsEqual } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const left = { key: 'value' };\n * const right = { key: 'value' };\n * const equal = areRecordsEqual(left, right); // true\n *\n * const otherLeft = { key: 'value' };\n * const otherRight = { key: 'other value' };\n * const otherEqual = areRecordsEqual(otherLeft, otherRight); // false\n * ```\n *\n * @param left - The left record to compare\n * @param right - The right record to compare\n */\nconst areRecordsEqual = (left, right) => {\n    const leftKeys = Object.keys(left);\n    const rightKeys = Object.keys(right);\n    if (leftKeys.length !== rightKeys.length) {\n        return false;\n    }\n    return leftKeys.every((key) => isStrictEqual(left[key], right[key]));\n};\n/**\n * Check if two unknown values are strictly equal.\n *\n * If the values are arrays, then each element is compared, regardless of\n * order. If the values are objects, then each key and value from left\n * is compared to the corresponding key and value from right. If the\n * values are primitives, then they are compared using strict equality.\n *\n * @example\n * ```typescript\n * import { isStrictEqual } from '@aws-lambda-powertools/commons/typeUtils';\n *\n * const left = { key: 'value' };\n * const right = { key: 'value' };\n * const equal = isStrictEqual(left, right); // true\n *\n * const otherLeft = [1, 2, 3];\n * const otherRight = [3, 2, 1];\n * const otherEqual = isStrictEqual(otherLeft, otherRight); // true\n *\n * const anotherLeft = 'foo';\n * const anotherRight = 'bar';\n * const anotherEqual = isStrictEqual(anotherLeft, anotherRight); // false\n *\n * const yetAnotherLeft = 42;\n * const yetAnotherRight = 42;\n * const yetAnotherEqual = isStrictEqual(yetAnotherLeft, yetAnotherRight); // true\n * ```\n *\n * @param left - Left side of strict equality comparison\n * @param right - Right side of strict equality comparison\n */\nconst isStrictEqual = (left, right) => {\n    if (left === right) {\n        return true;\n    }\n    if (typeof left !== typeof right) {\n        return false;\n    }\n    if (Array.isArray(left) && Array.isArray(right)) {\n        return areArraysEqual(left, right);\n    }\n    if (isRecord(left) && isRecord(right)) {\n        return areRecordsEqual(left, right);\n    }\n    return false;\n};\nexport { isRecord, isString, isNumber, isIntegerNumber, isTruthy, isNull, isNullOrUndefined, isStringUndefinedNullEmpty, isRegExp, getType, isStrictEqual, };\n", "/**\n * `Utility` is a base class that other Powertools for AWS Lambda (TypeScript) utilites can extend to inherit shared logic.\n *\n * Its main purpose is to encapsulate the cold start heuristic logic. Cold start is a term commonly used to describe the `Init` phase of a Lambda function.\n * In this phase, Lambda creates or unfreezes an execution environment with the configured resources, downloads the code for the function and all layers,\n * initializes any extensions, initializes the runtime, and then runs the function\u2019s initialization code (the code outside the main handler).\n *\n * The Init phase happens either during the first invocation, or in advance of function invocations if you have enabled provisioned concurrency.\n *\n * To learn more about the Lambda execution environment lifecycle, see the [Execution environment section](https://docs.aws.amazon.com/lambda/latest/dg/runtimes-context.html) of the AWS Lambda documentation.\n *\n * As a Powertools for AWS Lambda (TypeScript) user you probably won't be using this class directly, in fact if you use other Powertools for AWS utilities the cold start heuristic found here is already used to:\n * - Add a `coldStart` key to the structured logs when injecting context information in `Logger`\n * - Emit a metric during a cold start function invocation in `Metrics`\n * - Annotate the invocation segment with a `coldStart` key in `Tracer`\n *\n * If you want to use this logic in your own utilities, `Utility` provides two methods:\n *\n * `Utility.getColdStart()`\n *\n * Since the `Utility` class is instantiated outside of the Lambda handler it will persist across invocations of the same execution environment. This means that if you call `getColdStart()` multiple times, it will return `true` during the first invocation, and `false` afterwards.\n *\n * @example\n * ```typescript\n * import { Utility } from '@aws-lambda-powertools/commons';\n *\n * const utility = new Utility();\n *\n * export const handler = async (_event: any, _context: any) => {\n *   utility.getColdStart();\n * };\n * ```\n *\n * `Utility.isColdStart()`\n *\n * This method is an alias of `getColdStart()` and is exposed for convenience and better readability in certain usages.\n *\n * @example\n * ```typescript\n * import { Utility } from '@aws-lambda-powertools/commons';\n *\n * const utility = new Utility();\n *\n * export const handler = async (_event: any, _context: any) => {\n *   if (utility.isColdStart()) {\n *     // do something, this block is only executed on the first invocation of the function\n *   } else {\n *     // do something else, this block gets executed on all subsequent invocations\n *   }\n * };\n * ```\n */\nexport class Utility {\n    #initializationType;\n    coldStart = true;\n    defaultServiceName = 'service_undefined';\n    constructor() {\n        this.#initializationType = this.getInitializationType();\n        if (this.#initializationType !== 'on-demand') {\n            this.coldStart = false;\n        }\n    }\n    /**\n     * Get the value of the `AWS_LAMBDA_INITIALIZATION_TYPE` environment variable.\n     */\n    getInitializationType() {\n        const envVarValue = process.env.AWS_LAMBDA_INITIALIZATION_TYPE?.trim();\n        if (envVarValue === 'on-demand') {\n            return 'on-demand';\n        }\n        if (envVarValue === 'provisioned-concurrency') {\n            return 'provisioned-concurrency';\n        }\n        return 'unknown';\n    }\n    /**\n     * Get the cold start status of the current execution environment.\n     *\n     * The method also flips the cold start status to `false` after the first invocation.\n     */\n    getColdStart() {\n        if (this.#initializationType !== 'on-demand') {\n            return false;\n        }\n        if (this.coldStart) {\n            this.coldStart = false;\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Validate that the service name provided is valid.\n     * Used internally during initialization.\n     *\n     * @param serviceName Service name to validate\n     */\n    isValidServiceName(serviceName) {\n        return typeof serviceName === 'string' && serviceName.trim().length > 0;\n    }\n}\n", "import { PT_VERSION } from './version.js';\nconst env = process.env.AWS_EXECUTION_ENV || 'NA';\nif (process.env.AWS_SDK_UA_APP_ID) {\n    process.env.AWS_SDK_UA_APP_ID = `${process.env.AWS_SDK_UA_APP_ID}/PT/NO-OP/${PT_VERSION}/PTEnv/${env}`;\n}\nelse {\n    process.env.AWS_SDK_UA_APP_ID = `PT/NO-OP/${PT_VERSION}/PTEnv/${env}`;\n}\nexport { addUserAgentMiddleware, isSdkClient } from './awsSdkUtils.js';\nexport { cleanupMiddlewares } from './middleware/cleanupMiddlewares.js';\nexport { IDEMPOTENCY_KEY, LOGGER_KEY, METRICS_KEY, TRACER_KEY, } from './middleware/constants.js';\nexport { getType, isIntegerNumber, isNull, isNullOrUndefined, isNumber, isRecord, isRegExp, isStrictEqual, isString, isStringUndefinedNullEmpty, isTruthy, } from './typeUtils.js';\nexport { Utility } from './Utility.js';\nexport { PT_VERSION } from './version.js';\n", "const POWERTOOLS_DEV_ENV_VAR = 'POWERTOOLS_DEV';\nconst POWERTOOLS_SERVICE_NAME_ENV_VAR = 'POWERTOOLS_SERVICE_NAME';\nconst XRAY_TRACE_ID_ENV_VAR = '_X_AMZN_TRACE_ID';\nexport { POWERTOOLS_DEV_ENV_VAR, POWERTOOLS_SERVICE_NAME_ENV_VAR, XRAY_TRACE_ID_ENV_VAR, };\n", "import { POWERTOOLS_DEV_ENV_VAR, POWERTOOLS_SERVICE_NAME_ENV_VAR, XRAY_TRACE_ID_ENV_VAR, } from './constants.js';\n/**\n * Get a string from the environment variables.\n *\n * @example\n * ```ts\n * import { getStringFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getStringFromEnv({\n *   key: 'MY_ENV_VAR',\n *   errorMessage: 'MY_ENV_VAR is required for this function',\n * });\n * ```\n *\n * By default, the value is trimmed and always required.\n *\n * You can also provide a default value, which will be returned if the environment variable is not set instead of throwing an error.\n *\n * @example\n * ```ts\n * import { getStringFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getStringFromEnv({\n *   key: 'MY_ENV_VAR',\n *   defaultValue: 'defaultValue',\n * });\n * ```\n *\n * @param options - The options for getting the string.\n * @param options.key - The key of the environment variable.\n * @param options.defaultValue - Optional default value to return if the environment variable is not set.\n * @param options.errorMessage - Optional error message to throw if the environment variable is not set and no default value is provided. Defaults to `\"Environment variable <key> is required\"`.\n */\nconst getStringFromEnv = ({ key, defaultValue, errorMessage, }) => {\n    const value = process.env[key];\n    if (value === undefined) {\n        if (defaultValue !== undefined) {\n            return defaultValue;\n        }\n        if (errorMessage) {\n            throw new Error(errorMessage);\n        }\n        throw new Error(`Environment variable ${key} is required`);\n    }\n    return value.trim();\n};\n/**\n * Get a number from the environment variables.\n *\n * @example\n * ```ts\n * import { getNumberFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getNumberFromEnv({\n *   key: 'MY_ENV_VAR',\n *   errorMessage: 'MY_ENV_VAR is required for this function',\n * });\n * ```\n *\n * By default, the value is trimmed before being converted to a number and always required.\n *\n * You can also provide a default value, which will be returned if the environment variable is not set instead of throwing an error.\n *\n * @example\n * ```ts\n * import { getNumberFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getNumberFromEnv({\n *   key: 'MY_ENV_VAR',\n *   defaultValue: 42,\n * });\n * ```\n *\n * @param options - The options for getting the number.\n * @param options.key - The key of the environment variable.\n * @param options.defaultValue - The default value to return if the environment variable is not set.\n * @param options.errorMessage - Optional error message to throw if the environment variable is not set and no default value is provided. Defaults to `\"Environment variable <key> is required\"`.\n */\nconst getNumberFromEnv = ({ key, defaultValue, errorMessage, }) => {\n    const value = getStringFromEnv({\n        key,\n        defaultValue: String(defaultValue),\n        errorMessage,\n    });\n    const parsedValue = Number(value);\n    if (Number.isNaN(parsedValue)) {\n        throw new TypeError(`Environment variable ${key} must be a number`);\n    }\n    return parsedValue;\n};\nconst truthyValues = new Set(['1', 'y', 'yes', 't', 'true', 'on']);\nconst falsyValues = new Set(['0', 'n', 'no', 'f', 'false', 'off']);\n/**\n * Get a boolean from the environment variables.\n *\n * @example\n * ```ts\n * import { getBooleanFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getBooleanFromEnv({\n *   key: 'MY_ENV_VAR',\n *   errorMessage: 'MY_ENV_VAR is required for this function',\n * });\n * ```\n *\n * By default, the value is trimmed before being converted to a boolean and always required.\n *\n * You can also provide a default value, which will be returned if the environment variable is not set instead of throwing an error.\n *\n * @example\n * ```ts\n * import { getBooleanFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getBooleanFromEnv({\n *   key: 'MY_ENV_VAR',\n *   defaultValue: true,\n * });\n * ```\n *\n * By default, the value is parsed as a boolean. You can also provide an option to extend the parsing of the boolean value to include common string representations.\n *\n * @example\n * ```ts\n * import { getBooleanFromEnv } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const myEnvVar = getBooleanFromEnv({\n *   key: 'MY_ENV_VAR',\n *   defaultValue: true,\n *   extendedParsing: true,\n * });\n * ```\n *\n * The following values are considered `true`:\n * - `\"true\"`\n * - `\"1\"`\n * - `\"yes\"`\n * - `\"on\"`\n * - `\"y\"`\n *\n * The following values are considered `false`:\n * - `\"false\"`\n * - `\"0\"`\n * - `\"no\"`\n * - `\"off\"`\n * - `\"n\"`\n *\n * @param options - The options for getting the boolean.\n * @param options.key - The key of the environment variable.\n * @param options.defaultValue - The default value to return if the environment variable is not set.\n * @param options.errorMessage - Optional error message to throw if the environment variable is not set and no default value is provided. Defaults to `\"Environment variable <key> is required\"`.\n * @param options.extendedParsing - Whether to extend the parsing of the boolean value to include common string representations like `'1'`, `'y'`, `'yes'`, `'t'`, `'true'`, `'on'` for `true` and `'0'`, `'n'`, `'no'`, `'f'`, `'false'`, `'off'` for `false`.\n */\nconst getBooleanFromEnv = ({ key, defaultValue, errorMessage, extendedParsing, }) => {\n    const value = getStringFromEnv({\n        key,\n        defaultValue: String(defaultValue),\n        errorMessage,\n    });\n    const parsedValue = value.toLowerCase();\n    if (extendedParsing) {\n        if (truthyValues.has(parsedValue)) {\n            return true;\n        }\n        if (falsyValues.has(parsedValue)) {\n            return false;\n        }\n    }\n    if (parsedValue !== 'true' && parsedValue !== 'false') {\n        throw new Error(`Environment variable ${key} must be a boolean`);\n    }\n    return parsedValue === 'true';\n};\n/**\n * Check if the current invocation is running in a development environment.\n *\n * This is determined by the `POWERTOOLS_DEV` environment variable.\n *\n * @example\n * ```ts\n * import { isDevMode } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const isDev = isDevMode();\n * ```\n */\nconst isDevMode = () => {\n    try {\n        return getBooleanFromEnv({\n            key: POWERTOOLS_DEV_ENV_VAR,\n            extendedParsing: true,\n        });\n    }\n    catch {\n        return false;\n    }\n};\n/**\n * Get the service name from the environment variables.\n *\n * This is determined by the `POWERTOOLS_SERVICE_NAME` environment variable.\n *\n * @example\n * ```ts\n * import { getServiceName } from '@aws-lambda-powertools/commons/utils/env';\n *\n * const serviceName = getServiceName();\n * ```\n */\nconst getServiceName = () => {\n    return getStringFromEnv({\n        key: POWERTOOLS_SERVICE_NAME_ENV_VAR,\n        defaultValue: '',\n    });\n};\n/**\n * Get the AWS X-Ray Trace data from the environment variable.\n *\n * The method parses the environment variable `_X_AMZN_TRACE_ID` and returns an object with the key-value pairs.\n */\nconst getXrayTraceDataFromEnv = () => {\n    const xRayTraceEnv = getStringFromEnv({\n        key: XRAY_TRACE_ID_ENV_VAR,\n        defaultValue: '',\n    });\n    if (xRayTraceEnv === '') {\n        return undefined;\n    }\n    if (!xRayTraceEnv.includes('=')) {\n        return {\n            Root: xRayTraceEnv,\n        };\n    }\n    const xRayTraceData = {};\n    for (const field of xRayTraceEnv.split(';')) {\n        const [key, value] = field.split('=');\n        xRayTraceData[key] = value;\n    }\n    return xRayTraceData;\n};\n/**\n * Determine if the current invocation is part of a sampled X-Ray trace.\n *\n * The AWS X-Ray Trace data available in the environment variable has this format:\n * `Root=1-5759e988-bd862e3fe1be46a994272793;Parent=557abcec3ee5a047;Sampled=1`,\n */\nconst isRequestXRaySampled = () => {\n    const xRayTraceData = getXrayTraceDataFromEnv();\n    return xRayTraceData?.Sampled === '1';\n};\n/**\n * Get the value of the `_X_AMZN_TRACE_ID` environment variable.\n *\n * The AWS X-Ray Trace data available in the environment variable has this format:\n * `Root=1-5759e988-bd862e3fe1be46a994272793;Parent=557abcec3ee5a047;Sampled=1`,\n *\n * The actual Trace ID is: `1-5759e988-bd862e3fe1be46a994272793`.\n */\nconst getXRayTraceIdFromEnv = () => {\n    const xRayTraceData = getXrayTraceDataFromEnv();\n    return xRayTraceData?.Root;\n};\nexport { getStringFromEnv, getNumberFromEnv, getBooleanFromEnv, isDevMode, getServiceName, getXrayTraceDataFromEnv, isRequestXRaySampled, getXRayTraceIdFromEnv, };\n", "/**\n * The indent level for JSON logs.\n *\n * By default Logger will use the `LogJsonIndent.COMPACT` indent level, which\n * produces logs on a single line. This is the most efficient option for\n * CloudWatch Logs.\n *\n * When enabling the `POWERTOOLS_DEV` environment variable, Logger will use the\n * `LogJsonIndent.PRETTY` indent level, which indents the JSON logs for easier\n * reading.\n */\nconst LogJsonIndent = {\n    PRETTY: 4,\n    COMPACT: 0,\n};\nconst LogLevel = {\n    TRACE: 'TRACE',\n    DEBUG: 'DEBUG',\n    INFO: 'INFO',\n    WARN: 'WARN',\n    ERROR: 'ERROR',\n    SILENT: 'SILENT',\n    CRITICAL: 'CRITICAL',\n};\n/**\n * Numeric values for each log level.\n */\nconst LogLevelThreshold = {\n    TRACE: 6,\n    DEBUG: 8,\n    INFO: 12,\n    WARN: 16,\n    ERROR: 20,\n    CRITICAL: 24,\n    SILENT: 28,\n};\n/**\n * Reserved keys that are included in every log item when using the default log formatter.\n *\n * These keys are reserved and cannot be overwritten by custom log attributes.\n */\nconst ReservedKeys = [\n    'level',\n    'message',\n    'sampling_rate',\n    'service',\n    'timestamp',\n];\n/**\n * Message logged when an uncaught error occurs in a Lambda function.\n */\nconst UncaughtErrorLogMessage = 'Uncaught error detected, flushing log buffer before exit';\nexport { LogJsonIndent, LogLevel, LogLevelThreshold, ReservedKeys, UncaughtErrorLogMessage, };\n", "import { getStringFromEnv, isDevMode, } from '@aws-lambda-powertools/commons/utils/env';\n/**\n * Class that defines and implements common methods for the formatting of log attributes.\n *\n * When creating a custom log formatter, you should extend this class and implement the\n * {@link formatAttributes | formatAttributes()} method to define the structure of the log item.\n *\n * @abstract\n */\nclass LogFormatter {\n    /**\n     * Format an error into a loggable object.\n     *\n     * @example\n     * ```json\n     * {\n     *   \"name\": \"Error\",\n     *   \"location\": \"file.js:1\",\n     *   \"message\": \"An error occurred\",\n     *   \"stack\": \"Error: An error occurred\\n    at file.js:1\\n    at file.js:2\\n    at file.js:3\",\n     *   \"cause\": {\n     *     \"name\": \"OtherError\",\n     *     \"location\": \"file.js:2\",\n     *     \"message\": \"Another error occurred\",\n     *     \"stack\": \"Error: Another error occurred\\n    at file.js:2\\n    at file.js:3\\n    at file.js:4\"\n     *   }\n     * }\n     * ```\n     *\n     * @param error - Error to format\n     */\n    formatError(error) {\n        const { name, message, stack, cause, ...errorAttributes } = error;\n        const formattedError = {\n            name,\n            location: this.getCodeLocation(error.stack),\n            message,\n            stack: isDevMode() && typeof stack === 'string' ? stack?.split('\\n') : stack,\n            cause: cause instanceof Error ? this.formatError(cause) : cause,\n        };\n        for (const key in error) {\n            if (typeof key === 'string' &&\n                !['name', 'message', 'stack', 'cause'].includes(key)) {\n                formattedError[key] = errorAttributes[key];\n            }\n        }\n        return formattedError;\n    }\n    /**\n     * Format a date into an ISO 8601 string with the configured timezone.\n     *\n     * The timezone is read from the `TZ` environment variable, if present.\n     * Otherwise, the timezone defaults to ':UTC'.\n     *\n     * @param now - The date to format\n     */\n    formatTimestamp(now) {\n        const defaultTimezone = 'UTC';\n        /**\n         * If a specific timezone is configured and it's not the default `UTC`,\n         * format the timestamp with the appropriate timezone offset.\n         */\n        const configuredTimezone = getStringFromEnv({\n            key: 'TZ',\n            defaultValue: '',\n        });\n        if (configuredTimezone && !configuredTimezone.includes(defaultTimezone))\n            return this.#generateISOTimestampWithOffset(now, configuredTimezone);\n        return now.toISOString();\n    }\n    /**\n     * Get the location of an error from a stack trace.\n     *\n     * @param stack - stack trace to parse\n     */\n    getCodeLocation(stack) {\n        if (!stack) {\n            return '';\n        }\n        const stackLines = stack.split('\\n');\n        const regex = /\\(([^()]*?):(\\d+?):(\\d+?)\\)\\\\?$/;\n        for (const item of stackLines) {\n            const match = regex.exec(item);\n            if (Array.isArray(match)) {\n                return `${match[1]}:${Number(match[2])}`;\n            }\n        }\n        return '';\n    }\n    /**\n     * Create a new Intl.DateTimeFormat object configured with the specified time zone\n     * and formatting options.\n     *\n     * The time is displayed in 24-hour format (hour12: false).\n     *\n     * @param timezone - IANA time zone identifier (e.g., \"Asia/Dhaka\").\n     */\n    #getDateFormatter = (timezone) => {\n        const twoDigitFormatOption = '2-digit';\n        const validTimeZone = Intl.supportedValuesOf('timeZone').includes(timezone)\n            ? timezone\n            : 'UTC';\n        return new Intl.DateTimeFormat('en', {\n            hourCycle: 'h23',\n            year: 'numeric',\n            month: twoDigitFormatOption,\n            day: twoDigitFormatOption,\n            hour: twoDigitFormatOption,\n            minute: twoDigitFormatOption,\n            second: twoDigitFormatOption,\n            timeZone: validTimeZone,\n        });\n    };\n    /**\n     * Generate an ISO 8601 timestamp string with the specified time zone and the local time zone offset.\n     *\n     * @param date - date to format\n     * @param timezone - IANA time zone identifier (e.g., \"Asia/Dhaka\").\n     */\n    #generateISOTimestampWithOffset(date, timezone) {\n        const { year, month, day, hour, minute, second } = this.#getDateFormatter(timezone)\n            .formatToParts(date)\n            .reduce((acc, item) => {\n            acc[item.type] = item.value;\n            return acc;\n        }, {});\n        const datePart = `${year}-${month}-${day}T${hour}:${minute}:${second}`;\n        const offset = -date.getTimezoneOffset();\n        const offsetSign = offset >= 0 ? '+' : '-';\n        const offsetHours = Math.abs(Math.floor(offset / 60))\n            .toString()\n            .padStart(2, '0');\n        const offsetMinutes = Math.abs(offset % 60)\n            .toString()\n            .padStart(2, '0');\n        const millisecondPart = date.getMilliseconds().toString().padStart(3, '0');\n        const offsetPart = `${offsetSign}${offsetHours}:${offsetMinutes}`;\n        return `${datePart}.${millisecondPart}${offsetPart}`;\n    }\n}\nexport { LogFormatter };\n", "import merge from 'lodash.merge';\n/**\n * LogItem is a class that holds the attributes of a log item.\n *\n * It is used by {@link LogFormatter} to store the attributes of a log item and to add additional attributes to it.\n */\nclass LogItem {\n    /**\n     * The attributes of the log item.\n     */\n    attributes = {};\n    /**\n     * Constructor for LogItem.\n     *\n     * Attributes are added in the following order:\n     * - Standard keys provided by the logger (e.g. `message`, `level`, `timestamp`)\n     * - Persistent attributes provided by developer, not formatted (done later)\n     * - Ephemeral attributes provided as parameters for a single log item (done later)\n     *\n     * @param params - The parameters for the LogItem.\n     */\n    constructor(params) {\n        this.setAttributes(params.attributes);\n    }\n    /**\n     * Add attributes to the log item.\n     *\n     * @param attributes - The attributes to add to the log item.\n     */\n    addAttributes(attributes) {\n        merge(this.attributes, attributes);\n        return this;\n    }\n    /**\n     * Get the attributes of the log item.\n     */\n    getAttributes() {\n        return this.attributes;\n    }\n    /**\n     * Prepare the log item for printing.\n     *\n     * This operation removes empty keys from the log item, see {@link removeEmptyKeys | removeEmptyKeys()} for more information.\n     */\n    prepareForPrint() {\n        this.attributes = this.removeEmptyKeys(this.getAttributes());\n    }\n    /**\n     * Remove empty keys from the log item, where empty keys are defined as keys with\n     * values of `undefined`, empty strings (`''`), or `null`.\n     *\n     * @param attributes - The attributes to remove empty keys from.\n     */\n    removeEmptyKeys(attributes) {\n        const newAttributes = {};\n        for (const key in attributes) {\n            if (attributes[key] !== undefined &&\n                attributes[key] !== '' &&\n                attributes[key] !== null) {\n                newAttributes[key] = attributes[key];\n            }\n        }\n        return newAttributes;\n    }\n    /**\n     * Replace the attributes of the log item.\n     *\n     * @param attributes - The attributes to set for the log item.\n     */\n    setAttributes(attributes) {\n        this.attributes = attributes;\n    }\n}\nexport { LogItem };\n", "import { Console } from 'node:console';\nimport { randomInt } from 'node:crypto';\nimport { isNullOrUndefined, Utility } from '@aws-lambda-powertools/commons';\nimport { getBooleanFromEnv, getNumberFromEnv, getStringFromEnv, getXRayTraceIdFromEnv, isDevMode, } from '@aws-lambda-powertools/commons/utils/env';\nimport merge from 'lodash.merge';\nimport { LogJsonIndent, LogLevelThreshold, ReservedKeys, UncaughtErrorLogMessage, } from './constants.js';\nimport { PowertoolsLogFormatter } from './formatter/PowertoolsLogFormatter.js';\nimport { CircularMap } from './logBuffer.js';\n/**\n * The Logger utility provides an opinionated logger with output structured as JSON for AWS Lambda.\n *\n * **Key features**\n * Capturing key fields from the Lambda context, cold starts, and structure logging output as JSON.\n * Logging Lambda invocation events when instructed (disabled by default).\n * Switch log level to `DEBUG` for a percentage of invocations (sampling).\n * Buffering logs for a specific request or invocation, and flushing them automatically on error or manually as needed.\n * Appending additional keys to structured logs at any point in time.\n * Providing a custom log formatter (Bring Your Own Formatter) to output logs in a structure compatible with your organization\u2019s Logging RFC.\n *\n * After initializing the Logger class, you can use the methods to log messages at different levels.\n *\n * @example\n * ```typescript\n * import { Logger } from '@aws-lambda-powertools/logger';\n *\n * const logger = new Logger({ serviceName: 'serverlessAirline' });\n *\n * export const handler = async (event, context) => {\n *   logger.info('This is an INFO log');\n *   logger.warn('This is a WARNING log');\n * };\n * ```\n *\n * To enrich the log items with information from the Lambda context, you can use the {@link Logger.addContext | `addContext()`} method.\n *\n * @example\n * ```typescript\n * import { Logger } from '@aws-lambda-powertools/logger';\n *\n * const logger = new Logger({ serviceName: 'serverlessAirline' });\n *\n * export const handler = async (event, context) => {\n *   logger.addContext(context);\n *\n *   logger.info('This is an INFO log with some context');\n * };\n * ```\n *\n * You can also add additional attributes to all log items using the {@link Logger.appendKeys | `appendKeys()`} method.\n *\n * @example\n * ```typescript\n * export const handler = async (event, context) => {\n *   logger.appendKeys({ key1: 'value1' });\n *\n *   logger.info('This is an INFO log with additional keys');\n *\n *   logger.removeKeys(['key1']);\n * };\n *```\n *\n * If you write your functions as classes and use TypeScript, you can use the {@link Logger.injectLambdaContext | `injectLambdaContext()`} class method decorator\n * to automatically add context to your logs and clear the state after the invocation.\n *\n * If instead you use Middy.js middlewares, you use the {@link \"middleware/middy\".injectLambdaContext | `injectLambdaContext()`} middleware.\n *\n * @see https://docs.aws.amazon.com/powertools/typescript/latest/core/logger/\n */\nclass Logger extends Utility {\n    /**\n     * Console instance used to print logs.\n     *\n     * In AWS Lambda, we create a new instance of the Console class so that we can have\n     * full control over the output of the logs. In testing environments, we use the\n     * default console instance.\n     *\n     * This property is initialized in the constructor in `setOptions()`.\n     */\n    console;\n    /**\n     * Custom config service instance used to configure the logger.\n     */\n    customConfigService;\n    /**\n     * Whether to print the Lambda invocation event in the logs.\n     */\n    logEvent = false;\n    /**\n     * Formatter used to format the log items.\n     * @default new PowertoolsLogFormatter()\n     */\n    logFormatter;\n    /**\n     * JSON indentation used to format the logs.\n     */\n    logIndentation = LogJsonIndent.COMPACT;\n    /**\n     * Log level used internally by the current instance of Logger.\n     */\n    logLevel = LogLevelThreshold.INFO;\n    /**\n     * Advanced Logging Control Log Level\n     * If not a valid value this will be left undefined, even if the\n     * environment variable AWS_LAMBDA_LOG_LEVEL is set\n     */\n    #alcLogLevel;\n    /**\n     * Persistent log attributes that will be logged in all log items.\n     */\n    persistentLogAttributes = {};\n    /**\n     * Standard attributes managed by Powertools that will be logged in all log items.\n     */\n    powertoolsLogData = {\n        sampleRateValue: 0,\n    };\n    /**\n     * Temporary log attributes that can be appended with `appendKeys()` method.\n     */\n    temporaryLogAttributes = {};\n    /**\n     * Buffer used to store logs until the logger is initialized.\n     *\n     * Sometimes we need to log warnings before the logger is fully initialized, however we can't log them\n     * immediately because the logger is not ready yet. This buffer stores those logs until the logger is ready.\n     */\n    #initBuffer = [];\n    /**\n     * Flag used to determine if the logger is initialized.\n     */\n    #isInitialized = false;\n    /**\n     * Map used to hold the list of keys and their type.\n     *\n     * Because keys of different types can be overwritten, we keep a list of keys that were added and their last\n     * type. We then use this map at log preparation time to pick the last one.\n     */\n    #keys = new Map();\n    /**\n     * This is the initial log leval as set during the initialization of the logger.\n     *\n     * We keep this value to be able to reset the log level to the initial value when the sample rate is refreshed.\n     */\n    #initialLogLevel = LogLevelThreshold.INFO;\n    /**\n     * Replacer function used to serialize the log items.\n     */\n    #jsonReplacerFn;\n    /**\n     * Buffer configuration options.\n     */\n    #bufferConfig = {\n        enabled: false,\n        flushOnErrorLog: true,\n        maxBytes: 20480,\n        bufferAtVerbosity: LogLevelThreshold.DEBUG,\n    };\n    /**\n     * Contains buffered logs, grouped by `_X_AMZN_TRACE_ID`, each group with a max size of `maxBufferBytesSize`\n     */\n    #buffer;\n    /**\n     * Search function for the correlation ID.\n     */\n    #correlationIdSearchFn;\n    /**\n     * The debug sampling rate configuration.\n     */\n    #debugLogSampling = {\n        /**\n         * The sampling rate value used to determine if the log level should be set to DEBUG.\n         */\n        sampleRateValue: 0,\n        /**\n         * The number of times the debug sampling rate has been refreshed.\n         *\n         * We use this to determine if we should refresh it again.\n         */\n        refreshedTimes: 0,\n    };\n    /**\n     * Map used to store the warning messages that have already been logged.\n     */\n    #warnOnceMap = new Map();\n    /**\n     * Log level used by the current instance of Logger.\n     *\n     * Returns the log level as a number. The higher the number, the less verbose the logs.\n     * To get the log level name, use the {@link getLevelName()} method.\n     */\n    get level() {\n        return this.logLevel;\n    }\n    constructor(options = {}) {\n        super();\n        const { customConfigService, ...rest } = options;\n        this.customConfigService = customConfigService\n            ? customConfigService\n            : undefined;\n        // all logs are buffered until the logger is initialized\n        this.setOptions(rest);\n        this.#isInitialized = true;\n        for (const [level, log] of this.#initBuffer) {\n            // we call the method directly and create the log item just in time\n            this.printLog(level, this.createAndPopulateLogItem(...log));\n        }\n        this.#initBuffer = [];\n    }\n    /**\n     * Add the current Lambda function's invocation context data to the powertoolLogData property of the instance.\n     * This context data will be part of all printed log items.\n     *\n     * @param context - The Lambda function's invocation context.\n     */\n    addContext(context) {\n        this.addToPowertoolsLogData({\n            lambdaContext: {\n                invokedFunctionArn: context.invokedFunctionArn,\n                coldStart: this.getColdStart(),\n                awsRequestId: context.awsRequestId,\n                memoryLimitInMB: context.memoryLimitInMB,\n                functionName: context.functionName,\n                functionVersion: context.functionVersion,\n            },\n        });\n    }\n    /**\n     * @deprecated This method is deprecated and will be removed in the future major versions, please use {@link appendPersistentKeys() `appendPersistentKeys()`} instead.\n     */\n    addPersistentLogAttributes(attributes) {\n        this.appendPersistentKeys(attributes);\n    }\n    /**\n     * Add the given temporary attributes (key-value pairs) to all log items generated by this Logger instance.\n     *\n     * If the key already exists in the attributes, it will be overwritten. If the key is one of `level`, `message`, `sampling_rate`,\n     * `service`, or `timestamp` we will log a warning and drop the value.\n     *\n     * @param attributes - The attributes to add to all log items.\n     */\n    appendKeys(attributes) {\n        this.#appendKeys(attributes, 'temp');\n    }\n    /**\n     * Add the given persistent attributes (key-value pairs) to all log items generated by this Logger instance.\n     *\n     * If the key already exists in the attributes, it will be overwritten. If the key is one of `level`, `message`, `sampling_rate`,\n     * `service`, or `timestamp` we will log a warning and drop the value.\n     *\n     * @param attributes - The attributes to add to all log items.\n     */\n    appendPersistentKeys(attributes) {\n        this.#appendKeys(attributes, 'persistent');\n    }\n    /**\n     * Create a separate Logger instance, identical to the current one.\n     * It's possible to overwrite the new instance options by passing them.\n     *\n     * @param options - The options to initialize the child logger with.\n     */\n    createChild(options = {}) {\n        const childLogger = this.createLogger(\n        // Merge parent logger options with options passed to createChild,\n        // the latter having precedence.\n        merge({}, {\n            logLevel: this.getLevelName(),\n            serviceName: this.powertoolsLogData.serviceName,\n            sampleRateValue: this.#debugLogSampling.sampleRateValue,\n            logFormatter: this.getLogFormatter(),\n            customConfigService: this.getCustomConfigService(),\n            environment: this.powertoolsLogData.environment,\n            persistentLogAttributes: this.persistentLogAttributes,\n            jsonReplacerFn: this.#jsonReplacerFn,\n            correlationIdSearchFn: this.#correlationIdSearchFn,\n            ...(this.#bufferConfig.enabled && {\n                logBufferOptions: {\n                    maxBytes: this.#bufferConfig.maxBytes,\n                    bufferAtVerbosity: this.getLogLevelNameFromNumber(this.#bufferConfig.bufferAtVerbosity),\n                    flushOnErrorLog: this.#bufferConfig.flushOnErrorLog,\n                },\n            }),\n        }, options));\n        if (this.powertoolsLogData.lambdaContext)\n            childLogger.addContext(this.powertoolsLogData.lambdaContext);\n        if (this.temporaryLogAttributes) {\n            childLogger.appendKeys(this.temporaryLogAttributes);\n        }\n        return childLogger;\n    }\n    /**\n     * Print a log item with level CRITICAL.\n     *\n     * @param input - The log message.\n     * @param extraInput - The extra input to log.\n     */\n    critical(input, ...extraInput) {\n        this.processLogItem(LogLevelThreshold.CRITICAL, input, extraInput);\n    }\n    /**\n     * Print a log item with level DEBUG.\n     *\n     * @param input\n     * @param extraInput - The extra input to log.\n     */\n    debug(input, ...extraInput) {\n        this.processLogItem(LogLevelThreshold.DEBUG, input, extraInput);\n    }\n    /**\n     * Print a log item with level ERROR.\n     *\n     * @param input - The log message.\n     * @param extraInput - The extra input to log.\n     */\n    error(input, ...extraInput) {\n        if (this.#bufferConfig.enabled && this.#bufferConfig.flushOnErrorLog) {\n            this.flushBuffer();\n        }\n        this.processLogItem(LogLevelThreshold.ERROR, input, extraInput);\n    }\n    /**\n     * Get the log level name of the current instance of Logger.\n     *\n     * Returns the log level name, i.e. `INFO`, `DEBUG`, etc.\n     * To get the log level as a number, use the {@link Logger.level} property.\n     */\n    getLevelName() {\n        return this.getLogLevelNameFromNumber(this.logLevel);\n    }\n    /**\n     * Return a boolean value. True means that the Lambda invocation events\n     * are printed in the logs.\n     */\n    getLogEvent() {\n        return this.logEvent;\n    }\n    /**\n     * Return the persistent log attributes, which are the attributes\n     * that will be logged in all log items.\n     */\n    getPersistentLogAttributes() {\n        return this.persistentLogAttributes;\n    }\n    /**\n     * Print a log item with level INFO.\n     *\n     * @param input - The log message.\n     * @param extraInput - The extra input to log.\n     */\n    info(input, ...extraInput) {\n        this.processLogItem(LogLevelThreshold.INFO, input, extraInput);\n    }\n    /**\n     * Class method decorator that adds the current Lambda function context as extra\n     * information in all log items.\n     *\n     * This decorator is useful when you want to enrich your logs with information\n     * from the function context, such as the function name, version, and request ID, and more.\n     *\n     * @example\n     * ```typescript\n     * import { Logger } from '@aws-lambda-powertools/logger';\n     * import type { LambdaInterface } from '@aws-lambda-powertools/commons/types';\n     *\n     * const logger = new Logger({ serviceName: 'serverlessAirline' });\n     *\n     * class Lambda implements LambdaInterface {\n     *   // Decorate your handler class method\n     *   \u2063@logger.injectLambdaContext()\n     *   public async handler(_event: unknown, _context: unknown): Promise<void> {\n     *     logger.info('This is an INFO log with some context');\n     *   }\n     * }\n     *\n     * const handlerClass = new Lambda();\n     * export const handler = handlerClass.handler.bind(handlerClass);\n     * ```\n     *\n     * The decorator can also be used to log the Lambda invocation event; this can be configured both via\n     * the `logEvent` parameter and the `POWERTOOLS_LOGGER_LOG_EVENT` environment variable. When both\n     * are set, the `logEvent` parameter takes precedence.\n     *\n     * Additionally, the decorator can be used to reset the temporary keys added with the `appendKeys()` method\n     * after the invocation, or to flush the buffer when an uncaught error is thrown in the handler.\n     *\n     * @see https://www.typescriptlang.org/docs/handbook/decorators.html#method-decorators\n     *\n     * @param options.logEvent - When `true` the logger will log the event.\n     * @param options.resetKeys - When `true` the logger will clear temporary keys added with {@link Logger.appendKeys() `appendKeys()`} method.\n     * @param options.flushBufferOnUncaughtError - When `true` the logger will flush the buffer when an uncaught error is thrown in the handler.\n     */\n    injectLambdaContext(options) {\n        return (_target, _propertyKey, descriptor) => {\n            const originalMethod = descriptor.value;\n            const loggerRef = this;\n            // Use a function() {} instead of an () => {} arrow function so that we can\n            // access `myClass` as `this` in a decorated `myClass.myMethod()`.\n            descriptor.value = async function (...args) {\n                loggerRef.refreshSampleRateCalculation();\n                loggerRef.addContext(args[1]);\n                loggerRef.logEventIfEnabled(args[0], options?.logEvent);\n                if (options?.correlationIdPath) {\n                    loggerRef.setCorrelationId(args[0], options?.correlationIdPath);\n                }\n                try {\n                    return await originalMethod.apply(this, args);\n                }\n                catch (error) {\n                    if (options?.flushBufferOnUncaughtError) {\n                        loggerRef.flushBuffer();\n                        loggerRef.error({\n                            message: UncaughtErrorLogMessage,\n                            error,\n                        });\n                    }\n                    throw error;\n                    /* v8 ignore next */\n                }\n                finally {\n                    if (options?.clearState || options?.resetKeys)\n                        loggerRef.resetKeys();\n                    loggerRef.clearBuffer();\n                }\n            };\n        };\n    }\n    /**\n     * @deprecated This method is deprecated and will be removed in the future major versions. Use {@link resetKeys()} instead.\n     */\n    /* v8 ignore start */ static injectLambdaContextAfterOrOnError(logger, _persistentAttributes, options) {\n        if (options && (options.clearState || options?.resetKeys)) {\n            logger.resetKeys();\n        }\n    } /* v8 ignore stop */\n    /**\n     * @deprecated - This method is deprecated and will be removed in the next major version.\n     */\n    /* v8 ignore start */ static injectLambdaContextBefore(logger, event, context, options) {\n        logger.addContext(context);\n        logger.logEventIfEnabled(event, options?.logEvent);\n    } /* v8 ignore stop */\n    /**\n     * Log the AWS Lambda event payload for the current invocation if the environment variable `POWERTOOLS_LOGGER_LOG_EVENT` is set to `true`.\n     *\n     * @example\n     * ```ts\n     * process.env.POWERTOOLS_LOGGER_LOG_EVENT = 'true';\n     *\n     * import { Logger } from '@aws-lambda-powertools/logger';\n     *\n     * const logger = new Logger();\n     *\n     * export const handler = async (event) => {\n     *   logger.logEventIfEnabled(event);\n     *   // ... your handler code\n     * }\n     * ```\n     *\n     * @param event - The AWS Lambda event payload.\n     * @param overwriteValue - Overwrite the environment variable value.\n     */\n    logEventIfEnabled(event, overwriteValue) {\n        if (!this.shouldLogEvent(overwriteValue))\n            return;\n        this.info('Lambda invocation event', { event });\n    }\n    /**\n     * This method allows recalculating the initial sampling decision for changing\n     * the log level to DEBUG based on a sample rate value used during initialization,\n     * potentially yielding a different outcome.\n     *\n     * This only works for warm starts, because we don't to avoid double sampling.\n     */\n    refreshSampleRateCalculation() {\n        if (this.#debugLogSampling.refreshedTimes === 0) {\n            this.#debugLogSampling.refreshedTimes++;\n            return;\n        }\n        if (this.#shouldEnableDebugSampling() &&\n            this.logLevel > LogLevelThreshold.TRACE) {\n            this.setLogLevel('DEBUG');\n            this.debug('Setting log level to DEBUG due to sampling rate');\n        }\n        else {\n            this.setLogLevel(this.getLogLevelNameFromNumber(this.#initialLogLevel));\n        }\n    }\n    /**\n     * Remove temporary attributes based on provided keys to all log items generated by this Logger instance.\n     *\n     * @param keys - The keys to remove.\n     */\n    removeKeys(keys) {\n        for (const key of keys) {\n            this.temporaryLogAttributes[key] = undefined;\n            if (this.persistentLogAttributes[key]) {\n                this.#keys.set(key, 'persistent');\n            }\n            else {\n                this.#keys.delete(key);\n            }\n        }\n    }\n    /**\n     * Remove the given keys from the persistent keys.\n     *\n     * @example\n     * ```typescript\n     * import { Logger } from '@aws-lambda-powertools/logger';\n     *\n     * const logger = new Logger({\n     *   persistentKeys: {\n     *     environment: 'prod',\n     *   },\n     * });\n     *\n     * logger.removePersistentKeys(['environment']);\n     * ```\n     *\n     * @param keys - The keys to remove from the persistent attributes.\n     */\n    removePersistentKeys(keys) {\n        for (const key of keys) {\n            this.persistentLogAttributes[key] = undefined;\n            if (this.temporaryLogAttributes[key]) {\n                this.#keys.set(key, 'temp');\n            }\n            else {\n                this.#keys.delete(key);\n            }\n        }\n    }\n    /**\n     * @deprecated This method is deprecated and will be removed in the future major versions. Use {@link removePersistentKeys()} instead.\n     */\n    removePersistentLogAttributes(keys) {\n        this.removePersistentKeys(keys);\n    }\n    /**\n     * Remove all temporary log attributes added with {@link appendKeys() `appendKeys()`} method.\n     */\n    resetKeys() {\n        for (const key of Object.keys(this.temporaryLogAttributes)) {\n            if (this.persistentLogAttributes[key]) {\n                this.#keys.set(key, 'persistent');\n            }\n            else {\n                this.#keys.delete(key);\n            }\n        }\n        this.temporaryLogAttributes = {};\n    }\n    /**\n     * Set the log level for this Logger instance.\n     *\n     * If the log level is set using AWS Lambda Advanced Logging Controls, it sets it\n     * instead of the given log level to avoid data loss.\n     *\n     * @param logLevel The log level to set, i.e. `error`, `warn`, `info`, `debug`, etc.\n     */\n    setLogLevel(logLevel) {\n        if (this.awsLogLevelShortCircuit(logLevel))\n            return;\n        if (this.isValidLogLevel(logLevel)) {\n            this.logLevel = LogLevelThreshold[logLevel];\n        }\n        else {\n            throw new Error(`Invalid log level: ${logLevel}`);\n        }\n    }\n    /**\n     * @deprecated This method is deprecated and will be removed in the future major versions, please use {@link appendPersistentKeys() `appendPersistentKeys()`} instead.\n     */\n    setPersistentLogAttributes(attributes) {\n        this.persistentLogAttributes = attributes;\n    }\n    /**\n     * Check whether the current Lambda invocation event should be printed in the logs or not.\n     *\n     * @param overwriteValue - Overwrite the environment variable value.\n     */\n    shouldLogEvent(overwriteValue) {\n        if (typeof overwriteValue === 'boolean') {\n            return overwriteValue;\n        }\n        return this.getLogEvent();\n    }\n    /**\n     * Print a log item with level TRACE.\n     *\n     * @param input - The log message.\n     * @param extraInput - The extra input to log.\n     */\n    trace(input, ...extraInput) {\n        this.processLogItem(LogLevelThreshold.TRACE, input, extraInput);\n    }\n    /**\n     * Print a log item with level WARN.\n     *\n     * @param input - The log message.\n     * @param extraInput - The extra input to log.\n     */\n    warn(input, ...extraInput) {\n        this.processLogItem(LogLevelThreshold.WARN, input, extraInput);\n    }\n    /**\n     * Log a warning message once per unique message.\n     *\n     * @param message - The log message.\n     */\n    #warnOnce(message) {\n        if (this.#warnOnceMap.has(message))\n            return;\n        this.#warnOnceMap.set(message, true);\n        this.warn(message);\n    }\n    /**\n     * Factory method for instantiating logger instances. Used by `createChild` method.\n     * Important for customization and subclassing. It allows subclasses, like `MyOwnLogger`,\n     * to override its behavior while keeping the main business logic in `createChild` intact.\n     *\n     * @example\n     * ```typescript\n     * // MyOwnLogger subclass\n     * class MyOwnLogger extends Logger {\n     *   protected createLogger(options?: ConstructorOptions): MyOwnLogger {\n     *     return new MyOwnLogger(options);\n     *   }\n     *   // No need to re-implement business logic from `createChild` and keep track on changes\n     *   public createChild(options?: ConstructorOptions): MyOwnLogger {\n     *     return super.createChild(options) as MyOwnLogger;\n     *   }\n     * }\n     * ```\n     *\n     * @param options - Logger configuration options.\n     */\n    createLogger(options) {\n        return new Logger(options);\n    }\n    /**\n     * A custom JSON replacer function that is used to serialize the log items.\n     *\n     * By default, we already extend the default serialization behavior to handle `BigInt` and `Error` objects, as well as remove circular references.\n     * When a custom JSON replacer function is passed to the Logger constructor, it will be called **before** our custom rules for each key-value pair in the object being stringified.\n     *\n     * This allows you to customize the serialization while still benefiting from the default behavior.\n     *\n     * @see {@link ConstructorOptions.jsonReplacerFn}\n     */\n    getJsonReplacer() {\n        const references = new WeakSet();\n        return (key, value) => {\n            let replacedValue = value;\n            if (this.#jsonReplacerFn)\n                replacedValue = this.#jsonReplacerFn?.(key, replacedValue);\n            if (replacedValue instanceof Error) {\n                replacedValue = this.getLogFormatter().formatError(replacedValue);\n            }\n            if (typeof replacedValue === 'bigint') {\n                return replacedValue.toString();\n            }\n            if (typeof replacedValue === 'object' && replacedValue !== null) {\n                if (references.has(replacedValue)) {\n                    return;\n                }\n                references.add(replacedValue);\n            }\n            return replacedValue;\n        };\n    }\n    /**\n     * Store information that is printed in all log items.\n     *\n     * @param attributes - The attributes to add to all log items.\n     */\n    addToPowertoolsLogData(attributes) {\n        merge(this.powertoolsLogData, attributes);\n    }\n    /**\n     * Shared logic for adding keys to the logger instance.\n     *\n     * @param attributes - The attributes to add to the log item.\n     * @param type - The type of the attributes to add.\n     */\n    #appendKeys(attributes, type) {\n        for (const attributeKey of Object.keys(attributes)) {\n            if (this.#checkReservedKeyAndWarn(attributeKey) === false) {\n                this.#keys.set(attributeKey, type);\n            }\n        }\n        if (type === 'temp') {\n            merge(this.temporaryLogAttributes, attributes);\n        }\n        else {\n            merge(this.persistentLogAttributes, attributes);\n        }\n    }\n    awsLogLevelShortCircuit(selectedLogLevel) {\n        if (this.#alcLogLevel !== undefined) {\n            this.logLevel = LogLevelThreshold[this.#alcLogLevel];\n            if (this.isValidLogLevel(selectedLogLevel) &&\n                this.logLevel > LogLevelThreshold[selectedLogLevel]) {\n                this.#warnOnce(`Current log level (${selectedLogLevel}) does not match AWS Lambda Advanced Logging Controls minimum log level (${this.#alcLogLevel}). This can lead to data loss, consider adjusting them.`);\n            }\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Create a log item and populate it with the given log level, input, and extra input.\n     */\n    createAndPopulateLogItem(logLevel, input, extraInput) {\n        const unformattedBaseAttributes = {\n            logLevel: this.getLogLevelNameFromNumber(logLevel),\n            timestamp: new Date(),\n            xRayTraceId: getXRayTraceIdFromEnv(),\n            ...this.getPowertoolsLogData(),\n            message: '',\n        };\n        const additionalAttributes = this.#createAdditionalAttributes();\n        this.#processMainInput(input, unformattedBaseAttributes, additionalAttributes);\n        this.#processExtraInput(extraInput, additionalAttributes);\n        return this.getLogFormatter().formatAttributes(unformattedBaseAttributes, additionalAttributes);\n    }\n    /**\n     * Create additional attributes from persistent and temporary keys\n     */\n    #createAdditionalAttributes() {\n        const attributes = {};\n        for (const [key, type] of this.#keys) {\n            if (!this.#checkReservedKeyAndWarn(key)) {\n                attributes[key] =\n                    type === 'persistent'\n                        ? this.persistentLogAttributes[key]\n                        : this.temporaryLogAttributes[key];\n            }\n        }\n        return attributes;\n    }\n    /**\n     * Process the main input message and add it to the attributes\n     */\n    #processMainInput(input, baseAttributes, additionalAttributes) {\n        if (typeof input === 'string') {\n            baseAttributes.message = input;\n            return;\n        }\n        const { message, ...rest } = input;\n        baseAttributes.message = message;\n        for (const [key, value] of Object.entries(rest)) {\n            if (!this.#checkReservedKeyAndWarn(key)) {\n                additionalAttributes[key] = value;\n            }\n        }\n    }\n    /**\n     * Process extra input items and add them to additional attributes\n     */\n    #processExtraInput(extraInput, additionalAttributes) {\n        for (const item of extraInput) {\n            if (isNullOrUndefined(item)) {\n                continue;\n            }\n            if (item instanceof Error) {\n                additionalAttributes.error = item;\n            }\n            else if (typeof item === 'string') {\n                additionalAttributes.extra = item;\n            }\n            else {\n                this.#processExtraObject(item, additionalAttributes);\n            }\n        }\n    }\n    /**\n     * Process an extra input object and add its properties to additional attributes\n     */\n    #processExtraObject(item, additionalAttributes) {\n        for (const [key, value] of Object.entries(item)) {\n            if (!this.#checkReservedKeyAndWarn(key)) {\n                additionalAttributes[key] = value;\n            }\n        }\n    }\n    /**\n     * Make a new debug log sampling decision based on the sample rate value.\n     */\n    #shouldEnableDebugSampling() {\n        return (this.#debugLogSampling.sampleRateValue &&\n            randomInt(0, 100) / 100 <= this.#debugLogSampling.sampleRateValue);\n    }\n    /**\n     * Check if a given key is reserved and warn the user if it is.\n     *\n     * @param key - The key to check\n     */\n    #checkReservedKeyAndWarn(key) {\n        if (ReservedKeys.includes(key)) {\n            this.warn(`The key \"${key}\" is a reserved key and will be dropped.`);\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Get the custom config service, an abstraction used to fetch environment variables.\n     */\n    getCustomConfigService() {\n        return this.customConfigService;\n    }\n    /**\n     * Get the instance of a service that formats the structure of a\n     * log item's keys and values in the desired way.\n     */\n    getLogFormatter() {\n        return this.logFormatter;\n    }\n    /**\n     * Get the log level name from the log level number.\n     *\n     * For example, if the log level is 16, it will return 'WARN'.\n     *\n     * @param logLevel - The log level to get the name of\n     */\n    getLogLevelNameFromNumber(logLevel) {\n        let found;\n        for (const [key, value] of Object.entries(LogLevelThreshold)) {\n            if (value === logLevel) {\n                found = key;\n                break;\n            }\n        }\n        return found;\n    }\n    /**\n     * Get information that will be added in all log item by\n     * this Logger instance (different from user-provided persistent attributes).\n     */\n    getPowertoolsLogData() {\n        return this.powertoolsLogData;\n    }\n    /**\n     * Check if a given log level is valid.\n     *\n     * @param logLevel - The log level to check\n     */\n    isValidLogLevel(logLevel) {\n        return typeof logLevel === 'string' && logLevel in LogLevelThreshold;\n    }\n    /**\n     * Check if a given sample rate value is valid.\n     *\n     * @param sampleRateValue - The sample rate value to check\n     */\n    isValidSampleRate(sampleRateValue) {\n        return (typeof sampleRateValue === 'number' &&\n            0 <= sampleRateValue &&\n            sampleRateValue <= 1);\n    }\n    /**\n     * Print a given log with given log level.\n     *\n     * @param logLevel - The log level\n     * @param log - The log item to print\n     */\n    printLog(logLevel, log) {\n        log.prepareForPrint();\n        const consoleMethod = logLevel === LogLevelThreshold.CRITICAL\n            ? 'error'\n            : this.getLogLevelNameFromNumber(logLevel).toLowerCase();\n        this.console[consoleMethod](JSON.stringify(log.getAttributes(), this.getJsonReplacer(), this.logIndentation));\n    }\n    /**\n     * Print or buffer a given log with given log level.\n     *\n     * @param logLevel - The log level threshold\n     * @param input - The log message\n     * @param extraInput - The extra input to log\n     */\n    processLogItem(logLevel, input, extraInput) {\n        const traceId = getXRayTraceIdFromEnv();\n        if (traceId !== undefined && this.shouldBufferLog(traceId, logLevel)) {\n            try {\n                this.bufferLogItem(traceId, this.createAndPopulateLogItem(logLevel, input, extraInput), logLevel);\n            }\n            catch (error) {\n                this.printLog(LogLevelThreshold.WARN, this.createAndPopulateLogItem(LogLevelThreshold.WARN, `Unable to buffer log: ${error.message}`, [error]));\n                this.printLog(logLevel, this.createAndPopulateLogItem(logLevel, input, extraInput));\n            }\n            return;\n        }\n        if (logLevel >= this.logLevel) {\n            if (this.#isInitialized) {\n                this.printLog(logLevel, this.createAndPopulateLogItem(logLevel, input, extraInput));\n            }\n            else {\n                this.#initBuffer.push([logLevel, [logLevel, input, extraInput]]);\n            }\n        }\n    }\n    /**\n     * Initialize the console property as an instance of the internal version of Console() class (PR #748)\n     * or as the global node console if the `POWERTOOLS_DEV' env variable is set and has truthy value.\n     */\n    setConsole() {\n        if (!isDevMode()) {\n            this.console = new Console({\n                stdout: process.stdout,\n                stderr: process.stderr,\n            });\n        }\n        else {\n            this.console = console;\n        }\n        /**\n         * Patch `console.trace` to avoid printing a stack trace and aligning with AWS Lambda behavior - see #2902\n         */\n        this.console.trace = (message, ...optionalParams) => {\n            this.console.log(message, ...optionalParams);\n        };\n    }\n    /**\n     * Set the initial Logger log level based on the following order:\n     * 1. If a log level is set using AWS Lambda Advanced Logging Controls, it sets it.\n     * 2. If a log level is passed to the constructor, it sets it.\n     * 3. If a log level is set via custom config service, it sets it.\n     * 4. If a log level is set via env variables, it sets it.\n     *\n     * If none of the above is true, the default log level applies (`INFO`).\n     *\n     * @param logLevel - Log level passed to the constructor\n     */\n    setInitialLogLevel(logLevel) {\n        const constructorLogLevel = logLevel?.toUpperCase();\n        if (this.awsLogLevelShortCircuit(constructorLogLevel)) {\n            this.#initialLogLevel = this.logLevel;\n            return;\n        }\n        if (this.isValidLogLevel(constructorLogLevel)) {\n            this.logLevel = LogLevelThreshold[constructorLogLevel];\n            this.#initialLogLevel = this.logLevel;\n            return;\n        }\n        const customConfigValue = this.getCustomConfigService()\n            ?.getLogLevel()\n            ?.toUpperCase();\n        if (this.isValidLogLevel(customConfigValue)) {\n            this.logLevel = LogLevelThreshold[customConfigValue];\n            this.#initialLogLevel = this.logLevel;\n            return;\n        }\n        const logLevelVariable = getStringFromEnv({\n            key: 'POWERTOOLS_LOG_LEVEL',\n            defaultValue: '',\n        });\n        const logLevelVariableAlias = getStringFromEnv({\n            key: 'LOG_LEVEL',\n            defaultValue: '',\n        });\n        const logLevelValue = logLevelVariable !== '' ? logLevelVariable : logLevelVariableAlias;\n        if (this.isValidLogLevel(logLevelValue)) {\n            this.logLevel = LogLevelThreshold[logLevelValue];\n            this.#initialLogLevel = this.logLevel;\n        }\n    }\n    /**\n     * Set the sample rate value with the following priority:\n     * 1. Constructor value\n     * 2. Custom config service value\n     * 3. Environment variable value\n     * 4. Default value (zero)\n     *\n     * @param sampleRateValue - The sample rate value\n     */\n    setInitialSampleRate(sampleRateValue) {\n        const constructorValue = sampleRateValue;\n        const customConfigValue = this.getCustomConfigService()?.getSampleRateValue();\n        const sampleRateEnvVariable = getNumberFromEnv({\n            key: 'POWERTOOLS_LOGGER_SAMPLE_RATE',\n            defaultValue: 0,\n        });\n        for (const value of [\n            constructorValue,\n            customConfigValue,\n            sampleRateEnvVariable,\n        ]) {\n            if (this.isValidSampleRate(value)) {\n                this.#debugLogSampling.sampleRateValue = value;\n                this.powertoolsLogData.sampleRateValue = value;\n                if (this.#shouldEnableDebugSampling() &&\n                    this.logLevel > LogLevelThreshold.TRACE) {\n                    this.setLogLevel('DEBUG');\n                    this.debug('Setting log level to DEBUG due to sampling rate');\n                }\n                break;\n            }\n        }\n    }\n    /**\n     * If the log event feature is enabled via env variable, it sets a property that tracks whether\n     * the event passed to the Lambda function handler should be logged or not.\n     */\n    setLogEvent() {\n        this.logEvent = getBooleanFromEnv({\n            key: 'POWERTOOLS_LOGGER_LOG_EVENT',\n            defaultValue: false,\n        });\n    }\n    /**\n     * Set the log formatter instance, in charge of giving a custom format\n     * to the structured logs, and optionally the ordering for keys within logs.\n     *\n     * @param logFormatter - The log formatter\n     * @param logRecordOrder - Optional list of keys to specify order in logs\n     */\n    setLogFormatter(logFormatter, logRecordOrder) {\n        this.logFormatter =\n            logFormatter ??\n                new PowertoolsLogFormatter({\n                    logRecordOrder,\n                });\n    }\n    /**\n     * If the `POWERTOOLS_DEV` env variable is set,\n     * add JSON indentation for pretty printing logs.\n     */\n    setLogIndentation() {\n        if (isDevMode()) {\n            this.logIndentation = LogJsonIndent.PRETTY;\n        }\n    }\n    /**\n     * Configure the Logger instance settings that will affect the Logger's behaviour\n     * and the content of all logs.\n     *\n     * @param options - Options to configure the Logger instance\n     */\n    setOptions(options) {\n        const { logLevel, serviceName, sampleRateValue, logFormatter, persistentKeys, persistentLogAttributes, // deprecated in favor of persistentKeys\n        environment, jsonReplacerFn, logRecordOrder, logBufferOptions, correlationIdSearchFn, } = options;\n        if (persistentLogAttributes &&\n            Object.keys(persistentLogAttributes).length > 0 &&\n            persistentKeys &&\n            Object.keys(persistentKeys).length > 0) {\n            this.warn('Both persistentLogAttributes and persistentKeys options were provided. Using persistentKeys as persistentLogAttributes is deprecated and will be removed in future releases');\n        }\n        // configurations that affect log content\n        this.setPowertoolsLogData(serviceName, environment, persistentKeys || persistentLogAttributes);\n        // configurations that affect Logger behavior\n        const lambdaLogLevel = getStringFromEnv({\n            key: 'AWS_LAMBDA_LOG_LEVEL',\n            defaultValue: '',\n        });\n        const AlcLogLevel = lambdaLogLevel === 'FATAL' ? 'CRITICAL' : lambdaLogLevel;\n        if (this.isValidLogLevel(AlcLogLevel)) {\n            this.#alcLogLevel = AlcLogLevel;\n        }\n        this.setLogEvent();\n        this.setInitialLogLevel(logLevel);\n        this.setInitialSampleRate(sampleRateValue);\n        // configurations that affect how logs are printed\n        this.setLogFormatter(logFormatter, logRecordOrder);\n        this.setConsole();\n        this.setLogIndentation();\n        this.#jsonReplacerFn = jsonReplacerFn;\n        this.#setLogBuffering(logBufferOptions);\n        this.#correlationIdSearchFn = correlationIdSearchFn;\n        return this;\n    }\n    /**\n     * Add important data to the Logger instance that will affect the content of all logs.\n     *\n     * @param serviceName - The service name\n     * @param environment - The environment\n     * @param persistentKeys - The persistent log attributes\n     */\n    setPowertoolsLogData(serviceName, environment, persistentKeys) {\n        this.addToPowertoolsLogData({\n            awsRegion: getStringFromEnv({\n                key: 'AWS_REGION',\n                defaultValue: '',\n            }),\n            environment: environment ||\n                this.getCustomConfigService()?.getCurrentEnvironment() ||\n                getStringFromEnv({\n                    key: 'ENVIRONMENT',\n                    defaultValue: '',\n                }),\n            serviceName: serviceName ||\n                this.getCustomConfigService()?.getServiceName() ||\n                getStringFromEnv({\n                    key: 'POWERTOOLS_SERVICE_NAME',\n                    defaultValue: '',\n                }) ||\n                this.defaultServiceName,\n        });\n        persistentKeys && this.appendPersistentKeys(persistentKeys);\n    }\n    /**\n     * Configure the buffer settings for the Logger instance.\n     *\n     * @param options - Options to configure the Logger instance\n     */\n    #setLogBuffering(options) {\n        if (options === undefined) {\n            return;\n        }\n        // `enabled` is a boolean, so we set it to true if it's not explicitly set to false\n        this.#bufferConfig.enabled = options?.enabled !== false;\n        // if `enabled` is false, we don't need to set any other options\n        if (this.#bufferConfig.enabled === false)\n            return;\n        if (options?.maxBytes !== undefined) {\n            this.#bufferConfig.maxBytes = options.maxBytes;\n        }\n        this.#buffer = new CircularMap({\n            maxBytesSize: this.#bufferConfig.maxBytes,\n        });\n        if (options?.flushOnErrorLog === false) {\n            this.#bufferConfig.flushOnErrorLog = false;\n        }\n        const bufferAtLogLevel = options?.bufferAtVerbosity?.toUpperCase();\n        if (this.isValidLogLevel(bufferAtLogLevel)) {\n            this.#bufferConfig.bufferAtVerbosity =\n                LogLevelThreshold[bufferAtLogLevel];\n        }\n        if (this.#alcLogLevel !== undefined &&\n            LogLevelThreshold[this.#alcLogLevel] >\n                this.#bufferConfig.bufferAtVerbosity) {\n            this.#warnOnce('Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Buffered logs will be filtered by ALC');\n        }\n    }\n    /**\n     * Add a log to the buffer.\n     *\n     * @param xrayTraceId - `_X_AMZN_TRACE_ID` of the request\n     * @param log - Log to be buffered\n     * @param logLevel - The level of log to be buffered\n     */\n    bufferLogItem(xrayTraceId, log, logLevel) {\n        log.prepareForPrint();\n        // This is the first time we see this traceId, so we need to clear the buffer\n        // from previous requests. This is ok because in AWS Lambda, the same sandbox\n        // environment can only ever be used by one request at a time.\n        if (this.#buffer?.has(xrayTraceId) === false) {\n            this.#buffer?.clear();\n        }\n        this.#buffer?.setItem(xrayTraceId, JSON.stringify(log.getAttributes(), this.getJsonReplacer(), this.logIndentation), logLevel);\n    }\n    /**\n     * Flush all logs in the request buffer.\n     *\n     * This is called automatically when you use the {@link injectLambdaContext | `@logger.injectLambdaContext()`} decorator and\n     * your function throws an error.\n     */\n    flushBuffer() {\n        const traceId = getXRayTraceIdFromEnv();\n        if (traceId === undefined) {\n            return;\n        }\n        const buffer = this.#buffer?.get(traceId);\n        if (buffer === undefined) {\n            return;\n        }\n        for (const item of buffer) {\n            const consoleMethod = this.getLogLevelNameFromNumber(item.logLevel).toLowerCase();\n            this.console[consoleMethod](item.value);\n        }\n        if (buffer.hasEvictedLog) {\n            this.printLog(LogLevelThreshold.WARN, this.createAndPopulateLogItem(LogLevelThreshold.WARN, 'Some logs are not displayed because they were evicted from the buffer. Increase buffer size to store more logs in the buffer', []));\n        }\n        if (this.#alcLogLevel !== undefined &&\n            LogLevelThreshold[this.#alcLogLevel] >\n                this.#bufferConfig.bufferAtVerbosity) {\n            this.#warnOnce('Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Some logs might be missing.');\n        }\n        this.#buffer?.delete(traceId);\n    }\n    /**\n     * Empties the buffer for the current request\n     */\n    clearBuffer() {\n        const traceId = getXRayTraceIdFromEnv();\n        if (traceId === undefined) {\n            return;\n        }\n        this.#buffer?.delete(traceId);\n    }\n    /**\n     * Test if the log meets the criteria to be buffered.\n     *\n     * @param traceId - `_X_AMZN_TRACE_ID` of the request\n     * @param logLevel - The level of the log being considered\n     */\n    shouldBufferLog(traceId, logLevel) {\n        return (this.#bufferConfig.enabled &&\n            traceId !== undefined &&\n            logLevel <= this.#bufferConfig.bufferAtVerbosity);\n    }\n    /**\n     * Set the correlation ID for the log item.\n     *\n     * This method can be used to set the correlation ID for the log item or to search for the correlation ID in the event.\n     *\n     * @example\n     * ```typescript\n     * import { Logger } from '@aws-lambda-powertools/logger';\n     *\n     * const logger = new Logger();\n     * logger.setCorrelationId('my-correlation-id'); // sets the correlation ID directly with the first argument as value\n     * ```\n     *\n     * @example\n     * ```typescript\n     * import { Logger } from '@aws-lambda-powertools/logger';\n     * import { search } from '@aws-lambda-powertools/logger/correlationId';\n     *\n     * const logger = new Logger({ correlationIdSearchFn: search });\n     * logger.setCorrelationId(event, 'requestContext.requestId'); // sets the correlation ID from the event using JMSPath expression\n     * ```\n     *\n     * @param value - The value to set as the correlation ID or the event to search for the correlation ID\n     * @param correlationIdPath - Optional JMESPath expression to extract the correlation ID for the payload\n     */\n    setCorrelationId(value, correlationIdPath) {\n        if (typeof correlationIdPath === 'string') {\n            if (!this.#correlationIdSearchFn) {\n                this.#warnOnce('correlationIdPath is set but no search function was provided. The correlation ID will not be added to the log attributes.');\n                return;\n            }\n            const correlationId = this.#correlationIdSearchFn(correlationIdPath, value);\n            if (correlationId)\n                this.appendKeys({ correlation_id: correlationId });\n            return;\n        }\n        // If no correlationIdPath is provided, set the correlation ID directly\n        this.appendKeys({ correlation_id: value });\n    }\n    /**\n     * Get the correlation ID from the log attributes.\n     */\n    getCorrelationId() {\n        return this.temporaryLogAttributes.correlation_id;\n    }\n}\nexport { Logger };\n", "import { LogFormatter } from './LogFormatter.js';\nimport { LogItem } from './LogItem.js';\n/**\n * This class is used to transform a set of log key-value pairs\n * in the Powertools for AWS Lambda default structure log format.\n *\n * @class\n * @extends {LogFormatter}\n */\nclass PowertoolsLogFormatter extends LogFormatter {\n    /**\n     * List of keys to order log attributes by.\n     *\n     * This can be a set of keys or an array of keys.\n     */\n    #logRecordOrder;\n    constructor(options) {\n        super();\n        this.#logRecordOrder = options?.logRecordOrder;\n    }\n    /**\n     * It formats key-value pairs of log attributes.\n     *\n     * @param {UnformattedAttributes} attributes - unformatted attributes\n     * @param {LogAttributes} additionalLogAttributes - additional log attributes\n     */\n    formatAttributes(attributes, additionalLogAttributes) {\n        const baseAttributes = {\n            level: attributes.logLevel,\n            message: attributes.message,\n            timestamp: this.formatTimestamp(attributes.timestamp),\n            service: attributes.serviceName,\n            cold_start: attributes.lambdaContext?.coldStart,\n            function_arn: attributes.lambdaContext?.invokedFunctionArn,\n            function_memory_size: attributes.lambdaContext?.memoryLimitInMB,\n            function_name: attributes.lambdaContext?.functionName,\n            function_request_id: attributes.lambdaContext?.awsRequestId,\n            sampling_rate: attributes.sampleRateValue,\n            xray_trace_id: attributes.xRayTraceId,\n        };\n        // If logRecordOrder is not set, return the log item with the attributes in the order they were added\n        if (this.#logRecordOrder === undefined) {\n            return new LogItem({ attributes: baseAttributes }).addAttributes(additionalLogAttributes);\n        }\n        const orderedAttributes = {};\n        // If logRecordOrder is set, order the attributes in the log item\n        for (const key of this.#logRecordOrder) {\n            if (key in baseAttributes && !(key in orderedAttributes)) {\n                orderedAttributes[key] = baseAttributes[key];\n            }\n            else if (key in additionalLogAttributes &&\n                !(key in orderedAttributes)) {\n                orderedAttributes[key] = additionalLogAttributes[key];\n            }\n        }\n        // Add remaining attributes from baseAttributes\n        for (const key in baseAttributes) {\n            if (!(key in orderedAttributes)) {\n                orderedAttributes[key] = baseAttributes[key];\n            }\n        }\n        // Add remaining attributes from additionalLogAttributes\n        for (const key in additionalLogAttributes) {\n            if (!(key in orderedAttributes)) {\n                orderedAttributes[key] = additionalLogAttributes[key];\n            }\n        }\n        const powertoolsLogItem = new LogItem({\n            attributes: orderedAttributes,\n        });\n        return powertoolsLogItem;\n    }\n}\nexport { PowertoolsLogFormatter };\n", "import { isString } from '@aws-lambda-powertools/commons/typeutils';\n/**\n * A data structure that holds a value and its byte size.\n *\n * @internal\n */\nexport class SizedItem {\n    value;\n    logLevel;\n    byteSize;\n    constructor(value, logLevel) {\n        if (!isString(value)) {\n            throw new Error('Value should be a string');\n        }\n        this.value = value;\n        this.logLevel = logLevel;\n        this.byteSize = Buffer.byteLength(value);\n    }\n}\n/**\n * A set that tracks its current byte size.\n *\n * @internal\n */\nexport class SizedSet extends Set {\n    currentBytesSize = 0;\n    hasEvictedLog = false;\n    /**\n     * Adds an item to the set and updates the current byte size.\n     *\n     * @param item - The item to add\n     */\n    add(item) {\n        this.currentBytesSize += item.byteSize;\n        super.add(item);\n        return this;\n    }\n    /**\n     * Deletes an item from the set and updates the current byte size.\n     *\n     * @param item - The item to delete\n     */\n    delete(item) {\n        const wasDeleted = super.delete(item);\n        if (wasDeleted) {\n            this.currentBytesSize -= item.byteSize;\n        }\n        return wasDeleted;\n    }\n    /**\n     * Clears all items from the set and resets the current byte size.\n     */\n    clear() {\n        super.clear();\n        this.currentBytesSize = 0;\n    }\n    /**\n     * Removes the first item from the set and returns it.\n     */\n    shift() {\n        const firstElement = this.values().next().value;\n        if (firstElement) {\n            this.delete(firstElement);\n        }\n        return firstElement;\n    }\n}\n/**\n * A ring buffer that stores logs in a circular manner.\n *\n * @internal\n */\nexport class CircularMap extends Map {\n    #maxBytesSize;\n    #onBufferOverflow;\n    constructor({ maxBytesSize, onBufferOverflow, }) {\n        super();\n        this.#maxBytesSize = maxBytesSize;\n        this.#onBufferOverflow = onBufferOverflow;\n    }\n    /**\n     * Adds an item to the buffer, evicting older items if necessary.\n     *\n     * @param key - The key to associate with the item\n     * @param value - The item to add\n     * @param logLevel - The log level of the item\n     */\n    setItem(key, value, logLevel) {\n        const item = new SizedItem(value, logLevel);\n        if (item.byteSize > this.#maxBytesSize) {\n            throw new Error('Item too big');\n        }\n        const buffer = this.get(key) || new SizedSet();\n        if (buffer.currentBytesSize + item.byteSize >= this.#maxBytesSize) {\n            this.#deleteFromBufferUntilSizeIsLessThanMax(buffer, item);\n            if (this.#onBufferOverflow) {\n                this.#onBufferOverflow();\n            }\n        }\n        buffer.add(item);\n        super.set(key, buffer);\n        return this;\n    }\n    /**\n     * Deletes an item from the buffer.\n     *\n     * @param key - The key associated with the item\n     * @param value - The item to delete\n     */\n    #deleteFromBufferUntilSizeIsLessThanMax(buffer, item) {\n        while (buffer.currentBytesSize + item.byteSize >= this.#maxBytesSize) {\n            buffer.shift();\n            buffer.hasEvictedLog = true;\n        }\n    }\n}\n", "import validate from './validate.js';\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  //\n  // Note to future-self: No, you can't remove the `toLowerCase()` call.\n  // REF: https://github.com/uuidjs/uuid/pull/677#issuecomment-1757351351\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset);\n  // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n  return uuid;\n}\nexport default stringify;", "import crypto from 'node:crypto';\nconst rnds8Pool = new Uint8Array(256); // # of random values to pre-allocate\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n  if (poolPtr > rnds8Pool.length - 16) {\n    crypto.randomFillSync(rnds8Pool);\n    poolPtr = 0;\n  }\n  return rnds8Pool.slice(poolPtr, poolPtr += 16);\n}", "import crypto from 'node:crypto';\nexport default {\n  randomUUID: crypto.randomUUID\n};", "import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    offset = offset || 0;\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n    return buf;\n  }\n  return unsafeStringify(rnds);\n}\nexport default v4;", "import { Logger as PowertoolsLogger } from '@aws-lambda-powertools/logger';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n/**\r\n * Context information for structured logging\r\n */\r\nexport interface LogContext {\r\n  traceId?: string;\r\n  agent?: string;\r\n  leadId?: string;\r\n  tenantId?: string;\r\n  campaignId?: string;\r\n  [key: string]: any;\r\n}\r\n\r\n/**\r\n * Structured logger using AWS Lambda Powertools\r\n * Automatically includes trace_id, agent, leadId, and tenantId in all logs\r\n */\r\nexport class Logger {\r\n  private logger: PowertoolsLogger;\r\n  private context: LogContext;\r\n\r\n  constructor(serviceName?: string, context?: LogContext) {\r\n    this.logger = new PowertoolsLogger({\r\n      serviceName: serviceName || process.env.POWERTOOLS_SERVICE_NAME || 'fibonacci-service',\r\n      logLevel: (process.env.LOG_LEVEL as 'DEBUG' | 'INFO' | 'WARN' | 'ERROR') || 'INFO',\r\n      sampleRateValue: 0.1, // Sample 10% of logs for detailed tracing\r\n    });\r\n\r\n    this.context = {\r\n      traceId: context?.traceId || uuidv4(),\r\n      ...context,\r\n    };\r\n\r\n    // Add persistent context to all logs\r\n    if (this.context.agent) {\r\n      this.logger.appendKeys({ agent: this.context.agent });\r\n    }\r\n    if (this.context.leadId) {\r\n      this.logger.appendKeys({ leadId: this.context.leadId });\r\n    }\r\n    if (this.context.tenantId) {\r\n      this.logger.appendKeys({ tenantId: this.context.tenantId });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the current trace ID\r\n   */\r\n  getTraceId(): string {\r\n    return this.context.traceId || '';\r\n  }\r\n\r\n  /**\r\n   * Set a new trace ID\r\n   */\r\n  setTraceId(traceId: string): void {\r\n    this.context.traceId = traceId;\r\n  }\r\n\r\n  /**\r\n   * Get the current context\r\n   */\r\n  getContext(): LogContext {\r\n    return { ...this.context };\r\n  }\r\n\r\n  /**\r\n   * Update context with new values\r\n   */\r\n  updateContext(newContext: Partial<LogContext>): void {\r\n    this.context = { ...this.context, ...newContext };\r\n    \r\n    // Update persistent keys in Powertools logger\r\n    const keysToAdd: Record<string, any> = {};\r\n    if (newContext.agent) keysToAdd.agent = newContext.agent;\r\n    if (newContext.leadId) keysToAdd.leadId = newContext.leadId;\r\n    if (newContext.tenantId) keysToAdd.tenantId = newContext.tenantId;\r\n    if (newContext.campaignId) keysToAdd.campaignId = newContext.campaignId;\r\n    \r\n    if (Object.keys(keysToAdd).length > 0) {\r\n      this.logger.appendKeys(keysToAdd);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Log info level message\r\n   */\r\n  info(message: string, metadata?: Record<string, any>): void {\r\n    this.logger.info(message, {\r\n      trace_id: this.context.traceId,\r\n      ...metadata,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log warning level message\r\n   */\r\n  warn(message: string, metadata?: Record<string, any>): void {\r\n    this.logger.warn(message, {\r\n      trace_id: this.context.traceId,\r\n      ...metadata,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log error level message\r\n   */\r\n  error(message: string, error?: Error, metadata?: Record<string, any>): void {\r\n    const errorDetails = error\r\n      ? {\r\n          error: {\r\n            name: error.name,\r\n            message: error.message,\r\n            stack: error.stack,\r\n          },\r\n        }\r\n      : {};\r\n\r\n    this.logger.error(message, {\r\n      trace_id: this.context.traceId,\r\n      ...errorDetails,\r\n      ...metadata,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log debug level message\r\n   */\r\n  debug(message: string, metadata?: Record<string, any>): void {\r\n    this.logger.debug(message, {\r\n      trace_id: this.context.traceId,\r\n      ...metadata,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add persistent log keys that will be included in all subsequent logs\r\n   */\r\n  appendKeys(keys: Record<string, any>): void {\r\n    this.logger.appendKeys(keys);\r\n  }\r\n\r\n  /**\r\n   * Remove persistent log keys\r\n   */\r\n  removeKeys(keys: string[]): void {\r\n    this.logger.removeKeys(keys);\r\n  }\r\n\r\n  /**\r\n   * Create a child logger with additional context\r\n   */\r\n  createChild(additionalContext: Partial<LogContext>): Logger {\r\n    const childLogger = new Logger(\r\n      process.env.POWERTOOLS_SERVICE_NAME || 'fibonacci-service',\r\n      { ...this.context, ...additionalContext }\r\n    );\r\n    return childLogger;\r\n  }\r\n\r\n  /**\r\n   * Log custom metric (for backward compatibility)\r\n   */\r\n  logCustomMetric(metricName: string, value: number, metadata?: Record<string, any>): void {\r\n    this.info(`Custom metric: ${metricName}`, {\r\n      metric: metricName,\r\n      value,\r\n      ...metadata\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log API request (for backward compatibility)\r\n   */\r\n  logApiRequest(method: string, path: string, metadata?: Record<string, any>): void {\r\n    this.info(`API Request: ${method} ${path}`, {\r\n      method,\r\n      path,\r\n      ...metadata\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Finish operation logging (for backward compatibility)\r\n   */\r\n  finishOperation(success: boolean, metadata?: Record<string, any>): void {\r\n    if (success) {\r\n      this.info('Operation completed successfully', metadata);\r\n    } else {\r\n      this.error('Operation failed', undefined, metadata);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Create a logger instance with optional service name and context\r\n */\r\nexport function createLogger(serviceName?: string, context?: LogContext): Logger {\r\n  return new Logger(serviceName, context);\r\n}\r\n\r\n/**\r\n * Create a logger for an agent with automatic agent name context\r\n */\r\nexport function createAgentLogger(agentName: string, context?: Partial<LogContext>): Logger {\r\n  return new Logger(`fibonacci-${agentName}`, {\r\n    agent: agentName,\r\n    ...context,\r\n  });\r\n}\r\n\r\n/**\r\n * Type alias for enhanced logger (for backward compatibility)\r\n */\r\nexport type EnhancedLogger = Logger;\r\n\r\n/**\r\n * Default logger instance\r\n */\r\nexport const logger = new Logger();\r\n", "// ESM wrapper for pg\nimport pg from '../lib/index.js'\n\n// Re-export all the properties\nexport const Client = pg.Client\nexport const Pool = pg.Pool\nexport const Connection = pg.Connection\nexport const types = pg.types\nexport const Query = pg.Query\nexport const DatabaseError = pg.DatabaseError\nexport const escapeIdentifier = pg.escapeIdentifier\nexport const escapeLiteral = pg.escapeLiteral\nexport const Result = pg.Result\nexport const TypeOverrides = pg.TypeOverrides\n\n// Also export the defaults\nexport const defaults = pg.defaults\n\n// Re-export the default\nexport default pg\n", "import { Pool, PoolClient, QueryResult, QueryResultRow } from 'pg';\r\nimport { SecretsManager } from 'aws-sdk';\r\nimport { Logger } from './logger';\r\nimport { traceQuery, addAnnotations, addMetadata } from './xray-tracer';\r\n\r\nconst logger = new Logger('database');\r\nconst secretsManager = new SecretsManager();\r\n\r\n/**\r\n * Database credentials interface\r\n */\r\ninterface DbCredentials {\r\n  username: string;\r\n  password: string;\r\n  host: string;\r\n  port: number;\r\n  dbname: string;\r\n}\r\n\r\n/**\r\n * Database connection pool singleton\r\n */\r\nclass DatabasePool {\r\n  private pool: Pool | null = null;\r\n  private credentials: DbCredentials | null = null;\r\n  private secretArn: string;\r\n\r\n  constructor(secretArn?: string) {\r\n    this.secretArn = secretArn || process.env.DB_SECRET_ARN || '';\r\n  }\r\n\r\n  /**\r\n   * Get database credentials from Secrets Manager\r\n   */\r\n  private async getCredentials(): Promise<DbCredentials> {\r\n    if (this.credentials) {\r\n      return this.credentials;\r\n    }\r\n\r\n    try {\r\n      logger.info('Fetching database credentials from Secrets Manager', {\r\n        secretArn: this.secretArn,\r\n      });\r\n\r\n      const response = await secretsManager\r\n        .getSecretValue({ SecretId: this.secretArn })\r\n        .promise();\r\n\r\n      if (!response.SecretString) {\r\n        throw new Error('Secret string is empty');\r\n      }\r\n\r\n      const secret = JSON.parse(response.SecretString);\r\n      this.credentials = {\r\n        username: secret.username,\r\n        password: secret.password,\r\n        host: secret.host,\r\n        port: secret.port || 5432,\r\n        dbname: secret.dbname || 'fibonacci',\r\n      };\r\n\r\n      logger.info('Database credentials fetched successfully');\r\n      return this.credentials;\r\n    } catch (error) {\r\n      logger.error('Failed to fetch database credentials', error as Error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize connection pool\r\n   */\r\n  private async initializePool(): Promise<Pool> {\r\n    if (this.pool) {\r\n      return this.pool;\r\n    }\r\n\r\n    const credentials = await this.getCredentials();\r\n\r\n    logger.info('Initializing database connection pool', {\r\n      host: credentials.host,\r\n      port: credentials.port,\r\n      database: credentials.dbname,\r\n    });\r\n\r\n    this.pool = new Pool({\r\n      user: credentials.username,\r\n      password: credentials.password,\r\n      host: credentials.host,\r\n      port: credentials.port,\r\n      database: credentials.dbname,\r\n      max: 10, // Maximum number of clients in the pool\r\n      idleTimeoutMillis: 30000, // Close idle clients after 30 seconds\r\n      connectionTimeoutMillis: 10000, // Return error after 10 seconds if connection cannot be established\r\n      ssl: {\r\n        rejectUnauthorized: false, // Required for Aurora\r\n      },\r\n    });\r\n\r\n    // Handle pool errors\r\n    this.pool.on('error', (err) => {\r\n      logger.error('Unexpected error on idle database client', err);\r\n    });\r\n\r\n    logger.info('Database connection pool initialized');\r\n    return this.pool;\r\n  }\r\n\r\n  /**\r\n   * Get the connection pool\r\n   */\r\n  async getPool(): Promise<Pool> {\r\n    return await this.initializePool();\r\n  }\r\n\r\n  /**\r\n   * Close the connection pool\r\n   */\r\n  async close(): Promise<void> {\r\n    if (this.pool) {\r\n      logger.info('Closing database connection pool');\r\n      await this.pool.end();\r\n      this.pool = null;\r\n      this.credentials = null;\r\n    }\r\n  }\r\n}\r\n\r\n// Singleton instance\r\nconst dbPool = new DatabasePool();\r\n\r\n/**\r\n * Execute a query with retry logic and X-Ray tracing\r\n */\r\nexport async function query<T extends QueryResultRow = any>(\r\n  text: string,\r\n  params?: any[],\r\n  maxRetries: number = 3\r\n): Promise<QueryResult<T>> {\r\n  // Extract query operation for better tracing\r\n  const operation = text.trim().split(' ')[0].toUpperCase();\r\n  \r\n  return traceQuery(\r\n    operation,\r\n    async () => {\r\n      const pool = await dbPool.getPool();\r\n      let lastError: Error | null = null;\r\n\r\n      for (let attempt = 1; attempt <= maxRetries; attempt++) {\r\n        try {\r\n          logger.debug('Executing database query', {\r\n            attempt,\r\n            query: text.substring(0, 100), // Log first 100 chars\r\n            paramCount: params?.length || 0,\r\n          });\r\n\r\n          // Add query metadata to X-Ray\r\n          addMetadata({\r\n            query: text.substring(0, 200),\r\n            paramCount: params?.length || 0,\r\n            attempt\r\n          }, 'database');\r\n\r\n          const startTime = Date.now();\r\n          const result = await pool.query<T>(text, params);\r\n          const duration = Date.now() - startTime;\r\n\r\n          // Add success annotations\r\n          addAnnotations({\r\n            dbOperation: operation,\r\n            dbRowCount: result.rowCount || 0,\r\n            dbDuration: duration\r\n          });\r\n\r\n          logger.debug('Query executed successfully', {\r\n            rowCount: result.rowCount,\r\n            duration,\r\n          });\r\n\r\n          return result;\r\n        } catch (error) {\r\n          lastError = error as Error;\r\n          logger.warn(`Query failed on attempt ${attempt}`, {\r\n            attempt,\r\n            maxRetries,\r\n            error: lastError.message,\r\n          });\r\n\r\n          // Check if error is transient (connection issues)\r\n          const isTransient = isTransientError(lastError);\r\n\r\n          if (!isTransient || attempt === maxRetries) {\r\n            // Add error annotations\r\n            addAnnotations({\r\n              dbOperation: operation,\r\n              dbError: lastError.name\r\n            });\r\n\r\n            logger.error('Query failed permanently', lastError, {\r\n              query: text.substring(0, 100),\r\n              attempts: attempt,\r\n            });\r\n            throw lastError;\r\n          }\r\n\r\n          // Exponential backoff\r\n          const delay = Math.pow(2, attempt) * 100;\r\n          logger.debug(`Retrying query after ${delay}ms`);\r\n          await sleep(delay);\r\n        }\r\n      }\r\n\r\n      throw lastError || new Error('Query failed after retries');\r\n    },\r\n    {\r\n      operation,\r\n      paramCount: params?.length || 0\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Execute a transaction with automatic rollback on error and X-Ray tracing\r\n */\r\nexport async function transaction<T>(\r\n  callback: (client: PoolClient) => Promise<T>\r\n): Promise<T> {\r\n  return traceQuery(\r\n    'TRANSACTION',\r\n    async () => {\r\n      const pool = await dbPool.getPool();\r\n      const client = await pool.connect();\r\n\r\n      try {\r\n        logger.debug('Starting database transaction');\r\n        await client.query('BEGIN');\r\n\r\n        const result = await callback(client);\r\n\r\n        await client.query('COMMIT');\r\n        logger.debug('Transaction committed successfully');\r\n\r\n        // Add success annotation\r\n        addAnnotations({ dbTransactionStatus: 'committed' });\r\n\r\n        return result;\r\n      } catch (error) {\r\n        await client.query('ROLLBACK');\r\n        logger.error('Transaction rolled back due to error', error as Error);\r\n        \r\n        // Add rollback annotation\r\n        addAnnotations({ dbTransactionStatus: 'rolled_back' });\r\n        \r\n        throw error;\r\n      } finally {\r\n        client.release();\r\n      }\r\n    },\r\n    { operation: 'transaction' }\r\n  );\r\n}\r\n\r\n/**\r\n * Get the database connection pool\r\n * Useful for LGPD compliance functions that need direct pool access\r\n */\r\nexport async function getPool(): Promise<Pool> {\r\n  return await dbPool.getPool();\r\n}\r\n\r\n/**\r\n * Get a client from the pool for manual transaction management\r\n */\r\nexport async function getClient(): Promise<PoolClient> {\r\n  const pool = await dbPool.getPool();\r\n  return await pool.connect();\r\n}\r\n\r\n/**\r\n * Close the database connection pool\r\n */\r\nexport async function closePool(): Promise<void> {\r\n  await dbPool.close();\r\n}\r\n\r\n/**\r\n * Check if an error is transient (should retry)\r\n */\r\nfunction isTransientError(error: Error): boolean {\r\n  const transientErrorCodes = [\r\n    'ECONNREFUSED',\r\n    'ECONNRESET',\r\n    'ETIMEDOUT',\r\n    'ENOTFOUND',\r\n    '57P03', // PostgreSQL: cannot connect now\r\n    '53300', // PostgreSQL: too many connections\r\n    '08006', // PostgreSQL: connection failure\r\n    '08003', // PostgreSQL: connection does not exist\r\n  ];\r\n\r\n  const errorMessage = error.message.toLowerCase();\r\n  const errorCode = (error as any).code;\r\n\r\n  return (\r\n    transientErrorCodes.includes(errorCode) ||\r\n    errorMessage.includes('connection') ||\r\n    errorMessage.includes('timeout') ||\r\n    errorMessage.includes('econnrefused')\r\n  );\r\n}\r\n\r\n/**\r\n * Sleep utility for retry delays\r\n */\r\nfunction sleep(ms: number): Promise<void> {\r\n  return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\n\r\n/**\r\n * Health check - verify database connectivity\r\n */\r\nexport async function healthCheck(): Promise<boolean> {\r\n  try {\r\n    const result = await query('SELECT 1 as health');\r\n    return result.rows.length > 0 && result.rows[0].health === 1;\r\n  } catch (error) {\r\n    logger.error('Database health check failed', error as Error);\r\n    return false;\r\n  }\r\n}\r\n", "/**\n * If the AWS_XRAY_CONTEXT_MISSING environment variable is not set, we set it to IGNORE_ERROR.\n *\n * This is to prevent the AWS X-Ray SDK from logging errors when using top-level await features that make HTTP requests.\n * For example, when using the Parameters utility to fetch parameters during the initialization of the Lambda handler - See #2046\n */\nif (process.env.AWS_XRAY_CONTEXT_MISSING === '' ||\n    process.env.AWS_XRAY_CONTEXT_MISSING === undefined) {\n    process.env.AWS_XRAY_CONTEXT_MISSING = 'IGNORE_ERROR';\n}\nimport { Utility } from '@aws-lambda-powertools/commons';\nimport { getServiceName, getStringFromEnv, getXRayTraceIdFromEnv, isRequestXRaySampled, } from '@aws-lambda-powertools/commons/utils/env';\nimport xraySdk from 'aws-xray-sdk-core';\nimport { ProviderService } from './provider/ProviderService.js';\nconst { Subsegment: XraySubsegment } = xraySdk;\n/**\n * Tracer is an opinionated thin wrapper for [AWS X-Ray SDK for Node.js](https://github.com/aws/aws-xray-sdk-node).\n *\n * Tracing data can be visualized through AWS X-Ray Console.\n *\n * **Key features**\n * - Auto capture cold start as annotation, and responses or full exceptions as metadata\n * - Auto-disable when not running in AWS Lambda environment\n * - Automatically trace HTTP(s) clients and generate segments for each request\n * - Support tracing functions via decorators, middleware, and manual instrumentation\n * - Support tracing AWS SDK v2 and v3 via AWS X-Ray SDK for Node.js\n *\n * **Functions usage with middleware**\n *\n * If you use function-based Lambda handlers you can use the {@link Tracer.captureLambdaHandler} middy middleware to automatically:\n * - handle the subsegment lifecycle\n * - add the `ServiceName` and `ColdStart` annotations\n * - add the function response as metadata\n * - add the function error as metadata (if any)\n *\n * @example\n * ```typescript\n * import { Tracer } from '@aws-lambda-powertools/tracer';\n * import { captureLambdaHandler } from '@aws-lambda-powertools/tracer/middleware';\n * import middy from '@middy/core';\n *\n * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n *\n * const lambdaHandler = async (_event: unknown, _context: unknown) => {\n *   ...\n * };\n *\n * export const handler = middy(lambdaHandler).use(captureLambdaHandler(tracer));\n * ```\n *\n * **Object oriented usage with decorators**\n *\n * If instead you use TypeScript Classes to wrap your Lambda handler you can use the {@link Tracer.captureLambdaHandler} decorator to automatically:\n * - handle the subsegment lifecycle\n * - add the `ServiceName` and `ColdStart` annotations\n * - add the function response as metadata\n * - add the function error as metadata (if any)\n *\n * @example\n * ```typescript\n * import { Tracer } from '@aws-lambda-powertools/tracer';\n * import type { LambdaInterface } from '@aws-lambda-powertools/commons/types';\n *\n * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n *\n * class Lambda implements LambdaInterface {\n *   \u2063@tracer.captureLambdaHandler()\n *   public handler(_event: unknown, _context: unknown) {\n *     ...\n *   }\n * }\n *\n * const handlerClass = new Lambda();\n * export const handler = handlerClass.handler.bind(handlerClass);\n * ```\n *\n * **Functions usage with manual instrumentation**\n *\n * If you prefer to manually instrument your Lambda handler you can use the methods in the tracer class directly.\n *\n * @example\n * ```typescript\n * import { Tracer } from '@aws-lambda-powertools/tracer';\n *\n * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n *\n * export const handler = async (_event: unknown, _context: unknown) => {\n *   const segment = tracer.getSegment(); // This is the facade segment (the one that is created by AWS Lambda)\n *   // Create subsegment for the function & set it as active\n *   const subsegment = segment.addNewSubsegment(`## ${process.env._HANDLER}`);\n *   tracer.setSegment(subsegment);\n *\n *   // Annotate the subsegment with the cold start & serviceName\n *   tracer.annotateColdStart();\n *   tracer.addServiceNameAnnotation();\n *\n *   let res;\n *   try {\n *       // ... your own logic goes here\n *       // Add the response as metadata\n *       tracer.addResponseAsMetadata(res, process.env._HANDLER);\n *   } catch (err) {\n *       // Add the error as metadata\n *       tracer.addErrorAsMetadata(err as Error);\n *       throw err;\n *   } finally {\n *       // Close the subsegment\n *       subsegment.close();\n *       // Set the facade segment as active again\n *       tracer.setSegment(segment);\n *   }\n *\n *   return res;\n * }\n * ```\n */\nclass Tracer extends Utility {\n    /**\n     * The provider service interface used by the Tracer.\n     * This interface defines the methods and properties that a provider service must implement.\n     */\n    provider;\n    /**\n     * Flag indicating whether to capture errors.\n     * This is used to determine if errors should be added to the trace as metadata.\n     *\n     * @default true\n     */\n    captureError = true;\n    /**\n     * Flag indicating whether to capture HTTP(s) requests.\n     * @default true\n     */\n    captureHTTPsRequests = true;\n    /**\n     * Flag indicating whether to capture response data.\n     * @default true\n     */\n    captureResponse = true;\n    /**\n     * The custom configuration service used by the Tracer.\n     */\n    customConfigService;\n    /**\n     * Cache environment variables once at init time.\n     */\n    #envConfig = {\n        awsExecutionEnv: '',\n        samLocal: '',\n        captureError: '',\n        captureHTTPsRequests: '',\n        captureResponse: '',\n        tracingEnabled: '',\n        serviceName: '',\n    };\n    /**\n     * The name of the service, is always initialized in the constructor in setOptions().\n     */\n    serviceName;\n    /**\n     * Flag indicating whether tracing is enabled.\n     * @default true\n     */\n    tracingEnabled = true;\n    constructor(options = {}) {\n        super();\n        this.#setEnvConfig();\n        this.setOptions(options);\n        this.provider = new ProviderService();\n        if (this.isTracingEnabled() && this.captureHTTPsRequests) {\n            this.provider.captureHTTPsGlobal();\n            this.provider.instrumentFetch();\n        }\n        if (!this.isTracingEnabled()) {\n            // Tell x-ray-sdk to not throw an error if context is missing but tracing is disabled\n            this.provider.setContextMissingStrategy(() => ({}));\n        }\n    }\n    /**\n     * Add an error to the current segment or subsegment as metadata.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-errors\n     *\n     * @param error - Error to serialize as metadata\n     * @param [remote] - Whether the error was thrown by a remote service. Defaults to `false`\n     */\n    addErrorAsMetadata(error, remote) {\n        if (!this.isTracingEnabled()) {\n            return;\n        }\n        const subsegment = this.getSegment();\n        if (subsegment === undefined) {\n            return;\n        }\n        if (!this.captureError) {\n            subsegment.addErrorFlag();\n            return;\n        }\n        subsegment.addError(error, remote || false);\n    }\n    /**\n     * Add response data to the current segment or subsegment as metadata.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-annotations\n     *\n     * @param data - Data to serialize as metadata\n     * @param methodName - Name of the method that is being traced\n     */\n    addResponseAsMetadata(data, methodName) {\n        if (data === undefined ||\n            !this.captureResponse ||\n            !this.isTracingEnabled()) {\n            return;\n        }\n        this.putMetadata(`${methodName} response`, data);\n    }\n    /**\n     * Add service name to the current segment or subsegment as annotation.\n     */\n    addServiceNameAnnotation() {\n        if (!this.isTracingEnabled()) {\n            return;\n        }\n        this.putAnnotation('Service', this.serviceName);\n    }\n    /**\n     * Add ColdStart annotation to the current segment or subsegment.\n     *\n     * If Tracer has been initialized outside the Lambda handler then the same instance\n     * of Tracer will be reused throughout the lifecycle of that same Lambda execution environment\n     * and this method will annotate `ColdStart: false` after the first invocation.\n     *\n     * @see https://docs.aws.amazon.com/lambda/latest/dg/runtimes-context.html\n     */\n    annotateColdStart() {\n        if (this.isTracingEnabled()) {\n            this.putAnnotation('ColdStart', this.getColdStart());\n        }\n    }\n    /**\n     * @deprecated Use {@link captureAWSv3Client | `captureAWSv3Client()`} instead.\n     *\n     * Patch all AWS SDK v2 clients and create traces when your application makes calls to AWS services.\n     *\n     * If you want to patch a specific client use {@link captureAWSClient} and if you are using AWS SDK v3 use {@link captureAWSv3Client} instead.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-awssdkclients.html\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     * const AWS = tracer.captureAWS(require('aws-sdk'));\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   ...\n     * }\n     * ```\n     *\n     * @param aws - AWS SDK v2 import\n     */\n    /* v8 ignore start */ captureAWS(aws) {\n        if (!this.isTracingEnabled())\n            return aws;\n        return this.provider.captureAWS(aws);\n    } /* v8 ignore stop */\n    /**\n     * @deprecated Use {@link captureAWSv3Client | `captureAWSv3Client()`} instead.\n     *\n     * Patch a specific AWS SDK v2 client and create traces when your application makes calls to that AWS service.\n     *\n     * If you want to patch all clients use {@link captureAWS} and if you are using AWS SDK v3 use {@link captureAWSv3Client} instead.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-awssdkclients.html\n     *\n     * @example\n     * ```typescript\n     * import { S3 } from 'aws-sdk';\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     * const s3 = tracer.captureAWSClient(new S3({ apiVersion: '2006-03-01' }));\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   ...\n     * }\n     * ```\n     *\n     * @param service - AWS SDK v2 client\n     */\n    /* v8 ignore start */ captureAWSClient(service) {\n        if (!this.isTracingEnabled())\n            return service;\n        try {\n            return this.provider.captureAWSClient(service);\n        }\n        catch (error) {\n            try {\n                // This is needed because some aws-sdk clients like AWS.DynamoDB.DocumentDB don't comply with the same\n                // instrumentation contract like most base clients.\n                // For detailed explanation see: https://github.com/aws-powertools/powertools-lambda-typescript/issues/524#issuecomment-1024493662\n                this.provider.captureAWSClient(service.service);\n                return service;\n            }\n            catch {\n                throw error;\n            }\n        }\n    } /* v8 ignore stop */\n    /**\n     * Patch an AWS SDK v3 client and create traces when your application makes calls to that AWS service.\n     *\n     * If you are using AWS SDK v2 use {@link captureAWSClient} instead.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-awssdkclients.html\n     *\n     * @example\n     * ```typescript\n     * import { S3Client } from '@aws-sdk/client-s3';\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     * const client = new S3Client({});\n     * tracer.captureAWSv3Client(client);\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   ...\n     * }\n     * ```\n     *\n     * @param service - AWS SDK v3 client\n     */\n    captureAWSv3Client(service) {\n        if (!this.isTracingEnabled())\n            return service;\n        return this.provider.captureAWSv3Client(service);\n    }\n    /**\n     * A decorator automating capture of metadata and annotations on segments or subsegments for a Lambda Handler.\n     *\n     * Using this decorator on your handler function will automatically:\n     * - handle the subsegment lifecycle\n     * - add the `ColdStart` annotation\n     * - add the function response as metadata\n     * - add the function error as metadata (if any)\n     *\n     * Note: Currently TypeScript only supports decorators on classes and methods. If you are using the\n     * function syntax, you should use the middleware instead.\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     * import type { LambdaInterface } from '@aws-lambda-powertools/commons/types';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * class Lambda implements LambdaInterface {\n     *   \u2063@tracer.captureLambdaHandler()\n     *   public handler(_event: unknown, _context: unknown) {\n     *     // ...\n     *   }\n     * }\n     *\n     * const handlerClass = new Lambda();\n     * export const handler = handlerClass.handler.bind(handlerClass);\n     * ```\n     *\n     * @param options - (_optional_) Options for the decorator\n     */\n    captureLambdaHandler(options) {\n        return (_target, _propertyKey, descriptor) => {\n            // biome-ignore lint/style/noNonNullAssertion: The descriptor.value is the method this decorator decorates, it cannot be undefined.\n            const originalMethod = descriptor.value;\n            const tracerRef = this;\n            // Use a function() {} instead of an () => {} arrow function so that we can\n            // access `myClass` as `this` in a decorated `myClass.myMethod()`.\n            descriptor.value = function (...args) {\n                if (!tracerRef.isTracingEnabled()) {\n                    return originalMethod.apply(this, args);\n                }\n                return tracerRef.provider.captureAsyncFunc(`## ${process.env._HANDLER}`, async (subsegment) => {\n                    tracerRef.annotateColdStart();\n                    tracerRef.addServiceNameAnnotation();\n                    let result;\n                    try {\n                        result = await originalMethod.apply(this, args);\n                        if (options?.captureResponse ?? true) {\n                            tracerRef.addResponseAsMetadata(result, process.env._HANDLER);\n                        }\n                    }\n                    catch (error) {\n                        tracerRef.addErrorAsMetadata(error);\n                        throw error;\n                    }\n                    finally {\n                        try {\n                            subsegment?.close();\n                        }\n                        catch (error) {\n                            console.warn('Failed to close or serialize segment %s. We are catching the error but data might be lost.', subsegment?.name, error);\n                        }\n                    }\n                    return result;\n                });\n            };\n            return descriptor;\n        };\n    }\n    /**\n     * A decorator automating capture of metadata and annotations on segments or subsegments for an arbitrary function.\n     *\n     * Using this decorator on your function will automatically:\n     * - handle the subsegment lifecycle\n     * - add the function response as metadata\n     * - add the function error as metadata (if any)\n     *\n     * Note: Currently TypeScript only supports decorators on classes and methods. If you are using the\n     * function syntax, you should use the middleware instead.\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     * import { LambdaInterface } from '@aws-lambda-powertools/commons';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * class Lambda implements LambdaInterface {\n     *   \u2063@tracer.captureMethod()\n     *   public myMethod(param: string) {\n     *     // ...\n     *   }\n     *\n     *   public handler(_event: unknown, _context: unknown) {\n     *     this.myMethod('foo');\n     *   }\n     * }\n     *\n     * const handlerClass = new Lambda();\n     * export const handler = handlerClass.handler.bind(handlerClass);;\n     * ```\n     *\n     * @param options - (_optional_) Options for the decorator\n     */\n    captureMethod(options) {\n        return (_target, propertyKey, descriptor) => {\n            // biome-ignore lint/style/noNonNullAssertion: The descriptor.value is the method this decorator decorates, it cannot be undefined.\n            const originalMethod = descriptor.value;\n            const tracerRef = this;\n            // Use a function() {} instead of an () => {} arrow function so that we can\n            // access `myClass` as `this` in a decorated `myClass.myMethod()`.\n            descriptor.value = function (...args) {\n                if (!tracerRef.isTracingEnabled()) {\n                    return originalMethod.apply(this, [...args]);\n                }\n                const methodName = String(propertyKey);\n                const subsegmentName = options?.subSegmentName\n                    ? options.subSegmentName\n                    : `### ${methodName}`;\n                return tracerRef.provider.captureAsyncFunc(subsegmentName, async (subsegment) => {\n                    // biome-ignore lint/suspicious/noExplicitAny: we don't know the type of the result because we're decorating arbitrary functions\n                    let result;\n                    try {\n                        result = await originalMethod.apply(this, [...args]);\n                        if (options?.captureResponse ?? true) {\n                            tracerRef.addResponseAsMetadata(result, methodName);\n                        }\n                    }\n                    catch (error) {\n                        tracerRef.addErrorAsMetadata(error);\n                        throw error;\n                    }\n                    finally {\n                        try {\n                            subsegment?.close();\n                        }\n                        catch (error) {\n                            console.warn('Failed to close or serialize segment %s. We are catching the error but data might be lost.', subsegment?.name, error);\n                        }\n                    }\n                    return result;\n                });\n            };\n            return descriptor;\n        };\n    }\n    /**\n     * Get the current root AWS X-Ray trace id.\n     *\n     * Utility method that returns the current AWS X-Ray Root trace id. Useful as correlation id for downstream processes.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-traces\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * export const handler = async () => {\n     *   try {\n     *     ...\n     *   } catch (err) {\n     *     const rootTraceId = tracer.getRootXrayTraceId();\n     *\n     *     // Example of returning an error response\n     *     return {\n     *       statusCode: 500,\n     *       // Include the rootTraceId in the response so we can show a \"contact support\" button that\n     *       // takes the customer to a customer service form with the trace as additional context.\n     *       body: `Internal Error - Please contact support and quote the following id: ${rootTraceId}`,\n     *       headers: { '_X_AMZN_TRACE_ID': rootTraceId },\n     *     };\n     *   }\n     * }\n     * ```\n     */\n    getRootXrayTraceId() {\n        return getXRayTraceIdFromEnv();\n    }\n    /**\n     * Get the active segment or subsegment (if any) in the current scope.\n     *\n     * Usually you won't need to call this method unless you are creating custom subsegments or using manual mode.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-segments\n     * @see https://docs.aws.amazon.com/powertools/typescript/latest/core/tracer/#escape-hatch-mechanism\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   const currentSegment = tracer.getSegment();\n     *   ... // Do something with segment\n     * }\n     * ```\n     */\n    getSegment() {\n        if (!this.isTracingEnabled()) {\n            return new XraySubsegment('## Dummy segment');\n        }\n        const segment = this.provider.getSegment();\n        if (segment === undefined) {\n            console.warn('Failed to get the current sub/segment from the context, this is likely because you are not using the Tracer in a Lambda function.');\n        }\n        return segment;\n    }\n    /**\n     * Get the current value of the AWS X-Ray Sampled flag.\n     *\n     * Utility method that returns the current AWS X-Ray Sampled flag.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-concepts.html#xray-concepts-traces\n     */\n    isTraceSampled() {\n        if (!this.isTracingEnabled())\n            return false;\n        return isRequestXRaySampled();\n    }\n    /**\n     * Get the current value of the `tracingEnabled` property.\n     *\n     * You can use this method during manual instrumentation to determine\n     * if tracer is currently enabled.\n     */\n    isTracingEnabled() {\n        return this.tracingEnabled;\n    }\n    /**\n     * Add annotation to existing segment or subsegment.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-segment.html#xray-sdk-nodejs-segment-annotations\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   tracer.putAnnotation('successfulBooking', true);\n     * }\n     * ```\n     *\n     * @param key - Annotation key\n     * @param value - Value for annotation\n     */\n    putAnnotation(key, value) {\n        if (!this.isTracingEnabled())\n            return;\n        this.provider.putAnnotation(key, value);\n    }\n    /**\n     * Add metadata to existing segment or subsegment.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-segment.html#xray-sdk-nodejs-segment-metadata\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   const res = someLogic();\n     *   tracer.putMetadata('paymentResponse', res);\n     * }\n     * ```\n     *\n     * @param key - Metadata key\n     * @param value - Value for metadata\n     * @param namespace - Namespace that metadata will lie under, if none is passed it will use the serviceName\n     */\n    putMetadata(key, value, namespace) {\n        if (!this.isTracingEnabled())\n            return;\n        this.provider.putMetadata(key, value, namespace || this.serviceName);\n    }\n    /**\n     * Set the passed subsegment as the current active subsegment.\n     *\n     * If you are using a middleware or a decorator this is done automatically for you.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-subsegments.html\n     *\n     * @example\n     * ```typescript\n     * import { Tracer } from '@aws-lambda-powertools/tracer';\n     * import { Subsegment } from 'aws-xray-sdk-core';\n     *\n     * const tracer = new Tracer({ serviceName: 'serverlessAirline' });\n     *\n     * export const handler = async (_event: unknown, _context: unknown) => {\n     *   const subsegment = new Subsegment('### foo.bar');\n     *   tracer.setSegment(subsegment);\n     * }\n     * ```\n     *\n     * @param segment - Subsegment to set as the current segment\n     */\n    setSegment(segment) {\n        if (!this.isTracingEnabled())\n            return;\n        this.provider.setSegment(segment);\n    }\n    /**\n     * Getter for `customConfigService`.\n     * Used internally during initialization.\n     */\n    getCustomConfigService() {\n        return this.customConfigService;\n    }\n    /**\n     * Determine if we are running inside an Amplify CLI process.\n     * Used internally during initialization.\n     */\n    isAmplifyCli() {\n        return this.#envConfig.awsExecutionEnv === 'AWS_Lambda_amplify-mock';\n    }\n    /**\n     * Determine if we are running in a Lambda execution environment.\n     * Used internally during initialization.\n     */\n    isLambdaExecutionEnv() {\n        return this.#envConfig.awsExecutionEnv !== '';\n    }\n    /**\n     * Determine if we are running inside a SAM CLI process.\n     * Used internally during initialization.\n     */\n    isLambdaSamCli() {\n        return this.#envConfig.samLocal !== '';\n    }\n    /**\n     * Set `captureError` based on configuration passed and environment variables.\n     * Used internally during initialization.\n     */\n    setCaptureError() {\n        const customConfigValue = this.getCustomConfigService()?.getTracingCaptureError();\n        if (customConfigValue !== undefined &&\n            customConfigValue.toLowerCase() === 'false') {\n            this.captureError = false;\n            return;\n        }\n        if (this.#envConfig.captureError.toLowerCase() === 'false') {\n            this.captureError = false;\n            return;\n        }\n    }\n    /**\n     * Patch all HTTP(s) clients and create traces when your application makes calls outgoing calls.\n     *\n     * Calls using third-party HTTP request libraries, such as Axios, are supported as long as they use the native http\n     * module under the hood. Support for third-party HTTP request libraries is provided on a best effort basis.\n     *\n     * @see https://docs.aws.amazon.com/xray/latest/devguide/xray-sdk-nodejs-httpclients.html\n     *\n     * @param enabled - Whether or not to patch all HTTP clients\n     */\n    setCaptureHTTPsRequests(enabled) {\n        if (enabled !== undefined && !enabled) {\n            this.captureHTTPsRequests = false;\n            return;\n        }\n        const customConfigValue = this.getCustomConfigService()?.getCaptureHTTPsRequests();\n        if (customConfigValue !== undefined &&\n            customConfigValue.toLowerCase() === 'false') {\n            this.captureHTTPsRequests = false;\n            return;\n        }\n        if (this.#envConfig.captureHTTPsRequests.toLowerCase() === 'false') {\n            this.captureHTTPsRequests = false;\n        }\n    }\n    /**\n     * Set `captureResponse` based on configuration passed and environment variables.\n     * Used internally during initialization.\n     */\n    setCaptureResponse() {\n        const customConfigValue = this.getCustomConfigService()?.getTracingCaptureResponse();\n        if (customConfigValue !== undefined &&\n            customConfigValue.toLowerCase() === 'false') {\n            this.captureResponse = false;\n            return;\n        }\n        if (this.#envConfig.captureResponse.toLowerCase() === 'false') {\n            this.captureResponse = false;\n            return;\n        }\n    }\n    /**\n     * Set `customConfigService` based on configuration passed.\n     * Used internally during initialization.\n     *\n     * @param customConfigService - Custom configuration service to use\n     */\n    setCustomConfigService(customConfigService) {\n        this.customConfigService = customConfigService\n            ? customConfigService\n            : undefined;\n    }\n    /**\n     * Method that reconciles the configuration passed with the environment variables.\n     * Used internally during initialization.\n     *\n     * @param options - Configuration passed to the tracer\n     */\n    setOptions(options) {\n        const { enabled, serviceName, captureHTTPsRequests, customConfigService } = options;\n        this.setCustomConfigService(customConfigService);\n        this.setTracingEnabled(enabled);\n        this.setCaptureResponse();\n        this.setCaptureError();\n        this.setServiceName(serviceName);\n        this.setCaptureHTTPsRequests(captureHTTPsRequests);\n        return this;\n    }\n    /**\n     * Set `customConfigService` based on configurations passed and environment variables.\n     * Used internally during initialization.\n     *\n     * @param serviceName - Name of the service to use\n     */\n    setServiceName(serviceName) {\n        if (serviceName !== undefined && this.isValidServiceName(serviceName)) {\n            this.serviceName = serviceName;\n            return;\n        }\n        const customConfigValue = this.getCustomConfigService()?.getServiceName();\n        if (customConfigValue !== undefined &&\n            this.isValidServiceName(customConfigValue)) {\n            this.serviceName = customConfigValue;\n            return;\n        }\n        if (this.#envConfig.serviceName !== undefined &&\n            this.isValidServiceName(this.#envConfig.serviceName)) {\n            this.serviceName = this.#envConfig.serviceName;\n            return;\n        }\n        this.serviceName = this.defaultServiceName;\n    }\n    /**\n     * Set `tracingEnabled` based on configurations passed and environment variables.\n     * Used internally during initialization.\n     *\n     * @param enabled - Whether or not tracing is enabled\n     */\n    setTracingEnabled(enabled) {\n        if (enabled !== undefined && !enabled) {\n            this.tracingEnabled = enabled;\n            return;\n        }\n        const customConfigValue = this.getCustomConfigService()?.getTracingEnabled();\n        if (customConfigValue !== undefined &&\n            customConfigValue.toLowerCase() === 'false') {\n            this.tracingEnabled = false;\n            return;\n        }\n        if (this.#envConfig.tracingEnabled.toLowerCase() === 'false') {\n            this.tracingEnabled = false;\n            return;\n        }\n        if (this.isAmplifyCli() ||\n            this.isLambdaSamCli() ||\n            !this.isLambdaExecutionEnv()) {\n            this.tracingEnabled = false;\n        }\n    }\n    /**\n     * Set environment variables for the tracer.\n     * This method is called during initialization to ensure environment variables are available.\n     */\n    #setEnvConfig() {\n        this.#envConfig.awsExecutionEnv = getStringFromEnv({\n            key: 'AWS_EXECUTION_ENV',\n            defaultValue: '',\n        });\n        this.#envConfig.samLocal = getStringFromEnv({\n            key: 'AWS_SAM_LOCAL',\n            defaultValue: '',\n        });\n        this.#envConfig.captureError = getStringFromEnv({\n            key: 'POWERTOOLS_TRACER_CAPTURE_ERROR',\n            defaultValue: '',\n        });\n        this.#envConfig.captureHTTPsRequests = getStringFromEnv({\n            key: 'POWERTOOLS_TRACER_CAPTURE_HTTPS_REQUESTS',\n            defaultValue: '',\n        });\n        this.#envConfig.captureResponse = getStringFromEnv({\n            key: 'POWERTOOLS_TRACER_CAPTURE_RESPONSE',\n            defaultValue: '',\n        });\n        this.#envConfig.tracingEnabled = getStringFromEnv({\n            key: 'POWERTOOLS_TRACE_ENABLED',\n            defaultValue: '',\n        });\n        this.#envConfig.serviceName = getServiceName();\n    }\n}\nexport { Tracer };\n", "import xraySdk from 'aws-xray-sdk-core';\nconst { captureAWS, captureAWSClient, captureAWSv3Client, captureAsyncFunc, captureFunc, captureHTTPsGlobal, getNamespace, getSegment, setSegment, Segment: XraySegment, setContextMissingStrategy, setDaemonAddress, setLogger, } = xraySdk;\nimport { subscribe } from 'node:diagnostics_channel';\nimport http from 'node:http';\nimport https from 'node:https';\nimport { addUserAgentMiddleware } from '@aws-lambda-powertools/commons';\nimport { getXRayTraceIdFromEnv } from '@aws-lambda-powertools/commons/utils/env';\nimport { findHeaderAndDecode, getRequestURL, isHttpSubsegment, } from './utilities.js';\n/**\n * The ProviderService class is a wrapper around the AWS X-Ray SDK for Node.js.\n *\n * The service provides exposes a selection of methods to interact with the SDK directly,\n * these methods were chosen to be the most useful in the context of a Lambda function and\n * have been tested to work with Powertools for AWS Lambda.\n *\n * If you want to use one of the other methods that are not exposed by this class,\n * you can import the methods directly from the `aws-xray-sdk-core` package, and for most cases,\n * they should work as expected. However, support for these methods is not guaranteed.\n */\nclass ProviderService {\n    /**\n     * @deprecated Use {@link captureAWSv3Client} instead.\n     */\n    /* v8 ignore start */ captureAWS(awssdk) {\n        return captureAWS(awssdk);\n    } /* v8 ignore stop */\n    /**\n     * @deprecated Use {@link captureAWSv3Client} instead.\n     */\n    /* v8 ignore start */ captureAWSClient(service) {\n        return captureAWSClient(service);\n    } /* v8 ignore stop */\n    captureAWSv3Client(service) {\n        addUserAgentMiddleware(service, 'tracer');\n        // biome-ignore lint/suspicious/noExplicitAny: Type must be aliased as any because of this https://github.com/aws/aws-xray-sdk-node/issues/439#issuecomment-859715660\n        return captureAWSv3Client(service);\n    }\n    captureAsyncFunc(name, fcn, _parent) {\n        return captureAsyncFunc(name, fcn);\n    }\n    captureFunc(name, fcn, _parent) {\n        return captureFunc(name, fcn);\n    }\n    captureHTTPsGlobal() {\n        captureHTTPsGlobal(http);\n        captureHTTPsGlobal(https);\n    }\n    getNamespace() {\n        return getNamespace();\n    }\n    getSegment() {\n        return getSegment();\n    }\n    /**\n     * Instrument `fetch` requests with AWS X-Ray\n     *\n     * The instrumentation is done by subscribing to the `undici` events. When a request is created,\n     * a new subsegment is created with the hostname of the request.\n     *\n     * Then, when the headers are received, the subsegment is updated with the request and response details.\n     *\n     * Finally, when the request is completed, the subsegment is closed.\n     *\n     * @see {@link https://nodejs.org/api/diagnostics_channel.html#diagnostics_channel_channel_publish | Diagnostics Channel - Node.js Documentation}\n     */\n    instrumentFetch() {\n        /**\n         * Create a segment at the start of a request made with `undici` or `fetch`.\n         *\n         * That `message` must be `unknown` because that's the type expected by `subscribe`\n         *\n         * @param message The message received from the `undici` channel\n         */\n        const onRequestStart = (message) => {\n            const { request } = message;\n            const method = request.method;\n            if (method === 'CONNECT')\n                return;\n            const parentSubsegment = this.getSegment();\n            const requestURL = getRequestURL(request);\n            if (parentSubsegment && requestURL) {\n                const subsegment = parentSubsegment.addNewSubsegment(requestURL.hostname);\n                subsegment.addAttribute('namespace', 'remote');\n                // addHeader is not part of the type definition but it's available https://github.com/nodejs/undici/blob/main/docs/docs/api/DiagnosticsChannel.md#undicirequestcreate\n                // @ts-expect-error\n                request.addHeader('X-Amzn-Trace-Id', `Root=${getXRayTraceIdFromEnv()};Parent=${subsegment.id};Sampled=${subsegment.notTraced ? '0' : '1'}`);\n                subsegment.http = {\n                    request: {\n                        url: `${requestURL.protocol}//${requestURL.hostname}${requestURL.pathname}`,\n                        method,\n                    },\n                };\n                this.setSegment(subsegment);\n            }\n        };\n        /**\n         * Enrich the subsegment with the response details, and close it.\n         * Then, set the parent segment as the active segment.\n         *\n         * `message` must be `unknown` because that's the type expected by `subscribe`\n         *\n         * @param message The message received from the `undici` channel\n         */\n        const onResponse = (message) => {\n            const { response } = message;\n            const subsegment = this.getSegment();\n            if (isHttpSubsegment(subsegment)) {\n                const status = response.statusCode;\n                const contentLenght = findHeaderAndDecode(response.headers, 'content-length');\n                subsegment.http = {\n                    ...subsegment.http,\n                    response: {\n                        status,\n                        ...(contentLenght && {\n                            content_length: Number.parseInt(contentLenght, 10),\n                        }),\n                    },\n                };\n                if (status === 429) {\n                    subsegment.addThrottleFlag();\n                }\n                if (status >= 400 && status < 500) {\n                    subsegment.addErrorFlag();\n                }\n                else if (status >= 500 && status < 600) {\n                    subsegment.addFaultFlag();\n                }\n                subsegment.close();\n                this.setSegment(subsegment.parent);\n            }\n        };\n        /**\n         * Add an error to the subsegment when the request fails.\n         *\n         * This is used to handle the case when the request fails to establish a connection with the server or timeouts.\n         * In all other cases, for example, when the server returns a 4xx or 5xx status code, the error is added in the `onResponse` function.\n         *\n         * that `message` must be `unknown` because that's the type expected by `subscribe`\n         *\n         * @param message The message received from the `undici` channel\n         */\n        const onError = (message) => {\n            const { error } = message;\n            const subsegment = this.getSegment();\n            if (isHttpSubsegment(subsegment)) {\n                subsegment.addErrorFlag();\n                error instanceof Error && subsegment.addError(error, true);\n                subsegment.close();\n                this.setSegment(subsegment.parent);\n            }\n        };\n        subscribe('undici:request:create', onRequestStart);\n        subscribe('undici:request:headers', onResponse);\n        subscribe('undici:request:error', onError);\n    }\n    putAnnotation(key, value) {\n        const segment = this.getSegment();\n        if (segment === undefined) {\n            console.warn('No active segment or subsegment found, skipping annotation');\n            return;\n        }\n        if (segment instanceof XraySegment) {\n            console.warn('You cannot annotate the main segment in a Lambda execution environment');\n            return;\n        }\n        segment.addAnnotation(key, value);\n    }\n    putMetadata(key, value, namespace) {\n        const segment = this.getSegment();\n        if (segment === undefined) {\n            console.warn('No active segment or subsegment found, skipping metadata addition');\n            return;\n        }\n        if (segment instanceof XraySegment) {\n            console.warn('You cannot add metadata to the main segment in a Lambda execution environment');\n            return;\n        }\n        segment.addMetadata(key, value, namespace);\n    }\n    setContextMissingStrategy(strategy) {\n        setContextMissingStrategy(strategy);\n    }\n    setDaemonAddress(address) {\n        setDaemonAddress(address);\n    }\n    setLogger(logObj) {\n        setLogger(logObj);\n    }\n    setSegment(segment) {\n        setSegment(segment);\n    }\n}\nexport { ProviderService };\n", "import { URL } from 'node:url';\nconst decoder = new TextDecoder();\n/**\n * The `fetch` implementation based on `undici` includes the headers as an array of encoded key-value pairs.\n * This function finds the header with the given key and decodes the value.\n *\n * The function walks through the array of encoded headers and decodes the key of each pair.\n * If the key matches the given key, the function returns the decoded value of the next element in the array.\n *\n * @param encodedHeaders The array of encoded headers\n * @param key The key to search for\n */\nconst findHeaderAndDecode = (encodedHeaders, key) => {\n    let foundIndex = -1;\n    for (let i = 0; i < encodedHeaders.length; i += 2) {\n        const header = decoder.decode(encodedHeaders[i]);\n        if (header.toLowerCase() === key) {\n            foundIndex = i;\n            break;\n        }\n    }\n    if (foundIndex === -1) {\n        return null;\n    }\n    return decoder.decode(encodedHeaders[foundIndex + 1]);\n};\n/**\n * Type guard to check if the given subsegment is an `HttpSubsegment`\n *\n * @param subsegment The subsegment to check\n */\nconst isHttpSubsegment = (subsegment) => {\n    return (subsegment !== undefined &&\n        'http' in subsegment &&\n        'parent' in subsegment &&\n        'namespace' in subsegment &&\n        subsegment.namespace === 'remote');\n};\n/**\n * Convert the origin url to a URL object when it is a string and append the path if provided\n *\n * @param origin The request object containing the origin url and path\n */\nconst getRequestURL = (request) => {\n    if (typeof request.origin === 'string') {\n        return new URL(`${request.origin}${request.path || ''}`);\n    }\n    if (request.origin instanceof URL) {\n        request.origin.pathname = request.path || '';\n        return request.origin;\n    }\n    return undefined;\n};\nexport { findHeaderAndDecode, isHttpSubsegment, getRequestURL };\n", "import { Tracer } from '@aws-lambda-powertools/tracer';\r\nimport { Segment, Subsegment } from 'aws-xray-sdk-core';\r\n\r\n/**\r\n * X-Ray Tracer utility for standardized distributed tracing\r\n * \r\n * Features:\r\n * - Automatic subsegment creation and management\r\n * - Standardized annotations for filtering (leadId, tenantId, agent)\r\n * - Metadata capture for debugging\r\n * - Error tracking with stack traces\r\n * - Integration with Lambda Powertools\r\n * \r\n * Requirements: 15.6\r\n */\r\n\r\n// Initialize Powertools Tracer\r\nconst tracer = new Tracer({\r\n  serviceName: process.env.POWERTOOLS_SERVICE_NAME || 'fibonacci-service'\r\n});\r\n\r\n/**\r\n * Standard annotations for X-Ray filtering\r\n */\r\nexport interface XRayAnnotations {\r\n  leadId?: string;\r\n  tenantId?: string;\r\n  agent?: string;\r\n  traceId?: string;\r\n  status?: 'success' | 'error' | 'warning';\r\n  [key: string]: string | number | boolean | undefined;\r\n}\r\n\r\n/**\r\n * Metadata for debugging (not indexed, can be any structure)\r\n */\r\nexport interface XRayMetadata {\r\n  [key: string]: any;\r\n}\r\n\r\n/**\r\n * Get the current X-Ray tracer instance\r\n */\r\nexport function getTracer(): Tracer {\r\n  return tracer;\r\n}\r\n\r\n/**\r\n * Type alias for enhanced X-Ray tracer\r\n */\r\nexport type EnhancedXRayTracer = Tracer;\r\n\r\n/**\r\n * Create a tracer instance\r\n */\r\nexport function createTracer(serviceName?: string): Tracer {\r\n  return new Tracer({\r\n    serviceName: serviceName || process.env.POWERTOOLS_SERVICE_NAME || 'fibonacci-service'\r\n  });\r\n}\r\n\r\n/**\r\n * Extract X-Ray context from headers\r\n */\r\nexport function extractXRayContext(headers: Record<string, string | undefined>): { traceId?: string; parentId?: string } {\r\n  const traceHeader = headers['X-Amzn-Trace-Id'] || headers['x-amzn-trace-id'];\r\n  if (!traceHeader) {\r\n    return {};\r\n  }\r\n\r\n  const parts = traceHeader.split(';');\r\n  const context: { traceId?: string; parentId?: string } = {};\r\n\r\n  for (const part of parts) {\r\n    const [key, value] = part.split('=');\r\n    if (key === 'Root') {\r\n      context.traceId = value;\r\n    } else if (key === 'Parent') {\r\n      context.parentId = value;\r\n    }\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\n/**\r\n * Extract log context from headers\r\n */\r\nexport function extractLogContext(headers: Record<string, string | undefined>): { traceId?: string; requestId?: string } {\r\n  return {\r\n    traceId: headers['X-Amzn-Trace-Id'] || headers['x-amzn-trace-id'],\r\n    requestId: headers['X-Request-Id'] || headers['x-request-id']\r\n  };\r\n}\r\n\r\n/**\r\n * Get the current X-Ray segment\r\n */\r\nexport function getSegment(): Segment | Subsegment | undefined {\r\n  try {\r\n    return tracer.getSegment();\r\n  } catch (error) {\r\n    console.warn('Failed to get X-Ray segment:', error);\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Create a new subsegment for a specific operation\r\n * \r\n * @param name - Name of the subsegment (e.g., 'ProcessLead', 'EnrichData')\r\n * @param annotations - Standard annotations for filtering\r\n * @param metadata - Additional metadata for debugging\r\n * @returns Subsegment instance or undefined if tracing is disabled\r\n * \r\n * @example\r\n * const subsegment = createSubsegment('ProcessLead', {\r\n *   leadId: lead.id,\r\n *   tenantId: lead.tenantId,\r\n *   agent: 'recebimento'\r\n * });\r\n * \r\n * try {\r\n *   // Your code here\r\n *   closeSubsegment(subsegment, 'success');\r\n * } catch (error) {\r\n *   closeSubsegment(subsegment, 'error', error);\r\n *   throw error;\r\n * }\r\n */\r\nexport function createSubsegment(\r\n  name: string,\r\n  annotations?: XRayAnnotations,\r\n  metadata?: XRayMetadata\r\n): Subsegment | undefined {\r\n  try {\r\n    const segment = getSegment();\r\n    if (!segment) {\r\n      return undefined;\r\n    }\r\n\r\n    const subsegment = segment.addNewSubsegment(name);\r\n\r\n    // Add standard annotations for filtering\r\n    if (annotations) {\r\n      for (const [key, value] of Object.entries(annotations)) {\r\n        if (value !== undefined) {\r\n          subsegment.addAnnotation(key, value);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add metadata for debugging\r\n    if (metadata) {\r\n      for (const [key, value] of Object.entries(metadata)) {\r\n        subsegment.addMetadata(key, value);\r\n      }\r\n    }\r\n\r\n    return subsegment;\r\n  } catch (error) {\r\n    console.warn('Failed to create X-Ray subsegment:', error);\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Close a subsegment with status and optional error\r\n * \r\n * @param subsegment - Subsegment to close\r\n * @param status - Status of the operation ('success' or 'error')\r\n * @param error - Optional error object if status is 'error'\r\n */\r\nexport function closeSubsegment(\r\n  subsegment: Subsegment | undefined,\r\n  status: 'success' | 'error' = 'success',\r\n  error?: Error\r\n): void {\r\n  if (!subsegment) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Add status annotation\r\n    subsegment.addAnnotation('status', status);\r\n\r\n    // Add error if present\r\n    if (error) {\r\n      subsegment.addError(error);\r\n      subsegment.addMetadata('error', {\r\n        name: error.name,\r\n        message: error.message,\r\n        stack: error.stack\r\n      });\r\n    }\r\n\r\n    subsegment.close();\r\n  } catch (err) {\r\n    console.warn('Failed to close X-Ray subsegment:', err);\r\n  }\r\n}\r\n\r\n/**\r\n * Execute a function within a traced subsegment\r\n * Automatically handles subsegment creation, error tracking, and cleanup\r\n * \r\n * @param name - Name of the subsegment\r\n * @param fn - Function to execute\r\n * @param annotations - Standard annotations for filtering\r\n * @param metadata - Additional metadata for debugging\r\n * @returns Result of the function\r\n * \r\n * @example\r\n * const result = await traceSubsegment(\r\n *   'EnrichLead',\r\n *   async () => {\r\n *     return await enrichmentService.enrich(lead);\r\n *   },\r\n *   { leadId: lead.id, tenantId: lead.tenantId },\r\n *   { leadData: lead }\r\n * );\r\n */\r\nexport async function traceSubsegment<T>(\r\n  name: string,\r\n  fn: () => Promise<T> | T,\r\n  annotations?: XRayAnnotations,\r\n  metadata?: XRayMetadata\r\n): Promise<T> {\r\n  const subsegment = createSubsegment(name, annotations, metadata);\r\n\r\n  try {\r\n    const result = await fn();\r\n    closeSubsegment(subsegment, 'success');\r\n    return result;\r\n  } catch (error) {\r\n    closeSubsegment(subsegment, 'error', error as Error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * Add annotations to the current segment or subsegment\r\n * \r\n * @param annotations - Annotations to add\r\n */\r\nexport function addAnnotations(annotations: XRayAnnotations): void {\r\n  try {\r\n    const segment = getSegment();\r\n    if (!segment) {\r\n      return;\r\n    }\r\n\r\n    for (const [key, value] of Object.entries(annotations)) {\r\n      if (value !== undefined) {\r\n        segment.addAnnotation(key, value);\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('Failed to add X-Ray annotations:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Add metadata to the current segment or subsegment\r\n * \r\n * @param metadata - Metadata to add\r\n * @param namespace - Optional namespace for organizing metadata\r\n */\r\nexport function addMetadata(metadata: XRayMetadata, namespace?: string): void {\r\n  try {\r\n    const segment = getSegment();\r\n    if (!segment) {\r\n      return;\r\n    }\r\n\r\n    if (namespace) {\r\n      segment.addMetadata(namespace, metadata);\r\n    } else {\r\n      for (const [key, value] of Object.entries(metadata)) {\r\n        segment.addMetadata(key, value);\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('Failed to add X-Ray metadata:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Capture an AWS SDK v3 client for automatic X-Ray tracing\r\n * \r\n * @param client - AWS SDK v3 client instance\r\n * @returns Traced client\r\n * \r\n * @example\r\n * const dynamoClient = captureAWSClient(new DynamoDBClient({}));\r\n */\r\nexport function captureAWSClient<T>(client: T): T {\r\n  try {\r\n    return tracer.captureAWSv3Client(client);\r\n  } catch (error) {\r\n    console.warn('Failed to capture AWS client for X-Ray:', error);\r\n    return client;\r\n  }\r\n}\r\n\r\n/**\r\n * Wrapper for Lambda handlers to automatically trace execution\r\n * \r\n * @param handler - Lambda handler function\r\n * @returns Wrapped handler with X-Ray tracing\r\n * \r\n * @example\r\n * export const handler = withXRayTracing(async (event, context) => {\r\n *   // Your handler code here\r\n * });\r\n */\r\nexport function withXRayTracing<TEvent, TResult>(\r\n  handler: (event: TEvent, context: any) => Promise<TResult>\r\n): (event: TEvent, context: any) => Promise<TResult> {\r\n  return async (event: TEvent, context: any): Promise<TResult> => {\r\n    const segment = getSegment();\r\n    \r\n    // Add standard annotations\r\n    addAnnotations({\r\n      functionName: context.functionName,\r\n      functionVersion: context.functionVersion,\r\n      requestId: context.awsRequestId\r\n    });\r\n\r\n    // Add event metadata (be careful with sensitive data)\r\n    addMetadata({\r\n      eventType: (event as any).Records ? 'SQS' : 'API',\r\n      timestamp: new Date().toISOString()\r\n    }, 'handler');\r\n\r\n    try {\r\n      const result = await handler(event, context);\r\n      addAnnotations({ status: 'success' });\r\n      return result;\r\n    } catch (error) {\r\n      addAnnotations({ status: 'error' });\r\n      if (segment && error instanceof Error) {\r\n        segment.addError(error);\r\n      }\r\n      throw error;\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Helper to trace database queries\r\n * \r\n * @param queryName - Name of the query (e.g., 'GetLead', 'SaveLead')\r\n * @param query - Query function to execute\r\n * @param params - Query parameters for metadata\r\n * @returns Query result\r\n */\r\nexport async function traceQuery<T>(\r\n  queryName: string,\r\n  query: () => Promise<T>,\r\n  params?: Record<string, any>\r\n): Promise<T> {\r\n  return traceSubsegment(\r\n    `DB:${queryName}`,\r\n    query,\r\n    { operation: 'database' },\r\n    { queryParams: params }\r\n  );\r\n}\r\n\r\n/**\r\n * Helper to trace HTTP/API calls\r\n * \r\n * @param serviceName - Name of the external service (e.g., 'WhatsApp', 'Calendar')\r\n * @param operation - Operation name (e.g., 'sendMessage', 'createEvent')\r\n * @param call - API call function to execute\r\n * @param params - Call parameters for metadata\r\n * @returns API call result\r\n */\r\nexport async function traceAPICall<T>(\r\n  serviceName: string,\r\n  operation: string,\r\n  call: () => Promise<T>,\r\n  params?: Record<string, any>\r\n): Promise<T> {\r\n  return traceSubsegment(\r\n    `API:${serviceName}:${operation}`,\r\n    call,\r\n    { \r\n      operation: 'external_api',\r\n      service: serviceName\r\n    },\r\n    { callParams: params }\r\n  );\r\n}\r\n\r\n/**\r\n * Helper to trace MCP calls\r\n * \r\n * @param server - MCP server name (e.g., 'whatsapp', 'calendar')\r\n * @param method - MCP method name\r\n * @param call - MCP call function to execute\r\n * @param params - Call parameters for metadata\r\n * @returns MCP call result\r\n */\r\nexport async function traceMCPCall<T>(\r\n  server: string,\r\n  method: string,\r\n  call: () => Promise<T>,\r\n  params?: Record<string, any>\r\n): Promise<T> {\r\n  return traceSubsegment(\r\n    `MCP:${server}:${method}`,\r\n    call,\r\n    { \r\n      operation: 'mcp',\r\n      mcpServer: server,\r\n      mcpMethod: method\r\n    },\r\n    { mcpParams: params }\r\n  );\r\n}\r\n\r\n/**\r\n * Export tracer instance for direct use if needed\r\n */\r\nexport { tracer };\r\n", "export * from \"./errors.js\";\nexport * from \"./helpers/parseUtil.js\";\nexport * from \"./helpers/typeAliases.js\";\nexport * from \"./helpers/util.js\";\nexport * from \"./types.js\";\nexport * from \"./ZodError.js\";\n", "export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n", "import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n", "import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n", "import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n", "import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n", "export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n", "import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&\u2019*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n"],
  "mappings": "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,aAAgB,CACd,oBAAuB,CACrB,aAAgB,CACd,SAAY,GACZ,UAAa,aACf,CACF,EACA,oBAAuB,CACrB,kBACF,CACF,EACA,eAAkB,CAChB,oBAAuB,CACrB,aAAgB,CACd,SAAY,GACZ,UAAa,aACf,CACF,EACA,oBAAuB,CACrB,mBACA,uBACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,yBACA,wBACA,wBACA,WACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,WACF,EACA,oBAAuB,CACrB,mBACA,uBACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,WACF,CACF,EACA,cAAiB,CACf,mBAAsB,CACpB,WACF,CACF,EACA,QAAW,CACT,mBAAsB,CACpB,iBACA,uBACA,WACF,EACA,oBAAuB,CACrB,kBACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,0BACA,OACF,EACA,qBAAwB,CACtB,WAAc,CACZ,KAAQ,GACR,UAAa,GACb,UAAa,aACf,CACF,CACF,EACA,QAAW,CACT,mBAAsB,CACpB,WACF,EACA,oBAAuB,CACrB,mBACA,uBACF,CACF,EACA,MAAS,CACP,mBAAsB,CACpB,kBACA,iBACA,YACA,QACA,uBACA,mBACA,SACA,WACF,EACA,oBAAuB,CACrB,kBACF,CACF,EACA,KAAQ,CACN,mBAAsB,CACpB,kBACA,iBACA,YACA,QACA,uBACA,UACA,SACA,YACA,eACF,EACA,oBAAuB,CACrB,mBACA,QACA,cACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,WACF,EACA,oBAAuB,CACrB,mBACA,uBACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,uBACA,8BACA,wBACA,WACF,CACF,CACF,CACF,EACA,IAAO,CACL,WAAc,CACZ,cAAiB,CACf,mBAAsB,CACpB,QACA,UACF,CACF,EACA,wBAA2B,CACzB,mBAAsB,CACpB,WACA,mBACF,CACF,EACA,6BAAgC,CAC9B,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,QACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,aACA,WACF,CACF,EACA,cAAiB,CACf,mBAAsB,CACpB,UACF,CACF,EACA,mBAAsB,CACpB,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,QACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,UACF,CACF,EACA,mBAAsB,CACpB,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,YACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,YACA,wBACF,EACA,oBAAuB,CACrB,UACF,CACF,EACA,2BAA8B,CAC5B,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,WACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,iBACF,EACA,qBAAwB,CACtB,UAAa,CACX,KAAQ,GACR,UAAa,GACb,UAAa,aACf,CACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,UACF,CACF,EACA,eAAkB,CAChB,mBAAsB,CACpB,iBACA,sBACA,wBACA,WACA,oBACA,iBACF,EACA,qBAAwB,CACtB,SAAY,CACV,KAAQ,GACR,UAAa,GACb,UAAa,eACf,CACF,CACF,EACA,iBAAoB,CAClB,mBAAsB,CACpB,UACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,eACA,UACF,EACA,oBAAuB,CACrB,kBAAqB,CACnB,SAAY,GACZ,UAAa,yBACf,CACF,EACA,oBAAuB,CACrB,WACF,CACF,EACA,iBAAoB,CAClB,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,QAAW,CACT,KAAQ,GACR,UAAa,GACb,UAAa,eACf,CACF,EACA,qBAAwB,CACtB,OAAU,CACR,KAAQ,GACR,UAAa,GACb,UAAa,cACf,EACA,WAAc,CACZ,KAAQ,GACR,UAAa,GACb,UAAa,kBACf,CACF,CACF,EACA,mBAAsB,CACpB,mBAAsB,CACpB,UACF,EACA,oBAAuB,CACrB,WAAc,CACZ,SAAY,GACZ,UAAa,iBACf,CACF,CACF,CACF,CACF,EACA,IAAO,CACL,WAAc,CACZ,QAAW,CACT,mBAAsB,CACpB,UACF,CACF,EACA,aAAgB,CACd,mBAAsB,CACpB,UACF,CACF,CACF,CACF,EACA,OAAU,CACR,WAAc,CACZ,OAAU,CACR,mBAAsB,CACpB,eACA,iBACA,UACA,WACF,EACA,oBAAuB,CACrB,gBACA,YACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,cACF,EACA,oBAAuB,CACrB,QACF,CACF,CACF,CACF,EACA,GAAM,CACJ,WAAc,CACZ,qBAAwB,CACtB,mBAAsB,CACpB,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,wBAA2B,CACzB,mBAAsB,CACpB,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,aACA,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,sBAAyB,CACvB,mBAAsB,CACpB,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mCAAsC,CACpC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,uBAA0B,CACxB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mCAAsC,CACpC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,sBAAyB,CACvB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iCAAoC,CAClC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mBAAsB,CACpB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,wBAA2B,CACzB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,cAAiB,CACf,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iCAAoC,CAClC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,cAAiB,CACf,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mBAAsB,CACpB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,kBAAqB,CACnB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,8BAAiC,CAC/B,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,sBAAyB,CACvB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mCAAsC,CACpC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gBAAmB,CACjB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,qBAAwB,CACtB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,wBAA2B,CACzB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,UAAa,CACX,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,mBAAsB,CACpB,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,WAAc,CACZ,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,WAAc,CACZ,mBAAsB,CACpB,MACA,WACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,kCAAqC,CACnC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,kCAAqC,CACnC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,qBAAwB,CACtB,mBAAsB,CACpB,QACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mBAAsB,CACpB,mBAAsB,CACpB,QACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,YAAe,CACb,mBAAsB,CACpB,QACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,cAAiB,CACf,mBAAsB,CACpB,QACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,UAAa,CACX,mBAAsB,CACpB,KACF,EACA,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iCAAoC,CAClC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,aAAgB,CACd,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,cAAiB,CACf,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mBAAsB,CACpB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gCAAmC,CACjC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,8BAAiC,CAC/B,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,sBAAyB,CACvB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,mCAAsC,CACpC,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,gBAAmB,CACjB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,qBAAwB,CACtB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,wBAA2B,CACzB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,oBAAuB,CACrB,oBAAuB,CACrB,OAAU,CACR,UAAa,aACf,CACF,CACF,EACA,iBAAoB,CAClB,oBAAuB,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",
  "names": ["require_lodash", "__commonJSMin", "exports", "module", "LARGE_ARRAY_SIZE", "HASH_UNDEFINED", "HOT_COUNT", "HOT_SPAN", "MAX_SAFE_INTEGER", "argsTag", "arrayTag", "asyncTag", "boolTag", "dateTag", "errorTag", "funcTag", "genTag", "mapTag", "numberTag", "nullTag", "objectTag", "proxyTag", "regexpTag", "setTag", "stringTag", "undefinedTag", "weakMapTag", "arrayBufferTag", "dataViewTag", "float32Tag", "float64Tag", "int8Tag", "int16Tag", "int32Tag", "uint8Tag", "uint8ClampedTag", "uint16Tag", "uint32Tag", "reRegExpChar", "reIsHostCtor", "reIsUint", "typedArrayTags", "freeGlobal", "freeSelf", "root", "freeExports", "freeModule", "moduleExports", "freeProcess", "nodeUtil", "types", "nodeIsTypedArray", "apply", "func", "thisArg", "args", "baseTimes", "n", "iteratee", "index", "result", "baseUnary", "value", "getValue", "object", "key", "overArg", "transform", "arg", "arrayProto", "funcProto", "objectProto", "coreJsData", "funcToString", "hasOwnProperty", "maskSrcKey", "uid", "nativeObjectToString", "objectCtorString", "reIsNative", "Buffer", "Symbol", "Uint8Array", "allocUnsafe", "getPrototype", "objectCreate", "propertyIsEnumerable", "splice", "symToStringTag", "defineProperty", "getNative", "nativeIsBuffer", "nativeMax", "nativeNow", "Map", "nativeCreate", "baseCreate", "proto", "isObject", "Hash", "entries", "length", "entry", "hashClear", "hashDelete", "hashGet", "data", "hashHas", "hashSet", "ListCache", "listCacheClear", "listCacheDelete", "assocIndexOf", "lastIndex", "listCacheGet", "listCacheHas", "listCacheSet", "MapCache", "mapCacheClear", "mapCacheDelete", "getMapData", "mapCacheGet", "mapCacheHas", "mapCacheSet", "size", "Stack", "stackClear", "stackDelete", "stackGet", "stackHas", "stackSet", "pairs", "arrayLikeKeys", "inherited", "isArr", "isArray", "isArg", "isArguments", "isBuff", "isBuffer", "isType", "isTypedArray", "skipIndexes", "isIndex", "assignMergeValue", "eq", "baseAssignValue", "assignValue", "objValue", "array", "baseFor", "createBaseFor", "baseGetTag", "getRawTag", "objectToString", "baseIsArguments", "isObjectLike", "baseIsNative", "isMasked", "pattern", "isFunction", "toSource", "baseIsTypedArray", "isLength", "baseKeysIn", "nativeKeysIn", "isProto", "isPrototype", "baseMerge", "source", "srcIndex", "customizer", "stack", "srcValue", "baseMergeDeep", "newValue", "safeGet", "keysIn", "mergeFunc", "stacked", "isCommon", "isTyped", "isArrayLikeObject", "copyArray", "cloneBuffer", "cloneTypedArray", "isPlainObject", "toPlainObject", "initCloneObject", "baseRest", "start", "setToString", "overRest", "identity", "baseSetToString", "string", "constant", "buffer", "isDeep", "cloneArrayBuffer", "arrayBuffer", "typedArray", "copyObject", "props", "isNew", "createAssigner", "assigner", "sources", "guard", "isIterateeCall", "fromRight", "keysFunc", "iterable", "map", "isKeyable", "isOwn", "tag", "unmasked", "type", "isArrayLike", "Ctor", "otherArgs", "shortOut", "count", "lastCalled", "stamp", "remaining", "other", "stubFalse", "merge", "require_postgres_array", "__commonJSMin", "exports", "source", "transform", "ArrayParser", "_ArrayParser", "identity", "character", "includeEmpty", "entry", "char", "nested", "parser", "quote", "value", "require_arrayParser", "__commonJSMin", "exports", "module", "array", "source", "transform", "require_postgres_date", "__commonJSMin", "exports", "module", "DATE_TIME", "DATE", "TIME_ZONE", "INFINITY", "isoDate", "matches", "getDate", "isBC", "year", "bcYearToNegativeYear", "month", "day", "hour", "minute", "second", "ms", "date", "offset", "timeZoneOffset", "is0To99", "zone", "type", "sign", "num", "require_mutable", "__commonJSMin", "exports", "module", "extend", "hasOwnProperty", "target", "i", "source", "key", "require_postgres_interval", "__commonJSMin", "exports", "module", "extend", "PostgresInterval", "raw", "parse", "properties", "filtered", "property", "value", "propertiesISOEquivalent", "dateProperties", "timeProperties", "datePart", "buildProperty", "timePart", "NUMBER", "YEAR", "MONTH", "DAY", "TIME", "INTERVAL", "regexString", "positions", "negatives", "parseMilliseconds", "fraction", "microseconds", "interval", "matches", "isNegative", "parsed", "position", "require_postgres_bytea", "__commonJSMin", "exports", "module", "input", "output", "i", "backslashes", "k", "require_textParsers", "__commonJSMin", "exports", "module", "array", "arrayParser", "parseDate", "parseInterval", "parseByteA", "allowNull", "fn", "value", "parseBool", "parseBoolArray", "parseBaseTenInt", "string", "parseIntegerArray", "parseBigIntegerArray", "entry", "parseBigInteger", "parsePointArray", "p", "parsePoint", "parseFloatArray", "parseStringArray", "parseDateArray", "parseIntervalArray", "parseByteAArray", "parseInteger", "valStr", "parseJsonArray", "parseCircle", "point", "radius", "pointParsed", "i", "result", "init", "register", "require_pg_int8", "__commonJSMin", "exports", "module", "BASE", "readInt8", "buffer", "high", "low", "sign", "result", "carry", "t", "digits", "pad", "l", "i", "require_binaryParsers", "__commonJSMin", "exports", "module", "parseInt64", "parseBits", "data", "bits", "offset", "invert", "callback", "lastValue", "newValue", "offsetBytes", "inv", "value", "mask", "firstBits", "result", "bytes", "i", "lastBits", "parseFloatFromBits", "precisionBits", "exponentBits", "bias", "sign", "exponent", "precisionBitsCounter", "parsePrecisionBits", "mantissa", "parseInt16", "parseInt32", "parseFloat32", "parseFloat64", "parseNumeric", "weight", "digits", "ndigits", "scale", "parseDate", "isUTC", "rawValue", "parseArray", "dim", "flags", "elementType", "dims", "parseElement", "length", "parse", "dimension", "array", "count", "parseText", "parseBool", "init", "register", "require_builtins", "__commonJSMin", "exports", "module", "require_pg_types", "__commonJSMin", "exports", "textParsers", "binaryParsers", "arrayParser", "builtinTypes", "getTypeParser", "setTypeParser", "typeParsers", "noParse", "val", "oid", "format", "parseFn", "converter", "require_defaults", "__commonJSMin", "exports", "module", "pgTypes", "parseBigInteger", "parseBigIntegerArray", "val", "require_utils", "__commonJSMin", "exports", "module", "defaults", "util", "isDate", "escapeElement", "elementRepresentation", "arrayString", "val", "result", "i", "item", "buf", "prepareValue", "seen", "dateToStringUTC", "dateToString", "prepareObject", "date", "offset", "year", "isBCYear", "ret", "normalizeQueryConfig", "config", "values", "callback", "escapeIdentifier", "str", "escapeLiteral", "hasBackslash", "escaped", "c", "value", "require_utils_legacy", "__commonJSMin", "exports", "module", "nodeCrypto", "md5", "string", "postgresMd5PasswordHash", "user", "password", "salt", "inner", "sha256", "text", "hashByName", "hashName", "hmacSha256", "key", "msg", "deriveKey", "iterations", "require_utils_webcrypto", "__commonJSMin", "exports", "module", "nodeCrypto", "postgresMd5PasswordHash", "randomBytes", "deriveKey", "sha256", "hashByName", "hmacSha256", "md5", "webCrypto", "subtleCrypto", "textEncoder", "length", "string", "data", "hash", "b", "user", "password", "salt", "inner", "text", "hashName", "keyBuffer", "msg", "key", "iterations", "params", "require_utils", "__commonJSMin", "exports", "module", "useLegacyCrypto", "require_cert_signatures", "__commonJSMin", "exports", "module", "x509Error", "msg", "cert", "readASN1Length", "data", "index", "length", "lengthBytes", "i", "readASN1OID", "OIDLength", "indexAfterOIDLength", "lastIndex", "byte1", "oid", "value", "nextByte", "expectASN1Seq", "signatureAlgorithmHashFromCertificate", "certInfoLength", "indexAfterCertInfoLength", "indexAfterOID", "hashOID", "require_sasl", "__commonJSMin", "exports", "module", "crypto", "signatureAlgorithmHashFromCertificate", "startSession", "mechanisms", "stream", "candidates", "mechanism", "candidate", "clientNonce", "continueSession", "session", "password", "serverData", "sv", "parseServerFirstMessage", "clientFirstMessageBare", "serverFirstMessage", "channelBinding", "peerCert", "hashName", "certHash", "clientFinalMessageWithoutProof", "authMessage", "saltBytes", "saltedPassword", "clientKey", "storedKey", "clientSignature", "clientProof", "xorBuffers", "serverKey", "serverSignatureBytes", "finalizeSession", "serverSignature", "parseServerFinalMessage", "isPrintableChars", "text", "_", "i", "c", "isBase64", "parseAttributePairs", "attrValue", "name", "value", "data", "attrPairs", "nonce", "salt", "iterationText", "iteration", "a", "b", "require_type_overrides", "__commonJSMin", "exports", "module", "types", "TypeOverrides", "userTypes", "format", "oid", "parseFn", "require_pg_connection_string", "__commonJSMin", "exports", "module", "parse", "str", "options", "config", "result", "dummyHost", "err", "entry", "hostname", "pathname", "fs", "toConnectionOptions", "sslConfig", "c", "key", "value", "toClientConfig", "v", "parseIntoClientConfig", "require_connection_parameters", "__commonJSMin", "exports", "module", "dns", "defaults", "parse", "val", "key", "config", "envVar", "readSSLConfigFromEnvironment", "quoteParamValue", "value", "add", "params", "paramName", "ConnectionParameters", "cb", "ssl", "err", "address", "require_result", "__commonJSMin", "exports", "module", "types", "matchRegexp", "Result", "rowMode", "msg", "match", "rowData", "row", "i", "len", "rawValue", "field", "v", "fieldDescriptions", "desc", "require_query", "__commonJSMin", "exports", "module", "EventEmitter", "Result", "utils", "Query", "config", "values", "callback", "msg", "row", "err", "connection", "con", "previous", "rows", "exports", "DatabaseError", "message", "length", "name", "CopyDataMessage", "chunk", "CopyResponse", "binary", "columnCount", "Field", "tableID", "columnID", "dataTypeID", "dataTypeSize", "dataTypeModifier", "format", "RowDescriptionMessage", "fieldCount", "ParameterDescriptionMessage", "parameterCount", "ParameterStatusMessage", "parameterName", "parameterValue", "AuthenticationMD5Password", "salt", "BackendKeyDataMessage", "processID", "secretKey", "NotificationResponseMessage", "processId", "channel", "payload", "ReadyForQueryMessage", "status", "CommandCompleteMessage", "text", "DataRowMessage", "fields", "NoticeMessage", "Writer", "size", "oldBuffer", "newSize", "num", "string", "len", "otherBuffer", "code", "length", "result", "exports", "buffer_writer_1", "writer", "startup", "opts", "key", "bodyBuffer", "length", "requestSsl", "response", "password", "sendSASLInitialResponseMessage", "mechanism", "initialResponse", "sendSCRAMClientFinalMessage", "additionalData", "query", "text", "emptyArray", "parse", "name", "types", "len", "buffer", "paramWriter", "writeValues", "values", "valueMapper", "i", "mappedVal", "bind", "config", "portal", "statement", "binary", "emptyExecute", "execute", "rows", "portalLength", "buff", "cancel", "processID", "secretKey", "cstringMessage", "code", "string", "emptyDescribePortal", "emptyDescribeStatement", "describe", "msg", "close", "copyData", "chunk", "copyFail", "message", "codeOnlyBuffer", "flushBuffer", "syncBuffer", "endBuffer", "copyDoneBuffer", "serialize", "exports", "emptyBuffer", "BufferReader", "offset", "buffer", "result", "length", "start", "end", "exports", "messages_1", "buffer_reader_1", "CODE_LENGTH", "LEN_LENGTH", "HEADER_LENGTH", "emptyBuffer", "Parser", "opts", "buffer", "callback", "bufferFullLength", "offset", "code", "length", "fullMessageLength", "message", "newLength", "newBuffer", "newBufferLength", "bytes", "status", "text", "chunk", "messageName", "isBinary", "columnCount", "i", "processId", "channel", "payload", "fieldCount", "name", "tableID", "columnID", "dataTypeID", "dataTypeSize", "dataTypeModifier", "mode", "parameterCount", "fields", "len", "value", "processID", "secretKey", "salt", "mechanism", "fieldType", "messageValue", "exports", "messages_1", "exports", "serializer_1", "parser_1", "parse", "stream", "callback", "parser", "buffer", "resolve", "exports", "require_stream", "__commonJSMin", "exports", "module", "getStream", "getSecureStream", "getStreamFuncs", "getNodejsStreamFuncs", "ssl", "net", "options", "getCloudflareStreamFuncs", "CloudflareSocket", "isCloudflareRuntime", "resp", "require_connection", "__commonJSMin", "exports", "module", "EventEmitter", "parse", "serialize", "getStream", "getSecureStream", "flushBuffer", "syncBuffer", "endBuffer", "Connection", "config", "self", "eventName", "port", "host", "reportStreamError", "error", "buffer", "options", "net", "err", "stream", "msg", "processID", "secretKey", "password", "mechanism", "initialResponse", "additionalData", "text", "query", "chunk", "require_split2", "__commonJSMin", "exports", "module", "Transform", "StringDecoder", "kLast", "kDecoder", "transform", "chunk", "enc", "cb", "list", "i", "push", "error", "flush", "self", "val", "noop", "incoming", "split", "matcher", "mapper", "options", "stream", "err", "require_helper", "__commonJSMin", "exports", "module", "path", "Stream", "split", "util", "defaultPort", "isWin", "warnStream", "S_IRWXG", "S_IRWXO", "S_IFMT", "S_IFREG", "isRegFile", "mode", "fieldNames", "nrOfFields", "passKey", "warn", "isWritable", "args", "val", "stream", "old", "rawEnv", "env", "file", "stats", "fname", "matcher", "connInfo", "entry", "prev", "field", "idx", "cb", "pass", "lineStream", "onLine", "line", "parseLine", "isValidEntry", "onEnd", "onErr", "err", "curChar", "prevChar", "fieldIdx", "startIdx", "endIdx", "obj", "isLastField", "addToObj", "i0", "i1", "i", "rules", "x", "rule", "value", "res", "require_lib", "__commonJSMin", "exports", "module", "path", "fs", "helper", "connInfo", "cb", "file", "err", "stat", "st", "require_client", "__commonJSMin", "exports", "module", "EventEmitter", "utils", "sasl", "TypeOverrides", "ConnectionParameters", "Query", "defaults", "Connection", "crypto", "Client", "config", "c", "err", "enqueueError", "query", "callback", "self", "con", "error", "resolve", "reject", "cb", "pass", "e", "msg", "hashedPassword", "activeQuery", "params", "data", "appName", "client", "oid", "format", "parseFn", "str", "queryError", "values", "result", "readTimeout", "readTimeoutTimer", "queryCallback", "res", "index", "require_pg_pool", "__commonJSMin", "exports", "module", "EventEmitter", "NOOP", "removeWhere", "list", "predicate", "i", "IdleItem", "client", "idleListener", "timeoutId", "PendingItem", "callback", "throwOnDoubleRelease", "promisify", "Promise", "rej", "res", "cb", "err", "result", "resolve", "reject", "makeIdleListener", "pool", "Pool", "options", "Client", "item", "pendingItem", "idleItem", "removed", "c", "context", "response", "queueCallback", "done", "tid", "timeoutHit", "maxLifetimeTimeout", "clientRelease", "isNew", "released", "text", "values", "clientReleased", "onError", "promised", "acc", "require_query", "__commonJSMin", "exports", "module", "EventEmitter", "util", "utils", "NativeQuery", "config", "values", "callback", "event", "errorFieldMap", "err", "fields", "key", "normalizedFieldName", "onSuccess", "onFailure", "resolve", "reject", "client", "self", "after", "rows", "results", "rowOfRows", "i", "row", "vals", "require_client", "__commonJSMin", "exports", "module", "Native", "e", "TypeOverrides", "EventEmitter", "util", "ConnectionParameters", "NativeQuery", "Client", "config", "cp", "err", "enqueueError", "query", "cb", "self", "conString", "msg", "callback", "resolve", "reject", "error", "values", "result", "readTimeout", "readTimeoutTimer", "queryCallback", "resolveOut", "rejectOut", "res", "index", "initialConnection", "oid", "format", "parseFn", "require_native", "__commonJSMin", "exports", "module", "require_lib", "__commonJSMin", "exports", "module", "Client", "defaults", "Connection", "Result", "utils", "Pool", "TypeOverrides", "DatabaseError", "escapeIdentifier", "escapeLiteral", "poolFactory", "options", "PG", "clientConstructor", "native", "err", "require_shimmer", "__commonJSMin", "exports", "module", "isFunction", "funktion", "logger", "defineProperty", "obj", "name", "value", "enumerable", "shimmer", "options", "wrap", "nodule", "wrapper", "original", "wrapped", "massWrap", "nodules", "names", "unwrap", "massUnwrap", "require_listener", "__commonJSMin", "exports", "module", "shimmer", "wrap", "unwrap", "SYMBOL", "defineProperty", "obj", "name", "value", "enumerable", "_process", "self", "listeners", "l", "p", "listener", "before", "length", "i", "_listeners", "event", "_findAndProcess", "after", "unprocessed", "fn", "_wrap", "unwrapped", "visit", "wrapped", "emitter", "onAddListener", "onEmit", "adding", "on", "existing", "returned", "emitting", "emit", "remover", "removeListener", "require_context", "__commonJSMin", "exports", "module", "util", "assert", "wrapEmitter", "async_hooks", "CONTEXTS_SYMBOL", "ERROR_SYMBOL", "DEBUG_CLS_HOOKED", "currentUid", "getNamespace", "createNamespace", "destroyNamespace", "reset", "Namespace", "name", "key", "value", "indentStr", "debug2", "asyncHooksCurrentId", "triggerId", "context", "fn", "exception", "promise", "result", "err", "self", "index", "emitter", "namespace", "thisSymbol", "attach", "listener", "bind", "unwrapped", "wrapped", "unwrappedContexts", "thunk", "asyncId", "type", "resource", "triggerIdContext", "parentId", "args", "require_logger", "__commonJSMin", "exports", "module", "validLogLevels", "defaultLogLevel", "logLevel", "calculateLogLevel", "logger", "createLoggerForLevel", "level", "loggerLevel", "consoleMethod", "message", "meta", "formatLogMessage", "normalisedLevel", "index", "createTimestamp", "date", "tzo", "dif", "pad", "num", "norm", "isLambdaFunction", "messageParts", "logString", "metaDataString", "formatMetaData", "str", "logging", "logObj", "require_captured_exception", "__commonJSMin", "exports", "module", "crypto", "CapturedException", "err", "remote", "e", "stack", "stackline", "line", "label", "path", "entry", "require_atomic_batcher", "__commonJSMin", "exports", "module", "batcher", "run", "running", "pendingBatch", "pendingCallbacks", "callbacks", "append", "done", "err", "callAll", "nextBatch", "val", "cb", "pushAll", "list", "pushArray", "i", "require_daemon_config", "__commonJSMin", "exports", "module", "logger", "DaemonConfig", "address", "processAddress", "splitAddress", "addr", "part_1", "part_2", "addr_map", "require_segment_emitter", "__commonJSMin", "exports", "module", "dgram", "batcher", "logger", "PROTOCOL_HEADER", "PROTOCOL_DELIMITER", "batchSendData", "ops", "callback", "client", "executeSendData", "index", "sendMessage", "data", "batchCallback", "msg", "offset", "length", "port", "address", "err", "BatchingTemporarySocket", "work", "SegmentEmitter", "segment", "formatted", "message", "short", "type", "require_trace_id", "__commonJSMin", "exports", "module", "crypto", "logger", "TraceID", "_TraceID", "tsHex", "numberhex", "rawID", "DELIMITER", "traceID", "version", "timestamp", "parts", "require_utils", "__commonJSMin", "exports", "module", "crypto", "logger", "TraceID", "utils", "status", "stat", "path", "pattern", "text", "patternLength", "textLength", "indexOfGlob", "match", "j", "i", "patternChar", "matchArray", "xAmznTraceId", "valid", "data", "segment", "traceData", "amznTraceData", "reservedKeywords", "remainingBytes", "header", "pair", "key", "value", "lowerCaseKey", "reserved", "obj", "keys", "preservePrototype", "target", "property", "val", "require_segment_utils", "__commonJSMin", "exports", "module", "safeParseInt", "logger", "DEFAULT_STREAMING_THRESHOLD", "utils", "origin", "pluginData", "sdkData", "serviceData", "threshold", "res", "ret", "status", "_", "value", "require_remote_request_data", "__commonJSMin", "exports", "module", "getHttpResponseData", "stripQueryStringFromPath", "RemoteRequestData", "req", "res", "downstreamXRayEnabled", "require_subsegment", "__commonJSMin", "exports", "module", "crypto", "CapturedException", "RemoteRequestData", "SegmentEmitter", "SegmentUtils", "Utils", "logger", "Subsegment", "name", "subsegment", "index", "data", "id", "key", "value", "namespace", "ns", "sqlData", "err", "remote", "req", "res", "downstreamXRayEnabled", "root", "additional", "open", "child", "ignore", "thisCopy", "object", "require_segment", "__commonJSMin", "exports", "module", "crypto", "CapturedException", "SegmentEmitter", "SegmentUtils", "Subsegment", "TraceID", "Utils", "logger", "Segment", "name", "rootId", "parentId", "traceId", "id", "startTime", "data", "key", "value", "user", "namespace", "ns", "ruleName", "subsegment", "index", "err", "remote", "additional", "open", "child", "thisCopy", "ignore", "object", "require_context_utils", "__commonJSMin", "exports", "module", "cls", "logger", "Segment", "Subsegment", "cls_mode", "NAMESPACE", "SEGMENT", "contextOverride", "contextUtils", "message", "err", "params", "xraySegment", "segment", "found", "strategy", "lookupStrategy", "require_incoming_request_data", "__commonJSMin", "exports", "module", "getHttpResponseData", "IncomingRequestData", "req", "forwarded", "url", "getClientIp", "clientIp", "res", "require_local_reservoir", "__commonJSMin", "exports", "module", "LocalReservoir", "fixedTarget", "fallbackRate", "now", "require_default_sampling_rules", "__commonJSMin", "exports", "module", "require_local_sampler", "__commonJSMin", "exports", "module", "fs", "LocalReservoir", "Utils", "defaultRules", "logger", "LocalSampler", "sampleRequest", "host", "httpMethod", "urlPath", "formatted", "matched", "rule", "source", "loadRulesConfig", "parseRulesConfig", "config", "defaultRule", "rules", "missing", "key", "rawRule", "params", "required", "value", "require_reservoir", "__commonJSMin", "exports", "module", "Reservoir", "now", "canBorrow", "quota", "TTL", "interval", "require_sampling_rule", "__commonJSMin", "exports", "module", "Utils", "Reservoir", "SamplingRule", "name", "priority", "rate", "reservoirSize", "host", "httpMethod", "urlPath", "serviceName", "serviceType", "sampleRequest", "statistics", "rule", "require_service_connector", "__commonJSMin", "exports", "module", "crypto", "logger", "SamplingRule", "DaemonConfig", "util", "http", "ServiceConnector", "callback", "body", "options", "getOptions", "req", "res", "data", "d", "error", "dataObj", "err", "newRules", "assembleRules", "rules", "constructStatisticsDocs", "targetsMapping", "assembleTargets", "ruleFreshness", "dateToEpoch", "documents", "now", "rule", "statistics", "doc", "ruleList", "ruleRecord", "isRuleValid", "newRule", "docs", "newTarget", "record", "date", "path", "contentLength", "require_rule_cache", "__commonJSMin", "exports", "module", "TTL", "RuleCache", "sampleRequest", "now", "isExpired", "matchedRule", "rule", "rules", "oldRules", "oldRule", "a", "b", "v", "targetsMapping", "target", "require_rule_poller", "__commonJSMin", "exports", "module", "logger", "ServiceConnector", "ruleCache", "DEFAULT_INTERVAL", "RulePoller", "refresh", "jitter", "delay", "getJitter", "refreshWithFirewall", "refreshCache", "now", "err", "newRules", "require_target_poller", "__commonJSMin", "exports", "module", "rulePoller", "serviceConnector", "ruleCache", "logger", "DEFAULT_INTERVAL", "TargetPoller", "refreshWithFirewall", "getJitter", "refresh", "candidates", "getCandidates", "err", "targetsMapping", "ruleFreshness", "rules", "rule", "require_default_sampler", "__commonJSMin", "exports", "module", "logger", "util", "SegmentUtils", "DefaultSampler", "sampleRequest", "now", "matchedRule", "processMatchedRule", "err", "source", "rule", "reservoir", "sample", "decision", "require_mw_utils", "__commonJSMin", "exports", "module", "Segment", "IncomingRequestData", "logger", "coreUtils", "wildcardMatch", "processTraceData", "XRAY_HEADER", "overrideFlag", "utils", "hostPattern", "req", "amznTraceHeader", "hostHeader", "name", "segment", "res", "isSampled", "sampleRequest", "source", "message", "url", "middlewareLog", "didEnd", "endSegment", "cause", "require_invoke_store", "__commonJSMin", "exports", "async_hooks_1", "noGlobalAwsLambda", "PROTECTED_KEYS", "InvokeStoreImpl", "context", "fn", "key", "value", "__publicField", "instance", "require_aws_lambda", "__commonJSMin", "exports", "module", "contextUtils", "mwUtils", "LambdaUtils", "Segment", "SegmentEmitter", "SegmentUtils", "logger", "TraceID", "InvokeStore", "xAmznTraceIdPrev", "namespace", "facadeSegment", "segment", "whitelistFcn", "silentFcn", "xAmznTraceId", "key", "func", "traceIdFromInvokeStore", "traceIdFromEnv", "xAmznLambda", "require_package", "__commonJSMin", "exports", "module", "require_plugin", "__commonJSMin", "exports", "module", "http", "Plugin", "options", "callback", "retries", "getMetadata", "httpReq", "req", "res", "body", "chunk", "e", "err", "require_ec2_plugin", "__commonJSMin", "exports", "module", "Plugin", "logger", "http", "EC2Plugin", "callback", "METADATA_PATH", "populateMetadata", "token", "options", "getOptions", "err", "data", "metadata", "getToken", "httpReq", "req", "res", "body", "chunk", "path", "method", "headers", "require_ecs_plugin", "__commonJSMin", "exports", "module", "os", "ECSPlugin", "callback", "require_elastic_beanstalk_plugin", "__commonJSMin", "exports", "module", "fs", "logger", "ENV_CONFIG_LOCATION", "ElasticBeanstalkPlugin", "callback", "err", "rawData", "data", "metadata", "require_aws_whitelist", "__commonJSMin", "exports", "module", "require_call_capturer", "__commonJSMin", "exports", "module", "fs", "logger", "whitelist", "paramTypes", "CallCapturer", "source", "loadWhitelist", "newServices", "attribute", "serviceName", "response", "operation", "call", "dataCaptured", "paramType", "params", "captureCallParams", "captureDescriptors", "data", "param", "formatted", "toSnakeCase", "descriptors", "paramName", "attributes", "paramData", "doc", "require_aws", "__commonJSMin", "exports", "module", "CallCapturer", "capturer", "Aws", "res", "serviceName", "formatOperation", "data", "attribute", "setAWSWhitelist", "source", "appendAWSWhitelist", "operation", "require_capture", "__commonJSMin", "exports", "module", "contextUtils", "logger", "captureFunc", "name", "fcn", "parent", "validate", "current", "executeFcn", "parentSeg", "captureFcn", "response", "e", "captureAsyncFunc", "captureCallbackFunc", "base", "args", "session", "contextFcn", "value", "error", "require_constants", "__commonJSMin", "exports", "module", "SEMVER_SPEC_VERSION", "MAX_SAFE_INTEGER", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "RELEASE_TYPES", "require_debug", "__commonJSMin", "exports", "module", "debug", "args", "require_re", "__commonJSMin", "exports", "module", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "MAX_LENGTH", "debug", "re", "safeRe", "src", "safeSrc", "t", "R", "LETTERDASHNUMBER", "safeRegexReplacements", "makeSafeRegex", "value", "token", "max", "createToken", "name", "isGlobal", "safe", "index", "require_parse_options", "__commonJSMin", "exports", "module", "looseOption", "emptyOpts", "parseOptions", "options", "require_identifiers", "__commonJSMin", "exports", "module", "numeric", "compareIdentifiers", "a", "b", "anum", "bnum", "rcompareIdentifiers", "require_semver", "__commonJSMin", "exports", "module", "debug", "MAX_LENGTH", "MAX_SAFE_INTEGER", "re", "t", "parseOptions", "compareIdentifiers", "SemVer", "_SemVer", "version", "options", "m", "id", "num", "other", "i", "a", "b", "release", "identifier", "identifierBase", "match", "base", "prerelease", "require_parse", "__commonJSMin", "exports", "module", "SemVer", "parse", "version", "options", "throwErrors", "er", "require_valid", "__commonJSMin", "exports", "module", "parse", "valid", "version", "options", "v", "require_clean", "__commonJSMin", "exports", "module", "parse", "clean", "version", "options", "s", "require_inc", "__commonJSMin", "exports", "module", "SemVer", "inc", "version", "release", "options", "identifier", "identifierBase", "require_diff", "__commonJSMin", "exports", "module", "parse", "diff", "version1", "version2", "v1", "v2", "comparison", "v1Higher", "highVersion", "lowVersion", "highHasPre", "prefix", "require_major", "__commonJSMin", "exports", "module", "SemVer", "major", "a", "loose", "require_minor", "__commonJSMin", "exports", "module", "SemVer", "minor", "a", "loose", "require_patch", "__commonJSMin", "exports", "module", "SemVer", "patch", "a", "loose", "require_prerelease", "__commonJSMin", "exports", "module", "parse", "prerelease", "version", "options", "parsed", "require_compare", "__commonJSMin", "exports", "module", "SemVer", "compare", "a", "b", "loose", "require_rcompare", "__commonJSMin", "exports", "module", "compare", "rcompare", "a", "b", "loose", "require_compare_loose", "__commonJSMin", "exports", "module", "compare", "compareLoose", "a", "b", "require_compare_build", "__commonJSMin", "exports", "module", "SemVer", "compareBuild", "a", "b", "loose", "versionA", "versionB", "require_sort", "__commonJSMin", "exports", "module", "compareBuild", "sort", "list", "loose", "a", "b", "require_rsort", "__commonJSMin", "exports", "module", "compareBuild", "rsort", "list", "loose", "a", "b", "require_gt", "__commonJSMin", "exports", "module", "compare", "gt", "a", "b", "loose", "require_lt", "__commonJSMin", "exports", "module", "compare", "lt", "a", "b", "loose", "require_eq", "__commonJSMin", "exports", "module", "compare", "eq", "a", "b", "loose", "require_neq", "__commonJSMin", "exports", "module", "compare", "neq", "a", "b", "loose", "require_gte", "__commonJSMin", "exports", "module", "compare", "gte", "a", "b", "loose", "require_lte", "__commonJSMin", "exports", "module", "compare", "lte", "a", "b", "loose", "require_cmp", "__commonJSMin", "exports", "module", "eq", "neq", "gt", "gte", "lt", "lte", "cmp", "a", "op", "b", "loose", "require_coerce", "__commonJSMin", "exports", "module", "SemVer", "parse", "re", "t", "coerce", "version", "options", "match", "coerceRtlRegex", "next", "major", "minor", "patch", "prerelease", "build", "require_lrucache", "__commonJSMin", "exports", "module", "LRUCache", "key", "value", "firstKey", "require_range", "__commonJSMin", "exports", "module", "SPACE_CHARACTERS", "Range", "_Range", "range", "options", "parseOptions", "Comparator", "r", "c", "first", "isNullSet", "isAny", "i", "comps", "k", "memoKey", "FLAG_INCLUDE_PRERELEASE", "FLAG_LOOSE", "cached", "cache", "loose", "hr", "re", "t", "hyphenReplace", "debug", "comparatorTrimReplace", "tildeTrimReplace", "caretTrimReplace", "rangeList", "comp", "parseComparator", "replaceGTE0", "rangeMap", "comparators", "result", "thisComparators", "isSatisfiable", "rangeComparators", "thisComparator", "rangeComparator", "version", "SemVer", "testSet", "LRU", "remainingComparators", "testComparator", "otherComparator", "replaceCarets", "replaceTildes", "replaceXRanges", "replaceStars", "isX", "id", "replaceTilde", "_", "M", "m", "p", "pr", "ret", "replaceCaret", "z", "replaceXRange", "gtlt", "xM", "xm", "xp", "anyX", "incPr", "$0", "from", "fM", "fm", "fp", "fpr", "fb", "to", "tM", "tm", "tp", "tpr", "set", "allowed", "require_comparator", "__commonJSMin", "exports", "module", "ANY", "Comparator", "_Comparator", "comp", "options", "parseOptions", "debug", "r", "re", "t", "m", "SemVer", "version", "cmp", "Range", "require_satisfies", "__commonJSMin", "exports", "module", "Range", "satisfies", "version", "range", "options", "require_to_comparators", "__commonJSMin", "exports", "module", "Range", "toComparators", "range", "options", "comp", "c", "require_max_satisfying", "__commonJSMin", "exports", "module", "SemVer", "Range", "maxSatisfying", "versions", "range", "options", "max", "maxSV", "rangeObj", "v", "require_min_satisfying", "__commonJSMin", "exports", "module", "SemVer", "Range", "minSatisfying", "versions", "range", "options", "min", "minSV", "rangeObj", "v", "require_min_version", "__commonJSMin", "exports", "module", "SemVer", "Range", "gt", "minVersion", "range", "loose", "minver", "i", "comparators", "setMin", "comparator", "compver", "require_valid", "__commonJSMin", "exports", "module", "Range", "validRange", "range", "options", "require_outside", "__commonJSMin", "exports", "module", "SemVer", "Comparator", "ANY", "Range", "satisfies", "gt", "lt", "lte", "gte", "outside", "version", "range", "hilo", "options", "gtfn", "ltefn", "ltfn", "comp", "ecomp", "i", "comparators", "high", "low", "comparator", "require_gtr", "__commonJSMin", "exports", "module", "outside", "gtr", "version", "range", "options", "require_ltr", "__commonJSMin", "exports", "module", "outside", "ltr", "version", "range", "options", "require_intersects", "__commonJSMin", "exports", "module", "Range", "intersects", "r1", "r2", "options", "require_simplify", "__commonJSMin", "exports", "module", "satisfies", "compare", "versions", "range", "options", "set", "first", "prev", "v", "a", "b", "version", "ranges", "min", "max", "simplified", "original", "require_subset", "__commonJSMin", "exports", "module", "Range", "Comparator", "ANY", "satisfies", "compare", "subset", "sub", "dom", "options", "sawNonNull", "OUTER", "simpleSub", "simpleDom", "isSub", "simpleSubset", "minimumVersionWithPreRelease", "minimumVersion", "eqSet", "gt", "lt", "c", "higherGT", "lowerLT", "gtltComp", "eq", "higher", "lower", "hasDomLT", "hasDomGT", "needDomLTPre", "needDomGTPre", "a", "b", "comp", "require_semver", "__commonJSMin", "exports", "module", "internalRe", "constants", "SemVer", "identifiers", "parse", "valid", "clean", "inc", "diff", "major", "minor", "patch", "prerelease", "compare", "rcompare", "compareLoose", "compareBuild", "sort", "rsort", "gt", "lt", "eq", "neq", "gte", "lte", "cmp", "coerce", "Comparator", "Range", "satisfies", "toComparators", "maxSatisfying", "minSatisfying", "minVersion", "validRange", "outside", "gtr", "ltr", "intersects", "simplifyRange", "subset", "require_aws_p", "__commonJSMin", "exports", "module", "semver", "Aws", "contextUtils", "Utils", "logger", "minVersion", "throttledErrorDefault", "captureAWS", "awssdk", "prop", "Service", "captureAWSRequest", "captureAWSClient", "service", "req", "parent", "output", "throttledError", "stack", "subsegment", "traceId", "data", "buildListener", "traceHeader", "key", "value", "completeListener", "res", "httpRes", "HttpResponse", "err", "cause", "callback", "session", "require_dist_cjs", "__commonJSMin", "exports", "module", "__defProp", "__getOwnPropDesc", "__getOwnPropNames", "__hasOwnProp", "__name", "target", "value", "__export", "all", "name", "__copyProps", "to", "from", "except", "desc", "key", "__toCommonJS", "mod", "src_exports", "isClockSkewCorrectedError", "isClockSkewError", "isRetryableByTrait", "isServerError", "isThrottlingError", "isTransientError", "CLOCK_SKEW_ERROR_CODES", "THROTTLING_ERROR_CODES", "TRANSIENT_ERROR_CODES", "TRANSIENT_ERROR_STATUS_CODES", "NODEJS_TIMEOUT_ERROR_CODES", "error", "_a", "_b", "statusCode", "require_aws3_p", "__commonJSMin", "exports", "__importDefault", "mod", "service_error_classification_1", "aws_1", "querystring_1", "subsegment_1", "contextUtils", "logger", "safeParseInt", "utils_1", "XRAY_PLUGIN_NAME", "buildAttributesFromMetadata", "service", "operation", "region", "commandInput", "res", "error", "_a", "_b", "_c", "extendedRequestId", "requestId", "statusCode", "attempts", "aws", "http", "addFlags", "subsegment", "err", "cause", "getXRayMiddleware", "config", "manualSegment", "next", "context", "args", "segment", "clientName", "commandName", "commandOperation", "output", "parent", "data", "traceHeader", "key", "value", "errObj", "xRayMiddlewareOptions", "getXRayPlugin", "stack", "captureAWSClient", "client", "require_http_p", "__commonJSMin", "exports", "module", "url", "contextUtils", "Utils", "logger", "events", "captureHTTPsGlobal", "downstreamXRayEnabled", "subsegmentCallback", "enableCapture", "captureHTTPs", "tracedModule", "val", "captureOutgoingHTTPs", "baseFunc", "args", "options", "callback", "hasUrl", "urlObj", "arg0", "parent", "hostname", "output", "subsegment", "root", "errorCapturer", "e", "madeItToDownstream", "optionsCopy", "req", "res", "cause", "captureHTTPsRequest", "captureHTTPsGet", "require_promise_p", "__commonJSMin", "exports", "module", "contextUtils", "originalThen", "originalCatch", "patchPromise", "Promise", "then", "onFulfilled", "onRejected", "tryGetCurrentSegment", "ns", "origCatch", "unpatchPromise", "capturePromise", "uncapturePromise", "require_sql_data", "__commonJSMin", "exports", "module", "SqlData", "databaseVer", "driverVer", "user", "url", "queryType", "require_aws_xray", "__commonJSMin", "exports", "module", "contextUtils", "logging", "segmentUtils", "utils", "LambdaEnv", "pkginfo", "err", "UNKNOWN", "AWSXRay", "plugins", "pluginData", "plugin", "data", "attribute", "sdkData", "require_lib", "__commonJSMin", "exports", "module", "list_leads_exports", "__export", "handler", "__toCommonJS", "COLD_START_METRIC", "DEFAULT_NAMESPACE", "MetricUnit", "MetricResolution", "import_node_console", "PT_VERSION", "EXEC_ENV", "middlewareOptions", "isSdkClient", "client", "customUserAgentMiddleware", "feature", "next", "args", "existingUserAgent", "featureSpecificUserAgent", "PT_VERSION", "hasPowertools", "middlewareStack", "found", "middleware", "addUserAgentMiddleware", "error", "PREFIX", "TRACER_KEY", "METRICS_KEY", "LOGGER_KEY", "IDEMPOTENCY_KEY", "isString", "value", "isNumber", "isIntegerNumber", "isNull", "value", "isNullOrUndefined", "isStringUndefinedNullEmpty", "isString", "_initializationType", "Utility", "__privateAdd", "__publicField", "__privateSet", "__privateGet", "envVarValue", "serviceName", "env", "PT_VERSION", "POWERTOOLS_DEV_ENV_VAR", "POWERTOOLS_SERVICE_NAME_ENV_VAR", "XRAY_TRACE_ID_ENV_VAR", "getStringFromEnv", "key", "defaultValue", "errorMessage", "value", "getNumberFromEnv", "parsedValue", "truthyValues", "falsyValues", "getBooleanFromEnv", "extendedParsing", "isDevMode", "POWERTOOLS_DEV_ENV_VAR", "getServiceName", "POWERTOOLS_SERVICE_NAME_ENV_VAR", "getXrayTraceDataFromEnv", "xRayTraceEnv", "XRAY_TRACE_ID_ENV_VAR", "xRayTraceData", "field", "isRequestXRaySampled", "getXRayTraceIdFromEnv", "_logger", "_envConfig", "_timestamp", "_Metrics_instances", "resolveServiceName_fn", "validateEmfTimestamp_fn", "convertTimestampToEmfFormat_fn", "sanitizeDimensions_fn", "_Metrics", "Utility", "options", "__privateAdd", "__publicField", "__privateSet", "name", "value", "isStringUndefinedNullEmpty", "__privateGet", "dimensions", "newDimensions", "__privateMethod", "currentCount", "newSetCount", "key", "unit", "resolution", "MetricResolution", "functionName", "singleMetric", "COLD_START_METRIC", "MetricUnit", "throwOnEmptyMetrics", "defaultDimensions", "captureColdStartMetric", "_target", "_propertyKey", "descriptor", "originalMethod", "metricsRef", "args", "result", "hasMetrics", "emfOutput", "timestamp", "metricDefinitions", "metricDefinition", "metricValues", "dimensionNames", "allDimensionKeys", "dimensionSet", "dimensionSetKeys", "DEFAULT_NAMESPACE", "acc", "dims", "enabled", "dimensionSetsCount", "total", "currentUnit", "customConfigService", "getStringFromEnv", "getServiceName", "getBooleanFromEnv", "isDevMode", "namespace", "serviceName", "resolvedServiceName", "isString", "isNumber", "storedMetric", "service", "isDate", "isIntegerNumber", "timestampMs", "currentTime", "minValidTimestamp", "maxValidTimestamp", "Metrics", "LogJsonIndent", "LogLevelThreshold", "ReservedKeys", "UncaughtErrorLogMessage", "_getDateFormatter", "_LogFormatter_instances", "generateISOTimestampWithOffset_fn", "LogFormatter", "__privateAdd", "timezone", "twoDigitFormatOption", "validTimeZone", "error", "name", "message", "stack", "cause", "errorAttributes", "formattedError", "isDevMode", "key", "now", "defaultTimezone", "configuredTimezone", "getStringFromEnv", "__privateMethod", "stackLines", "regex", "item", "match", "date", "year", "month", "day", "hour", "minute", "second", "__privateGet", "acc", "datePart", "offset", "offsetSign", "offsetHours", "offsetMinutes", "millisecondPart", "offsetPart", "import_lodash", "LogItem", "params", "__publicField", "attributes", "merge", "newAttributes", "key", "import_node_console", "import_node_crypto", "import_lodash", "_logRecordOrder", "PowertoolsLogFormatter", "LogFormatter", "options", "__privateAdd", "__privateSet", "attributes", "additionalLogAttributes", "baseAttributes", "__privateGet", "LogItem", "orderedAttributes", "key", "SizedItem", "value", "logLevel", "__publicField", "isString", "SizedSet", "item", "wasDeleted", "firstElement", "_maxBytesSize", "_onBufferOverflow", "_CircularMap_instances", "deleteFromBufferUntilSizeIsLessThanMax_fn", "CircularMap", "maxBytesSize", "onBufferOverflow", "__privateAdd", "__privateSet", "key", "__privateGet", "buffer", "__privateMethod", "_alcLogLevel", "_initBuffer", "_isInitialized", "_keys", "_initialLogLevel", "_jsonReplacerFn", "_bufferConfig", "_buffer", "_correlationIdSearchFn", "_debugLogSampling", "_warnOnceMap", "_Logger_instances", "warnOnce_fn", "appendKeys_fn", "createAdditionalAttributes_fn", "processMainInput_fn", "processExtraInput_fn", "processExtraObject_fn", "shouldEnableDebugSampling_fn", "checkReservedKeyAndWarn_fn", "setLogBuffering_fn", "_Logger", "Utility", "options", "__privateAdd", "__publicField", "LogJsonIndent", "LogLevelThreshold", "customConfigService", "rest", "__privateSet", "level", "log", "__privateGet", "context", "attributes", "__privateMethod", "childLogger", "merge", "input", "extraInput", "_target", "_propertyKey", "descriptor", "originalMethod", "loggerRef", "args", "error", "UncaughtErrorLogMessage", "logger", "_persistentAttributes", "event", "overwriteValue", "keys", "key", "logLevel", "references", "value", "_a", "replacedValue", "selectedLogLevel", "unformattedBaseAttributes", "getXRayTraceIdFromEnv", "additionalAttributes", "found", "sampleRateValue", "consoleMethod", "traceId", "isDevMode", "message", "optionalParams", "constructorLogLevel", "customConfigValue", "logLevelVariable", "getStringFromEnv", "logLevelVariableAlias", "logLevelValue", "constructorValue", "sampleRateEnvVariable", "getNumberFromEnv", "getBooleanFromEnv", "logFormatter", "logRecordOrder", "PowertoolsLogFormatter", "serviceName", "persistentKeys", "persistentLogAttributes", "environment", "jsonReplacerFn", "logBufferOptions", "correlationIdSearchFn", "lambdaLogLevel", "AlcLogLevel", "xrayTraceId", "buffer", "item", "correlationIdPath", "correlationId", "type", "attributeKey", "baseAttributes", "isNullOrUndefined", "ReservedKeys", "CircularMap", "bufferAtLogLevel", "Logger", "byteToHex", "i", "unsafeStringify", "arr", "offset", "import_node_crypto", "rnds8Pool", "poolPtr", "rng", "crypto", "import_node_crypto", "native_default", "crypto", "v4", "options", "buf", "offset", "native_default", "rnds", "rng", "i", "unsafeStringify", "v4_default", "Logger", "_Logger", "serviceName", "context", "v4_default", "traceId", "newContext", "keysToAdd", "message", "metadata", "error", "errorDetails", "keys", "additionalContext", "metricName", "value", "method", "path", "success", "logger", "Logger", "import_lib", "Client", "pg", "Pool", "Connection", "types", "Query", "DatabaseError", "escapeIdentifier", "escapeLiteral", "Result", "TypeOverrides", "defaults", "import_aws_sdk", "import_aws_xray_sdk_core", "import_aws_xray_sdk_core", "import_node_diagnostics_channel", "import_node_http", "import_node_https", "import_node_url", "decoder", "findHeaderAndDecode", "encodedHeaders", "key", "foundIndex", "i", "isHttpSubsegment", "subsegment", "getRequestURL", "request", "captureAWS", "captureAWSClient", "captureAWSv3Client", "captureAsyncFunc", "captureFunc", "captureHTTPsGlobal", "getNamespace", "getSegment", "setSegment", "XraySegment", "setContextMissingStrategy", "setDaemonAddress", "setLogger", "xraySdk", "ProviderService", "awssdk", "service", "addUserAgentMiddleware", "name", "fcn", "_parent", "http", "https", "onRequestStart", "message", "request", "method", "parentSubsegment", "requestURL", "getRequestURL", "subsegment", "getXRayTraceIdFromEnv", "onResponse", "response", "isHttpSubsegment", "status", "contentLenght", "findHeaderAndDecode", "onError", "error", "key", "value", "segment", "namespace", "strategy", "address", "logObj", "XraySubsegment", "xraySdk", "_envConfig", "_Tracer_instances", "setEnvConfig_fn", "Tracer", "Utility", "options", "__privateAdd", "__publicField", "__privateMethod", "ProviderService", "error", "remote", "subsegment", "data", "methodName", "aws", "service", "_target", "_propertyKey", "descriptor", "originalMethod", "tracerRef", "args", "result", "propertyKey", "subsegmentName", "getXRayTraceIdFromEnv", "segment", "isRequestXRaySampled", "key", "value", "namespace", "__privateGet", "customConfigValue", "enabled", "customConfigService", "serviceName", "captureHTTPsRequests", "getStringFromEnv", "getServiceName", "tracer", "Tracer", "getSegment", "tracer", "error", "createSubsegment", "name", "annotations", "metadata", "segment", "subsegment", "key", "value", "closeSubsegment", "status", "err", "traceSubsegment", "fn", "result", "addAnnotations", "addMetadata", "namespace", "traceQuery", "queryName", "query", "params", "traceSubsegment", "logger", "Logger", "secretsManager", "DatabasePool", "secretArn", "response", "secret", "error", "credentials", "Pool", "err", "dbPool", "getClient", "dbPool", "external_exports", "__export", "BRAND", "DIRTY", "EMPTY_PATH", "INVALID", "NEVER", "OK", "ParseStatus", "ZodType", "ZodAny", "ZodArray", "ZodBigInt", "ZodBoolean", "ZodBranded", "ZodCatch", "ZodDate", "ZodDefault", "ZodDiscriminatedUnion", "ZodEffects", "ZodEnum", "ZodError", "ZodFirstPartyTypeKind", "ZodFunction", "ZodIntersection", "ZodIssueCode", "ZodLazy", "ZodLiteral", "ZodMap", "ZodNaN", "ZodNativeEnum", "ZodNever", "ZodNull", "ZodNullable", "ZodNumber", "ZodObject", "ZodOptional", "ZodParsedType", "ZodPipeline", "ZodPromise", "ZodReadonly", "ZodRecord", "ZodSet", "ZodString", "ZodSymbol", "ZodTuple", "ZodUndefined", "ZodUnion", "ZodUnknown", "ZodVoid", "addIssueToContext", "anyType", "arrayType", "bigIntType", "booleanType", "coerce", "custom", "dateType", "datetimeRegex", "en_default", "discriminatedUnionType", "effectsType", "enumType", "functionType", "getErrorMap", "getParsedType", "instanceOfType", "intersectionType", "isAborted", "isAsync", "isDirty", "isValid", "late", "lazyType", "literalType", "makeIssue", "mapType", "nanType", "nativeEnumType", "neverType", "nullType", "nullableType", "numberType", "objectType", "objectUtil", "oboolean", "onumber", "optionalType", "ostring", "pipelineType", "preprocessType", "promiseType", "quotelessJson", "recordType", "setType", "setErrorMap", "strictObjectType", "stringType", "symbolType", "tupleType", "undefinedType", "unionType", "unknownType", "util", "voidType", "util", "_", "assertIs", "_arg", "assertNever", "_x", "items", "obj", "item", "validKeys", "k", "filtered", "e", "object", "keys", "key", "arr", "checker", "val", "joinValues", "array", "separator", "value", "objectUtil", "first", "second", "ZodParsedType", "getParsedType", "data", "ZodIssueCode", "util", "quotelessJson", "obj", "ZodError", "_ZodError", "issues", "sub", "subs", "actualProto", "_mapper", "mapper", "issue", "fieldErrors", "processError", "error", "curr", "i", "el", "value", "formErrors", "firstEl", "errorMap", "issue", "_ctx", "message", "ZodIssueCode", "ZodParsedType", "util", "en_default", "overrideErrorMap", "en_default", "setErrorMap", "map", "overrideErrorMap", "getErrorMap", "makeIssue", "params", "data", "path", "errorMaps", "issueData", "fullPath", "fullIssue", "errorMessage", "maps", "m", "map", "EMPTY_PATH", "addIssueToContext", "ctx", "overrideMap", "getErrorMap", "issue", "en_default", "x", "ParseStatus", "_ParseStatus", "status", "results", "arrayValue", "s", "INVALID", "pairs", "syncPairs", "pair", "key", "value", "finalObject", "DIRTY", "OK", "isAborted", "isDirty", "isValid", "isAsync", "errorUtil", "message", "ParseInputLazyPath", "parent", "value", "path", "key", "handleResult", "ctx", "result", "isValid", "error", "ZodError", "processCreateParams", "params", "errorMap", "invalid_type_error", "required_error", "description", "iss", "message", "ZodType", "input", "getParsedType", "ParseStatus", "isAsync", "data", "err", "maybeAsyncResult", "check", "getIssueProperties", "val", "setError", "ZodIssueCode", "refinementData", "refinement", "ZodEffects", "ZodFirstPartyTypeKind", "def", "ZodOptional", "ZodNullable", "ZodArray", "ZodPromise", "option", "ZodUnion", "incoming", "ZodIntersection", "transform", "defaultValueFunc", "ZodDefault", "ZodBranded", "catchValueFunc", "ZodCatch", "This", "target", "ZodPipeline", "ZodReadonly", "cuidRegex", "cuid2Regex", "ulidRegex", "uuidRegex", "nanoidRegex", "jwtRegex", "durationRegex", "emailRegex", "_emojiRegex", "emojiRegex", "ipv4Regex", "ipv4CidrRegex", "ipv6Regex", "ipv6CidrRegex", "base64Regex", "base64urlRegex", "dateRegexSource", "dateRegex", "timeRegexSource", "args", "secondsRegexSource", "secondsQuantifier", "timeRegex", "datetimeRegex", "regex", "opts", "isValidIP", "ip", "version", "isValidJWT", "jwt", "alg", "header", "base64", "decoded", "isValidCidr", "ZodString", "_ZodString", "ZodParsedType", "addIssueToContext", "INVALID", "status", "tooBig", "tooSmall", "util", "validation", "errorUtil", "options", "minLength", "maxLength", "len", "ch", "min", "max", "floatSafeRemainder", "step", "valDecCount", "stepDecCount", "decCount", "valInt", "stepInt", "ZodNumber", "_ZodNumber", "kind", "inclusive", "ZodBigInt", "_ZodBigInt", "ZodBoolean", "OK", "ZodDate", "_ZodDate", "minDate", "maxDate", "ZodSymbol", "ZodUndefined", "ZodNull", "ZodAny", "ZodUnknown", "ZodNever", "ZodVoid", "_ZodArray", "item", "i", "schema", "deepPartialify", "ZodObject", "newShape", "fieldSchema", "ZodTuple", "_ZodObject", "shape", "keys", "shapeKeys", "extraKeys", "pairs", "keyValidator", "unknownKeys", "catchall", "syncPairs", "pair", "issue", "defaultError", "augmentation", "merging", "index", "mask", "newField", "createZodEnum", "handleResults", "results", "unionErrors", "childCtx", "dirty", "issues", "types", "getDiscriminator", "type", "ZodLazy", "ZodLiteral", "ZodEnum", "ZodNativeEnum", "ZodDiscriminatedUnion", "_ZodDiscriminatedUnion", "discriminator", "discriminatorValue", "optionsMap", "discriminatorValues", "mergeValues", "a", "b", "aType", "bType", "bKeys", "sharedKeys", "newObj", "sharedValue", "newArray", "itemA", "itemB", "handleParsed", "parsedLeft", "parsedRight", "isAborted", "merged", "isDirty", "left", "right", "_ZodTuple", "items", "itemIndex", "x", "rest", "schemas", "ZodRecord", "_ZodRecord", "keyType", "valueType", "first", "second", "third", "ZodMap", "finalMap", "ZodSet", "_ZodSet", "finalizeSet", "elements", "parsedSet", "element", "minSize", "maxSize", "size", "ZodFunction", "_ZodFunction", "makeArgsIssue", "makeIssue", "getErrorMap", "en_default", "makeReturnsIssue", "returns", "fn", "me", "parsedArgs", "e", "parsedReturns", "returnType", "func", "getter", "values", "_ZodEnum", "expectedValues", "enumValues", "newDef", "opt", "nativeEnumValues", "promisified", "effect", "checkCtx", "arg", "processed", "DIRTY", "executeRefinement", "acc", "inner", "base", "preprocess", "ZodOptional", "ZodType", "input", "ZodParsedType", "OK", "type", "params", "ZodFirstPartyTypeKind", "processCreateParams", "ZodNullable", "ZodDefault", "ctx", "data", "ZodCatch", "newCtx", "result", "isAsync", "ZodError", "ZodNaN", "addIssueToContext", "ZodIssueCode", "INVALID", "BRAND", "ZodBranded", "ZodPipeline", "_ZodPipeline", "status", "inResult", "DIRTY", "a", "b", "ZodReadonly", "freeze", "isValid", "cleanParams", "p", "custom", "check", "_params", "fatal", "ZodAny", "r", "_fatal", "late", "ZodObject", "ZodFirstPartyTypeKind", "instanceOfType", "cls", "params", "custom", "data", "stringType", "ZodString", "numberType", "ZodNumber", "nanType", "ZodNaN", "bigIntType", "ZodBigInt", "booleanType", "ZodBoolean", "dateType", "ZodDate", "symbolType", "ZodSymbol", "undefinedType", "ZodUndefined", "nullType", "ZodNull", "anyType", "ZodAny", "unknownType", "ZodUnknown", "neverType", "ZodNever", "voidType", "ZodVoid", "arrayType", "ZodArray", "objectType", "ZodObject", "strictObjectType", "unionType", "ZodUnion", "discriminatedUnionType", "ZodDiscriminatedUnion", "intersectionType", "ZodIntersection", "tupleType", "ZodTuple", "recordType", "ZodRecord", "mapType", "ZodMap", "setType", "ZodSet", "functionType", "ZodFunction", "lazyType", "ZodLazy", "literalType", "ZodLiteral", "enumType", "ZodEnum", "nativeEnumType", "ZodNativeEnum", "promiseType", "ZodPromise", "effectsType", "ZodEffects", "optionalType", "ZodOptional", "nullableType", "ZodNullable", "preprocessType", "pipelineType", "ZodPipeline", "ostring", "onumber", "oboolean", "coerce", "arg", "NEVER", "INVALID", "metrics", "Metrics", "logger", "Logger", "DEFAULT_TENANT_ID", "ListLeadsQuerySchema", "external_exports", "handler", "event", "context", "correlationId", "v4_default", "addAnnotations", "startTime", "tenantId", "traceSubsegment", "tid", "queryParams", "params", "validated", "addMetadata", "error", "query", "countQuery", "values", "conditions", "queryValues", "paramIndex", "whereClause", "offset", "selectQuery", "countSql", "leads", "total", "client", "getClient", "countResult", "traceQuery", "totalCount", "leadsData", "totalPages", "response", "duration", "MetricUnit"]
}
