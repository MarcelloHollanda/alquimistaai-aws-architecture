"use strict";var y4=Object.create;var _a=Object.defineProperty;var E4=Object.getOwnPropertyDescriptor;var S4=Object.getOwnPropertyNames;var _4=Object.getPrototypeOf,v4=Object.prototype.hasOwnProperty;var Ub=t=>{throw TypeError(t)};var w4=(t,e,r)=>e in t?_a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e)=>()=>(t&&(e=t(t=0)),e);var S=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),xt=(t,e)=>{for(var r in e)_a(t,r,{get:e[r],enumerable:!0})},Bb=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of S4(e))!v4.call(t,s)&&s!==r&&_a(t,s,{get:()=>e[s],enumerable:!(n=E4(e,s))||n.enumerable});return t};var A=(t,e,r)=>(r=t!=null?y4(_4(t)):{},Bb(e||!t||!t.__esModule?_a(r,"default",{value:t,enumerable:!0}):r,t)),re=t=>Bb(_a({},"__esModule",{value:!0}),t);var f=(t,e,r)=>w4(t,typeof e!="symbol"?e+"":e,r),lg=(t,e,r)=>e.has(t)||Ub("Cannot "+r);var L=(t,e,r)=>(lg(t,e,"read from private field"),r?r.call(t):e.get(t)),Ce=(t,e,r)=>e.has(t)?Ub("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),st=(t,e,r,n)=>(lg(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),De=(t,e,r)=>(lg(t,e,"access private method"),r);var cn=S(Ae=>{"use strict";Ae.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(Ae.HttpAuthLocation||(Ae.HttpAuthLocation={}));Ae.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(Ae.HttpApiKeyAuthLocation||(Ae.HttpApiKeyAuthLocation={}));Ae.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(Ae.EndpointURLScheme||(Ae.EndpointURLScheme={}));Ae.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Ae.AlgorithmId||(Ae.AlgorithmId={}));var b4=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>Ae.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>Ae.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},R4=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},C4=t=>b4(t),A4=t=>R4(t);Ae.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(Ae.FieldPosition||(Ae.FieldPosition={}));var T4="__smithy_context";Ae.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(Ae.IniSectionType||(Ae.IniSectionType={}));Ae.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(Ae.RequestHandlerProtocol||(Ae.RequestHandlerProtocol={}));Ae.SMITHY_CONTEXT_KEY=T4;Ae.getDefaultClientConfiguration=C4;Ae.resolveDefaultRuntimeConfig=A4});var we=S(Gn=>{"use strict";var P4=cn(),x4=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),I4=t=>({httpHandler:t.httpHandler()}),dg=class{constructor({name:e,kind:r=P4.FieldPosition.HEADER,values:n=[]}){f(this,"name");f(this,"kind");f(this,"values");this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},fg=class{constructor({fields:e=[],encoding:r="utf-8"}){f(this,"entries",{});f(this,"encoding");e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},pg=class t{constructor(e){f(this,"method");f(this,"protocol");f(this,"hostname");f(this,"port");f(this,"path");f(this,"query");f(this,"headers");f(this,"username");f(this,"password");f(this,"fragment");f(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=O4(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function O4(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var hg=class{constructor(e){f(this,"statusCode");f(this,"reason");f(this,"headers");f(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function N4(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}Gn.Field=dg;Gn.Fields=fg;Gn.HttpRequest=pg;Gn.HttpResponse=hg;Gn.getHttpHandlerExtensionConfiguration=x4;Gn.isValidHostname=N4;Gn.resolveHttpHandlerRuntimeConfig=I4});var wa=S(va=>{"use strict";var D4=we();function L4(t){return t}var Hb=t=>e=>async r=>{if(!D4.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},jb={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},M4=t=>({applyToStack:e=>{e.add(Hb(t),jb)}});va.getHostHeaderPlugin=M4;va.hostHeaderMiddleware=Hb;va.hostHeaderMiddlewareOptions=jb;va.resolveHostHeaderConfig=L4});var ba=S(tl=>{"use strict";var Vb=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,d=u??e.outputFilterSensitiveLog,{$metadata:m,...g}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(g),metadata:m}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},Wb={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},k4=t=>({applyToStack:e=>{e.add(Vb(),Wb)}});tl.getLoggerPlugin=k4;tl.loggerMiddleware=Vb;tl.loggerMiddlewareOptions=Wb});var Gb={};xt(Gb,{InvokeStore:()=>$4});var zb,mg,q4,Ra,rl,$4,Kb=w(()=>{zb=require("async_hooks"),mg=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";mg||(globalThis.awslambda=globalThis.awslambda||{});q4={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},Ra=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(Ra,"storage",new zb.AsyncLocalStorage),f(Ra,"PROTECTED_KEYS",q4);!mg&&globalThis.awslambda?.InvokeStore?rl=globalThis.awslambda.InvokeStore:(rl=Ra,!mg&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=rl));$4=rl});var Xb=S(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.recursionDetectionMiddleware=void 0;var F4=(Kb(),re(Gb)),U4=we(),gg="X-Amzn-Trace-Id",B4="AWS_LAMBDA_FUNCTION_NAME",H4="_X_AMZN_TRACE_ID",j4=()=>t=>async e=>{let{request:r}=e;if(!U4.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===gg.toLowerCase())??gg;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[B4],i=process.env[H4],a=F4.InvokeStore.getXRayTraceId()??i,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[gg]=a),t({...e,request:r})};nl.recursionDetectionMiddleware=j4});var Ca=S(sl=>{"use strict";var yg=Xb(),V4={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},W4=t=>({applyToStack:e=>{e.add(yg.recursionDetectionMiddleware(),V4)}});sl.getRecursionDetectionPlugin=W4;Object.keys(yg).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(sl,t)&&Object.defineProperty(sl,t,{enumerable:!0,get:function(){return yg[t]}})})});var Eg,z4,Qb=w(()=>{Eg=A(cn()),z4=t=>t[Eg.SMITHY_CONTEXT_KEY]||(t[Eg.SMITHY_CONTEXT_KEY]={})});var It=S(Sg=>{"use strict";var Yb=cn(),G4=t=>t[Yb.SMITHY_CONTEXT_KEY]||(t[Yb.SMITHY_CONTEXT_KEY]={}),K4=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Sg.getSmithyContext=G4;Sg.normalizeProvider=K4});var Jb,Zb=w(()=>{Jb=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function X4(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var eR,Aa,il=w(()=>{eR=A(It());Zb();Aa=(t,e)=>(r,n)=>async s=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=Jb(i,o),c=X4(t.httpAuthSchemes),u=(0,eR.getSmithyContext)(n),l=[];for(let d of a){let m=c.get(d.schemeId);if(!m){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let g=m.identityProvider(await e.identityProviderConfigProvider(t));if(!g){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:E={},signingProperties:b={}}=d.propertiesExtractor?.(t,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},E),d.signingProperties=Object.assign(d.signingProperties||{},b),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await g(d.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var tR,Ta,rR=w(()=>{il();tR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Ta=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Aa(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),tR)}})});var Pa=S(Ii=>{"use strict";var Q4=we(),nR=(t,e)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(Q4.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:_g(/^x-[\w-]+-request-?id$/,u),extendedRequestId:_g(/^x-[\w-]+-id-2$/,u),cfId:_g(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},_g=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],sR=(t,e)=>(r,n)=>async s=>{let i=t,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:o});return r({...s,request:a})},iR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},oR={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Y4(t,e,r){return{applyToStack:n=>{n.add(nR(t,r),iR),n.add(sR(t,e),oR)}}}Ii.deserializerMiddleware=nR;Ii.deserializerMiddlewareOption=iR;Ii.getSerdePlugin=Y4;Ii.serializerMiddleware=sR;Ii.serializerMiddlewareOption=oR});var aR,cR,J4,uR=w(()=>{aR=A(Pa());il();cR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:aR.serializerMiddlewareOption.name},J4=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Aa(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),cR)}})});var lR=w(()=>{il();rR();uR()});var dR,fR,Z4,e3,vg,wg=w(()=>{dR=A(we()),fR=A(It()),Z4=t=>e=>{throw e},e3=(t,e)=>{},vg=t=>(e,r)=>async n=>{if(!dR.HttpRequest.isInstance(n.request))return e(n);let i=(0,fR.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Z4)(o));return(c.successHandler||e3)(u.response,o),u}});var pR,xa,hR=w(()=>{wg();pR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},xa=t=>({applyToStack:e=>{e.addRelativeTo(vg(t),pR)}})});var mR=w(()=>{wg();hR()});var Kn,gR=w(()=>{Kn=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function yR(t,e,r,n,s){return async function*(o,a,...c){let u=a,l=o.startingToken??u[r],d=!0,m;for(;d;){if(u[r]=l,s&&(u[s]=u[s]??o.pageSize),o.client instanceof t)m=await t3(e,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let g=l;l=r3(m,n),d=!!(l&&(!o.stopOnSameToken||l!==g))}return void 0}}var t3,r3,ER=w(()=>{t3=async(t,e,r,n=i=>i,...s)=>{let i=new t(r);return i=n(i)??i,await e.send(i,...s)};r3=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var bg=S(SR=>{"use strict";var n3=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";SR.isArrayBuffer=n3});var Oi=S(Cg=>{"use strict";var s3=bg(),Rg=require("buffer"),i3=(t,e=0,r=t.byteLength-e)=>{if(!s3.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Rg.Buffer.from(t,e,r)},o3=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Rg.Buffer.from(t,e):Rg.Buffer.from(t)};Cg.fromArrayBuffer=i3;Cg.fromString=o3});var _R=S(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.fromBase64=void 0;var a3=Oi(),c3=/^[A-Za-z0-9+/]*={0,2}$/,u3=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!c3.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,a3.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};ol.fromBase64=u3});var dt=S(al=>{"use strict";var vR=Oi(),wR=t=>{let e=vR.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},l3=t=>typeof t=="string"?wR(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),d3=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return vR.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};al.fromUtf8=wR;al.toUint8Array=l3;al.toUtf8=d3});var bR=S(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.toBase64=void 0;var f3=Oi(),p3=dt(),h3=t=>{let e;if(typeof t=="string"?e=(0,p3.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,f3.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};cl.toBase64=h3});var ft=S(Ia=>{"use strict";var RR=_R(),CR=bR();Object.keys(RR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ia,t)&&Object.defineProperty(Ia,t,{enumerable:!0,get:function(){return RR[t]}})});Object.keys(CR).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ia,t)&&Object.defineProperty(Ia,t,{enumerable:!0,get:function(){return CR[t]}})})});var Tg=S(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.ChecksumStream=void 0;var m3=ft(),g3=require("stream"),Ag=class extends g3.Duplex{constructor({expectedChecksum:r,checksum:n,source:s,checksumSourceLocation:i,base64Encoder:o}){super();f(this,"expectedChecksum");f(this,"checksumSourceLocation");f(this,"checksum");f(this,"source");f(this,"base64Encoder");if(typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??m3.toBase64,this.expectedChecksum=r,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(r){}_write(r,n,s){try{this.checksum.update(r),this.push(r)}catch(i){return s(i)}return s()}async _final(r){try{let n=await this.checksum.digest(),s=this.base64Encoder(n);if(this.expectedChecksum!==s)return r(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(n){return r(n)}return this.push(null),r()}};ul.ChecksumStream=Ag});var Xn=S(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.isBlob=Ni.isReadableStream=void 0;var y3=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Ni.isReadableStream=y3;var E3=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Ni.isBlob=E3});var AR=S(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.ChecksumStream=void 0;var S3=typeof ReadableStream=="function"?ReadableStream:function(){},Pg=class extends S3{};ll.ChecksumStream=Pg});var TR=S(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.createChecksumStream=void 0;var _3=ft(),v3=Xn(),w3=AR(),b3=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,v3.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??_3.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),l=i(u);if(t!==l){let d=new Error(`Checksum mismatch: expected "${t}" but received "${l}" in response header "${n}".`);c.error(d)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,w3.ChecksumStream.prototype),a};dl.createChecksumStream=b3});var PR=S(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.createChecksumStream=T3;var R3=Xn(),C3=Tg(),A3=TR();function T3(t){return typeof ReadableStream=="function"&&(0,R3.isReadableStream)(t.source)?(0,A3.createChecksumStream)(t):new C3.ChecksumStream(t)}});var Og=S(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.ByteArrayCollector=void 0;var Ig=class{constructor(e){f(this,"allocByteArray");f(this,"byteLength",0);f(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};fl.ByteArrayCollector=Ig});var NR=S(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.createBufferedReadable=void 0;un.createBufferedReadableStream=xR;un.merge=IR;un.flush=pl;un.sizeOf=Di;un.modeOf=OR;var P3=Og();function xR(t,e,r){let n=t.getReader(),s=!1,i=0,o=["",new P3.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:d}=await n.read(),m=l;if(d){if(a!==-1){let g=pl(o,a);Di(g)>0&&u.enqueue(g)}u.close()}else{let g=OR(m,!1);if(a!==g&&(a>=0&&u.enqueue(pl(o,a)),a=g),a===-1){u.enqueue(m);return}let E=Di(m);i+=E;let b=Di(o[a]);if(E>=e&&b===0)u.enqueue(m);else{let P=IR(o,a,m);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${E} is below threshold of ${e}, automatically buffering.`)),P>=e?u.enqueue(pl(o,a)):await c(u)}}};return new ReadableStream({pull:c})}un.createBufferedReadable=xR;function IR(t,e,r){switch(e){case 0:return t[0]+=r,Di(t[0]);case 1:case 2:return t[e].push(r),Di(t[e])}}function pl(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Di(t){return t?.byteLength??t?.length??0}function OR(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var LR=S(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.createBufferedReadable=O3;var x3=require("stream"),DR=Og(),ln=NR(),I3=Xn();function O3(t,e,r){if((0,I3.isReadableStream)(t))return(0,ln.createBufferedReadableStream)(t,e,r);let n=new x3.Readable({read(){}}),s=!1,i=0,o=["",new DR.ByteArrayCollector(c=>new Uint8Array(c)),new DR.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,ln.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,ln.flush)(o,a)),a=u),a===-1){n.push(c);return}let l=(0,ln.sizeOf)(c);i+=l;let d=(0,ln.sizeOf)(o[a]);if(l>=e&&d===0)n.push(c);else{let m=(0,ln.merge)(o,a,c);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${e}, automatically buffering.`)),m>=e&&n.push((0,ln.flush)(o,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,ln.flush)(o,a);(0,ln.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var MR=S(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.getAwsChunkedEncodingStream=void 0;var N3=require("stream"),D3=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,t):void 0,u=new N3.Readable({read:()=>{}});return t.on("data",l=>{let d=n(l)||0;u.push(`${d.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${i}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};hl.getAwsChunkedEncodingStream=D3});var kR=S(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.headStream=L3;async function L3(t,e){let r=0,n=[],s=t.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var qR=S(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.headStream=void 0;var M3=require("stream"),k3=kR(),q3=Xn(),$3=(t,e)=>(0,q3.isReadableStream)(t)?(0,k3.headStream)(t,e):new Promise((r,n)=>{let s=new Lg;s.limit=e,t.pipe(s),t.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});ml.headStream=$3;var Lg=class extends M3.Writable{constructor(){super(...arguments);f(this,"buffers",[]);f(this,"limit",1/0);f(this,"bytesBuffered",0)}_write(r,n,s){if(this.buffers.push(r),this.bytesBuffered+=r.byteLength??0,this.bytesBuffered>=this.limit){let i=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-i),this.emit("finish")}s()}}});var kg=S(Mg=>{"use strict";var $R=t=>encodeURIComponent(t).replace(/[!'()*]/g,F3),F3=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,U3=t=>t.split("/").map($R).join("/");Mg.escapeUri=$R;Mg.escapeUriPath=U3});var $g=S(FR=>{"use strict";var qg=kg();function B3(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=qg.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${qg.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${qg.escapeUri(n)}`),e.push(s)}}return e.join("&")}FR.buildQueryString=B3});var Bs=S(Oa=>{"use strict";var jR=we(),VR=$g(),gl=require("http"),yl=require("https"),WR=require("stream"),Fg=require("http2"),H3=["ECONNRESET","EPIPE","ETIMEDOUT"],zR=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},Ot={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},UR=1e3,j3=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let i=Ot.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{Ot.clearTimeout(i)}):Ot.clearTimeout(i)};t.socket?o(t.socket):t.on("socket",o)};return r<2e3?(n(0),0):Ot.setTimeout(n.bind(null,UR),UR)},V3=(t,e,r=0,n,s)=>r?Ot.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(o),e(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,W3=3e3,z3=(t,{keepAlive:e,keepAliveMsecs:r},n=W3)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})};return n===0?(s(),0):Ot.setTimeout(s,n)},BR=3e3,G3=(t,e,r=0)=>{let n=s=>{let i=r-s,o=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(i,o),t.on("close",()=>t.socket?.removeListener("timeout",o))):t.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):Ot.setTimeout(n.bind(null,r===0?0:BR),BR)},HR=6e3;async function GR(t,e,r=HR,n=!1){let s=e.headers??{},i=s.Expect||s.expect,o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(Ot.setTimeout(()=>c(!0),Math.max(HR,r)))}),new Promise(c=>{t.on("continue",()=>{Ot.clearTimeout(o),c(!0)}),t.on("response",()=>{Ot.clearTimeout(o),c(!1)}),t.on("error",()=>{Ot.clearTimeout(o),c(!1)})})])),a&&K3(t,e.body)}function K3(t,e){if(e instanceof WR.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var X3=0,Ug=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"socketWarningTimestamp",0);f(this,"externalAgent",!1);f(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:i,maxSockets:o}=e;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let u=s[c]?.length??0,l=i[c]?.length??0;if(u>=o&&l>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof gl.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new gl.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof yl.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new yl.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],u=async ie=>{await a,c.forEach(Ot.clearTimeout),s(ie)},l=async ie=>{await a,c.forEach(Ot.clearTimeout),i(ie)};if(r?.aborted){let ie=new Error("Request aborted");ie.name="AbortError",l(ie);return}let d=e.protocol==="https:",m=e.headers??{},g=(m.Expect??m.expect)==="100-continue",E=d?o.httpsAgent:o.httpAgent;g&&!this.externalAgent&&(E=new(d?yl.Agent:gl.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(Ot.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(E,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let b=VR.buildQueryString(e.query||{}),P;if(e.username!=null||e.password!=null){let ie=e.username??"",Z=e.password??"";P=`${ie}:${Z}`}let T=e.path;b&&(T+=`?${b}`),e.fragment&&(T+=`#${e.fragment}`);let O=e.hostname??"";O[0]==="["&&O.endsWith("]")?O=e.hostname.slice(1,-1):O=e.hostname;let M={headers:e.headers,host:O,method:e.method,path:T,port:e.port,agent:E,auth:P},B=(d?yl.request:gl.request)(M,ie=>{let Z=new jR.HttpResponse({statusCode:ie.statusCode||-1,reason:ie.statusMessage,headers:zR(ie.headers),body:ie});u({response:Z})});if(B.on("error",ie=>{H3.includes(ie.code)?l(Object.assign(ie,{name:"TimeoutError"})):l(ie)}),r){let ie=()=>{B.destroy();let Z=new Error("Request aborted");Z.name="AbortError",l(Z)};if(typeof r.addEventListener=="function"){let Z=r;Z.addEventListener("abort",ie,{once:!0}),B.once("close",()=>Z.removeEventListener("abort",ie))}else r.onabort=ie}let ce=n??o.requestTimeout;c.push(j3(B,l,o.connectionTimeout)),c.push(V3(B,l,ce,o.throwOnRequestTimeout,o.logger??console)),c.push(G3(B,l,o.socketTimeout));let Je=M.agent;typeof Je=="object"&&"keepAlive"in Je&&c.push(z3(B,{keepAlive:Je.keepAlive,keepAliveMsecs:Je.keepAliveMsecs})),a=GR(B,e,ce,this.externalAgent).catch(ie=>(c.forEach(Ot.clearTimeout),i(ie)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Bg=class{constructor(e){f(this,"sessions",[]);this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},Hg=class{constructor(e){f(this,"config");f(this,"sessionCache",new Map);if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=Fg.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new Bg;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},jg=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"metadata",{handlerProtocol:"h2"});f(this,"connectionManager",new Hg({}));this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let u=!1,l,d=async ve=>{await l,a(ve)},m=async ve=>{await l,c(ve)};if(r?.aborted){u=!0;let ve=new Error("Request aborted");ve.name="AbortError",m(ve);return}let{hostname:g,method:E,port:b,protocol:P,query:T}=e,O="";if(e.username!=null||e.password!=null){let ve=e.username??"",Ge=e.password??"";O=`${ve}:${Ge}@`}let M=`${P}//${O}${g}${b?`:${b}`:""}`,q={destination:new URL(M)},B=this.connectionManager.lease(q,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),ce=ve=>{i&&this.destroySession(B),u=!0,m(ve)},Je=VR.buildQueryString(T||{}),ie=e.path;Je&&(ie+=`?${Je}`),e.fragment&&(ie+=`#${e.fragment}`);let Z=B.request({...e.headers,[Fg.constants.HTTP2_HEADER_PATH]:ie,[Fg.constants.HTTP2_HEADER_METHOD]:E});if(B.ref(),Z.on("response",ve=>{let Ge=new jR.HttpResponse({statusCode:ve[":status"]||-1,headers:zR(ve),body:Z});u=!0,d({response:Ge}),i&&(B.close(),this.connectionManager.deleteSession(M,B))}),o&&Z.setTimeout(o,()=>{Z.close();let ve=new Error(`Stream timed out because of no activity for ${o} ms`);ve.name="TimeoutError",ce(ve)}),r){let ve=()=>{Z.close();let Ge=new Error("Request aborted");Ge.name="AbortError",ce(Ge)};if(typeof r.addEventListener=="function"){let Ge=r;Ge.addEventListener("abort",ve,{once:!0}),Z.once("close",()=>Ge.removeEventListener("abort",ve))}else r.onabort=ve}Z.on("frameError",(ve,Ge,xi)=>{ce(new Error(`Frame type id ${ve} in stream id ${xi} has failed with code ${Ge}.`))}),Z.on("error",ce),Z.on("aborted",()=>{ce(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Z.rstCode}.`))}),Z.on("close",()=>{B.unref(),i&&B.destroy(),u||ce(new Error("Unexpected error: http2 request did not get a response"))}),l=GR(Z,e,o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Vg=class extends WR.Writable{constructor(){super(...arguments);f(this,"bufferedBytes",[])}_write(r,n,s){this.bufferedBytes.push(r),s()}},Q3=t=>Y3(t)?J3(t):new Promise((e,r)=>{let n=new Vg;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),Y3=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function J3(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}Oa.DEFAULT_REQUEST_TIMEOUT=X3;Oa.NodeHttp2Handler=jg;Oa.NodeHttpHandler=Ug;Oa.streamCollector=Q3});var QR=S(Sl=>{"use strict";var KR=we(),Z3=$g(),eV=ft();function XR(t,e){return new Request(t,e)}function tV(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var El={supported:void 0},Wg=class t{constructor(e){f(this,"config");f(this,"configProvider");typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),El.supported===void 0&&(El.supported=typeof Request<"u"&&"keepalive"in XR("https://[::1]"))}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=e.path,c=Z3.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let O=e.username??"",M=e.password??"";u=`${O}:${M}@`}let{port:l,method:d}=e,m=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,g=d==="GET"||d==="HEAD"?void 0:e.body,E={body:g,headers:new Headers(e.headers),method:d,credentials:o};this.config?.cache&&(E.cache=this.config.cache),g&&(E.duplex="half"),typeof AbortController<"u"&&(E.signal=r),El.supported&&(E.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(E,this.config.requestInit(e));let b=()=>{},P=XR(m,E),T=[fetch(P).then(O=>{let M=O.headers,q={};for(let ce of M.entries())q[ce[0]]=ce[1];return O.body!=null?{response:new KR.HttpResponse({headers:q,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(ce=>({response:new KR.HttpResponse({headers:q,reason:O.statusText,statusCode:O.status,body:ce})}))}),tV(s)];return r&&T.push(new Promise((O,M)=>{let q=()=>{let B=new Error("Request aborted");B.name="AbortError",M(B)};if(typeof r.addEventListener=="function"){let B=r;B.addEventListener("abort",q,{once:!0}),b=()=>B.removeEventListener("abort",q)}else r.onabort=q})),Promise.race(T).finally(b)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},rV=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):nV(t):sV(t);async function nV(t){let e=await iV(t),r=eV.fromBase64(e);return new Uint8Array(r)}async function sV(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}function iV(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}Sl.FetchHttpHandler=Wg;Sl.keepAliveSupport=El;Sl.streamCollector=rV});var Kg=S(Gg=>{"use strict";var YR={},zg={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),YR[t]=e,zg[e]=t}function oV(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in zg)e[r/2]=zg[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function aV(t){let e="";for(let r=0;r<t.byteLength;r++)e+=YR[t[r]];return e}Gg.fromHex=oV;Gg.toHex=aV});var tC=S(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.sdkStreamMixin=void 0;var cV=QR(),uV=ft(),lV=Kg(),dV=dt(),JR=Xn(),ZR="The stream has already been transformed.",fV=t=>{if(!eC(t)&&!(0,JR.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(ZR);return e=!0,await(0,cV.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,uV.toBase64)(i);if(s==="hex")return(0,lV.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,dV.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(ZR);if(e=!0,eC(t))return n(t);if((0,JR.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};_l.sdkStreamMixin=fV;var eC=t=>typeof Blob=="function"&&t instanceof Blob});var nC=S(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.sdkStreamMixin=void 0;var pV=Bs(),hV=Oi(),Xg=require("stream"),mV=tC(),rC="The stream has already been transformed.",gV=t=>{if(!(t instanceof Xg.Readable))try{return(0,mV.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(rC);return e=!0,await(0,pV.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,hV.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(rC);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Xg.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,Xg.Readable.toWeb(t)}})};vl.sdkStreamMixin=gV});var sC=S(Qg=>{"use strict";Object.defineProperty(Qg,"__esModule",{value:!0});Qg.splitStream=yV;async function yV(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var aC=S(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.splitStream=SV;var iC=require("stream"),EV=sC(),oC=Xn();async function SV(t){if((0,oC.isReadableStream)(t)||(0,oC.isBlob)(t))return(0,EV.splitStream)(t);let e=new iC.PassThrough,r=new iC.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var Na=S(it=>{"use strict";var cC=ft(),uC=dt(),lC=Tg(),dC=PR(),fC=LR(),pC=MR(),hC=qR(),mC=nC(),gC=aC(),yC=Xn(),Jg=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(cC.fromBase64(e)):t.mutate(uC.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?cC.toBase64(this):uC.toUtf8(this)}};it.Uint8ArrayBlobAdapter=Jg;Object.keys(lC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return lC[t]}})});Object.keys(dC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return dC[t]}})});Object.keys(fC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return fC[t]}})});Object.keys(pC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return pC[t]}})});Object.keys(hC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return hC[t]}})});Object.keys(mC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return mC[t]}})});Object.keys(gC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return gC[t]}})});Object.keys(yC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(it,t)&&Object.defineProperty(it,t,{enumerable:!0,get:function(){return yC[t]}})})});var wl,Ar,bl=w(()=>{wl=A(Na()),Ar=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return wl.Uint8ArrayBlobAdapter.mutate(t);if(!t)return wl.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return wl.Uint8ArrayBlobAdapter.mutate(await r)}});function Vr(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Rl=w(()=>{});var Tr,Zg=w(()=>{Tr=t=>typeof t=="function"?t():t});var Da,Cl=w(()=>{Da=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var EC,SC,_C,ey,vC=w(()=>{EC=A(we()),SC=A(It());Cl();_C=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:i}=(0,SC.getSmithyContext)(r),[,o,a,c,u,l]=i??[];try{let d=await t.protocol.deserializeResponse(Da(o,a,c,u,l),{...t,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s}),!("$metadata"in d)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(EC.HttpResponse.isInstance(s)){let{headers:g={}}=s,E=Object.entries(g);d.$metadata={httpStatusCode:s.statusCode,requestId:ey(/^x-[\w-]+-request-?id$/,E),extendedRequestId:ey(/^x-[\w-]+-id-2$/,E),cfId:ey(/^x-[\w-]+-cf-id$/,E)}}}catch{}}throw d}},ey=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var wC,bC,RC=w(()=>{wC=A(It());Cl();bC=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,wC.getSmithyContext)(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(Da(i,o,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:d})}});function ty(t){return{applyToStack:e=>{e.add(bC(t),AC),e.add(_C(t),CC),t.protocol.setSerdeContext(t)}}}var CC,AC,TC=w(()=>{vC();RC();CC={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},AC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ke,Qn=w(()=>{Ke=class{constructor(){f(this,"name");f(this,"namespace");f(this,"traits")}static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Tl,Al,_V,PC=w(()=>{Qn();Tl=class Tl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"valueSchema");f(this,"symbol",Tl.symbol)}};f(Tl,"symbol",Symbol.for("@smithy/lis"));Al=Tl,_V=(t,e,r,n)=>Ke.assign(new Al,{name:e,namespace:t,traits:r,valueSchema:n})});var xl,Pl,vV,xC=w(()=>{Qn();xl=class xl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"keySchema");f(this,"valueSchema");f(this,"symbol",xl.symbol)}};f(xl,"symbol",Symbol.for("@smithy/map"));Pl=xl,vV=(t,e,r,n,s)=>Ke.assign(new Pl,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Ol,Il,wV,IC=w(()=>{Qn();Ol=class Ol extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"input");f(this,"output");f(this,"symbol",Ol.symbol)}};f(Ol,"symbol",Symbol.for("@smithy/ope"));Il=Ol,wV=(t,e,r,n,s)=>Ke.assign(new Il,{name:e,namespace:t,traits:r,input:n,output:s})});var Nl,Li,bV,ry=w(()=>{Qn();Nl=class Nl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"memberNames");f(this,"memberList");f(this,"symbol",Nl.symbol)}};f(Nl,"symbol",Symbol.for("@smithy/str"));Li=Nl,bV=(t,e,r,n,s)=>Ke.assign(new Li,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var Ll,Dl,RV,OC=w(()=>{Qn();ry();Ll=class Ll extends Li{constructor(){super(...arguments);f(this,"ctor");f(this,"symbol",Ll.symbol)}};f(Ll,"symbol",Symbol.for("@smithy/err"));Dl=Ll,RV=(t,e,r,n,s,i)=>Ke.assign(new Dl,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function Wr(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var ny=w(()=>{});function La(t,e){if(t instanceof V)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=V;return new r(t,e)}var Yn,V,sy,NC,DC=w(()=>{Zg();ny();Yn=class Yn{constructor(e,r){f(this,"ref");f(this,"memberName");f(this,"symbol",Yn.symbol);f(this,"name");f(this,"schema");f(this,"_isMemberSchema");f(this,"traits");f(this,"memberTraits");f(this,"normalizedTraits");this.ref=e,this.memberName=r;let n=[],s=e,i=e;for(this._isMemberSchema=!1;sy(s);)n.push(s[1]),s=s[0],i=Tr(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,Wr(a))}}else this.memberTraits=0;if(i instanceof Yn){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Tr(i),NC(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Tr(e);if(r instanceof Yn)return r;if(sy(r)){let[n,s]=r;if(n instanceof Yn)return Object.assign(n.getMergedTraits(),Wr(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new Yn(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Wr(this.memberTraits)}getOwnTraits(){return Wr(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return La([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return La([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return La(sy(s)?s:[s,0],e)}if(this.isDocumentSchema())return La([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],La([e[5][r],0],e[4][r])]}};f(Yn,"symbol",Symbol.for("@smithy/nor"));V=Yn;sy=t=>Array.isArray(t)&&t.length===2,NC=t=>Array.isArray(t)&&t.length>=5});var Ml,Ma,CV,AV,LC=w(()=>{Qn();Ml=class Ml extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"schemaRef");f(this,"traits");f(this,"symbol",Ml.symbol)}};f(Ml,"symbol",Symbol.for("@smithy/sim"));Ma=Ml,CV=(t,e,r,n)=>Ke.assign(new Ma,{name:e,namespace:t,traits:n,schemaRef:r}),AV=(t,e,r,n)=>Ke.assign(new Ma,{name:e,namespace:t,traits:r,schemaRef:n})});var TV,MC=w(()=>{TV={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var zr,le,kC=w(()=>{zr=class zr{constructor(e,r=new Map,n=new Map){f(this,"namespace");f(this,"schemas");f(this,"exceptions");this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return zr.registries.has(e)||zr.registries.set(e,new zr(e)),zr.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);zr.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=zr.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return zr.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};f(zr,"registries",new Map);le=zr});var kl={};xt(kl,{ErrorSchema:()=>Dl,ListSchema:()=>Al,MapSchema:()=>Pl,NormalizedSchema:()=>V,OperationSchema:()=>Il,SCHEMA:()=>TV,Schema:()=>Ke,SimpleSchema:()=>Ma,StructureSchema:()=>Li,TypeRegistry:()=>le,deref:()=>Tr,deserializerMiddlewareOption:()=>CC,error:()=>RV,getSchemaSerdePlugin:()=>ty,isStaticSchema:()=>NC,list:()=>_V,map:()=>vV,op:()=>wV,operation:()=>Da,serializerMiddlewareOption:()=>AC,sim:()=>CV,simAdapter:()=>AV,struct:()=>bV,translateTraits:()=>Wr});var xe=w(()=>{Zg();TC();PC();xC();IC();Cl();OC();DC();Qn();LC();ry();MC();ny();kC()});var PV,qC=w(()=>{PV=(t,e,r=n=>n)=>t});var xV,IV,ka,OV,ql,qa,NV,iy,oy,ay,cy,DV,LV,$C,MV,kV,Fl,qV,uy,$V,Mi,ly,FV,UV,BV,FC,UC,HV,jV,Hs,dy,$l,$a,fy=w(()=>{xV=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},IV=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&$a.warn($l(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&$a.warn($l(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},ka=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&$a.warn($l(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},OV=Math.ceil(34028234663852886e22),ql=t=>{let e=ka(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>OV)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},qa=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},NV=qa,iy=t=>cy(t,32),oy=t=>cy(t,16),ay=t=>cy(t,8),cy=(t,e)=>{let r=qa(t);if(r!==void 0&&DV(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},DV=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},LV=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},$C=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},MV=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return $a.warn($l(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},kV=t=>{if(t==null)return;let e=$C(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Fl=t=>ka(typeof t=="string"?Mi(t):t),qV=Fl,uy=t=>ql(typeof t=="string"?Mi(t):t),$V=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Mi=t=>{let e=t.match($V);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},ly=t=>typeof t=="string"?FC(t):ka(t),FV=ly,UV=ly,BV=t=>typeof t=="string"?FC(t):ql(t),FC=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},UC=t=>qa(typeof t=="string"?Mi(t):t),HV=UC,jV=t=>iy(typeof t=="string"?Mi(t):t),Hs=t=>oy(typeof t=="string"?Mi(t):t),dy=t=>ay(typeof t=="string"?Mi(t):t),$l=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),$a={warn:console.warn}});function Ua(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${VV[n]}, ${c} ${hy[r]} ${e} ${u}:${l}:${d} GMT`}var VV,hy,WV,zV,GV,my,KV,XV,QV,gy,yy,Fa,YV,JV,ZV,py,eW,tW,rW,Gr,nW,sW,ki,BC=w(()=>{fy();VV=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hy=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];WV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),zV=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=WV.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u]=e,l=Hs(ki(n)),d=Gr(s,"month",1,12),m=Gr(i,"day",1,31);return Fa(l,d,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},GV=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),my=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=GV.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u,l]=e,d=Hs(ki(n)),m=Gr(s,"month",1,12),g=Gr(i,"day",1,31),E=Fa(d,m,g,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&E.setTime(E.getTime()-sW(l)),E},KV=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),XV=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),QV=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),gy=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=KV.exec(t);if(e){let[r,n,s,i,o,a,c,u]=e;return Fa(Hs(ki(i)),py(s),Gr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=XV.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return ZV(Fa(YV(i),py(s),Gr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=QV.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return Fa(Hs(ki(u)),py(n),Gr(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},yy=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Fl(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Fa=(t,e,r,n)=>{let s=e-1;return tW(t,s,r),new Date(Date.UTC(t,s,r,Gr(n.hours,"hour",0,23),Gr(n.minutes,"minute",0,59),Gr(n.seconds,"seconds",0,60),nW(n.fractionalMilliseconds)))},YV=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Hs(ki(t));return r<e?r+100:r},JV=50*365*24*60*60*1e3,ZV=t=>t.getTime()-new Date().getTime()>JV?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,py=t=>{let e=hy.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},eW=[31,28,31,30,31,30,31,31,30,31,30,31],tW=(t,e,r)=>{let n=eW[e];if(e===1&&rW(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${hy[e]} in ${t}: ${r}`)},rW=t=>t%4===0&&(t%100!==0||t%400===0),Gr=(t,e,r,n)=>{let s=dy(ki(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},nW=t=>t==null?0:uy("0."+t)*1e3,sW=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},ki=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var Ba={};xt(Ba,{__addDisposableResource:()=>fA,__assign:()=>Ul,__asyncDelegator:()=>sA,__asyncGenerator:()=>nA,__asyncValues:()=>iA,__await:()=>qi,__awaiter:()=>YC,__classPrivateFieldGet:()=>uA,__classPrivateFieldIn:()=>dA,__classPrivateFieldSet:()=>lA,__createBinding:()=>Hl,__decorate:()=>VC,__disposeResources:()=>pA,__esDecorate:()=>zC,__exportStar:()=>ZC,__extends:()=>HC,__generator:()=>JC,__importDefault:()=>cA,__importStar:()=>aA,__makeTemplateObject:()=>oA,__metadata:()=>QC,__param:()=>WC,__propKey:()=>KC,__read:()=>_y,__rest:()=>jC,__rewriteRelativeImportExtension:()=>hA,__runInitializers:()=>GC,__setFunctionName:()=>XC,__spread:()=>eA,__spreadArray:()=>rA,__spreadArrays:()=>tA,__values:()=>Bl,default:()=>aW});function HC(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Ey(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function jC(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function VC(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function WC(t,e){return function(r,n){e(r,n,t)}}function zC(t,e,r,n,s,i){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,m=!1,g=r.length-1;g>=0;g--){var E={};for(var b in n)E[b]=b==="access"?{}:n[b];for(var b in n.access)E.access[b]=n.access[b];E.addInitializer=function(T){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(T||null))};var P=(0,r[g])(a==="accessor"?{get:l.get,set:l.set}:l[c],E);if(a==="accessor"){if(P===void 0)continue;if(P===null||typeof P!="object")throw new TypeError("Object expected");(d=o(P.get))&&(l.get=d),(d=o(P.set))&&(l.set=d),(d=o(P.init))&&s.unshift(d)}else(d=o(P))&&(a==="field"?s.unshift(d):l[c]=d)}u&&Object.defineProperty(u,n.name,l),m=!0}function GC(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function KC(t){return typeof t=="symbol"?t:"".concat(t)}function XC(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function QC(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function YC(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function JC(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ZC(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Hl(e,t,r)}function Bl(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _y(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function eA(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(_y(arguments[e]));return t}function tA(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function rA(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function qi(t){return this instanceof qi?(this.v=t,this):new qi(t)}function nA(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(E){return Promise.resolve(E).then(g,d)}}function a(g,E){n[g]&&(s[g]=function(b){return new Promise(function(P,T){i.push([g,b,P,T])>1||c(g,b)})},E&&(s[g]=E(s[g])))}function c(g,E){try{u(n[g](E))}catch(b){m(i[0][3],b)}}function u(g){g.value instanceof qi?Promise.resolve(g.value.v).then(l,d):m(i[0][2],g)}function l(g){c("next",g)}function d(g){c("throw",g)}function m(g,E){g(E),i.shift(),i.length&&c(i[0][0],i[0][1])}}function sA(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:qi(t[s](o)),done:!1}:i?i(o):o}:i}}function iA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Bl=="function"?Bl(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function oA(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function aA(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Sy(t),n=0;n<r.length;n++)r[n]!=="default"&&Hl(e,t,r[n]);return iW(e,t),e}function cA(t){return t&&t.__esModule?t:{default:t}}function uA(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function lA(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function dA(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function fA(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function pA(t){function e(i){t.error=t.hasError?new oW(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function hA(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}var Ey,Ul,Hl,iW,Sy,oW,aW,Ha=w(()=>{Ey=function(t,e){return Ey=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Ey(t,e)};Ul=function(){return Ul=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ul.apply(this,arguments)};Hl=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};iW=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Sy=function(t){return Sy=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Sy(t)};oW=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};aW={__extends:HC,__assign:Ul,__rest:jC,__decorate:VC,__param:WC,__esDecorate:zC,__runInitializers:GC,__propKey:KC,__setFunctionName:XC,__metadata:QC,__awaiter:YC,__generator:JC,__createBinding:Hl,__exportStar:ZC,__values:Bl,__read:_y,__spread:eA,__spreadArrays:tA,__spreadArray:rA,__await:qi,__asyncGenerator:nA,__asyncDelegator:sA,__asyncValues:iA,__makeTemplateObject:oA,__importStar:aA,__importDefault:cA,__classPrivateFieldGet:uA,__classPrivateFieldSet:lA,__classPrivateFieldIn:dA,__addDisposableResource:fA,__disposeResources:pA,__rewriteRelativeImportExtension:hA}});var gA=S(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.randomUUID=void 0;var cW=(Ha(),re(Ba)),mA=cW.__importDefault(require("crypto"));jl.randomUUID=mA.default.randomUUID.bind(mA.default)});var vy=S(EA=>{"use strict";var yA=gA(),yt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),uW=()=>{if(yA.randomUUID)return yA.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,yt[t[0]]+yt[t[1]]+yt[t[2]]+yt[t[3]]+"-"+yt[t[4]]+yt[t[5]]+"-"+yt[t[6]]+yt[t[7]]+"-"+yt[t[8]]+yt[t[9]]+"-"+yt[t[10]]+yt[t[11]]+yt[t[12]]+yt[t[13]]+yt[t[14]]+yt[t[15]]};EA.v4=uW});var Kr,SA=w(()=>{Kr=A(vy())});var Nt,_A=w(()=>{Nt=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Nt.from=t=>t&&typeof t=="object"&&(t instanceof Nt||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Nt(String(t)):Nt(JSON.stringify(t));Nt.fromObject=Nt.from});function wy(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var vA=w(()=>{});function dn(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var by,Ry,Cy,wA,bA,lW,dW,fW,pW,hW,ja,Ay,Ty,RA=w(()=>{by="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",Ry="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Cy="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",wA="(\\d?\\d)",bA="(\\d{4})",lW=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),dW=new RegExp(`^${by}, ${wA} ${Ry} ${bA} ${Cy} GMT$`),fW=new RegExp(`^${by}, ${wA}-${Ry}-(\\d\\d) ${Cy} GMT$`),pW=new RegExp(`^${by} ${Ry} ( [1-9]|\\d\\d) ${Cy} ${bA}$`),hW=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ja=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},Ay=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=lW.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,i,o,a,,c,u]=e;dn(n,1,12),dn(s,1,31),dn(i,0,23),dn(o,0,59),dn(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,d,m,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],E=d==="-"?1:-1;l.setTime(l.getTime()+E*(Number(m)*60*60*1e3+Number(g)*60*1e3))}return l},Ty=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=dW.exec(t))?[,e,r,n,s,i,o,a]=c:(c=fW.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=pW.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){let u=Date.UTC(Number(n),hW.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);dn(e,1,31),dn(s,0,23),dn(i,0,59),dn(o,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function Py(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=e+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var CA=w(()=>{});var Va,AA=w(()=>{Va=t=>{let e=t.length,r=[],n=!1,s,i=0;for(let o=0;o<e;++o){let a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break;default:}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function xy(t){return new Ue(String(t),"bigDecimal")}var TA,Ue,PA=w(()=>{TA=/^-?\d*(\.\d+)?$/,Ue=class t{constructor(e,r){f(this,"string");f(this,"type");if(this.string=e,this.type=r,!TA.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&TA.test(r.string)}}});var xA={};xt(xA,{LazyJsonString:()=>Nt,NumericValue:()=>Ue,_parseEpochTimestamp:()=>ja,_parseRfc3339DateTimeWithOffset:()=>Ay,_parseRfc7231DateTime:()=>Ty,copyDocumentWithTransform:()=>PV,dateToUtcString:()=>Ua,expectBoolean:()=>IV,expectByte:()=>ay,expectFloat32:()=>ql,expectInt:()=>NV,expectInt32:()=>iy,expectLong:()=>qa,expectNonNull:()=>LV,expectNumber:()=>ka,expectObject:()=>$C,expectShort:()=>oy,expectString:()=>MV,expectUnion:()=>kV,generateIdempotencyToken:()=>Kr.v4,handleFloat:()=>FV,limitedParseDouble:()=>ly,limitedParseFloat:()=>UV,limitedParseFloat32:()=>BV,logger:()=>$a,nv:()=>xy,parseBoolean:()=>xV,parseEpochTimestamp:()=>yy,parseRfc3339DateTime:()=>zV,parseRfc3339DateTimeWithOffset:()=>my,parseRfc7231DateTime:()=>gy,quoteHeader:()=>wy,splitEvery:()=>Py,splitHeader:()=>Va,strictParseByte:()=>dy,strictParseDouble:()=>Fl,strictParseFloat:()=>qV,strictParseFloat32:()=>uy,strictParseInt:()=>HV,strictParseInt32:()=>jV,strictParseLong:()=>UC,strictParseShort:()=>Hs});var Wt=w(()=>{qC();BC();SA();_A();fy();vA();RA();CA();AA();PA()});var Dt,$i=w(()=>{Dt=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});var IA,Iy,OA=w(()=>{IA=A(dt()),Iy=class{constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){f(this,"marshaller");f(this,"serializer");f(this,"deserializer");f(this,"serdeContext");f(this,"defaultContentType");this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let d={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:d,body:m}}for await(let d of e)yield d}};return s.serialize(l,d=>{if(d[u])return{headers:d.headers,body:d.body};let m=Object.keys(d).find(O=>O!=="__type")??"",{additionalHeaders:g,body:E,eventType:b,explicitPayloadContentType:P}=this.writeEventBody(m,o,d);return{headers:{":event-type":{type:"string",value:b},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:P??c},...g},body:E}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async m=>{let g=Object.keys(m).find(E=>E!=="__type")??"";if(g==="initial-response"){let E=await this.deserializer.read(r,m[g].body);return delete E[i],{[c]:!0,...E}}else if(g in a){let E=a[g];return{[g]:await this.deserializer.read(E,m[g].body)}}else return{$unknown:m}}),l=u[Symbol.asyncIterator](),d=await l.next();if(d.done)return u;if(d.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,g]of Object.entries(d.value))n[m]=g}return{async*[Symbol.asyncIterator](){for(d?.value?.[c]||(yield d.value);;){let{done:m,value:g}=await l.next();if(m)break;yield g}}}}writeEventBody(e,r,n){let s=this.serializer,i=e,o=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let m=r.getMemberSchema(e);if(m.isStructSchema()){for(let[g,E]of m.structIterator()){let{eventHeader:b,eventPayload:P}=E.getMergedTraits();if(P){o=g;break}else if(b){let T=n[e][g],O="binary";E.isNumericSchema()?(-2)**31<=T&&T<=2**31-1?O="integer":O="long":E.isTimestampSchema()?O="timestamp":E.isStringSchema()?O="string":E.isBooleanSchema()&&(O="boolean"),T!=null&&(u[g]={type:O,value:T},delete n[e][g])}}if(o!==null){let g=m.getMemberSchema(o);g.isBlobSchema()?a="application/octet-stream":g.isStringSchema()&&(a="text/plain"),s.write(g,n[e][o])}else s.write(m,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,g]=n[e];i=m,s.write(15,g)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??IA.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var NA={};xt(NA,{EventStreamSerde:()=>Iy});var DA=w(()=>{OA()});var Vl,js,Wl=w(()=>{xe();Vl=A(we());$i();js=class extends Dt{constructor(r){super();f(this,"options");this.options=r}getRequestType(){return Vl.HttpRequest}getResponseType(){return Vl.HttpResponse}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(let[s,i]of n.url.searchParams.entries())r.query[s]=i;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,s){let i=V.of(n.input),o=Wr(n.traits??{});if(o.endpoint){let a=o.endpoint?.[0];if(typeof a=="string"){let c=[...i.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of c){let l=s[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);a=a.replace(`{${u}}`,l)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:r}=await Promise.resolve().then(()=>(DA(),NA));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,s,i,o){return[]}getEventStreamMarshaller(){let r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}});var LA,MA,Vs,kA=w(()=>{xe();Wt();LA=A(we()),MA=A(Na());bl();Rl();Wl();Vs=class extends js{async serializeRequest(e,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=V.of(e?.input),l=u.getSchema(),d=!1,m,g=new LA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(g,c),this.setHostPrefix(g,e,s);let E=Wr(e.traits);if(E.http){g.method=E.http[0];let[b,P]=E.http[1].split("?");g.path=="/"?g.path=b:g.path+=b;let T=new URLSearchParams(P??"");Object.assign(o,Object.fromEntries(T))}}for(let[E,b]of u.structIterator()){let P=b.getMergedTraits()??{},T=s[E];if(T!=null)if(P.httpPayload)b.isStreaming()?b.isStructSchema()?s[E]&&(m=await this.serializeEventStream({eventStream:s[E],requestSchema:u})):m=T:(i.write(b,T),m=i.flush()),delete s[E];else if(P.httpLabel){i.write(b,T);let O=i.flush();g.path.includes(`{${E}+}`)?g.path=g.path.replace(`{${E}+}`,O.split("/").map(Vr).join("/")):g.path.includes(`{${E}}`)&&(g.path=g.path.replace(`{${E}}`,Vr(O))),delete s[E]}else if(P.httpHeader)i.write(b,T),a[P.httpHeader.toLowerCase()]=String(i.flush()),delete s[E];else if(typeof P.httpPrefixHeaders=="string"){for(let[O,M]of Object.entries(T)){let q=P.httpPrefixHeaders+O;i.write([b.getValueSchema(),{httpHeader:q}],M),a[q.toLowerCase()]=i.flush()}delete s[E]}else P.httpQuery||P.httpQueryParams?(this.serializeQuery(b,T,o),delete s[E]):d=!0}return d&&s&&(i.write(l,s),m=i.flush()),g.headers=a,g.query=o,g.body=m,g}serializeQuery(e,r,n){let s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let o=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),i],c);let u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,i=V.of(e.output),o={};if(n.statusCode>=300){let c=await Ar(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await Ar(n.body,r);if(c.byteLength>0){let u=await s.read(i,c);for(let l of a)o[l]=u[l]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(e,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=V.of(e),u=[];for(let[l,d]of c.structIterator()){let m=d.getMemberTraits();if(m.httpPayload){if(d.isStreaming())d.isStructSchema()?o[l]=await this.deserializeEventStream({response:n,responseSchema:c}):o[l]=(0,MA.sdkStreamMixin)(n.body);else if(n.body){let E=await Ar(n.body,r);E.byteLength>0&&(o[l]=await a.read(d,E))}}else if(m.httpHeader){let g=String(m.httpHeader).toLowerCase(),E=n.headers[g];if(E!=null)if(d.isListSchema()){let b=d.getValueSchema();b.getMergedTraits().httpHeader=g;let P;b.isTimestampSchema()&&b.getSchema()===4?P=Py(E,",",2):P=Va(E);let T=[];for(let O of P)T.push(await a.read(b,O.trim()));o[l]=T}else o[l]=await a.read(d,E)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[g,E]of Object.entries(n.headers))if(g.startsWith(m.httpPrefixHeaders)){let b=d.getValueSchema();b.getMergedTraits().httpHeader=g,o[l][g.slice(m.httpPrefixHeaders.length)]=await a.read(b,E)}}else m.httpResponseCode?o[l]=n.statusCode:u.push(l)}return u}}});var qA,fn,$A=w(()=>{xe();qA=A(we());bl();Wl();fn=class extends js{async serializeRequest(e,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=V.of(e?.input),u=c.getSchema(),l,d=new qA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(d,a),this.setHostPrefix(d,e,r));let m={...r};if(r){let g=c.getEventStreamMember();if(g){if(m[g]){let E={};for(let[b,P]of c.structIterator())b!==g&&m[b]&&(s.write(P,m[b]),E[b]=s.flush());l=await this.serializeEventStream({eventStream:m[g],requestSchema:c,initialRequest:E})}}else s.write(u,m),l=s.flush()}return d.headers=o,d.query=i,d.body=l,d.method="POST",d}async deserializeResponse(e,r,n){let s=this.deserializer,i=V.of(e.output),o={};if(n.statusCode>=300){let c=await Ar(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await Ar(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var Oy,Ny=w(()=>{Rl();Oy=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?o.split("/").map(a=>Vr(a)).join("/"):Vr(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function Dy(t,e){return new zl(t,e)}var FA,zl,UA=w(()=>{FA=A(we());Ny();zl=class{constructor(e,r){f(this,"input");f(this,"context");f(this,"query",{});f(this,"method","");f(this,"headers",{});f(this,"path","");f(this,"body",null);f(this,"hostname","");f(this,"resolvePathStack",[]);this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new FA.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=Oy(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function tr(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}var Gl=w(()=>{});var Ly,BA,Ws,My=w(()=>{xe();Wt();Ly=A(ft()),BA=A(dt());$i();Gl();Ws=class extends Dt{constructor(r){super();f(this,"settings");this.settings=r}read(r,n){let s=V.of(r);if(s.isListSchema())return Va(n).map(i=>this.read(s.getValueSchema(),i));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??Ly.fromBase64)(n);if(s.isTimestampSchema())switch(tr(s,this.settings)){case 5:return Ay(n);case 6:return Ty(n);case 7:return ja(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isStringSchema()){let i=s.getMergedTraits().mediaType,o=n;if(i)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(i==="application/json"||i.endsWith("+json"))&&(o=Nt.from(o)),o}return s.isNumericSchema()?Number(n):s.isBigIntegerSchema()?BigInt(n):s.isBigDecimalSchema()?new Ue(n,"bigDecimal"):s.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??BA.toUtf8)((this.serdeContext?.base64Decoder??Ly.fromBase64)(r))}}});var Kl,zs,HA=w(()=>{xe();Kl=A(dt());$i();My();zs=class extends Dt{constructor(r,n){super();f(this,"codecDeserializer");f(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new Ws(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){let s=V.of(r),i=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??Kl.toUtf8;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(n));if(i.httpPayload){if(s.isBlobSchema()){let a=this.serdeContext?.utf8Decoder??Kl.fromUtf8;return typeof n=="string"?a(n):n}else if(s.isStringSchema())return"byteLength"in n?o(n):n}return this.codecDeserializer.read(s,n)}}});var ky,Wa,qy=w(()=>{xe();Wt();ky=A(ft());$i();Gl();Wa=class extends Dt{constructor(r){super();f(this,"settings");f(this,"stringBuffer","");this.settings=r}write(r,n){let s=V.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${s.getName(!0)}`);switch(tr(s,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Ua(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??ky.toBase64)(n);return}if(s.isListSchema()&&Array.isArray(n)){let a="";for(let c of n){this.write([s.getValueSchema(),s.getMergedTraits()],c);let u=this.flush(),l=s.getValueSchema().isTimestampSchema()?u:wy(u);a!==""&&(a+=", "),a+=l}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":let i=s.getMergedTraits().mediaType,o=n;if(i&&((i==="application/json"||i.endsWith("+json"))&&(o=Nt.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??ky.toBase64)(o.toString());return}this.stringBuffer=n;break;default:this.stringBuffer=String(n)}}flush(){let r=this.stringBuffer;return this.stringBuffer="",r}}});var Gs,jA=w(()=>{xe();qy();Gs=class{constructor(e,r,n=new Wa(r)){f(this,"codecSerializer");f(this,"stringSerializer");f(this,"buffer");this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=V.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var VA={};xt(VA,{FromStringShapeDeserializer:()=>Ws,HttpBindingProtocol:()=>Vs,HttpInterceptingShapeDeserializer:()=>zs,HttpInterceptingShapeSerializer:()=>Gs,HttpProtocol:()=>js,RequestBuilder:()=>zl,RpcProtocol:()=>fn,SerdeContext:()=>Dt,ToStringShapeSerializer:()=>Wa,collectBody:()=>Ar,determineTimestampFormat:()=>tr,extendedEncodeURIComponent:()=>Vr,requestBuilder:()=>Dy,resolvedPath:()=>Oy});var zt=w(()=>{bl();Rl();kA();Wl();$A();UA();Ny();My();HA();jA();qy();Gl();$i()});var WA=w(()=>{zt()});function mW(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var zA=w(()=>{});var Ks,GA=w(()=>{Ks=class{constructor(e){f(this,"authSchemes",new Map);for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var KA,$y,Fy,XA=w(()=>{KA=A(we()),$y=A(cn()),Fy=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=KA.HttpRequest.clone(e);if(n.in===$y.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===$y.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var QA,Uy,YA=w(()=>{QA=A(we()),Uy=class{async sign(e,r,n){let s=QA.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var pn,JA=w(()=>{pn=class{async sign(e,r,n){return e}}});var ZA=w(()=>{XA();YA();JA()});var eT,gW,By,Xl,Hy,tT=w(()=>{eT=t=>function(r){return Xl(r)&&r.expiration.getTime()-Date.now()<t},gW=3e5,By=eT(3e5),Xl=t=>t.expiration!==void 0,Hy=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,i,o,a=!1,c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var rT=w(()=>{GA();ZA();tT()});var Xs={};xt(Xs,{DefaultIdentityProviderConfig:()=>Ks,EXPIRATION_MS:()=>gW,HttpApiKeyAuthSigner:()=>Fy,HttpBearerAuthSigner:()=>Uy,NoAuthSigner:()=>pn,createIsIdentityExpiredFunction:()=>eT,createPaginator:()=>yR,doesIdentityRequireRefresh:()=>Xl,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Ta,getHttpAuthSchemePlugin:()=>J4,getHttpSigningPlugin:()=>xa,getSmithyContext:()=>z4,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>tR,httpAuthSchemeMiddleware:()=>Aa,httpAuthSchemeMiddlewareOptions:()=>cR,httpSigningMiddleware:()=>vg,httpSigningMiddlewareOptions:()=>pR,isIdentityExpired:()=>By,memoizeIdentityProvider:()=>Hy,normalizeProvider:()=>Kn,requestBuilder:()=>Dy,setFeature:()=>mW});var Gt=w(()=>{Qb();lR();mR();gR();ER();WA();zA();rT()});var Ys=S(Qs=>{"use strict";var Vy=cn(),Wy=class{constructor({size:e,params:r}){f(this,"capacity");f(this,"data",new Map);f(this,"parameters",[]);this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},yW=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),nT=t=>yW.test(t)||t.startsWith("[")&&t.endsWith("]"),EW=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Gy=(t,e=!1)=>{if(!e)return EW.test(t);let r=t.split(".");for(let n of r)if(!Gy(n))return!1;return!0},zy={},za="endpoints";function Jn(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Jn(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Jn).join(", ")})`:JSON.stringify(t,null,2)}var Et=class extends Error{constructor(e){super(e),this.name="EndpointError"}},SW=(t,e)=>t===e,_W=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Et(`Path: '${t}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Et(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},sT=(t,e)=>_W(e).reduce((r,n)=>{if(typeof r!="object")throw new Et(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),vW=t=>t!=null,wW=t=>!t,jy={[Vy.EndpointURLScheme.HTTP]:80,[Vy.EndpointURLScheme.HTTPS]:443},bW=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:g,protocol:E="",path:b="",query:P={}}=t,T=new URL(`${E}//${m}${g?`:${g}`:""}${b}`);return T.search=Object.entries(P).map(([O,M])=>`${O}=${M}`).join("&"),T}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(Vy.EndpointURLScheme).includes(c))return null;let u=nT(s),l=r.includes(`${n}:${jy[c]}`)||typeof t=="string"&&t.includes(`${n}:${jy[c]}`),d=`${n}${l?`:${jy[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},RW=(t,e)=>t===e,CW=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),AW=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),TW={booleanEquals:SW,getAttr:sT,isSet:vW,isValidHostLabel:Gy,not:wW,parseURL:bW,stringEquals:RW,substring:CW,uriEncode:AW},iT=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));let o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(sT(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},PW=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Ql=(t,e,r)=>{if(typeof t=="string")return iT(t,r);if(t.fn)return aT.callFunction(t,r);if(t.ref)return PW(t,r);throw new Et(`'${e}': ${String(t)} is not a string, function or reference.`)},oT=({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:aT.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in zy&&s[1]!=null?zy[s[0]][s[1]](...n):TW[t](...n)},aT={evaluateExpression:Ql,callFunction:oT},xW=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Et(`'${t}' is already defined in Reference Record.`);let n=oT(e,r);return r.logger?.debug?.(`${za} evaluateCondition: ${Jn(e)} = ${Jn(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},Ky=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:i}=xW(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${za} assign: ${i.name} := ${Jn(i.value)}`))}return{result:!0,referenceRecord:r}},IW=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=Ql(i,"Header value entry",e);if(typeof o!="string")throw new Et(`Header '${n}' value '${o}' is not a string`);return o})}),{}),cT=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:lT.getEndpointProperty(s,e)}),{}),uT=(t,e)=>{if(Array.isArray(t))return t.map(r=>uT(r,e));switch(typeof t){case"string":return iT(t,e);case"object":if(t===null)throw new Et(`Unexpected endpoint property: ${t}`);return lT.getEndpointProperties(t,e);case"boolean":return t;default:throw new Et(`Unexpected endpoint property type: ${typeof t}`)}},lT={getEndpointProperty:uT,getEndpointProperties:cT},OW=(t,e)=>{let r=Ql(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Et(`Endpoint URL must be a string, got ${typeof r}`)},NW=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=Ky(r,e);if(!s)return;let o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${za} Resolving endpoint from template: ${Jn(n)}`),{...u!=null&&{headers:IW(u,o)},...c!=null&&{properties:cT(c,o)},url:OW(a,o)}},DW=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:i}=Ky(r,e);if(s)throw new Et(Ql(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},dT=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=NW(r,e);if(n)return n}else if(r.type==="error")DW(r,e);else if(r.type==="tree"){let n=fT.evaluateTreeRule(r,e);if(n)return n}else throw new Et(`Unknown endpoint rule: ${r}`);throw new Et("Rules evaluation failed")},LW=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=Ky(r,e);if(s)return fT.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},fT={evaluateRules:dT,evaluateTreeRule:LW},MW=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${za} Initial EndpointParams: ${Jn(r)}`);let o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(let[u,l]of o)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Et(`Missing required parameter: '${u}'`);let c=dT(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${za} Resolved endpoint: ${Jn(c)}`),c};Qs.EndpointCache=Wy;Qs.EndpointError=Et;Qs.customEndpointFunctions=zy;Qs.isIpAddress=nT;Qs.isValidHostLabel=Gy;Qs.resolveEndpoint=MW});var hT=S(pT=>{"use strict";function kW(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}pT.parseQueryString=kW});var Zn=S(gT=>{"use strict";var qW=hT(),mT=t=>{if(typeof t=="string")return mT(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:i}=t,o;return i&&(o=qW.parseQueryString(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};gT.parseUrl=mT});var Ui=S(Pr=>{"use strict";var Fi=Ys(),$W=Zn(),ET=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!ET(r))return!1;return!0}return!(!Fi.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Fi.isIpAddress(t))},yT=":",FW="/",UW=t=>{let e=t.split(yT);if(e.length<6)return null;let[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(yT)==="")return null;let c=a.map(u=>u.split(FW)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},BW=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],HW="1.1",ST={partitions:BW,version:HW},_T=ST,vT="",wT=t=>{let{partitions:e}=_T;for(let n of e){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(let n of e){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},bT=(t,e="")=>{_T=t,vT=e},jW=()=>{bT(ST,"")},VW=()=>vT,RT={isVirtualHostableS3Bucket:ET,parseArn:UW,partition:wT};Fi.customEndpointFunctions.aws=RT;var WW=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>CT(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},CT=t=>$W.parseUrl(t.url);Object.defineProperty(Pr,"EndpointError",{enumerable:!0,get:function(){return Fi.EndpointError}});Object.defineProperty(Pr,"isIpAddress",{enumerable:!0,get:function(){return Fi.isIpAddress}});Object.defineProperty(Pr,"resolveEndpoint",{enumerable:!0,get:function(){return Fi.resolveEndpoint}});Pr.awsEndpointFunctions=RT;Pr.getUserAgentPrefix=VW;Pr.partition=wT;Pr.resolveDefaultAwsRegionalEndpointsConfig=WW;Pr.setPartitionInfo=bT;Pr.toEndpointV1=CT;Pr.useDefaultPartitionInfo=jW});var Yl,Bi,AT=w(()=>{Yl={warningEmitted:!1},Bi=t=>{t&&!Yl.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(Yl.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function es(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var TT=w(()=>{});function PT(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var xT=w(()=>{});function IT(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var OT=w(()=>{});var ts={};xt(ts,{emitWarningIfUnsupportedVersion:()=>Bi,setCredentialFeature:()=>es,setFeature:()=>PT,setTokenFeature:()=>IT,state:()=>Yl});var xr=w(()=>{AT();TT();xT();OT()});var NT,Xy,DT=w(()=>{NT=A(we()),Xy=t=>NT.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Hi,Qy=w(()=>{Hi=t=>new Date(Date.now()+t)});var LT,MT=w(()=>{Qy();LT=(t,e)=>Math.abs(Hi(e).getTime()-t)>=3e5});var Yy,kT=w(()=>{MT();Yy=(t,e)=>{let r=Date.parse(t);return LT(r,e)?r-Date.now():e}});var Jy=w(()=>{DT();Qy();kT()});var qT,Ga,ji,Kt,Zy,eE=w(()=>{qT=A(we());Jy();Ga=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},ji=async t=>{let e=Ga("context",t.context),r=Ga("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Ga("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},Kt=class{async sign(e,r,n){if(!qT.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ji(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[d,m]=u.authSchemes;d?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await o.sign(e,{signingDate:Hi(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??Xy(r.$response);if(n){let s=Ga("config",e.config),i=s.systemClockOffset;s.systemClockOffset=Yy(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=Xy(e);if(n){let s=Ga("config",r.config);s.systemClockOffset=Yy(n,s.systemClockOffset)}}},Zy=Kt});var $T,Ka,FT=w(()=>{$T=A(we());Jy();eE();Ka=class extends Kt{async sign(e,r,n){if(!$T.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await ji(n),l=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:Hi(s.systemClockOffset),signingRegion:l,signingService:c})}}});var tE,UT=w(()=>{tE=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var Jl,rE=w(()=>{Jl=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var BT,HT,Vi,jT=w(()=>{UT();rE();BT="AWS_AUTH_SCHEME_PREFERENCE",HT="auth_scheme_preference",Vi={environmentVariableSelector:(t,e)=>{if(e?.signingName&&Jl(e.signingName)in t)return["httpBearerAuth"];if(BT in t)return tE(t[BT])},configFileSelector:t=>{if(HT in t)return tE(t[HT])},default:[]}});var Lt=S(Js=>{"use strict";var Wi=class t extends Error{constructor(r,n=!0){let s,i=!0;typeof n=="boolean"?(s=void 0,i=n):n!=null&&typeof n=="object"&&(s=n.logger,i=n.tryNextLink??!0);super(r);f(this,"name","ProviderError");f(this,"tryNextLink");this.tryNextLink=i,Object.setPrototypeOf(this,t.prototype),s?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}},nE=class t extends Wi{constructor(r,n=!0){super(r,n);f(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,t.prototype)}},sE=class t extends Wi{constructor(r,n=!0){super(r,n);f(this,"name","TokenProviderError");Object.setPrototypeOf(this,t.prototype)}},zW=(...t)=>async()=>{if(t.length===0)throw new Wi("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},GW=t=>()=>Promise.resolve(t),KW=(t,e,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return e===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(e(n)&&await a(),n))};Js.CredentialsProviderError=nE;Js.ProviderError=Wi;Js.TokenProviderError=sE;Js.chain=zW;Js.fromStatic=GW;Js.memoize=KW});var iE,VT,WT,zT=w(()=>{Gt();iE=A(Lt()),VT=t=>(t.sigv4aSigningRegionSet=Kn(t.sigv4aSigningRegionSet),t),WT={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new iE.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new iE.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var od=S(ee=>{"use strict";var rs=Kg(),Zs=dt(),XW=bg(),QT=we(),GT=It(),Zl=kg(),YT="X-Amz-Algorithm",JT="X-Amz-Credential",dE="X-Amz-Date",ZT="X-Amz-SignedHeaders",eP="X-Amz-Expires",fE="X-Amz-Signature",pE="X-Amz-Security-Token",QW="X-Amz-Region-Set",hE="authorization",mE=dE.toLowerCase(),tP="date",rP=[hE,mE,tP],nP=fE.toLowerCase(),sd="x-amz-content-sha256",sP=pE.toLowerCase(),YW="host",iP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},oP=/^proxy-/,aP=/^sec-/,JW=[/^proxy-/i,/^sec-/i],ed="AWS4-HMAC-SHA256",ZW="AWS4-ECDSA-P256-SHA256",cP="AWS4-HMAC-SHA256-PAYLOAD",uP="UNSIGNED-PAYLOAD",lP=50,gE="aws4_request",dP=60*60*24*7,zi={},td=[],rd=(t,e,r)=>`${t}/${e}/${r}/${gE}`,fP=async(t,e,r,n,s)=>{let i=await KT(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${rs.toHex(i)}:${e.sessionToken}`;if(o in zi)return zi[o];for(td.push(o);td.length>lP;)delete zi[td.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,gE])a=await KT(t,a,c);return zi[o]=a},ez=()=>{td.length=0,Object.keys(zi).forEach(t=>{delete zi[t]})},KT=(t,e,r)=>{let n=new t(e);return n.update(Zs.toUint8Array(r)),n.digest()},oE=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let i=s.toLowerCase();(i in iP||e?.has(i)||oP.test(i)||aP.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},nd=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===sd)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||XW.isArrayBuffer(e)){let n=new r;return n.update(Zs.toUint8Array(e)),rs.toHex(await n.digest())}return uP},aE=class{format(e){let r=[];for(let i of Object.keys(e)){let o=Zs.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=Zs.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(cE.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!tz.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(rs.fromHex(e.value.replace(/\-/g,"")),1),d}}},tz=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,cE=class t{constructor(e){f(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&XT(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&XT(e),parseInt(rs.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function XT(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var pP=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},hP=(t,e={})=>{let{headers:r,query:n={}}=QT.HttpRequest.clone(t);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},uE=t=>{t=QT.HttpRequest.clone(t);for(let e of Object.keys(t.headers))rP.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},mP=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===nP)continue;let s=Zl.escapeUri(n);e.push(s);let i=t[n];typeof i=="string"?r[s]=`${s}=${Zl.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Zl.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},rz=t=>nz(t).toISOString().replace(/\.\d{3}Z$/,"Z"),nz=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,id=class{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){f(this,"service");f(this,"regionProvider");f(this,"credentialProvider");f(this,"sha256");f(this,"uriEscapePath");f(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=GT.normalizeProvider(n),this.credentialProvider=GT.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${mP(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let i=new this.sha256;i.update(Zs.toUint8Array(n));let o=await i.digest();return`${s}
${e}
${r}
${rs.toHex(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return Zl.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=rz(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},lE=class extends id{constructor({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a});f(this,"headerFormatter",new aE)}async presign(r,n={}){let{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:u,signingRegion:l,signingService:d}=n,m=await this.credentialProvider();this.validateResolvedCredentials(m);let g=l??await this.regionProvider(),{longDate:E,shortDate:b}=this.formatDate(s);if(i>dP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let P=rd(b,g,d??this.service),T=hP(uE(r),{unhoistableHeaders:a,hoistableHeaders:u});m.sessionToken&&(T.query[pE]=m.sessionToken),T.query[YT]=ed,T.query[JT]=`${m.accessKeyId}/${P}`,T.query[dE]=E,T.query[eP]=i.toString(10);let O=oE(T,o,c);return T.query[ZT]=this.getCanonicalHeaderList(O),T.query[fE]=await this.getSignature(E,P,this.getSigningKey(m,g,b,d),this.createCanonicalRequest(T,O,await nd(r,this.sha256))),T}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(s),d=rd(u,c,a??this.service),m=await nd({headers:{},body:n},this.sha256),g=new this.sha256;g.update(r);let E=rs.toHex(await g.digest()),b=[cP,l,d,i,E,m].join(`
`);return this.signString(b,{signingDate:s,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:s,signingService:i,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:s,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:c}=this.formatDate(n),u=new this.sha256(await this.getSigningKey(o,a,c,i));return u.update(Zs.toUint8Array(r)),rs.toHex(await u.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=o??await this.regionProvider(),l=uE(r),{longDate:d,shortDate:m}=this.formatDate(n),g=rd(m,u,a??this.service);l.headers[mE]=d,c.sessionToken&&(l.headers[sP]=c.sessionToken);let E=await nd(l,this.sha256);!pP(sd,l.headers)&&this.applyChecksum&&(l.headers[sd]=E);let b=oE(l,i,s),P=await this.getSignature(d,g,this.getSigningKey(c,u,m,a),this.createCanonicalRequest(l,b,E));return l.headers[hE]=`${ed} Credential=${c.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(b)}, Signature=${P}`,l}async getSignature(r,n,s,i){let o=await this.createStringToSign(r,n,i,ed),a=new this.sha256(await s);return a.update(Zs.toUint8Array(o)),rs.toHex(await a.digest())}getSigningKey(r,n,s,i){return fP(this.sha256,r,s,n,i||this.service)}},sz={SignatureV4a:null};ee.ALGORITHM_IDENTIFIER=ed;ee.ALGORITHM_IDENTIFIER_V4A=ZW;ee.ALGORITHM_QUERY_PARAM=YT;ee.ALWAYS_UNSIGNABLE_HEADERS=iP;ee.AMZ_DATE_HEADER=mE;ee.AMZ_DATE_QUERY_PARAM=dE;ee.AUTH_HEADER=hE;ee.CREDENTIAL_QUERY_PARAM=JT;ee.DATE_HEADER=tP;ee.EVENT_ALGORITHM_IDENTIFIER=cP;ee.EXPIRES_QUERY_PARAM=eP;ee.GENERATED_HEADERS=rP;ee.HOST_HEADER=YW;ee.KEY_TYPE_IDENTIFIER=gE;ee.MAX_CACHE_SIZE=lP;ee.MAX_PRESIGNED_TTL=dP;ee.PROXY_HEADER_PATTERN=oP;ee.REGION_SET_PARAM=QW;ee.SEC_HEADER_PATTERN=aP;ee.SHA256_HEADER=sd;ee.SIGNATURE_HEADER=nP;ee.SIGNATURE_QUERY_PARAM=fE;ee.SIGNED_HEADERS_QUERY_PARAM=ZT;ee.SignatureV4=lE;ee.SignatureV4Base=id;ee.TOKEN_HEADER=sP;ee.TOKEN_QUERY_PARAM=pE;ee.UNSIGNABLE_PATTERNS=JW;ee.UNSIGNED_PAYLOAD=uP;ee.clearCredentialCache=ez;ee.createScope=rd;ee.getCanonicalHeaders=oE;ee.getCanonicalQuery=mP;ee.getPayloadHash=nd;ee.getSigningKey=fP;ee.hasHeader=pP;ee.moveHeadersToQuery=hP;ee.prepareRequest=uE;ee.signatureV4aContainer=sz});function iz(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=Hy(e,By,Xl):r?n=Kn(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function oz(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var yE,ei,gP,yP=w(()=>{xr();Gt();yE=A(od()),ei=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let l=iz(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=oz(t,l);r&&!d.attributed?(n=async m=>d(m).then(g=>es(g,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,a;return t.signer?a=Kn(t.signer):t.regionInfoProvider?a=()=>Kn(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:d,signingService:m}=u;t.signingRegion=t.signingRegion||d||l,t.signingName=t.signingName||m||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},E=t.signerConstructor||yE.SignatureV4;return new E(g)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Kn(t.region)(),properties:{}},u);let l=u.signingRegion,d=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||d||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||yE.SignatureV4;return new g(m)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})},gP=ei});var EP=w(()=>{eE();FT();jT();zT();yP()});var SP={};xt(SP,{AWSSDKSigV4Signer:()=>Zy,AwsSdkSigV4ASigner:()=>Ka,AwsSdkSigV4Signer:()=>Kt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Vi,NODE_SIGV4A_CONFIG_OPTIONS:()=>WT,getBearerTokenEnvKey:()=>Jl,resolveAWSSDKSigV4Config:()=>gP,resolveAwsSdkSigV4AConfig:()=>VT,resolveAwsSdkSigV4Config:()=>ei,validateSigningProperties:()=>ji});var EE=w(()=>{EP();rE()});function ns(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function ad(t){return t[SE]=!0,t}var SE,cd=w(()=>{SE=Symbol("@smithy/core/cbor::tagSymbol")});function wP(t){be=t,mn=new DataView(be.buffer,be.byteOffset,be.byteLength)}function Xr(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(be[t]&224)>>5,n=be[t]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=RP[n],a=o+1;if(i=a,e-t<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=t+1;o===1?s=be[c]:o===2?s=mn.getUint16(c):o===4?s=mn.getUint32(c):s=mn.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return ne=i,_E(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,ne=i,_E(o)}else if(n===2||n===3){let o=Ja(t+i,e),a=BigInt(0),c=t+i+ne;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(be[u]);return ne=i+ne+o,n===3?-a-BigInt(1):a}else if(n===4){let o=Xr(t+i,e),[a,c]=o,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),d,m=c<0?"-":"";return d=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),d=d.replace(/^0+/g,""),d===""&&(d="0"),d[0]==="."&&(d="0"+d),d=m+d,ne=i+ne,xy(d)}else{let o=Xr(t+i,e);return ne=i+ne,ad({tag:_E(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return pz(t,e);case 5:return Ez(t,e);case 4:return gz(t,e);case 2:return hz(t,e)}else switch(r){case 3:return fz(t,e);case 5:return yz(t,e);case 4:return mz(t,e);case 2:return AE(t,e)}default:return Sz(t,e)}}function bP(t,e,r){return uz&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):_P?_P.decode(t.subarray(e,r)):(0,vP.toUtf8)(t.subarray(e,r))}function lz(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function dz(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function Ja(t,e){let r=be[t]&31;if(r<24)return ne=1,r;if(r===24||r===25||r===26||r===27){let n=RP[r];if(ne=n+1,e-t<ne)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?be[s]:n===2?mn.getUint16(s):n===4?mn.getUint32(s):lz(mn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function fz(t,e){let r=Ja(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=bP(be,t,t+r);return ne=n+r,s}function pz(t,e){t+=1;let r=[];for(let n=t;t<e;){if(be[t]===255){let c=ns(r.length);return c.set(r,0),ne=t-n+2,bP(c,0,c.length)}let s=(be[t]&224)>>5,i=be[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=AE(t,e);t+=ne;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function AE(t,e){let r=Ja(t,e),n=ne;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=be.subarray(t,t+r);return ne=n+r,s}function hz(t,e){t+=1;let r=[];for(let n=t;t<e;){if(be[t]===255){let c=ns(r.length);return c.set(r,0),ne=t-n+2,c}let s=(be[t]&224)>>5,i=be[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=AE(t,e);t+=ne;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function mz(t,e){let r=Ja(t,e),n=ne;t+=n;let s=t,i=Array(r);for(let o=0;o<r;++o){let a=Xr(t,e),c=ne;i[o]=a,t+=c}return ne=n+(t-s),i}function gz(t,e){t+=1;let r=[];for(let n=t;t<e;){if(be[t]===255)return ne=t-n+2,r;let s=Xr(t,e);t+=ne,r.push(s)}throw new Error("expected break marker.")}function yz(t,e){let r=Ja(t,e),n=ne;t+=n;let s=t,i={};for(let o=0;o<r;++o){if(t>=e)throw new Error("unexpected end of map payload.");let a=(be[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=Xr(t,e);t+=ne;let u=Xr(t,e);t+=ne,i[c]=u}return ne=n+(t-s),i}function Ez(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(be[t]===255)return ne=t-r+2,n;let s=(be[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=Xr(t,e);t+=ne;let o=Xr(t,e);t+=ne,n[i]=o}throw new Error("expected break marker.")}function Sz(t,e){let r=be[t]&31;switch(r){case 21:case 20:return ne=1,r===21;case 22:return ne=1,null;case 23:return ne=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return ne=3,dz(be[t+1],be[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return ne=5,mn.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return ne=9,mn.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function _E(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var vP,cz,uz,be,mn,_P,ne,RP,CP=w(()=>{Wt();vP=A(dt());cd();cz=typeof TextDecoder<"u",uz=typeof Buffer<"u",be=ns(0),mn=new DataView(be.buffer,be.byteOffset,be.byteLength),_P=cz?new TextDecoder:null,ne=0;RP={[24]:1,[25]:2,[26]:4,[27]:8}});function PE(t){G.byteLength-W<t&&(W<16e6?ld(Math.max(G.byteLength*4,G.byteLength+t)):ld(G.byteLength+t+16e6))}function xE(){let t=ns(W);return t.set(G.subarray(0,W),0),W=0,t}function ld(t){let e=G;G=ns(t),e&&(e.copy?e.copy(G,0,0,e.byteLength):G.set(e,0)),En=new DataView(G.buffer,G.byteOffset,G.byteLength)}function yn(t,e){e<24?G[W++]=t<<5|e:e<256?(G[W++]=t<<5|24,G[W++]=e):e<65536?(G[W++]=t<<5|25,En.setUint16(W,e),W+=2):e<2**32?(G[W++]=t<<5|26,En.setUint32(W,e),W+=4):(G[W++]=t<<5|27,En.setBigUint64(W,typeof e=="bigint"?e:BigInt(e)),W+=8)}function PP(t){let e=[t];for(;e.length;){let r=e.pop();if(PE(typeof r=="string"?r.length*4:64),typeof r=="string"){if(AP)yn(3,Buffer.byteLength(r)),W+=G.write(r,W);else{let n=(0,TP.fromUtf8)(r);yn(3,n.byteLength),G.set(n,W),W+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?G[W++]=s<<5|i:i<256?(G[W++]=s<<5|24,G[W++]=i):i<65536?(G[W++]=s<<5|25,G[W++]=i>>8,G[W++]=i):i<4294967296?(G[W++]=s<<5|26,En.setUint32(W,i),W+=4):(G[W++]=s<<5|27,En.setBigUint64(W,BigInt(i)),W+=8);continue}G[W++]=251,En.setFloat64(W,r),W+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)G[W++]=s<<5|o;else if(o<256)G[W++]=s<<5|24,G[W++]=o;else if(o<65536)G[W++]=s<<5|25,G[W++]=o>>8,G[W++]=o&255;else if(o<4294967296)G[W++]=s<<5|26,En.setUint32(W,o),W+=4;else if(i<BigInt("18446744073709551616"))G[W++]=s<<5|27,En.setBigUint64(W,i),W+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);PE(c.byteLength*2),G[W++]=n?194:195,AP?yn(2,Buffer.byteLength(c)):yn(2,c.byteLength),G.set(c,W),W+=c.byteLength}continue}else if(r===null){G[W++]=246;continue}else if(typeof r=="boolean"){G[W++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);yn(4,r.length);continue}else if(typeof r.byteLength=="number"){PE(r.length*2),yn(2,r.length),G.set(r,W),W+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Ue){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));G[W++]=196,e.push(o),e.push(i),yn(4,2);continue}if(r[SE])if("tag"in r&&"value"in r){e.push(r.value),yn(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];e.push(r[i]),e.push(i)}yn(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var TP,AP,_z,G,En,W,xP=w(()=>{Wt();TP=A(dt());cd();AP=typeof Buffer<"u",_z=2048,G=ns(_z),En=new DataView(G.buffer,G.byteOffset,G.byteLength),W=0});var IE,IP=w(()=>{CP();xP();IE={deserialize(t){return wP(t),Xr(0,t.length)},serialize(t){try{return PP(t),xE()}catch(e){throw xE(),e}},resizeEncodingBuffer(t){ld(t)}}});var dd,fd,pd=w(()=>{cd();dd=t=>ad({tag:1,value:t.getTime()/1e3}),fd=(t,e)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var DE,hd,OE,NE,LE=w(()=>{zt();xe();Wt();DE=A(ft());IP();pd();hd=class extends Dt{createSerializer(){let e=new OE;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new NE;return e.setSerdeContext(this.serdeContext),e}},OE=class extends Dt{constructor(){super(...arguments);f(this,"value")}write(r,n){this.value=this.serialize(r,n)}serialize(r,n){let s=V.of(r);if(n==null)return s.isIdempotencyToken()?(0,Kr.v4)():n;if(s.isBlobSchema())return typeof n=="string"?(this.serdeContext?.base64Decoder??DE.fromBase64)(n):n;if(s.isTimestampSchema())return typeof n=="number"||typeof n=="bigint"?dd(new Date(Number(n)/1e3|0)):dd(n);if(typeof n=="function"||typeof n=="object"){let i=n;if(s.isListSchema()&&Array.isArray(i)){let a=!!s.getMergedTraits().sparse,c=[],u=0;for(let l of i){let d=this.serialize(s.getValueSchema(),l);(d!=null||a)&&(c[u++]=d)}return c}if(i instanceof Date)return dd(i);let o={};if(s.isMapSchema()){let a=!!s.getMergedTraits().sparse;for(let c of Object.keys(i)){let u=this.serialize(s.getValueSchema(),i[c]);(u!=null||a)&&(o[c]=u)}}else if(s.isStructSchema())for(let[a,c]of s.structIterator()){let u=this.serialize(c,i[a]);u!=null&&(o[a]=u)}else if(s.isDocumentSchema())for(let a of Object.keys(i))o[a]=this.serialize(s.getValueSchema(),i[a]);return o}return n}flush(){let r=IE.serialize(this.value);return this.value=void 0,r}},NE=class extends Dt{read(e,r){let n=IE.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=V.of(e);if(n.isTimestampSchema()&&typeof r=="number")return ja(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??DE.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator()){let a=this.readValue(o,r[i]);a!=null&&(s[i]=a)}return s}else return r}}});var OP,md,NP=w(()=>{zt();xe();OP=A(It());LE();pd();md=class extends fn{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"codec",new hd);f(this,"serializer",this.codec.createSerializer());f(this,"deserializer",this.codec.createDeserializer())}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);if(Object.assign(i.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Tr(r.input)==="unit")delete i.body,delete i.headers["content-type"];else{i.body||(this.serializer.write(15,{}),i.body=this.serializer.flush());try{i.headers["content-length"]=String(i.body.byteLength)}catch{}}let{service:o,operation:a}=(0,OP.getSmithyContext)(s),c=`/service/${o}/operation/${a}`;return i.path.endsWith("/")?i.path+=c.slice(1):i.path+=c,i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=fd(s,i)??"Unknown",c=this.options.defaultNamespace;a.includes("#")&&([c]=a.split("#"));let u={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},l=le.for(c),d;try{d=l.getSchema(a)}catch{i.Message&&(i.message=i.Message);let O=le.for("smithy.ts.sdk.synthetic."+c),M=O.getBaseException();if(M){let q=O.getErrorCtor(M);throw Object.assign(new q({name:a}),u,i)}throw Object.assign(new Error(a),u,i)}let m=V.of(d),g=l.getErrorCtor(d),E=i.message??i.Message??"Unknown",b=new g(E),P={};for(let[T,O]of m.structIterator())P[T]=this.deserializer.readValue(O,i[T]);throw Object.assign(b,u,{$fault:m.getMergedTraits().error,message:E},P)}getDefaultContentType(){return"application/cbor"}}});var DP=w(()=>{pd();NP();LE()});var ar,Ki=w(()=>{xe();ar=class{resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},l=le.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=le.for("smithy.ts.sdk.synthetic."+a),g=m.getBaseException();if(g){let E=m.getErrorCtor(g)??Error;throw Object.assign(new E({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(let[c,u]of o)a[c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}}});var gd,LP=w(()=>{DP();xe();Ki();gd=class extends md{constructor({defaultNamespace:r,awsQueryCompatible:n}){super({defaultNamespace:r});f(this,"awsQueryCompatible");f(this,"mixin",new ar);this.awsQueryCompatible=!!n}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),i}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=fd(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[b,P]of l.structIterator())E[b]=this.deserializer.readValue(P,i[b]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var MP,kP,qP,$P=w(()=>{MP=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},kP=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},qP=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var St,as=w(()=>{St=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});function FP(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new Ue(n,"bigDecimal"):BigInt(n)}return e}var UP=w(()=>{Wt()});var VP=S(jP=>{"use strict";var ti=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},cs=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,ME=()=>{let t=[],e=[],r=!1,n=new Set,s=d=>d.sort((m,g)=>BP[g.step]-BP[m.step]||HP[g.priority||"normal"]-HP[m.priority||"normal"]),i=d=>{let m=!1,g=E=>{let b=ti(E.name,E.aliases);if(b.includes(d)){m=!0;for(let P of b)n.delete(P);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},o=d=>{let m=!1,g=E=>{if(E.middleware===d){m=!0;for(let b of ti(E.name,E.aliases))n.delete(b);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},a=d=>(t.forEach(m=>{d.add(m.middleware,{...m})}),e.forEach(m=>{d.addRelativeTo(m.middleware,{...m})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{let m=[];return d.before.forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m.push(d),d.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m},u=(d=!1)=>{let m=[],g=[],E={};return t.forEach(P=>{let T={...P,before:[],after:[]};for(let O of ti(T.name,T.aliases))E[O]=T;m.push(T)}),e.forEach(P=>{let T={...P,before:[],after:[]};for(let O of ti(T.name,T.aliases))E[O]=T;g.push(T)}),g.forEach(P=>{if(P.toMiddleware){let T=E[P.toMiddleware];if(T===void 0){if(d)return;throw new Error(`${P.toMiddleware} is not found when adding ${cs(P.name,P.aliases)} middleware ${P.relation} ${P.toMiddleware}`)}P.relation==="after"&&T.after.push(P),P.relation==="before"&&T.before.push(P)}}),s(m).map(c).reduce((P,T)=>(P.push(...T),P),[])},l={add:(d,m={})=>{let{name:g,override:E,aliases:b}=m,P={step:"initialize",priority:"normal",middleware:d,...m},T=ti(g,b);if(T.length>0){if(T.some(O=>n.has(O))){if(!E)throw new Error(`Duplicate middleware name '${cs(g,b)}'`);for(let O of T){let M=t.findIndex(B=>B.name===O||B.aliases?.some(ce=>ce===O));if(M===-1)continue;let q=t[M];if(q.step!==P.step||P.priority!==q.priority)throw new Error(`"${cs(q.name,q.aliases)}" middleware with ${q.priority} priority in ${q.step} step cannot be overridden by "${cs(g,b)}" middleware with ${P.priority} priority in ${P.step} step.`);t.splice(M,1)}}for(let O of T)n.add(O)}t.push(P)},addRelativeTo:(d,m)=>{let{name:g,override:E,aliases:b}=m,P={middleware:d,...m},T=ti(g,b);if(T.length>0){if(T.some(O=>n.has(O))){if(!E)throw new Error(`Duplicate middleware name '${cs(g,b)}'`);for(let O of T){let M=e.findIndex(B=>B.name===O||B.aliases?.some(ce=>ce===O));if(M===-1)continue;let q=e[M];if(q.toMiddleware!==P.toMiddleware||q.relation!==P.relation)throw new Error(`"${cs(q.name,q.aliases)}" middleware ${q.relation} "${q.toMiddleware}" middleware cannot be overridden by "${cs(g,b)}" middleware ${P.relation} "${P.toMiddleware}" middleware.`);e.splice(M,1)}}for(let O of T)n.add(O)}e.push(P)},clone:()=>a(ME()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let m=!1,g=E=>{let{tags:b,name:P,aliases:T}=E;if(b&&b.includes(d)){let O=ti(P,T);for(let M of O)n.delete(M);return m=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),m},concat:d=>{let m=a(ME());return m.use(d),m.identifyOnResolve(r||m.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(d=>{let m=d.step??d.relation+" "+d.toMiddleware;return cs(d.name,d.aliases)+" - "+m}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,m)=>{for(let g of u().map(E=>E.middleware).reverse())d=g(d,m);return r&&console.log(l.identify()),d}};return l},BP={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},HP={high:3,normal:2,low:1};jP.constructStack=ME});var se=S(Se=>{"use strict";var GP=VP(),VE=(zt(),re(VA)),qE=cn(),vz=(xe(),re(kl)),WP=(Wt(),re(xA)),$E=class{constructor(e){f(this,"config");f(this,"middlewareStack",GP.constructStack());f(this,"initConfig");f(this,"handlers");this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},kE="***SensitiveInformation***";function FE(t,e){if(e==null)return e;let r=vz.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return kE;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return kE}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return kE}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=FE(o,n[i]));return s}return e}var yd=class{constructor(){f(this,"middlewareStack",GP.constructStack());f(this,"schema")}static classBuilder(){return new UE}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(let P of s.bind(this)(d,e,r,n))this.middlewareStack.use(P);let m=e.concat(this.middlewareStack),{logger:g}=r,E={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[qE.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:b}=r;return m.resolve(P=>b.handle(P.request,n||{}),E)}},UE=class{constructor(){f(this,"_init",()=>{});f(this,"_ep",{});f(this,"_middlewareFn",()=>[]);f(this,"_commandName","");f(this,"_clientName","");f(this,"_additionalContext",{});f(this,"_smithyContext",{});f(this,"_inputFilterSensitiveLog");f(this,"_outputFilterSensitiveLog");f(this,"_serializer",null);f(this,"_deserializer",null);f(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends yd{constructor(...[s]){super();f(this,"input");f(this,"serialize",e._serializer);f(this,"deserialize",e._deserializer);this.input=s??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(s,i,o){let a=e._operationSchema,c=a?.[4]??a?.input,u=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?FE.bind(null,c):l=>l),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?FE.bind(null,u):l=>l),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}},wz="***SensitiveInformation***",bz=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(o,a,c){let u=new n(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=s}},BE=class t extends Error{constructor(r){super(r.message);f(this,"$fault");f(this,"$response");f(this,"$retryable");f(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;let n=r;return t.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;let n=r;return this===t?t.isInstance(r):t.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}},KP=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},XP=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=Cz(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw KP(o,e)},Rz=t=>({output:e,parsedBody:r,errorCode:n})=>{XP({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},Cz=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),Az=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},zP=!1,Tz=t=>{t&&!zP&&parseInt(t.substring(1,t.indexOf(".")))<16&&(zP=!0)},Pz=t=>{let e=[];for(let r in qE.AlgorithmId){let n=qE.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},xz=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Iz=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),Oz=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},QP=t=>Object.assign(Pz(t),Iz(t)),Nz=QP,Dz=t=>Object.assign(xz(t),Oz(t)),Lz=t=>Array.isArray(t)?t:[t],YP=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=YP(t[r]));return t},Mz=t=>t!=null,HE=class{trace(){}debug(){}info(){}warn(){}error(){}};function JP(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,$z(n,s,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}ZP(n,null,i,o)}return n}var kz=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},qz=(t,e)=>{let r={};for(let n in e)ZP(r,t,e,n);return r},$z=(t,e,r)=>JP(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),ZP=(t,e,r,n)=>{if(e!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=Fz,c=Uz,u=n]=o;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=o:c&&(t[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[n]=i)}},Fz=t=>t!=null,Uz=t=>t,Bz=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},Hz=t=>t.toISOString().replace(".000Z","Z"),jE=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(jE);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=jE(t[r]));return e}return t};Object.defineProperty(Se,"collectBody",{enumerable:!0,get:function(){return VE.collectBody}});Object.defineProperty(Se,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return VE.extendedEncodeURIComponent}});Object.defineProperty(Se,"resolvedPath",{enumerable:!0,get:function(){return VE.resolvedPath}});Se.Client=$E;Se.Command=yd;Se.NoOpLogger=HE;Se.SENSITIVE_STRING=wz;Se.ServiceException=BE;Se._json=jE;Se.convertMap=kz;Se.createAggregatedClient=bz;Se.decorateServiceException=KP;Se.emitWarningIfUnsupportedVersion=Tz;Se.getArrayIfSingleItem=Lz;Se.getDefaultClientConfiguration=Nz;Se.getDefaultExtensionConfiguration=QP;Se.getValueFromTextNode=YP;Se.isSerializableHeaderValue=Mz;Se.loadConfigsForDefaultMode=Az;Se.map=JP;Se.resolveDefaultRuntimeConfig=Dz;Se.serializeDateTime=Hz;Se.serializeFloat=Bz;Se.take=qz;Se.throwDefaultError=XP;Se.withBaseException=Rz;Object.keys(WP).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Se,t)&&Object.defineProperty(Se,t,{enumerable:!0,get:function(){return WP[t]}})})});var ex,tx,Ed,WE=w(()=>{ex=A(se()),tx=A(dt()),Ed=(t,e)=>(0,ex.collectBody)(t,e).then(r=>(e?.utf8Encoder??tx.toUtf8)(r))});var Za,rx,Xi,ec=w(()=>{WE();Za=(t,e)=>Ed(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),rx=async(t,e)=>{let r=await Za(t,e);return r.message=r.message??r.Message,r},Xi=(t,e)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let i=r(e,"code");if(i&&e[i]!==void 0)return n(e[i]);if(e.__type!==void 0)return n(e.__type)}}});var nx,Qi,zE=w(()=>{zt();xe();Wt();nx=A(ft());as();UP();ec();Qi=class extends St{constructor(r){super();f(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,FP):await Za(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let s=n!==null&&typeof n=="object",i=V.of(r);if(i.isListSchema()&&Array.isArray(n)){let a=i.getValueSchema(),c=[],u=!!i.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._read(a,l));return c}else if(i.isMapSchema()&&s){let a=i.getValueSchema(),c={},u=!!i.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._read(a,d));return c}else if(i.isStructSchema()&&s){let a={};for(let[c,u]of i.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._read(u,n[l]);d!=null&&(a[c]=d)}return a}if(i.isBlobSchema()&&typeof n=="string")return(0,nx.fromBase64)(n);let o=i.getMergedTraits().mediaType;if(i.isStringSchema()&&typeof n=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return Nt.from(n);if(i.isTimestampSchema()&&n!=null)switch(tr(i,this.settings)){case 5:return my(n);case 6:return gy(n);case 7:return yy(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(i.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(i.isBigDecimalSchema()&&n!=null){if(n instanceof Ue)return n;let a=n;return a.type==="bigDecimal"&&"string"in a?new Ue(a.string,a.type):new Ue(String(n),"bigDecimal")}if(i.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(i.isDocumentSchema())if(s){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Ue?a[c]=u:a[c]=this._read(i,u);return a}else return structuredClone(n);return n}}});var sx,Sd,ix=w(()=>{Wt();sx="\u039D",Sd=class{constructor(){f(this,"values",new Map);f(this,"counter",0);f(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof Ue){let n=`${sx+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${sx+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var ox,Yi,GE=w(()=>{zt();xe();Wt();ox=A(ft());as();ix();Yi=class extends St{constructor(r){super();f(this,"settings");f(this,"buffer");f(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=V.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=V.of(r).getName(!0))}flush(){let{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){let n=new Sd;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,s){let i=n!==null&&typeof n=="object",o=V.of(r);if(o.isListSchema()&&Array.isArray(n)){let a=o.getValueSchema(),c=[],u=!!o.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._write(a,l));return c}else if(o.isMapSchema()&&i){let a=o.getValueSchema(),c={},u=!!o.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._write(a,d));return c}else if(o.isStructSchema()&&i){let a={};for(let[c,u]of o.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._write(u,n[c],o);d!==void 0&&(a[l]=d)}return a}if(!(n===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||o.isDocumentSchema()&&n instanceof Uint8Array)return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??ox.toBase64)(n);if((o.isTimestampSchema()||o.isDocumentSchema())&&n instanceof Date)switch(tr(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return Ua(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(o.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return(0,Kr.v4)();let a=o.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return Nt.from(n)}if(o.isDocumentSchema())if(i){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Ue?a[c]=u:a[c]=this._write(o,u);return a}else return structuredClone(n);return n}}}});var us,_d=w(()=>{as();zE();GE();us=class extends St{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Yi(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new Qi(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var ls,vd=w(()=>{zt();xe();Ki();_d();ec();ls=class extends fn{constructor({defaultNamespace:r,serviceTarget:n,awsQueryCompatible:s}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"serviceTarget");f(this,"codec");f(this,"mixin",new ar);f(this,"awsQueryCompatible");this.serviceTarget=n,this.codec=new us({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),(Tr(r.input)==="unit"||!i.body)&&(i.body="{}"),i}getPayloadCodec(){return this.codec}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=Xi(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[b,P]of l.structIterator()){let T=P.getMergedTraits().jsonName??b;E[b]=this.codec.createDeserializer().readObject(P,i[T])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var wd,ax=w(()=>{vd();wd=class extends ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var bd,cx=w(()=>{vd();bd=class extends ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Ji,ux=w(()=>{zt();xe();Ki();_d();ec();Ji=class extends Vs{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"codec");f(this,"mixin",new ar);let n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new us(n),this.serializer=new Gs(this.codec.createSerializer(),n),this.deserializer=new zs(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=V.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]&&!i.body&&(i.body="{}"),i}async handleError(r,n,s,i,o){let a=Xi(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[b,P]of l.structIterator()){let T=P.getMergedTraits().jsonName??b;E[b]=this.codec.createDeserializer().readObject(P,i[T])}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/json"}}});var lx,dx,fx=w(()=>{lx=A(se()),dx=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,lx.expectUnion)(t)}});var hx=S((rAe,px)=>{(()=>{"use strict";var t={d:(p,h)=>{for(var _ in h)t.o(h,_)&&!t.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:h[_]})},o:(p,h)=>Object.prototype.hasOwnProperty.call(p,h),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>Wn,XMLParser:()=>c4,XMLValidator:()=>g4});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(p,h){let _=[],C=h.exec(p);for(;C;){let v=[];v.startIndex=h.lastIndex-C[0].length;let R=C.length;for(let I=0;I<R;I++)v.push(C[I]);_.push(v),C=h.exec(p)}return _}let i=function(p){return n.exec(p)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(p,h){h=Object.assign({},o,h);let _=[],C=!1,v=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let R=0;R<p.length;R++)if(p[R]==="<"&&p[R+1]==="?"){if(R+=2,R=u(p,R),R.err)return R}else{if(p[R]!=="<"){if(c(p[R]))continue;return T("InvalidChar","char '"+p[R]+"' is not expected.",M(p,R))}{let I=R;if(R++,p[R]==="!"){R=l(p,R);continue}{let x=!1;p[R]==="/"&&(x=!0,R++);let N="";for(;R<p.length&&p[R]!==">"&&p[R]!==" "&&p[R]!=="	"&&p[R]!==`
`&&p[R]!=="\r";R++)N+=p[R];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),R--),!i(N)){let z;return z=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",T("InvalidTag",z,M(p,R))}let k=g(p,R);if(k===!1)return T("InvalidAttr","Attributes for '"+N+"' have open quote.",M(p,R));let Q=k.value;if(R=k.index,Q[Q.length-1]==="/"){let z=R-Q.length;Q=Q.substring(0,Q.length-1);let ae=b(Q,h);if(ae!==!0)return T(ae.err.code,ae.err.msg,M(p,z+ae.err.line));C=!0}else if(x){if(!k.tagClosed)return T("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",M(p,R));if(Q.trim().length>0)return T("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",M(p,I));if(_.length===0)return T("InvalidTag","Closing tag '"+N+"' has not been opened.",M(p,I));{let z=_.pop();if(N!==z.tagName){let ae=M(p,z.tagStartPos);return T("InvalidTag","Expected closing tag '"+z.tagName+"' (opened in line "+ae.line+", col "+ae.col+") instead of closing tag '"+N+"'.",M(p,I))}_.length==0&&(v=!0)}}else{let z=b(Q,h);if(z!==!0)return T(z.err.code,z.err.msg,M(p,R-Q.length+z.err.line));if(v===!0)return T("InvalidXml","Multiple possible root nodes found.",M(p,R));h.unpairedTags.indexOf(N)!==-1||_.push({tagName:N,tagStartPos:I}),C=!0}for(R++;R<p.length;R++)if(p[R]==="<"){if(p[R+1]==="!"){R++,R=l(p,R);continue}if(p[R+1]!=="?")break;if(R=u(p,++R),R.err)return R}else if(p[R]==="&"){let z=P(p,R);if(z==-1)return T("InvalidChar","char '&' is not expected.",M(p,R));R=z}else if(v===!0&&!c(p[R]))return T("InvalidXml","Extra text at the end",M(p,R));p[R]==="<"&&R--}}}return C?_.length==1?T("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",M(p,_[0].tagStartPos)):!(_.length>0)||T("InvalidXml","Invalid '"+JSON.stringify(_.map(R=>R.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):T("InvalidXml","Start tag expected.",1)}function c(p){return p===" "||p==="	"||p===`
`||p==="\r"}function u(p,h){let _=h;for(;h<p.length;h++)if(!(p[h]!="?"&&p[h]!=" ")){let C=p.substr(_,h-_);if(h>5&&C==="xml")return T("InvalidXml","XML declaration allowed only at the start of the document.",M(p,h));if(p[h]=="?"&&p[h+1]==">"){h++;break}}return h}function l(p,h){if(p.length>h+5&&p[h+1]==="-"&&p[h+2]==="-"){for(h+=3;h<p.length;h++)if(p[h]==="-"&&p[h+1]==="-"&&p[h+2]===">"){h+=2;break}}else if(p.length>h+8&&p[h+1]==="D"&&p[h+2]==="O"&&p[h+3]==="C"&&p[h+4]==="T"&&p[h+5]==="Y"&&p[h+6]==="P"&&p[h+7]==="E"){let _=1;for(h+=8;h<p.length;h++)if(p[h]==="<")_++;else if(p[h]===">"&&(_--,_===0))break}else if(p.length>h+9&&p[h+1]==="["&&p[h+2]==="C"&&p[h+3]==="D"&&p[h+4]==="A"&&p[h+5]==="T"&&p[h+6]==="A"&&p[h+7]==="["){for(h+=8;h<p.length;h++)if(p[h]==="]"&&p[h+1]==="]"&&p[h+2]===">"){h+=2;break}}return h}let d='"',m="'";function g(p,h){let _="",C="",v=!1;for(;h<p.length;h++){if(p[h]===d||p[h]===m)C===""?C=p[h]:C!==p[h]||(C="");else if(p[h]===">"&&C===""){v=!0;break}_+=p[h]}return C===""&&{value:_,index:h,tagClosed:v}}let E=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function b(p,h){let _=s(p,E),C={};for(let v=0;v<_.length;v++){if(_[v][1].length===0)return T("InvalidAttr","Attribute '"+_[v][2]+"' has no space in starting.",q(_[v]));if(_[v][3]!==void 0&&_[v][4]===void 0)return T("InvalidAttr","Attribute '"+_[v][2]+"' is without value.",q(_[v]));if(_[v][3]===void 0&&!h.allowBooleanAttributes)return T("InvalidAttr","boolean attribute '"+_[v][2]+"' is not allowed.",q(_[v]));let R=_[v][2];if(!O(R))return T("InvalidAttr","Attribute '"+R+"' is an invalid name.",q(_[v]));if(C.hasOwnProperty(R))return T("InvalidAttr","Attribute '"+R+"' is repeated.",q(_[v]));C[R]=1}return!0}function P(p,h){if(p[++h]===";")return-1;if(p[h]==="#")return function(C,v){let R=/\d/;for(C[v]==="x"&&(v++,R=/[\da-fA-F]/);v<C.length;v++){if(C[v]===";")return v;if(!C[v].match(R))break}return-1}(p,++h);let _=0;for(;h<p.length;h++,_++)if(!(p[h].match(/\w/)&&_<20)){if(p[h]===";")break;return-1}return h}function T(p,h,_){return{err:{code:p,msg:h,line:_.line||_,col:_.col}}}function O(p){return i(p)}function M(p,h){let _=p.substring(0,h).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function q(p){return p.startIndex+p[1].length}let B={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,h,_){return p},captureMetaData:!1},ce;ce=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Je{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,_){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:_})}addChild(h,_){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child}),_!==void 0&&(this.child[this.child.length-1][ce]={startIndex:_})}static getMetaDataSymbol(){return ce}}function ie(p,h){let _={};if(p[h+3]!=="O"||p[h+4]!=="C"||p[h+5]!=="T"||p[h+6]!=="Y"||p[h+7]!=="P"||p[h+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{h+=9;let C=1,v=!1,R=!1,I="";for(;h<p.length;h++)if(p[h]!=="<"||R)if(p[h]===">"){if(R?p[h-1]==="-"&&p[h-2]==="-"&&(R=!1,C--):C--,C===0)break}else p[h]==="["?v=!0:I+=p[h];else{if(v&&Fs(p,"!ENTITY",h)){let x,N;h+=7,[x,N,h]=ve(p,h+1),N.indexOf("&")===-1&&(_[x]={regx:RegExp(`&${x};`,"g"),val:N})}else if(v&&Fs(p,"!ELEMENT",h)){h+=8;let{index:x}=Bj(p,h+1);h=x}else if(v&&Fs(p,"!ATTLIST",h))h+=8;else if(v&&Fs(p,"!NOTATION",h)){h+=9;let{index:x}=Ge(p,h+1);h=x}else{if(!Fs(p,"!--",h))throw new Error("Invalid DOCTYPE");R=!0}C++,I=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:h}}let Z=(p,h)=>{for(;h<p.length&&/\s/.test(p[h]);)h++;return h};function ve(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h])&&p[h]!=='"'&&p[h]!=="'";)_+=p[h],h++;if(ag(_),h=Z(p,h),p.substring(h,h+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(p[h]==="%")throw new Error("Parameter entities are not supported");let C="";return[h,C]=xi(p,h,"entity"),[_,C,--h]}function Ge(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h]);)_+=p[h],h++;ag(_),h=Z(p,h);let C=p.substring(h,h+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);h+=C.length,h=Z(p,h);let v=null,R=null;if(C==="PUBLIC")[h,v]=xi(p,h,"publicIdentifier"),p[h=Z(p,h)]!=='"'&&p[h]!=="'"||([h,R]=xi(p,h,"systemIdentifier"));else if(C==="SYSTEM"&&([h,R]=xi(p,h,"systemIdentifier"),!R))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:v,systemIdentifier:R,index:--h}}function xi(p,h,_){let C="",v=p[h];if(v!=='"'&&v!=="'")throw new Error(`Expected quoted string, found "${v}"`);for(h++;h<p.length&&p[h]!==v;)C+=p[h],h++;if(p[h]!==v)throw new Error(`Unterminated ${_} value`);return[++h,C]}function Bj(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h]);)_+=p[h],h++;if(!ag(_))throw new Error(`Invalid element name: "${_}"`);let C="";if(p[h=Z(p,h)]==="E"&&Fs(p,"MPTY",h))h+=4;else if(p[h]==="A"&&Fs(p,"NY",h))h+=2;else{if(p[h]!=="(")throw new Error(`Invalid Element Expression, found "${p[h]}"`);for(h++;h<p.length&&p[h]!==")";)C+=p[h],h++;if(p[h]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:C.trim(),index:h}}function Fs(p,h,_){for(let C=0;C<h.length;C++)if(h[C]!==p[_+C+1])return!1;return!0}function ag(p){if(i(p))return p;throw new Error(`Invalid entity name ${p}`)}let Hj=/^[-+]?0x[a-fA-F0-9]+$/,jj=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Vj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},Wj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Lb(p){return typeof p=="function"?p:Array.isArray(p)?h=>{for(let _ of p)if(typeof _=="string"&&h===_||_ instanceof RegExp&&_.test(h))return!0}:()=>!1}class zj{constructor(h){this.options=h,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=Gj,this.parseXml=Jj,this.parseTextData=Kj,this.resolveNameSpace=Xj,this.buildAttributesMap=Yj,this.isItStopNode=r4,this.replaceEntitiesValue=e4,this.readStopNodeData=n4,this.saveTextToParentTag=t4,this.addChild=Zj,this.ignoreAttributesFn=Lb(this.options.ignoreAttributes)}}function Gj(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let C=h[_];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:p[C]}}}function Kj(p,h,_,C,v,R,I){if(p!==void 0&&(this.options.trimValues&&!C&&(p=p.trim()),p.length>0)){I||(p=this.replaceEntitiesValue(p));let x=this.options.tagValueProcessor(h,p,_,v,R);return x==null?p:typeof x!=typeof p||x!==p?x:this.options.trimValues||p.trim()===p?Mb(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function Xj(p){if(this.options.removeNSPrefix){let h=p.split(":"),_=p.charAt(0)==="/"?"/":"";if(h[0]==="xmlns")return"";h.length===2&&(p=_+h[1])}return p}let Qj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Yj(p,h,_){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){let C=s(p,Qj),v=C.length,R={};for(let I=0;I<v;I++){let x=this.resolveNameSpace(C[I][1]);if(this.ignoreAttributesFn(x,h))continue;let N=C[I][4],k=this.options.attributeNamePrefix+x;if(x.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let Q=this.options.attributeValueProcessor(x,N,h);R[k]=Q==null?N:typeof Q!=typeof N||Q!==N?Q:Mb(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(R[k]=!0)}if(!Object.keys(R).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=R,I}return R}}let Jj=function(p){p=p.replace(/\r\n?/g,`
`);let h=new Je("!xml"),_=h,C="",v="";for(let R=0;R<p.length;R++)if(p[R]==="<")if(p[R+1]==="/"){let I=Us(p,">",R,"Closing Tag is not closed."),x=p.substring(R+2,I).trim();if(this.options.removeNSPrefix){let Q=x.indexOf(":");Q!==-1&&(x=x.substr(Q+1))}this.options.transformTagName&&(x=this.options.transformTagName(x)),_&&(C=this.saveTextToParentTag(C,_,v));let N=v.substring(v.lastIndexOf(".")+1);if(x&&this.options.unpairedTags.indexOf(x)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${x}>`);let k=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(k=v.lastIndexOf(".",v.lastIndexOf(".")-1),this.tagsNodeStack.pop()):k=v.lastIndexOf("."),v=v.substring(0,k),_=this.tagsNodeStack.pop(),C="",R=I}else if(p[R+1]==="?"){let I=cg(p,R,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,_,v),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let x=new Je(I.tagName);x.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(x[":@"]=this.buildAttributesMap(I.tagExp,v,I.tagName)),this.addChild(_,x,v,R)}R=I.closeIndex+1}else if(p.substr(R+1,3)==="!--"){let I=Us(p,"-->",R+4,"Comment is not closed.");if(this.options.commentPropName){let x=p.substring(R+4,I-2);C=this.saveTextToParentTag(C,_,v),_.add(this.options.commentPropName,[{[this.options.textNodeName]:x}])}R=I}else if(p.substr(R+1,2)==="!D"){let I=ie(p,R);this.docTypeEntities=I.entities,R=I.i}else if(p.substr(R+1,2)==="!["){let I=Us(p,"]]>",R,"CDATA is not closed.")-2,x=p.substring(R+9,I);C=this.saveTextToParentTag(C,_,v);let N=this.parseTextData(x,_.tagname,v,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:x}]):_.add(this.options.textNodeName,N),R=I+2}else{let I=cg(p,R,this.options.removeNSPrefix),x=I.tagName,N=I.rawTagName,k=I.tagExp,Q=I.attrExpPresent,z=I.closeIndex;this.options.transformTagName&&(x=this.options.transformTagName(x)),_&&C&&_.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,_,v,!1));let ae=_;ae&&this.options.unpairedTags.indexOf(ae.tagname)!==-1&&(_=this.tagsNodeStack.pop(),v=v.substring(0,v.lastIndexOf("."))),x!==h.tagname&&(v+=v?"."+x:x);let Ee=R;if(this.isItStopNode(this.options.stopNodes,v,x)){let ue="";if(k.length>0&&k.lastIndexOf("/")===k.length-1)x[x.length-1]==="/"?(x=x.substr(0,x.length-1),v=v.substr(0,v.length-1),k=x):k=k.substr(0,k.length-1),R=I.closeIndex;else if(this.options.unpairedTags.indexOf(x)!==-1)R=I.closeIndex;else{let jr=this.readStopNodeData(p,N,z+1);if(!jr)throw new Error(`Unexpected end of ${N}`);R=jr.i,ue=jr.tagContent}let Ze=new Je(x);x!==k&&Q&&(Ze[":@"]=this.buildAttributesMap(k,v,x)),ue&&(ue=this.parseTextData(ue,x,v,!0,Q,!0,!0)),v=v.substr(0,v.lastIndexOf(".")),Ze.add(this.options.textNodeName,ue),this.addChild(_,Ze,v,Ee)}else{if(k.length>0&&k.lastIndexOf("/")===k.length-1){x[x.length-1]==="/"?(x=x.substr(0,x.length-1),v=v.substr(0,v.length-1),k=x):k=k.substr(0,k.length-1),this.options.transformTagName&&(x=this.options.transformTagName(x));let ue=new Je(x);x!==k&&Q&&(ue[":@"]=this.buildAttributesMap(k,v,x)),this.addChild(_,ue,v,Ee),v=v.substr(0,v.lastIndexOf("."))}else{let ue=new Je(x);this.tagsNodeStack.push(_),x!==k&&Q&&(ue[":@"]=this.buildAttributesMap(k,v,x)),this.addChild(_,ue,v,Ee),_=ue}C="",R=z}}else C+=p[R];return h.child};function Zj(p,h,_,C){this.options.captureMetaData||(C=void 0);let v=this.options.updateTag(h.tagname,_,h[":@"]);v===!1||(typeof v=="string"&&(h.tagname=v),p.addChild(h,C))}let e4=function(p){if(this.options.processEntities){for(let h in this.docTypeEntities){let _=this.docTypeEntities[h];p=p.replace(_.regx,_.val)}for(let h in this.lastEntities){let _=this.lastEntities[h];p=p.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let h in this.htmlEntities){let _=this.htmlEntities[h];p=p.replace(_.regex,_.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function t4(p,h,_,C){return p&&(C===void 0&&(C=h.child.length===0),(p=this.parseTextData(p,h.tagname,_,!1,!!h[":@"]&&Object.keys(h[":@"]).length!==0,C))!==void 0&&p!==""&&h.add(this.options.textNodeName,p),p=""),p}function r4(p,h,_){let C="*."+_;for(let v in p){let R=p[v];if(C===R||h===R)return!0}return!1}function Us(p,h,_,C){let v=p.indexOf(h,_);if(v===-1)throw new Error(C);return v+h.length-1}function cg(p,h,_,C=">"){let v=function(z,ae,Ee=">"){let ue,Ze="";for(let jr=ae;jr<z.length;jr++){let zn=z[jr];if(ue)zn===ue&&(ue="");else if(zn==='"'||zn==="'")ue=zn;else if(zn===Ee[0]){if(!Ee[1])return{data:Ze,index:jr};if(z[jr+1]===Ee[1])return{data:Ze,index:jr}}else zn==="	"&&(zn=" ");Ze+=zn}}(p,h+1,C);if(!v)return;let R=v.data,I=v.index,x=R.search(/\s/),N=R,k=!0;x!==-1&&(N=R.substring(0,x),R=R.substring(x+1).trimStart());let Q=N;if(_){let z=N.indexOf(":");z!==-1&&(N=N.substr(z+1),k=N!==v.data.substr(z+1))}return{tagName:N,tagExp:R,closeIndex:I,attrExpPresent:k,rawTagName:Q}}function n4(p,h,_){let C=_,v=1;for(;_<p.length;_++)if(p[_]==="<")if(p[_+1]==="/"){let R=Us(p,">",_,`${h} is not closed`);if(p.substring(_+2,R).trim()===h&&(v--,v===0))return{tagContent:p.substring(C,_),i:R};_=R}else if(p[_+1]==="?")_=Us(p,"?>",_+1,"StopNode is not closed.");else if(p.substr(_+1,3)==="!--")_=Us(p,"-->",_+3,"StopNode is not closed.");else if(p.substr(_+1,2)==="![")_=Us(p,"]]>",_,"StopNode is not closed.")-2;else{let R=cg(p,_,">");R&&((R&&R.tagName)===h&&R.tagExp[R.tagExp.length-1]!=="/"&&v++,_=R.closeIndex)}}function Mb(p,h,_){if(h&&typeof p=="string"){let C=p.trim();return C==="true"||C!=="false"&&function(v,R={}){if(R=Object.assign({},Vj,R),!v||typeof v!="string")return v;let I=v.trim();if(R.skipLike!==void 0&&R.skipLike.test(I))return v;if(v==="0")return 0;if(R.hex&&Hj.test(I))return function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(I);if(I.search(/.+[eE].+/)!==-1)return function(N,k,Q){if(!Q.eNotation)return N;let z=k.match(Wj);if(z){let ae=z[1]||"",Ee=z[3].indexOf("e")===-1?"E":"e",ue=z[2],Ze=ae?N[ue.length+1]===Ee:N[ue.length]===Ee;return ue.length>1&&Ze?N:ue.length!==1||!z[3].startsWith(`.${Ee}`)&&z[3][0]!==Ee?Q.leadingZeros&&!Ze?(k=(z[1]||"")+z[3],Number(k)):N:Number(k)}return N}(v,I,R);{let N=jj.exec(I);if(N){let k=N[1]||"",Q=N[2],z=((x=N[3])&&x.indexOf(".")!==-1&&((x=x.replace(/0+$/,""))==="."?x="0":x[0]==="."?x="0"+x:x[x.length-1]==="."&&(x=x.substring(0,x.length-1))),x),ae=k?v[Q.length+1]===".":v[Q.length]===".";if(!R.leadingZeros&&(Q.length>1||Q.length===1&&!ae))return v;{let Ee=Number(I),ue=String(Ee);if(Ee===0||Ee===-0)return Ee;if(ue.search(/[eE]/)!==-1)return R.eNotation?Ee:v;if(I.indexOf(".")!==-1)return ue==="0"||ue===z||ue===`${k}${z}`?Ee:v;let Ze=Q?z:I;return Q?Ze===ue||k+Ze===ue?Ee:v:Ze===ue||Ze===k+ue?Ee:v}}return v}var x}(p,_)}return p!==void 0?p:""}let ug=Je.getMetaDataSymbol();function s4(p,h){return kb(p,h)}function kb(p,h,_){let C,v={};for(let R=0;R<p.length;R++){let I=p[R],x=i4(I),N="";if(N=_===void 0?x:_+"."+x,x===h.textNodeName)C===void 0?C=I[x]:C+=""+I[x];else{if(x===void 0)continue;if(I[x]){let k=kb(I[x],h,N),Q=a4(k,h);I[ug]!==void 0&&(k[ug]=I[ug]),I[":@"]?o4(k,I[":@"],N,h):Object.keys(k).length!==1||k[h.textNodeName]===void 0||h.alwaysCreateTextNode?Object.keys(k).length===0&&(h.alwaysCreateTextNode?k[h.textNodeName]="":k=""):k=k[h.textNodeName],v[x]!==void 0&&v.hasOwnProperty(x)?(Array.isArray(v[x])||(v[x]=[v[x]]),v[x].push(k)):h.isArray(x,N,Q)?v[x]=[k]:v[x]=k}}}return typeof C=="string"?C.length>0&&(v[h.textNodeName]=C):C!==void 0&&(v[h.textNodeName]=C),v}function i4(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let C=h[_];if(C!==":@")return C}}function o4(p,h,_,C){if(h){let v=Object.keys(h),R=v.length;for(let I=0;I<R;I++){let x=v[I];C.isArray(x,_+"."+x,!0,!0)?p[x]=[h[x]]:p[x]=h[x]}}}function a4(p,h){let{textNodeName:_}=h,C=Object.keys(p).length;return C===0||!(C!==1||!p[_]&&typeof p[_]!="boolean"&&p[_]!==0)}class c4{constructor(h){this.externalEntities={},this.options=function(_){return Object.assign({},B,_)}(h)}parse(h,_){if(typeof h!="string"){if(!h.toString)throw new Error("XML data is accepted in String or Bytes[] form.");h=h.toString()}if(_){_===!0&&(_={});let R=a(h,_);if(R!==!0)throw Error(`${R.err.msg}:${R.err.line}:${R.err.col}`)}let C=new zj(this.options);C.addExternalEntities(this.externalEntities);let v=C.parseXml(h);return this.options.preserveOrder||v===void 0?v:s4(v,this.options)}addEntity(h,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(h.indexOf("&")!==-1||h.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[h]=_}static getMetaDataSymbol(){return Je.getMetaDataSymbol()}}function u4(p,h){let _="";return h.format&&h.indentBy.length>0&&(_=`
`),qb(p,h,"",_)}function qb(p,h,_,C){let v="",R=!1;for(let I=0;I<p.length;I++){let x=p[I],N=l4(x);if(N===void 0)continue;let k="";if(k=_.length===0?N:`${_}.${N}`,N===h.textNodeName){let Ee=x[N];d4(k,h)||(Ee=h.tagValueProcessor(N,Ee),Ee=Fb(Ee,h)),R&&(v+=C),v+=Ee,R=!1;continue}if(N===h.cdataPropName){R&&(v+=C),v+=`<![CDATA[${x[N][0][h.textNodeName]}]]>`,R=!1;continue}if(N===h.commentPropName){v+=C+`<!--${x[N][0][h.textNodeName]}-->`,R=!0;continue}if(N[0]==="?"){let Ee=$b(x[":@"],h),ue=N==="?xml"?"":C,Ze=x[N][0][h.textNodeName];Ze=Ze.length!==0?" "+Ze:"",v+=ue+`<${N}${Ze}${Ee}?>`,R=!0;continue}let Q=C;Q!==""&&(Q+=h.indentBy);let z=C+`<${N}${$b(x[":@"],h)}`,ae=qb(x[N],h,k,Q);h.unpairedTags.indexOf(N)!==-1?h.suppressUnpairedNode?v+=z+">":v+=z+"/>":ae&&ae.length!==0||!h.suppressEmptyNode?ae&&ae.endsWith(">")?v+=z+`>${ae}${C}</${N}>`:(v+=z+">",ae&&C!==""&&(ae.includes("/>")||ae.includes("</"))?v+=C+h.indentBy+ae+C:v+=ae,v+=`</${N}>`):v+=z+"/>",R=!0}return v}function l4(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let C=h[_];if(p.hasOwnProperty(C)&&C!==":@")return C}}function $b(p,h){let _="";if(p&&!h.ignoreAttributes)for(let C in p){if(!p.hasOwnProperty(C))continue;let v=h.attributeValueProcessor(C,p[C]);v=Fb(v,h),v===!0&&h.suppressBooleanAttributes?_+=` ${C.substr(h.attributeNamePrefix.length)}`:_+=` ${C.substr(h.attributeNamePrefix.length)}="${v}"`}return _}function d4(p,h){let _=(p=p.substr(0,p.length-h.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(let C in h.stopNodes)if(h.stopNodes[C]===p||h.stopNodes[C]==="*."+_)return!0;return!1}function Fb(p,h){if(p&&p.length>0&&h.processEntities)for(let _=0;_<h.entities.length;_++){let C=h.entities[_];p=p.replace(C.regex,C.val)}return p}let f4={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Wn(p){this.options=Object.assign({},f4,p),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=Lb(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=m4),this.processTextOrObjNode=p4,this.options.format?(this.indentate=h4,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function p4(p,h,_,C){let v=this.j2x(p,_+1,C.concat(h));return p[this.options.textNodeName]!==void 0&&Object.keys(p).length===1?this.buildTextValNode(p[this.options.textNodeName],h,v.attrStr,_):this.buildObjectNode(v.val,h,v.attrStr,_)}function h4(p){return this.options.indentBy.repeat(p)}function m4(p){return!(!p.startsWith(this.options.attributeNamePrefix)||p===this.options.textNodeName)&&p.substr(this.attrPrefixLen)}Wn.prototype.build=function(p){return this.options.preserveOrder?u4(p,this.options):(Array.isArray(p)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(p={[this.options.arrayNodeName]:p}),this.j2x(p,0,[]).val)},Wn.prototype.j2x=function(p,h,_){let C="",v="",R=_.join(".");for(let I in p)if(Object.prototype.hasOwnProperty.call(p,I))if(p[I]===void 0)this.isAttribute(I)&&(v+="");else if(p[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?v+="":I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(p[I]instanceof Date)v+=this.buildTextValNode(p[I],I,"",h);else if(typeof p[I]!="object"){let x=this.isAttribute(I);if(x&&!this.ignoreAttributesFn(x,R))C+=this.buildAttrPairStr(x,""+p[I]);else if(!x)if(I===this.options.textNodeName){let N=this.options.tagValueProcessor(I,""+p[I]);v+=this.replaceEntitiesValue(N)}else v+=this.buildTextValNode(p[I],I,"",h)}else if(Array.isArray(p[I])){let x=p[I].length,N="",k="";for(let Q=0;Q<x;Q++){let z=p[I][Q];if(z!==void 0)if(z===null)I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(typeof z=="object")if(this.options.oneListGroup){let ae=this.j2x(z,h+1,_.concat(I));N+=ae.val,this.options.attributesGroupName&&z.hasOwnProperty(this.options.attributesGroupName)&&(k+=ae.attrStr)}else N+=this.processTextOrObjNode(z,I,h,_);else if(this.options.oneListGroup){let ae=this.options.tagValueProcessor(I,z);ae=this.replaceEntitiesValue(ae),N+=ae}else N+=this.buildTextValNode(z,I,"",h)}this.options.oneListGroup&&(N=this.buildObjectNode(N,I,k,h)),v+=N}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let x=Object.keys(p[I]),N=x.length;for(let k=0;k<N;k++)C+=this.buildAttrPairStr(x[k],""+p[I][x[k]])}else v+=this.processTextOrObjNode(p[I],I,h,_);return{attrStr:C,val:v}},Wn.prototype.buildAttrPairStr=function(p,h){return h=this.options.attributeValueProcessor(p,""+h),h=this.replaceEntitiesValue(h),this.options.suppressBooleanAttributes&&h==="true"?" "+p:" "+p+'="'+h+'"'},Wn.prototype.buildObjectNode=function(p,h,_,C){if(p==="")return h[0]==="?"?this.indentate(C)+"<"+h+_+"?"+this.tagEndChar:this.indentate(C)+"<"+h+_+this.closeTag(h)+this.tagEndChar;{let v="</"+h+this.tagEndChar,R="";return h[0]==="?"&&(R="?",v=""),!_&&_!==""||p.indexOf("<")!==-1?this.options.commentPropName!==!1&&h===this.options.commentPropName&&R.length===0?this.indentate(C)+`<!--${p}-->`+this.newLine:this.indentate(C)+"<"+h+_+R+this.tagEndChar+p+this.indentate(C)+v:this.indentate(C)+"<"+h+_+R+">"+p+v}},Wn.prototype.closeTag=function(p){let h="";return this.options.unpairedTags.indexOf(p)!==-1?this.options.suppressUnpairedNode||(h="/"):h=this.options.suppressEmptyNode?"/":`></${p}`,h},Wn.prototype.buildTextValNode=function(p,h,_,C){if(this.options.cdataPropName!==!1&&h===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${p}]]>`+this.newLine;if(this.options.commentPropName!==!1&&h===this.options.commentPropName)return this.indentate(C)+`<!--${p}-->`+this.newLine;if(h[0]==="?")return this.indentate(C)+"<"+h+_+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(h,p);return v=this.replaceEntitiesValue(v),v===""?this.indentate(C)+"<"+h+_+this.closeTag(h)+this.tagEndChar:this.indentate(C)+"<"+h+_+">"+v+"</"+h+this.tagEndChar}},Wn.prototype.replaceEntitiesValue=function(p){if(p&&p.length>0&&this.options.processEntities)for(let h=0;h<this.options.entities.length;h++){let _=this.options.entities[h];p=p.replace(_.regex,_.val)}return p};let g4={validate:a};px.exports=e})()});var mx=S(XE=>{"use strict";Object.defineProperty(XE,"__esModule",{value:!0});XE.parseXML=Vz;var jz=hx(),KE=new jz.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});KE.addEntity("#xD","\r");KE.addEntity("#10",`
`);function Vz(t){return KE.parse(t,!0)}});var Ad=S(Cd=>{"use strict";var Wz=mx();function zz(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Gz(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Rd=class{constructor(e){f(this,"value");this.value=e}toString(){return Gz(""+this.value)}},QE=class t{constructor(e,r=[]){f(this,"name");f(this,"children");f(this,"attributes",{});this.name=e,this.children=r}static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new Rd(r)),n!==void 0&&s.withName(n),s}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(e,r,n,s){if(e[r]!=null){let i=s(),o=new t(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${zz(""+i)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(Cd,"parseXML",{enumerable:!0,get:function(){return Wz.parseXML}});Cd.XmlNode=QE;Cd.XmlText=Rd});var gx,yx,Ex,ds,Td=w(()=>{gx=A(Ad());zt();xe();yx=A(se()),Ex=A(dt());as();ds=class extends St{constructor(r){super();f(this,"settings");f(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new Ws(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,s){let i=V.of(r),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(l=>!!l.getMemberTraits().eventPayload)){let l={},d=Object.keys(o)[0];return o[d].isBlobSchema()?l[d]=n:l[d]=this.read(o[d],n),l}let c=(this.serdeContext?.utf8Encoder??Ex.toUtf8)(n),u=this.parseXml(c);return this.readSchema(r,s?u[s]:u)}readSchema(r,n){let s=V.of(r);if(s.isUnitSchema())return;let i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(n))return this.readSchema(s,[n]);if(n==null)return n;if(typeof n=="object"){let o=!!i.sparse,a=!!i.xmlFlattened;if(s.isListSchema()){let u=s.getValueSchema(),l=[],d=u.getMergedTraits().xmlName??"member",m=a?n:(n[0]??n)[d],g=Array.isArray(m)?m:[m];for(let E of g)(E!=null||o)&&l.push(this.readSchema(u,E));return l}let c={};if(s.isMapSchema()){let u=s.getKeySchema(),l=s.getValueSchema(),d;a?d=Array.isArray(n)?n:[n]:d=Array.isArray(n.entry)?n.entry:[n.entry];let m=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let E of d){let b=E[m],P=E[g];(P!=null||o)&&(c[b]=this.readSchema(l,P))}return c}if(s.isStructSchema()){for(let[u,l]of s.structIterator()){let d=l.getMergedTraits(),m=d.httpPayload?d.xmlName??l.getName():l.getMemberTraits().xmlName??u;n[m]!=null&&(c[u]=this.readSchema(l,n[m]))}return c}if(s.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,n)}parseXml(r){if(r.length){let n;try{n=(0,gx.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,yx.getValueFromTextNode)(o)}return{}}}});var Sx,_x,Pd,vx=w(()=>{zt();xe();Wt();Sx=A(se()),_x=A(ft());as();Pd=class extends St{constructor(r){super();f(this,"settings");f(this,"buffer");this.settings=r}write(r,n,s=""){this.buffer===void 0&&(this.buffer="");let i=V.of(r);if(s&&!s.endsWith(".")&&(s+="."),i.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??_x.toBase64)(n)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())n!=null?(this.writeKey(s),this.writeValue(String(n))):i.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,Kr.v4)()));else if(i.isBigIntegerSchema())n!=null&&(this.writeKey(s),this.writeValue(String(n)));else if(i.isBigDecimalSchema())n!=null&&(this.writeKey(s),this.writeValue(n instanceof Ue?n.string:String(n)));else if(i.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(s),tr(i,this.settings)){case 5:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,Sx.dateToUtcString)(n));break;case 7:this.writeValue(String(n.getTime()/1e3));break}}else{if(i.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${i.getName(!0)}`);if(i.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=i.getValueSchema(),a=this.settings.flattenLists||i.getMergedTraits().xmlFlattened,c=1;for(let u of n){if(u==null)continue;let l=this.getKey("member",o.getMergedTraits().xmlName),d=a?`${s}${c}`:`${s}${l}.${c}`;this.write(o,u,d),++c}}}else if(i.isMapSchema()){if(n&&typeof n=="object"){let o=i.getKeySchema(),a=i.getValueSchema(),c=i.getMergedTraits().xmlFlattened,u=1;for(let[l,d]of Object.entries(n)){if(d==null)continue;let m=this.getKey("key",o.getMergedTraits().xmlName),g=c?`${s}${u}.${m}`:`${s}entry.${u}.${m}`,E=this.getKey("value",a.getMergedTraits().xmlName),b=c?`${s}${u}.${E}`:`${s}entry.${u}.${E}`;this.write(o,l,g),this.write(a,d,b),++u}}}else if(i.isStructSchema()){if(n&&typeof n=="object")for(let[o,a]of i.structIterator()){if(n[o]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(o,a.getMergedTraits().xmlName),u=`${s}${c}`;this.write(a,n[o],u)}}else if(!i.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let s=n??r;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${Vr(r)}=`}writeValue(r){this.buffer+=Vr(r)}}});var Zi,YE=w(()=>{zt();xe();Ki();Td();vx();Zi=class extends fn{constructor(r){super({defaultNamespace:r.defaultNamespace});f(this,"options");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new ar);this.options=r;let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Pd(n),this.deserializer=new ds(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),(Tr(r.input)==="unit"||!i.body)&&(i.body="");let o=r.name.split("#")[1]??r.name;return i.body=`Action=${o}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(r,n,s){let i=this.deserializer,o=V.of(r.output),a={};if(s.statusCode>=300){let m=await Ar(s.body,n);m.byteLength>0&&Object.assign(a,await i.read(15,m)),await this.handleError(r,n,s,a,this.deserializeMetadata(s))}for(let m in s.headers){let g=s.headers[m];delete s.headers[m],s.headers[m.toLowerCase()]=g}let c=r.name.split("#")[1]??r.name,u=o.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,l=await Ar(s.body,n);return l.byteLength>0&&Object.assign(a,await i.read(o,l,u)),{$metadata:this.deserializeMetadata(s),...a}}useNestedResult(){return!0}async handleError(r,n,s,i,o){let a=this.loadQueryErrorCode(s,i)??"Unknown",c=this.loadQueryError(i),u=this.loadQueryErrorMessage(i);c.message=u,c.Error={Type:c.Type,Code:c.Code,Message:u};let{errorSchema:l,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,c,o,(P,T)=>{try{return P.getSchema(T)}catch{return P.find(M=>V.of(M).getMergedTraits().awsQueryError?.[0]===T)}}),m=V.of(l),g=le.for(l[1]).getErrorCtor(l)??Error,E=new g(u),b={Error:c.Error};for(let[P,T]of m.structIterator()){let O=T.getMergedTraits().xmlName??P,M=c[O]??i[O];b[P]=this.deserializer.readSchema(T,M)}throw Object.assign(E,d,{$fault:m.getMergedTraits().error,message:u},b)}loadQueryErrorCode(r,n){let s=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(s!==void 0)return s;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var xd,wx=w(()=>{YE();xd=class extends Zi{constructor(r){super(r);f(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var bx,Rx,eo,Id,Od,JE=w(()=>{bx=A(Ad()),Rx=A(se());WE();eo=(t,e)=>Ed(t,e).then(r=>{if(r.length){let n;try{n=(0,bx.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,Rx.getValueFromTextNode)(o)}return{}}),Id=async(t,e)=>{let r=await eo(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Od=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var cr,ZE,Nd,to,eS=w(()=>{cr=A(Ad());zt();xe();Wt();ZE=A(se()),Nd=A(ft());as();to=class extends St{constructor(r){super();f(this,"settings");f(this,"stringBuffer");f(this,"byteBuffer");f(this,"buffer");this.settings=r}write(r,n){let s=V.of(r);if(s.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(s.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??Nd.fromBase64)(n);else{this.buffer=this.writeStruct(s,n,void 0);let i=s.getMergedTraits();i.httpPayload&&!i.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,s){let i=r.getMergedTraits(),o=r.isMemberSchema()&&!i.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():i.xmlName??r.getName();if(!o||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=cr.XmlNode.of(o),[c,u]=this.getXmlnsAttribute(r,s);for(let[l,d]of r.structIterator()){let m=n[l];if(m!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){a.addAttribute(d.getMergedTraits().xmlName??l,this.writeSimple(d,m));continue}if(d.isListSchema())this.writeList(d,m,a,u);else if(d.isMapSchema())this.writeMap(d,m,a,u);else if(d.isStructSchema())a.addChildNode(this.writeStruct(d,m,u));else{let g=cr.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,m,g,u),a.addChildNode(g)}}}return u&&a.addAttribute(c,u),a}writeList(r,n,s,i){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let o=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),u=!!c.sparse,l=!!o.xmlFlattened,[d,m]=this.getXmlnsAttribute(r,i),g=(E,b)=>{if(a.isListSchema())this.writeList(a,Array.isArray(b)?b:[b],E,m);else if(a.isMapSchema())this.writeMap(a,b,E,m);else if(a.isStructSchema()){let P=this.writeStruct(a,b,m);E.addChildNode(P.withName(l?o.xmlName??r.getMemberName():c.xmlName??"member"))}else{let P=cr.XmlNode.of(l?o.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,b,P,m),E.addChildNode(P)}};if(l)for(let E of n)(u||E!=null)&&g(s,E);else{let E=cr.XmlNode.of(o.xmlName??r.getMemberName());m&&E.addAttribute(d,m);for(let b of n)(u||b!=null)&&g(E,b);s.addChildNode(E)}}writeMap(r,n,s,i,o=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),l=c.getMergedTraits().xmlName??"key",d=r.getValueSchema(),m=d.getMergedTraits(),g=m.xmlName??"value",E=!!m.sparse,b=!!a.xmlFlattened,[P,T]=this.getXmlnsAttribute(r,i),O=(M,q,B)=>{let ce=cr.XmlNode.of(l,q),[Je,ie]=this.getXmlnsAttribute(c,T);ie&&ce.addAttribute(Je,ie),M.addChildNode(ce);let Z=cr.XmlNode.of(g);d.isListSchema()?this.writeList(d,B,Z,T):d.isMapSchema()?this.writeMap(d,B,Z,T,!0):d.isStructSchema()?Z=this.writeStruct(d,B,T):this.writeSimpleInto(d,B,Z,T),M.addChildNode(Z)};if(b){for(let[M,q]of Object.entries(n))if(E||q!=null){let B=cr.XmlNode.of(a.xmlName??r.getMemberName());O(B,M,q),s.addChildNode(B)}}else{let M;o||(M=cr.XmlNode.of(a.xmlName??r.getMemberName()),T&&M.addAttribute(P,T),s.addChildNode(M));for(let[q,B]of Object.entries(n))if(E||B!=null){let ce=cr.XmlNode.of("entry");O(ce,q,B),(o?s:M).addChildNode(ce)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=V.of(r),i=null;if(n&&typeof n=="object")if(s.isBlobSchema())i=(this.serdeContext?.base64Encoder??Nd.toBase64)(n);else if(s.isTimestampSchema()&&n instanceof Date)switch(tr(s,this.settings)){case 5:i=n.toISOString().replace(".000Z","Z");break;case 6:i=(0,ZE.dateToUtcString)(n);break;case 7:i=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),i=(0,ZE.dateToUtcString)(n);break}else{if(s.isBigDecimalSchema()&&n)return n instanceof Ue?n.string:String(n);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(n)),s.isStringSchema()&&(n===void 0&&s.isIdempotencyToken()?i=(0,Kr.v4)():i=String(n)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${n}`);return i}writeSimpleInto(r,n,s,i){let o=this.writeSimple(r,n),a=V.of(r),c=new cr.XmlText(o),[u,l]=this.getXmlnsAttribute(a,i);l&&s.addAttribute(u,l),s.addChildNode(c)}getXmlnsAttribute(r,n){let s=r.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==n?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}});var ro,tS=w(()=>{as();Td();eS();ro=class extends St{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new to(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new ds(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Dd,Cx=w(()=>{zt();xe();Ki();JE();tS();Dd=class extends Vs{constructor(r){super(r);f(this,"codec");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new ar);let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new ro(n),this.serializer=new Gs(this.codec.createSerializer(),n),this.deserializer=new zs(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=V.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]===this.getDefaultContentType()&&typeof i.body=="string"&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=Od(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.Error?.message??i.Error?.Message??i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[b,P]of l.structIterator()){let T=P.getMergedTraits().xmlName??b,O=i.Error?.[T]??i[T];E[b]=this.codec.createDeserializer().readSchema(P,O)}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/xml"}}});var rS={};xt(rS,{AwsEc2QueryProtocol:()=>xd,AwsJson1_0Protocol:()=>wd,AwsJson1_1Protocol:()=>bd,AwsJsonRpcProtocol:()=>ls,AwsQueryProtocol:()=>Zi,AwsRestJsonProtocol:()=>Ji,AwsRestXmlProtocol:()=>Dd,AwsSmithyRpcV2CborProtocol:()=>gd,JsonCodec:()=>us,JsonShapeDeserializer:()=>Qi,JsonShapeSerializer:()=>Yi,XmlCodec:()=>ro,XmlShapeDeserializer:()=>ds,XmlShapeSerializer:()=>to,_toBool:()=>kP,_toNum:()=>qP,_toStr:()=>MP,awsExpectUnion:()=>dx,loadRestJsonErrorCode:()=>Xi,loadRestXmlErrorCode:()=>Od,parseJsonBody:()=>Za,parseJsonErrorBody:()=>rx,parseXmlBody:()=>eo,parseXmlErrorBody:()=>Id});var tc=w(()=>{LP();$P();ax();cx();vd();ux();_d();zE();GE();fx();ec();wx();YE();Cx();tS();Td();eS();JE()});var Sn={};xt(Sn,{AWSSDKSigV4Signer:()=>Zy,AwsEc2QueryProtocol:()=>xd,AwsJson1_0Protocol:()=>wd,AwsJson1_1Protocol:()=>bd,AwsJsonRpcProtocol:()=>ls,AwsQueryProtocol:()=>Zi,AwsRestJsonProtocol:()=>Ji,AwsRestXmlProtocol:()=>Dd,AwsSdkSigV4ASigner:()=>Ka,AwsSdkSigV4Signer:()=>Kt,AwsSmithyRpcV2CborProtocol:()=>gd,JsonCodec:()=>us,JsonShapeDeserializer:()=>Qi,JsonShapeSerializer:()=>Yi,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Vi,NODE_SIGV4A_CONFIG_OPTIONS:()=>WT,XmlCodec:()=>ro,XmlShapeDeserializer:()=>ds,XmlShapeSerializer:()=>to,_toBool:()=>kP,_toNum:()=>qP,_toStr:()=>MP,awsExpectUnion:()=>dx,emitWarningIfUnsupportedVersion:()=>Bi,getBearerTokenEnvKey:()=>Jl,loadRestJsonErrorCode:()=>Xi,loadRestXmlErrorCode:()=>Od,parseJsonBody:()=>Za,parseJsonErrorBody:()=>rx,parseXmlBody:()=>eo,parseXmlErrorBody:()=>Id,resolveAWSSDKSigV4Config:()=>gP,resolveAwsSdkSigV4AConfig:()=>VT,resolveAwsSdkSigV4Config:()=>ei,setCredentialFeature:()=>es,setFeature:()=>PT,setTokenFeature:()=>IT,state:()=>Yl,validateSigningProperties:()=>ji});var _t=w(()=>{xr();EE();tc()});var so=S(no=>{"use strict";var Kz=(Gt(),re(Xs)),Xz=Ui(),Qz=we(),Qr=(_t(),re(Sn)),xx=void 0;function Yz(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function Jz(t){let e=Kz.normalizeProvider(t.userAgentAppId??xx),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!Yz(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var Zz=/\d{12}\.ddb/;async function eG(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Qr.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Qr.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):Qr.setFeature(t,"RETRY_MODE_STANDARD","E"):Qr.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let i=t.endpointV2;switch(String(i?.url?.hostname).match(Zz)&&Qr.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":Qr.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Qr.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Qr.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&Qr.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))Qr.setFeature(t,o,a)}}var Ax="user-agent",nS="x-amz-user-agent",Tx=" ",sS="/",tG=/[^!$%&'*+\-.^_`|~\w]/g,rG=/[^!$%&'*+\-.^_`|~\w#]/g,Px="-",nG=1024;function sG(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=nG){e.length?e+=","+n:e+=n;continue}break}return e}var Ix=t=>(e,r)=>async n=>{let{request:s}=n;if(!Qz.HttpRequest.isInstance(s))return e(n);let{headers:i}=s,o=r?.userAgent?.map(Ld)||[],a=(await t.defaultUserAgentProvider()).map(Ld);await eG(r,t,n);let c=r;a.push(`m/${sG(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Ld)||[],l=await t.userAgentAppId();l&&a.push(Ld(["app",`${l}`]));let d=Xz.getUserAgentPrefix(),m=(d?[d]:[]).concat([...a,...o,...u]).join(Tx),g=[...a.filter(E=>E.startsWith("aws-sdk-")),...u].join(Tx);return t.runtime!=="browser"?(g&&(i[nS]=i[nS]?`${i[Ax]} ${g}`:g),i[Ax]=m):i[nS]=m,e({...n,request:s})},Ld=t=>{let e=t[0].split(sS).map(o=>o.replace(tG,Px)).join(sS),r=t[1]?.replace(rG,Px),n=e.indexOf(sS),s=e.substring(0,n),i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},Ox={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},iG=t=>({applyToStack:e=>{e.add(Ix(t),Ox)}});no.DEFAULT_UA_APP_ID=xx;no.getUserAgentMiddlewareOptions=Ox;no.getUserAgentPlugin=iG;no.resolveUserAgentConfig=Jz;no.userAgentMiddleware=Ix});var iS=S(io=>{"use strict";var oG=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},aG=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};io.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(io.SelectorType||(io.SelectorType={}));io.booleanSelector=oG;io.numberSelector=aG});var ur=S(pt=>{"use strict";var fs=iS(),Md=It(),cG=Ys(),Lx="AWS_USE_DUALSTACK_ENDPOINT",Mx="use_dualstack_endpoint",uG=!1,lG={environmentVariableSelector:t=>fs.booleanSelector(t,Lx,fs.SelectorType.ENV),configFileSelector:t=>fs.booleanSelector(t,Mx,fs.SelectorType.CONFIG),default:!1},kx="AWS_USE_FIPS_ENDPOINT",qx="use_fips_endpoint",dG=!1,fG={environmentVariableSelector:t=>fs.booleanSelector(t,kx,fs.SelectorType.ENV),configFileSelector:t=>fs.booleanSelector(t,qx,fs.SelectorType.CONFIG),default:!1},pG=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:Md.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Md.normalizeProvider(s??!1)})},hG=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:o}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${o}`)},mG=t=>{let e=Md.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=t;return Object.assign(t,{tls:i??!0,endpoint:r?Md.normalizeProvider(typeof r=="string"?s(r):r):()=>hG({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},$x="AWS_REGION",Fx="region",gG={environmentVariableSelector:t=>t[$x],configFileSelector:t=>t[Fx],default:()=>{throw new Error("Region is missing")}},yG={preferredFile:"credentials"},Nx=new Set,EG=(t,e=cG.isValidHostLabel)=>{if(!Nx.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Nx.add(t)},Ux=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),SG=t=>Ux(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,_G=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=SG(n);return EG(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return Ux(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},Dx=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,vG=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),wG=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",bG=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(s);if(i)return i[0].slice(1,-1)}},RG=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=wG(t,{partitionHash:i}),a=t in s?t:i[o]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=Dx(s[a]?.variants,c),l=Dx(i[o]?.variants,c),d=vG(a,{regionHostname:u,partitionHostname:l});if(d===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let m=bG(d,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:e});return{partition:o,signingService:n,hostname:d,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};pt.CONFIG_USE_DUALSTACK_ENDPOINT=Mx;pt.CONFIG_USE_FIPS_ENDPOINT=qx;pt.DEFAULT_USE_DUALSTACK_ENDPOINT=uG;pt.DEFAULT_USE_FIPS_ENDPOINT=dG;pt.ENV_USE_DUALSTACK_ENDPOINT=Lx;pt.ENV_USE_FIPS_ENDPOINT=kx;pt.NODE_REGION_CONFIG_FILE_OPTIONS=yG;pt.NODE_REGION_CONFIG_OPTIONS=gG;pt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=lG;pt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=fG;pt.REGION_ENV_NAME=$x;pt.REGION_INI_NAME=Fx;pt.getRegionInfo=RG;pt.resolveCustomEndpointsConfig=pG;pt.resolveEndpointsConfig=mG;pt.resolveRegionConfig=_G});var rc=S(kd=>{"use strict";var CG=we(),Bx="content-length";function Hx(t){return e=>async r=>{let n=r.request;if(CG.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Bx)===-1)try{let o=t(s);n.headers={...n.headers,[Bx]:String(o)}}catch{}}return e({...r,request:n})}}var jx={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},AG=t=>({applyToStack:e=>{e.add(Hx(t.bodyLengthChecker),jx)}});kd.contentLengthMiddleware=Hx;kd.contentLengthMiddlewareOptions=jx;kd.getContentLengthPlugin=AG});var aS=S(qd=>{"use strict";Object.defineProperty(qd,"__esModule",{value:!0});qd.getHomeDir=void 0;var TG=require("os"),PG=require("path"),oS={},xG=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",IG=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${PG.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=xG();return oS[s]||(oS[s]=(0,TG.homedir)()),oS[s]};qd.getHomeDir=IG});var cS=S($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.getSSOTokenFilepath=void 0;var OG=require("crypto"),NG=require("path"),DG=aS(),LG=t=>{let r=(0,OG.createHash)("sha1").update(t).digest("hex");return(0,NG.join)((0,DG.getHomeDir)(),".aws","sso","cache",`${r}.json`)};$d.getSSOTokenFilepath=LG});var Vx=S(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.getSSOTokenFromFile=ps.tokenIntercept=void 0;var MG=require("fs/promises"),kG=cS();ps.tokenIntercept={};var qG=async t=>{if(ps.tokenIntercept[t])return ps.tokenIntercept[t];let e=(0,kG.getSSOTokenFilepath)(t),r=await(0,MG.readFile)(e,"utf8");return JSON.parse(r)};ps.getSSOTokenFromFile=qG});var Wx=S(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.readFile=rr.fileIntercept=rr.filePromises=void 0;var $G=require("fs/promises");rr.filePromises={};rr.fileIntercept={};var FG=(t,e)=>rr.fileIntercept[t]!==void 0?rr.fileIntercept[t]:((!rr.filePromises[t]||e?.ignoreCache)&&(rr.filePromises[t]=(0,$G.readFile)(t,"utf8")),rr.filePromises[t]);rr.readFile=FG});var _n=S(Mt=>{"use strict";var nc=aS(),zx=cS(),uS=Vx(),Fd=require("path"),Ud=cn(),oo=Wx(),Kx="AWS_PROFILE",Xx="default",UG=t=>t.profile||process.env[Kx]||Xx,ri=".",BG=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(ri);return r===-1?!1:Object.values(Ud.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(ri),i=r.substring(0,s)===Ud.IniSectionType.PROFILE?r.substring(s+1):r;return e[i]=n,e},{...t.default&&{default:t.default}}),HG="AWS_CONFIG_FILE",Qx=()=>process.env[HG]||Fd.join(nc.getHomeDir(),".aws","config"),jG="AWS_SHARED_CREDENTIALS_FILE",VG=()=>process.env[jG]||Fd.join(nc.getHomeDir(),".aws","credentials"),WG=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,zG=["__proto__","profile __proto__"],lS=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=WG.exec(a);if(c){let[,u,,l]=c;Object.values(Ud.IniSectionType).includes(u)&&(r=[u,l].join(ri))}else r=a;if(zG.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let l=n?[n,c].join(ri):c;e[r][l]=u}}}}return e},Gx=()=>({}),Yx=async(t={})=>{let{filepath:e=VG(),configFilepath:r=Qx()}=t,n=nc.getHomeDir(),s="~/",i=e;e.startsWith(s)&&(i=Fd.join(n,e.slice(2)));let o=r;r.startsWith(s)&&(o=Fd.join(n,r.slice(2)));let a=await Promise.all([oo.readFile(o,{ignoreCache:t.ignoreCache}).then(lS).then(BG).catch(Gx),oo.readFile(i,{ignoreCache:t.ignoreCache}).then(lS).catch(Gx)]);return{configFile:a[0],credentialsFile:a[1]}},GG=t=>Object.entries(t).filter(([e])=>e.startsWith(Ud.IniSectionType.SSO_SESSION+ri)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(ri)+1)]:n}),{}),KG=()=>({}),XG=async(t={})=>oo.readFile(t.configFilepath??Qx()).then(lS).then(GG).catch(KG),QG=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},YG=async t=>{let e=await Yx(t);return QG(e.configFile,e.credentialsFile)},JG={getFileRecord(){return oo.fileIntercept},interceptFile(t,e){oo.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return uS.tokenIntercept},interceptToken(t,e){uS.tokenIntercept[t]=e}};Object.defineProperty(Mt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return uS.getSSOTokenFromFile}});Object.defineProperty(Mt,"readFile",{enumerable:!0,get:function(){return oo.readFile}});Mt.CONFIG_PREFIX_SEPARATOR=ri;Mt.DEFAULT_PROFILE=Xx;Mt.ENV_PROFILE=Kx;Mt.externalDataInterceptor=JG;Mt.getProfileName=UG;Mt.loadSharedConfigFiles=Yx;Mt.loadSsoSessionData=XG;Mt.parseKnownFiles=YG;Object.keys(nc).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Mt,t)&&Object.defineProperty(Mt,t,{enumerable:!0,get:function(){return nc[t]}})});Object.keys(zx).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Mt,t)&&Object.defineProperty(Mt,t,{enumerable:!0,get:function(){return zx[t]}})})});var vn=S(eI=>{"use strict";var sc=Lt(),Jx=_n();function Zx(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var ZG=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new sc.CredentialsProviderError(r.message||`Not found in ENV: ${Zx(t.toString())}`,{logger:e?.logger})}},e6=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=Jx.getProfileName(r),{configFile:s,credentialsFile:i}=await Jx.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=e==="config"?{...o,...a}:{...a,...o};try{let l=t(c,e==="config"?s:i);if(l===void 0)throw new Error;return l}catch(u){throw new sc.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${Zx(t.toString())}`,{logger:r.logger})}},t6=t=>typeof t=="function",r6=t=>t6(t)?async()=>await t():sc.fromStatic(t),n6=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return sc.memoize(sc.chain(ZG(t,o),e6(e,n),r6(r)))};eI.loadConfig=n6});var sI=S(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.getEndpointUrlConfig=void 0;var tI=_n(),rI="AWS_ENDPOINT_URL",nI="endpoint_url",s6=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),n=e[[rI,...r].join("_")];if(n)return n;let s=e[rI];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(tI.CONFIG_PREFIX_SEPARATOR)];if(s){let i=t.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),nI].join(tI.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=e[nI];if(n)return n},default:void 0});Bd.getEndpointUrlConfig=s6});var iI=S(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.getEndpointFromConfig=void 0;var i6=vn(),o6=sI(),a6=async t=>(0,i6.loadConfig)((0,o6.getEndpointUrlConfig)(t??""))();Hd.getEndpointFromConfig=a6});var bn=S(wn=>{"use strict";var aI=iI(),oI=Zn(),c6=(Gt(),re(Xs)),jd=It(),u6=Pa(),l6=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),m6(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!h6(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},d6=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,f6=/(\d+\.){3}\d+/,p6=/\.\./,h6=t=>d6.test(t)&&!f6.test(t)&&!p6.test(t),m6=t=>{let[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},g6=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},dS=t=>typeof t=="object"?"url"in t?oI.parseUrl(t.url):t:oI.parseUrl(t),cI=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await aI.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(dS(o)),r.isCustomEndpoint=!0)}let s=await uI(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},uI=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await g6(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await l6(n),n},lI=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&c6.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await cI(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=jd.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},dI={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:u6.serializerMiddlewareOption.name},y6=(t,e)=>({applyToStack:r=>{r.addRelativeTo(lI({config:t,instructions:e}),dI)}}),E6=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>dS(await jd.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:jd.normalizeProvider(n??!1),useFipsEndpoint:jd.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=aI.getEndpointFromConfig(t.serviceId)),c),a},S6=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};wn.endpointMiddleware=lI;wn.endpointMiddlewareOptions=dI;wn.getEndpointFromInstructions=cI;wn.getEndpointPlugin=y6;wn.resolveEndpointConfig=E6;wn.resolveEndpointRequiredConfig=S6;wn.resolveParams=uI;wn.toEndpointV1=dS});var pS=S(hs=>{"use strict";var _6=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],v6=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],w6=["TimeoutError","RequestTimeout","RequestTimeoutException"],b6=[500,502,503,504],R6=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],C6=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],fI=t=>t?.$retryable!==void 0,A6=t=>_6.includes(t.name),pI=t=>t.$metadata?.clockSkewCorrected,hI=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},T6=t=>t.$metadata?.httpStatusCode===429||v6.includes(t.name)||t.$retryable?.throttling==!0,fS=(t,e=0)=>fI(t)||pI(t)||w6.includes(t.name)||R6.includes(t?.code||"")||C6.includes(t?.code||"")||b6.includes(t.$metadata?.httpStatusCode||0)||hI(t)||t.cause!==void 0&&e<=10&&fS(t.cause,e+1),P6=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!fS(t)}return!1};hs.isBrowserNetworkError=hI;hs.isClockSkewCorrectedError=pI;hs.isClockSkewError=A6;hs.isRetryableByTrait=fI;hs.isServerError=P6;hs.isThrottlingError=T6;hs.isTransientError=fS});var ao=S(We=>{"use strict";var x6=pS();We.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(We.RETRY_MODES||(We.RETRY_MODES={}));var hS=3,I6=We.RETRY_MODES.STANDARD,Wd=class Wd{constructor(e){f(this,"beta");f(this,"minCapacity");f(this,"minFillRate");f(this,"scaleConstant");f(this,"smooth");f(this,"currentCapacity",0);f(this,"enabled",!1);f(this,"lastMaxRate",0);f(this,"measuredTxRate",0);f(this,"requestCount",0);f(this,"fillRate");f(this,"lastThrottleTime");f(this,"lastTimestamp",0);f(this,"lastTxRateBucket");f(this,"maxCapacity");f(this,"timeWindow",0);this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Wd.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),x6.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};f(Wd,"setTimeoutFn",setTimeout);var Vd=Wd,ic=100,ES=20*1e3,gI=500,mS=500,yI=5,EI=10,SI=1,O6="amz-sdk-invocation-id",N6="amz-sdk-request",D6=()=>{let t=ic;return{computeNextBackoffDelay:n=>Math.floor(Math.min(ES,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},mI=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(ES,t),getRetryCost:()=>r}),oc=class{constructor(e){f(this,"maxAttempts");f(this,"mode",We.RETRY_MODES.STANDARD);f(this,"capacity",mS);f(this,"retryBackoffStrategy",D6());f(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return mI({retryDelay:ic,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?gI:ic);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,mI({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(mS,this.capacity+(e.getRetryCost()??SI))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${hS}`),hS}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?EI:yI}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},gS=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"rateLimiter");f(this,"standardRetryStrategy");f(this,"mode",We.RETRY_MODES.ADAPTIVE);this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Vd,this.standardRetryStrategy=new oc(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},yS=class extends oc{constructor(r,n=ic){super(typeof r=="function"?r:async()=>r);f(this,"computeNextBackoffDelay");typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(r,n){let s=await super.refreshRetryTokenForRetry(r,n);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};We.AdaptiveRetryStrategy=gS;We.ConfiguredRetryStrategy=yS;We.DEFAULT_MAX_ATTEMPTS=hS;We.DEFAULT_RETRY_DELAY_BASE=ic;We.DEFAULT_RETRY_MODE=I6;We.DefaultRateLimiter=Vd;We.INITIAL_RETRY_TOKENS=mS;We.INVOCATION_ID_HEADER=O6;We.MAXIMUM_RETRY_DELAY=ES;We.NO_RETRY_INCREMENT=SI;We.REQUEST_HEADER=N6;We.RETRY_COST=yI;We.StandardRetryStrategy=oc;We.THROTTLING_RETRY_DELAY_BASE=gI;We.TIMEOUT_RETRY_COST=EI});var _I=S(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.isStreamingPayload=void 0;var L6=require("stream"),M6=t=>t?.body instanceof L6.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;zd.isStreamingPayload=M6});var Rn=S(rt=>{"use strict";var Be=ao(),co=we(),ms=pS(),wI=vy(),vI=It(),k6=se(),q6=_I(),$6=(t,e)=>{let r=t,n=Be.NO_RETRY_INCREMENT,s=Be.RETRY_COST,i=Be.TIMEOUT_RETRY_COST,o=t,a=d=>d.name==="TimeoutError"?i:s,c=d=>a(d)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");let m=a(d);return o-=m,m},releaseRetryTokens:d=>{o+=d??n,o=Math.min(o,r)}})},bI=(t,e)=>Math.floor(Math.min(Be.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),RI=t=>t?ms.isRetryableByTrait(t)||ms.isClockSkewError(t)||ms.isThrottlingError(t)||ms.isTransientError(t):!1,CI=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Gd=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"retryDecider");f(this,"delayDecider");f(this,"retryQuota");f(this,"mode",Be.RETRY_MODES.STANDARD);this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??RI,this.delayDecider=r?.delayDecider??bI,this.retryQuota=r?.retryQuota??$6(Be.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Be.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(co.HttpRequest.isInstance(c)&&(c.headers[Be.INVOCATION_ID_HEADER]=wI.v4());;)try{co.HttpRequest.isInstance(c)&&(c.headers[Be.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,{response:u,output:l}}catch(u){let l=CI(u);if(i++,this.shouldRetry(l,i,a)){s=this.retryQuota.retrieveRetryTokens(l);let d=this.delayDecider(ms.isThrottlingError(l)?Be.THROTTLING_RETRY_DELAY_BASE:Be.DEFAULT_RETRY_DELAY_BASE,i),m=F6(l.$response),g=Math.max(m||0,d);o+=g,await new Promise(E=>setTimeout(E,g));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=i,l.$metadata.totalRetryDelay=o,l}}},F6=t=>{if(!co.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},SS=class extends Gd{constructor(r,n){let{rateLimiter:s,...i}=n??{};super(r,i);f(this,"rateLimiter");this.rateLimiter=s??new Be.DefaultRateLimiter,this.mode=Be.RETRY_MODES.ADAPTIVE}async retry(r,n){return super.retry(r,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},_S="AWS_MAX_ATTEMPTS",vS="max_attempts",U6={environmentVariableSelector:t=>{let e=t[_S];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${_S} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[vS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${vS} mast be a number, got "${e}"`);return r},default:Be.DEFAULT_MAX_ATTEMPTS},B6=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=vI.normalizeProvider(n??Be.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await vI.normalizeProvider(r)()===Be.RETRY_MODES.ADAPTIVE?new Be.AdaptiveRetryStrategy(s):new Be.StandardRetryStrategy(s))})},AI="AWS_RETRY_MODE",TI="retry_mode",H6={environmentVariableSelector:t=>t[AI],configFileSelector:t=>t[TI],default:Be.DEFAULT_RETRY_MODE},PI=()=>t=>async e=>{let{request:r}=e;return co.HttpRequest.isInstance(r)&&(delete r.headers[Be.INVOCATION_ID_HEADER],delete r.headers[Be.REQUEST_HEADER]),t(e)},xI={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},j6=t=>({applyToStack:e=>{e.addRelativeTo(PI(),xI)}}),II=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),i=await t.maxAttempts();if(V6(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,d=co.HttpRequest.isInstance(l);for(d&&(l.headers[Be.INVOCATION_ID_HEADER]=wI.v4());;)try{d&&(l.headers[Be.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:m,output:g}=await e(n);return s.recordSuccess(o),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=u,{response:m,output:g}}catch(m){let g=W6(m);if(a=CI(m),d&&q6.isStreamingPayload(l))throw(r.logger instanceof k6.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let E=o.getRetryDelay();u+=E,await new Promise(b=>setTimeout(b,E))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},V6=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",W6=t=>{let e={error:t,errorType:z6(t)},r=NI(t.$response);return r&&(e.retryAfterHint=r),e},z6=t=>ms.isThrottlingError(t)?"THROTTLING":ms.isTransientError(t)?"TRANSIENT":ms.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",OI={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},G6=t=>({applyToStack:e=>{e.add(II(t),OI)}}),NI=t=>{if(!co.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};rt.AdaptiveRetryStrategy=SS;rt.CONFIG_MAX_ATTEMPTS=vS;rt.CONFIG_RETRY_MODE=TI;rt.ENV_MAX_ATTEMPTS=_S;rt.ENV_RETRY_MODE=AI;rt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=U6;rt.NODE_RETRY_MODE_CONFIG_OPTIONS=H6;rt.StandardRetryStrategy=Gd;rt.defaultDelayDecider=bI;rt.defaultRetryDecider=RI;rt.getOmitRetryHeadersPlugin=j6;rt.getRetryAfterHint=NI;rt.getRetryPlugin=G6;rt.omitRetryHeadersMiddleware=PI;rt.omitRetryHeadersMiddlewareOptions=xI;rt.resolveRetryConfig=B6;rt.retryMiddleware=II;rt.retryMiddlewareOptions=OI});var MI=S((DTe,LI)=>{"use strict";var Kd=Object.defineProperty,K6=Object.getOwnPropertyDescriptor,X6=Object.getOwnPropertyNames,Q6=Object.prototype.hasOwnProperty,wS=(t,e)=>Kd(t,"name",{value:e,configurable:!0}),Y6=(t,e)=>{for(var r in e)Kd(t,r,{get:e[r],enumerable:!0})},J6=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of X6(e))!Q6.call(t,s)&&s!==r&&Kd(t,s,{get:()=>e[s],enumerable:!(n=K6(e,s))||n.enumerable});return t},Z6=t=>J6(Kd({},"__esModule",{value:!0}),t),DI={};Y6(DI,{build:()=>rK,parse:()=>tK,validate:()=>eK});LI.exports=Z6(DI);var eK=wS(t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6,"validate"),tK=wS(t=>{let e=t.split(":");if(e.length<6||e[0]!=="arn")throw new Error("Malformed ARN");let[,r,n,s,i,...o]=e;return{partition:r,service:n,region:s,accountId:i,resource:o.join(":")}},"parse"),rK=wS(t=>{let{partition:e="aws",service:r,region:n,accountId:s,resource:i}=t;if([r,n,s,i].some(o=>typeof o!="string"))throw new Error("Input ARN object is invalid");return`arn:${e}:${r}:${n}:${s}:${i}`},"build")});var rO=S(ge=>{"use strict";var ac=we(),FI=se(),nK=od(),Xd=iS(),sK=(_t(),re(Sn)),UI=(Gt(),re(Xs));cn();var iK=It(),kI=Na(),oK=MI(),aK="content-length",cK="x-amz-decoded-content-length";function BI(){return(t,e)=>async r=>{let{request:n}=r;if(ac.HttpRequest.isInstance(n)&&!(aK in n.headers)&&!(cK in n.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof FI.NoOpLogger)?e.logger.warn(s):console.warn(s)}return t({...r})}}var HI={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},uK=t=>({applyToStack:e=>{e.add(BI(),HI)}}),jI=t=>(e,r)=>async n=>{let s=await t.region(),i=t.region,o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{let a=await e(n);if(r.__s3RegionRedirect){o();let c=await t.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},VI={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function WI(t){return(e,r)=>async n=>{try{return await e(n)}catch(s){if(t.followRegionRedirects){let i=s?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=s?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(s?.name==="IllegalLocationConstraintException"||o))){try{let c=a;r.logger?.debug(`Redirecting from ${await t.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return e(n)}}throw s}}}var zI={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},lK=t=>({applyToStack:e=>{e.add(WI(t),zI),e.addRelativeTo(jI(t),VI)}}),GI=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(ac.HttpResponse.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{FI.parseRfc7231DateTime(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return s},KI={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},dK=t=>({applyToStack:e=>{e.addRelativeTo(GI(),KI)}}),Jd=class Jd{constructor(e={}){f(this,"data");f(this,"lastPurgeTime",Date.now());this.data=e}get(e){let r=this.data[e];if(r)return r}set(e,r){return this.data[e]=r,r}delete(e){delete this.data[e]}async purgeExpired(){let e=Date.now();if(!(this.lastPurgeTime+Jd.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let s=await n.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[r]}}}};f(Jd,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);var Qd=Jd,uo=class{constructor(e,r=!1,n=Date.now()){f(this,"_identity");f(this,"isRefreshing");f(this,"accessed");this._identity=e,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}},Zd=class Zd{constructor(e,r=new Qd){f(this,"createSessionFn");f(this,"cache");this.createSessionFn=e,this.cache=r}async getS3ExpressIdentity(e,r){let n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?s.set(n,new uo(this.getIdentity(n))).identity:((o.expiration?.getTime()??0)<Date.now()+Zd.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(u=>{s.set(n,new uo(Promise.resolve(u)))})),o)):s.set(n,new uo(this.getIdentity(n))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});let r=await this.createSessionFn(e);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};f(Zd,"REFRESH_WINDOW_MS",6e4);var Yd=Zd,fK="Directory",pK="S3Express",hK="sigv4-s3express",bS="X-Amz-S3session-Token",RS=bS.toLowerCase(),mK="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",gK="s3_disable_express_session_auth",yK={environmentVariableSelector:t=>Xd.booleanSelector(t,mK,Xd.SelectorType.ENV),configFileSelector:t=>Xd.booleanSelector(t,gK,Xd.SelectorType.CONFIG),default:!1},CS=class extends nK.SignatureV4{async signWithCredentials(e,r,n){let s=qI(r);e.headers[RS]=r.sessionToken;let i=this;return $I(i,s),i.signRequest(e,n??{})}async presignWithCredentials(e,r,n){let s=qI(r);return delete e.headers[RS],e.headers[bS]=r.sessionToken,e.query=e.query??{},e.query[bS]=r.sessionToken,$I(this,s),this.presign(e,n)}};function qI(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function $I(t,e){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=t.credentialProvider,s=()=>(clearTimeout(r),t.credentialProvider=n,Promise.resolve(e));t.credentialProvider=s}var XI=t=>(e,r)=>async n=>{if(r.endpointV2){let s=r.endpointV2,i=s.properties?.authSchemes?.[0]?.name===hK;if((s.properties?.backend===pK||s.properties?.bucketType===fK)&&(sK.setFeature(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let c=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:a});r.s3ExpressIdentity=c,ac.HttpRequest.isInstance(n.request)&&c.sessionToken&&(n.request.headers[RS]=c.sessionToken)}}}return e(n)},QI={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},EK=t=>({applyToStack:e=>{e.add(XI(t),QI)}}),SK=async(t,e,r,n)=>{let s=await n.signWithCredentials(r,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},_K=t=>e=>{throw e},vK=(t,e)=>{},wK=UI.httpSigningMiddlewareOptions,YI=t=>(e,r)=>async n=>{if(!ac.HttpRequest.isInstance(n.request))return e(n);let i=iK.getSmithyContext(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u;r.s3ExpressIdentity?u=await SK(r.s3ExpressIdentity,o,n.request,await t.signer()):u=await c.sign(n.request,a,o);let l=await e({...n,request:u}).catch((c.errorHandler||_K)(o));return(c.successHandler||vK)(l.response,o),l},bK=t=>({applyToStack:e=>{e.addRelativeTo(YI(t),UI.httpSigningMiddlewareOptions)}}),RK=(t,{session:e})=>{let[r,n]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:c,bucketEndpoint:u,expectContinueHeader:l}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:c??new Yd(async d=>r().send(new n({Bucket:d}))),bucketEndpoint:u??!1,expectContinueHeader:l??2097152})},CK={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},AK=3e3,JI=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(!ac.HttpResponse.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let u=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([u,l]=await kI.splitStream(a)),i.body=l;let d=await TK(u,{streamCollector:async g=>kI.headStream(g,AK)});typeof u?.destroy=="function"&&u.destroy();let m=t.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&CK[r.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return m&&m.endsWith("</Error>")&&(i.statusCode=400),s},TK=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),ZI={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},PK=t=>({applyToStack:e=>{e.addRelativeTo(JI(t),ZI)}});function xK(t){return(e,r)=>async n=>{if(t.bucketEndpoint){let s=r.endpointV2;if(s){let i=n.input.Bucket;if(typeof i=="string")try{let o=new URL(i);r.endpointV2={...s,url:o}}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return e(n)}}var IK={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function eO({bucketEndpoint:t}){return e=>async r=>{let{input:{Bucket:n}}=r;if(!t&&typeof n=="string"&&!oK.validate(n)&&n.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return e({...r})}}var tO={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},OK=t=>({applyToStack:e=>{e.add(eO(t),tO),e.addRelativeTo(xK(t),IK)}});ge.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS=yK;ge.S3ExpressIdentityCache=Qd;ge.S3ExpressIdentityCacheEntry=uo;ge.S3ExpressIdentityProviderImpl=Yd;ge.SignatureV4S3Express=CS;ge.checkContentLengthHeader=BI;ge.checkContentLengthHeaderMiddlewareOptions=HI;ge.getCheckContentLengthHeaderPlugin=uK;ge.getRegionRedirectMiddlewarePlugin=lK;ge.getS3ExpiresMiddlewarePlugin=dK;ge.getS3ExpressHttpSigningPlugin=bK;ge.getS3ExpressPlugin=EK;ge.getThrow200ExceptionsPlugin=PK;ge.getValidateBucketNamePlugin=OK;ge.regionRedirectEndpointMiddleware=jI;ge.regionRedirectEndpointMiddlewareOptions=VI;ge.regionRedirectMiddleware=WI;ge.regionRedirectMiddlewareOptions=zI;ge.resolveS3Config=RK;ge.s3ExpiresMiddleware=GI;ge.s3ExpiresMiddlewareOptions=KI;ge.s3ExpressHttpSigningMiddleware=YI;ge.s3ExpressHttpSigningMiddlewareOptions=wK;ge.s3ExpressMiddleware=XI;ge.s3ExpressMiddlewareOptions=QI;ge.throw200ExceptionsMiddleware=JI;ge.throw200ExceptionsMiddlewareOptions=ZI;ge.validateBucketNameMiddleware=eO;ge.validateBucketNameMiddlewareOptions=tO});var PS=S(TS=>{"use strict";var NK=rO(),nO=od(),cc={CrtSignerV4:null},AS=class{constructor(e){f(this,"sigv4aSigner");f(this,"sigv4Signer");f(this,"signerOptions");this.sigv4Signer=new NK.SignatureV4S3Express(e),this.signerOptions=e}static sigv4aDependency(){return typeof cc.CrtSignerV4=="function"?"crt":typeof nO.signatureV4aContainer.SignatureV4a=="function"?"js":"none"}async sign(e,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(e,r):this.sigv4Signer.sign(e,r)}async signWithCredentials(e,r,n={}){if(n.signingRegion==="*"){let s=this.getSigv4aSigner(),i=cc.CrtSignerV4;if(i&&s instanceof i)return s.signWithCredentials(e,r,n);throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(e,r,n)}async presign(e,r={}){if(r.signingRegion==="*"){let n=this.getSigv4aSigner(),s=cc.CrtSignerV4;if(s&&n instanceof s)return n.presign(e,r);throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(e,r)}async presignWithCredentials(e,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let e=cc.CrtSignerV4,r=nO.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!e&&!r)throw new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(e&&typeof e=="function")this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r=="function")this.sigv4aSigner=new r({...this.signerOptions});else throw new Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!="function")throw new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}};TS.SignatureV4MultiRegion=AS;TS.signatureV4CrtContainer=cc});var pO=S(ef=>{"use strict";Object.defineProperty(ef,"__esModule",{value:!0});ef.ruleSet=void 0;var dO="required",oe="type",ot="fn",at="argv",gs="ref",DK=!1,xS=!0,BS="isSet",IS="stringEquals",HS="getAttr",lo="booleanEquals",Ir="endpoint",Xt="tree",Cn="error",OS={[dO]:!1,[oe]:"string"},sO={[dO]:!0,default:!1,[oe]:"boolean"},qS={[gs]:"Endpoint"},NS={[ot]:BS,[at]:[{[gs]:"Region"}]},$S={[gs]:"Region"},DS={[ot]:"aws.partition",[at]:[$S],assign:"PartitionResult"},jS={[gs]:"PartitionResult"},FS={[ot]:lo,[at]:[{[gs]:"UseFIPS"},!0]},LK={[gs]:"UseFIPS"},US={[ot]:lo,[at]:[{[gs]:"UseDualStack"},!0]},iO={url:"https://events.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:{},headers:{}},kt={},oO={[gs]:"EndpointId"},LS={authSchemes:[{name:"sigv4a",signingName:"events",signingRegionSet:["*"]}]},fO={[ot]:lo,[at]:[!0,{[ot]:HS,[at]:[jS,"supportsDualStack"]}]},aO={[Cn]:"DualStack is enabled but this partition does not support DualStack",[oe]:Cn},cO={[ot]:HS,[at]:[jS,"supportsFIPS"]},MS=[{[ot]:BS,[at]:[qS]}],kS=[US],uO=[fO],lO=[FS],MK={version:"1.0",parameters:{Region:OS,UseDualStack:sO,UseFIPS:sO,Endpoint:OS,EndpointId:OS},rules:[{conditions:[{[ot]:"not",[at]:MS},NS,DS,{[ot]:IS,[at]:[{[ot]:HS,[at]:[jS,"name"]},"aws-us-gov"]},FS,US],endpoint:iO,[oe]:Ir},{conditions:[{[ot]:BS,[at]:[oO]},NS,DS],rules:[{conditions:[{[ot]:"isValidHostLabel",[at]:[oO,xS]}],rules:[{conditions:[{[ot]:lo,[at]:[LK,DK]}],rules:[{conditions:MS,endpoint:{url:qS,properties:LS,headers:kt},[oe]:Ir},{conditions:kS,rules:[{conditions:uO,rules:[{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dualStackDnsSuffix}",properties:LS,headers:kt},[oe]:Ir}],[oe]:Xt},aO],[oe]:Xt},{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dnsSuffix}",properties:LS,headers:kt},[oe]:Ir}],[oe]:Xt},{error:"Invalid Configuration: FIPS is not supported with EventBridge multi-region endpoints.",[oe]:Cn}],[oe]:Xt},{error:"EndpointId must be a valid host label.",[oe]:Cn}],[oe]:Xt},{conditions:MS,rules:[{conditions:lO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[oe]:Cn},{conditions:kS,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[oe]:Cn},{endpoint:{url:qS,properties:kt,headers:kt},[oe]:Ir}],[oe]:Xt},{conditions:[NS],rules:[{conditions:[DS],rules:[{conditions:[FS,US],rules:[{conditions:[{[ot]:lo,[at]:[xS,cO]},fO],rules:[{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Xt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[oe]:Cn}],[oe]:Xt},{conditions:lO,rules:[{conditions:[{[ot]:lo,[at]:[cO,xS]}],rules:[{conditions:[{[ot]:IS,[at]:[$S,"us-gov-east-1"]}],endpoint:{url:"https://events.us-gov-east-1.amazonaws.com",properties:kt,headers:kt},[oe]:Ir},{conditions:[{[ot]:IS,[at]:[$S,"us-gov-west-1"]}],endpoint:{url:"https://events.us-gov-west-1.amazonaws.com",properties:kt,headers:kt},[oe]:Ir},{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Xt},{error:"FIPS is enabled but this partition does not support FIPS",[oe]:Cn}],[oe]:Xt},{conditions:kS,rules:[{conditions:uO,rules:[{endpoint:iO,[oe]:Ir}],[oe]:Xt},aO],[oe]:Xt},{endpoint:{url:"https://events.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Xt}],[oe]:Xt},{error:"Invalid Configuration: Missing Region",[oe]:Cn}]};ef.ruleSet=MK});var WS=S(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.defaultEndpointResolver=void 0;var kK=Ui(),VS=Ys(),qK=pO(),$K=new VS.EndpointCache({size:50,params:["Endpoint","EndpointId","Region","UseDualStack","UseFIPS"]}),FK=(t,e={})=>$K.get(t,()=>(0,VS.resolveEndpoint)(qK.ruleSet,{endpointParams:t,logger:e.logger}));tf.defaultEndpointResolver=FK;VS.customEndpointFunctions.aws=kK.awsEndpointFunctions});var zS=S(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});ys.resolveHttpAuthSchemeConfig=ys.defaultEventBridgeHttpAuthSchemeProvider=ys.defaultEventBridgeHttpAuthSchemeParametersProvider=void 0;var hO=(_t(),re(Sn)),UK=PS(),BK=bn(),rf=It(),HK=WS(),jK=t=>async(e,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=await t(e,r,n),i=(0,rf.getSmithyContext)(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let o=await(0,BK.resolveParams)(n,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},VK=async(t,e,r)=>({operation:(0,rf.getSmithyContext)(e).operation,region:await(0,rf.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ys.defaultEventBridgeHttpAuthSchemeParametersProvider=jK(VK);function mO(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function gO(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var WK=(t,e,r)=>s=>{let o=t(s).properties?.authSchemes;if(!o)return e(s);let a=[];for(let c of o){let{name:u,properties:l={},...d}=c,m=u.toLowerCase();u!==m&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${u}\` to \`${m}\``);let g;if(m==="sigv4a"){g="aws.auth#sigv4a";let P=o.find(T=>{let O=T.name.toLowerCase();return O!=="sigv4a"&&O.startsWith("sigv4")});if(UK.SignatureV4MultiRegion.sigv4aDependency()==="none"&&P)continue}else if(m.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${m}\``);let E=r[g];if(!E)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);let b=E(s);b.schemeId=g,b.signingProperties={...b.signingProperties||{},...d,...l},a.push(b)}return a},zK=t=>{let e=[];switch(t.operation){default:e.push(mO(t)),e.push(gO(t))}return e};ys.defaultEventBridgeHttpAuthSchemeProvider=WK(HK.defaultEndpointResolver,zK,{"aws.auth#sigv4":mO,"aws.auth#sigv4a":gO});var GK=t=>{let e=(0,hO.resolveAwsSdkSigV4Config)(t),r=(0,hO.resolveAwsSdkSigV4AConfig)(e);return Object.assign(r,{authSchemePreference:(0,rf.normalizeProvider)(t.authSchemePreference??[])})};ys.resolveHttpAuthSchemeConfig=GK});var yO=S((BTe,KK)=>{KK.exports={name:"@aws-sdk/client-eventbridge",description:"AWS SDK for JavaScript Eventbridge Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-eventbridge","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo eventbridge",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.929.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/signature-v4-multi-region":"3.928.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.928.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-eventbridge",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-eventbridge"}}});var GS=S(Es=>{"use strict";var XK=(xr(),re(ts)),QK=Lt(),EO="AWS_ACCESS_KEY_ID",SO="AWS_SECRET_ACCESS_KEY",_O="AWS_SESSION_TOKEN",vO="AWS_CREDENTIAL_EXPIRATION",wO="AWS_CREDENTIAL_SCOPE",bO="AWS_ACCOUNT_ID",YK=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[EO],r=process.env[SO],n=process.env[_O],s=process.env[vO],i=process.env[wO],o=process.env[bO];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return XK.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new QK.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};Es.ENV_ACCOUNT_ID=bO;Es.ENV_CREDENTIAL_SCOPE=wO;Es.ENV_EXPIRATION=vO;Es.ENV_KEY=EO;Es.ENV_SECRET=SO;Es.ENV_SESSION=_O;Es.fromEnv=YK});var lc=S(vt=>{"use strict";var Yr=Lt(),JK=require("url"),ZK=require("buffer"),e8=require("http"),JS=vn(),t8=Zn();function uc(t){return new Promise((e,r)=>{let n=e8.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Yr.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Yr.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Yr.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{e(ZK.Buffer.concat(o)),n.destroy()})}),n.end()})}var TO=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",PO=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),xO=1e3,IO=0,ZS=({maxRetries:t=IO,timeout:e=xO})=>({maxRetries:t,timeout:e}),XS=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},nf="AWS_CONTAINER_CREDENTIALS_FULL_URI",sf="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",QS="AWS_CONTAINER_AUTHORIZATION_TOKEN",r8=(t={})=>{let{timeout:e,maxRetries:r}=ZS(t);return()=>XS(async()=>{let n=await a8({logger:t.logger}),s=JSON.parse(await n8(e,n));if(!TO(s))throw new Yr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return PO(s)},r)},n8=async(t,e)=>(process.env[QS]&&(e.headers={...e.headers,Authorization:process.env[QS]}),(await uc({...e,timeout:t})).toString()),s8="169.254.170.2",i8={localhost:!0,"127.0.0.1":!0},o8={"http:":!0,"https:":!0},a8=async({logger:t})=>{if(process.env[sf])return{hostname:s8,path:process.env[sf]};if(process.env[nf]){let e=JK.parse(process.env[nf]);if(!e.hostname||!(e.hostname in i8))throw new Yr.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in o8))throw new Yr.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new Yr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${sf} or ${nf} environment variable is set`,{tryNextLink:!1,logger:t})},YS=class t extends Yr.CredentialsProviderError{constructor(r,n=!0){super(r,n);f(this,"tryNextLink");f(this,"name","InstanceMetadataV1FallbackError");this.tryNextLink=n,Object.setPrototypeOf(this,t.prototype)}};vt.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(vt.Endpoint||(vt.Endpoint={}));var c8="AWS_EC2_METADATA_SERVICE_ENDPOINT",u8="ec2_metadata_service_endpoint",l8={environmentVariableSelector:t=>t[c8],configFileSelector:t=>t[u8],default:void 0},fo;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(fo||(fo={}));var d8="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",f8="ec2_metadata_service_endpoint_mode",p8={environmentVariableSelector:t=>t[d8],configFileSelector:t=>t[f8],default:fo.IPv4},OO=async()=>t8.parseUrl(await h8()||await m8()),h8=async()=>JS.loadConfig(l8)(),m8=async()=>{let t=await JS.loadConfig(p8)();switch(t){case fo.IPv4:return vt.Endpoint.IPv4;case fo.IPv6:return vt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(fo)}`)}},g8=5*60,y8=5*60,E8="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",RO=(t,e)=>{let r=g8+Math.floor(Math.random()*y8),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+E8);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},S8=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=RO(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=RO(n,r);else throw i}return n=s,s}},NO="/latest/meta-data/iam/security-credentials/",_8="/latest/api/token",KS="AWS_EC2_METADATA_V1_DISABLED",CO="ec2_metadata_v1_disabled",AO="x-aws-ec2-metadata-token",v8=(t={})=>S8(w8(t),{logger:t.logger}),w8=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:i}=ZS(t),o=async(a,c)=>{if(e||c.headers?.[AO]==null){let d=!1,m=!1,g=await JS.loadConfig({environmentVariableSelector:E=>{let b=E[KS];if(m=!!b&&b!=="false",b===void 0)throw new Yr.CredentialsProviderError(`${KS} not set in env, checking config file next.`,{logger:t.logger});return m},configFileSelector:E=>{let b=E[CO];return d=!!b&&b!=="false",d},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||g){let E=[];throw t.ec2MetadataV1Disabled&&E.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),d&&E.push(`config file profile (${CO})`),m&&E.push(`process environment variable (${KS})`),new YS(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${E.join(", ")}].`)}}let l=(await XS(async()=>{let d;try{d=await R8(c)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)).trim();return XS(async()=>{let d;try{d=await C8(l,c,t)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)};return async()=>{let a=await OO();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await b8({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[AO]:c},timeout:s})}}},b8=async t=>uc({...t,path:_8,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),R8=async t=>(await uc({...t,path:NO})).toString(),C8=async(t,e,r)=>{let n=JSON.parse((await uc({...e,path:NO+t})).toString());if(!TO(n))throw new Yr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return PO(n)};vt.DEFAULT_MAX_RETRIES=IO;vt.DEFAULT_TIMEOUT=xO;vt.ENV_CMDS_AUTH_TOKEN=QS;vt.ENV_CMDS_FULL_URI=nf;vt.ENV_CMDS_RELATIVE_URI=sf;vt.fromContainerMetadata=r8;vt.fromInstanceMetadata=v8;vt.getInstanceMetadataEndpoint=OO;vt.httpRequest=uc;vt.providerConfigFromInit=ZS});var DO=S(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.checkUrl=void 0;var A8=Lt(),T8="169.254.170.2",P8="169.254.170.23",x8="[fd00:ec2::23]",I8=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===T8||t.hostname===P8||t.hostname===x8)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new A8.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};of.checkUrl=I8});var LO=S(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.createGetRequest=L8;af.getCredentials=M8;var e_=Lt(),O8=we(),N8=se(),D8=Na();function L8(t){return new O8.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function M8(t,e){let n=await(0,D8.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new e_.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,N8.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new e_.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new e_.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var MO=S(cf=>{"use strict";Object.defineProperty(cf,"__esModule",{value:!0});cf.retryWrapper=void 0;var k8=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};cf.retryWrapper=k8});var $O=S(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});uf.fromHttp=void 0;var q8=(Ha(),re(Ba)),$8=(xr(),re(ts)),F8=Bs(),kO=Lt(),U8=q8.__importDefault(require("fs/promises")),B8=DO(),qO=LO(),H8=MO(),j8="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",V8="http://169.254.170.2",W8="AWS_CONTAINER_CREDENTIALS_FULL_URI",z8="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",G8="AWS_CONTAINER_AUTHORIZATION_TOKEN",K8=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[j8],n=t.awsContainerCredentialsFullUri??process.env[W8],s=t.awsContainerAuthorizationToken??process.env[G8],i=t.awsContainerAuthorizationTokenFile??process.env[z8],o=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${V8}${r}`;else throw new kO.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,B8.checkUrl)(a,t.logger);let c=F8.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,H8.retryWrapper)(async()=>{let u=(0,qO.createGetRequest)(a);s?u.headers.Authorization=s:i&&(u.headers.Authorization=(await U8.default.readFile(i)).toString());try{let l=await c.handle(u);return(0,qO.getCredentials)(l.response).then(d=>(0,$8.setCredentialFeature)(d,"CREDENTIALS_HTTP","z"))}catch(l){throw new kO.CredentialsProviderError(String(l),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};uf.fromHttp=K8});var t_=S(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});lf.fromHttp=void 0;var X8=$O();Object.defineProperty(lf,"fromHttp",{enumerable:!0,get:function(){return X8.fromHttp}})});function Q8(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Y8(t){return{schemeId:"smithy.api#noAuth"}}var dc,FO,UO,BO,r_=w(()=>{_t();dc=A(It()),FO=async(t,e,r)=>({operation:(0,dc.getSmithyContext)(e).operation,region:await(0,dc.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});UO=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(Y8(t));break}default:e.push(Q8(t))}return e},BO=t=>{let e=ei(t);return Object.assign(e,{authSchemePreference:(0,dc.normalizeProvider)(t.authSchemePreference??[])})}});var HO,jO,n_=w(()=>{HO=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),jO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var df,s_=w(()=>{df={name:"@aws-sdk/nested-clients",version:"3.929.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var fc=S(ni=>{"use strict";var VO=require("os"),i_=require("process"),Z8=so(),WO={isCrtAvailable:!1},e5=()=>WO.isCrtAvailable?["md/crt-avail"]:null,zO=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${VO.platform()}`,VO.release()],["lang/js"],["md/nodejs",`${i_.versions.node}`]],s=e5();s&&n.push(s),t&&n.push([`api/${t}`,e]),i_.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${i_.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},t5=zO,GO="AWS_SDK_UA_APP_ID",KO="sdk_ua_app_id",r5="sdk-ua-app-id",n5={environmentVariableSelector:t=>t[GO],configFileSelector:t=>t[KO]??t[r5],default:Z8.DEFAULT_UA_APP_ID};ni.NODE_APP_ID_CONFIG_OPTIONS=n5;ni.UA_APP_ID_ENV_NAME=GO;ni.UA_APP_ID_INI_NAME=KO;ni.createDefaultUserAgentProvider=zO;ni.crtAvailability=WO;ni.defaultUserAgent=t5});var pc=S(YO=>{"use strict";var o_=Oi(),s5=dt(),i5=require("buffer"),XO=require("crypto"),a_=class{constructor(e,r){f(this,"algorithmIdentifier");f(this,"secret");f(this,"hash");this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(s5.toUint8Array(QO(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?XO.createHmac(this.algorithmIdentifier,QO(this.secret)):XO.createHash(this.algorithmIdentifier)}};function QO(t,e){return i5.Buffer.isBuffer(t)?t:typeof t=="string"?o_.fromString(t,e):ArrayBuffer.isView(t)?o_.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):o_.fromArrayBuffer(t)}YO.Hash=a_});var hc=S(JO=>{"use strict";var c_=require("fs"),o5=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof c_.ReadStream){if(t.path!=null)return c_.lstatSync(t.path).size;if(typeof t.fd=="number")return c_.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};JO.calculateBodyLength=o5});var cN,dr,fr,mo,ZO,mc,po,ho,An,u_,l_,eN,tN,rN,uN,lN,lr,nN,dN,sN,iN,oN,aN,a5,fN,pN=w(()=>{cN="required",dr="fn",fr="argv",mo="ref",ZO="isSet",mc="booleanEquals",po="error",ho="endpoint",An="tree",u_="PartitionResult",l_="getAttr",eN={[cN]:!1,type:"string"},tN={[cN]:!0,default:!1,type:"boolean"},rN={[mo]:"Endpoint"},uN={[dr]:mc,[fr]:[{[mo]:"UseFIPS"},!0]},lN={[dr]:mc,[fr]:[{[mo]:"UseDualStack"},!0]},lr={},nN={[dr]:l_,[fr]:[{[mo]:u_},"supportsFIPS"]},dN={[mo]:u_},sN={[dr]:mc,[fr]:[!0,{[dr]:l_,[fr]:[dN,"supportsDualStack"]}]},iN=[uN],oN=[lN],aN=[{[mo]:"Region"}],a5={version:"1.0",parameters:{Region:eN,UseDualStack:tN,UseFIPS:tN,Endpoint:eN},rules:[{conditions:[{[dr]:ZO,[fr]:[rN]}],rules:[{conditions:iN,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:po},{conditions:oN,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:po},{endpoint:{url:rN,properties:lr,headers:lr},type:ho}],type:An},{conditions:[{[dr]:ZO,[fr]:aN}],rules:[{conditions:[{[dr]:"aws.partition",[fr]:aN,assign:u_}],rules:[{conditions:[uN,lN],rules:[{conditions:[{[dr]:mc,[fr]:[!0,nN]},sN],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lr,headers:lr},type:ho}],type:An},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:po}],type:An},{conditions:iN,rules:[{conditions:[{[dr]:mc,[fr]:[nN,!0]}],rules:[{conditions:[{[dr]:"stringEquals",[fr]:[{[dr]:l_,[fr]:[dN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:lr,headers:lr},type:ho},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:lr,headers:lr},type:ho}],type:An},{error:"FIPS is enabled but this partition does not support FIPS",type:po}],type:An},{conditions:oN,rules:[{conditions:[sN],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lr,headers:lr},type:ho}],type:An},{error:"DualStack is enabled but this partition does not support DualStack",type:po}],type:An},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:lr,headers:lr},type:ho}],type:An}],type:An},{error:"Invalid Configuration: Missing Region",type:po}]},fN=a5});var hN,go,c5,mN,gN=w(()=>{hN=A(Ui()),go=A(Ys());pN();c5=new go.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),mN=(t,e={})=>c5.get(t,()=>(0,go.resolveEndpoint)(fN,{endpointParams:t,logger:e.logger}));go.customEndpointFunctions.aws=hN.awsEndpointFunctions});var yN,EN,ff,pf,SN,_N=w(()=>{_t();tc();Gt();yN=A(se()),EN=A(Zn()),ff=A(ft()),pf=A(dt());r_();gN();SN=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??ff.fromBase64,base64Encoder:t?.base64Encoder??ff.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??mN,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??UO,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Kt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new pn}],logger:t?.logger??new yN.NoOpLogger,protocol:t?.protocol??new Ji({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??EN.parseUrl,utf8Decoder:t?.utf8Decoder??pf.fromUtf8,utf8Encoder:t?.utf8Encoder??pf.toUtf8})});var gc=S(RN=>{"use strict";var u5=ur(),vN=vn(),l5=Lt(),d5="AWS_EXECUTION_ENV",wN="AWS_REGION",bN="AWS_DEFAULT_REGION",f5="AWS_EC2_METADATA_DISABLED",p5=["in-region","cross-region","mobile","standard","legacy"],h5="/latest/meta-data/placement/region",m5="AWS_DEFAULTS_MODE",g5="defaults_mode",y5={environmentVariableSelector:t=>t[m5],configFileSelector:t=>t[g5],default:"legacy"},E5=({region:t=vN.loadConfig(u5.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=vN.loadConfig(y5)}={})=>l5.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return S5(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${p5.join(", ")}, got ${r}`)}}),S5=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await _5();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},_5=async()=>{if(process.env[d5]&&(process.env[wN]||process.env[bN]))return process.env[wN]??process.env[bN];if(!process.env[f5])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>A(lc())),r=await t();return(await e({...r,path:h5})).toString()}catch{}};RN.resolveDefaultsModeConfig=E5});var hf,_s,CN,mf,Ss,gf,AN,TN,PN,xN,IN,ON,NN=w(()=>{s_();_t();hf=A(fc()),_s=A(ur()),CN=A(pc()),mf=A(Rn()),Ss=A(vn()),gf=A(Bs()),AN=A(hc()),TN=A(ao());_N();PN=A(se()),xN=A(gc()),IN=A(se()),ON=t=>{(0,IN.emitWarningIfUnsupportedVersion)(process.version);let e=(0,xN.resolveDefaultsModeConfig)(t),r=()=>e().then(PN.loadConfigsForDefaultMode),n=SN(t);Bi(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ss.loadConfig)(Vi,s),bodyLengthChecker:t?.bodyLengthChecker??AN.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,hf.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:df.version}),maxAttempts:t?.maxAttempts??(0,Ss.loadConfig)(mf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ss.loadConfig)(_s.NODE_REGION_CONFIG_OPTIONS,{..._s.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:gf.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ss.loadConfig)({...mf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||TN.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??CN.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??gf.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ss.loadConfig)(_s.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ss.loadConfig)(_s.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ss.loadConfig)(hf.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var LN=S(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.warning=void 0;yo.stsRegionDefaultResolver=w5;var DN=ur(),v5=vn();function w5(t={}){return(0,v5.loadConfig)({...DN.NODE_REGION_CONFIG_OPTIONS,async default(){return yo.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...DN.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}yo.warning={silence:!1}});var Eo=S(Jr=>{"use strict";var yc=ur(),MN=LN(),b5=t=>({setRegion(e){t.region=e},region(){return t.region}}),R5=t=>({region:t.region()});Object.defineProperty(Jr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return yc.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Jr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return yc.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Jr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return yc.REGION_ENV_NAME}});Object.defineProperty(Jr,"REGION_INI_NAME",{enumerable:!0,get:function(){return yc.REGION_INI_NAME}});Object.defineProperty(Jr,"resolveRegionConfig",{enumerable:!0,get:function(){return yc.resolveRegionConfig}});Jr.getAwsRegionExtensionConfiguration=b5;Jr.resolveAwsRegionExtensionConfiguration=R5;Object.keys(MN).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Jr,t)&&Object.defineProperty(Jr,t,{enumerable:!0,get:function(){return MN[t]}})})});var kN,qN,$N=w(()=>{kN=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},qN=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var yf,Ef,Sf,FN,UN=w(()=>{yf=A(Eo()),Ef=A(we()),Sf=A(se());$N();FN=(t,e)=>{let r=Object.assign((0,yf.getAwsRegionExtensionConfiguration)(t),(0,Sf.getDefaultExtensionConfiguration)(t),(0,Ef.getHttpHandlerExtensionConfiguration)(t),kN(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,yf.resolveAwsRegionExtensionConfiguration)(r),(0,Sf.resolveDefaultRuntimeConfig)(r),(0,Ef.resolveHttpHandlerRuntimeConfig)(r),qN(r))}});var _f,BN,HN,vf,jN,VN,WN,wf,d_,Ec,f_=w(()=>{_f=A(wa()),BN=A(ba()),HN=A(Ca()),vf=A(so()),jN=A(ur());Gt();xe();VN=A(rc()),WN=A(bn()),wf=A(Rn()),d_=A(se());r_();n_();NN();UN();Ec=class extends d_.Client{constructor(...[r]){let n=ON(r||{});super(n);f(this,"config");this.initConfig=n;let s=HO(n),i=(0,vf.resolveUserAgentConfig)(s),o=(0,wf.resolveRetryConfig)(i),a=(0,jN.resolveRegionConfig)(o),c=(0,_f.resolveHostHeaderConfig)(a),u=(0,WN.resolveEndpointConfig)(c),l=BO(u),d=FN(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(ty(this.config)),this.middlewareStack.use((0,vf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,wf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,VN.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,_f.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,BN.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,HN.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Ta(this.config,{httpAuthSchemeParametersProvider:FO,identityProviderConfigProvider:async m=>new Ks({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(xa(this.config))}destroy(){super.destroy()}}});var zN,ct,bf=w(()=>{zN=A(se()),ct=class t extends zN.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var C5,Sc,_c,vc,wc,bc,Rc,A5,Cc,Ac,Tc,Pc,xc,GN=w(()=>{bf();C5={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Sc=class t extends ct{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},_c=class t extends ct{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});f(this,"name","AuthorizationPendingException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},vc=class t extends ct{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},wc=class t extends ct{constructor(r){super({name:"InternalServerException",$fault:"server",...r});f(this,"name","InternalServerException");f(this,"$fault","server");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},bc=class t extends ct{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});f(this,"name","InvalidClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Rc=class t extends ct{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});f(this,"name","InvalidGrantException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},A5={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Cc=class t extends ct{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},Ac=class t extends ct{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});f(this,"name","InvalidScopeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Tc=class t extends ct{constructor(r){super({name:"SlowDownException",$fault:"client",...r});f(this,"name","SlowDownException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Pc=class t extends ct{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});f(this,"name","UnauthorizedClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},xc=class t extends ct{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});f(this,"name","UnsupportedGrantTypeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}}});var p_=w(()=>{GN()});var T5,P5,x5,I5,O5,N5,D5,L5,M5,k5,q5,$5,F5,U5,B5,H5,j5,V5,W5,z5,Zr,G5,K5,X5,Q5,Y5,ze,J5,Or,Z5,eX,Nr,tX,KN,XN,rX,nX,sX,QN,iX,ye,oX,aX,cX,uX,YN,lX,dX,fX,pX,hX,mX,gX,yX,EX,SX,_X,vX,wX,bX,JN,ZN=w(()=>{xe();p_();bf();T5="AccessDeniedException",P5="AuthorizationPendingException",x5="AccessToken",I5="ClientSecret",O5="CreateToken",N5="CreateTokenRequest",D5="CreateTokenResponse",L5="CodeVerifier",M5="ExpiredTokenException",k5="InvalidClientException",q5="InvalidGrantException",$5="InvalidRequestException",F5="InternalServerException",U5="InvalidScopeException",B5="IdToken",H5="RefreshToken",j5="SlowDownException",V5="UnauthorizedClientException",W5="UnsupportedGrantTypeException",z5="accessToken",Zr="client",G5="clientId",K5="clientSecret",X5="codeVerifier",Q5="code",Y5="deviceCode",ze="error",J5="expiresIn",Or="error_description",Z5="grantType",eX="http",Nr="httpError",tX="idToken",KN="reason",XN="refreshToken",rX="redirectUri",nX="scope",sX="server",QN="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",iX="tokenType",ye="com.amazonaws.ssooidc",oX=[0,ye,x5,8,0],aX=[0,ye,I5,8,0],cX=[0,ye,L5,8,0],uX=[0,ye,B5,8,0],YN=[0,ye,H5,8,0],lX=[-3,ye,T5,{[ze]:Zr,[Nr]:400},[ze,KN,Or],[0,0,0]];le.for(ye).registerError(lX,Sc);dX=[-3,ye,P5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(dX,_c);fX=[3,ye,N5,0,[G5,K5,Z5,Y5,Q5,XN,nX,rX,X5],[0,[()=>aX,0],0,0,0,[()=>YN,0],64,0,[()=>cX,0]]],pX=[3,ye,D5,0,[z5,iX,J5,XN,tX],[[()=>oX,0],0,1,[()=>YN,0],[()=>uX,0]]],hX=[-3,ye,M5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(hX,vc);mX=[-3,ye,F5,{[ze]:sX,[Nr]:500},[ze,Or],[0,0]];le.for(ye).registerError(mX,wc);gX=[-3,ye,k5,{[ze]:Zr,[Nr]:401},[ze,Or],[0,0]];le.for(ye).registerError(gX,bc);yX=[-3,ye,q5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(yX,Rc);EX=[-3,ye,$5,{[ze]:Zr,[Nr]:400},[ze,KN,Or],[0,0,0]];le.for(ye).registerError(EX,Cc);SX=[-3,ye,U5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(SX,Ac);_X=[-3,ye,j5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(_X,Tc);vX=[-3,ye,V5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(vX,Pc);wX=[-3,ye,W5,{[ze]:Zr,[Nr]:400},[ze,Or],[0,0]];le.for(ye).registerError(wX,xc);bX=[-3,QN,"SSOOIDCServiceException",0,[],[]];le.for(QN).registerError(bX,ct);JN=[9,ye,O5,{[eX]:["POST","/token",200]},()=>fX,()=>pX]});var eD,h_,Ic,m_=w(()=>{eD=A(bn()),h_=A(se());n_();ZN();Ic=class extends h_.Command.classBuilder().ep(jO).m(function(e,r,n,s){return[(0,eD.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(JN).build(){}});var tD,RX,Rf,rD=w(()=>{tD=A(se());m_();f_();RX={CreateTokenCommand:Ic},Rf=class extends Ec{};(0,tD.createAggregatedClient)(RX,Rf)});var nD=w(()=>{m_()});var g_={};xt(g_,{$Command:()=>h_.Command,AccessDeniedException:()=>Sc,AccessDeniedExceptionReason:()=>C5,AuthorizationPendingException:()=>_c,CreateTokenCommand:()=>Ic,ExpiredTokenException:()=>vc,InternalServerException:()=>wc,InvalidClientException:()=>bc,InvalidGrantException:()=>Rc,InvalidRequestException:()=>Cc,InvalidRequestExceptionReason:()=>A5,InvalidScopeException:()=>Ac,SSOOIDC:()=>Rf,SSOOIDCClient:()=>Ec,SSOOIDCServiceException:()=>ct,SlowDownException:()=>Tc,UnauthorizedClientException:()=>Pc,UnsupportedGrantTypeException:()=>xc,__Client:()=>d_.Client});var y_=w(()=>{f_();rD();nD();p_();bf()});var aD=S(Nc=>{"use strict";var CX=(xr(),re(ts)),AX=(EE(),re(SP)),nr=Lt(),Oc=_n(),TX=require("fs"),PX=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new nr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=AX.getBearerTokenEnvKey(e);if(!(r in process.env))throw new nr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return CX.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},xX=5*60*1e3,E_="To refresh this SSO session run 'aws sso login' with the corresponding profile.",IX=async(t,e={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(y_(),g_)),n=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i];return new r(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},OX=async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(y_(),g_));return(await IX(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},sD=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new nr.TokenProviderError(`Token is expired. ${E_}`,!1)},si=(t,e,r=!1)=>{if(typeof e>"u")throw new nr.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${E_}`,!1)},{writeFile:NX}=TX.promises,DX=(t,e)=>{let r=Oc.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return NX(r,n)},iD=new Date(0),oD=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await Oc.parseKnownFiles(r),s=Oc.getProfileName({profile:r.profile??e?.profile}),i=n[s];if(i){if(!i.sso_session)throw new nr.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new nr.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await Oc.loadSsoSessionData(r))[o];if(!c)throw new nr.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let E of["sso_start_url","sso_region"])if(!c[E])throw new nr.TokenProviderError(`Sso session '${o}' is missing required property '${E}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await Oc.getSSOTokenFromFile(o)}catch{throw new nr.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${E_}`,!1)}si("accessToken",l.accessToken),si("expiresAt",l.expiresAt);let{accessToken:d,expiresAt:m}=l,g={token:d,expiration:new Date(m)};if(g.expiration.getTime()-Date.now()>xX)return g;if(Date.now()-iD.getTime()<30*1e3)return sD(g),g;si("clientId",l.clientId,!0),si("clientSecret",l.clientSecret,!0),si("refreshToken",l.refreshToken,!0);try{iD.setTime(Date.now());let E=await OX(l,u,r);si("accessToken",E.accessToken),si("expiresIn",E.expiresIn);let b=new Date(Date.now()+E.expiresIn*1e3);try{await DX(o,{...l,accessToken:E.accessToken,expiresAt:b.toISOString(),refreshToken:E.refreshToken})}catch{}return{token:E.accessToken,expiration:b}}catch{return sD(g),g}},LX=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new nr.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},MX=(t={})=>nr.memoize(nr.chain(oD(t),async()=>{throw new nr.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Nc.fromEnvSigningName=PX;Nc.fromSso=oD;Nc.fromStatic=LX;Nc.nodeProvider=MX});var __=S(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.resolveHttpAuthSchemeConfig=vs.defaultSSOHttpAuthSchemeProvider=vs.defaultSSOHttpAuthSchemeParametersProvider=void 0;var kX=(_t(),re(Sn)),S_=It(),qX=async(t,e,r)=>({operation:(0,S_.getSmithyContext)(e).operation,region:await(0,S_.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});vs.defaultSSOHttpAuthSchemeParametersProvider=qX;function $X(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Cf(t){return{schemeId:"smithy.api#noAuth"}}var FX=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Cf(t));break}case"ListAccountRoles":{e.push(Cf(t));break}case"ListAccounts":{e.push(Cf(t));break}case"Logout":{e.push(Cf(t));break}default:e.push($X(t))}return e};vs.defaultSSOHttpAuthSchemeProvider=FX;var UX=t=>{let e=(0,kX.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,S_.normalizeProvider)(t.authSchemePreference??[])})};vs.resolveHttpAuthSchemeConfig=UX});var cD=S((rxe,BX)=>{BX.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var bD=S(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.ruleSet=void 0;var SD="required",hr="fn",mr="argv",vo="ref",uD=!0,lD="isSet",Dc="booleanEquals",So="error",_o="endpoint",Tn="tree",v_="PartitionResult",w_="getAttr",dD={[SD]:!1,type:"string"},fD={[SD]:!0,default:!1,type:"boolean"},pD={[vo]:"Endpoint"},_D={[hr]:Dc,[mr]:[{[vo]:"UseFIPS"},!0]},vD={[hr]:Dc,[mr]:[{[vo]:"UseDualStack"},!0]},pr={},hD={[hr]:w_,[mr]:[{[vo]:v_},"supportsFIPS"]},wD={[vo]:v_},mD={[hr]:Dc,[mr]:[!0,{[hr]:w_,[mr]:[wD,"supportsDualStack"]}]},gD=[_D],yD=[vD],ED=[{[vo]:"Region"}],HX={version:"1.0",parameters:{Region:dD,UseDualStack:fD,UseFIPS:fD,Endpoint:dD},rules:[{conditions:[{[hr]:lD,[mr]:[pD]}],rules:[{conditions:gD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:So},{conditions:yD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:So},{endpoint:{url:pD,properties:pr,headers:pr},type:_o}],type:Tn},{conditions:[{[hr]:lD,[mr]:ED}],rules:[{conditions:[{[hr]:"aws.partition",[mr]:ED,assign:v_}],rules:[{conditions:[_D,vD],rules:[{conditions:[{[hr]:Dc,[mr]:[uD,hD]},mD],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pr,headers:pr},type:_o}],type:Tn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:So}],type:Tn},{conditions:gD,rules:[{conditions:[{[hr]:Dc,[mr]:[hD,uD]}],rules:[{conditions:[{[hr]:"stringEquals",[mr]:[{[hr]:w_,[mr]:[wD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:pr,headers:pr},type:_o},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:pr,headers:pr},type:_o}],type:Tn},{error:"FIPS is enabled but this partition does not support FIPS",type:So}],type:Tn},{conditions:yD,rules:[{conditions:[mD],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:pr,headers:pr},type:_o}],type:Tn},{error:"DualStack is enabled but this partition does not support DualStack",type:So}],type:Tn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:pr,headers:pr},type:_o}],type:Tn}],type:Tn},{error:"Invalid Configuration: Missing Region",type:So}]};Af.ruleSet=HX});var RD=S(Tf=>{"use strict";Object.defineProperty(Tf,"__esModule",{value:!0});Tf.defaultEndpointResolver=void 0;var jX=Ui(),b_=Ys(),VX=bD(),WX=new b_.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),zX=(t,e={})=>WX.get(t,()=>(0,b_.resolveEndpoint)(VX.ruleSet,{endpointParams:t,logger:e.logger}));Tf.defaultEndpointResolver=zX;b_.customEndpointFunctions.aws=jX.awsEndpointFunctions});var TD=S(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.getRuntimeConfig=void 0;var GX=(_t(),re(Sn)),KX=(tc(),re(rS)),XX=(Gt(),re(Xs)),QX=se(),YX=Zn(),CD=ft(),AD=dt(),JX=__(),ZX=RD(),eQ=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??CD.fromBase64,base64Encoder:t?.base64Encoder??CD.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??ZX.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??JX.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new GX.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new XX.NoAuthSigner}],logger:t?.logger??new QX.NoOpLogger,protocol:t?.protocol??new KX.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??YX.parseUrl,utf8Decoder:t?.utf8Decoder??AD.fromUtf8,utf8Encoder:t?.utf8Encoder??AD.toUtf8});Pf.getRuntimeConfig=eQ});var ND=S(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.getRuntimeConfig=void 0;var tQ=(Ha(),re(Ba)),rQ=tQ.__importDefault(cD()),PD=(_t(),re(Sn)),xD=fc(),xf=ur(),nQ=pc(),ID=Rn(),ii=vn(),OD=Bs(),sQ=hc(),iQ=ao(),oQ=TD(),aQ=se(),cQ=gc(),uQ=se(),lQ=t=>{(0,uQ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,cQ.resolveDefaultsModeConfig)(t),r=()=>e().then(aQ.loadConfigsForDefaultMode),n=(0,oQ.getRuntimeConfig)(t);(0,PD.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,ii.loadConfig)(PD.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??sQ.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,xD.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:rQ.default.version}),maxAttempts:t?.maxAttempts??(0,ii.loadConfig)(ID.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,ii.loadConfig)(xf.NODE_REGION_CONFIG_OPTIONS,{...xf.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:OD.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,ii.loadConfig)({...ID.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||iQ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??nQ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??OD.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,ii.loadConfig)(xf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,ii.loadConfig)(xf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,ii.loadConfig)(xD.NODE_APP_ID_CONFIG_OPTIONS,s)}};If.getRuntimeConfig=lQ});var eL=S(wt=>{"use strict";var DD=wa(),dQ=ba(),fQ=Ca(),LD=so(),pQ=ur(),Lc=(Gt(),re(Xs)),bo=(xe(),re(kl)),hQ=rc(),qc=bn(),MD=Rn(),Dr=se(),kD=__(),mQ=ND(),qD=Eo(),$D=we(),gQ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Lf={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},yQ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},EQ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),SQ=(t,e)=>{let r=Object.assign(qD.getAwsRegionExtensionConfiguration(t),Dr.getDefaultExtensionConfiguration(t),$D.getHttpHandlerExtensionConfiguration(t),yQ(t));return e.forEach(n=>n.configure(r)),Object.assign(t,qD.resolveAwsRegionExtensionConfiguration(r),Dr.resolveDefaultRuntimeConfig(r),$D.resolveHttpHandlerRuntimeConfig(r),EQ(r))},wo=class extends Dr.Client{constructor(...[r]){let n=mQ.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=gQ(n),i=LD.resolveUserAgentConfig(s),o=MD.resolveRetryConfig(i),a=pQ.resolveRegionConfig(o),c=DD.resolveHostHeaderConfig(a),u=qc.resolveEndpointConfig(c),l=kD.resolveHttpAuthSchemeConfig(u),d=SQ(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(bo.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(LD.getUserAgentPlugin(this.config)),this.middlewareStack.use(MD.getRetryPlugin(this.config)),this.middlewareStack.use(hQ.getContentLengthPlugin(this.config)),this.middlewareStack.use(DD.getHostHeaderPlugin(this.config)),this.middlewareStack.use(dQ.getLoggerPlugin(this.config)),this.middlewareStack.use(fQ.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Lc.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:kD.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new Lc.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Lc.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Ro=class FD extends Dr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,FD.prototype)}},UD=class BD extends Ro{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");Object.setPrototypeOf(this,BD.prototype)}},HD=class jD extends Ro{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,jD.prototype)}},VD=class WD extends Ro{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});f(this,"name","TooManyRequestsException");f(this,"$fault","client");Object.setPrototypeOf(this,WD.prototype)}},zD=class GD extends Ro{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});f(this,"name","UnauthorizedException");f(this,"$fault","client");Object.setPrototypeOf(this,GD.prototype)}},_Q="AccountInfo",vQ="AccountListType",wQ="AccessTokenType",bQ="GetRoleCredentials",RQ="GetRoleCredentialsRequest",CQ="GetRoleCredentialsResponse",AQ="InvalidRequestException",TQ="Logout",PQ="ListAccounts",xQ="ListAccountsRequest",IQ="ListAccountRolesRequest",OQ="ListAccountRolesResponse",NQ="ListAccountsResponse",DQ="ListAccountRoles",LQ="LogoutRequest",MQ="RoleCredentials",kQ="RoleInfo",qQ="RoleListType",$Q="ResourceNotFoundException",FQ="SecretAccessKeyType",UQ="SessionTokenType",BQ="TooManyRequestsException",HQ="UnauthorizedException",Mf="accountId",jQ="accessKeyId",VQ="accountList",WQ="accountName",kf="accessToken",KD="account_id",qf="client",$f="error",zQ="emailAddress",GQ="expiration",Ff="http",Uf="httpError",Bf="httpHeader",oi="httpQuery",Hf="message",XD="maxResults",QD="max_result",jf="nextToken",YD="next_token",KQ="roleCredentials",XQ="roleList",JD="roleName",QQ="role_name",ZD="smithy.ts.sdk.synthetic.com.amazonaws.sso",YQ="secretAccessKey",JQ="sessionToken",Vf="x-amz-sso_bearer_token",Te="com.amazonaws.sso",Wf=[0,Te,wQ,8,0],ZQ=[0,Te,FQ,8,0],e9=[0,Te,UQ,8,0],t9=[3,Te,_Q,0,[Mf,WQ,zQ],[0,0,0]],r9=[3,Te,RQ,0,[JD,Mf,kf],[[0,{[oi]:QQ}],[0,{[oi]:KD}],[()=>Wf,{[Bf]:Vf}]]],n9=[3,Te,CQ,0,[KQ],[[()=>d9,0]]],s9=[-3,Te,AQ,{[$f]:qf,[Uf]:400},[Hf],[0]];bo.TypeRegistry.for(Te).registerError(s9,UD);var i9=[3,Te,IQ,0,[jf,XD,kf,Mf],[[0,{[oi]:YD}],[1,{[oi]:QD}],[()=>Wf,{[Bf]:Vf}],[0,{[oi]:KD}]]],o9=[3,Te,OQ,0,[jf,XQ],[0,()=>E9]],a9=[3,Te,xQ,0,[jf,XD,kf],[[0,{[oi]:YD}],[1,{[oi]:QD}],[()=>Wf,{[Bf]:Vf}]]],c9=[3,Te,NQ,0,[jf,VQ],[0,()=>y9]],u9=[3,Te,LQ,0,[kf],[[()=>Wf,{[Bf]:Vf}]]],l9=[-3,Te,$Q,{[$f]:qf,[Uf]:404},[Hf],[0]];bo.TypeRegistry.for(Te).registerError(l9,HD);var d9=[3,Te,MQ,0,[jQ,YQ,JQ,GQ],[0,[()=>ZQ,0],[()=>e9,0],1]],f9=[3,Te,kQ,0,[JD,Mf],[0,0]],p9=[-3,Te,BQ,{[$f]:qf,[Uf]:429},[Hf],[0]];bo.TypeRegistry.for(Te).registerError(p9,VD);var h9=[-3,Te,HQ,{[$f]:qf,[Uf]:401},[Hf],[0]];bo.TypeRegistry.for(Te).registerError(h9,zD);var m9="unit",g9=[-3,ZD,"SSOServiceException",0,[],[]];bo.TypeRegistry.for(ZD).registerError(g9,Ro);var y9=[1,Te,vQ,0,()=>t9],E9=[1,Te,qQ,0,()=>f9],S9=[9,Te,bQ,{[Ff]:["GET","/federation/credentials",200]},()=>r9,()=>n9],_9=[9,Te,DQ,{[Ff]:["GET","/assignment/roles",200]},()=>i9,()=>o9],v9=[9,Te,PQ,{[Ff]:["GET","/assignment/accounts",200]},()=>a9,()=>c9],w9=[9,Te,TQ,{[Ff]:["POST","/logout",200]},()=>u9,()=>m9],Of=class extends Dr.Command.classBuilder().ep(Lf).m(function(e,r,n,s){return[qc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(S9).build(){},Mc=class extends Dr.Command.classBuilder().ep(Lf).m(function(e,r,n,s){return[qc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(_9).build(){},kc=class extends Dr.Command.classBuilder().ep(Lf).m(function(e,r,n,s){return[qc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(v9).build(){},Nf=class extends Dr.Command.classBuilder().ep(Lf).m(function(e,r,n,s){return[qc.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(w9).build(){},b9={GetRoleCredentialsCommand:Of,ListAccountRolesCommand:Mc,ListAccountsCommand:kc,LogoutCommand:Nf},Df=class extends wo{};Dr.createAggregatedClient(b9,Df);var R9=Lc.createPaginator(wo,Mc,"nextToken","nextToken","maxResults"),C9=Lc.createPaginator(wo,kc,"nextToken","nextToken","maxResults");Object.defineProperty(wt,"$Command",{enumerable:!0,get:function(){return Dr.Command}});Object.defineProperty(wt,"__Client",{enumerable:!0,get:function(){return Dr.Client}});wt.GetRoleCredentialsCommand=Of;wt.InvalidRequestException=UD;wt.ListAccountRolesCommand=Mc;wt.ListAccountsCommand=kc;wt.LogoutCommand=Nf;wt.ResourceNotFoundException=HD;wt.SSO=Df;wt.SSOClient=wo;wt.SSOServiceException=Ro;wt.TooManyRequestsException=VD;wt.UnauthorizedException=zD;wt.paginateListAccountRoles=R9;wt.paginateListAccounts=C9});var rL=S(R_=>{"use strict";var tL=eL();Object.defineProperty(R_,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return tL.GetRoleCredentialsCommand}});Object.defineProperty(R_,"SSOClient",{enumerable:!0,get:function(){return tL.SSOClient}})});var C_=S(Gf=>{"use strict";var Lr=Lt(),zf=_n(),nL=(xr(),re(ts)),A9=aD(),iL=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),$c=!1,sL=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:d,logger:m})=>{let g,E="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let Ge=await A9.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:d})();g={accessToken:Ge.token,expiresAt:new Date(Ge.expiration).toISOString()}}catch(Ge){throw new Lr.CredentialsProviderError(Ge.message,{tryNextLink:$c,logger:m})}else try{g=await zf.getSSOTokenFromFile(t)}catch{throw new Lr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${E}`,{tryNextLink:$c,logger:m})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new Lr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${E}`,{tryNextLink:$c,logger:m});let{accessToken:b}=g,{SSOClient:P,GetRoleCredentialsCommand:T}=await Promise.resolve().then(function(){return rL()}),O=i||new P(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n,userAgentAppId:o?.userAgentAppId??a?.userAgentAppId})),M;try{M=await O.send(new T({accountId:r,roleName:s,accessToken:b}))}catch(Ge){throw new Lr.CredentialsProviderError(Ge,{tryNextLink:$c,logger:m})}let{roleCredentials:{accessKeyId:q,secretAccessKey:B,sessionToken:ce,expiration:Je,credentialScope:ie,accountId:Z}={}}=M;if(!q||!B||!ce||!Je)throw new Lr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:$c,logger:m});let ve={accessKeyId:q,secretAccessKey:B,sessionToken:ce,expiration:new Date(Je),...ie&&{credentialScope:ie},...Z&&{accountId:Z}};return e?nL.setCredentialFeature(ve,"CREDENTIALS_SSO","s"):nL.setCredentialFeature(ve,"CREDENTIALS_SSO_LEGACY","u"),ve},oL=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=t;if(!r||!n||!s||!i)throw new Lr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},T9=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t,{ssoClient:a}=t,c=zf.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!i&&!o){let l=(await zf.parseKnownFiles(t))[c];if(!l)throw new Lr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!iL(l))throw new Lr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(l?.sso_session){let T=(await zf.loadSsoSessionData(t))[l.sso_session],O=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==T.sso_region)throw new Lr.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:t.logger});if(r&&r!==T.sso_start_url)throw new Lr.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:t.logger});l.sso_region=T.sso_region,l.sso_start_url=T.sso_start_url}let{sso_start_url:d,sso_account_id:m,sso_region:g,sso_role_name:E,sso_session:b}=oL(l,t.logger);return sL({ssoStartUrl:d,ssoSession:b,ssoAccountId:m,ssoRegion:g,ssoRoleName:E,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!i)throw new Lr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return sL({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Gf.fromSSO=T9;Gf.isSsoProfile=iL;Gf.validateSsoProfile=oL});function P9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function x9(t){return{schemeId:"smithy.api#noAuth"}}var Fc,aL,cL,I9,uL,A_=w(()=>{_t();Fc=A(It());Uc();aL=async(t,e,r)=>({operation:(0,Fc.getSmithyContext)(e).operation,region:await(0,Fc.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});cL=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(x9(t));break}default:e.push(P9(t))}return e},I9=t=>Object.assign(t,{stsClientCtor:en}),uL=t=>{let e=I9(t),r=ei(e);return Object.assign(r,{authSchemePreference:(0,Fc.normalizeProvider)(t.authSchemePreference??[])})}});var lL,Kf,Xf=w(()=>{lL=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Kf={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var vL,J,de,fe,bs,ws,ht,wL,bL,RL,Le,dL,tn,Co,P_,fL,T_,CL,pL,mt,hL,AL,TL,bt,sr,mL,PL,xL,gL,IL,yL,EL,SL,_L,O9,OL,NL=w(()=>{vL="required",J="type",de="fn",fe="argv",bs="ref",ws="booleanEquals",ht="stringEquals",wL="sigv4",bL="sts",RL="us-east-1",Le="endpoint",dL="https://sts.{Region}.{PartitionResult#dnsSuffix}",tn="tree",Co="error",P_="getAttr",fL={[vL]:!1,[J]:"string"},T_={[vL]:!0,default:!1,[J]:"boolean"},CL={[bs]:"Endpoint"},pL={[de]:"isSet",[fe]:[{[bs]:"Region"}]},mt={[bs]:"Region"},hL={[de]:"aws.partition",[fe]:[mt],assign:"PartitionResult"},AL={[bs]:"UseFIPS"},TL={[bs]:"UseDualStack"},bt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:wL,signingName:bL,signingRegion:RL}]},headers:{}},sr={},mL={conditions:[{[de]:ht,[fe]:[mt,"aws-global"]}],[Le]:bt,[J]:Le},PL={[de]:ws,[fe]:[AL,!0]},xL={[de]:ws,[fe]:[TL,!0]},gL={[de]:P_,[fe]:[{[bs]:"PartitionResult"},"supportsFIPS"]},IL={[bs]:"PartitionResult"},yL={[de]:ws,[fe]:[!0,{[de]:P_,[fe]:[IL,"supportsDualStack"]}]},EL=[{[de]:"isSet",[fe]:[CL]}],SL=[PL],_L=[xL],O9={version:"1.0",parameters:{Region:fL,UseDualStack:T_,UseFIPS:T_,Endpoint:fL,UseGlobalEndpoint:T_},rules:[{conditions:[{[de]:ws,[fe]:[{[bs]:"UseGlobalEndpoint"},!0]},{[de]:"not",[fe]:EL},pL,hL,{[de]:ws,[fe]:[AL,!1]},{[de]:ws,[fe]:[TL,!1]}],rules:[{conditions:[{[de]:ht,[fe]:[mt,"ap-northeast-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-south-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-southeast-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-southeast-2"]}],endpoint:bt,[J]:Le},mL,{conditions:[{[de]:ht,[fe]:[mt,"ca-central-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-central-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-north-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-2"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-3"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"sa-east-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,RL]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-east-2"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-west-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-west-2"]}],endpoint:bt,[J]:Le},{endpoint:{url:dL,properties:{authSchemes:[{name:wL,signingName:bL,signingRegion:"{Region}"}]},headers:sr},[J]:Le}],[J]:tn},{conditions:EL,rules:[{conditions:SL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[J]:Co},{conditions:_L,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[J]:Co},{endpoint:{url:CL,properties:sr,headers:sr},[J]:Le}],[J]:tn},{conditions:[pL],rules:[{conditions:[hL],rules:[{conditions:[PL,xL],rules:[{conditions:[{[de]:ws,[fe]:[!0,gL]},yL],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sr,headers:sr},[J]:Le}],[J]:tn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[J]:Co}],[J]:tn},{conditions:SL,rules:[{conditions:[{[de]:ws,[fe]:[gL,!0]}],rules:[{conditions:[{[de]:ht,[fe]:[{[de]:P_,[fe]:[IL,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:sr,headers:sr},[J]:Le},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:sr,headers:sr},[J]:Le}],[J]:tn},{error:"FIPS is enabled but this partition does not support FIPS",[J]:Co}],[J]:tn},{conditions:_L,rules:[{conditions:[yL],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:sr,headers:sr},[J]:Le}],[J]:tn},{error:"DualStack is enabled but this partition does not support DualStack",[J]:Co}],[J]:tn},mL,{endpoint:{url:dL,properties:sr,headers:sr},[J]:Le}],[J]:tn}],[J]:tn},{error:"Invalid Configuration: Missing Region",[J]:Co}]},OL=O9});var DL,Ao,N9,LL,ML=w(()=>{DL=A(Ui()),Ao=A(Ys());NL();N9=new Ao.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),LL=(t,e={})=>N9.get(t,()=>(0,Ao.resolveEndpoint)(OL,{endpointParams:t,logger:e.logger}));Ao.customEndpointFunctions.aws=DL.awsEndpointFunctions});var kL,qL,Qf,Yf,$L,FL=w(()=>{_t();Gt();kL=A(se()),qL=A(Zn()),Qf=A(ft()),Yf=A(dt());A_();ML();$L=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??Qf.fromBase64,base64Encoder:t?.base64Encoder??Qf.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??LL,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??cL,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Kt},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new pn}],logger:t?.logger??new kL.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??qL.parseUrl,utf8Decoder:t?.utf8Decoder??Yf.fromUtf8,utf8Encoder:t?.utf8Encoder??Yf.toUtf8})});var Jf,Cs,UL,Zf,Rs,ep,BL,HL,jL,VL,WL,zL,GL=w(()=>{s_();_t();Jf=A(fc()),Cs=A(ur());Gt();UL=A(pc()),Zf=A(Rn()),Rs=A(vn()),ep=A(Bs()),BL=A(hc()),HL=A(ao());FL();jL=A(se()),VL=A(gc()),WL=A(se()),zL=t=>{(0,WL.emitWarningIfUnsupportedVersion)(process.version);let e=(0,VL.resolveDefaultsModeConfig)(t),r=()=>e().then(jL.loadConfigsForDefaultMode),n=$L(t);Bi(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Rs.loadConfig)(Vi,s),bodyLengthChecker:t?.bodyLengthChecker??BL.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Jf.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:df.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await t.credentialDefaultProvider(o?.__config||{})()),signer:new Kt},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new pn}],maxAttempts:t?.maxAttempts??(0,Rs.loadConfig)(Zf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Rs.loadConfig)(Cs.NODE_REGION_CONFIG_OPTIONS,{...Cs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:ep.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Rs.loadConfig)({...Zf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||HL.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??UL.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??ep.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Rs.loadConfig)(Cs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Rs.loadConfig)(Cs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Rs.loadConfig)(Jf.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var KL,XL,QL=w(()=>{KL=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},XL=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var tp,rp,np,YL,JL=w(()=>{tp=A(Eo()),rp=A(we()),np=A(se());QL();YL=(t,e)=>{let r=Object.assign((0,tp.getAwsRegionExtensionConfiguration)(t),(0,np.getDefaultExtensionConfiguration)(t),(0,rp.getHttpHandlerExtensionConfiguration)(t),KL(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,tp.resolveAwsRegionExtensionConfiguration)(r),(0,np.resolveDefaultRuntimeConfig)(r),(0,rp.resolveHttpHandlerRuntimeConfig)(r),XL(r))}});var sp,ZL,e1,ip,t1,r1,n1,op,x_,en,Uc=w(()=>{sp=A(wa()),ZL=A(ba()),e1=A(Ca()),ip=A(so()),t1=A(ur());Gt();r1=A(rc()),n1=A(bn()),op=A(Rn()),x_=A(se());A_();Xf();GL();JL();en=class extends x_.Client{constructor(...[r]){let n=zL(r||{});super(n);f(this,"config");this.initConfig=n;let s=lL(n),i=(0,ip.resolveUserAgentConfig)(s),o=(0,op.resolveRetryConfig)(i),a=(0,t1.resolveRegionConfig)(o),c=(0,sp.resolveHostHeaderConfig)(a),u=(0,n1.resolveEndpointConfig)(c),l=uL(u),d=YL(l,r?.extensions||[]);this.config=d,this.middlewareStack.use((0,ip.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,op.getRetryPlugin)(this.config)),this.middlewareStack.use((0,r1.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,sp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,ZL.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,e1.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Ta(this.config,{httpAuthSchemeParametersProvider:aL,identityProviderConfigProvider:async m=>new Ks({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(xa(this.config))}destroy(){super.destroy()}}});var s1,Qt,ap=w(()=>{s1=A(se()),Qt=class t extends s1.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var I_,O_,N_,Bc,Hc,jc,Vc,Wc,zc,D_,L_,Gc,Kc=w(()=>{I_=A(se());ap();O_=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:I_.SENSITIVE_STRING}}),N_=t=>({...t,...t.Credentials&&{Credentials:O_(t.Credentials)}}),Bc=class t extends Qt{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Hc=class t extends Qt{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});f(this,"name","MalformedPolicyDocumentException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},jc=class t extends Qt{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});f(this,"name","PackedPolicyTooLargeException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Vc=class t extends Qt{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});f(this,"name","RegionDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Wc=class t extends Qt{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});f(this,"name","IDPRejectedClaimException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},zc=class t extends Qt{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});f(this,"name","InvalidIdentityTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},D_=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:I_.SENSITIVE_STRING}}),L_=t=>({...t,...t.Credentials&&{Credentials:O_(t.Credentials)}}),Gc=class t extends Qt{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});f(this,"name","IDPCommunicationErrorException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}}});var i1,te,o1,a1,c1,u1,l1,D9,L9,M9,k9,q9,$9,F9,U9,B9,d1,H9,j9,V9,W9,z9,G9,f1,K9,X9,p1,Q9,Y9,J9,Z9,eY,tY,rY,xn,nY,h1,m1,g1,y1,M_,sY,k_,To,iY,q_,$_,Po,F_,xo,U_,B_,H_,Io,Oo,j_,V_,W_,No,z_,Do,Lo,G_,K_,Pn,X_,Q_,Y_,J_,Z_,E1,ev,tv,rv,Xe,S1,oY,nv=w(()=>{_t();i1=A(we()),te=A(se());Kc();ap();o1=async(t,e)=>{let r=m1,n;return n=S1({...U9(t,e),[y1]:sY,[E1]:g1}),h1(e,r,"/",void 0,n)},a1=async(t,e)=>{let r=m1,n;return n=S1({...B9(t,e),[y1]:iY,[E1]:g1}),h1(e,r,"/",void 0,n)},c1=async(t,e)=>{if(t.statusCode>=300)return l1(t,e);let r=await eo(t.body,e),n={};return n=K9(r.AssumeRoleResult,e),{$metadata:xn(t),...n}},u1=async(t,e)=>{if(t.statusCode>=300)return l1(t,e);let r=await eo(t.body,e),n={};return n=X9(r.AssumeRoleWithWebIdentityResult,e),{$metadata:xn(t),...n}},l1=async(t,e)=>{let r={...t,body:await Id(t.body,e)},n=oY(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await D9(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await q9(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await $9(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await F9(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await L9(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await M9(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await k9(r,e);default:let s=r.body;return nY({output:t,parsedBody:s.Error,errorCode:n})}},D9=async(t,e)=>{let r=t.body,n=Q9(r.Error,e),s=new Bc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},L9=async(t,e)=>{let r=t.body,n=Y9(r.Error,e),s=new Gc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},M9=async(t,e)=>{let r=t.body,n=J9(r.Error,e),s=new Wc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},k9=async(t,e)=>{let r=t.body,n=Z9(r.Error,e),s=new zc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},q9=async(t,e)=>{let r=t.body,n=eY(r.Error,e),s=new Hc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},$9=async(t,e)=>{let r=t.body,n=tY(r.Error,e),s=new jc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},F9=async(t,e)=>{let r=t.body,n=rY(r.Error,e),s=new Vc({$metadata:xn(t),...n});return(0,te.decorateServiceException)(s,r)},U9=(t,e)=>{let r={};if(t[Do]!=null&&(r[Do]=t[Do]),t[Lo]!=null&&(r[Lo]=t[Lo]),t[Oo]!=null){let n=d1(t[Oo],e);t[Oo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(t[Io]!=null&&(r[Io]=t[Io]),t[xo]!=null&&(r[xo]=t[xo]),t[Y_]!=null){let n=G9(t[Y_],e);t[Y_]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(t[Z_]!=null){let n=z9(t[Z_],e);t[Z_]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(t[B_]!=null&&(r[B_]=t[B_]),t[X_]!=null&&(r[X_]=t[X_]),t[J_]!=null&&(r[J_]=t[J_]),t[Pn]!=null&&(r[Pn]=t[Pn]),t[V_]!=null){let n=V9(t[V_],e);t[V_]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},B9=(t,e)=>{let r={};if(t[Do]!=null&&(r[Do]=t[Do]),t[Lo]!=null&&(r[Lo]=t[Lo]),t[tv]!=null&&(r[tv]=t[tv]),t[W_]!=null&&(r[W_]=t[W_]),t[Oo]!=null){let n=d1(t[Oo],e);t[Oo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return t[Io]!=null&&(r[Io]=t[Io]),t[xo]!=null&&(r[xo]=t[xo]),r},d1=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=H9(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},H9=(t,e)=>{let r={};return t[rv]!=null&&(r[rv]=t[rv]),r},j9=(t,e)=>{let r={};return t[j_]!=null&&(r[j_]=t[j_]),t[F_]!=null&&(r[F_]=t[F_]),r},V9=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=j9(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},W9=(t,e)=>{let r={};return t[H_]!=null&&(r[H_]=t[H_]),t[ev]!=null&&(r[ev]=t[ev]),r},z9=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},G9=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=W9(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},f1=(t,e)=>{let r={};return t[k_]!=null&&(r[k_]=(0,te.expectString)(t[k_])),t[q_]!=null&&(r[q_]=(0,te.expectString)(t[q_])),r},K9=(t,e)=>{let r={};return t[Po]!=null&&(r[Po]=p1(t[Po],e)),t[To]!=null&&(r[To]=f1(t[To],e)),t[No]!=null&&(r[No]=(0,te.strictParseInt32)(t[No])),t[Pn]!=null&&(r[Pn]=(0,te.expectString)(t[Pn])),r},X9=(t,e)=>{let r={};return t[Po]!=null&&(r[Po]=p1(t[Po],e)),t[K_]!=null&&(r[K_]=(0,te.expectString)(t[K_])),t[To]!=null&&(r[To]=f1(t[To],e)),t[No]!=null&&(r[No]=(0,te.strictParseInt32)(t[No])),t[z_]!=null&&(r[z_]=(0,te.expectString)(t[z_])),t[$_]!=null&&(r[$_]=(0,te.expectString)(t[$_])),t[Pn]!=null&&(r[Pn]=(0,te.expectString)(t[Pn])),r},p1=(t,e)=>{let r={};return t[M_]!=null&&(r[M_]=(0,te.expectString)(t[M_])),t[G_]!=null&&(r[G_]=(0,te.expectString)(t[G_])),t[Q_]!=null&&(r[Q_]=(0,te.expectString)(t[Q_])),t[U_]!=null&&(r[U_]=(0,te.expectNonNull)((0,te.parseRfc3339DateTimeWithOffset)(t[U_]))),r},Q9=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},Y9=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},J9=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},Z9=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},eY=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},tY=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},rY=(t,e)=>{let r={};return t[Xe]!=null&&(r[Xe]=(0,te.expectString)(t[Xe])),r},xn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),nY=(0,te.withBaseException)(Qt),h1=async(t,e,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await t.endpoint(),u={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new i1.HttpRequest(u)},m1={"content-type":"application/x-www-form-urlencoded"},g1="2011-06-15",y1="Action",M_="AccessKeyId",sY="AssumeRole",k_="AssumedRoleId",To="AssumedRoleUser",iY="AssumeRoleWithWebIdentity",q_="Arn",$_="Audience",Po="Credentials",F_="ContextAssertion",xo="DurationSeconds",U_="Expiration",B_="ExternalId",H_="Key",Io="Policy",Oo="PolicyArns",j_="ProviderArn",V_="ProvidedContexts",W_="ProviderId",No="PackedPolicySize",z_="Provider",Do="RoleArn",Lo="RoleSessionName",G_="SecretAccessKey",K_="SubjectFromWebIdentityToken",Pn="SourceIdentity",X_="SerialNumber",Q_="SessionToken",Y_="Tags",J_="TokenCode",Z_="TransitiveTagKeys",E1="Version",ev="Value",tv="WebIdentityToken",rv="arn",Xe="message",S1=t=>Object.entries(t).map(([e,r])=>(0,te.extendedEncodeURIComponent)(e)+"="+(0,te.extendedEncodeURIComponent)(r)).join("&"),oY=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var _1,v1,w1,ai,cp=w(()=>{_1=A(bn()),v1=A(Pa()),w1=A(se());Xf();Kc();nv();ai=class extends w1.Command.classBuilder().ep(Kf).m(function(e,r,n,s){return[(0,v1.getSerdePlugin)(n,this.serialize,this.deserialize),(0,_1.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,N_).ser(o1).de(c1).build(){}});var b1,R1,C1,ci,up=w(()=>{b1=A(bn()),R1=A(Pa()),C1=A(se());Xf();Kc();nv();ci=class extends C1.Command.classBuilder().ep(Kf).m(function(e,r,n,s){return[(0,R1.getSerdePlugin)(n,this.serialize,this.deserialize),(0,b1.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(D_,L_).ser(a1).de(u1).build(){}});var A1,aY,lp,T1=w(()=>{A1=A(se());cp();up();Uc();aY={AssumeRoleCommand:ai,AssumeRoleWithWebIdentityCommand:ci},lp=class extends en{};(0,A1.createAggregatedClient)(aY,lp)});var P1=w(()=>{cp();up()});var x1=w(()=>{Kc()});var I1,O1,N1,D1,L1,M1,k1=w(()=>{xr();I1=A(Eo());cp();up();O1=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},N1=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e,o=await(0,I1.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s??i??o},D1=(t,e)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:l=t?.parentClientConfig?.logger,profile:d=t?.parentClientConfig?.profile,region:m,requestHandler:g=t?.parentClientConfig?.requestHandler,credentialProviderLogger:E,userAgentAppId:b=t?.parentClientConfig?.userAgentAppId}=t,P=await N1(m,t?.parentClientConfig?.region,E,{logger:l,profile:d}),T=!M1(g);r=new e({...t,userAgentAppId:b,profile:d,credentialDefaultProvider:()=>async()=>n,region:P,requestHandler:T?g:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new ai(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=O1(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return es(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},L1=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:l,requestHandler:d=t?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:g=t?.parentClientConfig?.userAgentAppId}=t,E=await N1(l,t?.parentClientConfig?.region,m,{logger:c,profile:u}),b=!M1(d);r=new e({...t,userAgentAppId:g,profile:u,region:E,requestHandler:b?d:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new ci(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=O1(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&es(a,"RESOLVED_ACCOUNT_ID","T"),es(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},M1=t=>t?.metadata?.handlerProtocol==="h2"});var q1,$1,F1,cY,U1=w(()=>{k1();Uc();q1=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,$1=(t={},e)=>D1(t,q1(en,e)),F1=(t={},e)=>L1(t,q1(en,e)),cY=t=>e=>t({roleAssumer:$1(e),roleAssumerWithWebIdentity:F1(e),...e})});var sv={};xt(sv,{AssumeRoleCommand:()=>ai,AssumeRoleResponseFilterSensitiveLog:()=>N_,AssumeRoleWithWebIdentityCommand:()=>ci,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>D_,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>L_,CredentialsFilterSensitiveLog:()=>O_,ExpiredTokenException:()=>Bc,IDPCommunicationErrorException:()=>Gc,IDPRejectedClaimException:()=>Wc,InvalidIdentityTokenException:()=>zc,MalformedPolicyDocumentException:()=>Hc,PackedPolicyTooLargeException:()=>jc,RegionDisabledException:()=>Vc,STS:()=>lp,STSClient:()=>en,STSServiceException:()=>Qt,__Client:()=>x_.Client,decorateDefaultCredentialProvider:()=>cY,getDefaultRoleAssumer:()=>$1,getDefaultRoleAssumerWithWebIdentity:()=>F1});var iv=w(()=>{Uc();T1();P1();x1();U1();ap()});var cv=S(B1=>{"use strict";var av=_n(),ov=Lt(),uY=require("child_process"),lY=require("util"),dY=(xr(),re(ts)),fY=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return dY.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},pY=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let i=lY.promisify(av.externalDataInterceptor?.getTokenRecord?.().exec??uY.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return fY(t,a,e)}catch(o){throw new ov.CredentialsProviderError(o.message,{logger:r})}}else throw new ov.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new ov.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},hY=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await av.parseKnownFiles(t);return pY(av.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};B1.fromProcess=hY});var uv=S(rn=>{"use strict";var mY=rn&&rn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gY=rn&&rn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yY=rn&&rn.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&mY(r,e,n[s]);return gY(r,e),r}}();Object.defineProperty(rn,"__esModule",{value:!0});rn.fromWebToken=void 0;var EY=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>yY((iv(),re(sv))));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};rn.fromWebToken=EY});var j1=S(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.fromTokenFile=void 0;var SY=(xr(),re(ts)),_Y=Lt(),vY=_n(),wY=require("fs"),bY=uv(),H1="AWS_WEB_IDENTITY_TOKEN_FILE",RY="AWS_ROLE_ARN",CY="AWS_ROLE_SESSION_NAME",AY=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[H1],n=t?.roleArn??process.env[RY],s=t?.roleSessionName??process.env[CY];if(!r||!n)throw new _Y.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,bY.fromWebToken)({...t,webIdentityToken:vY.externalDataInterceptor?.getTokenRecord?.()[r]??(0,wY.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[H1]&&(0,SY.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};dp.fromTokenFile=AY});var lv=S(Xc=>{"use strict";var V1=j1(),W1=uv();Object.keys(V1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Xc,t)&&Object.defineProperty(Xc,t,{enumerable:!0,get:function(){return V1[t]}})});Object.keys(W1).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Xc,t)&&Object.defineProperty(Xc,t,{enumerable:!0,get:function(){return W1[t]}})})});var Y1=S(Q1=>{"use strict";var fv=_n(),Qc=Lt(),As=(xr(),re(ts)),TY=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>A(t_())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>A(lc()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Qc.chain(i(s??{}),o(s))().then(dv)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>A(lc()));return async()=>i(s)().then(dv)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>A(GS()));return async()=>i(s)().then(dv)}};if(t in n)return n[t];throw new Qc.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},dv=t=>As.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),PY=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(xY(t,{profile:e,logger:r})||IY(t,{profile:e,logger:r})),xY=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},IY=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},OY=async(t,e,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(iv(),sv));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Qc.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${fv.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${t}]`}`);let c=o?s(o,e,r,{...n,[o]:!0},z1(e[o]??{})):(await TY(i.credential_source,t,r.logger)(r))();if(z1(i))return c.then(u=>As.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Qc.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let d=await c;return r.roleAssumer(d,u).then(m=>As.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},z1=t=>!t.role_arn&&!!t.credential_source,NY=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",DY=async(t,e)=>Promise.resolve().then(()=>A(cv())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>As.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),LY=async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>A(C_()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>e.sso_session?As.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):As.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},MY=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),G1=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,K1=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return As.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},kY=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,qY=async(t,e)=>Promise.resolve().then(()=>A(lv())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>As.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),X1=async(t,e,r,n={},s=!1)=>{let i=e[t];if(Object.keys(n).length>0&&G1(i))return K1(i,r);if(s||PY(i,{profile:t,logger:r.logger}))return OY(t,e,r,n,X1);if(G1(i))return K1(i,r);if(kY(i))return qY(i,r);if(NY(i))return DY(r,t);if(MY(i))return await LY(t,i,r);throw new Qc.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},$Y=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await fv.parseKnownFiles(r);return X1(fv.getProfileName({profile:t.profile??e?.profile}),n,r)};Q1.fromIni=$Y});var tM=S(fp=>{"use strict";var pv=GS(),Yc=Lt(),FY=_n(),J1="AWS_EC2_METADATA_DISABLED",UY=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>A(lc()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>A(t_()));return Yc.chain(i(t),n(t))}return process.env[J1]&&process.env[J1]!=="false"?async()=>{throw new Yc.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function BY(t,e){let r=HY(t),n,s,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),n)await n;else if(!i||e?.(i))if(i)s||(s=r(a).then(c=>{i=c,s=void 0}));else return n=r(a).then(c=>{i=c,n=void 0}),o(a);return i};return o}var HY=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},Z1=!1,jY=(t={})=>BY([async()=>{if(t.profile??process.env[FY.ENV_PROFILE])throw process.env[pv.ENV_KEY]&&process.env[pv.ENV_SECRET]&&(Z1||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),Z1=!0)),new Yc.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),pv.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t;if(!r&&!n&&!s&&!i&&!o)throw new Yc.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>A(C_()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>A(Y1()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>A(cv()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>A(lv()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await UY(t))()),async()=>{throw new Yc.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],eM),VY=t=>t?.expiration!==void 0,eM=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;fp.credentialsTreatedAsExpired=eM;fp.credentialsWillNeedRefresh=VY;fp.defaultProvider=jY});var iM=S(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.getRuntimeConfig=void 0;var rM=(_t(),re(Sn)),WY=(tc(),re(rS)),zY=PS(),GY=se(),KY=Zn(),nM=ft(),sM=dt(),XY=zS(),QY=WS(),YY=t=>({apiVersion:"2015-10-07",base64Decoder:t?.base64Decoder??nM.fromBase64,base64Encoder:t?.base64Encoder??nM.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??QY.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??XY.defaultEventBridgeHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new rM.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new rM.AwsSdkSigV4ASigner}],logger:t?.logger??new GY.NoOpLogger,protocol:t?.protocol??new WY.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.eventbridge",serviceTarget:"AWSEvents",awsQueryCompatible:!1}),serviceId:t?.serviceId??"EventBridge",signerConstructor:t?.signerConstructor??zY.SignatureV4MultiRegion,urlParser:t?.urlParser??KY.parseUrl,utf8Decoder:t?.utf8Decoder??sM.fromUtf8,utf8Encoder:t?.utf8Encoder??sM.toUtf8});pp.getRuntimeConfig=YY});var uM=S(mp=>{"use strict";Object.defineProperty(mp,"__esModule",{value:!0});mp.getRuntimeConfig=void 0;var JY=(Ha(),re(Ba)),ZY=JY.__importDefault(yO()),hv=(_t(),re(Sn)),e7=tM(),oM=fc(),hp=ur(),t7=pc(),aM=Rn(),Ts=vn(),cM=Bs(),r7=hc(),n7=ao(),s7=iM(),i7=se(),o7=gc(),a7=se(),c7=t=>{(0,a7.emitWarningIfUnsupportedVersion)(process.version);let e=(0,o7.resolveDefaultsModeConfig)(t),r=()=>e().then(i7.loadConfigsForDefaultMode),n=(0,s7.getRuntimeConfig)(t);(0,hv.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ts.loadConfig)(hv.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??r7.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??e7.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,oM.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:ZY.default.version}),maxAttempts:t?.maxAttempts??(0,Ts.loadConfig)(aM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ts.loadConfig)(hp.NODE_REGION_CONFIG_OPTIONS,{...hp.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:cM.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ts.loadConfig)({...aM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||n7.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??t7.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:t?.sigv4aSigningRegionSet??(0,Ts.loadConfig)(hv.NODE_SIGV4A_CONFIG_OPTIONS,s),streamCollector:t?.streamCollector??cM.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ts.loadConfig)(hp.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ts.loadConfig)(hp.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ts.loadConfig)(oM.NODE_APP_ID_CONFIG_OPTIONS,s)}};mp.getRuntimeConfig=c7});var Wk=S(D=>{"use strict";var lM=wa(),u7=ba(),l7=Ca(),dM=so(),d7=ur(),mv=(Gt(),re(Xs)),qt=(xe(),re(kl)),f7=rc(),H=bn(),fM=Rn(),U=se(),pM=zS(),p7=uM(),hM=Eo(),mM=we(),h7=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"events"}),j={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},m7=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},g7=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),y7=(t,e)=>{let r=Object.assign(hM.getAwsRegionExtensionConfiguration(t),U.getDefaultExtensionConfiguration(t),mM.getHttpHandlerExtensionConfiguration(t),m7(t));return e.forEach(n=>n.configure(r)),Object.assign(t,hM.resolveAwsRegionExtensionConfiguration(r),U.resolveDefaultRuntimeConfig(r),mM.resolveHttpHandlerRuntimeConfig(r),g7(r))},gp=class extends U.Client{constructor(...[r]){let n=p7.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=h7(n),i=dM.resolveUserAgentConfig(s),o=fM.resolveRetryConfig(i),a=d7.resolveRegionConfig(o),c=lM.resolveHostHeaderConfig(a),u=H.resolveEndpointConfig(c),l=pM.resolveHttpAuthSchemeConfig(u),d=y7(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(qt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(dM.getUserAgentPlugin(this.config)),this.middlewareStack.use(fM.getRetryPlugin(this.config)),this.middlewareStack.use(f7.getContentLengthPlugin(this.config)),this.middlewareStack.use(lM.getHostHeaderPlugin(this.config)),this.middlewareStack.use(u7.getLoggerPlugin(this.config)),this.middlewareStack.use(l7.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(mv.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:pM.defaultEventBridgeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new mv.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials,"aws.auth#sigv4a":m.credentials})})),this.middlewareStack.use(mv.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},$t=class gM extends U.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,gM.prototype)}},yM=class EM extends $t{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");Object.setPrototypeOf(this,EM.prototype)}},SM=class _M extends $t{constructor(r){super({name:"ConcurrentModificationException",$fault:"client",...r});f(this,"name","ConcurrentModificationException");f(this,"$fault","client");Object.setPrototypeOf(this,_M.prototype)}},vM=class wM extends $t{constructor(r){super({name:"InternalException",$fault:"server",...r});f(this,"name","InternalException");f(this,"$fault","server");Object.setPrototypeOf(this,wM.prototype)}},bM=class RM extends $t{constructor(r){super({name:"InvalidStateException",$fault:"client",...r});f(this,"name","InvalidStateException");f(this,"$fault","client");Object.setPrototypeOf(this,RM.prototype)}},CM=class AM extends $t{constructor(r){super({name:"OperationDisabledException",$fault:"client",...r});f(this,"name","OperationDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,AM.prototype)}},TM=class PM extends $t{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,PM.prototype)}},E7={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},S7={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",OPTIONS:"OPTIONS",PATCH:"PATCH",POST:"POST",PUT:"PUT"},_7={CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DISABLED:"DISABLED",ENABLED:"ENABLED",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},v7={DISABLED:"DISABLED",ENABLED:"ENABLED"},w7={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",RUNNING:"RUNNING",STARTING:"STARTING"},xM=class IM extends $t{constructor(r){super({name:"IllegalStatusException",$fault:"client",...r});f(this,"name","IllegalStatusException");f(this,"$fault","client");Object.setPrototypeOf(this,IM.prototype)}},OM=class NM extends $t{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});f(this,"name","LimitExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,NM.prototype)}},DM=class LM extends $t{constructor(r){super({name:"ResourceAlreadyExistsException",$fault:"client",...r});f(this,"name","ResourceAlreadyExistsException");f(this,"$fault","client");Object.setPrototypeOf(this,LM.prototype)}},MM=class kM extends $t{constructor(r){super({name:"InvalidEventPatternException",$fault:"client",...r});f(this,"name","InvalidEventPatternException");f(this,"$fault","client");Object.setPrototypeOf(this,kM.prototype)}},b7={API_KEY:"API_KEY",BASIC:"BASIC",OAUTH_CLIENT_CREDENTIALS:"OAUTH_CLIENT_CREDENTIALS"},R7={GET:"GET",POST:"POST",PUT:"PUT"},C7={ACTIVE:"ACTIVE",AUTHORIZED:"AUTHORIZED",AUTHORIZING:"AUTHORIZING",CREATING:"CREATING",DEAUTHORIZED:"DEAUTHORIZED",DEAUTHORIZING:"DEAUTHORIZING",DELETING:"DELETING",FAILED_CONNECTIVITY:"FAILED_CONNECTIVITY",UPDATING:"UPDATING"},qM=class $M extends $t{constructor(r){super({name:"ThrottlingException",$fault:"client",...r});f(this,"name","ThrottlingException");f(this,"$fault","client");Object.setPrototypeOf(this,$M.prototype)}},A7={DISABLED:"DISABLED",ENABLED:"ENABLED"},T7={ACTIVE:"ACTIVE",CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DELETE_FAILED:"DELETE_FAILED",DELETING:"DELETING",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},P7={FULL:"FULL",NONE:"NONE"},x7={ERROR:"ERROR",INFO:"INFO",OFF:"OFF",TRACE:"TRACE"},FM=class UM extends $t{constructor(r){super({name:"ManagedRuleException",$fault:"client",...r});f(this,"name","ManagedRuleException");f(this,"$fault","client");Object.setPrototypeOf(this,UM.prototype)}},I7={ACTIVE:"ACTIVE",DELETED:"DELETED",PENDING:"PENDING"},O7={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS:"ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS"},N7={EC2:"EC2",EXTERNAL:"EXTERNAL",FARGATE:"FARGATE"},D7={DISTINCT_INSTANCE:"distinctInstance",MEMBER_OF:"memberOf"},L7={BINPACK:"binpack",RANDOM:"random",SPREAD:"spread"},M7={TASK_DEFINITION:"TASK_DEFINITION"},BM=class HM extends $t{constructor(r){super({name:"PolicyLengthExceededException",$fault:"client",...r});f(this,"name","PolicyLengthExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,HM.prototype)}},k7="Archive",gv="ArchiveArn",q7="ApiDestination",vh="ApiDestinationArn",$7="AccessDeniedException",F7="ApiDestinationResponseList",wh="ApiDestinationState",U7="ApiDestinations",yv="AuthorizationEndpoint",B7="ActivateEventSource",H7="ActivateEventSourceRequest",j7="AuthHeaderParametersSensitive",Ev="ApiKeyAuthParameters",Sv="ApiKeyName",jM="ApiKeyValue",Mo="ArchiveName",V7="ArrayProperties",W7="AssignPublicIp",_v="AuthParameters",z7="ArchiveResponseList",VM="AppSyncParameters",bh="AuthorizationType",G7="AwsVpcConfiguration",vv="Account",K7="Action",Rt="Arn",X7="Archives",Q7="Attempts",Y7="BatchArrayProperties",wv="BasicAuthParameters",WM="BatchParameters",J7="BodyParameters",Z7="BatchRetryStrategy",zM="Condition",Mr="ConnectionArn",eJ="CreateApiDestination",tJ="CreateApiDestinationRequest",rJ="CreateApiDestinationResponse",nJ="ConnectionApiKeyAuthResponseParameters",sJ="CreateArchiveRequest",iJ="ConnectionAuthResponseParameters",oJ="CreateArchiveResponse",aJ="CreateArchive",bv="CreatedBy",cJ="ConnectionBasicAuthResponseParameters",uJ="ConnectionBodyParameter",lJ="ConnectionBodyParametersList",dJ="CreateConnection",fJ="CreateConnectionApiKeyAuthRequestParameters",pJ="CreateConnectionAuthRequestParameters",hJ="CreateConnectionBasicAuthRequestParameters",mJ="CreateConnectionOAuthClientRequestParameters",gJ="CreateConnectionOAuthRequestParameters",yJ="CreateConnectionRequest",EJ="CreateConnectionResponse",SJ="CreateEndpoint",_J="CreateEventBus",vJ="CreateEventBusRequest",wJ="CreateEventBusResponse",bJ="CreateEndpointRequest",RJ="CreateEndpointResponse",CJ="ConnectionHeaderParameter",AJ="ConnectionHeaderParametersList",TJ="ConnectionHttpParameters",Rv="ClientID",PJ="ConcurrentModificationException",xJ="ConnectionOAuthClientResponseParameters",IJ="ConnectionOAuthResponseParameters",Cv="ConnectivityParameters",OJ="CreatePartnerEventSource",NJ="CreatePartnerEventSourceRequest",DJ="CreatePartnerEventSourceResponse",GM="CapacityProviderStrategy",LJ="CapacityProviderStrategyItem",Av="ClientParameters",MJ="ConnectionQueryStringParameter",kJ="ConnectionQueryStringParametersList",qJ="CancelReplay",$J="ConnectivityResourceConfigurationArn",FJ="ConnectionResponseList",UJ="ConnectivityResourceParameters",BJ="CancelReplayRequest",HJ="CancelReplayResponse",ui="ConnectionState",KM="ClientSecret",Qe="CreationTime",jJ="Connection",VJ="Connections",Me="Description",WJ="DeleteArchive",zJ="DeleteApiDestination",GJ="DeleteApiDestinationRequest",KJ="DeleteApiDestinationResponse",XJ="DescribeApiDestinationRequest",QJ="DescribeApiDestinationResponse",YJ="DescribeApiDestination",JJ="DeleteArchiveRequest",ZJ="DeleteArchiveResponse",eZ="DescribeArchiveRequest",tZ="DescribeArchiveResponse",rZ="DescribeArchive",nZ="DeauthorizeConnection",sZ="DescribeConnectionConnectivityParameters",iZ="DeauthorizeConnectionRequest",oZ="DescribeConnectionResourceParameters",aZ="DeauthorizeConnectionResponse",cZ="DeleteConnectionRequest",uZ="DeleteConnectionResponse",lZ="DescribeConnectionRequest",dZ="DescribeConnectionResponse",fZ="DeleteConnection",pZ="DescribeConnection",hZ="DeleteEndpoint",mZ="DeleteEventBus",gZ="DeleteEventBusRequest",yZ="DescribeEventBusRequest",EZ="DescribeEventBusResponse",SZ="DescribeEventBus",_Z="DeleteEndpointRequest",vZ="DeleteEndpointResponse",wZ="DescribeEndpointRequest",bZ="DescribeEndpointResponse",RZ="DeactivateEventSource",CZ="DeactivateEventSourceRequest",AZ="DescribeEventSourceRequest",TZ="DescribeEventSourceResponse",PZ="DescribeEventSource",xZ="DescribeEndpoint",li="DeadLetterConfig",IZ="DeletePartnerEventSource",OZ="DeletePartnerEventSourceRequest",NZ="DescribePartnerEventSourceRequest",DZ="DescribePartnerEventSourceResponse",LZ="DescribePartnerEventSource",MZ="DeleteRule",kZ="DeleteRuleRequest",qZ="DescribeReplayRequest",$Z="DescribeReplayResponse",FZ="DescribeRuleRequest",UZ="DescribeRuleResponse",BZ="DisableRuleRequest",HZ="DescribeReplay",jZ="DescribeRule",VZ="DisableRule",XM="DetailType",WZ="DbUser",zZ="Database",QM="Destination",YM="Detail",GZ="Endpoint",di="EventBuses",JM="EventBusArn",KZ="EventBusList",Ft="EventBusName",XZ="EventBus",ZM="EventCount",Rh="ErrorCode",QZ="EndpointEventBus",YZ="EndpointEventBusList",JZ="EnableExecuteCommand",ZZ="EnableECSManagedTags",Tv="EventEndTime",Ch="EndpointId",ek="EventId",eee="EndpointList",tk="EventLastReplayedTime",Ah="ErrorMessage",fi="EventPattern",rk="EcsParameters",tee="EnableRule",ree="EnableRuleRequest",nee="EventSource",In="EventSourceArn",see="EventSourceList",nk="EventSourceName",Pv="EventStartTime",iee="EventSources",xv="ExpirationTime",Iv="EndpointUrl",oee="Endpoints",Th="Entries",aee="Event",sk="Force",cee="FilterArns",ik="FailoverConfig",ok="FailedEntries",Ph="FailedEntryCount",uee="Group",ak="GraphQLOperation",lee="HealthCheck",pi="HttpMethod",ck="HeaderParameters",uk="HttpParameters",lk="HomeRegion",dee="HeaderValueSensitive",fee="Ids",Ov="InvocationConnectivityParameters",pee="IncludeDetail",xh="InvocationEndpoint",hee="InvalidEventPatternException",mee="InternalException",Nv="InvocationHttpParameters",gee="InputPath",yee="InputPathsMap",Ih="InvocationRateLimitPerSecond",Eee="IllegalStatusException",See="InvalidStateException",dk="InputTransformer",_ee="InputTemplate",Dv="IsValueSecret",vee="Id",wee="Input",bee="JobDefinition",Ree="JobName",ko="Key",kr="KmsKeyIdentifier",fk="KinesisParameters",qr="Limit",Cee="ListArchives",Aee="ListApiDestinations",Tee="ListApiDestinationsRequest",Pee="ListApiDestinationsResponse",xee="ListArchivesRequest",Iee="ListArchivesResponse",Jc="LastAuthorizedTime",qo="LogConfig",Oee="ListConnectionsRequest",Nee="ListConnectionsResponse",Dee="ListConnections",Lee="ListEndpoints",Mee="ListEventBuses",kee="ListEventBusesRequest",qee="ListEventBusesResponse",$ee="LimitExceededException",Fee="ListEndpointsRequest",Uee="ListEndpointsResponse",Bee="ListEventSources",Hee="ListEventSourcesRequest",jee="ListEventSourcesResponse",Yt="LastModifiedTime",Vee="ListPartnerEventSources",Wee="ListPartnerEventSourceAccounts",zee="ListPartnerEventSourceAccountsRequest",Gee="ListPartnerEventSourceAccountsResponse",Kee="ListPartnerEventSourcesRequest",Xee="ListPartnerEventSourcesResponse",Qee="ListReplays",Yee="ListRuleNamesByTarget",Jee="ListRuleNamesByTargetRequest",Zee="ListRuleNamesByTargetResponse",ete="ListReplaysRequest",tte="ListReplaysResponse",rte="ListRulesRequest",nte="ListRulesResponse",ste="ListRules",ite="LaunchType",ote="ListTargetsByRule",ate="ListTargetsByRuleRequest",cte="ListTargetsByRuleResponse",ute="ListTagsForResource",lte="ListTagsForResourceRequest",dte="ListTagsForResourceResponse",fte="Level",pk="ManagedBy",pte="MaximumEventAgeInSeconds",hte="MessageGroupId",mte="MaxResults",gte="MaximumRetryAttempts",yte="ManagedRuleException",K="Name",hk="NetworkConfiguration",On="NamePrefix",ke="NextToken",Lv="OAuthHttpParameters",Mv="OAuthParameters",Ete="OperationDisabledException",mk="Password",gk="PlacementConstraints",Ste="PlacementConstraint",_te="PutEvents",vte="PutEventsRequest",wte="PutEventsRequestEntry",bte="PutEventsRequestEntryList",Rte="PutEventsResultEntryList",Cte="PutEventsResultEntry",Ate="PutEventsResponse",Tte="PartnerEventSources",Pte="PartnerEventSourceAccounts",xte="PartnerEventSourceAccountList",Ite="PartnerEventSourceAccount",Ote="PartnerEventSourceList",Nte="PartnerEventSource",Dte="PartitionKeyPath",Lte="PolicyLengthExceededException",Mte="PutPermission",kte="PutPartnerEvents",qte="PutPartnerEventsRequest",$te="PutPartnerEventsRequestEntry",Fte="PutPartnerEventsRequestEntryList",Ute="PutPartnerEventsResultEntryList",Bte="PutPartnerEventsResultEntry",Hte="PutPartnerEventsResponse",jte="PipelineParameterList",Vte="PutPermissionRequest",Wte="PathParameterValues",zte="PutRule",Gte="PutRuleRequest",Kte="PutRuleResponse",yk="PlacementStrategy",Xte="PlacementStrategies",Qte="PropagateTags",Yte="PutTargetsRequest",Jte="PutTargetsResultEntry",Zte="PutTargetsResultEntryList",ere="PutTargetsResponse",tre="PutTargets",rre="PlatformVersion",kv="Policy",Ek="Primary",nre="Principal",Sk="QueryStringParameters",sre="QueryStringValueSensitive",ire="Replays",qv="ReplayArn",ore="ResourceAssociationArn",are="ResourceAlreadyExistsException",cre="RemoveAllPermissions",$v="ResourceARN",nn="RoleArn",ure="RuleArn",hi="RoutingConfig",_k="ResourceConfigurationArn",vk="RunCommandParameters",wk="RunCommandTargets",lre="RunCommandTarget",mi="ReplicationConfig",Oh="RetentionDays",bk="RedshiftDataParameters",dre="ReplayDestination",Rk="ReplayEndTime",fre="ReferenceId",pre="ReplayList",Zc="ReplayName",hre="ResourceNotFoundException",mre="RuleNames",Ck="ResourceParameters",gre="RemovePermissionRequest",Ak="RetryPolicy",yre="RemovePermission",Ere="RuleResponseList",Sre="RetryStrategy",Fv="ReplayStartTime",_re="RemoveTargets",vre="RemoveTargetsRequest",wre="RemoveTargetsResultEntry",bre="RemoveTargetsResultEntryList",Rre="RemoveTargetsResponse",Tk="Resources",Cre="Replay",Are="Result",Tre="Route",Pre="Rules",Nh="Rule",Pk="Sql",xre="SecretArn",xk="SizeBytes",Uv="ScheduleExpression",Ire="SecurityGroups",Ik="StatementId",Ore="SecretManagerArn",Nre="SageMakerPipelineParameter",Dre="SageMakerPipelineParameterList",Ok="SageMakerPipelineParameters",Lre="StatementName",Nk="SqsParameters",gr="StateReason",Mre="StartReplayRequest",kre="StartReplayResponse",qre="StartReplay",$re="SensitiveString",Dk="Secondary",Fre="Size",Lk="Source",Mk="Sqls",Ye="State",Ure="Subnets",Bre="Type",Hre="TargetArn",jre="TaskCount",Vre="TaskDefinitionArn",Wre="ThrottlingException",zre="TestEventPattern",Gre="TestEventPatternRequest",Kre="TestEventPatternResponse",Xre="TraceHeader",kk="TargetId",Qre="TagKeys",Yre="TagList",Jre="TargetList",Zre="TagResource",ene="TagResourceRequest",tne="TagResourceResponse",eu="Tags",rne="Tag",qk="Targets",nne="Target",$k="Time",Bv="Username",sne="UpdateArchive",ine="UpdateApiDestination",one="UpdateApiDestinationRequest",ane="UpdateApiDestinationResponse",cne="UpdateArchiveRequest",une="UpdateArchiveResponse",lne="UpdateConnection",dne="UpdateConnectionApiKeyAuthRequestParameters",fne="UpdateConnectionAuthRequestParameters",pne="UpdateConnectionBasicAuthRequestParameters",hne="UpdateConnectionOAuthClientRequestParameters",mne="UpdateConnectionOAuthRequestParameters",gne="UpdateConnectionRequest",yne="UpdateConnectionResponse",Ene="UpdateEndpoint",Sne="UpdateEventBus",_ne="UpdateEventBusRequest",vne="UpdateEventBusResponse",wne="UpdateEndpointRequest",bne="UpdateEndpointResponse",Rne="UntagResource",Cne="UntagResourceRequest",Ane="UntagResourceResponse",$o="Value",Tne="Values",Pne="WithEvent",xne="awsvpcConfiguration",Ine="base",yr="client",One="capacityProvider",ir="error",Nne="expression",Dne="field",or="message",Lne="server",Fk="smithy.ts.sdk.synthetic.com.amazonaws.eventbridge",Uk="type",Mne="weight",y="com.amazonaws.eventbridge",Fo=[0,y,j7,8,0],kne=[0,y,ak,8,0],qne=[0,y,dee,8,0],$ne=[0,y,sre,8,0],Fne=[0,y,$re,8,0],Bk=[0,y,Pk,8,0],Une=[-3,y,$7,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Une,yM);var Bne=[3,y,H7,0,[K],[0]],Hne=[3,y,q7,0,[vh,K,wh,Mr,xh,pi,Ih,Qe,Yt],[0,0,0,0,0,0,1,4,4]],jne=[3,y,VM,0,[ak],[[()=>kne,0]]],Vne=[3,y,k7,0,[Mo,In,Ye,gr,Oh,xk,ZM,Qe],[0,0,0,0,1,1,1,4]],Wne=[3,y,G7,0,[Ure,Ire,W7],[64,64,0]],zne=[3,y,Y7,0,[Fre],[1]],Gne=[3,y,WM,0,[bee,Ree,V7,Sre],[0,0,()=>zne,()=>Kne]],Kne=[3,y,Z7,0,[Q7],[1]],Xne=[3,y,BJ,0,[Zc],[0]],Qne=[3,y,HJ,0,[qv,Ye,gr],[0,0,0]],Yne=[3,y,LJ,0,[One,Mne,Ine],[0,1,1]],Jne=[-3,y,PJ,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Jne,SM);var Zne=[3,y,zM,0,[Bre,ko,$o],[0,0,0]],ese=[3,y,jJ,0,[Mr,K,ui,gr,bh,Qe,Yt,Jc],[0,0,0,0,0,4,4,4]],tse=[3,y,nJ,0,[Sv],[0]],rse=[3,y,iJ,0,[wv,Mv,Ev,Nv,Cv],[()=>nse,[()=>ase,0],()=>tse,[()=>Uo,0],()=>Hk]],nse=[3,y,cJ,0,[Bv],[0]],sse=[3,y,uJ,0,[ko,$o,Dv],[0,[()=>Fne,0],2]],ise=[3,y,CJ,0,[ko,$o,Dv],[0,[()=>qne,0],2]],Uo=[3,y,TJ,0,[ck,Sk,J7],[[()=>lae,0],[()=>dae,0],[()=>uae,0]]],ose=[3,y,xJ,0,[Rv],[0]],ase=[3,y,IJ,0,[Av,yv,pi,Lv],[()=>ose,0,0,[()=>Uo,0]]],cse=[3,y,MJ,0,[ko,$o,Dv],[0,[()=>$ne,0],2]],use=[3,y,$J,0,[_k],[0]],Dh=[3,y,UJ,0,[Ck],[()=>use]],lse=[3,y,tJ,0,[K,Me,Mr,xh,pi,Ih],[0,0,0,0,0,1]],dse=[3,y,rJ,0,[vh,wh,Qe,Yt],[0,0,4,4]],fse=[3,y,sJ,0,[Mo,In,Me,fi,Oh,kr],[0,0,0,0,1,0]],pse=[3,y,oJ,0,[gv,Ye,gr,Qe],[0,0,0,4]],hse=[3,y,fJ,0,[Sv,jM],[0,[()=>Fo,0]]],mse=[3,y,pJ,0,[wv,Mv,Ev,Nv,Cv],[[()=>gse,0],[()=>Ese,0],[()=>hse,0],[()=>Uo,0],()=>Dh]],gse=[3,y,hJ,0,[Bv,mk],[0,[()=>Fo,0]]],yse=[3,y,mJ,0,[Rv,KM],[0,[()=>Fo,0]]],Ese=[3,y,gJ,0,[Av,yv,pi,Lv],[[()=>yse,0],0,0,[()=>Uo,0]]],Sse=[3,y,yJ,0,[K,Me,bh,_v,Ov,kr],[0,0,0,[()=>mse,0],()=>Dh,0]],_se=[3,y,EJ,0,[Mr,ui,Qe,Yt],[0,0,4,4]],vse=[3,y,bJ,0,[K,Me,hi,mi,di,nn],[0,0,()=>jo,()=>Ho,()=>Vo,0]],wse=[3,y,RJ,0,[K,Rt,hi,mi,di,nn,Ye],[0,0,()=>jo,()=>Ho,()=>Vo,0,0]],bse=[3,y,vJ,0,[K,nk,Me,kr,li,qo,eu],[0,0,0,0,()=>Bo,()=>tu,()=>ru]],Rse=[3,y,wJ,0,[JM,Me,kr,li,qo],[0,0,0,()=>Bo,()=>tu]],Cse=[3,y,NJ,0,[K,vv],[0,0]],Ase=[3,y,DJ,0,[In],[0]],Tse=[3,y,CZ,0,[K],[0]],Bo=[3,y,li,0,[Rt],[0]],Pse=[3,y,iZ,0,[K],[0]],xse=[3,y,aZ,0,[Mr,ui,Qe,Yt,Jc],[0,0,4,4,4]],Ise=[3,y,GJ,0,[K],[0]],Ose=[3,y,KJ,0,[],[]],Nse=[3,y,JJ,0,[Mo],[0]],Dse=[3,y,ZJ,0,[],[]],Lse=[3,y,cZ,0,[K],[0]],Mse=[3,y,uZ,0,[Mr,ui,Qe,Yt,Jc],[0,0,4,4,4]],kse=[3,y,_Z,0,[K],[0]],qse=[3,y,vZ,0,[],[]],$se=[3,y,gZ,0,[K],[0]],Fse=[3,y,OZ,0,[K,vv],[0,0]],Use=[3,y,kZ,0,[K,Ft,sk],[0,0,2]],Bse=[3,y,XJ,0,[K],[0]],Hse=[3,y,QJ,0,[vh,K,Me,wh,Mr,xh,pi,Ih,Qe,Yt],[0,0,0,0,0,0,0,1,4,4]],jse=[3,y,eZ,0,[Mo],[0]],Vse=[3,y,tZ,0,[gv,Mo,In,Me,fi,Ye,gr,kr,Oh,xk,ZM,Qe],[0,0,0,0,0,0,0,0,1,1,1,4]],Hk=[3,y,sZ,0,[Ck],[()=>zse]],Wse=[3,y,lZ,0,[K],[0]],zse=[3,y,oZ,0,[_k,ore],[0,0]],Gse=[3,y,dZ,0,[Mr,K,Me,Ov,ui,gr,bh,xre,kr,_v,Qe,Yt,Jc],[0,0,0,()=>Hk,0,0,0,0,0,[()=>rse,0],4,4,4]],Kse=[3,y,wZ,0,[K,lk],[0,0]],Xse=[3,y,bZ,0,[K,Me,Rt,hi,mi,di,nn,Ch,Iv,Ye,gr,Qe,Yt],[0,0,0,()=>jo,()=>Ho,()=>Vo,0,0,0,0,0,4,4]],Qse=[3,y,yZ,0,[K],[0]],Yse=[3,y,EZ,0,[K,Rt,Me,kr,li,kv,qo,Qe,Yt],[0,0,0,0,()=>Bo,0,()=>tu,4,4]],Jse=[3,y,AZ,0,[K],[0]],Zse=[3,y,TZ,0,[Rt,bv,Qe,xv,K,Ye],[0,0,4,4,0,0]],eie=[3,y,NZ,0,[K],[0]],tie=[3,y,DZ,0,[Rt,K],[0,0]],rie=[3,y,qZ,0,[Zc],[0]],nie=[3,y,$Z,0,[Zc,qv,Me,Ye,gr,In,QM,Pv,Tv,tk,Fv,Rk],[0,0,0,0,0,0,()=>jk,4,4,4,4,4]],sie=[3,y,FZ,0,[K,Ft],[0,0]],iie=[3,y,UZ,0,[K,Rt,fi,Uv,Ye,Me,nn,pk,Ft,bv],[0,0,0,0,0,0,0,0,0,0]],oie=[3,y,BZ,0,[K,Ft],[0,0]],aie=[3,y,rk,0,[Vre,jre,ite,hk,rre,uee,GM,ZZ,JZ,gk,yk,Qte,fre,eu],[0,1,0,()=>Xie,0,0,()=>cae,2,2,()=>Eae,()=>Sae,0,0,()=>ru]],cie=[3,y,ree,0,[K,Ft],[0,0]],uie=[3,y,GZ,0,[K,Me,Rt,hi,mi,di,nn,Ch,Iv,Ye,gr,Qe,Yt],[0,0,0,()=>jo,()=>Ho,()=>Vo,0,0,0,0,0,4,4]],lie=[3,y,QZ,0,[JM],[0]],die=[3,y,XZ,0,[K,Rt,Me,kv,Qe,Yt],[0,0,0,0,4,4]],fie=[3,y,nee,0,[Rt,bv,Qe,xv,K,Ye],[0,0,4,4,0,0]],pie=[3,y,ik,0,[Ek,Dk],[()=>roe,()=>Ooe]],hie=[3,y,uk,0,[Wte,ck,Sk],[64,128,128]],mie=[-3,y,Eee,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(mie,xM);var gie=[3,y,dk,0,[yee,_ee],[128,0]],yie=[-3,y,mee,{[ir]:Lne},[or],[0]];qt.TypeRegistry.for(y).registerError(yie,vM);var Eie=[-3,y,hee,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Eie,MM);var Sie=[-3,y,See,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Sie,bM);var _ie=[3,y,fk,0,[Dte],[0]],vie=[-3,y,$ee,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(vie,OM);var wie=[3,y,Tee,0,[On,Mr,ke,qr],[0,0,0,1]],bie=[3,y,Pee,0,[U7,ke],[()=>oae,0]],Rie=[3,y,xee,0,[On,In,Ye,ke,qr],[0,0,0,0,1]],Cie=[3,y,Iee,0,[X7,ke],[()=>aae,0]],Aie=[3,y,Oee,0,[On,ui,ke,qr],[0,0,0,1]],Tie=[3,y,Nee,0,[VJ,ke],[()=>fae,0]],Pie=[3,y,Fee,0,[On,lk,ke,mte],[0,0,0,1]],xie=[3,y,Uee,0,[oee,ke],[()=>pae,0]],Iie=[3,y,kee,0,[On,ke,qr],[0,0,1]],Oie=[3,y,qee,0,[di,ke],[()=>hae,0]],Nie=[3,y,Hee,0,[On,ke,qr],[0,0,1]],Die=[3,y,jee,0,[iee,ke],[()=>mae,0]],Lie=[3,y,zee,0,[nk,ke,qr],[0,0,1]],Mie=[3,y,Gee,0,[Pte,ke],[()=>gae,0]],kie=[3,y,Kee,0,[On,ke,qr],[0,0,1]],qie=[3,y,Xee,0,[Tte,ke],[()=>yae,0]],$ie=[3,y,ete,0,[On,Ye,In,ke,qr],[0,0,0,0,1]],Fie=[3,y,tte,0,[ire,ke],[()=>Aae,0]],Uie=[3,y,Jee,0,[Hre,Ft,ke,qr],[0,0,0,1]],Bie=[3,y,Zee,0,[mre,ke],[64,0]],Hie=[3,y,rte,0,[On,Ft,ke,qr],[0,0,0,1]],jie=[3,y,nte,0,[Pre,ke],[()=>Tae,0]],Vie=[3,y,lte,0,[$v],[0]],Wie=[3,y,dte,0,[eu],[()=>ru]],zie=[3,y,ate,0,[Nh,Ft,ke,qr],[0,0,0,1]],Gie=[3,y,cte,0,[qk,ke],[[()=>Vk,0],0]],tu=[3,y,qo,0,[pee,fte],[0,0]],Kie=[-3,y,yte,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Kie,FM);var Xie=[3,y,hk,0,[xne],[()=>Wne]],Qie=[-3,y,Ete,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Qie,CM);var Yie=[3,y,Nte,0,[Rt,K],[0,0]],Jie=[3,y,Ite,0,[vv,Qe,xv,Ye],[0,4,4,0]],Zie=[3,y,Ste,0,[Uk,Nne],[0,0]],eoe=[3,y,yk,0,[Uk,Dne],[0,0]],toe=[-3,y,Lte,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(toe,BM);var roe=[3,y,Ek,0,[lee],[0]],noe=[3,y,vte,0,[Th,Ch],[()=>_ae,0]],soe=[3,y,wte,0,[$k,Lk,Tk,XM,YM,Ft,Xre],[4,0,64,0,0,0,0]],ioe=[3,y,Ate,0,[Ph,Th],[1,()=>vae]],ooe=[3,y,Cte,0,[ek,Rh,Ah],[0,0,0]],aoe=[3,y,qte,0,[Th],[()=>wae]],coe=[3,y,$te,0,[$k,Lk,Tk,XM,YM],[4,0,64,0,0]],uoe=[3,y,Hte,0,[Ph,Th],[1,()=>bae]],loe=[3,y,Bte,0,[ek,Rh,Ah],[0,0,0]],doe=[3,y,Vte,0,[Ft,K7,nre,Ik,zM,kv],[0,0,0,0,()=>Zne,0]],foe=[3,y,Gte,0,[K,Uv,fi,Ye,Me,nn,eu,Ft],[0,0,0,0,0,0,()=>ru,0]],poe=[3,y,Kte,0,[ure],[0]],hoe=[3,y,Yte,0,[Nh,Ft,qk],[0,0,[()=>Vk,0]]],moe=[3,y,ere,0,[Ph,ok],[1,()=>Rae]],goe=[3,y,Jte,0,[kk,Rh,Ah],[0,0,0]],yoe=[3,y,bk,0,[Ore,zZ,WZ,Pk,Lre,Pne,Mk],[0,0,0,[()=>Bk,0],0,2,[()=>Iae,0]]],Eoe=[3,y,gre,0,[Ik,cre,Ft],[0,2,0]],Soe=[3,y,vre,0,[Nh,Ft,fee,sk],[0,0,64,2]],_oe=[3,y,Rre,0,[Ph,ok],[1,()=>Cae]],voe=[3,y,wre,0,[kk,Rh,Ah],[0,0,0]],woe=[3,y,Cre,0,[Zc,In,Ye,gr,Pv,Tv,tk,Fv,Rk],[0,0,0,0,4,4,4,4,4]],jk=[3,y,dre,0,[Rt,cee],[0,64]],Ho=[3,y,mi,0,[Ye],[0]],boe=[-3,y,are,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(boe,DM);var Roe=[-3,y,hre,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Roe,TM);var Coe=[3,y,Ak,0,[gte,pte],[1,1]],jo=[3,y,hi,0,[ik],[()=>pie]],Aoe=[3,y,Nh,0,[K,Rt,fi,Ye,Me,Uv,nn,pk,Ft],[0,0,0,0,0,0,0,0,0]],Toe=[3,y,vk,0,[wk],[()=>Pae]],Poe=[3,y,lre,0,[ko,Tne],[0,64]],xoe=[3,y,Nre,0,[K,$o],[0,0]],Ioe=[3,y,Ok,0,[jte],[()=>xae]],Ooe=[3,y,Dk,0,[Tre],[0]],Noe=[3,y,Nk,0,[hte],[0]],Doe=[3,y,Mre,0,[Zc,Me,In,Pv,Tv,QM],[0,0,0,4,4,()=>jk]],Loe=[3,y,kre,0,[qv,Ye,gr,Fv],[0,0,0,4]],Moe=[3,y,rne,0,[ko,$o],[0,0]],koe=[3,y,ene,0,[$v,eu],[0,()=>ru]],qoe=[3,y,tne,0,[],[]],$oe=[3,y,nne,0,[vee,Rt,nn,wee,gee,dk,fk,vk,rk,WM,Nk,uk,bk,Ok,li,Ak,VM],[0,0,0,0,0,()=>gie,()=>_ie,()=>Toe,()=>aie,()=>Gne,()=>Noe,()=>hie,[()=>yoe,0],()=>Ioe,()=>Bo,()=>Coe,[()=>jne,0]]],Foe=[3,y,Gre,0,[fi,aee],[0,0]],Uoe=[3,y,Kre,0,[Are],[2]],Boe=[-3,y,Wre,{[ir]:yr},[or],[0]];qt.TypeRegistry.for(y).registerError(Boe,qM);var Hoe=[3,y,Cne,0,[$v,Qre],[0,64]],joe=[3,y,Ane,0,[],[]],Voe=[3,y,one,0,[K,Me,Mr,xh,pi,Ih],[0,0,0,0,0,1]],Woe=[3,y,ane,0,[vh,wh,Qe,Yt],[0,0,4,4]],zoe=[3,y,cne,0,[Mo,Me,fi,Oh,kr],[0,0,0,1,0]],Goe=[3,y,une,0,[gv,Ye,gr,Qe],[0,0,0,4]],Koe=[3,y,dne,0,[Sv,jM],[0,[()=>Fo,0]]],Xoe=[3,y,fne,0,[wv,Mv,Ev,Nv,Cv],[[()=>Qoe,0],[()=>Joe,0],[()=>Koe,0],[()=>Uo,0],()=>Dh]],Qoe=[3,y,pne,0,[Bv,mk],[0,[()=>Fo,0]]],Yoe=[3,y,hne,0,[Rv,KM],[0,[()=>Fo,0]]],Joe=[3,y,mne,0,[Av,yv,pi,Lv],[[()=>Yoe,0],0,0,[()=>Uo,0]]],Zoe=[3,y,gne,0,[K,Me,bh,_v,Ov,kr],[0,0,0,[()=>Xoe,0],()=>Dh,0]],eae=[3,y,yne,0,[Mr,ui,Qe,Yt,Jc],[0,0,4,4,4]],tae=[3,y,wne,0,[K,Me,hi,mi,di,nn],[0,0,()=>jo,()=>Ho,()=>Vo,0]],rae=[3,y,bne,0,[K,Rt,hi,mi,di,nn,Ch,Iv,Ye],[0,0,()=>jo,()=>Ho,()=>Vo,0,0,0,0]],nae=[3,y,_ne,0,[K,kr,Me,li,qo],[0,0,0,()=>Bo,()=>tu]],sae=[3,y,vne,0,[Rt,K,kr,Me,li,qo],[0,0,0,0,()=>Bo,()=>tu]],Nn="unit",iae=[-3,Fk,"EventBridgeServiceException",0,[],[]];qt.TypeRegistry.for(Fk).registerError(iae,$t);var oae=[1,y,F7,0,()=>Hne],aae=[1,y,z7,0,()=>Vne],cae=[1,y,GM,0,()=>Yne],uae=[1,y,lJ,0,[()=>sse,0]],lae=[1,y,AJ,0,[()=>ise,0]],dae=[1,y,kJ,0,[()=>cse,0]],fae=[1,y,FJ,0,()=>ese],Vo=[1,y,YZ,0,()=>lie],pae=[1,y,eee,0,()=>uie],hae=[1,y,KZ,0,()=>die],mae=[1,y,see,0,()=>fie],gae=[1,y,xte,0,()=>Jie],yae=[1,y,Ote,0,()=>Yie],Eae=[1,y,gk,0,()=>Zie],Sae=[1,y,Xte,0,()=>eoe],_ae=[1,y,bte,0,()=>soe],vae=[1,y,Rte,0,()=>ooe],wae=[1,y,Fte,0,()=>coe],bae=[1,y,Ute,0,()=>loe],Rae=[1,y,Zte,0,()=>goe],Cae=[1,y,bre,0,()=>voe],Aae=[1,y,pre,0,()=>woe],Tae=[1,y,Ere,0,()=>Aoe],Pae=[1,y,wk,0,()=>Poe],xae=[1,y,Dre,0,()=>xoe],Iae=[1,y,Mk,8,[()=>Bk,0]],ru=[1,y,Yre,0,()=>Moe],Vk=[1,y,Jre,0,[()=>$oe,0]],Oae=[9,y,B7,0,()=>Bne,()=>Nn],Nae=[9,y,qJ,0,()=>Xne,()=>Qne],Dae=[9,y,eJ,0,()=>lse,()=>dse],Lae=[9,y,aJ,0,()=>fse,()=>pse],Mae=[9,y,dJ,0,()=>Sse,()=>_se],kae=[9,y,SJ,0,()=>vse,()=>wse],qae=[9,y,_J,0,()=>bse,()=>Rse],$ae=[9,y,OJ,0,()=>Cse,()=>Ase],Fae=[9,y,RZ,0,()=>Tse,()=>Nn],Uae=[9,y,nZ,0,()=>Pse,()=>xse],Bae=[9,y,zJ,0,()=>Ise,()=>Ose],Hae=[9,y,WJ,0,()=>Nse,()=>Dse],jae=[9,y,fZ,0,()=>Lse,()=>Mse],Vae=[9,y,hZ,0,()=>kse,()=>qse],Wae=[9,y,mZ,0,()=>$se,()=>Nn],zae=[9,y,IZ,0,()=>Fse,()=>Nn],Gae=[9,y,MZ,0,()=>Use,()=>Nn],Kae=[9,y,YJ,0,()=>Bse,()=>Hse],Xae=[9,y,rZ,0,()=>jse,()=>Vse],Qae=[9,y,pZ,0,()=>Wse,()=>Gse],Yae=[9,y,xZ,0,()=>Kse,()=>Xse],Jae=[9,y,SZ,0,()=>Qse,()=>Yse],Zae=[9,y,PZ,0,()=>Jse,()=>Zse],ece=[9,y,LZ,0,()=>eie,()=>tie],tce=[9,y,HZ,0,()=>rie,()=>nie],rce=[9,y,jZ,0,()=>sie,()=>iie],nce=[9,y,VZ,0,()=>oie,()=>Nn],sce=[9,y,tee,0,()=>cie,()=>Nn],ice=[9,y,Aee,0,()=>wie,()=>bie],oce=[9,y,Cee,0,()=>Rie,()=>Cie],ace=[9,y,Dee,0,()=>Aie,()=>Tie],cce=[9,y,Lee,0,()=>Pie,()=>xie],uce=[9,y,Mee,0,()=>Iie,()=>Oie],lce=[9,y,Bee,0,()=>Nie,()=>Die],dce=[9,y,Wee,0,()=>Lie,()=>Mie],fce=[9,y,Vee,0,()=>kie,()=>qie],pce=[9,y,Qee,0,()=>$ie,()=>Fie],hce=[9,y,Yee,0,()=>Uie,()=>Bie],mce=[9,y,ste,0,()=>Hie,()=>jie],gce=[9,y,ute,0,()=>Vie,()=>Wie],yce=[9,y,ote,0,()=>zie,()=>Gie],Ece=[9,y,_te,0,()=>noe,()=>ioe],Sce=[9,y,kte,0,()=>aoe,()=>uoe],_ce=[9,y,Mte,0,()=>doe,()=>Nn],vce=[9,y,zte,0,()=>foe,()=>poe],wce=[9,y,tre,0,()=>hoe,()=>moe],bce=[9,y,yre,0,()=>Eoe,()=>Nn],Rce=[9,y,_re,0,()=>Soe,()=>_oe],Cce=[9,y,qre,0,()=>Doe,()=>Loe],Ace=[9,y,Zre,0,()=>koe,()=>qoe],Tce=[9,y,zre,0,()=>Foe,()=>Uoe],Pce=[9,y,Rne,0,()=>Hoe,()=>joe],xce=[9,y,ine,0,()=>Voe,()=>Woe],Ice=[9,y,sne,0,()=>zoe,()=>Goe],Oce=[9,y,lne,0,()=>Zoe,()=>eae],Nce=[9,y,Ene,0,()=>tae,()=>rae],Dce=[9,y,Sne,0,()=>nae,()=>sae],yp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ActivateEventSource",{}).n("EventBridgeClient","ActivateEventSourceCommand").sc(Oae).build(){},Ep=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CancelReplay",{}).n("EventBridgeClient","CancelReplayCommand").sc(Nae).build(){},Sp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateApiDestination",{}).n("EventBridgeClient","CreateApiDestinationCommand").sc(Dae).build(){},_p=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateArchive",{}).n("EventBridgeClient","CreateArchiveCommand").sc(Lae).build(){},vp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateConnection",{}).n("EventBridgeClient","CreateConnectionCommand").sc(Mae).build(){},wp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEndpoint",{}).n("EventBridgeClient","CreateEndpointCommand").sc(kae).build(){},bp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEventBus",{}).n("EventBridgeClient","CreateEventBusCommand").sc(qae).build(){},Rp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreatePartnerEventSource",{}).n("EventBridgeClient","CreatePartnerEventSourceCommand").sc($ae).build(){},Cp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeactivateEventSource",{}).n("EventBridgeClient","DeactivateEventSourceCommand").sc(Fae).build(){},Ap=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeauthorizeConnection",{}).n("EventBridgeClient","DeauthorizeConnectionCommand").sc(Uae).build(){},Tp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteApiDestination",{}).n("EventBridgeClient","DeleteApiDestinationCommand").sc(Bae).build(){},Pp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteArchive",{}).n("EventBridgeClient","DeleteArchiveCommand").sc(Hae).build(){},xp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteConnection",{}).n("EventBridgeClient","DeleteConnectionCommand").sc(jae).build(){},Ip=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEndpoint",{}).n("EventBridgeClient","DeleteEndpointCommand").sc(Vae).build(){},Op=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEventBus",{}).n("EventBridgeClient","DeleteEventBusCommand").sc(Wae).build(){},Np=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeletePartnerEventSource",{}).n("EventBridgeClient","DeletePartnerEventSourceCommand").sc(zae).build(){},Dp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteRule",{}).n("EventBridgeClient","DeleteRuleCommand").sc(Gae).build(){},Lp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeApiDestination",{}).n("EventBridgeClient","DescribeApiDestinationCommand").sc(Kae).build(){},Mp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeArchive",{}).n("EventBridgeClient","DescribeArchiveCommand").sc(Xae).build(){},kp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeConnection",{}).n("EventBridgeClient","DescribeConnectionCommand").sc(Qae).build(){},qp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEndpoint",{}).n("EventBridgeClient","DescribeEndpointCommand").sc(Yae).build(){},$p=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventBus",{}).n("EventBridgeClient","DescribeEventBusCommand").sc(Jae).build(){},Fp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventSource",{}).n("EventBridgeClient","DescribeEventSourceCommand").sc(Zae).build(){},Up=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribePartnerEventSource",{}).n("EventBridgeClient","DescribePartnerEventSourceCommand").sc(ece).build(){},Bp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeReplay",{}).n("EventBridgeClient","DescribeReplayCommand").sc(tce).build(){},Hp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeRule",{}).n("EventBridgeClient","DescribeRuleCommand").sc(rce).build(){},jp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DisableRule",{}).n("EventBridgeClient","DisableRuleCommand").sc(nce).build(){},Vp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","EnableRule",{}).n("EventBridgeClient","EnableRuleCommand").sc(sce).build(){},Wp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListApiDestinations",{}).n("EventBridgeClient","ListApiDestinationsCommand").sc(ice).build(){},zp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListArchives",{}).n("EventBridgeClient","ListArchivesCommand").sc(oce).build(){},Gp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListConnections",{}).n("EventBridgeClient","ListConnectionsCommand").sc(ace).build(){},Kp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEndpoints",{}).n("EventBridgeClient","ListEndpointsCommand").sc(cce).build(){},Xp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventBuses",{}).n("EventBridgeClient","ListEventBusesCommand").sc(uce).build(){},Qp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventSources",{}).n("EventBridgeClient","ListEventSourcesCommand").sc(lce).build(){},Yp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSourceAccounts",{}).n("EventBridgeClient","ListPartnerEventSourceAccountsCommand").sc(dce).build(){},Jp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSources",{}).n("EventBridgeClient","ListPartnerEventSourcesCommand").sc(fce).build(){},Zp=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListReplays",{}).n("EventBridgeClient","ListReplaysCommand").sc(pce).build(){},eh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRuleNamesByTarget",{}).n("EventBridgeClient","ListRuleNamesByTargetCommand").sc(hce).build(){},th=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRules",{}).n("EventBridgeClient","ListRulesCommand").sc(mce).build(){},rh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTagsForResource",{}).n("EventBridgeClient","ListTagsForResourceCommand").sc(gce).build(){},nh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTargetsByRule",{}).n("EventBridgeClient","ListTargetsByRuleCommand").sc(yce).build(){},sh=class extends U.Command.classBuilder().ep({...j,EndpointId:{type:"contextParams",name:"EndpointId"}}).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutEvents",{}).n("EventBridgeClient","PutEventsCommand").sc(Ece).build(){},ih=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPartnerEvents",{}).n("EventBridgeClient","PutPartnerEventsCommand").sc(Sce).build(){},oh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPermission",{}).n("EventBridgeClient","PutPermissionCommand").sc(_ce).build(){},ah=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutRule",{}).n("EventBridgeClient","PutRuleCommand").sc(vce).build(){},ch=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutTargets",{}).n("EventBridgeClient","PutTargetsCommand").sc(wce).build(){},uh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemovePermission",{}).n("EventBridgeClient","RemovePermissionCommand").sc(bce).build(){},lh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemoveTargets",{}).n("EventBridgeClient","RemoveTargetsCommand").sc(Rce).build(){},dh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","StartReplay",{}).n("EventBridgeClient","StartReplayCommand").sc(Cce).build(){},fh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TagResource",{}).n("EventBridgeClient","TagResourceCommand").sc(Ace).build(){},ph=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TestEventPattern",{}).n("EventBridgeClient","TestEventPatternCommand").sc(Tce).build(){},hh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UntagResource",{}).n("EventBridgeClient","UntagResourceCommand").sc(Pce).build(){},mh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateApiDestination",{}).n("EventBridgeClient","UpdateApiDestinationCommand").sc(xce).build(){},gh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateArchive",{}).n("EventBridgeClient","UpdateArchiveCommand").sc(Ice).build(){},yh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateConnection",{}).n("EventBridgeClient","UpdateConnectionCommand").sc(Oce).build(){},Eh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEndpoint",{}).n("EventBridgeClient","UpdateEndpointCommand").sc(Nce).build(){},Sh=class extends U.Command.classBuilder().ep(j).m(function(e,r,n,s){return[H.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEventBus",{}).n("EventBridgeClient","UpdateEventBusCommand").sc(Dce).build(){},Lce={ActivateEventSourceCommand:yp,CancelReplayCommand:Ep,CreateApiDestinationCommand:Sp,CreateArchiveCommand:_p,CreateConnectionCommand:vp,CreateEndpointCommand:wp,CreateEventBusCommand:bp,CreatePartnerEventSourceCommand:Rp,DeactivateEventSourceCommand:Cp,DeauthorizeConnectionCommand:Ap,DeleteApiDestinationCommand:Tp,DeleteArchiveCommand:Pp,DeleteConnectionCommand:xp,DeleteEndpointCommand:Ip,DeleteEventBusCommand:Op,DeletePartnerEventSourceCommand:Np,DeleteRuleCommand:Dp,DescribeApiDestinationCommand:Lp,DescribeArchiveCommand:Mp,DescribeConnectionCommand:kp,DescribeEndpointCommand:qp,DescribeEventBusCommand:$p,DescribeEventSourceCommand:Fp,DescribePartnerEventSourceCommand:Up,DescribeReplayCommand:Bp,DescribeRuleCommand:Hp,DisableRuleCommand:jp,EnableRuleCommand:Vp,ListApiDestinationsCommand:Wp,ListArchivesCommand:zp,ListConnectionsCommand:Gp,ListEndpointsCommand:Kp,ListEventBusesCommand:Xp,ListEventSourcesCommand:Qp,ListPartnerEventSourceAccountsCommand:Yp,ListPartnerEventSourcesCommand:Jp,ListReplaysCommand:Zp,ListRuleNamesByTargetCommand:eh,ListRulesCommand:th,ListTagsForResourceCommand:rh,ListTargetsByRuleCommand:nh,PutEventsCommand:sh,PutPartnerEventsCommand:ih,PutPermissionCommand:oh,PutRuleCommand:ah,PutTargetsCommand:ch,RemovePermissionCommand:uh,RemoveTargetsCommand:lh,StartReplayCommand:dh,TagResourceCommand:fh,TestEventPatternCommand:ph,UntagResourceCommand:hh,UpdateApiDestinationCommand:mh,UpdateArchiveCommand:gh,UpdateConnectionCommand:yh,UpdateEndpointCommand:Eh,UpdateEventBusCommand:Sh},_h=class extends gp{};U.createAggregatedClient(Lce,_h);Object.defineProperty(D,"$Command",{enumerable:!0,get:function(){return U.Command}});Object.defineProperty(D,"__Client",{enumerable:!0,get:function(){return U.Client}});D.AccessDeniedException=yM;D.ActivateEventSourceCommand=yp;D.ApiDestinationHttpMethod=S7;D.ApiDestinationState=E7;D.ArchiveState=_7;D.AssignPublicIp=v7;D.CancelReplayCommand=Ep;D.ConcurrentModificationException=SM;D.ConnectionAuthorizationType=b7;D.ConnectionOAuthHttpMethod=R7;D.ConnectionState=C7;D.CreateApiDestinationCommand=Sp;D.CreateArchiveCommand=_p;D.CreateConnectionCommand=vp;D.CreateEndpointCommand=wp;D.CreateEventBusCommand=bp;D.CreatePartnerEventSourceCommand=Rp;D.DeactivateEventSourceCommand=Cp;D.DeauthorizeConnectionCommand=Ap;D.DeleteApiDestinationCommand=Tp;D.DeleteArchiveCommand=Pp;D.DeleteConnectionCommand=xp;D.DeleteEndpointCommand=Ip;D.DeleteEventBusCommand=Op;D.DeletePartnerEventSourceCommand=Np;D.DeleteRuleCommand=Dp;D.DescribeApiDestinationCommand=Lp;D.DescribeArchiveCommand=Mp;D.DescribeConnectionCommand=kp;D.DescribeEndpointCommand=qp;D.DescribeEventBusCommand=$p;D.DescribeEventSourceCommand=Fp;D.DescribePartnerEventSourceCommand=Up;D.DescribeReplayCommand=Bp;D.DescribeRuleCommand=Hp;D.DisableRuleCommand=jp;D.EnableRuleCommand=Vp;D.EndpointState=T7;D.EventBridge=_h;D.EventBridgeClient=gp;D.EventBridgeServiceException=$t;D.EventSourceState=I7;D.IllegalStatusException=xM;D.IncludeDetail=P7;D.InternalException=vM;D.InvalidEventPatternException=MM;D.InvalidStateException=bM;D.LaunchType=N7;D.Level=x7;D.LimitExceededException=OM;D.ListApiDestinationsCommand=Wp;D.ListArchivesCommand=zp;D.ListConnectionsCommand=Gp;D.ListEndpointsCommand=Kp;D.ListEventBusesCommand=Xp;D.ListEventSourcesCommand=Qp;D.ListPartnerEventSourceAccountsCommand=Yp;D.ListPartnerEventSourcesCommand=Jp;D.ListReplaysCommand=Zp;D.ListRuleNamesByTargetCommand=eh;D.ListRulesCommand=th;D.ListTagsForResourceCommand=rh;D.ListTargetsByRuleCommand=nh;D.ManagedRuleException=FM;D.OperationDisabledException=CM;D.PlacementConstraintType=D7;D.PlacementStrategyType=L7;D.PolicyLengthExceededException=BM;D.PropagateTags=M7;D.PutEventsCommand=sh;D.PutPartnerEventsCommand=ih;D.PutPermissionCommand=oh;D.PutRuleCommand=ah;D.PutTargetsCommand=ch;D.RemovePermissionCommand=uh;D.RemoveTargetsCommand=lh;D.ReplayState=w7;D.ReplicationState=A7;D.ResourceAlreadyExistsException=DM;D.ResourceNotFoundException=TM;D.RuleState=O7;D.StartReplayCommand=dh;D.TagResourceCommand=fh;D.TestEventPatternCommand=ph;D.ThrottlingException=qM;D.UntagResourceCommand=hh;D.UpdateApiDestinationCommand=mh;D.UpdateArchiveCommand=gh;D.UpdateConnectionCommand=yh;D.UpdateEndpointCommand=Eh;D.UpdateEventBusCommand=Sh});var ew=S((iu,Wo)=>{var qce=200,dq="__lodash_hash_undefined__",$ce=800,Fce=16,fq=9007199254740991,pq="[object Arguments]",Uce="[object Array]",Bce="[object AsyncFunction]",Hce="[object Boolean]",jce="[object Date]",Vce="[object Error]",hq="[object Function]",Wce="[object GeneratorFunction]",zce="[object Map]",Gce="[object Number]",Kce="[object Null]",mq="[object Object]",Xce="[object Proxy]",Qce="[object RegExp]",Yce="[object Set]",Jce="[object String]",Zce="[object Undefined]",eue="[object WeakMap]",tue="[object ArrayBuffer]",rue="[object DataView]",nue="[object Float32Array]",sue="[object Float64Array]",iue="[object Int8Array]",oue="[object Int16Array]",aue="[object Int32Array]",cue="[object Uint8Array]",uue="[object Uint8ClampedArray]",lue="[object Uint16Array]",due="[object Uint32Array]",fue=/[\\^$.*+?()[\]{}|]/g,pue=/^\[object .+?Constructor\]$/,hue=/^(?:0|[1-9]\d*)$/,Ie={};Ie[nue]=Ie[sue]=Ie[iue]=Ie[oue]=Ie[aue]=Ie[cue]=Ie[uue]=Ie[lue]=Ie[due]=!0;Ie[pq]=Ie[Uce]=Ie[tue]=Ie[Hce]=Ie[rue]=Ie[jce]=Ie[Vce]=Ie[hq]=Ie[zce]=Ie[Gce]=Ie[mq]=Ie[Qce]=Ie[Yce]=Ie[Jce]=Ie[eue]=!1;var gq=typeof global=="object"&&global&&global.Object===Object&&global,mue=typeof self=="object"&&self&&self.Object===Object&&self,cu=gq||mue||Function("return this")(),yq=typeof iu=="object"&&iu&&!iu.nodeType&&iu,ou=yq&&typeof Wo=="object"&&Wo&&!Wo.nodeType&&Wo,Eq=ou&&ou.exports===yq,Vv=Eq&&gq.process,rq=function(){try{var t=ou&&ou.require&&ou.require("util").types;return t||Vv&&Vv.binding&&Vv.binding("util")}catch{}}(),nq=rq&&rq.isTypedArray;function gue(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function yue(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Eue(t){return function(e){return t(e)}}function Sue(t,e){return t?.[e]}function _ue(t,e){return function(r){return t(e(r))}}var vue=Array.prototype,wue=Function.prototype,$h=Object.prototype,Wv=cu["__core-js_shared__"],Fh=wue.toString,Ln=$h.hasOwnProperty,sq=function(){var t=/[^.]+$/.exec(Wv&&Wv.keys&&Wv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Sq=$h.toString,bue=Fh.call(Object),Rue=RegExp("^"+Fh.call(Ln).replace(fue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kh=Eq?cu.Buffer:void 0,iq=cu.Symbol,oq=cu.Uint8Array,aq=kh?kh.allocUnsafe:void 0,_q=_ue(Object.getPrototypeOf,Object),cq=Object.create,Cue=$h.propertyIsEnumerable,Aue=vue.splice,gi=iq?iq.toStringTag:void 0,qh=function(){try{var t=Yv(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Tue=kh?kh.isBuffer:void 0,uq=Math.max,Pue=Date.now,vq=Yv(cu,"Map"),au=Yv(Object,"create"),xue=function(){function t(){}return function(e){if(!Ei(e))return{};if(cq)return cq(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function yi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Iue(){this.__data__=au?au(null):{},this.size=0}function Oue(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Nue(t){var e=this.__data__;if(au){var r=e[t];return r===dq?void 0:r}return Ln.call(e,t)?e[t]:void 0}function Due(t){var e=this.__data__;return au?e[t]!==void 0:Ln.call(e,t)}function Lue(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=au&&e===void 0?dq:e,this}yi.prototype.clear=Iue;yi.prototype.delete=Oue;yi.prototype.get=Nue;yi.prototype.has=Due;yi.prototype.set=Lue;function Mn(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Mue(){this.__data__=[],this.size=0}function kue(t){var e=this.__data__,r=Uh(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Aue.call(e,r,1),--this.size,!0}function que(t){var e=this.__data__,r=Uh(e,t);return r<0?void 0:e[r][1]}function $ue(t){return Uh(this.__data__,t)>-1}function Fue(t,e){var r=this.__data__,n=Uh(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}Mn.prototype.clear=Mue;Mn.prototype.delete=kue;Mn.prototype.get=que;Mn.prototype.has=$ue;Mn.prototype.set=Fue;function zo(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Uue(){this.size=0,this.__data__={hash:new yi,map:new(vq||Mn),string:new yi}}function Bue(t){var e=Hh(this,t).delete(t);return this.size-=e?1:0,e}function Hue(t){return Hh(this,t).get(t)}function jue(t){return Hh(this,t).has(t)}function Vue(t,e){var r=Hh(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}zo.prototype.clear=Uue;zo.prototype.delete=Bue;zo.prototype.get=Hue;zo.prototype.has=jue;zo.prototype.set=Vue;function Go(t){var e=this.__data__=new Mn(t);this.size=e.size}function Wue(){this.__data__=new Mn,this.size=0}function zue(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Gue(t){return this.__data__.get(t)}function Kue(t){return this.__data__.has(t)}function Xue(t,e){var r=this.__data__;if(r instanceof Mn){var n=r.__data__;if(!vq||n.length<qce-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new zo(n)}return r.set(t,e),this.size=r.size,this}Go.prototype.clear=Wue;Go.prototype.delete=zue;Go.prototype.get=Gue;Go.prototype.has=Kue;Go.prototype.set=Xue;function Que(t,e){var r=Xv(t),n=!r&&Kv(t),s=!r&&!n&&Cq(t),i=!r&&!n&&!s&&Tq(t),o=r||n||s||i,a=o?yue(t.length,String):[],c=a.length;for(var u in t)(e||Ln.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||bq(u,c)))&&a.push(u);return a}function zv(t,e,r){(r!==void 0&&!jh(t[e],r)||r===void 0&&!(e in t))&&Qv(t,e,r)}function Yue(t,e,r){var n=t[e];(!(Ln.call(t,e)&&jh(n,r))||r===void 0&&!(e in t))&&Qv(t,e,r)}function Uh(t,e){for(var r=t.length;r--;)if(jh(t[r][0],e))return r;return-1}function Qv(t,e,r){e=="__proto__"&&qh?qh(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Jue=dle();function Bh(t){return t==null?t===void 0?Zce:Kce:gi&&gi in Object(t)?fle(t):Ele(t)}function lq(t){return uu(t)&&Bh(t)==pq}function Zue(t){if(!Ei(t)||gle(t))return!1;var e=Zv(t)?Rue:pue;return e.test(wle(t))}function ele(t){return uu(t)&&Aq(t.length)&&!!Ie[Bh(t)]}function tle(t){if(!Ei(t))return yle(t);var e=Rq(t),r=[];for(var n in t)n=="constructor"&&(e||!Ln.call(t,n))||r.push(n);return r}function wq(t,e,r,n,s){t!==e&&Jue(e,function(i,o){if(s||(s=new Go),Ei(i))rle(t,e,o,r,wq,n,s);else{var a=n?n(Gv(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),zv(t,o,a)}},Pq)}function rle(t,e,r,n,s,i,o){var a=Gv(t,r),c=Gv(e,r),u=o.get(c);if(u){zv(t,r,u);return}var l=i?i(a,c,r+"",t,e,o):void 0,d=l===void 0;if(d){var m=Xv(c),g=!m&&Cq(c),E=!m&&!g&&Tq(c);l=c,m||g||E?Xv(a)?l=a:ble(a)?l=cle(a):g?(d=!1,l=ile(c,!0)):E?(d=!1,l=ale(c,!0)):l=[]:Rle(c)||Kv(c)?(l=a,Kv(a)?l=Cle(a):(!Ei(a)||Zv(a))&&(l=ple(c))):d=!1}d&&(o.set(c,l),s(l,c,n,i,o),o.delete(c)),zv(t,r,l)}function nle(t,e){return _le(Sle(t,e,xq),t+"")}var sle=qh?function(t,e){return qh(t,"toString",{configurable:!0,enumerable:!1,value:Tle(e),writable:!0})}:xq;function ile(t,e){if(e)return t.slice();var r=t.length,n=aq?aq(r):new t.constructor(r);return t.copy(n),n}function ole(t){var e=new t.constructor(t.byteLength);return new oq(e).set(new oq(t)),e}function ale(t,e){var r=e?ole(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function cle(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ule(t,e,r,n){var s=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),s?Qv(r,a,c):Yue(r,a,c)}return r}function lle(t){return nle(function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&hle(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,i)}return e})}function dle(t){return function(e,r,n){for(var s=-1,i=Object(e),o=n(e),a=o.length;a--;){var c=o[t?a:++s];if(r(i[c],c,i)===!1)break}return e}}function Hh(t,e){var r=t.__data__;return mle(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Yv(t,e){var r=Sue(t,e);return Zue(r)?r:void 0}function fle(t){var e=Ln.call(t,gi),r=t[gi];try{t[gi]=void 0;var n=!0}catch{}var s=Sq.call(t);return n&&(e?t[gi]=r:delete t[gi]),s}function ple(t){return typeof t.constructor=="function"&&!Rq(t)?xue(_q(t)):{}}function bq(t,e){var r=typeof t;return e=e??fq,!!e&&(r=="number"||r!="symbol"&&hue.test(t))&&t>-1&&t%1==0&&t<e}function hle(t,e,r){if(!Ei(r))return!1;var n=typeof e;return(n=="number"?Jv(r)&&bq(e,r.length):n=="string"&&e in r)?jh(r[e],t):!1}function mle(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function gle(t){return!!sq&&sq in t}function Rq(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||$h;return t===r}function yle(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Ele(t){return Sq.call(t)}function Sle(t,e,r){return e=uq(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,i=uq(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=r(o),gue(t,this,a)}}function Gv(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var _le=vle(sle);function vle(t){var e=0,r=0;return function(){var n=Pue(),s=Fce-(n-r);if(r=n,s>0){if(++e>=$ce)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function wle(t){if(t!=null){try{return Fh.call(t)}catch{}try{return t+""}catch{}}return""}function jh(t,e){return t===e||t!==t&&e!==e}var Kv=lq(function(){return arguments}())?lq:function(t){return uu(t)&&Ln.call(t,"callee")&&!Cue.call(t,"callee")},Xv=Array.isArray;function Jv(t){return t!=null&&Aq(t.length)&&!Zv(t)}function ble(t){return uu(t)&&Jv(t)}var Cq=Tue||Ple;function Zv(t){if(!Ei(t))return!1;var e=Bh(t);return e==hq||e==Wce||e==Bce||e==Xce}function Aq(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fq}function Ei(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function uu(t){return t!=null&&typeof t=="object"}function Rle(t){if(!uu(t)||Bh(t)!=mq)return!1;var e=_q(t);if(e===null)return!0;var r=Ln.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Fh.call(r)==bue}var Tq=nq?Eue(nq):ele;function Cle(t){return ule(t,Pq(t))}function Pq(t){return Jv(t)?Que(t,!0):tle(t)}var Ale=lle(function(t,e,r){wq(t,e,r)});function Tle(t){return function(){return t}}function xq(t){return t}function Ple(){return!1}Wo.exports=Ale});var zq,Gq=w(()=>{zq="ffffffff-ffff-ffff-ffff-ffffffffffff"});var Kq,Xq=w(()=>{Kq="00000000-0000-0000-0000-000000000000"});var Qq,Yq=w(()=>{Qq=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function Nle(t){return typeof t=="string"&&Qq.test(t)}var Is,gu=w(()=>{Yq();Is=Nle});function Dle(t){if(!Is(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Os,yu=w(()=>{gu();Os=Dle});function Ut(t,e=0){return(gt[t[e+0]]+gt[t[e+1]]+gt[t[e+2]]+gt[t[e+3]]+"-"+gt[t[e+4]]+gt[t[e+5]]+"-"+gt[t[e+6]]+gt[t[e+7]]+"-"+gt[t[e+8]]+gt[t[e+9]]+"-"+gt[t[e+10]]+gt[t[e+11]]+gt[t[e+12]]+gt[t[e+13]]+gt[t[e+14]]+gt[t[e+15]]).toLowerCase()}function Lle(t,e=0){let r=Ut(t,e);if(!Is(r))throw TypeError("Stringified UUID is invalid");return r}var gt,Jq,qn=w(()=>{gu();gt=[];for(let t=0;t<256;++t)gt.push((t+256).toString(16).slice(1));Jq=Lle});function bi(){return Kh>Xh.length-16&&(Zq.default.randomFillSync(Xh),Kh=0),Xh.slice(Kh,Kh+=16)}var Zq,Xh,Kh,Qh=w(()=>{Zq=A(require("crypto")),Xh=new Uint8Array(256),Kh=Xh.length});function Mle(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node,o=t.clockseq;if(t._v6||(i||(i=lw),o==null&&(o=Yh)),i==null||o==null){let m=t.random||(t.rng||bi)();i==null&&(i=[m[0],m[1],m[2],m[3],m[4],m[5]],!lw&&!t._v6&&(i[0]|=1,lw=i)),o==null&&(o=(m[6]<<8|m[7])&16383,Yh===void 0&&!t._v6&&(Yh=o))}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:fw+1,u=a-dw+(c-fw)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||a>dw)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");dw=a,fw=c,Yh=o,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let d=a/4294967296*1e4&268435455;s[n++]=d>>>8&255,s[n++]=d&255,s[n++]=d>>>24&15|16,s[n++]=d>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let m=0;m<6;++m)s[n+m]=i[m];return e||Ut(s)}var lw,Yh,dw,fw,Jh,pw=w(()=>{Qh();qn();dw=0,fw=0;Jh=Mle});function Eu(t){let e=typeof t=="string"?Os(t):t,r=kle(e);return typeof t=="string"?Ut(r):r}function kle(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var hw=w(()=>{yu();qn()});function qle(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Su(t,e,r){function n(s,i,o,a){var c;if(typeof s=="string"&&(s=qle(s)),typeof i=="string"&&(i=Os(i)),((c=i)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return Ut(u)}try{n.name=t}catch{}return n.DNS=$le,n.URL=Fle,n}var $le,Fle,mw=w(()=>{qn();yu();$le="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fle="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Ule(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),e$.default.createHash("md5").update(t).digest()}var e$,t$,r$=w(()=>{e$=A(require("crypto"));t$=Ule});var Ble,n$,s$=w(()=>{mw();r$();Ble=Su("v3",48,t$),n$=Ble});var i$,gw,o$=w(()=>{i$=A(require("crypto")),gw={randomUUID:i$.default.randomUUID}});function Hle(t,e,r){if(gw.randomUUID&&!e&&!t)return gw.randomUUID();t=t||{};let n=t.random||(t.rng||bi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Ut(n)}var on,a$=w(()=>{o$();Qh();qn();on=Hle});function jle(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),c$.default.createHash("sha1").update(t).digest()}var c$,u$,l$=w(()=>{c$=A(require("crypto"));u$=jle});var Vle,d$,f$=w(()=>{mw();l$();Vle=Su("v5",80,u$),d$=Vle});function yw(t={},e,r=0){let n=Jh({...t,_v6:!0},new Uint8Array(16));if(n=Eu(n),e){for(let s=0;s<16;s++)e[r+s]=n[s];return e}return Ut(n)}var p$=w(()=>{qn();pw();hw()});function Ew(t){let e=typeof t=="string"?Os(t):t,r=Wle(e);return typeof t=="string"?Ut(r):r}function Wle(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var h$=w(()=>{yu();qn()});function zle(t,e,r){t=t||{};let n=e&&r||0,s=e||new Uint8Array(16),i=t.random||(t.rng||bi)(),o=t.msecs!==void 0?t.msecs:Date.now(),a=t.seq!==void 0?t.seq:null,c=g$,u=m$;return o>Ur&&t.msecs===void 0&&(Ur=o,a!==null&&(c=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),c=a>>>19&4095,u=a&524287),(c===null||u===null)&&(c=i[6]&127,c=c<<8|i[7],u=i[8]&63,u=u<<8|i[9],u=u<<5|i[10]>>>3),o+1e4>Ur&&a===null?++u>524287&&(u=0,++c>4095&&(c=0,Ur++)):Ur=o,g$=c,m$=u,s[n++]=Ur/1099511627776&255,s[n++]=Ur/4294967296&255,s[n++]=Ur/16777216&255,s[n++]=Ur/65536&255,s[n++]=Ur/256&255,s[n++]=Ur&255,s[n++]=c>>>4&15|112,s[n++]=c&255,s[n++]=u>>>13&63|128,s[n++]=u>>>5&255,s[n++]=u<<3&255|i[10]&7,s[n++]=i[11],s[n++]=i[12],s[n++]=i[13],s[n++]=i[14],s[n++]=i[15],e||Ut(s)}var m$,g$,Ur,y$,E$=w(()=>{Qh();qn();m$=null,g$=null,Ur=0;y$=zle});function Gle(t){if(!Is(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var S$,_$=w(()=>{gu();S$=Gle});var Sw={};xt(Sw,{MAX:()=>zq,NIL:()=>Kq,parse:()=>Os,stringify:()=>Jq,v1:()=>Jh,v1ToV6:()=>Eu,v3:()=>n$,v4:()=>on,v5:()=>d$,v6:()=>yw,v6ToV1:()=>Ew,v7:()=>y$,validate:()=>Is,version:()=>S$});var Zo=w(()=>{Gq();Xq();yu();qn();pw();hw();s$();a$();f$();p$();h$();E$();gu();_$()});var C$=S((HNe,R$)=>{"use strict";function _w(t){return typeof t=="function"}var Bt=console.error.bind(console);function _u(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function vu(t){t&&t.logger&&(_w(t.logger)?Bt=t.logger:Bt("new logger isn't a function, not replacing"))}function w$(t,e,r){if(!t||!t[e]){Bt("no original function "+e+" to wrap");return}if(!r){Bt("no wrapper function"),Bt(new Error().stack);return}if(!_w(t[e])||!_w(r)){Bt("original object and wrapper must be functions");return}var n=t[e],s=r(n,e);return _u(s,"__original",n),_u(s,"__unwrap",function(){t[e]===s&&_u(t,e,n)}),_u(s,"__wrapped",!0),_u(t,e,s),s}function Kle(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Bt("must provide one or more modules to patch"),Bt(new Error().stack);return}if(!(e&&Array.isArray(e))){Bt("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(s){w$(n,s,r)})})}function b$(t,e){if(!t||!t[e]){Bt("no function to unwrap."),Bt(new Error().stack);return}if(!t[e].__unwrap)Bt("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function Xle(t,e){if(t)Array.isArray(t)||(t=[t]);else{Bt("must provide one or more modules to patch"),Bt(new Error().stack);return}if(!(e&&Array.isArray(e))){Bt("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){b$(r,n)})})}vu.wrap=w$;vu.massWrap=Kle;vu.unwrap=b$;vu.massUnwrap=Xle;R$.exports=vu});var I$=S((jNe,x$)=>{"use strict";var T$=C$(),ta=T$.wrap,Zh=T$.unwrap,$n="wrap@before";function em(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Qle(t,e){for(var r=e.length,n=0;n<r;n++){var s=e[n],i=t[$n];if(typeof i=="function")i(s);else if(Array.isArray(i))for(var o=i.length,a=0;a<o;a++)i[a](s)}}function P$(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function Yle(t,e,r){var n=P$(t,e),s=n.filter(function(i){return r.indexOf(i)===-1});s.length>0&&Qle(t,s)}function A$(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}x$.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function s(o){return function(c,u){var l=P$(this,c).slice();try{var d=o.call(this,c,u);return Yle(this,c,l),d}finally{this.on.__wrapped||ta(this,"on",s),this.addListener.__wrapped||ta(this,"addListener",s)}}}function i(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=A$(u,n)}}}ta(this,"removeListener",l);try{return this._events[c]=A$(u,n),o.apply(this,arguments)}finally{Zh(this,"removeListener"),this._events[c]=u}}}e[$n]?typeof e[$n]=="function"?em(e,$n,[e[$n],r]):Array.isArray(e[$n])&&e[$n].push(r):em(e,$n,r),e.__wrapped||(ta(e,"addListener",s),ta(e,"on",s),ta(e,"emit",i),em(e,"__unwrap",function(){Zh(e,"addListener"),Zh(e,"on"),Zh(e,"emit"),delete e[$n],delete e.__wrapped}),em(e,"__wrapped",!0))}});var L$=S((VNe,D$)=>{"use strict";var he=require("util"),Fn=require("assert"),Jle=I$(),Oe=require("async_hooks"),wu="cls@contexts",bu="error@context",He=process.env.DEBUG_CLS_HOOKED,pe=-1;D$.exports={getNamespace:O$,createNamespace:Zle,destroyNamespace:N$,reset:ede,ERROR_SYMBOL:bu};function Er(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Er.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,He){let n=" ".repeat(this._indent<0?0:this._indent);qe(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Er.prototype.get=function(e){if(!this.active){if(He){let r=Oe.currentId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(s+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),qe(`${s}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${he.inspect(this.active)}`)}return this.active[e]};Er.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=pe,He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-CREATED Context: (${this.name}) currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${he.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Er.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(He){let n=Oe.triggerAsyncId(),s=Oe.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} context:${he.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[bu]=r),n}finally{if(He){let n=Oe.triggerAsyncId(),s=Oe.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-RUN END: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} ${he.inspect(r)}`)}this.exit(r)}};Er.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Er.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return He&&qe("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),n.then(s=>(He&&qe("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),s)).catch(s=>{throw s[bu]=r,He&&qe("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),s})};Er.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(i){throw i&&(i[bu]=r),i}finally{n.exit(r)}}};Er.prototype.enter=function(e){if(Fn.ok(e,"context must be provided for entering"),He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-ENTER: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${he.inspect(e)}`)}this._set.push(this.active),this.active=e};Er.prototype.exit=function(e){if(Fn.ok(e,"context must be provided for exiting"),He){let n=Oe.executionAsyncId(),s=Oe.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-EXIT: (${this.name}) currentUid:${pe} triggerId:${s} asyncHooksCurrentId:${n} len:${this._set.length} ${he.inspect(e)}`)}if(this.active===e){Fn.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(He&&qe("??ERROR?? context exiting but not entered - ignoring: "+he.inspect(e)),Fn.ok(r>=0,`context not currently entered; can't exit. 
`+he.inspect(this)+`
`+he.inspect(e))):(Fn.ok(r,"can't remove top context"),this._set.splice(r,1))};Er.prototype.bindEmitter=function(e){Fn.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function s(o){o&&(o[wu]||(o[wu]=Object.create(null)),o[wu][n]={namespace:r,context:r.active})}function i(o){if(!(o&&o[wu]))return o;let a=o,c=o[wu];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}Jle(e,s,i)};Er.prototype.fromException=function(e){return e[bu]};function O$(t){return process.namespaces[t]}function Zle(t){Fn.ok(t,"namespace must be given a name."),He&&qe(`NS-CREATING NAMESPACE (${t})`);let e=new Er(t);return e.id=pe,Oe.createHook({init(n,s,i,o){if(pe=Oe.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),He){let a=" ".repeat(e._indent<0?0:e._indent);qe(`${a}INIT [${s}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(pe===0){let a=Oe.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),He){let u=" ".repeat(e._indent<0?0:e._indent);qe(`${u}INIT USING CONTEXT FROM TRIGGERID [${s}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(He){let u=" ".repeat(e._indent<0?0:e._indent);qe(`${u}INIT MISSING CONTEXT [${s}] (${t}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(He&&s==="PROMISE"){qe(he.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(e._indent<0?0:e._indent);qe(`${c}INIT RESOURCE-PROMISE [${s}] (${t}) parentId:${a} asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){pe=Oe.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(pe),s){if(He){let i=Oe.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);qe(`${o}BEFORE (${t}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`),e._indent+=2}e.enter(s)}else if(He){let i=Oe.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);qe(`${o}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${he.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){pe=Oe.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(pe),s){if(He){let i=Oe.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);qe(`${o}AFTER (${t}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`)}e.exit(s)}else if(He){let i=Oe.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);qe(`${o}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`)}},destroy(n){if(pe=Oe.executionAsyncId(),He){let s=Oe.triggerAsyncId(),i=" ".repeat(e._indent<0?0:e._indent);qe(`${i}DESTROY (${t}) currentUid:${pe} asyncId:${n} triggerId:${s} active:${he.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(e._contexts.get(pe))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function N$(t){let e=O$(t);Fn.ok(e,`can't delete nonexistent namespace! "`+t+'"'),Fn.ok(e.id,"don't assign to process.namespaces directly! "+he.inspect(e)),process.namespaces[t]=null}function ede(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){N$(t)}),process.namespaces=Object.create(null)}process.namespaces={};function qe(...t){He&&process._rawDebug(`${he.format(...t)}`)}});var $e=S((WNe,q$)=>{"use strict";var vw=["debug","info","warn","error","silent"],M$=vw.indexOf("error"),tde=rde(process.env.AWS_XRAY_DEBUG_MODE?"debug":process.env.AWS_XRAY_LOG_LEVEL),k$={error:tm("error"),info:tm("info"),warn:tm("warn"),debug:tm("debug")};function tm(t){var e=vw.indexOf(t),r=console[t]||console.log||(()=>{});return e>=tde?(n,s)=>{(n||s)&&r(ide(t,n,s))}:()=>{}}function rde(t){if(t){var e=t.toLowerCase(),r=vw.indexOf(e);return r>=0?r:M$}return M$}function nde(t){var e=-t.getTimezoneOffset(),r=e>=0?"+":"-",n=function(s){var i=Math.floor(Math.abs(s));return(i<10?"0":"")+i};return new Date(t.getTime()+e*60*1e3).toISOString().replace(/T/," ").replace(/Z/," ")+r+n(e/60)+":"+n(e%60)}function sde(){return process.env.LAMBDA_TASK_ROOT!==void 0}function ide(t,e,r){var n=[];sde()||(n.push(nde(new Date)),n.push(`[${t.toUpperCase()}]`)),e&&n.push(e);var s=n.join(" "),i=ode(r);return[s,i].filter(o=>o.length>0).join(`
  `)}function ode(t){return t?typeof t=="string"?t:JSON.stringify(t):""}var ade={setLogger:function(e){k$=e},getLogger:function(){return k$}};q$.exports=ade});var ww=S((zNe,F$)=>{"use strict";var cde=require("crypto");function $$(t,e){this.init(t,e)}$$.prototype.init=function(e,r){var n=typeof e=="string"||e instanceof String?{message:e,name:""}:e;if(this.message=n.message,this.type=n.name,this.stack=[],this.remote=!!r,this.id=cde.randomBytes(8).toString("hex"),n.stack){var s=n.stack.split(`
`);s.shift(),s.forEach(i=>{var o=i.trim().replace(/\(|\)/g,"");o=o.substring(o.indexOf(" ")+1);var a=o.lastIndexOf(" ")>=0?o.slice(0,o.lastIndexOf(" ")):null,c=Array.isArray(a)&&!a.length?o:o.slice(o.lastIndexOf(" ")+1);c=c.split(":");var u={path:c[0],line:parseInt(c[1]),label:a||"anonymous"};this.stack.push(u)},this)}};F$.exports=$$});var B$=S((GNe,U$)=>{U$.exports=ude;function ude(t){var e=!1,r=null,n=null,s=null;return o;function i(a){s&&fde(s,a),e=!1,s=n;var c=r;if(r=null,n=null,!c||!c.length){if(!s||!s.length){s=null;return}c||(c=[])}e=!0,t(c,i)}function o(a,c){e?(r||(r=[],n=[]),lde(r,a),c&&n.push(c)):(c&&(s=[c]),e=!0,t(Array.isArray(a)?a:[a],i))}}function lde(t,e){Array.isArray(e)?dde(t,e):t.push(e)}function dde(t,e){for(var r=0;r<e.length;r++)t.push(e[r])}function fde(t,e){for(var r=0;r<t.length;r++)t[r](e)}});var rm=S((KNe,V$)=>{"use strict";var H$=$e(),Br={udp_ip:"127.0.0.1",udp_port:2e3,tcp_ip:"127.0.0.1",tcp_port:2e3,setDaemonAddress:function(e){process.env.AWS_XRAY_DAEMON_ADDRESS?H$.getLogger().warn("Ignoring call to setDaemonAddress as AWS_XRAY_DAEMON_ADDRESS is set. The current daemon address will not be changed."):(j$(e),H$.getLogger().info("Configured daemon address to "+e+"."))}},j$=function(e){if(e.indexOf(":")===-1)throw new Error("Invalid Daemon Address. You must specify an ip and port.");var r=e.split(" ");if(r.length===1){if(e.indexOf("udp")>-1||e.indexOf("tcp")>-1)throw new Error("Invalid Daemon Address. You must specify both tcp and udp addresses.");var n=e.split(":");if(!n[0])throw new Error("Invalid Daemon Address. You must specify an ip.");Br.udp_ip=n[0],Br.tcp_ip=n[0],Br.udp_port=n[1],Br.tcp_port=n[1]}else if(r.length===2){var s=r[0].split(":"),i=r[1].split(":"),o={};if(o[s[0]]=s,o[i[0]]=i,Br.udp_ip=o.udp[1],Br.udp_port=parseInt(o.udp[2]),Br.tcp_ip=o.tcp[1],Br.tcp_port=parseInt(o.tcp[2]),!Br.udp_port||!Br.tcp_port)throw new Error("Invalid Daemon Address. You must specify port number.")}};process.env.AWS_XRAY_DAEMON_ADDRESS&&j$(process.env.AWS_XRAY_DAEMON_ADDRESS);V$.exports=Br});var sm=S((XNe,Q$)=>{"use strict";var G$=require("dgram"),pde=B$(),nm=$e(),W$='{"format":"json","version":1}',z$=`
`;function hde(t,e){var r=G$.createSocket("udp4");K$(r,t,0,function(){try{r.close()}finally{e()}})}function K$(t,e,r,n){if(r>=e.length){n();return}mde(t,e[r],function(){K$(t,e,r+1,n)})}function mde(t,e,r){var n=e.msg,s=e.offset,i=e.length,o=e.port,a=e.address,c=e.callback;t.send(n,s,i,o,a,function(u){try{c(u)}finally{r()}})}function X$(){this.batchSend=pde(hde)}X$.prototype.send=function(t,e,r,n,s,i){var o={msg:t,offset:e,length:r,port:n,address:s,callback:i};this.batchSend(o)};var gde={daemonConfig:rm(),format:function(e){return W$+z$+e.toString()},send:function(e){this.socket||(this.useBatchingTemporarySocket?this.socket=new X$:this.socket=G$.createSocket("udp4").unref());var r=this.socket,n=e.format(),s=W$+z$+n,i=Buffer.from(s),o='{"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}',a=e.type==="subsegment"?"Subsegment":"Segment";r.send(i,0,i.length,this.daemonConfig.udp_port,this.daemonConfig.udp_ip,function(c){c?c.code==="EMSGSIZE"?nm.getLogger().error(a+" too large to send: "+o+" ("+i.length+" bytes)."):nm.getLogger().error("Error occured sending segment: ",c):(nm.getLogger().debug(a+' sent: {"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}'),nm.getLogger().debug("UDP message sent: "+e))})},setDaemonAddress:function(e){this.daemonConfig.setDaemonAddress(e)},getIp:function(){return this.daemonConfig.udp_ip},getPort:function(){return this.daemonConfig.udp_port},disableReusableSocket:function(){this.useBatchingTemporarySocket=!0}};Q$.exports=gde});var om=S((QNe,Y$)=>{"use strict";var yde=require("crypto"),im=$e(),bw=class t{constructor(e,r){this.version=1,this.timestamp=e||Math.round(new Date().getTime()/1e3).toString(16),this.id=r||yde.randomBytes(12).toString("hex")}static Invalid(){return new t("00000000","000000000000000000000000")}static FromString(e){let r="-";var n=new t,s,i;if(!e||typeof e!="string")return im.getLogger().error("Empty or non-string trace ID provided"),n;let o=e.trim().split(r);return o.length!==3?(im.getLogger().error("Unrecognized trace ID format"),n):(s=parseInt(o[0]),isNaN(s)||s<1?(im.getLogger().error("Trace ID version must be positive integer"),n):(i=parseInt(o[1],16).toString(16),i==="NaN"?(im.getLogger().error("Trace ID timestamp must be a hex-encoded value"),n):(i=i.padStart(8,"0"),n.version=s,n.timestamp=i,n.id=o[2],n)))}toString(){return`${this.version.toString()}-${this.timestamp}-${this.id}`}};Y$.exports=bw});var Ct=S((YNe,J$)=>{"use strict";var Ede=require("crypto"),Ru=$e(),Sde=om(),Rw={getCauseTypeFromHttpStatus:function(e){var r=e.toString();if(r.match(/^[4][0-9]{2}$/)!==null)return"error";if(r.match(/^[5][0-9]{2}$/)!==null)return"fault"},stripQueryStringFromPath:function(e){return e?e.split("?")[0]:""},wildcardMatch:function(e,r){if(e===void 0||r===void 0)return!1;if(e.length===1&&e.charAt(0)==="*")return!0;var n=e.length,s=r.length,i=e.indexOf("*");if(e=e.toLowerCase(),r=r.toLowerCase(),i===-1||i===n-1){var o=function(){for(var m=0,g=0;g<n;g++){var E=e.charAt(g);if(E==="*")return!0;if(E==="?"){if(m===s)return!1;m++}else{if(m>=s||E!=r.charAt(m))return!1;m++}}return m===s};return o()}var a=[];a[0]=!0;for(var c=0;c<n;c++){var u,l=e.charAt(c);if(l!="*")for(u=s-1;u>=0;u--)a[u+1]=!!a[u]&&(l==="?"||l===r.charAt(u));else{for(u=0;u<=s&&!a[u];)u++;for(u;u<=s;u++)a[u]=!0}a[0]=a[0]&&l==="*"}return a[s]},LambdaUtils:{validTraceData:function(t){var e=!1;if(t){var r=Rw.processTraceData(t);e=!!(r&&r.root&&r.parent&&r.sampled)}return e},populateTraceData:function(t,e){Ru.getLogger().debug("Lambda trace data found: "+e);let r=Rw.processTraceData(e);var n=!1;return r?r.root&&!r.parent&&!r.sampled?(t.noOp=!0,n=!0):!r.root||!r.parent||!r.sampled?Ru.getLogger().error("_X_AMZN_TRACE_ID is missing required information"):n=!0:(r={},Ru.getLogger().error("_X_AMZN_TRACE_ID is empty or has an invalid format")),t.trace_id=Sde.FromString(r.root).toString(),t.id=r.parent||Ede.randomBytes(8).toString("hex"),r.root&&t.trace_id!==r.root&&(Ru.getLogger().error("_X_AMZN_TRACE_ID contains invalid trace ID"),n=!1),parseInt(r.sampled)?delete t.notTraced:t.notTraced=!0,r.data&&(t.additionalTraceData=r.data),Ru.getLogger().debug("Segment started: "+JSON.stringify(r)),n}},processTraceData:function(e){var r={},n={},s=["root","parent","sampled","self"],i=256;return typeof e=="string"&&e&&(e.split(";").forEach(function(o){if(o){var a=o.split("=");if(a[0]&&a[1]){let c=a[0].trim(),u=a[1].trim(),l=c.toLowerCase(),d=s.indexOf(l)!==-1;d?r[l]=u:!d&&i-(l.length+u.length)>=0&&(n[c]=u,i-=c.length+u.length)}}}),r.data=n),r},objectWithoutProperties:function(e,r,n){r=Array.isArray(r)?r:[],n=typeof n=="boolean"?n:!1;var s=n?Object.create(Object.getPrototypeOf(e)):{};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i]);return s},safeParseInt:t=>!t||isNaN(t)?0:parseInt(t)};J$.exports=Rw});var Ns=S((JNe,tF)=>{"use strict";var{safeParseInt:Z$}=Ct(),eF=$e(),_de=100,Cw={streamingThreshold:_de,getCurrentTime:function(){return Date.now()/1e3},setOrigin:function(e){this.origin=e},setPluginData:function(e){this.pluginData=e},setSDKData:function(e){this.sdkData=e},setServiceData:function(e){this.serviceData=e},setStreamingThreshold:function(e){isFinite(e)&&e>=0?(Cw.streamingThreshold=e,eF.getLogger().debug("Subsegment streaming threshold set to: "+e)):eF.getLogger().error("Invalid threshold: "+e+". Must be a whole number >= 0.")},getStreamingThreshold:function(){return Cw.streamingThreshold},getHttpResponseData:t=>{let e={};if(!t)return e;let r=Z$(t.statusCode);return r!==0&&(e.status=r),t.headers&&t.headers["content-length"]&&(e.content_length=Z$(t.headers["content-length"])),e},getJsonStringifyReplacer:()=>(t,e)=>typeof e=="bigint"?e.toString():e};tF.exports=Cw});var sF=S((ZNe,nF)=>{"use strict";var{getHttpResponseData:vde}=Ns(),{stripQueryStringFromPath:wde}=Ct();function rF(t,e,r){this.init(t,e,r)}rF.prototype.init=function(e,r,n){this.request={url:e.agent&&e.agent.protocol?e.agent.protocol+"//"+(e.host||e.getHeader("host"))+wde(e.path):"",method:e.method||""},n&&(this.request.traced=!0),r&&(this.response=vde(r))};nF.exports=rF});var Cu=S((eDe,iF)=>{"use strict";var bde=require("crypto"),Rde=ww(),Cde=sF(),Ade=sm(),am=Ns(),Tde=Ct(),Un=$e();function me(t){this.init(t)}me.prototype.init=function(e){if(typeof e!="string")throw new Error("Subsegment name must be of type string.");this.id=bde.randomBytes(8).toString("hex"),this.name=e,this.start_time=am.getCurrentTime(),this.in_progress=!0,this.counter=0,this.notTraced=!1};me.prototype.addNewSubsegment=function(e){let r=new me(e);return this.addSubsegment(r),r};me.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};me.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new me(e);return this.addSubsegment(r),r.notTraced=!0,r};me.prototype.addSubsegment=function(t){if(!(t instanceof me))throw new Error("Failed to add subsegment:"+t+' to subsegment "'+this.name+'".  Not a subsegment.');this.subsegments===void 0&&(this.subsegments=[]),t.segment=this.segment,t.parent=this,t.notTraced=t.parent.notTraced,t.noOp=t.parent.noOp,t.end_time===void 0&&this.incrementCounter(t.counter),this.subsegments.push(t)};me.prototype.removeSubsegment=function(e){if(!(e instanceof me))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};me.prototype.addAttribute=function(e,r){this[e]=r};me.prototype.addPrecursorId=function(t){typeof t!="string"&&Un.getLogger().error("Failed to add id:"+t+" to subsegment "+this.name+".  Precursor Ids must be of type string."),this.precursor_ids===void 0&&(this.precursor_ids=[]),this.precursor_ids.push(t)};me.prototype.addAnnotation=function(t,e){if(typeof e!="boolean"&&typeof e!="string"&&!isFinite(e)){Un.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof t!="string"){Un.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[t]=e};me.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){Un.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){Un.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};me.prototype.addSqlData=function(e){this.sql=e};me.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){Un.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.segment&&this.segment.exception){if(e===this.segment.exception.ex){this.fault=!0,this.cause={id:this.segment.exception.cause,exceptions:[]};return}delete this.segment.exception}this.segment&&(this.segment.exception={ex:e,cause:this.id}),this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.unshift(new Rde(e,r))};me.prototype.addRemoteRequestData=function(e,r,n){this.http=new Cde(e,r,n),"traced"in this.http.request&&(this.traced=this.http.request.traced,delete this.http.request.traced)};me.prototype.addFaultFlag=function(){this.fault=!0};me.prototype.addErrorFlag=function(){this.error=!0};me.prototype.addThrottleFlag=function(){this.throttle=!0};me.prototype.close=function(e,r){var n=this.segment;this.end_time=am.getCurrentTime(),delete this.in_progress,e&&this.addError(e,r),this.parent&&this.parent.decrementCounter(),n&&n.counter>am.getStreamingThreshold()&&this.streamSubsegments()&&this.parent&&this.parent.removeSubsegment(this)};me.prototype.incrementCounter=function(e){this.counter=e?this.counter+e+1:this.counter+1,this.parent&&this.parent.incrementCounter(e)};me.prototype.decrementCounter=function(){this.counter--,this.parent&&this.parent.decrementCounter()};me.prototype.isClosed=function(){return!this.in_progress};me.prototype.flush=function(){if(!this.parent||!this.segment){Un.getLogger().error("Failed to flush subsegment: "+this.name+". Subsegment must be added to a segment chain to flush.");return}this.segment.trace_id?this.segment.notTraced!==!0&&!this.notTraced?Ade.send(this):Un.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is marked as not sampled."):Un.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is missing a trace ID.")};me.prototype.streamSubsegments=function(){if(this.isClosed()&&this.counter<=0)return this.flush(),!0;if(this.subsegments&&this.subsegments.length>0){var e=[];this.subsegments.forEach(function(r){r.streamSubsegments()||e.push(r)}),this.subsegments=e}};me.prototype.format=function(){return this.type="subsegment",this.parent&&(this.parent_id=this.parent.id),this.segment&&(this.trace_id=this.segment.trace_id),this.serialize()};me.prototype.toString=function(){return this.serialize()};me.prototype.toJSON=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=Tde.objectWithoutProperties(this,e,!1);return r};me.prototype.serialize=function(e){return JSON.stringify(e??this,am.getJsonStringifyReplacer())};iF.exports=me});var Au=S((tDe,cF)=>{"use strict";var Pde=require("crypto"),xde=ww(),Ide=sm(),Sr=Ns(),cm=Cu(),oF=om(),aF=Ct(),Ds=$e();function Pe(t,e,r){this.init(t,e,r)}Pe.prototype.init=function(e,r,n){if(typeof e!="string")throw new Error("Segment name must be of type string.");var s;r&&typeof r=="string"?s=oF.FromString(r):s=new oF;var i=Pde.randomBytes(8).toString("hex"),o=Sr.getCurrentTime();this.trace_id=s.toString(),this.id=i,this.start_time=o,this.name=e||"",this.in_progress=!0,this.counter=0,n&&(this.parent_id=n),Sr.serviceData&&this.setServiceData(Sr.serviceData),Sr.pluginData&&this.addPluginData(Sr.pluginData),Sr.origin&&(this.origin=Sr.origin),Sr.sdkData&&this.setSDKData(Sr.sdkData)};Pe.prototype.addIncomingRequestData=function(e){this.http=e};Pe.prototype.addAnnotation=function(e,r){if(typeof r!="boolean"&&typeof r!="string"&&!isFinite(r)){Ds.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof e!="string"){Ds.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[e]=r};Pe.prototype.setUser=function(t){typeof t!="string"&&Ds.getLogger().error("Set user: "+t+" failed. User IDs must be of type string."),this.user=t};Pe.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){Ds.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){Ds.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};Pe.prototype.setSDKData=function(e){if(!e){Ds.getLogger().error("Add SDK data: "+e+" failed.Must not be empty.");return}this.aws||(this.aws={}),this.aws.xray=e};Pe.prototype.setMatchedSamplingRule=function(e){this.aws&&(this.aws=JSON.parse(JSON.stringify(this.aws))),this.aws&&this.aws.xray?this.aws.xray.rule_name=e:this.aws={xray:{rule_name:e}}};Pe.prototype.setServiceData=function(e){if(!e){Ds.getLogger().error("Add service data: "+e+" failed.Must not be empty.");return}this.service=e};Pe.prototype.addPluginData=function(e){this.aws===void 0&&(this.aws={}),Object.assign(this.aws,e)};Pe.prototype.addNewSubsegment=function(e){var r=new cm(e);return this.addSubsegment(r),r};Pe.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};Pe.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new cm(e);return this.addSubsegment(r),r.notTraced=!0,r};Pe.prototype.addSubsegment=function(e){if(!(e instanceof cm))throw new Error("Cannot add subsegment: "+e+". Not a subsegment.");this.subsegments===void 0&&(this.subsegments=[]),e.segment=this,e.parent=this,e.notTraced=e.parent.notTraced,e.noOp=e.parent.noOp,this.subsegments.push(e),e.end_time||this.incrementCounter(e.counter)};Pe.prototype.removeSubsegment=function(e){if(!(e instanceof cm))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};Pe.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){Ds.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.exception){if(e===this.exception.ex){this.cause={id:this.exception.cause},delete this.exception;return}delete this.exception}this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.push(new xde(e,r))};Pe.prototype.addFaultFlag=function(){this.fault=!0};Pe.prototype.addErrorFlag=function(){this.error=!0};Pe.prototype.addThrottleFlag=function(){this.throttle=!0};Pe.prototype.isClosed=function(){return!this.in_progress};Pe.prototype.incrementCounter=function(e){if(this.counter=e?this.counter+e+1:this.counter+1,this.counter>Sr.streamingThreshold&&this.subsegments&&this.subsegments.length>0){var r=[];this.subsegments.forEach(function(n){n.streamSubsegments()||r.push(n)}),this.subsegments=r}};Pe.prototype.decrementCounter=function(){this.counter--,this.counter<=0&&this.isClosed()&&this.flush()};Pe.prototype.close=function(t,e){this.end_time||(this.end_time=Sr.getCurrentTime()),t!==void 0&&this.addError(t,e),delete this.in_progress,delete this.exception,this.counter<=0&&this.flush()};Pe.prototype.flush=function(){if(this.notTraced!==!0){delete this.exception;var e=aF.objectWithoutProperties(this,["counter","notTraced"],!0);Ide.send(e)}};Pe.prototype.format=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=aF.objectWithoutProperties(this,e,!1);return this.serialize(r)};Pe.prototype.toString=function(){return this.serialize()};Pe.prototype.serialize=function(e){return JSON.stringify(e??this,Sr.getJsonStringifyReplacer())};cF.exports=Pe});var Ms=S((rDe,fF)=>{"use strict";var Tu=L$(),Hr=$e(),Aw=Au(),uF=Cu(),Bn=!0,Ls="AWSXRay",lF="segment",dF=!1,At={CONTEXT_MISSING_STRATEGY:{RUNTIME_ERROR:{contextMissing:function(e){throw new Error(e)}},LOG_ERROR:{contextMissing:function(e){var r=new Error(e);Hr.getLogger().error(r.stack)}},IGNORE_ERROR:{contextMissing:function(){}}},contextMissingStrategy:{},resolveManualSegmentParams:function(e){if(e&&!At.isAutomaticMode()){var r=e.XRaySegment||e.XraySegment,n=e.Segment,s=null;return r&&(r instanceof Aw||r instanceof uF)?(s=r,delete e.XRaySegment,delete e.XraySegment):n&&(n instanceof Aw||n instanceof uF)&&(s=n,delete e.Segment),s}},getNamespace:function(){return Tu.getNamespace(Ls)||Tu.createNamespace(Ls)},resolveSegment:function(e){if(Bn)return this.getSegment();if(e&&!Bn)return e;!e&&!Bn&&At.contextMissingStrategy.contextMissing("No sub/segment specified. A sub/segment must be provided for manual mode.")},getSegment:function(){if(Bn){var e=At.getNamespace(Ls).get(lF);return e?e instanceof Aw&&process.env.LAMBDA_TASK_ROOT&&e.facade==!0&&e.resolveLambdaTraceData():At.contextMissingStrategy.contextMissing("Failed to get the current sub/segment from the context."),e}else At.contextMissingStrategy.contextMissing("Cannot get sub/segment from context. Not supported in manual mode.")},setSegment:function(e){Bn?At.getNamespace(Ls).set(lF,e)||Hr.getLogger().warn("Failed to set the current sub/segment on the context."):At.contextMissingStrategy.contextMissing("Cannot set sub/segment on context. Not supported in manual mode.")},isAutomaticMode:function(){return Bn},enableAutomaticMode:function(){Bn=!0,At.getNamespace(Ls),Hr.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to automatic mode.")},enableManualMode:function(){Bn=!1,Tu.getNamespace(Ls)&&Tu.destroyNamespace(Ls),Hr.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to manual mode.")},setContextMissingStrategy:function(e){if(dF)Hr.getLogger().warn("Ignoring call to setContextMissingStrategy as AWS_XRAY_CONTEXT_MISSING is set. The current context missing strategy will not be changed.");else if(typeof e=="string"){var r=At.CONTEXT_MISSING_STRATEGY[e.toUpperCase()];if(r)At.contextMissingStrategy.contextMissing=r.contextMissing,process.env.AWS_XRAY_CONTEXT_MISSING?Hr.getLogger().debug("AWS_XRAY_CONTEXT_MISSING is set. Configured context missing strategy to "+process.env.AWS_XRAY_CONTEXT_MISSING+"."):Hr.getLogger().debug("Configured context missing strategy to: "+e);else throw new Error("Invalid context missing strategy: "+e+". Valid values are "+Object.keys(At.CONTEXT_MISSING_STRATEGY)+".")}else if(typeof e=="function")At.contextMissingStrategy.contextMissing=e,Hr.getLogger().info("Configured custom context missing strategy to function: "+e.name);else throw new Error("Context missing strategy must be either a string or a custom function.")}};process.env.AWS_XRAY_MANUAL_MODE?(Bn=!1,Hr.getLogger().debug("Starting the AWS X-Ray SDK in manual mode.")):(Tu.createNamespace(Ls),Hr.getLogger().debug("Starting the AWS X-Ray SDK in automatic mode (default)."));process.env.AWS_XRAY_CONTEXT_MISSING?(At.setContextMissingStrategy(process.env.AWS_XRAY_CONTEXT_MISSING),dF=!0):(At.contextMissingStrategy.contextMissing=At.CONTEXT_MISSING_STRATEGY.LOG_ERROR.contextMissing,Hr.getLogger().debug("Using default context missing strategy: LOG_ERROR"));fF.exports=At});var Pw=S((nDe,pF)=>{"use strict";var{getHttpResponseData:Ode}=Ns();function Tw(t){this.init(t)}Tw.prototype.init=function(e){var r=!!e.headers["x-forwarded-for"],n;e.connection&&(n=(e.connection.secure||e.connection.encrypted?"https://":"http://")+((e.headers.host||"")+(e.url||""))),this.request={method:e.method||"",user_agent:e.headers["user-agent"]||"",client_ip:Nde(e)||"",url:n||""},r&&(this.request.x_forwarded_for=r)};var Nde=function(e){var r;return e.headers["x-forwarded-for"]?r=(e.headers["x-forwarded-for"]||"").split(",")[0]:e.connection&&e.connection.remoteAddress?r=e.connection.remoteAddress:e.socket&&e.socket.remoteAddress?r=e.socket.remoteAddress:e.connection&&e.connection.socket&&e.connection.socket.remoteAddress&&(r=e.connection.socket.remoteAddress),r};Tw.prototype.close=function(e){this.response=Ode(e)};pF.exports=Tw});var mF=S((sDe,hF)=>{"use strict";function xw(t,e){this.init(t,e)}xw.prototype.init=function(e,r){if(this.usedThisSecond=0,typeof e=="number"&&e%1===0&&e>=0)this.fixedTarget=e;else throw new Error('Error in sampling file. Rule attribute "fixed_target" must be a non-negative integer.');if(typeof r=="number"&&r>=0&&r<=1)this.fallbackRate=r;else throw new Error('Error in sampling file. Rule attribute "rate" must be a number between 0 and 1 inclusive.')};xw.prototype.isSampled=function(){var e=Math.round(new Date().getTime()/1e3);return e!==this.thisSecond&&(this.usedThisSecond=0,this.thisSecond=e),this.usedThisSecond>=this.fixedTarget?Math.random()<this.fallbackRate:(this.usedThisSecond++,!0)};hF.exports=xw});var gF=S((iDe,Dde)=>{Dde.exports={default:{fixed_target:1,rate:.05},version:2}});var Ow=S((oDe,vF)=>{"use strict";var Lde=require("fs"),yF=mF(),Iw=Ct(),Mde=gF(),um=$e(),SF={shouldSample:function(e){var r=e.host,n=e.httpMethod,s=e.urlPath,i="{ http_method: "+n+", host: "+r+", url_path: "+s+" }",o;return this.rules.some(function(a){if(a.default||r==null||Iw.wildcardMatch(a.host,r)&&(n==null||Iw.wildcardMatch(a.http_method,n))&&(s==null||Iw.wildcardMatch(a.url_path,s)))return o=a.reservoir,um.getLogger().debug("Local sampling rule match found for "+i+". Matched "+(a.default?"default":"{ http_method: "+a.http_method+", host: "+a.host+", url_path: "+a.url_path+" }")+". Using fixed_target: "+o.fixedTarget+" and rate: "+o.fallbackRate+"."),!0}),o?o.isSampled():(um.getLogger().debug("No sampling rule matched for "+i),!1)},setLocalRules:function(e){e?typeof e=="string"?(um.getLogger().info("Using custom sampling rules file: "+e),this.rules=EF(JSON.parse(Lde.readFileSync(e,"utf8")))):(um.getLogger().info("Using custom sampling rules source."),this.rules=EF(e)):this.rules=_F(Mde)}},EF=function(e){if(!e.version)throw new Error('Error in sampling file. Missing "version" attribute.');if(e.version===1||e.version===2)return _F(e);throw new Error('Error in sampling file. Unknown version "'+e.version+'".')},_F=function(e){var r,n=[];if(e.default){var s=[];for(var i in e.default){if(i!=="fixed_target"&&i!=="rate")throw new Error("Error in sampling file. Invalid attribute for default: "+i+'. Valid attributes for default are "fixed_target" and "rate".');if(typeof e.default[i]!="number")throw new Error("Error in sampling file. Default "+i+" must be a number.")}if(typeof e.default.fixed_target>"u"&&s.push("fixed_target"),typeof e.default.rate>"u"&&s.push("rate"),s.length!==0)throw new Error("Error in sampling file. Missing required attributes for default: "+s+".");r={default:!0,reservoir:new yF(e.default.fixed_target,e.default.rate)}}else throw new Error('Error in sampling file. Expecting "default" object to be defined with attributes "fixed_target" and "rate".');return Array.isArray(e.rules)&&e.rules.forEach(function(o){var a={},c;e.version===2&&(c={host:1,http_method:1,url_path:1,fixed_target:1,rate:1}),e.version===1&&(c={service_name:1,http_method:1,url_path:1,fixed_target:1,rate:1});for(var u in o){var l=o[u];if(!c[u]&&u!="description")throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" has invalid attribute: "+u+".");if(u!="description"&&!l&&l!==0)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+' attribute "'+u+'" has invalid value: '+l+".");e.version===2&&(a[u]=l),e.version===1&&u==="service_name"?a.host=l:a[u]=l,delete c[u]}if(Object.keys(c).length!==0&&c.constructor===Object)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" is missing required attributes: "+Object.keys(c)+".");var d=a;d.reservoir=new yF(o.fixed_target,o.rate),n.push(d)}),n.push(r),n};SF.setLocalRules();vF.exports=SF});var bF=S((aDe,wF)=>{"use strict";function ra(){this.init()}ra.prototype.init=function(){this.quota=null,this.TTL=null,this.takenThisSec=0,this.borrowedThisSec=0,this.reportInterval=1,this.reportElapsed=0};ra.prototype.borrowOrTake=function(e,r){if(this.adjustThisSec(e),this.quota>=0&&this.TTL>=e)return this.takenThisSec>=this.quota?!1:(this.takenThisSec++,"take");if(r)return this.borrowedThisSec>=1?!1:(this.borrowedThisSec++,"borrow")};ra.prototype.adjustThisSec=function(e){e!==this.thisSec&&(this.takenThisSec=0,this.borrowedThisSec=0,this.thisSec=e)};ra.prototype.loadNewQuota=function(e,r,n){e&&(this.quota=e),r&&(this.TTL=r),n&&(this.reportInterval=n/10)};ra.prototype.timeToReport=function(){return this.reportElapsed+1>=this.reportInterval?(this.reportElapsed=0,!0):(this.reportElapsed+=1,!1)};wF.exports=ra});var CF=S((cDe,RF)=>{"use strict";var Pu=Ct(),kde=bF();function ut(t,e,r,n,s,i,o,a,c){this.init(t,e,r,n,s,i,o,a,c)}ut.prototype.init=function(e,r,n,s,i,o,a,c,u){this.name=e,this.priority=r,this.rate=n,this.host=i,this.httpMethod=o,this.urlPath=a,this.serviceName=c,this.serviceType=u,this.reservoir=new kde,this.borrow=!!s,this.resetStatistics()};ut.prototype.match=function(e){var r=e.host,n=e.httpMethod,s=e.serviceName,i=e.urlPath,o=e.serviceType;return this.isDefault()||(!r||Pu.wildcardMatch(this.host,r))&&(!n||Pu.wildcardMatch(this.httpMethod,n))&&(!s||Pu.wildcardMatch(this.serviceName,s))&&(!i||Pu.wildcardMatch(this.urlPath,i))&&(!o||Pu.wildcardMatch(this.serviceType,o))};ut.prototype.snapshotStatistics=function(){var e={requestCount:this.requestCount,borrowCount:this.borrowCount,sampledCount:this.sampledCount};return this.resetStatistics(),e};ut.prototype.merge=function(e){this.reservoir=e.reservoir,this.requestCount=e.requestCount,this.borrowCount=e.borrowCount,this.sampledCount=e.sampledCount,e=null};ut.prototype.isDefault=function(){return this.name==="Default"};ut.prototype.incrementRequestCount=function(){this.requestCount++};ut.prototype.incrementBorrowCount=function(){this.borrowCount++};ut.prototype.incrementSampledCount=function(){this.sampledCount++};ut.prototype.setRate=function(e){this.rate=e};ut.prototype.getRate=function(){return this.rate};ut.prototype.getName=function(){return this.name};ut.prototype.getPriority=function(){return this.priority};ut.prototype.getReservoir=function(){return this.reservoir};ut.prototype.resetStatistics=function(){this.requestCount=0,this.borrowCount=0,this.sampledCount=0};ut.prototype.canBorrow=function(){return this.borrow};ut.prototype.everMatched=function(){return this.requestCount>0};ut.prototype.timeToReport=function(){return this.reservoir.timeToReport()};RF.exports=ut});var Nw=S((uDe,xF)=>{"use strict";var qde=require("crypto"),$de=$e(),Fde=CF(),lm=rm(),Ude=require("util"),Bde=require("http"),TF={clientId:qde.randomBytes(12).toString("hex"),samplingRulesPath:"/GetSamplingRules",samplingTargetsPath:"/SamplingTargets",logger:$de,httpClient:Bde,fetchSamplingRules:function(e){let r="{}",n=AF(this.samplingRulesPath,r.length),i=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(n,o=>{var a="";o.on("data",c=>{a+=c}),o.on("error",c=>{e(c)}),o.on("end",()=>{var c;try{c=JSON.parse(a)}catch(l){e(l);return}if(!c){e(new Error("AWS X-Ray GetSamplingRules API returned empty response"));return}var u=jde(c);e(null,u)})});i.on("error",()=>{e(new Error(`Failed to connect to X-Ray daemon at ${n.hostname}:${n.port} to get sampling rules.`))}),i.write(r),i.end()},fetchTargets:function(e,r){let n=JSON.stringify(Hde(e)),s=AF(this.samplingTargetsPath,n.length),o=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(s,a=>{var c="";a.on("data",u=>{c+=u}),a.on("error",u=>{r(u)}),a.on("end",()=>{var u;try{u=JSON.parse(c)}catch(m){r(m);return}if(!u||typeof u.LastRuleModification!="number"){r(new Error("AWS X-Ray SamplingTargets API returned invalid response"));return}var l=Vde(u),d=PF(u.LastRuleModification);r(null,l,d)})});o.on("error",()=>{r(new Error(`Failed to connect to X-Ray daemon at ${s.hostname}:${s.port} to get sampling targets.`))}),o.write(n),o.end()}},Hde=function(e){var r=[],n=Math.floor(new Date().getTime()/1e3);return e.forEach(function(s){var i=s.snapshotStatistics(),o={RuleName:s.getName(),ClientID:TF.clientId,RequestCount:i.requestCount,BorrowCount:i.borrowCount,SampledCount:i.sampledCount,Timestamp:n};r.push(o)}),{SamplingStatisticsDocuments:r}},jde=function(e){var r=[],n=e.SamplingRuleRecords||[];return n.forEach(function(s){if(s=s.SamplingRule,Wde(s)){var i=new Fde(s.RuleName,s.Priority,s.FixedRate,s.ReservoirSize,s.Host,s.HTTPMethod,s.URLPath,s.ServiceName,s.ServiceType);r.push(i)}}),r},Vde=function(e){var r=e.SamplingTargetDocuments||[],n={};return r.forEach(function(s){var i={rate:s.FixedRate,quota:s.ReservoirQuota,TTL:PF(s.ReservoirQuotaTTL),interval:s.Interval};n[s.RuleName]=i}),n},Wde=function(e){return e.Version===1&&e.ResourceARN==="*"&&e.Attributes&&Object.keys(e.Attributes).length===0&&e.ServiceType&&e.RuleName&&e.Priority&&typeof e.FixedRate=="number"},PF=function(e){return new Date(e).getTime()/1e3},AF=function(e,r){return{hostname:lm.tcp_ip,port:lm.tcp_port,method:"POST",path:e,headers:{"Content-Type":"application/json","Content-Length":r,Host:Ude.format("%s:%d",lm.tcp_ip,lm.tcp_port)}}};xF.exports=TF});var dm=S((lDe,IF)=>{"use strict";var zde=3600,Dw={rules:[],lastUpdated:null,getMatchedRule:function(e,r){if(Gde(r))return null;var n;return this.rules.forEach(function(s){!n&&s.match(e)&&(n=s),s.isDefault()&&!n&&(n=s)}),n},loadRules:function(e){var r={};this.rules.forEach(function(n){r[n.getName()]=n}),this.rules=e,this.rules.forEach(function(n){var s=r[n.getName()];s&&n.merge(s)}),this.rules.sort(function(n,s){var i=n.getPriority()-s.getPriority();return i!==0?i:n.getName()>s.getName()?1:-1})},loadTargets:function(e){this.rules.forEach(function(r){var n=e[r.getName()];n&&(r.getReservoir().loadNewQuota(n.quota,n.TTL,n.interval),r.setRate(n.rate))})},getRules:function(){return this.rules},timestamp:function(e){this.lastUpdated=e},getLastUpdated:function(){return this.lastUpdated}},Gde=function(e){return Dw.getLastUpdated()?e>Dw.getLastUpdated()+zde:!0};IF.exports=Dw});var Mw=S((dDe,LF)=>{"use strict";var Lw=$e(),Kde=Nw(),OF=dm(),Xde=5*60*1e3,Qde={start:function(){this.poller&&clearInterval(this.poller),NF(!1),this.poller=setInterval(NF,Xde),this.poller.unref()}},NF=function(e){if(e=typeof e>"u"?!0:e,e){var r=Jde();setTimeout(DF,r)}else DF()},DF=function(){try{Yde()}catch(e){Lw.getLogger().warn("Encountered unexpected exception when fetching sampling rules: "+e)}},Yde=function(){var e=Math.floor(new Date().getTime()/1e3);Kde.fetchSamplingRules(function(r,n){r?Lw.getLogger().warn("Failed to retrieve sampling rules from X-Ray service:",r):n.length!==0&&(OF.loadRules(n),OF.timestamp(e),Lw.getLogger().info("Successfully refreshed centralized sampling rule cache."))})},Jde=function(){return Math.random()*5};LF.exports=Qde});var $F=S((fDe,qF)=>{"use strict";var Zde=Mw(),efe=Nw(),kw=dm(),fm=$e(),MF=10*1e3,kF={interval:MF,start:function(){this.poller=setInterval(tfe,MF+sfe()),this.poller.unref()}},tfe=function(){try{rfe()}catch(e){fm.getLogger().warn("Encountered unexpected exception when fetching sampling targets: "+e)}},rfe=function(){var e=nfe();e&&e.length>0&&efe.fetchTargets(e,function(r,n,s){if(r){fm.getLogger().warn("Failed to retrieve sampling targets from X-Ray service:",r);return}kw.loadTargets(n),s>kw.getLastUpdated()&&(fm.getLogger().info("Performing out-of-band sampling rule polling to fetch updated rules."),Zde.start()),fm.getLogger().info("Successfully reported rule statistics to get new sampling quota.")})},nfe=function(){var e=kw.getRules(),r=[];return e.forEach(function(n){n.everMatched()&&n.timeToReport()&&r.push(n)}),r},sfe=function(){return Math.random()/kF.interval};qF.exports=kF});var UF=S((pDe,FF)=>{"use strict";var qw=$e(),ife=require("util"),ofe=Ns(),afe={localSampler:Ow(),rulePoller:Mw(),targetPoller:$F(),ruleCache:dm(),started:!1,shouldSample:function(e){try{this.started||this.start(),e.serviceType||(e.serviceType=ofe.origin);var r=Math.floor(new Date().getTime()/1e3),n=this.ruleCache.getMatchedRule(e,r);return n?(qw.getLogger().debug(ife.format("Rule %s is matched.",n.getName())),cfe(n,r)):(qw.getLogger().info("No effective centralized sampling rule match. Fallback to local rules."),this.localSampler.shouldSample(e))}catch(s){qw.getLogger().error("Unhandled exception by the SDK during making sampling decisions: "+s)}},setLocalRules:function(e){this.localSampler.setLocalRules(e)},start:function(){this.started||(this.rulePoller.start(),this.targetPoller.start(),this.started=!0)}},cfe=function(e,r){e.incrementRequestCount();var n=e.getReservoir(),s=!0,i=n.borrowOrTake(r,e.canBorrow());return i==="borrow"?e.incrementBorrowCount():i==="take"||Math.random()<=e.getRate()?e.incrementSampledCount():s=!1,s?e.getName():!1};FF.exports=afe});var Fw=S((hDe,BF)=>{"use strict";var ufe=Au(),lfe=Pw(),dfe=$e(),ffe=Ct(),pfe=Ct().wildcardMatch,hfe=Ct().processTraceData,$w="x-amzn-trace-id",mfe=!!process.env.AWS_XRAY_TRACING_NAME,gfe={defaultName:process.env.AWS_XRAY_TRACING_NAME,dynamicNaming:!1,hostPattern:null,sampler:UF(),enableDynamicNaming:function(t){if(this.dynamicNaming=!0,t&&typeof t!="string")throw new Error("Host pattern must be a string.");this.hostPattern=t||null},processHeaders:function(e){var r={};return e&&e.headers&&e.headers[$w]&&(r=hfe(e.headers[$w])),r},resolveName:function(e){var r;return this.dynamicNaming&&e?r=this.hostPattern?pfe(this.hostPattern,e)?e:this.defaultName:e:r=this.defaultName,r},resolveSampling:function(e,r,n){var s;if(e.sampled==="1")s=!0;else if(e.sampled==="0")s=!1;else{var i={host:n.req.headers.host,httpMethod:n.req.method,urlPath:n.req.url,serviceName:r.name};s=this.sampler.shouldSample(i),(s instanceof String||typeof s=="string")&&(r.setMatchedSamplingRule(s),s=!0)}e.sampled==="?"&&n.header&&n.header($w,"Root="+e.root+";Sampled="+(s?"1":"0")),s||(r.notTraced=!0)},setDefaultName:function(e){mfe||(this.defaultName=e)},disableCentralizedSampling:function(){this.sampler=Ow()},setSamplingRules:function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local sampling rules file, or supply an object containing the rules.");this.sampler.setLocalRules(e)},middlewareLog:function(e,r,n){dfe.getLogger().debug(e+": { url: "+r+", name: "+n.name+", trace_id: "+n.trace_id+", id: "+n.id+", sampled: "+!n.notTraced+" }")},traceRequestResponseCycle:function(e,r){var n=this.processHeaders(e),s=this.resolveName(e.headers.host),i=new ufe(s,n.root,n.parent);r.req||(r.req=e),this.resolveSampling(n,i,r),i.addIncomingRequestData(new lfe(e)),this.middlewareLog("Starting middleware segment",e.url,i);var o=this.middlewareLog,a=!1,c=function(){if(a)return;a=!0,r.statusCode===429&&i.addThrottleFlag();let u=ffe.getCauseTypeFromHttpStatus(r.statusCode);u&&(i[u]=!0),i.http.close(r),i.close(),o("Closed middleware segment successfully",e.url,i)};return r.on("finish",c),r.on("close",c),i}};BF.exports=gfe});var HF=S(hm=>{"use strict";Object.defineProperty(hm,"__esModule",{value:!0});hm.InvokeStore=void 0;var yfe=require("async_hooks"),Uw=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Uw||(globalThis.awslambda=globalThis.awslambda||{});var Efe={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},xu=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(xu,"storage",new yfe.AsyncLocalStorage),f(xu,"PROTECTED_KEYS",Efe);var pm;!Uw&&globalThis.awslambda?.InvokeStore?pm=globalThis.awslambda.InvokeStore:(pm=xu,!Uw&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=pm));hm.InvokeStore=pm});var WF=S((yDe,VF)=>{"use strict";var mm=Ms(),Sfe=Fw(),Bw=Ct().LambdaUtils,_fe=Au(),vfe=sm(),wfe=Ns(),jw=$e(),jF=om(),{InvokeStore:bfe}=HF(),Hw=null;VF.exports.init=function(){mm.enableManualMode=function(){jw.getLogger().warn("AWS Lambda does not support AWS X-Ray manual mode.")},vfe.disableReusableSocket(),wfe.setStreamingThreshold(0),jw.getLogger().info("Disabling centralized sampling in Lambda environment."),Sfe.disableCentralizedSampling();var e=mm.getNamespace();e.enter(e.createContext()),mm.setSegment(Rfe())};var Rfe=function(){var e=new _fe("facade"),r=["addNewSubsegment","addSubsegment","removeSubsegment","toString","addSubsegmentWithoutSampling","addNewSubsegmentWithoutSampling"],n=["incrementCounter","decrementCounter","isClosed","close","format","flush"],s=process.env._X_AMZN_TRACE_ID;for(var i in e)typeof e[i]=="function"&&r.indexOf(i)===-1&&(n.indexOf(i)===-1?e[i]=function(){var o=i;return function(){jw.getLogger().warn('Function "'+o+'" cannot be called on an AWS Lambda segment. Please use a subsegment to record data.')}}():e[i]=function(){});return e.trace_id=jF.Invalid().toString(),e.isClosed=function(){return!0},e.in_progress=!1,e.counter=1,e.notTraced=!0,e.facade=!0,e.reset=function(){this.trace_id=jF.Invalid().toString(),this.id="00000000",delete this.subsegments,this.notTraced=!0},e.resolveLambdaTraceData=function(){let a=bfe.getXRayTraceId(),c=process.env._X_AMZN_TRACE_ID;var u=a??c;u?u!=Hw&&(this.reset(),Bw.populateTraceData(e,u)&&(Hw=u)):(this.reset(),mm.contextMissingStrategy.contextMissing("Missing AWS Lambda trace data for X-Ray. Ensure Active Tracing is enabled and no subsegments are created outside the function handler."))},Bw.validTraceData(s)&&Bw.populateTraceData(e,s)&&(Hw=s),e}});var zF=S((EDe,Cfe)=>{Cfe.exports={name:"aws-xray-sdk-core",version:"3.11.0",description:"AWS X-Ray SDK for Javascript",author:"Amazon Web Services",contributors:["Sandra McMullen <mcmuls@amazon.com>","William Armiros <armiros@amazon.com>","Moritz Onken <onken@netcubed.de>"],files:["dist/lib/**/*","LICENSE","README.md"],main:"dist/lib/index.js",types:"dist/lib/index.d.ts",engines:{node:">= 14.x"},directories:{test:"test"},"//":"@types/cls-hooked is exposed in API so must be in dependencies, not devDependencies",dependencies:{"@aws-sdk/types":"^3.4.1","@aws/lambda-invoke-store":"^0.0.1","@smithy/service-error-classification":"^2.0.4","@types/cls-hooked":"^4.3.3","atomic-batcher":"^1.0.2","cls-hooked":"^4.2.2",semver:"^7.5.3"},scripts:{prepare:"npm run compile",compile:"tsc && npm run copy-lib && npm run copy-test","copy-lib":"find lib -type f \\( -name '*.d.ts' -o -name '*.json' \\) | xargs -I % ../../scripts/cp-with-structure.sh % dist","copy-test":"find test -name '*.json' | xargs -I % ../../scripts/cp-with-structure.sh % dist",lint:"eslint .","lint:fix":"eslint . --fix",test:"npm run compile && mocha --recursive ./dist/test/ -R spec && tsd && mocha --recursive ./dist/test_async/ -R spec","test-d":"tsd","test-async":"npm run compile && mocha --recursive ./dist/test_async/ -R spec",clean:"rm -rf dist && rm -rf node_modules",testcov:"nyc npm run test",reportcov:"nyc report --reporter=text-lcov > coverage.lcov"},keywords:["amazon","api","aws","core","xray","x-ray","x ray"],license:"Apache-2.0",repository:"https://github.com/aws/aws-xray-sdk-node/tree/master/packages/core",gitHead:"4e6f43ed3c4686418c2139d4b86ab5513e0ca8ed"}});var XF=S((SDe,KF)=>{"use strict";var Vw=require("http"),GF={METADATA_TIMEOUT:1e3,getPluginMetadata:function(t,e){var s=5,i=function(){var o=Vw.__request?Vw.__request:Vw.request,a=o(t,function(c){var u="";c.on("data",function(l){u+=l}),c.on("end",function(){if(this.statusCode===200||this.statusCode===300){try{u=JSON.parse(u)}catch(l){e(l);return}e(null,u)}else s>0&&Math.floor(this.statusCode/100)===5?(s--,setTimeout(i,250)):e(new Error(`Failed to retrieve metadata with options: ${t}`))})});a.on("error",function(c){e(c)}),a.on("timeout",function(){a.abort()}),a.setTimeout(GF.METADATA_TIMEOUT),a.end()};i()}};KF.exports=GF});var eU=S((_De,ZF)=>{"use strict";var YF=XF(),QF=$e(),Ww=require("http"),Afe={getData:function(t){let e="/latest/dynamic/instance-identity/document";function r(n){let s=JF(e,"GET",n?{"X-aws-ec2-metadata-token":n}:{});YF.getPluginMetadata(s,function(i,o){if(i||!o){QF.getLogger().error("Error loading EC2 plugin metadata: ",i?i.toString():"Could not retrieve data from IMDS."),t();return}let a={ec2:{instance_id:o.instanceId,availability_zone:o.availabilityZone,instance_size:o.instanceType,ami_id:o.imageId}};t(a)})}Tfe(function(n){n===null&&QF.getLogger().debug("EC2Plugin failed to get token from IMDSv2. Falling back to IMDSv1."),r(n)})},originName:"AWS::EC2::Instance"};function Tfe(t){let e=Ww.__request?Ww.__request:Ww.request,s=JF("/latest/api/token","PUT",{"X-aws-ec2-metadata-token-ttl-seconds":60}),i=e(s,function(o){let a="";o.on("data",function(c){a+=c}),o.on("end",function(){this.statusCode===200||this.statusCode===300?t(a):t(null)})});i.on("error",function(){t(null)}),i.on("timeout",function(){i.abort(),t(null)}),i.setTimeout(YF.METADATA_TIMEOUT),i.end()}function JF(t,e,r){return e||(e="GET"),r||(r={}),{host:"169.254.169.254",path:t,method:e,headers:r}}ZF.exports=Afe});var rU=S((vDe,tU)=>{"use strict";var Pfe=require("os"),xfe={getData:function(t){t({ecs:{container:Pfe.hostname()}})},originName:"AWS::ECS::Container"};tU.exports=xfe});var sU=S((wDe,nU)=>{"use strict";var Ife=require("fs"),Ofe=$e(),Nfe="/var/elasticbeanstalk/xray/environment.conf",Dfe={getData:function(t){Ife.readFile(Nfe,"utf8",function(e,r){if(e)Ofe.getLogger().error("Error loading Elastic Beanstalk plugin:",e.stack),t();else{var n=JSON.parse(r),s={elastic_beanstalk:{environment:n.environment_name,version_label:n.version_label,deployment_id:n.deployment_id}};t(s)}})},originName:"AWS::ElasticBeanstalk::Environment"};nU.exports=Dfe});var iU=S((bDe,Lfe)=>{Lfe.exports={services:{dynamodb:{operations:{batchGetItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity"]},batchWriteItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},createTable:{request_parameters:["GlobalSecondaryIndexes","LocalSecondaryIndexes","ProvisionedThroughput","TableName"]},deleteItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},deleteTable:{request_parameters:["TableName"]},describeTable:{request_parameters:["TableName"]},getItem:{request_parameters:["ConsistentRead","ProjectionExpression","TableName"],response_parameters:["ConsumedCapacity"]},listTables:{request_parameters:["ExclusiveStartTableName","Limit"],response_descriptors:{TableNames:{list:!0,get_count:!0,rename_to:"table_count"}}},putItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},query:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","ScanIndexForward","Select","TableName"],response_parameters:["ConsumedCapacity"]},scan:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","Segment","Select","TableName","TotalSegments"],response_parameters:["ConsumedCapacity","Count","ScannedCount"]},updateItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},updateTable:{request_parameters:["AttributeDefinitions","GlobalSecondaryIndexUpdates","ProvisionedThroughput","TableName"]}}},sqs:{operations:{addPermission:{request_parameters:["Label","QueueUrl"]},changeMessageVisibility:{request_parameters:["QueueUrl","VisibilityTimeout"]},changeMessageVisibilityBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},createQueue:{request_parameters:["Attributes","QueueName"]},deleteMessage:{request_parameters:["QueueUrl"]},deleteMessageBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},deleteQueue:{request_parameters:["QueueUrl"]},getQueueAttributes:{request_parameters:["QueueUrl"],response_parameters:["Attributes"]},getQueueUrl:{request_parameters:["QueueName","QueueOwnerAWSAccountId"],response_parameters:["QueueUrl"]},listDeadLetterSourceQueues:{request_parameters:["QueueUrl"],response_parameters:["QueueUrls"]},listQueues:{request_parameters:["QueueNamePrefix"],response_descriptors:{QueueUrls:{list:!0,get_count:!0,rename_to:"queue_count"}}},purgeQueue:{request_parameters:["QueueUrl"]},receiveMessage:{request_parameters:["AttributeNames","MaxNumberOfMessages","MessageAttributeNames","QueueUrl","VisibilityTimeout","WaitTimeSeconds"],response_descriptors:{Messages:{list:!0,get_count:!0,rename_to:"message_count"}}},removePermission:{request_parameters:["QueueUrl"]},sendMessage:{request_parameters:["DelaySeconds","QueueUrl"],request_descriptors:{MessageAttributes:{get_keys:!0,rename_to:"message_attribute_names"}},response_parameters:["MessageId"]},sendMessageBatch:{request_parameters:["QueueUrl"],request_descriptors:{Entries:{list:!0,get_count:!0,rename_to:"message_count"}},response_descriptors:{Failed:{list:!0,get_count:!0,rename_to:"failed_count"},Successful:{list:!0,get_count:!0,rename_to:"successful_count"}}},setQueueAttributes:{request_parameters:["QueueUrl"],request_descriptors:{Attributes:{get_keys:!0,rename_to:"attribute_names"}}}}},sns:{operations:{publish:{request_parameters:["TopicArn"]},publishBatch:{request_parameters:["TopicArn"]}}},lambda:{operations:{invoke:{request_parameters:["FunctionName","InvocationType","LogType","Qualifier"],response_parameters:["FunctionError","StatusCode"]},invokeAsync:{request_parameters:["FunctionName"],response_parameters:["Status"]}}},s3:{operations:{abortMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},completeMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},copyObject:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjects:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLocation:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTorrent:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketAnalyticsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketInventoryConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketMetricsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listMultipartUploads:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectVersions:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjects:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectsV2:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listParts:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObject:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},restoreObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPart:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPartCopy:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}}}},sagemakerruntime:{operations:{invokeEndpoint:{request_parameters:["EndpointName"]}}}}}});var dU=S((RDe,lU)=>{"use strict";var cU=require("fs"),na=$e(),Mfe=iU(),gm={REQ_DESC:"request_descriptors",REQ_PARAMS:"request_parameters",RES_DESC:"response_descriptors",RES_PARAMS:"response_parameters"};function Em(t){this.init(t)}Em.prototype.init=function(e){e?typeof e=="string"?(na.getLogger().info("Using custom AWS whitelist file: "+e),this.services=ym(JSON.parse(cU.readFileSync(e,"utf8")))):(na.getLogger().info("Using custom AWS whitelist source."),this.services=ym(e)):this.services=Mfe.services};Em.prototype.append=function(e){var r={};typeof e=="string"?(na.getLogger().info("Appending AWS whitelist with custom file: "+e),r=ym(JSON.parse(cU.readFileSync(e,"utf8")))):(na.getLogger().info("Appending AWS whitelist with a custom source."),r=ym(e));for(var n in r)this.services[n]=r[n]};Em.prototype.capture=function(e,r){var n=r.request.operation,s=this.services[e]!==void 0?this.services[e].operations[n]:null;if(s===null){na.getLogger().debug('Call "'+e+"."+n+'" is not whitelisted for additional data capturing. Ignoring.');return}var i={};for(var o in s){var a=s[o];o===gm.REQ_PARAMS?oU(a,r.request.params,i):o===gm.REQ_DESC?aU(a,r.request.params,i):o===gm.RES_PARAMS?r.data&&oU(a,r.data,i):o===gm.RES_DESC?r.data&&aU(a,r.data,i):na.getLogger().error('Unknown parameter type "'+o+'". Must be "request_descriptors", "response_descriptors", "request_parameters" or "response_parameters".')}return i};function oU(t,e,r){t.forEach(function(n){if(typeof e[n]<"u"){var s=uU(n);this[s]=e[n]}},r)}function aU(t,e,r){for(var n in t){var s=t[n];if(typeof e[n]<"u"){var i;if(s.list&&s.get_count?i=e[n]?e[n].length:0:i=s.get_keys===!0?Object.keys(e[n]):e[n],typeof s.rename_to=="string")r[s.rename_to]=i;else{var o=uU(n);r[o]=i}}}}function uU(t){return t==="IPAddress"?"ip_address":t.split(/(?=[A-Z])/).join("_").toLowerCase()}function ym(t){var e=t;if(e.services===void 0)throw new Error('Document formatting is incorrect. Expecting "services" param.');return e.services}lU.exports=Em});var Iu=S((CDe,Sm)=>{"use strict";var fU=dU(),zw=new fU;function Gw(t,e){this.init(t,e)}Gw.prototype.init=function(e,r){this.operation=$fe(e.request.operation)||"",e&&e.request&&e.request.httpRequest&&e.request.httpRequest.region&&(this.region=e.request.httpRequest.region),e&&e.requestId&&(this.request_id=e.requestId),this.retries=e.retryCount||0,e.extendedRequestId&&r&&r.toLowerCase()==="s3"&&(this.id_2=e.extendedRequestId),r&&this.addData(zw.capture(r.toLowerCase(),e))};Gw.prototype.addData=function(e){for(var r in e)this[r]=e[r]};var kfe=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");zw=new fU(e)},qfe=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");zw.append(e)};function $fe(t){if(t)return t.charAt(0).toUpperCase()+t.slice(1)}Sm.exports=Gw;Sm.exports.appendAWSWhitelist=qfe;Sm.exports.setAWSWhitelist=kfe});var vm=S((ADe,_m)=>{"use strict";var Ri=Ms(),Ou=$e(),pU=function(e,r,n){Kw(e,r);var s,i,o=Ri.resolveSegment(n);if(!o)return Ou.getLogger().warn("Failed to capture function."),r();s=o.addNewSubsegment(e),i=hU(r,s);try{let a=i(s);return s.close(),a}catch(a){throw s.close(a),a}},Ffe=function(e,r,n){Kw(e,r);var s,i,o=Ri.resolveSegment(n);if(!o)return Ou.getLogger().warn("Failed to capture async function."),r();s=o.addNewSubsegment(e),i=hU(r,s);try{return i(s)}catch(a){throw s.close(a),a}},Ufe=function(e,r,n){Kw(e,r);var s=Ri.resolveSegment(n);return s?(s.incrementCounter(),function(){var i=Ri.resolveSegment(n),o=Array.prototype.slice.call(arguments);pU(e,r.bind.apply(r,[null].concat(o)),i),s.decrementCounter()}.bind(this)):(Ou.getLogger().warn("Failed to capture callback function."),r)};function hU(t,e){var r;if(Ri.isAutomaticMode()){var n=Ri.getNamespace(),s=function(){var i;return n.run(function(){Ri.setSegment(e),i=t(e)}),i};r=s}else r=t;return r}function Kw(t,e){var r;if(!t||typeof t!="string")throw r='Param "name" must be a non-empty string.',Ou.getLogger().error(r),new Error(r);if(typeof e!="function")throw r='Param "fcn" must be a function.',Ou.getLogger().error(r),new Error(r)}_m.exports.captureFunc=pU;_m.exports.captureAsyncFunc=Ffe;_m.exports.captureCallbackFunc=Ufe});var Nu=S((TDe,mU)=>{"use strict";var Bfe="2.0.0",Hfe=Number.MAX_SAFE_INTEGER||9007199254740991,jfe=16,Vfe=250,Wfe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];mU.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:jfe,MAX_SAFE_BUILD_LENGTH:Vfe,MAX_SAFE_INTEGER:Hfe,RELEASE_TYPES:Wfe,SEMVER_SPEC_VERSION:Bfe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Du=S((PDe,gU)=>{"use strict";var zfe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};gU.exports=zfe});var sa=S((an,yU)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Xw,MAX_SAFE_BUILD_LENGTH:Gfe,MAX_LENGTH:Kfe}=Nu(),Xfe=Du();an=yU.exports={};var Qfe=an.re=[],Yfe=an.safeRe=[],$=an.src=[],Jfe=an.safeSrc=[],F=an.t={},Zfe=0,Qw="[a-zA-Z0-9-]",epe=[["\\s",1],["\\d",Kfe],[Qw,Gfe]],tpe=t=>{for(let[e,r]of epe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Y=(t,e,r)=>{let n=tpe(e),s=Zfe++;Xfe(t,s,e),F[t]=s,$[s]=e,Jfe[s]=n,Qfe[s]=new RegExp(e,r?"g":void 0),Yfe[s]=new RegExp(n,r?"g":void 0)};Y("NUMERICIDENTIFIER","0|[1-9]\\d*");Y("NUMERICIDENTIFIERLOOSE","\\d+");Y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Qw}*`);Y("MAINVERSION",`(${$[F.NUMERICIDENTIFIER]})\\.(${$[F.NUMERICIDENTIFIER]})\\.(${$[F.NUMERICIDENTIFIER]})`);Y("MAINVERSIONLOOSE",`(${$[F.NUMERICIDENTIFIERLOOSE]})\\.(${$[F.NUMERICIDENTIFIERLOOSE]})\\.(${$[F.NUMERICIDENTIFIERLOOSE]})`);Y("PRERELEASEIDENTIFIER",`(?:${$[F.NONNUMERICIDENTIFIER]}|${$[F.NUMERICIDENTIFIER]})`);Y("PRERELEASEIDENTIFIERLOOSE",`(?:${$[F.NONNUMERICIDENTIFIER]}|${$[F.NUMERICIDENTIFIERLOOSE]})`);Y("PRERELEASE",`(?:-(${$[F.PRERELEASEIDENTIFIER]}(?:\\.${$[F.PRERELEASEIDENTIFIER]})*))`);Y("PRERELEASELOOSE",`(?:-?(${$[F.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${$[F.PRERELEASEIDENTIFIERLOOSE]})*))`);Y("BUILDIDENTIFIER",`${Qw}+`);Y("BUILD",`(?:\\+(${$[F.BUILDIDENTIFIER]}(?:\\.${$[F.BUILDIDENTIFIER]})*))`);Y("FULLPLAIN",`v?${$[F.MAINVERSION]}${$[F.PRERELEASE]}?${$[F.BUILD]}?`);Y("FULL",`^${$[F.FULLPLAIN]}$`);Y("LOOSEPLAIN",`[v=\\s]*${$[F.MAINVERSIONLOOSE]}${$[F.PRERELEASELOOSE]}?${$[F.BUILD]}?`);Y("LOOSE",`^${$[F.LOOSEPLAIN]}$`);Y("GTLT","((?:<|>)?=?)");Y("XRANGEIDENTIFIERLOOSE",`${$[F.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Y("XRANGEIDENTIFIER",`${$[F.NUMERICIDENTIFIER]}|x|X|\\*`);Y("XRANGEPLAIN",`[v=\\s]*(${$[F.XRANGEIDENTIFIER]})(?:\\.(${$[F.XRANGEIDENTIFIER]})(?:\\.(${$[F.XRANGEIDENTIFIER]})(?:${$[F.PRERELEASE]})?${$[F.BUILD]}?)?)?`);Y("XRANGEPLAINLOOSE",`[v=\\s]*(${$[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${$[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${$[F.XRANGEIDENTIFIERLOOSE]})(?:${$[F.PRERELEASELOOSE]})?${$[F.BUILD]}?)?)?`);Y("XRANGE",`^${$[F.GTLT]}\\s*${$[F.XRANGEPLAIN]}$`);Y("XRANGELOOSE",`^${$[F.GTLT]}\\s*${$[F.XRANGEPLAINLOOSE]}$`);Y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Xw}})(?:\\.(\\d{1,${Xw}}))?(?:\\.(\\d{1,${Xw}}))?`);Y("COERCE",`${$[F.COERCEPLAIN]}(?:$|[^\\d])`);Y("COERCEFULL",$[F.COERCEPLAIN]+`(?:${$[F.PRERELEASE]})?(?:${$[F.BUILD]})?(?:$|[^\\d])`);Y("COERCERTL",$[F.COERCE],!0);Y("COERCERTLFULL",$[F.COERCEFULL],!0);Y("LONETILDE","(?:~>?)");Y("TILDETRIM",`(\\s*)${$[F.LONETILDE]}\\s+`,!0);an.tildeTrimReplace="$1~";Y("TILDE",`^${$[F.LONETILDE]}${$[F.XRANGEPLAIN]}$`);Y("TILDELOOSE",`^${$[F.LONETILDE]}${$[F.XRANGEPLAINLOOSE]}$`);Y("LONECARET","(?:\\^)");Y("CARETTRIM",`(\\s*)${$[F.LONECARET]}\\s+`,!0);an.caretTrimReplace="$1^";Y("CARET",`^${$[F.LONECARET]}${$[F.XRANGEPLAIN]}$`);Y("CARETLOOSE",`^${$[F.LONECARET]}${$[F.XRANGEPLAINLOOSE]}$`);Y("COMPARATORLOOSE",`^${$[F.GTLT]}\\s*(${$[F.LOOSEPLAIN]})$|^$`);Y("COMPARATOR",`^${$[F.GTLT]}\\s*(${$[F.FULLPLAIN]})$|^$`);Y("COMPARATORTRIM",`(\\s*)${$[F.GTLT]}\\s*(${$[F.LOOSEPLAIN]}|${$[F.XRANGEPLAIN]})`,!0);an.comparatorTrimReplace="$1$2$3";Y("HYPHENRANGE",`^\\s*(${$[F.XRANGEPLAIN]})\\s+-\\s+(${$[F.XRANGEPLAIN]})\\s*$`);Y("HYPHENRANGELOOSE",`^\\s*(${$[F.XRANGEPLAINLOOSE]})\\s+-\\s+(${$[F.XRANGEPLAINLOOSE]})\\s*$`);Y("STAR","(<|>)?=?\\s*\\*");Y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var wm=S((xDe,EU)=>{"use strict";var rpe=Object.freeze({loose:!0}),npe=Object.freeze({}),spe=t=>t?typeof t!="object"?rpe:t:npe;EU.exports=spe});var Yw=S((IDe,vU)=>{"use strict";var SU=/^[0-9]+$/,_U=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=SU.test(t),n=SU.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},ipe=(t,e)=>_U(e,t);vU.exports={compareIdentifiers:_U,rcompareIdentifiers:ipe}});var Tt=S((ODe,bU)=>{"use strict";var bm=Du(),{MAX_LENGTH:wU,MAX_SAFE_INTEGER:Rm}=Nu(),{safeRe:Cm,t:Am}=sa(),ope=wm(),{compareIdentifiers:Jw}=Yw(),Zw=class t{constructor(e,r){if(r=ope(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>wU)throw new TypeError(`version is longer than ${wU} characters`);bm("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Cm[Am.LOOSE]:Cm[Am.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Rm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Rm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Rm||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Rm)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(bm("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(bm("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Jw(n,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(bm("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Jw(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Cm[Am.PRERELEASELOOSE]:Cm[Am.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),Jw(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};bU.exports=Zw});var Ci=S((NDe,CU)=>{"use strict";var RU=Tt(),ape=(t,e,r=!1)=>{if(t instanceof RU)return t;try{return new RU(t,e)}catch(n){if(!r)return null;throw n}};CU.exports=ape});var TU=S((DDe,AU)=>{"use strict";var cpe=Ci(),upe=(t,e)=>{let r=cpe(t,e);return r?r.version:null};AU.exports=upe});var xU=S((LDe,PU)=>{"use strict";var lpe=Ci(),dpe=(t,e)=>{let r=lpe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};PU.exports=dpe});var NU=S((MDe,OU)=>{"use strict";var IU=Tt(),fpe=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new IU(t instanceof IU?t.version:t,r).inc(e,n,s).version}catch{return null}};OU.exports=fpe});var MU=S((kDe,LU)=>{"use strict";var DU=Ci(),ppe=(t,e)=>{let r=DU(t,null,!0),n=DU(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};LU.exports=ppe});var qU=S((qDe,kU)=>{"use strict";var hpe=Tt(),mpe=(t,e)=>new hpe(t,e).major;kU.exports=mpe});var FU=S(($De,$U)=>{"use strict";var gpe=Tt(),ype=(t,e)=>new gpe(t,e).minor;$U.exports=ype});var BU=S((FDe,UU)=>{"use strict";var Epe=Tt(),Spe=(t,e)=>new Epe(t,e).patch;UU.exports=Spe});var jU=S((UDe,HU)=>{"use strict";var _pe=Ci(),vpe=(t,e)=>{let r=_pe(t,e);return r&&r.prerelease.length?r.prerelease:null};HU.exports=vpe});var _r=S((BDe,WU)=>{"use strict";var VU=Tt(),wpe=(t,e,r)=>new VU(t,r).compare(new VU(e,r));WU.exports=wpe});var GU=S((HDe,zU)=>{"use strict";var bpe=_r(),Rpe=(t,e,r)=>bpe(e,t,r);zU.exports=Rpe});var XU=S((jDe,KU)=>{"use strict";var Cpe=_r(),Ape=(t,e)=>Cpe(t,e,!0);KU.exports=Ape});var Tm=S((VDe,YU)=>{"use strict";var QU=Tt(),Tpe=(t,e,r)=>{let n=new QU(t,r),s=new QU(e,r);return n.compare(s)||n.compareBuild(s)};YU.exports=Tpe});var ZU=S((WDe,JU)=>{"use strict";var Ppe=Tm(),xpe=(t,e)=>t.sort((r,n)=>Ppe(r,n,e));JU.exports=xpe});var tB=S((zDe,eB)=>{"use strict";var Ipe=Tm(),Ope=(t,e)=>t.sort((r,n)=>Ipe(n,r,e));eB.exports=Ope});var Lu=S((GDe,rB)=>{"use strict";var Npe=_r(),Dpe=(t,e,r)=>Npe(t,e,r)>0;rB.exports=Dpe});var Pm=S((KDe,nB)=>{"use strict";var Lpe=_r(),Mpe=(t,e,r)=>Lpe(t,e,r)<0;nB.exports=Mpe});var e0=S((XDe,sB)=>{"use strict";var kpe=_r(),qpe=(t,e,r)=>kpe(t,e,r)===0;sB.exports=qpe});var t0=S((QDe,iB)=>{"use strict";var $pe=_r(),Fpe=(t,e,r)=>$pe(t,e,r)!==0;iB.exports=Fpe});var xm=S((YDe,oB)=>{"use strict";var Upe=_r(),Bpe=(t,e,r)=>Upe(t,e,r)>=0;oB.exports=Bpe});var Im=S((JDe,aB)=>{"use strict";var Hpe=_r(),jpe=(t,e,r)=>Hpe(t,e,r)<=0;aB.exports=jpe});var r0=S((ZDe,cB)=>{"use strict";var Vpe=e0(),Wpe=t0(),zpe=Lu(),Gpe=xm(),Kpe=Pm(),Xpe=Im(),Qpe=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Vpe(t,r,n);case"!=":return Wpe(t,r,n);case">":return zpe(t,r,n);case">=":return Gpe(t,r,n);case"<":return Kpe(t,r,n);case"<=":return Xpe(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};cB.exports=Qpe});var lB=S((eLe,uB)=>{"use strict";var Ype=Tt(),Jpe=Ci(),{safeRe:Om,t:Nm}=sa(),Zpe=(t,e)=>{if(t instanceof Ype)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Om[Nm.COERCEFULL]:Om[Nm.COERCE]);else{let c=e.includePrerelease?Om[Nm.COERCERTLFULL]:Om[Nm.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Jpe(`${n}.${s}.${i}${o}${a}`,e)};uB.exports=Zpe});var fB=S((tLe,dB)=>{"use strict";var n0=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};dB.exports=n0});var vr=S((rLe,gB)=>{"use strict";var ehe=/\s+/g,s0=class t{constructor(e,r){if(r=rhe(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof i0)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(ehe," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!hB(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&uhe(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&ahe)|(this.options.loose&&che))+":"+e,s=pB.get(n);if(s)return s;let i=this.options.loose,o=i?Ht[Pt.HYPHENRANGELOOSE]:Ht[Pt.HYPHENRANGE];e=e.replace(o,She(this.options.includePrerelease)),Ne("hyphen replace",e),e=e.replace(Ht[Pt.COMPARATORTRIM],she),Ne("comparator trim",e),e=e.replace(Ht[Pt.TILDETRIM],ihe),Ne("tilde trim",e),e=e.replace(Ht[Pt.CARETTRIM],ohe),Ne("caret trim",e);let a=e.split(" ").map(d=>lhe(d,this.options)).join(" ").split(/\s+/).map(d=>Ehe(d,this.options));i&&(a=a.filter(d=>(Ne("loose invalid filter",d,this.options),!!d.match(Ht[Pt.COMPARATORLOOSE])))),Ne("range list",a);let c=new Map,u=a.map(d=>new i0(d,this.options));for(let d of u){if(hB(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return pB.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>mB(n,r)&&e.set.some(s=>mB(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new nhe(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(_he(this.set[r],e,this.options))return!0;return!1}};gB.exports=s0;var the=fB(),pB=new the,rhe=wm(),i0=Mu(),Ne=Du(),nhe=Tt(),{safeRe:Ht,t:Pt,comparatorTrimReplace:she,tildeTrimReplace:ihe,caretTrimReplace:ohe}=sa(),{FLAG_INCLUDE_PRERELEASE:ahe,FLAG_LOOSE:che}=Nu(),hB=t=>t.value==="<0.0.0-0",uhe=t=>t.value==="",mB=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},lhe=(t,e)=>(t=t.replace(Ht[Pt.BUILD],""),Ne("comp",t,e),t=phe(t,e),Ne("caret",t),t=dhe(t,e),Ne("tildes",t),t=mhe(t,e),Ne("xrange",t),t=yhe(t,e),Ne("stars",t),t),jt=t=>!t||t.toLowerCase()==="x"||t==="*",dhe=(t,e)=>t.trim().split(/\s+/).map(r=>fhe(r,e)).join(" "),fhe=(t,e)=>{let r=e.loose?Ht[Pt.TILDELOOSE]:Ht[Pt.TILDE];return t.replace(r,(n,s,i,o,a)=>{Ne("tilde",t,n,s,i,o,a);let c;return jt(s)?c="":jt(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:jt(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Ne("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Ne("tilde return",c),c})},phe=(t,e)=>t.trim().split(/\s+/).map(r=>hhe(r,e)).join(" "),hhe=(t,e)=>{Ne("caret",t,e);let r=e.loose?Ht[Pt.CARETLOOSE]:Ht[Pt.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,c)=>{Ne("caret",t,s,i,o,a,c);let u;return jt(i)?u="":jt(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:jt(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(Ne("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(Ne("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Ne("caret return",u),u})},mhe=(t,e)=>(Ne("replaceXRanges",t,e),t.split(/\s+/).map(r=>ghe(r,e)).join(" ")),ghe=(t,e)=>{t=t.trim();let r=e.loose?Ht[Pt.XRANGELOOSE]:Ht[Pt.XRANGE];return t.replace(r,(n,s,i,o,a,c)=>{Ne("xRange",t,n,s,i,o,a,c);let u=jt(i),l=u||jt(o),d=l||jt(a),m=d;return s==="="&&m&&(s=""),c=e.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&m?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),Ne("xRange return",n),n})},yhe=(t,e)=>(Ne("replaceStars",t,e),t.trim().replace(Ht[Pt.STAR],"")),Ehe=(t,e)=>(Ne("replaceGTE0",t,e),t.trim().replace(Ht[e.includePrerelease?Pt.GTE0PRE:Pt.GTE0],"")),She=t=>(e,r,n,s,i,o,a,c,u,l,d,m)=>(jt(n)?r="":jt(s)?r=`>=${n}.0.0${t?"-0":""}`:jt(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,jt(u)?c="":jt(l)?c=`<${+u+1}.0.0-0`:jt(d)?c=`<${u}.${+l+1}.0-0`:m?c=`<=${u}.${l}.${d}-${m}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),_he=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ne(t[n].semver),t[n].semver!==i0.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Mu=S((nLe,wB)=>{"use strict";var ku=Symbol("SemVer ANY"),c0=class t{static get ANY(){return ku}constructor(e,r){if(r=yB(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),a0("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ku?this.value="":this.value=this.operator+this.semver.version,a0("comp",this)}parse(e){let r=this.options.loose?EB[SB.COMPARATORLOOSE]:EB[SB.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new _B(n[2],this.options.loose):this.semver=ku}toString(){return this.value}test(e){if(a0("Comparator.test",e,this.options.loose),this.semver===ku||e===ku)return!0;if(typeof e=="string")try{e=new _B(e,this.options)}catch{return!1}return o0(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new vB(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new vB(this.value,r).test(e.semver):(r=yB(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||o0(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||o0(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};wB.exports=c0;var yB=wm(),{safeRe:EB,t:SB}=sa(),o0=r0(),a0=Du(),_B=Tt(),vB=vr()});var qu=S((sLe,bB)=>{"use strict";var vhe=vr(),whe=(t,e,r)=>{try{e=new vhe(e,r)}catch{return!1}return e.test(t)};bB.exports=whe});var CB=S((iLe,RB)=>{"use strict";var bhe=vr(),Rhe=(t,e)=>new bhe(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));RB.exports=Rhe});var TB=S((oLe,AB)=>{"use strict";var Che=Tt(),Ahe=vr(),The=(t,e,r)=>{let n=null,s=null,i=null;try{i=new Ahe(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Che(n,r))}),n};AB.exports=The});var xB=S((aLe,PB)=>{"use strict";var Phe=Tt(),xhe=vr(),Ihe=(t,e,r)=>{let n=null,s=null,i=null;try{i=new xhe(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Phe(n,r))}),n};PB.exports=Ihe});var NB=S((cLe,OB)=>{"use strict";var u0=Tt(),Ohe=vr(),IB=Lu(),Nhe=(t,e)=>{t=new Ohe(t,e);let r=new u0("0.0.0");if(t.test(r)||(r=new u0("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new u0(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||IB(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||IB(r,i))&&(r=i)}return r&&t.test(r)?r:null};OB.exports=Nhe});var LB=S((uLe,DB)=>{"use strict";var Dhe=vr(),Lhe=(t,e)=>{try{return new Dhe(t,e).range||"*"}catch{return null}};DB.exports=Lhe});var Dm=S((lLe,$B)=>{"use strict";var Mhe=Tt(),qB=Mu(),{ANY:khe}=qB,qhe=vr(),$he=qu(),MB=Lu(),kB=Pm(),Fhe=Im(),Uhe=xm(),Bhe=(t,e,r,n)=>{t=new Mhe(t,n),e=new qhe(e,n);let s,i,o,a,c;switch(r){case">":s=MB,i=Fhe,o=kB,a=">",c=">=";break;case"<":s=kB,i=Uhe,o=MB,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($he(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,m=null;if(l.forEach(g=>{g.semver===khe&&(g=new qB(">=0.0.0")),d=d||g,m=m||g,s(g.semver,d.semver,n)?d=g:o(g.semver,m.semver,n)&&(m=g)}),d.operator===a||d.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};$B.exports=Bhe});var UB=S((dLe,FB)=>{"use strict";var Hhe=Dm(),jhe=(t,e,r)=>Hhe(t,e,">",r);FB.exports=jhe});var HB=S((fLe,BB)=>{"use strict";var Vhe=Dm(),Whe=(t,e,r)=>Vhe(t,e,"<",r);BB.exports=Whe});var WB=S((pLe,VB)=>{"use strict";var jB=vr(),zhe=(t,e,r)=>(t=new jB(t,r),e=new jB(e,r),t.intersects(e,r));VB.exports=zhe});var GB=S((hLe,zB)=>{"use strict";var Ghe=qu(),Khe=_r();zB.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((l,d)=>Khe(l,d,r));for(let l of o)Ghe(l,e,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var ZB=S((mLe,JB)=>{"use strict";var KB=vr(),d0=Mu(),{ANY:l0}=d0,$u=qu(),f0=_r(),Xhe=(t,e,r={})=>{if(t===e)return!0;t=new KB(t,r),e=new KB(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=Yhe(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Qhe=[new d0(">=0.0.0-0")],XB=[new d0(">=0.0.0")],Yhe=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===l0){if(e.length===1&&e[0].semver===l0)return!0;r.includePrerelease?t=Qhe:t=XB}if(e.length===1&&e[0].semver===l0){if(r.includePrerelease)return!0;e=XB}let n=new Set,s,i;for(let g of t)g.operator===">"||g.operator===">="?s=QB(s,g,r):g.operator==="<"||g.operator==="<="?i=YB(i,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(s&&i){if(o=f0(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let g of n){if(s&&!$u(g,String(s),r)||i&&!$u(g,String(i),r))return null;for(let E of e)if(!$u(g,String(E),r))return!1;return!0}let a,c,u,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let g of e){if(l=l||g.operator===">"||g.operator===">=",u=u||g.operator==="<"||g.operator==="<=",s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator===">"||g.operator===">="){if(a=QB(s,g,r),a===g&&a!==s)return!1}else if(s.operator===">="&&!$u(s.semver,String(g),r))return!1}if(i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(c=YB(i,g,r),c===g&&c!==i)return!1}else if(i.operator==="<="&&!$u(i.semver,String(g),r))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||m||d)},QB=(t,e,r)=>{if(!t)return e;let n=f0(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},YB=(t,e,r)=>{if(!t)return e;let n=f0(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};JB.exports=Xhe});var n2=S((gLe,r2)=>{"use strict";var p0=sa(),e2=Nu(),Jhe=Tt(),t2=Yw(),Zhe=Ci(),eme=TU(),tme=xU(),rme=NU(),nme=MU(),sme=qU(),ime=FU(),ome=BU(),ame=jU(),cme=_r(),ume=GU(),lme=XU(),dme=Tm(),fme=ZU(),pme=tB(),hme=Lu(),mme=Pm(),gme=e0(),yme=t0(),Eme=xm(),Sme=Im(),_me=r0(),vme=lB(),wme=Mu(),bme=vr(),Rme=qu(),Cme=CB(),Ame=TB(),Tme=xB(),Pme=NB(),xme=LB(),Ime=Dm(),Ome=UB(),Nme=HB(),Dme=WB(),Lme=GB(),Mme=ZB();r2.exports={parse:Zhe,valid:eme,clean:tme,inc:rme,diff:nme,major:sme,minor:ime,patch:ome,prerelease:ame,compare:cme,rcompare:ume,compareLoose:lme,compareBuild:dme,sort:fme,rsort:pme,gt:hme,lt:mme,eq:gme,neq:yme,gte:Eme,lte:Sme,cmp:_me,coerce:vme,Comparator:wme,Range:bme,satisfies:Rme,toComparators:Cme,maxSatisfying:Ame,minSatisfying:Tme,minVersion:Pme,validRange:xme,outside:Ime,gtr:Ome,ltr:Nme,intersects:Dme,simplifyRange:Lme,subset:Mme,SemVer:Jhe,re:p0.re,src:p0.src,tokens:p0.t,SEMVER_SPEC_VERSION:e2.SEMVER_SPEC_VERSION,RELEASE_TYPES:e2.RELEASE_TYPES,compareIdentifiers:t2.compareIdentifiers,rcompareIdentifiers:t2.rcompareIdentifiers}});var m0=S((yLe,h0)=>{"use strict";var kme=n2(),qme=Iu(),ia=Ms(),s2=Ct(),i2=$e(),o2="2.7.15",$me=function(){return!1},Fme=function(e){if(!kme.gte(e.VERSION,o2))throw new Error("AWS SDK version "+o2+" or greater required.");for(var r in e)if(e[r].serviceIdentifier){var n=e[r];n.prototype.customizeRequests(a2)}return e},Ume=function(e){return e.customizeRequests(a2),e};function a2(t){var e=ia.resolveSegment(ia.resolveManualSegmentParams(t.params));if(!e){var r=this.serviceIdentifier+"."+t.operation;return ia.isAutomaticMode()?i2.getLogger().info("Call "+r+" is missing the sub/segment context for automatic mode. Ignoring."):i2.getLogger().info("Call "+r+' requires a segment object on the request params as "XRaySegment" for tracing in manual mode. Ignoring.'),t}var n=this.throttledError||$me,s=new Error().stack;let i;e.notTraced?i=e.addNewSubsegmentWithoutSampling(this.serviceIdentifier):i=e.addNewSubsegment(this.serviceIdentifier);var o=e.segment?e.segment.trace_id:e.trace_id;let a=e.segment?e.segment.additionalTraceData:e.additionalTraceData;var c=function(l){if(e.noOp)return;let d="Root="+o+";Parent="+i.id+";Sampled="+(i.notTraced?"0":"1");if(a!=null)for(let[m,g]of Object.entries(a))d+=";"+m+"="+g;l.httpRequest.headers["X-Amzn-Trace-Id"]=d},u=function(l){i.addAttribute("namespace","aws"),i.addAttribute("aws",new qme(l,i.name));var d=l.httpResponse;if(d&&(i.addAttribute("http",new c2(d)),(d.statusCode===429||l.error&&n(l.error))&&i.addThrottleFlag()),l.error){var m={message:l.error.message,name:l.error.code,stack:s};d&&d.statusCode?(s2.getCauseTypeFromHttpStatus(d.statusCode)=="error"&&i.addErrorFlag(),i.close(m,!0)):i.close(m)}else{if(d&&d.statusCode){var g=s2.getCauseTypeFromHttpStatus(d.statusCode);g&&(i[g]=!0)}i.close()}};t.on("beforePresign",function(l){e.removeSubsegment(i),e.decrementCounter(),l.removeListener("build",c),l.removeListener("complete",u)}),t.on("build",c).on("complete",u),t.__send||(t.__send=t.send,t.send=function(l){if(ia.isAutomaticMode()){var d=ia.getNamespace();d.run(function(){ia.setSegment(i),t.__send(l)})}else t.__send(l)})}function c2(t){this.init(t)}c2.prototype.init=function(e){this.response={status:e.statusCode||""},e.headers&&e.headers["content-length"]&&(this.response.content_length=e.headers["content-length"])};h0.exports.captureAWSClient=Ume;h0.exports.captureAWS=Fme});var p2=S((ELe,f2)=>{var Lm=Object.defineProperty,Bme=Object.getOwnPropertyDescriptor,Hme=Object.getOwnPropertyNames,jme=Object.prototype.hasOwnProperty,oa=(t,e)=>Lm(t,"name",{value:e,configurable:!0}),Vme=(t,e)=>{for(var r in e)Lm(t,r,{get:e[r],enumerable:!0})},Wme=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Hme(e))!jme.call(t,s)&&s!==r&&Lm(t,s,{get:()=>e[s],enumerable:!(n=Bme(e,s))||n.enumerable});return t},zme=t=>Wme(Lm({},"__esModule",{value:!0}),t),u2={};Vme(u2,{isClockSkewCorrectedError:()=>l2,isClockSkewError:()=>Zme,isRetryableByTrait:()=>Jme,isServerError:()=>tge,isThrottlingError:()=>ege,isTransientError:()=>d2});f2.exports=zme(u2);var Gme=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Kme=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Xme=["TimeoutError","RequestTimeout","RequestTimeoutException"],Qme=[500,502,503,504],Yme=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Jme=oa(t=>t.$retryable!==void 0,"isRetryableByTrait"),Zme=oa(t=>Gme.includes(t.name),"isClockSkewError"),l2=oa(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),ege=oa(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||Kme.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),d2=oa(t=>{var e;return l2(t)||Xme.includes(t.name)||Yme.includes(t?.code||"")||Qme.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},"isTransientError"),tge=oa(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!d2(t)}return!1},"isServerError")});var S2=S(aa=>{"use strict";var y2=aa&&aa.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(aa,"__esModule",{value:!0});aa.captureAWSClient=void 0;var rge=p2(),nge=y2(Iu()),sge=require("querystring"),ige=y2(Cu()),g0=Ms(),h2=$e(),{safeParseInt:Mm}=Ct(),oge=Ct(),E2="XRaySDKInstrumentation",m2=async(t,e,r,n,s,i)=>{var o,a,c;let{extendedRequestId:u,requestId:l,httpStatusCode:d,attempts:m}=((o=s?.output)===null||o===void 0?void 0:o.$metadata)||i?.$metadata,g=new nge.default({extendedRequestId:u,requestId:l,retryCount:m,data:s?.output,request:{operation:e,params:n,httpRequest:{region:r,statusCode:d}}},t),E={};return d&&(E.response={},E.response.status=d),!((a=s?.response)===null||a===void 0)&&a.headers&&((c=s?.response)===null||c===void 0?void 0:c.headers["content-length"])!==void 0&&(E.response||(E.response={}),E.response.content_length=Mm(s.response.headers["content-length"])),[g,E]};function g2(t,e,r){var n,s,i;(r&&(0,rge.isThrottlingError)(r)||Mm((n=t.response)===null||n===void 0?void 0:n.status)===429||Mm((s=r?.$metadata)===null||s===void 0?void 0:s.httpStatusCode)===429)&&e.addThrottleFlag();let o=(0,oge.getCauseTypeFromHttpStatus)(Mm((i=t.response)===null||i===void 0?void 0:i.status));o==="fault"?e.addFaultFlag():o==="error"&&e.addErrorFlag()}var age=(t,e)=>(r,n)=>async s=>{var i;let o=g0.isAutomaticMode()?g0.resolveSegment():e,{clientName:a,commandName:c}=n,u=(i=s?.input)!==null&&i!==void 0?i:{},l=c.slice(0,-7),d=l.charAt(0).toLowerCase()+l.slice(1),m=a.slice(0,-6);if(!o){let O=m+"."+d;return g0.isAutomaticMode()?h2.getLogger().info("Call "+O+" is missing the sub/segment context for automatic mode. Ignoring."):h2.getLogger().info("Call "+O+" requires a segment object passed to captureAWSv3Client for tracing in manual mode. Ignoring."),r(s)}let g;o.notTraced?g=o.addNewSubsegmentWithoutSampling(m):g=o.addNewSubsegment(m),g.addAttribute("namespace","aws");let E=o instanceof ige.default?o.segment:o,b=E.segment?E.segment.additionalTraceData:E.additionalTraceData,P=(0,sge.stringify)({Root:E.trace_id,Parent:g.id,Sampled:g.notTraced?"0":"1"},";");if(b!=null)for(let[O,M]of Object.entries(b))P+=";"+O+"="+M;o.noOp||(s.request.headers["X-Amzn-Trace-Id"]=P);let T;try{if(T=await r(s),!T)throw new Error("Failed to get response from instrumented AWS Client.");let[O,M]=await m2(m,d,await t.region(),u,T,null);return g.addAttribute("aws",O),g.addAttribute("http",M),g2(M,g),g.close(),T}catch(O){if(O.$metadata){let[q,B]=await m2(m,d,await t.region(),u,null,O);g.addAttribute("aws",q),g.addAttribute("http",B),g2(B,g,O)}let M={message:O.message,name:O.name,stack:O.stack||new Error().stack};throw g.close(M,!0),O}},cge={name:E2,step:"build"},uge=(t,e)=>({applyToStack:r=>{r.add(age(t,e),cge)}});function lge(t,e){return t.middlewareStack.remove(E2),t.middlewareStack.use(uge(t.config,e)),t}aa.captureAWSClient=lge});var E0=S((_Le,y0)=>{"use strict";var _2=require("url"),ca=Ms(),km=Ct(),v2=$e(),dge=require("events"),fge=function(e,r,n){e.__request||w2(e,r,n)},pge=function(e,r,n){if(e.__request)return e;var s={};return Object.keys(e).forEach(function(i){s[i]=e[i]}),w2(s,r,n),s};function w2(t,e,r){function n(o,...a){let c,u,l,d,m=a[0];if(typeof a[1]=="object"?(l=!0,d=typeof m=="string"?new _2.URL(m):m,c=a[1],u=a[2]):(l=!1,c=m,u=a[1]),!c||c.headers&&c.headers["X-Amzn-Trace-Id"])return o(...a);typeof c=="string"&&(c=new _2.URL(c)),l||(d=c);let g=ca.resolveSegment(ca.resolveManualSegmentParams(c)),E=c.hostname||c.host||d.hostname||d.host||"Unknown host";if(!g){let q="[ host: "+E;return q=c.method?q+", method: "+c.method:q,q+=", path: "+(d.pathname||km.stripQueryStringFromPath(c.path))+" ]",ca.isAutomaticMode()?v2.getLogger().info("Options for request "+q+" is missing the sub/segment context for automatic mode. Ignoring."):v2.getLogger().info("Options for request "+q+' requires a segment object on the options params as "XRaySegment" for tracing in manual mode. Ignoring.'),o(...a)}let b;g.notTraced?b=g.addNewSubsegmentWithoutSampling(E):b=g.addNewSubsegment(E);let P=g.segment?g.segment:g;b.namespace="remote",c.headers||(c.headers={}),g.noOp||(c.headers["X-Amzn-Trace-Id"]="Root="+P.trace_id+";Parent="+b.id+";Sampled="+(b.notTraced?"0":"1"));let T=function(B){if(r&&r(b,this,null,B),b.http&&b.http.response)km.getCauseTypeFromHttpStatus(b.http.response.status)==="error"&&b.addErrorFlag(),b.close(B,!0);else{let ce=B.code!=="ECONNREFUSED";b.addRemoteRequestData(this,null,ce&&e),b.close(B)}},O=km.objectWithoutProperties(c,["Segment"],!0),M=o(...l?[m,O]:[c],function(q){q.on("end",function(){r&&r(b,this.req,q),q.statusCode===429&&b.addThrottleFlag();let B=km.getCauseTypeFromHttpStatus(q.statusCode);B&&(b[B]=!0),b.addRemoteRequestData(q.req,q,!!e),b.close()}),typeof u=="function"?ca.isAutomaticMode()?ca.getNamespace().run(function(){ca.setSegment(b),u(q)}):u(q):q.req&&q.req.listenerCount("response")===0&&q.resume()});return M.on(dge.errorMonitor||"error",T),M}t.__request=t.request;function s(...o){return n(t.__request,...o)}t.__get=t.get;function i(...o){return n(t.__get,...o)}Object.defineProperties(t,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:i,configurable:!0,enumerable:!0,writable:!0}})}y0.exports.captureHTTPsGlobal=fge;y0.exports.captureHTTPs=pge});var A2=S((vLe,S0)=>{"use strict";var Fu=Ms(),qm=Symbol("original then"),$m=Symbol("original catch");function R2(t){let e=t.prototype.then;e[qm]||(t.prototype.then=function(n,s){if(Fu.isAutomaticMode()&&b2()){let i=Fu.getNamespace();n=n&&i.bind(n),s=s&&i.bind(s)}return e.call(this,n,s)},t.prototype.then[qm]=e);let r=t.prototype.catch;r&&!r[$m]&&(t.prototype.catch=function(n){if(Fu.isAutomaticMode()&&b2()){let s=Fu.getNamespace();n=n&&s.bind(n)}return r.call(this,n)},t.prototype.catch[$m]=r)}function hge(t){let e=t.prototype.then;e[qm]&&(t.prototype.then=e[qm]);let r=t.prototype.catch;r&&r[$m]&&(t.prototype.catch=r[$m])}function b2(){try{return Fu.getSegment()}catch{return}}function C2(){R2(Promise)}function mge(){hge(Promise)}C2.patchThirdPartyPromise=R2;S0.exports.capturePromise=C2;S0.exports.uncapturePromise=mge});var x2=S((wLe,P2)=>{"use strict";function T2(t,e,r,n,s){this.init(t,e,r,n,s)}T2.prototype.init=function(e,r,n,s,i){e&&(this.database_version=e),r&&(this.driver_version=r),i&&(this.preparation=i),this.url=s,this.user=n};P2.exports=T2});var N2=S((bLe,O2)=>{"use strict";var Hn=Ms(),_0=$e(),ua=Ns(),gge=Ct(),yge=WF(),Bu={};try{Bu=zF()}catch(t){_0.getLogger().debug("Failed to load SDK data:",t)}var Uu="unknown",I2={plugins:{EC2Plugin:eU(),ECSPlugin:rU(),ElasticBeanstalkPlugin:sU()},config:function(t){var e={};t.forEach(function(r){r.getData(function(n){if(n)for(var s in n)e[s]=n[s]}),ua.setOrigin(r.originName),ua.setPluginData(e)})},setAWSWhitelist:Iu().setAWSWhitelist,appendAWSWhitelist:Iu().appendAWSWhitelist,setStreamingThreshold:ua.setStreamingThreshold,setLogger:_0.setLogger,getLogger:_0.getLogger,setDaemonAddress:rm().setDaemonAddress,captureFunc:vm().captureFunc,captureAsyncFunc:vm().captureAsyncFunc,captureCallbackFunc:vm().captureCallbackFunc,captureAWS:m0().captureAWS,captureAWSClient:m0().captureAWSClient,captureAWSv3Client:S2().captureAWSClient,captureHTTPs:E0().captureHTTPs,captureHTTPsGlobal:E0().captureHTTPsGlobal,capturePromise:A2().capturePromise,utils:gge,database:{SqlData:x2()},middleware:Fw(),getNamespace:Hn.getNamespace,resolveSegment:Hn.resolveSegment,resolveManualSegmentParams:Hn.resolveManualSegmentParams,getSegment:Hn.getSegment,setSegment:Hn.setSegment,isAutomaticMode:Hn.isAutomaticMode,enableAutomaticMode:Hn.enableAutomaticMode,enableManualMode:Hn.enableManualMode,setContextMissingStrategy:Hn.setContextMissingStrategy,Segment:Au(),Subsegment:Cu(),SegmentUtils:ua};I2.middleware.IncomingRequestData=Pw(),function(){var t={runtime:process.release&&process.release.name?process.release.name:Uu,runtime_version:process.version,version:process.env.npm_package_version||Uu,name:process.env.npm_package_name||Uu},e={sdk:"X-Ray for Node.js",sdk_version:Bu.version?Bu.version:Uu,package:Bu.name?Bu.name:Uu};ua.setSDKData(e),ua.setServiceData(t),process.env.LAMBDA_TASK_ROOT&&yge.init()}();O2.exports=I2});var v0=S((RLe,D2)=>{"use strict";D2.exports=N2()});var C0=S(G2=>{"use strict";G2.parse=function(t,e){return new R0(t,e).parse()};var R0=class t{constructor(e,r){this.source=e,this.transform=r||$ge,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function $ge(t){return t}});var A0=S((WLe,K2)=>{var Fge=C0();K2.exports={create:function(t,e){return{parse:function(){return Fge.parse(t,e)}}}}});var Y2=S((zLe,Q2)=>{"use strict";var Uge=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Bge=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,Hge=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,jge=/^-?infinity$/;Q2.exports=function(e){if(jge.test(e))return Number(e.replace("i","I"));var r=Uge.exec(e);if(!r)return Vge(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=X2(s));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var d,m=Wge(e);return m!=null?(d=new Date(Date.UTC(s,i,o,a,c,u,l)),T0(s)&&d.setUTCFullYear(s),m!==0&&d.setTime(d.getTime()-m)):(d=new Date(s,i,o,a,c,u,l),T0(s)&&d.setFullYear(s)),d};function Vge(t){var e=Bge.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=X2(r));var s=parseInt(e[2],10)-1,i=e[3],o=new Date(r,s,i);return T0(r)&&o.setFullYear(r),o}}function Wge(t){if(t.endsWith("+00"))return 0;var e=Hge.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function X2(t){return-(t-1)}function T0(t){return t>=0&&t<100}});var Z2=S((GLe,J2)=>{J2.exports=Gge;var zge=Object.prototype.hasOwnProperty;function Gge(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)zge.call(r,n)&&(t[n]=r[n])}return t}});var rH=S((KLe,tH)=>{"use strict";var Kge=Z2();tH.exports=la;function la(t){if(!(this instanceof la))return new la(t);Kge(this,oye(t))}var Xge=["seconds","minutes","hours","days","months","years"];la.prototype.toPostgres=function(){var t=Xge.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var Qge={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Yge=["years","months","days"],Jge=["hours","minutes","seconds"];la.prototype.toISOString=la.prototype.toISO=function(){var t=Yge.map(r,this).join(""),e=Jge.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+Qge[n]}};var P0="([+-]?\\d+)",Zge=P0+"\\s+years?",eye=P0+"\\s+mons?",tye=P0+"\\s+days?",rye="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",nye=new RegExp([Zge,eye,tye,rye].map(function(t){return"("+t+")?"}).join("\\s*")),eH={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},sye=["hours","minutes","seconds","milliseconds"];function iye(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function oye(t){if(!t)return{};var e=nye.exec(t),r=e[8]==="-";return Object.keys(eH).reduce(function(n,s){var i=eH[s],o=e[i];return!o||(o=s==="milliseconds"?iye(o):parseInt(o,10),!o)||(r&&~sye.indexOf(s)&&(o*=-1),n[s]=o),n},{})}});var sH=S((XLe,nH)=>{"use strict";nH.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var dH=S((QLe,lH)=>{var Vu=C0(),Wu=A0(),Vm=Y2(),oH=rH(),aH=sH();function Wm(t){return function(r){return r===null?r:t(r)}}function cH(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function aye(t){return t?Vu.parse(t,cH):null}function cye(t){return parseInt(t,10)}function x0(t){return t?Vu.parse(t,Wm(cye)):null}function uye(t){return t?Vu.parse(t,Wm(function(e){return uH(e).trim()})):null}var lye=function(t){if(!t)return null;var e=Wu.create(t,function(r){return r!==null&&(r=D0(r)),r});return e.parse()},I0=function(t){if(!t)return null;var e=Wu.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},wr=function(t){if(!t)return null;var e=Wu.create(t);return e.parse()},O0=function(t){if(!t)return null;var e=Wu.create(t,function(r){return r!==null&&(r=Vm(r)),r});return e.parse()},dye=function(t){if(!t)return null;var e=Wu.create(t,function(r){return r!==null&&(r=oH(r)),r});return e.parse()},fye=function(t){return t?Vu.parse(t,Wm(aH)):null},N0=function(t){return parseInt(t,10)},uH=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},iH=function(t){return t?Vu.parse(t,Wm(JSON.parse)):null},D0=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},pye=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var i=D0(e);return i.radius=parseFloat(r),i},hye=function(t){t(20,uH),t(21,N0),t(23,N0),t(26,N0),t(700,parseFloat),t(701,parseFloat),t(16,cH),t(1082,Vm),t(1114,Vm),t(1184,Vm),t(600,D0),t(651,wr),t(718,pye),t(1e3,aye),t(1001,fye),t(1005,x0),t(1007,x0),t(1028,x0),t(1016,uye),t(1017,lye),t(1021,I0),t(1022,I0),t(1231,I0),t(1014,wr),t(1015,wr),t(1008,wr),t(1009,wr),t(1040,wr),t(1041,wr),t(1115,O0),t(1182,O0),t(1185,O0),t(1186,oH),t(1187,dye),t(17,aH),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,iH),t(3807,iH),t(3907,wr),t(2951,wr),t(791,wr),t(1183,wr),t(1270,wr)};lH.exports={init:hye}});var pH=S((YLe,fH)=>{"use strict";var Jt=1e6;function mye(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",i,o,a,c,u,l;{if(i=e%Jt,e=e/Jt>>>0,o=4294967296*i+r,r=o/Jt>>>0,a=""+(o-Jt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%Jt,e=e/Jt>>>0,o=4294967296*i+r,r=o/Jt>>>0,a=""+(o-Jt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%Jt,e=e/Jt>>>0,o=4294967296*i+r,r=o/Jt>>>0,a=""+(o-Jt*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return i=e%Jt,o=4294967296*i+r,a=""+o%Jt,n+a+s}fH.exports=mye});var EH=S((JLe,yH)=>{var gye=pH(),je=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(g,E,b){return g*Math.pow(2,b)+E};var i=r>>3,o=function(g){return n?~g&255:g},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,o(t[i])&a,c));for(var l=e+r>>3,d=i+1;d<l;d++)u=s(u,o(t[d]),8);var m=(e+r)%8;return m>0&&(u=s(u,o(t[l])>>8-m,m)),u},gH=function(t,e,r){var n=Math.pow(2,r-1)-1,s=je(t,1),i=je(t,r,1);if(i===0)return 0;var o=1,a=function(u,l,d){u===0&&(u=1);for(var m=1;m<=d;m++)o/=2,(l&1<<d-m)>0&&(u+=o);return u},c=je(t,e,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,i-n)*c},yye=function(t){return je(t,1)==1?-1*(je(t,15,1,!0)+1):je(t,15,1)},hH=function(t){return je(t,1)==1?-1*(je(t,31,1,!0)+1):je(t,31,1)},Eye=function(t){return gH(t,23,8)},Sye=function(t){return gH(t,52,11)},_ye=function(t){var e=je(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,je(t,16,16)),n=0,s=[],i=je(t,16),o=0;o<i;o++)n+=je(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,je(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},mH=function(t,e){var r=je(e,1),n=je(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(i){this.usec=i},s.getUTCMicroSeconds=function(){return this.usec},s},zu=function(t){for(var e=je(t,32),r=je(t,32,32),n=je(t,32,64),s=96,i=[],o=0;o<e;o++)i[o]=je(t,32,s),s+=32,s+=32;var a=function(u){var l=je(t,32,s);if(s+=32,l==4294967295)return null;var d;if(u==23||u==20)return d=je(t,l*8,s),s+=l*8,d;if(u==25)return d=t.toString(this.encoding,s>>3,(s+=l<<3)>>3),d;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var d=[],m;if(u.length>1){var g=u.shift();for(m=0;m<g;m++)d[m]=c(u,l);u.unshift(g)}else for(m=0;m<u[0];m++)d[m]=a(l);return d};return c(i,n)},vye=function(t){return t.toString("utf8")},wye=function(t){return t===null?null:je(t,8)>0},bye=function(t){t(20,gye),t(21,yye),t(23,hH),t(26,hH),t(1700,_ye),t(700,Eye),t(701,Sye),t(16,wye),t(1114,mH.bind(null,!1)),t(1184,mH.bind(null,!0)),t(1e3,zu),t(1007,zu),t(1016,zu),t(1008,zu),t(1009,zu),t(25,vye)};yH.exports={init:bye}});var _H=S((ZLe,SH)=>{SH.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Xu=S(Ku=>{var Rye=dH(),Cye=EH(),Aye=A0(),Tye=_H();Ku.getTypeParser=Pye;Ku.setTypeParser=xye;Ku.arrayParser=Aye;Ku.builtins=Tye;var Gu={text:{},binary:{}};function vH(t){return String(t)}function Pye(t,e){return e=e||"text",Gu[e]&&Gu[e][t]||vH}function xye(t,e,r){typeof e=="function"&&(r=e,e="text"),Gu[e][t]=r}Rye.init(function(t,e){Gu.text[t]=e});Cye.init(function(t,e){Gu.binary[t]=e})});var Qu=S((t1e,L0)=>{"use strict";L0.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var da=Xu(),Iye=da.getTypeParser(20,"text"),Oye=da.getTypeParser(1016,"text");L0.exports.__defineSetter__("parseInt8",function(t){da.setTypeParser(20,"text",t?da.getTypeParser(23,"text"):Iye),da.setTypeParser(1016,"text",t?da.getTypeParser(1007,"text"):Oye)})});var fa=S((r1e,RH)=>{"use strict";var Nye=Qu(),wH=require("util"),{isDate:Dye}=wH.types||wH;function Lye(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function bH(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+bH(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=Lye(zm(t[r]));return e=e+"}",e}var zm=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return Dye(t)?Nye.parseInputDatesAsUTC?qye(t):kye(t):Array.isArray(t)?bH(t):Mye(t,e)}return t.toString()};function Mye(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),zm(t.toPostgres(zm),e)}return JSON.stringify(t)}function kye(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function qye(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function $ye(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var Fye=function(t){return'"'+t.replace(/"/g,'""')+'"'},Uye=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};RH.exports={prepareValue:function(e){return zm(e)},normalizeQueryConfig:$ye,escapeIdentifier:Fye,escapeLiteral:Uye}});var AH=S((n1e,CH)=>{"use strict";var pa=require("crypto");function M0(t){return pa.createHash("md5").update(t,"utf-8").digest("hex")}function Bye(t,e,r){let n=M0(e+t);return"md5"+M0(Buffer.concat([Buffer.from(n),r]))}function Hye(t){return pa.createHash("sha256").update(t).digest()}function jye(t,e){return t=t.replace(/(\D)-/,"$1"),pa.createHash(t).update(e).digest()}function Vye(t,e){return pa.createHmac("sha256",t).update(e).digest()}async function Wye(t,e,r){return pa.pbkdf2Sync(t,e,r,32,"sha256")}CH.exports={postgresMd5PasswordHash:Bye,randomBytes:pa.randomBytes,deriveKey:Wye,sha256:Hye,hashByName:jye,hmacSha256:Vye,md5:M0}});var IH=S((s1e,xH)=>{var TH=require("crypto");xH.exports={postgresMd5PasswordHash:Gye,randomBytes:zye,deriveKey:Yye,sha256:Kye,hashByName:Xye,hmacSha256:Qye,md5:k0};var PH=TH.webcrypto||globalThis.crypto,Ti=PH.subtle,q0=new TextEncoder;function zye(t){return PH.getRandomValues(Buffer.alloc(t))}async function k0(t){try{return TH.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?q0.encode(t):t,n=await Ti.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function Gye(t,e,r){let n=await k0(e+t);return"md5"+await k0(Buffer.concat([Buffer.from(n),r]))}async function Kye(t){return await Ti.digest("SHA-256",t)}async function Xye(t,e){return await Ti.digest(t,e)}async function Qye(t,e){let r=await Ti.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Ti.sign("HMAC",r,q0.encode(e))}async function Yye(t,e,r){let n=await Ti.importKey("raw",q0.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await Ti.deriveBits(s,n,32*8,["deriveBits"])}});var F0=S((i1e,$0)=>{"use strict";var Jye=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;Jye?$0.exports=AH():$0.exports=IH()});var DH=S((o1e,NH)=>{function Pi(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function U0(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw Pi("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function OH(t,e){if(t[e++]!==6)throw Pi("non-OID data",t);let{length:r,index:n}=U0(t,e);e=n;let s=e+r,i=t[e++],o=(i/40>>0)+"."+i%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:e}}function Yu(t,e){if(t[e++]!==48)throw Pi("non-sequence data",t);return U0(t,e)}function Zye(t,e){e===void 0&&(e=0),e=Yu(t,e).index;let{length:r,index:n}=Yu(t,e);e=n+r,e=Yu(t,e).index;let{oid:s,index:i}=OH(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=i,e=Yu(t,e).index,t[e++]!==160)throw Pi("non-tag data",t);e=U0(t,e).index,e=Yu(t,e).index;let{oid:o}=OH(t,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw Pi("unknown hash OID "+o,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw Pi("Ed448 certificate channel binding is not currently supported by Postgres")}throw Pi("unknown OID "+s,t)}NH.exports={signatureAlgorithmHashFromCertificate:Zye}});var qH=S((a1e,kH)=>{"use strict";var ks=F0(),{signatureAlgorithmHashFromCertificate:eEe}=DH();function tEe(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>t.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=ks.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function rEe(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=iEe(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+t.clientNonce,o="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let O=n.getPeerCertificate().raw,M=eEe(O);(M==="MD5"||M==="SHA-1")&&(M="SHA-256");let q=await ks.hashByName(M,O);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(q)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=i+","+o+","+c,l=Buffer.from(s.salt,"base64"),d=await ks.deriveKey(e,l,s.iteration),m=await ks.hmacSha256(d,"Client Key"),g=await ks.sha256(m),E=await ks.hmacSha256(g,u),b=aEe(Buffer.from(m),Buffer.from(E)).toString("base64"),P=await ks.hmacSha256(d,"Server Key"),T=await ks.hmacSha256(P,u);t.message="SASLResponse",t.serverSignature=Buffer.from(T).toString("base64"),t.response=c+",p="+b}function nEe(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=oEe(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function sEe(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function LH(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function MH(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function iEe(t){let e=MH(t),r=e.get("r");if(r){if(!sEe(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!LH(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(s,10);return{nonce:r,salt:n,iteration:i}}function oEe(t){let r=MH(t).get("v");if(r){if(!LH(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function aEe(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}kH.exports={startSession:tEe,continueSession:rEe,finalizeSession:nEe}});var Km=S((c1e,$H)=>{"use strict";var cEe=Xu();function Gm(t){this._types=t||cEe,this.text={},this.binary={}}Gm.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Gm.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Gm.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};$H.exports=Gm});var BH=S((u1e,UH)=>{"use strict";function ha(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let i=s?"":n.hostname;r.host?i&&/^%2f/i.test(i)&&(n.pathname=i+n.pathname):r.host=decodeURIComponent(i),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function uEe(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function FH(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let i=s;typeof i=="boolean"&&(r[n]=i),typeof i=="object"&&(r[n]=uEe(i))}else if(s!=null)if(n==="port"){if(s!==""){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid ${n}: ${s}`);r[n]=i}}else r[n]=s;return r},{})}function lEe(t){return FH(ha(t))}UH.exports=ha;ha.parse=ha;ha.toClientConfig=FH;ha.parseIntoClientConfig=lEe});var H0=S((l1e,VH)=>{"use strict";var dEe=require("dns"),jH=Qu(),HH=BH().parse,Vt=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||jH[t]},fEe=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return jH.ssl},ma=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},br=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+ma(n))},B0=class{constructor(e){e=typeof e=="string"?HH(e):e||{},e.connectionString&&(e=Object.assign({},e,HH(e.connectionString))),this.user=Vt("user",e),this.database=Vt("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(Vt("port",e),10),this.host=Vt("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Vt("password",e)}),this.binary=Vt("binary",e),this.options=Vt("options",e),this.ssl=typeof e.ssl>"u"?fEe():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Vt("client_encoding",e),this.replication=Vt("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Vt("application_name",e,"PGAPPNAME"),this.fallback_application_name=Vt("fallback_application_name",e,!1),this.statement_timeout=Vt("statement_timeout",e,!1),this.lock_timeout=Vt("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=Vt("idle_in_transaction_session_timeout",e,!1),this.query_timeout=Vt("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];br(r,this,"user"),br(r,this,"password"),br(r,this,"port"),br(r,this,"application_name"),br(r,this,"fallback_application_name"),br(r,this,"connect_timeout"),br(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(br(r,n,"sslmode"),br(r,n,"sslca"),br(r,n,"sslkey"),br(r,n,"sslcert"),br(r,n,"sslrootcert"),this.database&&r.push("dbname="+ma(this.database)),this.replication&&r.push("replication="+ma(this.replication)),this.host&&r.push("host="+ma(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+ma(this.client_encoding)),dEe.lookup(this.host,function(s,i){return s?e(s,null):(r.push("hostaddr="+ma(i)),e(null,r.join(" ")))})}};VH.exports=B0});var V0=S((d1e,zH)=>{"use strict";var pEe=Xu(),WH=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,j0=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=WH.exec(e.text):r=WH.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let i=e[n];i!==null?r[n]=this._parsers[n](i):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let i=e[n],o=this.fields[n].name;if(i!==null){let a=this.fields[n].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=pEe.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};zH.exports=j0});var QH=S((f1e,XH)=>{"use strict";var{EventEmitter:hEe}=require("events"),GH=V0(),KH=fa(),W0=class extends hEe{constructor(e,r,n){super(),e=KH.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new GH(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new GH(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:KH.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};XH.exports=W0});var ob=S(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.NoticeMessage=X.DataRowMessage=X.CommandCompleteMessage=X.ReadyForQueryMessage=X.NotificationResponseMessage=X.BackendKeyDataMessage=X.AuthenticationMD5Password=X.ParameterStatusMessage=X.ParameterDescriptionMessage=X.RowDescriptionMessage=X.Field=X.CopyResponse=X.CopyDataMessage=X.DatabaseError=X.copyDone=X.emptyQuery=X.replicationStart=X.portalSuspended=X.noData=X.closeComplete=X.bindComplete=X.parseComplete=void 0;X.parseComplete={name:"parseComplete",length:5};X.bindComplete={name:"bindComplete",length:5};X.closeComplete={name:"closeComplete",length:5};X.noData={name:"noData",length:5};X.portalSuspended={name:"portalSuspended",length:5};X.replicationStart={name:"replicationStart",length:4};X.emptyQuery={name:"emptyQuery",length:4};X.copyDone={name:"copyDone",length:4};var z0=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};X.DatabaseError=z0;var G0=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};X.CopyDataMessage=G0;var K0=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};X.CopyResponse=K0;var X0=class{constructor(e,r,n,s,i,o,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};X.Field=X0;var Q0=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};X.RowDescriptionMessage=Q0;var Y0=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};X.ParameterDescriptionMessage=Y0;var J0=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};X.ParameterStatusMessage=J0;var Z0=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};X.AuthenticationMD5Password=Z0;var eb=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};X.BackendKeyDataMessage=eb;var tb=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};X.NotificationResponseMessage=tb;var rb=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};X.ReadyForQueryMessage=rb;var nb=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};X.CommandCompleteMessage=nb;var sb=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};X.DataRowMessage=sb;var ib=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};X.NoticeMessage=ib});var YH=S(Xm=>{"use strict";Object.defineProperty(Xm,"__esModule",{value:!0});Xm.Writer=void 0;var ab=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Xm.Writer=ab});var ZH=S(Ym=>{"use strict";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.serialize=void 0;var cb=YH(),Fe=new cb.Writer,mEe=t=>{Fe.addInt16(3).addInt16(0);for(let n of Object.keys(t))Fe.addCString(n).addCString(t[n]);Fe.addCString("client_encoding").addCString("UTF8");let e=Fe.addCString("").flush(),r=e.length+4;return new cb.Writer().addInt32(r).add(e).flush()},gEe=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},yEe=t=>Fe.addCString(t).flush(112),EEe=function(t,e){return Fe.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),Fe.flush(112)},SEe=function(t){return Fe.addString(t).flush(112)},_Ee=t=>Fe.addCString(t).flush(81),JH=[],vEe=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||JH,n=r.length,s=Fe.addCString(e).addCString(t.text).addInt16(n);for(let i=0;i<n;i++)s.addInt32(r[i]);return Fe.flush(80)},ga=new cb.Writer,wEe=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(Fe.addInt16(0),ga.addInt32(-1)):n instanceof Buffer?(Fe.addInt16(1),ga.addInt32(n.length),ga.add(n)):(Fe.addInt16(0),ga.addInt32(Buffer.byteLength(n)),ga.addString(n))}},bEe=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||JH,i=s.length;return Fe.addCString(e).addCString(r),Fe.addInt16(i),wEe(s,t.valueMapper),Fe.addInt16(i),Fe.add(ga.flush()),Fe.addInt16(1),Fe.addInt16(n?1:0),Fe.flush(66)},REe=Buffer.from([69,0,0,0,9,0,0,0,0,0]),CEe=t=>{if(!t||!t.portal&&!t.rows)return REe;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(e,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},AEe=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},ub=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},TEe=Fe.addCString("P").flush(68),PEe=Fe.addCString("S").flush(68),xEe=t=>t.name?ub(68,`${t.type}${t.name||""}`):t.type==="P"?TEe:PEe,IEe=t=>{let e=`${t.type}${t.name||""}`;return ub(67,e)},OEe=t=>Fe.add(t).flush(100),NEe=t=>ub(102,t),Qm=t=>Buffer.from([t,0,0,0,4]),DEe=Qm(72),LEe=Qm(83),MEe=Qm(88),kEe=Qm(99),qEe={startup:mEe,password:yEe,requestSsl:gEe,sendSASLInitialResponseMessage:EEe,sendSCRAMClientFinalMessage:SEe,query:_Ee,parse:vEe,bind:bEe,execute:CEe,describe:xEe,close:IEe,flush:()=>DEe,sync:()=>LEe,end:()=>MEe,copyData:OEe,copyDone:()=>kEe,copyFail:NEe,cancel:AEe};Ym.serialize=qEe});var ej=S(Jm=>{"use strict";Object.defineProperty(Jm,"__esModule",{value:!0});Jm.BufferReader=void 0;var $Ee=Buffer.allocUnsafe(0),lb=class{constructor(e=0){this.offset=e,this.buffer=$Ee,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};Jm.BufferReader=lb});var nj=S(Zm=>{"use strict";Object.defineProperty(Zm,"__esModule",{value:!0});Zm.Parser=void 0;var Ve=ob(),FEe=ej(),db=1,UEe=4,tj=db+UEe,rj=Buffer.allocUnsafe(0),fb=class{constructor(e){if(this.buffer=rj,this.bufferLength=0,this.bufferOffset=0,this.reader=new FEe.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+tj<=n;){let i=this.buffer[s],o=this.buffer.readUInt32BE(s+db),a=db+o;if(a+s<=n){let c=this.handlePacket(s+tj,i,o,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=rj,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;s=Buffer.allocUnsafe(i)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){switch(r){case 50:return Ve.bindComplete;case 49:return Ve.parseComplete;case 51:return Ve.closeComplete;case 110:return Ve.noData;case 115:return Ve.portalSuspended;case 99:return Ve.copyDone;case 87:return Ve.replicationStart;case 73:return Ve.emptyQuery;case 68:return this.parseDataRowMessage(e,n,s);case 67:return this.parseCommandCompleteMessage(e,n,s);case 90:return this.parseReadyForQueryMessage(e,n,s);case 65:return this.parseNotificationMessage(e,n,s);case 82:return this.parseAuthenticationResponse(e,n,s);case 83:return this.parseParameterStatusMessage(e,n,s);case 75:return this.parseBackendKeyData(e,n,s);case 69:return this.parseErrorMessage(e,n,s,"error");case 78:return this.parseErrorMessage(e,n,s,"notice");case 84:return this.parseRowDescriptionMessage(e,n,s);case 116:return this.parseParameterDescriptionMessage(e,n,s);case 71:return this.parseCopyInMessage(e,n,s);case 72:return this.parseCopyOutMessage(e,n,s);case 100:return this.parseCopyData(e,n,s);default:return new Ve.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.string(1);return new Ve.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring();return new Ve.CommandCompleteMessage(r,s)}parseCopyData(e,r,n){let s=n.slice(e,e+(r-4));return new Ve.CopyDataMessage(r,s)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,s){this.reader.setBuffer(e,n);let i=this.reader.byte()!==0,o=this.reader.int16(),a=new Ve.CopyResponse(r,s,i,o);for(let c=0;c<o;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new Ve.NotificationResponseMessage(r,s,i,o)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ve.RowDescriptionMessage(r,s);for(let o=0;o<s;o++)i.fields[o]=this.parseField();return i}parseField(){let e=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),i=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ve.Field(e,r,n,s,i,o,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ve.ParameterDescriptionMessage(r,s);for(let o=0;o<s;o++)i.dataTypeIDs[o]=this.reader.int32();return i}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Array(s);for(let o=0;o<s;o++){let a=this.reader.int32();i[o]=a===-1?null:this.reader.string(a)}return new Ve.DataRowMessage(r,i)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring(),i=this.reader.cstring();return new Ve.ParameterStatusMessage(r,s,i)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.int32();return new Ve.BackendKeyDataMessage(r,s,i)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new Ve.AuthenticationMD5Password(r,o)}break;case 10:{i.name="authenticationSASL",i.mechanisms=[];let o;do o=this.reader.cstring(),o&&i.mechanisms.push(o);while(o)}break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return i}parseErrorMessage(e,r,n,s){this.reader.setBuffer(e,n);let i={},o=this.reader.string(1);for(;o!=="\0";)i[o]=this.reader.cstring(),o=this.reader.string(1);let a=i.M,c=s==="notice"?new Ve.NoticeMessage(r,a):new Ve.DatabaseError(a,r,s);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};Zm.Parser=fb});var pb=S(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.DatabaseError=qs.serialize=qs.parse=void 0;var BEe=ob();Object.defineProperty(qs,"DatabaseError",{enumerable:!0,get:function(){return BEe.DatabaseError}});var HEe=ZH();Object.defineProperty(qs,"serialize",{enumerable:!0,get:function(){return HEe.serialize}});var jEe=nj();function VEe(t,e){let r=new jEe.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}qs.parse=VEe});var sj=S(hb=>{"use strict";Object.defineProperty(hb,"__esModule",{value:!0});hb.default={}});var oj=S((_1e,ij)=>{var{getStream:WEe,getSecureStream:zEe}=QEe();ij.exports={getStream:WEe,getSecureStream:zEe};function GEe(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function KEe(){function t(r){let{CloudflareSocket:n}=sj();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function XEe(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function QEe(){return XEe()?KEe():GEe()}});var gb=S((v1e,aj)=>{"use strict";var YEe=require("events").EventEmitter,{parse:JEe,serialize:lt}=pb(),{getStream:ZEe,getSecureStream:eSe}=oj(),tSe=lt.flush(),rSe=lt.sync(),nSe=lt.end(),mb=class extends YEe{constructor(e){super(),e=e||{},this.stream=e.stream||ZEe(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(i){n._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||n.emit("error",i)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=eSe(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){JEe(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(lt.requestSsl())}startup(e){this.stream.write(lt.startup(e))}cancel(e,r){this._send(lt.cancel(e,r))}password(e){this._send(lt.password(e))}sendSASLInitialResponseMessage(e,r){this._send(lt.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(lt.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(lt.query(e))}parse(e){this._send(lt.parse(e))}bind(e){this._send(lt.bind(e))}execute(e){this._send(lt.execute(e))}flush(){this.stream.writable&&this.stream.write(tSe)}sync(){this._ending=!0,this._send(rSe)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(nSe,()=>{this.stream.end()})}close(e){this._send(lt.close(e))}describe(e){this._send(lt.describe(e))}sendCopyFromChunk(e){this._send(lt.copyData(e))}endCopyFrom(){this._send(lt.copyDone())}sendCopyFail(e){this._send(lt.copyFail(e))}};aj.exports=mb});var dj=S((w1e,lj)=>{"use strict";var{Transform:sSe}=require("stream"),{StringDecoder:iSe}=require("string_decoder"),$s=Symbol("last"),eg=Symbol("decoder");function oSe(t,e,r){let n;if(this.overflow){if(n=this[eg].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[$s]+=this[eg].write(t),n=this[$s].split(this.matcher);this[$s]=n.pop();for(let s=0;s<n.length;s++)try{uj(this,this.mapper(n[s]))}catch(i){return r(i)}if(this.overflow=this[$s].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function aSe(t){if(this[$s]+=this[eg].end(),this[$s])try{uj(this,this.mapper(this[$s]))}catch(e){return t(e)}t()}function uj(t,e){e!==void 0&&t.push(e)}function cj(t){return t}function cSe(t,e,r){switch(t=t||/\r?\n/,e=e||cj,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=cj)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=oSe,r.flush=aSe,r.readableObjectMode=!0;let n=new sSe(r);return n[$s]="",n[eg]=new iSe("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,i){this._writableState.errorEmitted=!1,i(s)},n}lj.exports=cSe});var hj=S((b1e,jn)=>{"use strict";var fj=require("path"),uSe=require("stream").Stream,lSe=dj(),pj=require("util"),dSe=5432,tg=process.platform==="win32",Ju=process.stderr,fSe=56,pSe=7,hSe=61440,mSe=32768;function gSe(t){return(t&hSe)==mSe}var ya=["host","port","database","user","password"],yb=ya.length,ySe=ya[yb-1];function Eb(){var t=Ju instanceof uSe&&Ju.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Ju.write(pj.format.apply(pj,e))}}Object.defineProperty(jn.exports,"isWin",{get:function(){return tg},set:function(t){tg=t}});jn.exports.warnTo=function(t){var e=Ju;return Ju=t,e};jn.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(tg?fj.join(e.APPDATA||"./","postgresql","pgpass.conf"):fj.join(e.HOME||"./",".pgpass"));return r};jn.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:tg?!0:(e=e||"<unkn>",gSe(t.mode)?t.mode&(fSe|pSe)?(Eb('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(Eb('WARNING: password file "%s" is not a plain file',e),!1))};var ESe=jn.exports.match=function(t,e){return ya.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||dSe)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};jn.exports.getPassword=function(t,e,r){var n,s=e.pipe(lSe());function i(c){var u=SSe(c);u&&_Se(u)&&ESe(t,u)&&(n=u[ySe],s.end())}var o=function(){e.destroy(),r(n)},a=function(c){e.destroy(),Eb("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",i).on("end",o).on("error",a)};var SSe=jn.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,i=0,o={},a=!1,c=function(l,d,m){var g=t.substring(d,m);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),o[ya[l]]=g},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==yb-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return o=Object.keys(o).length===yb?o:null,o},_Se=jn.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<ya.length;r+=1){var n=e[r],s=t[ya[r]]||"",i=n(s);if(!i)return!1}return!0}});var gj=S((C1e,Sb)=>{"use strict";var R1e=require("path"),mj=require("fs"),rg=hj();Sb.exports=function(t,e){var r=rg.getFileName();mj.stat(r,function(n,s){if(n||!rg.usePgPass(s,r))return e(void 0);var i=mj.createReadStream(r);rg.getPassword(t,i,e)})};Sb.exports.warnTo=rg.warnTo});var _j=S((A1e,Sj)=>{"use strict";var vSe=require("events").EventEmitter,yj=fa(),_b=qH(),wSe=Km(),bSe=H0(),Ej=QH(),RSe=Qu(),CSe=gb(),ASe=F0(),ng=class extends vSe{constructor(e){super(),this.connectionParameters=new bSe(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};this._Promise=r.Promise||global.Promise,this._types=new wSe(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new CSe({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||RSe.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{gj()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await ASe.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=_b.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await _b.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{_b.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return yj.escapeIdentifier(e)}escapeLiteral(e){return yj.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){let s,i,o,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,i=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(o=e.query_timeout||this.connectionParameters.query_timeout,s=new Ej(e,r,n),s.callback||(i=new this._Promise((u,l)=>{s.callback=(d,m)=>d?l(d):u(m)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},o),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(s),this._pulseQueryQueue(),i):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};ng.Query=Ej;Sj.exports=ng});var Rj=S((T1e,bj)=>{"use strict";var TSe=require("events").EventEmitter,vj=function(){},wj=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},vb=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},Ea=class{constructor(e){this.callback=e}};function PSe(){throw new Error("Release called on client which has already been released to the pool.")}function sg(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(o,a){o?r(o):n(a)},i=new t(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:s,result:i}}function xSe(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var wb=class extends TSe{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||bb().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=wj(this._idle,i=>i.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(i=>i!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=sg(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Ea(r.callback)),n;let s=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new Ea(s),o=setTimeout(()=>{wj(this._pendingQueue,a=>a.callback===s),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),n}return this.newClient(new Ea(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=xSe(this,r);this.log("checking client timeout");let s,i=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(s&&clearTimeout(s),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,vj);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Ea((u,l,d)=>d()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,vj);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&PSe(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new vb(e,r,i)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let i=sg(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(n=r,r=void 0);let s=sg(this.Promise,n);return n=s.callback,this.connect((i,o)=>{if(i)return n(i);let a=!1,c=u=>{a||(a=!0,o.release(u),n(u))};o.once("error",c),this.log("dispatching query");try{o.query(e,r,(u,l)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?n(u):n(void 0,l)})}catch(u){return o.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=sg(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};bj.exports=wb});var Tj=S((P1e,Aj)=>{"use strict";var Cj=require("events").EventEmitter,ISe=require("util"),Rb=fa(),Sa=Aj.exports=function(t,e,r){Cj.call(this),t=Rb.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};ISe.inherits(Sa,Cj);var OSe={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};Sa.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=OSe[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};Sa.prototype.then=function(t,e){return this._getPromise().then(t,e)};Sa.prototype.catch=function(t){return this._getPromise().catch(t)};Sa.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};Sa.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,i){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(i.length>1?s.forEach((o,a)=>{o.forEach(c=>{e.emit("row",c,i[a])})}):s.forEach(function(o){e.emit("row",o,i)})),e.state="end",e.emit("end",i),e.callback&&e.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(Rb.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(Rb.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var Nj=S((x1e,Oj)=>{"use strict";var Pj;try{Pj=require("pg-native")}catch(t){throw t}var NSe=Km(),xj=require("events").EventEmitter,DSe=require("util"),LSe=H0(),Ij=Tj(),Zt=Oj.exports=function(t){xj.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new NSe(t.types),this.native=new Pj({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new LSe(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};Zt.Query=Ij;DSe.inherits(Zt,xj);Zt.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};Zt.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};Zt.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};Zt.prototype.query=function(t,e,r){let n,s,i,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(i=t.query_timeout||this.connectionParameters.query_timeout,n=new Ij(t,e,r),!n.callback){let c,u;s=new this._Promise((l,d)=>{c=l,u=d}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,d)=>l?u(l):c(d)}return i&&(a=n.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};Zt.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=i=>i?s(i):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};Zt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Zt.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};Zt.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};Zt.prototype.ref=function(){};Zt.prototype.unref=function(){};Zt.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};Zt.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var Cb=S((I1e,Dj)=>{"use strict";Dj.exports=Nj()});var bb=S((N1e,Zu)=>{"use strict";var MSe=_j(),kSe=Qu(),qSe=gb(),$Se=V0(),FSe=fa(),USe=Rj(),BSe=Km(),{DatabaseError:HSe}=pb(),{escapeIdentifier:jSe,escapeLiteral:VSe}=fa(),WSe=t=>class extends USe{constructor(r){super(r,t)}},Ab=function(t){this.defaults=kSe,this.Client=t,this.Query=this.Client.Query,this.Pool=WSe(this.Client),this._pools=[],this.Connection=qSe,this.types=Xu(),this.DatabaseError=HSe,this.TypeOverrides=BSe,this.escapeIdentifier=jSe,this.escapeLiteral=VSe,this.Result=$Se,this.utils=FSe};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Zu.exports=new Ab(Cb()):(Zu.exports=new Ab(MSe),Object.defineProperty(Zu.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new Ab(Cb())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Zu.exports,"native",{value:t}),t}}))});var h_e={};xt(h_e,{handler:()=>ZSe});module.exports=re(h_e);var og=A(Wk());var jm=require("aws-sdk");var Hv={PRETTY:4,COMPACT:0};var _e={TRACE:6,DEBUG:8,INFO:12,WARN:16,ERROR:20,CRITICAL:24,SILENT:28},zk=["level","message","sampling_rate","service","timestamp"],Gk="Uncaught error detected, flushing log buffer before exit";var Kk="POWERTOOLS_DEV",Xk="POWERTOOLS_SERVICE_NAME",Qk="_X_AMZN_TRACE_ID";var et=({key:t,defaultValue:e,errorMessage:r})=>{let n=process.env[t];if(n===void 0){if(e!==void 0)return e;throw r?new Error(r):new Error(`Environment variable ${t} is required`)}return n.trim()},Yk=({key:t,defaultValue:e,errorMessage:r})=>{let n=et({key:t,defaultValue:String(e),errorMessage:r}),s=Number(n);if(Number.isNaN(s))throw new TypeError(`Environment variable ${t} must be a number`);return s},Mce=new Set(["1","y","yes","t","true","on"]),kce=new Set(["0","n","no","f","false","off"]),jv=({key:t,defaultValue:e,errorMessage:r,extendedParsing:n})=>{let i=et({key:t,defaultValue:String(e),errorMessage:r}).toLowerCase();if(n){if(Mce.has(i))return!0;if(kce.has(i))return!1}if(i!=="true"&&i!=="false")throw new Error(`Environment variable ${t} must be a boolean`);return i==="true"},nu=()=>{try{return jv({key:Kk,extendedParsing:!0})}catch{return!1}},Jk=()=>et({key:Xk,defaultValue:""}),Zk=()=>{let t=et({key:Qk,defaultValue:""});if(t==="")return;if(!t.includes("="))return{Root:t};let e={};for(let r of t.split(";")){let[n,s]=r.split("=");e[n]=s}return e},eq=()=>Zk()?.Sampled==="1",Dn=()=>Zk()?.Root;var Lh,Mh,tq,su=class{constructor(){Ce(this,Mh);Ce(this,Lh,e=>{let r="2-digit",n=Intl.supportedValuesOf("timeZone").includes(e)?e:"UTC";return new Intl.DateTimeFormat("en",{hourCycle:"h23",year:"numeric",month:r,day:r,hour:r,minute:r,second:r,timeZone:n})})}formatError(e){let{name:r,message:n,stack:s,cause:i,...o}=e,a={name:r,location:this.getCodeLocation(e.stack),message:n,stack:nu()&&typeof s=="string"?s?.split(`
`):s,cause:i instanceof Error?this.formatError(i):i};for(let c in e)typeof c=="string"&&!["name","message","stack","cause"].includes(c)&&(a[c]=o[c]);return a}formatTimestamp(e){let r="UTC",n=et({key:"TZ",defaultValue:""});return n&&!n.includes(r)?De(this,Mh,tq).call(this,e,n):e.toISOString()}getCodeLocation(e){if(!e)return"";let r=e.split(`
`),n=/\(([^()]*?):(\d+?):(\d+?)\)\\?$/;for(let s of r){let i=n.exec(s);if(Array.isArray(i))return`${i[1]}:${Number(i[2])}`}return""}};Lh=new WeakMap,Mh=new WeakSet,tq=function(e,r){let{year:n,month:s,day:i,hour:o,minute:a,second:c}=L(this,Lh).call(this,r).formatToParts(e).reduce((P,T)=>(P[T.type]=T.value,P),{}),u=`${n}-${s}-${i}T${o}:${a}:${c}`,l=-e.getTimezoneOffset(),d=l>=0?"+":"-",m=Math.abs(Math.floor(l/60)).toString().padStart(2,"0"),g=Math.abs(l%60).toString().padStart(2,"0"),E=e.getMilliseconds().toString().padStart(3,"0"),b=`${d}${m}:${g}`;return`${u}.${E}${b}`};var Iq=A(ew(),1);var Ko=class{constructor(e){f(this,"attributes",{});this.setAttributes(e.attributes)}addAttributes(e){return(0,Iq.default)(this.attributes,e),this}getAttributes(){return this.attributes}prepareForPrint(){this.attributes=this.removeEmptyKeys(this.getAttributes())}removeEmptyKeys(e){let r={};for(let n in e)e[n]!==void 0&&e[n]!==""&&e[n]!==null&&(r[n]=e[n]);return r}setAttributes(e){this.attributes=e}};var Fq=require("console"),Uq=require("crypto");var Ps="2.28.1";var tw=process.env.AWS_EXECUTION_ENV||"NA",xle={relation:"after",toMiddleware:"getUserAgentMiddleware",name:"addPowertoolsToUserAgent",tags:["POWERTOOLS","USER_AGENT"]},Oq=t=>typeof t=="object"&&t!==null&&"send"in t&&typeof t.send=="function"&&"config"in t&&t.config!==void 0&&typeof t.config=="object"&&t.config!==null&&"middlewareStack"in t&&t.middlewareStack!==void 0&&typeof t.middlewareStack=="object"&&t.middlewareStack!==null&&"identify"in t.middlewareStack&&typeof t.middlewareStack.identify=="function"&&"addRelativeTo"in t.middlewareStack&&typeof t.middlewareStack.addRelativeTo=="function",Ile=t=>e=>async r=>{let n=r.request.headers["user-agent"]||"";if(n.includes("PT/NO-OP")){let s=n.replace("PT/NO-OP",`PT/${t}/${Ps} PTEnv/${tw}`);return r.request.headers["user-agent"]=s,await e(r)}return n.includes("PT/")?await e(r):(r.request.headers["user-agent"]=n===""?`PT/${t}/${Ps} PTEnv/${tw}`:`${n} PT/${t}/${Ps} PTEnv/${tw}`,await e(r))},Ole=t=>{let e=!1;for(let r of t)r.includes("addPowertoolsToUserAgent")&&(e=!0);return e},rw=(t,e)=>{try{if(Oq(t)){if(Ole(t.middlewareStack.identify()))return;t.middlewareStack.addRelativeTo(Ile(e),xle)}else throw new Error("The client provided does not match the expected interface")}catch(r){console.warn("Failed to add user agent middleware",r)}};var Vh="powertools-for-aws",Nq=`${Vh}.tracer`,Dq=`${Vh}.metrics`,Lq=`${Vh}.logger`,Mq=`${Vh}.idempotency`;var nw=t=>typeof t=="string";var kq=t=>Object.is(t,null),sw=t=>kq(t)||Object.is(t,void 0);var Xo,Si=class{constructor(){Ce(this,Xo);f(this,"coldStart",!0);f(this,"defaultServiceName","service_undefined");st(this,Xo,this.getInitializationType()),L(this,Xo)!=="on-demand"&&(this.coldStart=!1)}getInitializationType(){let e=process.env.AWS_LAMBDA_INITIALIZATION_TYPE?.trim();return e==="on-demand"?"on-demand":e==="provisioned-concurrency"?"provisioned-concurrency":"unknown"}getColdStart(){return L(this,Xo)!=="on-demand"?!1:this.coldStart?(this.coldStart=!1,!0):!1}isValidServiceName(e){return typeof e=="string"&&e.trim().length>0}};Xo=new WeakMap;var qq=process.env.AWS_EXECUTION_ENV||"NA";process.env.AWS_SDK_UA_APP_ID?process.env.AWS_SDK_UA_APP_ID=`${process.env.AWS_SDK_UA_APP_ID}/PT/NO-OP/${Ps}/PTEnv/${qq}`:process.env.AWS_SDK_UA_APP_ID=`PT/NO-OP/${Ps}/PTEnv/${qq}`;var lu=A(ew(),1);var Qo,Wh=class extends su{constructor(r){super();Ce(this,Qo);st(this,Qo,r?.logRecordOrder)}formatAttributes(r,n){let s={level:r.logLevel,message:r.message,timestamp:this.formatTimestamp(r.timestamp),service:r.serviceName,cold_start:r.lambdaContext?.coldStart,function_arn:r.lambdaContext?.invokedFunctionArn,function_memory_size:r.lambdaContext?.memoryLimitInMB,function_name:r.lambdaContext?.functionName,function_request_id:r.lambdaContext?.awsRequestId,sampling_rate:r.sampleRateValue,xray_trace_id:r.xRayTraceId};if(L(this,Qo)===void 0)return new Ko({attributes:s}).addAttributes(n);let i={};for(let a of L(this,Qo))a in s&&!(a in i)?i[a]=s[a]:a in n&&!(a in i)&&(i[a]=n[a]);for(let a in s)a in i||(i[a]=s[a]);for(let a in n)a in i||(i[a]=n[a]);return new Ko({attributes:i})}};Qo=new WeakMap;var iw=class{constructor(e,r){f(this,"value");f(this,"logLevel");f(this,"byteSize");if(!nw(e))throw new Error("Value should be a string");this.value=e,this.logLevel=r,this.byteSize=Buffer.byteLength(e)}},ow=class extends Set{constructor(){super(...arguments);f(this,"currentBytesSize",0);f(this,"hasEvictedLog",!1)}add(r){return this.currentBytesSize+=r.byteSize,super.add(r),this}delete(r){let n=super.delete(r);return n&&(this.currentBytesSize-=r.byteSize),n}clear(){super.clear(),this.currentBytesSize=0}shift(){let r=this.values().next().value;return r&&this.delete(r),r}},_i,Yo,Gh,$q,zh=class extends Map{constructor({maxBytesSize:r,onBufferOverflow:n}){super();Ce(this,Gh);Ce(this,_i);Ce(this,Yo);st(this,_i,r),st(this,Yo,n)}setItem(r,n,s){let i=new iw(n,s);if(i.byteSize>L(this,_i))throw new Error("Item too big");let o=this.get(r)||new ow;return o.currentBytesSize+i.byteSize>=L(this,_i)&&(De(this,Gh,$q).call(this,o,i),L(this,Yo)&&L(this,Yo).call(this)),o.add(i),super.set(r,o),this}};_i=new WeakMap,Yo=new WeakMap,Gh=new WeakSet,$q=function(r,n){for(;r.currentBytesSize+n.byteSize>=L(this,_i);)r.shift(),r.hasEvictedLog=!0};var $r,Jo,hu,Fr,xs,vi,nt,sn,wi,kn,mu,Re,du,aw,Bq,Hq,jq,Vq,cw,fu,Wq,uw=class uw extends Si{constructor(r={}){super();Ce(this,Re);f(this,"console");f(this,"customConfigService");f(this,"logEvent",!1);f(this,"logFormatter");f(this,"logIndentation",Hv.COMPACT);f(this,"logLevel",_e.INFO);Ce(this,$r);f(this,"persistentLogAttributes",{});f(this,"powertoolsLogData",{sampleRateValue:0});f(this,"temporaryLogAttributes",{});Ce(this,Jo,[]);Ce(this,hu,!1);Ce(this,Fr,new Map);Ce(this,xs,_e.INFO);Ce(this,vi);Ce(this,nt,{enabled:!1,flushOnErrorLog:!0,maxBytes:20480,bufferAtVerbosity:_e.DEBUG});Ce(this,sn);Ce(this,wi);Ce(this,kn,{sampleRateValue:0,refreshedTimes:0});Ce(this,mu,new Map);let{customConfigService:n,...s}=r;this.customConfigService=n||void 0,this.setOptions(s),st(this,hu,!0);for(let[i,o]of L(this,Jo))this.printLog(i,this.createAndPopulateLogItem(...o));st(this,Jo,[])}get level(){return this.logLevel}addContext(r){this.addToPowertoolsLogData({lambdaContext:{invokedFunctionArn:r.invokedFunctionArn,coldStart:this.getColdStart(),awsRequestId:r.awsRequestId,memoryLimitInMB:r.memoryLimitInMB,functionName:r.functionName,functionVersion:r.functionVersion}})}addPersistentLogAttributes(r){this.appendPersistentKeys(r)}appendKeys(r){De(this,Re,aw).call(this,r,"temp")}appendPersistentKeys(r){De(this,Re,aw).call(this,r,"persistent")}createChild(r={}){let n=this.createLogger((0,lu.default)({},{logLevel:this.getLevelName(),serviceName:this.powertoolsLogData.serviceName,sampleRateValue:L(this,kn).sampleRateValue,logFormatter:this.getLogFormatter(),customConfigService:this.getCustomConfigService(),environment:this.powertoolsLogData.environment,persistentLogAttributes:this.persistentLogAttributes,jsonReplacerFn:L(this,vi),correlationIdSearchFn:L(this,wi),...L(this,nt).enabled&&{logBufferOptions:{maxBytes:L(this,nt).maxBytes,bufferAtVerbosity:this.getLogLevelNameFromNumber(L(this,nt).bufferAtVerbosity),flushOnErrorLog:L(this,nt).flushOnErrorLog}}},r));return this.powertoolsLogData.lambdaContext&&n.addContext(this.powertoolsLogData.lambdaContext),this.temporaryLogAttributes&&n.appendKeys(this.temporaryLogAttributes),n}critical(r,...n){this.processLogItem(_e.CRITICAL,r,n)}debug(r,...n){this.processLogItem(_e.DEBUG,r,n)}error(r,...n){L(this,nt).enabled&&L(this,nt).flushOnErrorLog&&this.flushBuffer(),this.processLogItem(_e.ERROR,r,n)}getLevelName(){return this.getLogLevelNameFromNumber(this.logLevel)}getLogEvent(){return this.logEvent}getPersistentLogAttributes(){return this.persistentLogAttributes}info(r,...n){this.processLogItem(_e.INFO,r,n)}injectLambdaContext(r){return(n,s,i)=>{let o=i.value,a=this;i.value=async function(...c){a.refreshSampleRateCalculation(),a.addContext(c[1]),a.logEventIfEnabled(c[0],r?.logEvent),r?.correlationIdPath&&a.setCorrelationId(c[0],r?.correlationIdPath);try{return await o.apply(this,c)}catch(u){throw r?.flushBufferOnUncaughtError&&(a.flushBuffer(),a.error({message:Gk,error:u})),u}finally{(r?.clearState||r?.resetKeys)&&a.resetKeys(),a.clearBuffer()}}}}static injectLambdaContextAfterOrOnError(r,n,s){s&&(s.clearState||s?.resetKeys)&&r.resetKeys()}static injectLambdaContextBefore(r,n,s,i){r.addContext(s),r.logEventIfEnabled(n,i?.logEvent)}logEventIfEnabled(r,n){this.shouldLogEvent(n)&&this.info("Lambda invocation event",{event:r})}refreshSampleRateCalculation(){if(L(this,kn).refreshedTimes===0){L(this,kn).refreshedTimes++;return}De(this,Re,cw).call(this)&&this.logLevel>_e.TRACE?(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate")):this.setLogLevel(this.getLogLevelNameFromNumber(L(this,xs)))}removeKeys(r){for(let n of r)this.temporaryLogAttributes[n]=void 0,this.persistentLogAttributes[n]?L(this,Fr).set(n,"persistent"):L(this,Fr).delete(n)}removePersistentKeys(r){for(let n of r)this.persistentLogAttributes[n]=void 0,this.temporaryLogAttributes[n]?L(this,Fr).set(n,"temp"):L(this,Fr).delete(n)}removePersistentLogAttributes(r){this.removePersistentKeys(r)}resetKeys(){for(let r of Object.keys(this.temporaryLogAttributes))this.persistentLogAttributes[r]?L(this,Fr).set(r,"persistent"):L(this,Fr).delete(r);this.temporaryLogAttributes={}}setLogLevel(r){if(!this.awsLogLevelShortCircuit(r))if(this.isValidLogLevel(r))this.logLevel=_e[r];else throw new Error(`Invalid log level: ${r}`)}setPersistentLogAttributes(r){this.persistentLogAttributes=r}shouldLogEvent(r){return typeof r=="boolean"?r:this.getLogEvent()}trace(r,...n){this.processLogItem(_e.TRACE,r,n)}warn(r,...n){this.processLogItem(_e.WARN,r,n)}createLogger(r){return new uw(r)}getJsonReplacer(){let r=new WeakSet;return(n,s)=>{var o;let i=s;if(L(this,vi)&&(i=(o=L(this,vi))==null?void 0:o.call(this,n,i)),i instanceof Error&&(i=this.getLogFormatter().formatError(i)),typeof i=="bigint")return i.toString();if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return i}}addToPowertoolsLogData(r){(0,lu.default)(this.powertoolsLogData,r)}awsLogLevelShortCircuit(r){return L(this,$r)!==void 0?(this.logLevel=_e[L(this,$r)],this.isValidLogLevel(r)&&this.logLevel>_e[r]&&De(this,Re,du).call(this,`Current log level (${r}) does not match AWS Lambda Advanced Logging Controls minimum log level (${L(this,$r)}). This can lead to data loss, consider adjusting them.`),!0):!1}createAndPopulateLogItem(r,n,s){let i={logLevel:this.getLogLevelNameFromNumber(r),timestamp:new Date,xRayTraceId:Dn(),...this.getPowertoolsLogData(),message:""},o=De(this,Re,Bq).call(this);return De(this,Re,Hq).call(this,n,i,o),De(this,Re,jq).call(this,s,o),this.getLogFormatter().formatAttributes(i,o)}getCustomConfigService(){return this.customConfigService}getLogFormatter(){return this.logFormatter}getLogLevelNameFromNumber(r){let n;for(let[s,i]of Object.entries(_e))if(i===r){n=s;break}return n}getPowertoolsLogData(){return this.powertoolsLogData}isValidLogLevel(r){return typeof r=="string"&&r in _e}isValidSampleRate(r){return typeof r=="number"&&0<=r&&r<=1}printLog(r,n){n.prepareForPrint();let s=r===_e.CRITICAL?"error":this.getLogLevelNameFromNumber(r).toLowerCase();this.console[s](JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation))}processLogItem(r,n,s){let i=Dn();if(i!==void 0&&this.shouldBufferLog(i,r)){try{this.bufferLogItem(i,this.createAndPopulateLogItem(r,n,s),r)}catch(o){this.printLog(_e.WARN,this.createAndPopulateLogItem(_e.WARN,`Unable to buffer log: ${o.message}`,[o])),this.printLog(r,this.createAndPopulateLogItem(r,n,s))}return}r>=this.logLevel&&(L(this,hu)?this.printLog(r,this.createAndPopulateLogItem(r,n,s)):L(this,Jo).push([r,[r,n,s]]))}setConsole(){nu()?this.console=console:this.console=new Fq.Console({stdout:process.stdout,stderr:process.stderr}),this.console.trace=(r,...n)=>{this.console.log(r,...n)}}setInitialLogLevel(r){let n=r?.toUpperCase();if(this.awsLogLevelShortCircuit(n)){st(this,xs,this.logLevel);return}if(this.isValidLogLevel(n)){this.logLevel=_e[n],st(this,xs,this.logLevel);return}let s=this.getCustomConfigService()?.getLogLevel()?.toUpperCase();if(this.isValidLogLevel(s)){this.logLevel=_e[s],st(this,xs,this.logLevel);return}let i=et({key:"POWERTOOLS_LOG_LEVEL",defaultValue:""}),o=et({key:"LOG_LEVEL",defaultValue:""}),a=i!==""?i:o;this.isValidLogLevel(a)&&(this.logLevel=_e[a],st(this,xs,this.logLevel))}setInitialSampleRate(r){let n=r,s=this.getCustomConfigService()?.getSampleRateValue(),i=Yk({key:"POWERTOOLS_LOGGER_SAMPLE_RATE",defaultValue:0});for(let o of[n,s,i])if(this.isValidSampleRate(o)){L(this,kn).sampleRateValue=o,this.powertoolsLogData.sampleRateValue=o,De(this,Re,cw).call(this)&&this.logLevel>_e.TRACE&&(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate"));break}}setLogEvent(){this.logEvent=jv({key:"POWERTOOLS_LOGGER_LOG_EVENT",defaultValue:!1})}setLogFormatter(r,n){this.logFormatter=r??new Wh({logRecordOrder:n})}setLogIndentation(){nu()&&(this.logIndentation=Hv.PRETTY)}setOptions(r){let{logLevel:n,serviceName:s,sampleRateValue:i,logFormatter:o,persistentKeys:a,persistentLogAttributes:c,environment:u,jsonReplacerFn:l,logRecordOrder:d,logBufferOptions:m,correlationIdSearchFn:g}=r;c&&Object.keys(c).length>0&&a&&Object.keys(a).length>0&&this.warn("Both persistentLogAttributes and persistentKeys options were provided. Using persistentKeys as persistentLogAttributes is deprecated and will be removed in future releases"),this.setPowertoolsLogData(s,u,a||c);let E=et({key:"AWS_LAMBDA_LOG_LEVEL",defaultValue:""}),b=E==="FATAL"?"CRITICAL":E;return this.isValidLogLevel(b)&&st(this,$r,b),this.setLogEvent(),this.setInitialLogLevel(n),this.setInitialSampleRate(i),this.setLogFormatter(o,d),this.setConsole(),this.setLogIndentation(),st(this,vi,l),De(this,Re,Wq).call(this,m),st(this,wi,g),this}setPowertoolsLogData(r,n,s){this.addToPowertoolsLogData({awsRegion:et({key:"AWS_REGION",defaultValue:""}),environment:n||this.getCustomConfigService()?.getCurrentEnvironment()||et({key:"ENVIRONMENT",defaultValue:""}),serviceName:r||this.getCustomConfigService()?.getServiceName()||et({key:"POWERTOOLS_SERVICE_NAME",defaultValue:""})||this.defaultServiceName}),s&&this.appendPersistentKeys(s)}bufferLogItem(r,n,s){n.prepareForPrint(),L(this,sn)?.has(r)===!1&&L(this,sn)?.clear(),L(this,sn)?.setItem(r,JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation),s)}flushBuffer(){let r=Dn();if(r===void 0)return;let n=L(this,sn)?.get(r);if(n!==void 0){for(let s of n){let i=this.getLogLevelNameFromNumber(s.logLevel).toLowerCase();this.console[i](s.value)}n.hasEvictedLog&&this.printLog(_e.WARN,this.createAndPopulateLogItem(_e.WARN,"Some logs are not displayed because they were evicted from the buffer. Increase buffer size to store more logs in the buffer",[])),L(this,$r)!==void 0&&_e[L(this,$r)]>L(this,nt).bufferAtVerbosity&&De(this,Re,du).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Some logs might be missing."),L(this,sn)?.delete(r)}}clearBuffer(){let r=Dn();r!==void 0&&L(this,sn)?.delete(r)}shouldBufferLog(r,n){return L(this,nt).enabled&&r!==void 0&&n<=L(this,nt).bufferAtVerbosity}setCorrelationId(r,n){if(typeof n=="string"){if(!L(this,wi)){De(this,Re,du).call(this,"correlationIdPath is set but no search function was provided. The correlation ID will not be added to the log attributes.");return}let s=L(this,wi).call(this,n,r);s&&this.appendKeys({correlation_id:s});return}this.appendKeys({correlation_id:r})}getCorrelationId(){return this.temporaryLogAttributes.correlation_id}};$r=new WeakMap,Jo=new WeakMap,hu=new WeakMap,Fr=new WeakMap,xs=new WeakMap,vi=new WeakMap,nt=new WeakMap,sn=new WeakMap,wi=new WeakMap,kn=new WeakMap,mu=new WeakMap,Re=new WeakSet,du=function(r){L(this,mu).has(r)||(L(this,mu).set(r,!0),this.warn(r))},aw=function(r,n){for(let s of Object.keys(r))De(this,Re,fu).call(this,s)===!1&&L(this,Fr).set(s,n);n==="temp"?(0,lu.default)(this.temporaryLogAttributes,r):(0,lu.default)(this.persistentLogAttributes,r)},Bq=function(){let r={};for(let[n,s]of L(this,Fr))De(this,Re,fu).call(this,n)||(r[n]=s==="persistent"?this.persistentLogAttributes[n]:this.temporaryLogAttributes[n]);return r},Hq=function(r,n,s){if(typeof r=="string"){n.message=r;return}let{message:i,...o}=r;n.message=i;for(let[a,c]of Object.entries(o))De(this,Re,fu).call(this,a)||(s[a]=c)},jq=function(r,n){for(let s of r)sw(s)||(s instanceof Error?n.error=s:typeof s=="string"?n.extra=s:De(this,Re,Vq).call(this,s,n))},Vq=function(r,n){for(let[s,i]of Object.entries(r))De(this,Re,fu).call(this,s)||(n[s]=i)},cw=function(){return L(this,kn).sampleRateValue&&(0,Uq.randomInt)(0,100)/100<=L(this,kn).sampleRateValue},fu=function(r){return zk.includes(r)?(this.warn(`The key "${r}" is a reserved key and will be dropped.`),!0):!1},Wq=function(r){if(r===void 0||(L(this,nt).enabled=r?.enabled!==!1,L(this,nt).enabled===!1))return;r?.maxBytes!==void 0&&(L(this,nt).maxBytes=r.maxBytes),st(this,sn,new zh({maxBytesSize:L(this,nt).maxBytes})),r?.flushOnErrorLog===!1&&(L(this,nt).flushOnErrorLog=!1);let n=r?.bufferAtVerbosity?.toUpperCase();this.isValidLogLevel(n)&&(L(this,nt).bufferAtVerbosity=_e[n]),L(this,$r)!==void 0&&_e[L(this,$r)]>L(this,nt).bufferAtVerbosity&&De(this,Re,du).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Buffered logs will be filtered by ALC")};var pu=uw;Zo();var ea=class t{constructor(e,r){this.logger=new pu({serviceName:e||process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",logLevel:process.env.LOG_LEVEL||"INFO",sampleRateValue:.1}),this.context={traceId:r?.traceId||on(),...r},this.context.agent&&this.logger.appendKeys({agent:this.context.agent}),this.context.leadId&&this.logger.appendKeys({leadId:this.context.leadId}),this.context.tenantId&&this.logger.appendKeys({tenantId:this.context.tenantId})}getTraceId(){return this.context.traceId||""}setTraceId(e){this.context.traceId=e}getContext(){return{...this.context}}updateContext(e){this.context={...this.context,...e};let r={};e.agent&&(r.agent=e.agent),e.leadId&&(r.leadId=e.leadId),e.tenantId&&(r.tenantId=e.tenantId),e.campaignId&&(r.campaignId=e.campaignId),Object.keys(r).length>0&&this.logger.appendKeys(r)}info(e,r){this.logger.info(e,{trace_id:this.context.traceId,...r})}warn(e,r){this.logger.warn(e,{trace_id:this.context.traceId,...r})}error(e,r,n){let s=r?{error:{name:r.name,message:r.message,stack:r.stack}}:{};this.logger.error(e,{trace_id:this.context.traceId,...s,...n})}debug(e,r){this.logger.debug(e,{trace_id:this.context.traceId,...r})}appendKeys(e){this.logger.appendKeys(e)}removeKeys(e){this.logger.removeKeys(e)}createChild(e){return new t(process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",{...this.context,...e})}logCustomMetric(e,r,n){this.info(`Custom metric: ${e}`,{metric:e,value:r,...n})}logApiRequest(e,r,n){this.info(`API Request: ${e} ${r}`,{method:e,path:r,...n})}finishOperation(e,r){e?this.info("Operation completed successfully",r):this.error("Operation failed",void 0,r)}};function v$(t,e){return new ea(t,e)}var UNe=new ea;Zo();var H2=A(v0(),1);var F2=A(v0(),1),Fm=require("diagnostics_channel"),U2=A(require("http"),1),B2=A(require("https"),1);var w0=require("url"),L2=new TextDecoder,M2=(t,e)=>{let r=-1;for(let n=0;n<t.length;n+=2)if(L2.decode(t[n]).toLowerCase()===e){r=n;break}return r===-1?null:L2.decode(t[r+1])},b0=t=>t!==void 0&&"http"in t&&"parent"in t&&"namespace"in t&&t.namespace==="remote",k2=t=>{if(typeof t.origin=="string")return new w0.URL(`${t.origin}${t.path||""}`);if(t.origin instanceof w0.URL)return t.origin.pathname=t.path||"",t.origin};var{captureAWS:Ege,captureAWSClient:Sge,captureAWSv3Client:_ge,captureAsyncFunc:vge,captureFunc:wge,captureHTTPsGlobal:q2,getNamespace:bge,getSegment:Rge,setSegment:Cge,Segment:$2,setContextMissingStrategy:Age,setDaemonAddress:Tge,setLogger:Pge}=F2.default,Um=class{captureAWS(e){return Ege(e)}captureAWSClient(e){return Sge(e)}captureAWSv3Client(e){return rw(e,"tracer"),_ge(e)}captureAsyncFunc(e,r,n){return vge(e,r)}captureFunc(e,r,n){return wge(e,r)}captureHTTPsGlobal(){q2(U2.default),q2(B2.default)}getNamespace(){return bge()}getSegment(){return Rge()}instrumentFetch(){let e=s=>{let{request:i}=s,o=i.method;if(o==="CONNECT")return;let a=this.getSegment(),c=k2(i);if(a&&c){let u=a.addNewSubsegment(c.hostname);u.addAttribute("namespace","remote"),i.addHeader("X-Amzn-Trace-Id",`Root=${Dn()};Parent=${u.id};Sampled=${u.notTraced?"0":"1"}`),u.http={request:{url:`${c.protocol}//${c.hostname}${c.pathname}`,method:o}},this.setSegment(u)}},r=s=>{let{response:i}=s,o=this.getSegment();if(b0(o)){let a=i.statusCode,c=M2(i.headers,"content-length");o.http={...o.http,response:{status:a,...c&&{content_length:Number.parseInt(c,10)}}},a===429&&o.addThrottleFlag(),a>=400&&a<500?o.addErrorFlag():a>=500&&a<600&&o.addFaultFlag(),o.close(),this.setSegment(o.parent)}},n=s=>{let{error:i}=s,o=this.getSegment();b0(o)&&(o.addErrorFlag(),i instanceof Error&&o.addError(i,!0),o.close(),this.setSegment(o.parent))};(0,Fm.subscribe)("undici:request:create",e),(0,Fm.subscribe)("undici:request:headers",r),(0,Fm.subscribe)("undici:request:error",n)}putAnnotation(e,r){let n=this.getSegment();if(n===void 0){console.warn("No active segment or subsegment found, skipping annotation");return}if(n instanceof $2){console.warn("You cannot annotate the main segment in a Lambda execution environment");return}n.addAnnotation(e,r)}putMetadata(e,r,n){let s=this.getSegment();if(s===void 0){console.warn("No active segment or subsegment found, skipping metadata addition");return}if(s instanceof $2){console.warn("You cannot add metadata to the main segment in a Lambda execution environment");return}s.addMetadata(e,r,n)}setContextMissingStrategy(e){Age(e)}setDaemonAddress(e){Tge(e)}setLogger(e){Pge(e)}setSegment(e){Cge(e)}};(process.env.AWS_XRAY_CONTEXT_MISSING===""||process.env.AWS_XRAY_CONTEXT_MISSING===void 0)&&(process.env.AWS_XRAY_CONTEXT_MISSING="IGNORE_ERROR");var{Subsegment:xge}=H2.default,tt,Bm,j2,Hu=class extends Si{constructor(r={}){super();Ce(this,Bm);f(this,"provider");f(this,"captureError",!0);f(this,"captureHTTPsRequests",!0);f(this,"captureResponse",!0);f(this,"customConfigService");Ce(this,tt,{awsExecutionEnv:"",samLocal:"",captureError:"",captureHTTPsRequests:"",captureResponse:"",tracingEnabled:"",serviceName:""});f(this,"serviceName");f(this,"tracingEnabled",!0);De(this,Bm,j2).call(this),this.setOptions(r),this.provider=new Um,this.isTracingEnabled()&&this.captureHTTPsRequests&&(this.provider.captureHTTPsGlobal(),this.provider.instrumentFetch()),this.isTracingEnabled()||this.provider.setContextMissingStrategy(()=>({}))}addErrorAsMetadata(r,n){if(!this.isTracingEnabled())return;let s=this.getSegment();if(s!==void 0){if(!this.captureError){s.addErrorFlag();return}s.addError(r,n||!1)}}addResponseAsMetadata(r,n){r===void 0||!this.captureResponse||!this.isTracingEnabled()||this.putMetadata(`${n} response`,r)}addServiceNameAnnotation(){this.isTracingEnabled()&&this.putAnnotation("Service",this.serviceName)}annotateColdStart(){this.isTracingEnabled()&&this.putAnnotation("ColdStart",this.getColdStart())}captureAWS(r){return this.isTracingEnabled()?this.provider.captureAWS(r):r}captureAWSClient(r){if(!this.isTracingEnabled())return r;try{return this.provider.captureAWSClient(r)}catch(n){try{return this.provider.captureAWSClient(r.service),r}catch{throw n}}}captureAWSv3Client(r){return this.isTracingEnabled()?this.provider.captureAWSv3Client(r):r}captureLambdaHandler(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){return a.isTracingEnabled()?a.provider.captureAsyncFunc(`## ${process.env._HANDLER}`,async u=>{a.annotateColdStart(),a.addServiceNameAnnotation();let l;try{l=await o.apply(this,c),(r?.captureResponse??!0)&&a.addResponseAsMetadata(l,process.env._HANDLER)}catch(d){throw a.addErrorAsMetadata(d),d}finally{try{u?.close()}catch(d){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",u?.name,d)}}return l}):o.apply(this,c)},i}}captureMethod(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){if(!a.isTracingEnabled())return o.apply(this,[...c]);let u=String(s),l=r?.subSegmentName?r.subSegmentName:`### ${u}`;return a.provider.captureAsyncFunc(l,async d=>{let m;try{m=await o.apply(this,[...c]),(r?.captureResponse??!0)&&a.addResponseAsMetadata(m,u)}catch(g){throw a.addErrorAsMetadata(g),g}finally{try{d?.close()}catch(g){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",d?.name,g)}}return m})},i}}getRootXrayTraceId(){return Dn()}getSegment(){if(!this.isTracingEnabled())return new xge("## Dummy segment");let r=this.provider.getSegment();return r===void 0&&console.warn("Failed to get the current sub/segment from the context, this is likely because you are not using the Tracer in a Lambda function."),r}isTraceSampled(){return this.isTracingEnabled()?eq():!1}isTracingEnabled(){return this.tracingEnabled}putAnnotation(r,n){this.isTracingEnabled()&&this.provider.putAnnotation(r,n)}putMetadata(r,n,s){this.isTracingEnabled()&&this.provider.putMetadata(r,n,s||this.serviceName)}setSegment(r){this.isTracingEnabled()&&this.provider.setSegment(r)}getCustomConfigService(){return this.customConfigService}isAmplifyCli(){return L(this,tt).awsExecutionEnv==="AWS_Lambda_amplify-mock"}isLambdaExecutionEnv(){return L(this,tt).awsExecutionEnv!==""}isLambdaSamCli(){return L(this,tt).samLocal!==""}setCaptureError(){let r=this.getCustomConfigService()?.getTracingCaptureError();if(r!==void 0&&r.toLowerCase()==="false"){this.captureError=!1;return}if(L(this,tt).captureError.toLowerCase()==="false"){this.captureError=!1;return}}setCaptureHTTPsRequests(r){if(r!==void 0&&!r){this.captureHTTPsRequests=!1;return}let n=this.getCustomConfigService()?.getCaptureHTTPsRequests();if(n!==void 0&&n.toLowerCase()==="false"){this.captureHTTPsRequests=!1;return}L(this,tt).captureHTTPsRequests.toLowerCase()==="false"&&(this.captureHTTPsRequests=!1)}setCaptureResponse(){let r=this.getCustomConfigService()?.getTracingCaptureResponse();if(r!==void 0&&r.toLowerCase()==="false"){this.captureResponse=!1;return}if(L(this,tt).captureResponse.toLowerCase()==="false"){this.captureResponse=!1;return}}setCustomConfigService(r){this.customConfigService=r||void 0}setOptions(r){let{enabled:n,serviceName:s,captureHTTPsRequests:i,customConfigService:o}=r;return this.setCustomConfigService(o),this.setTracingEnabled(n),this.setCaptureResponse(),this.setCaptureError(),this.setServiceName(s),this.setCaptureHTTPsRequests(i),this}setServiceName(r){if(r!==void 0&&this.isValidServiceName(r)){this.serviceName=r;return}let n=this.getCustomConfigService()?.getServiceName();if(n!==void 0&&this.isValidServiceName(n)){this.serviceName=n;return}if(L(this,tt).serviceName!==void 0&&this.isValidServiceName(L(this,tt).serviceName)){this.serviceName=L(this,tt).serviceName;return}this.serviceName=this.defaultServiceName}setTracingEnabled(r){if(r!==void 0&&!r){this.tracingEnabled=r;return}let n=this.getCustomConfigService()?.getTracingEnabled();if(n!==void 0&&n.toLowerCase()==="false"){this.tracingEnabled=!1;return}if(L(this,tt).tracingEnabled.toLowerCase()==="false"){this.tracingEnabled=!1;return}(this.isAmplifyCli()||this.isLambdaSamCli()||!this.isLambdaExecutionEnv())&&(this.tracingEnabled=!1)}};tt=new WeakMap,Bm=new WeakSet,j2=function(){L(this,tt).awsExecutionEnv=et({key:"AWS_EXECUTION_ENV",defaultValue:""}),L(this,tt).samLocal=et({key:"AWS_SAM_LOCAL",defaultValue:""}),L(this,tt).captureError=et({key:"POWERTOOLS_TRACER_CAPTURE_ERROR",defaultValue:""}),L(this,tt).captureHTTPsRequests=et({key:"POWERTOOLS_TRACER_CAPTURE_HTTPS_REQUESTS",defaultValue:""}),L(this,tt).captureResponse=et({key:"POWERTOOLS_TRACER_CAPTURE_RESPONSE",defaultValue:""}),L(this,tt).tracingEnabled=et({key:"POWERTOOLS_TRACE_ENABLED",defaultValue:""}),L(this,tt).serviceName=Jk()};var Ige=new Hu({serviceName:process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service"});function ju(){try{return Ige.getSegment()}catch(t){console.warn("Failed to get X-Ray segment:",t);return}}function Oge(t,e,r){try{let n=ju();if(!n)return;let s=n.addNewSubsegment(t);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&s.addAnnotation(i,o);if(r)for(let[i,o]of Object.entries(r))s.addMetadata(i,o);return s}catch(n){console.warn("Failed to create X-Ray subsegment:",n);return}}function V2(t,e="success",r){if(t)try{t.addAnnotation("status",e),r&&(t.addError(r),t.addMetadata("error",{name:r.name,message:r.message,stack:r.stack})),t.close()}catch(n){console.warn("Failed to close X-Ray subsegment:",n)}}async function Nge(t,e,r,n){let s=Oge(t,r,n);try{let i=await e();return V2(s,"success"),i}catch(i){throw V2(s,"error",i),i}}function Ai(t){try{let e=ju();if(!e)return;for(let[r,n]of Object.entries(t))n!==void 0&&e.addAnnotation(r,n)}catch(e){console.warn("Failed to add X-Ray annotations:",e)}}function Hm(t,e){try{let r=ju();if(!r)return;if(e)r.addMetadata(e,t);else for(let[n,s]of Object.entries(t))r.addMetadata(n,s)}catch(r){console.warn("Failed to add X-Ray metadata:",r)}}async function W2(t,e,r){return Nge(`DB:${t}`,e,{operation:"database"},{queryParams:r})}var Dge=new jm.SQS,Lge=new jm.SNS;function Mge(t){let e=t.message.toLowerCase(),r=t.name.toLowerCase(),n=t.code,s=["timeout","econnrefused","econnreset","etimedout","enotfound","network","connection","throttl","rate limit","429","503","504","too many requests","service unavailable","gateway timeout"];for(let a of s)if(e.includes(a)||r.includes(a)||n===a)return{type:"transient",shouldRetry:!0,shouldAlert:!1};let i=["unauthorized","forbidden","access denied","authentication","security","corruption","integrity","out of memory","disk full","database corruption"];for(let a of i)if(e.includes(a)||r.includes(a))return{type:"critical",shouldRetry:!1,shouldAlert:!0};let o=["validation","invalid","not found","404","400","bad request","malformed","schema","parse error"];for(let a of o)if(e.includes(a)||r.includes(a)||n===a)return{type:"permanent",shouldRetry:!1,shouldAlert:!1};return{type:"permanent",shouldRetry:!1,shouldAlert:!1}}async function kge(t,e,r,n){let s=process.env.DLQ_URL;if(!s){console.warn("DLQ_URL not configured, skipping DLQ send");return}try{let i={originalEvent:t,error:{name:e.name,message:e.message,stack:e.stack},traceId:r,context:{functionName:n.functionName,functionVersion:n.functionVersion,requestId:n.awsRequestId,timestamp:new Date().toISOString()}};await Dge.sendMessage({QueueUrl:s,MessageBody:JSON.stringify(i),MessageAttributes:{traceId:{DataType:"String",StringValue:r},errorType:{DataType:"String",StringValue:e.name}}}).promise(),console.log("Message sent to DLQ",{traceId:r,dlqUrl:s})}catch(i){console.error("Failed to send message to DLQ",i)}}async function qge(t,e,r,n){let s=process.env.ALERT_TOPIC_ARN;if(!s){console.warn("ALERT_TOPIC_ARN not configured, skipping alert");return}try{let i={severity:"CRITICAL",service:r.functionName,error:{name:t.name,message:t.message,stack:t.stack},traceId:e,timestamp:new Date().toISOString(),requestId:r.awsRequestId,event:JSON.stringify(n).substring(0,500)};await Lge.publish({TopicArn:s,Subject:`\u{1F6A8} CRITICAL ERROR: ${r.functionName}`,Message:JSON.stringify(i,null,2),MessageAttributes:{severity:{DataType:"String",StringValue:"CRITICAL"},service:{DataType:"String",StringValue:r.functionName}}}).promise(),console.log("Critical alert sent",{traceId:e,alertTopicArn:s})}catch(i){console.error("Failed to send alert",i)}}function z2(t){return async(e,r)=>{let n=on(),s=v$(r.functionName,{traceId:n}),i=ju();Ai({traceId:n,functionName:r.functionName,requestId:r.awsRequestId});try{s.info("Processing event",{functionName:r.functionName});let o=await t(e,r,s);return Ai({status:"success"}),s.info("Event processed successfully"),o}catch(o){let a=o,c=Mge(a);throw Ai({status:"error",errorType:c.type,errorName:a.name}),Hm({error:{name:a.name,message:a.message,stack:a.stack,classification:c.type}},"error"),i&&i.addError(a),s.error("Event processing failed",a,{errorType:c.type}),c.shouldRetry||await kge(e,a,n,r),c.shouldAlert&&await qge(a,n,r,e),a}}}var Rr=A(bb(),1),D1e=Rr.default.Client,Lj=Rr.default.Pool,L1e=Rr.default.Connection,M1e=Rr.default.types,k1e=Rr.default.Query,q1e=Rr.default.DatabaseError,$1e=Rr.default.escapeIdentifier,F1e=Rr.default.escapeLiteral,U1e=Rr.default.Result,B1e=Rr.default.TypeOverrides,H1e=Rr.default.defaults;var Mj=require("aws-sdk");var Cr=new ea("database"),zSe=new Mj.SecretsManager,Tb=class{constructor(e){this.pool=null;this.credentials=null;this.secretArn=e||process.env.DB_SECRET_ARN||""}async getCredentials(){if(this.credentials)return this.credentials;try{Cr.info("Fetching database credentials from Secrets Manager",{secretArn:this.secretArn});let e=await zSe.getSecretValue({SecretId:this.secretArn}).promise();if(!e.SecretString)throw new Error("Secret string is empty");let r=JSON.parse(e.SecretString);return this.credentials={username:r.username,password:r.password,host:r.host,port:r.port||5432,dbname:r.dbname||"fibonacci"},Cr.info("Database credentials fetched successfully"),this.credentials}catch(e){throw Cr.error("Failed to fetch database credentials",e),e}}async initializePool(){if(this.pool)return this.pool;let e=await this.getCredentials();return Cr.info("Initializing database connection pool",{host:e.host,port:e.port,database:e.dbname}),this.pool=new Lj({user:e.username,password:e.password,host:e.host,port:e.port,database:e.dbname,max:10,idleTimeoutMillis:3e4,connectionTimeoutMillis:1e4,ssl:{rejectUnauthorized:!1}}),this.pool.on("error",r=>{Cr.error("Unexpected error on idle database client",r)}),Cr.info("Database connection pool initialized"),this.pool}async getPool(){return await this.initializePool()}async close(){this.pool&&(Cr.info("Closing database connection pool"),await this.pool.end(),this.pool=null,this.credentials=null)}},GSe=new Tb;async function el(t,e,r=3){let n=t.trim().split(" ")[0].toUpperCase();return W2(n,async()=>{let s=await GSe.getPool(),i=null;for(let o=1;o<=r;o++)try{Cr.debug("Executing database query",{attempt:o,query:t.substring(0,100),paramCount:e?.length||0}),Hm({query:t.substring(0,200),paramCount:e?.length||0,attempt:o},"database");let a=Date.now(),c=await s.query(t,e),u=Date.now()-a;return Ai({dbOperation:n,dbRowCount:c.rowCount||0,dbDuration:u}),Cr.debug("Query executed successfully",{rowCount:c.rowCount,duration:u}),c}catch(a){if(i=a,Cr.warn(`Query failed on attempt ${o}`,{attempt:o,maxRetries:r,error:i.message}),!KSe(i)||o===r)throw Ai({dbOperation:n,dbError:i.name}),Cr.error("Query failed permanently",i,{query:t.substring(0,100),attempts:o}),i;let u=Math.pow(2,o)*100;Cr.debug(`Retrying query after ${u}ms`),await XSe(u)}throw i||new Error("Query failed after retries")},{operation:n,paramCount:e?.length||0})}function KSe(t){let e=["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","57P03","53300","08006","08003"],r=t.message.toLowerCase(),n=t.code;return e.includes(n)||r.includes("connection")||r.includes("timeout")||r.includes("econnrefused")}function XSe(t){return new Promise(e=>setTimeout(e,t))}Zo();var{v4:kj}=(Zo(),re(Sw)),er=class extends Error{constructor(r,n,s,i,o,a=!1){super(r);this.code=n;this.server=s;this.method=i;this.traceId=o;this.isRetryable=a;this.name="MCPError"}},Pb=class extends er{constructor(e,r,n,s){super(`MCP call timed out after ${s}ms`,"MCP_TIMEOUT",e,r,n,!0),this.name="MCPTimeoutError"}},xb=class extends er{constructor(e,r,n,s){super(`Network error during MCP call: ${s.message}`,"MCP_NETWORK_ERROR",e,r,n,!0),this.name="MCPNetworkError"}};var Ib=class{info(e,r){console.log(JSON.stringify({level:"INFO",message:e,...r}))}warn(e,r){console.warn(JSON.stringify({level:"WARN",message:e,...r}))}error(e,r,n){console.error(JSON.stringify({level:"ERROR",message:e,error:{name:r.name,message:r.message,stack:r.stack},...n}))}debug(e,r){console.debug(JSON.stringify({level:"DEBUG",message:e,...r}))}},ig=class{constructor(e={}){this.timeout=e.timeout??3e4,this.maxRetries=e.maxRetries??3,this.initialRetryDelay=e.initialRetryDelay??1e3,this.maxRetryDelay=e.maxRetryDelay??3e4,this.logger=e.logger??new Ib}async call(e,r,n={}){let s=kj(),i=Date.now();this.logger.info("MCP call initiated",{traceId:s,server:e,method:r,params:this.sanitizeParams(n)});let o=null;for(let a=1;a<=this.maxRetries;a++)try{let c=await this.executeCall(e,r,n,s,a),u=Date.now()-i;return this.logger.info("MCP call succeeded",{traceId:s,server:e,method:r,attempt:a,duration:u}),c}catch(c){let u=Date.now()-i;if(c instanceof er){if(o=c,this.logger.warn("MCP call failed",{traceId:s,server:e,method:r,attempt:a,maxRetries:this.maxRetries,duration:u,error:c.message,code:c.code,isRetryable:c.isRetryable}),!c.isRetryable)throw this.logger.error("MCP call failed with non-retryable error",c,{traceId:s,server:e,method:r}),c;if(a===this.maxRetries)break;let l=this.calculateRetryDelay(a);this.logger.debug("Retrying MCP call after delay",{traceId:s,server:e,method:r,attempt:a,nextAttempt:a+1,delayMs:l}),await this.sleep(l)}else{let l=new er(`Unexpected error during MCP call: ${c}`,"MCP_UNEXPECTED_ERROR",e,r,s,!1);throw this.logger.error("MCP call failed with unexpected error",l,{traceId:s,server:e,method:r,originalError:c}),l}}throw this.logger.error("MCP call failed after all retries",o,{traceId:s,server:e,method:r,attempts:this.maxRetries}),o}async listTools(e){let r=kj();this.logger.info("Listing MCP tools",{traceId:r,server:e});try{let n=await this.executeListTools(e,r);return this.logger.info("MCP tools listed successfully",{traceId:r,server:e,toolCount:n.length}),n}catch(n){throw this.logger.error("Failed to list MCP tools",n,{traceId:r,server:e}),n}}async executeCall(e,r,n,s,i){let o=new AbortController,a=global.setTimeout(()=>o.abort(),this.timeout);try{let c=await this.simulateMCPCall(e,r,n,o.signal);return global.clearTimeout(a),c}catch(c){throw global.clearTimeout(a),c instanceof Error&&c.name==="AbortError"?new Pb(e,r,s,this.timeout):this.isNetworkError(c)?new xb(e,r,s,c):c}}async executeListTools(e,r){return[]}async simulateMCPCall(e,r,n,s){return new Promise((i,o)=>{if(s.aborted){o(new Error("AbortError"));return}s.addEventListener("abort",()=>{o(new Error("AbortError"))}),global.setTimeout(()=>{i({})},100)})}calculateRetryDelay(e){let r=this.initialRetryDelay*Math.pow(2,e-1),n=r*.25*(Math.random()*2-1),s=r+n;return Math.min(s,this.maxRetryDelay)}sleep(e){return new Promise(r=>global.setTimeout(r,e))}isNetworkError(e){return e instanceof Error?["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","ENETUNREACH"].some(n=>e.message.includes(n)):!1}sanitizeParams(e){let r=["password","token","apiKey","secret","authorization"],n={...e};for(let s of Object.keys(n))r.some(i=>s.toLowerCase().includes(i))&&(n[s]="***REDACTED***");return n}};var{v4:Vn}=(Zo(),re(Sw)),QSe=require("aws-sdk"),Ob=class{constructor(e){this.secondWindow=[];this.minuteWindow=[];this.hourWindow=[];this.messagesPerSecond=e.messagesPerSecond,this.messagesPerMinute=e.messagesPerMinute,this.messagesPerHour=e.messagesPerHour}async checkAndRecord(){let e=Date.now();return this.cleanupWindows(e),this.secondWindow.length>=this.messagesPerSecond||this.minuteWindow.length>=this.messagesPerMinute||this.hourWindow.length>=this.messagesPerHour?!1:(this.secondWindow.push(e),this.minuteWindow.push(e),this.hourWindow.push(e),!0)}async waitForSlot(){for(;!await this.checkAndRecord();)await this.sleep(100)}cleanupWindows(e){let r=e-1e3,n=e-6e4,s=e-36e5;this.secondWindow=this.secondWindow.filter(i=>i>r),this.minuteWindow=this.minuteWindow.filter(i=>i>n),this.hourWindow=this.hourWindow.filter(i=>i>s)}sleep(e){return new Promise(r=>setTimeout(r,e))}},Nb=class{constructor(e={}){this.apiKey=null;this.apiKeyExpiry=0;this.idempotencyCache=new Map;this.mcpClient=new ig(e),this.secretName=e.secretName??"fibonacci/mcp/whatsapp",this.apiEndpoint=e.apiEndpoint??"https://graph.facebook.com/v18.0",this.logger=e.logger??this.mcpClient.logger,this.rateLimiter=new Ob(e.rateLimit??{messagesPerSecond:80,messagesPerMinute:1e3,messagesPerHour:1e4}),this.secretsManager=new QSe.SecretsManager({region:process.env.AWS_REGION??"us-east-1"})}async sendMessage(e){let r=Vn(),n=Date.now();this.validateSendMessageParams(e);let s=e.idempotencyKey??this.generateIdempotencyKey(e);this.logger.info("WhatsApp sendMessage initiated",{traceId:r,to:this.maskPhoneNumber(e.to),idempotencyKey:s});let i=this.idempotencyCache.get(s);if(i)return this.logger.info("WhatsApp sendMessage returned from cache (idempotent)",{traceId:r,idempotencyKey:s,messageId:i.messageId}),i;try{await this.rateLimiter.waitForSlot();let o=await this.getApiKey(),a=await this.sendWhatsAppMessage(e,o,s,r);if(this.idempotencyCache.set(s,a),this.idempotencyCache.size>1e4){let u=this.idempotencyCache.keys().next().value;u&&this.idempotencyCache.delete(u)}let c=Date.now()-n;return this.logger.info("WhatsApp sendMessage succeeded",{traceId:r,messageId:a.messageId,status:a.status,duration:c}),a}catch(o){let a=Date.now()-n;throw this.logger.error("WhatsApp sendMessage failed",o,{traceId:r,to:this.maskPhoneNumber(e.to),duration:a}),o}}async getMessageStatus(e){let r=Vn(),n=Date.now();this.logger.info("WhatsApp getMessageStatus initiated",{traceId:r,messageId:e});try{let s=await this.getApiKey(),i=await this.fetchMessageStatus(e,s,r),o=Date.now()-n;return this.logger.info("WhatsApp getMessageStatus succeeded",{traceId:r,messageId:e,status:i.status,duration:o}),i}catch(s){let i=Date.now()-n;throw this.logger.error("WhatsApp getMessageStatus failed",s,{traceId:r,messageId:e,duration:i}),s}}async getApiKey(){let e=Date.now();if(this.apiKey&&e<this.apiKeyExpiry)return this.apiKey;try{this.logger.debug("Fetching WhatsApp API key from Secrets Manager",{secretName:this.secretName});let r=await this.secretsManager.getSecretValue({SecretId:this.secretName}).promise();if(!r.SecretString)throw new Error("Secret value is empty");let n=JSON.parse(r.SecretString);if(this.apiKey=n.apiKey,!this.apiKey)throw new Error("apiKey not found in secret");return this.apiKeyExpiry=e+3e5,this.logger.debug("WhatsApp API key fetched successfully"),this.apiKey}catch(r){throw this.logger.error("Failed to fetch WhatsApp API key",r,{secretName:this.secretName}),new er(`Failed to fetch API key from Secrets Manager: ${r}`,"WHATSAPP_AUTH_ERROR","whatsapp","getApiKey",Vn(),!1)}}async sendWhatsAppMessage(e,r,n,s){let i={messaging_product:"whatsapp",recipient_type:"individual",to:e.to,type:"text",text:{body:e.message}};try{return{messageId:(await this.makeHttpRequest("POST",`${this.apiEndpoint}/messages`,i,{Authorization:`Bearer ${r}`,"Content-Type":"application/json","X-Idempotency-Key":n,"X-Trace-Id":s})).messages?.[0]?.id??Vn(),status:"sent",timestamp:new Date().toISOString()}}catch(o){throw new er(`WhatsApp API error: ${o}`,"WHATSAPP_API_ERROR","whatsapp","sendMessage",s,this.isRetryableError(o))}}async fetchMessageStatus(e,r,n){try{let s=await this.makeHttpRequest("GET",`${this.apiEndpoint}/messages/${e}`,null,{Authorization:`Bearer ${r}`,"X-Trace-Id":n});return{messageId:e,status:this.mapWhatsAppStatus(s.status),timestamp:s.timestamp??new Date().toISOString(),errorCode:s.error?.code,errorMessage:s.error?.message}}catch(s){throw new er(`WhatsApp API error: ${s}`,"WHATSAPP_API_ERROR","whatsapp","getMessageStatus",n,this.isRetryableError(s))}}async makeHttpRequest(e,r,n,s){return this.logger.debug("Making HTTP request to WhatsApp API",{method:e,url:r.replace(/\/\d+\//g,"/****/")}),new Promise(i=>{setTimeout(()=>{i(e==="POST"?{messages:[{id:Vn()}]}:{status:"delivered",timestamp:new Date().toISOString()})},100)})}validateSendMessageParams(e){if(!e.to)throw new er("Missing required parameter: to","WHATSAPP_INVALID_PARAMS","whatsapp","sendMessage",Vn(),!1);if(!e.message)throw new er("Missing required parameter: message","WHATSAPP_INVALID_PARAMS","whatsapp","sendMessage",Vn(),!1);if(!e.to.startsWith("+"))throw new er("Phone number must be in international format (e.g., +5511987654321)","WHATSAPP_INVALID_PHONE","whatsapp","sendMessage",Vn(),!1);if(e.message.length>4096)throw new er("Message exceeds maximum length of 4096 characters","WHATSAPP_MESSAGE_TOO_LONG","whatsapp","sendMessage",Vn(),!1)}generateIdempotencyKey(e){let r=`${e.to}:${e.message}`,n=0;for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);n=(n<<5)-n+i,n=n&n}return`whatsapp-${Math.abs(n)}-${Date.now()}`}mapWhatsAppStatus(e){return{queued:"queued",sent:"sent",delivered:"delivered",read:"read",failed:"failed"}[e.toLowerCase()]??"sent"}isRetryableError(e){return!!(e instanceof Error&&["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND"].some(n=>e.message.includes(n))||e.statusCode>=500&&e.statusCode<600||e.statusCode===429)}maskPhoneNumber(e){if(e.length<=7)return e;let r=e.substring(0,3),n=e.substring(e.length-4),s="*".repeat(e.length-7);return`${r}${s}${n}`}};function qj(t){return new Nb(t)}var YSe=new og.EventBridgeClient({}),$j=process.env.EVENT_BUS_NAME||"fibonacci-bus-dev",JSe=qj({timeout:3e4,maxRetries:3}),Db=new Map,ZSe=z2(async(t,e,r)=>{let n=on();if(r.setTraceId(n),r.info("Agente de Disparo iniciado",{functionName:e.functionName,traceId:n}),!e_e())return r.info("Fora do hor\xE1rio comercial, pulando disparo",{horaAtual:new Date().toISOString(),traceId:n}),{statusCode:200,body:JSON.stringify({message:"Fora do hor\xE1rio comercial",disparosRealizados:0})};let s=await t_e(r);if(s.length===0)return r.info("Nenhuma campanha ativa encontrada",{traceId:n}),{statusCode:200,body:JSON.stringify({message:"Nenhuma campanha ativa",disparosRealizados:0})};r.info("Campanhas ativas encontradas",{count:s.length,traceId:n});let i=0,o=0;for(let a of s)try{let c=await r_e(a,r,n);i+=c.disparos,o+=c.erros}catch(c){r.error("Erro ao processar campanha",c,{campanhaId:a.id,traceId:n}),o++}return r.info("Agente de Disparo conclu\xEDdo",{campanhasProcessadas:s.length,totalDisparos:i,totalErros:o,traceId:n}),{statusCode:200,body:JSON.stringify({campanhasProcessadas:s.length,disparosRealizados:i,erros:o})}});function e_e(){let t=new Date,e=new Date(t.toLocaleString("en-US",{timeZone:"America/Sao_Paulo"})),r=e.getDay(),n=e.getHours();return!(r===0||r===6||n<8||n>=18)}async function t_e(t){t.info("Consultando campanhas ativas");try{let r=(await el(`SELECT 
        id, tenant_id, nome, segmento, atividade, canal,
        mensagens, ritmo, lead_ids, metadata
      FROM nigredo_leads.campanhas
      WHERE status = 'ativa'
      ORDER BY created_at DESC`,[])).rows.map(n=>({id:n.id,tenantId:n.tenant_id,nome:n.nome,segmento:n.segmento,atividade:n.atividade,canal:n.canal,mensagens:n.mensagens,ritmo:n.ritmo,leadIds:n.lead_ids,metadata:n.metadata||{}}));return t.info("Campanhas ativas consultadas",{count:r.length}),r}catch(e){throw t.error("Erro ao consultar campanhas ativas",e),e}}async function r_e(t,e,r){if(e.info("Processando campanha",{campanhaId:t.id,nome:t.nome,leadCount:t.leadIds.length,traceId:r}),!await Fj(t.tenantId,e))return e.warn("Rate limit excedido para tenant",{tenantId:t.tenantId,campanhaId:t.id,traceId:r}),{disparos:0,erros:0};let s=await s_e(t,e);if(s.length===0)return e.info("Nenhum lead pendente de disparo",{campanhaId:t.id,traceId:r}),{disparos:0,erros:0};e.info("Leads pendentes encontrados",{count:s.length,campanhaId:t.id,traceId:r});let i=0,o=0;for(let a of s)try{if(!await Fj(t.tenantId,e)){e.warn("Rate limit atingido durante processamento",{tenantId:t.tenantId,leadId:a.id,traceId:r});break}await i_e(a,t,e,r),await n_e(t.tenantId),i++,await Uj(2e3)}catch(c){e.error("Erro ao enviar mensagem para lead",c,{leadId:a.id,campanhaId:t.id,traceId:r}),o++}return e.info("Campanha processada",{campanhaId:t.id,disparos:i,erros:o,traceId:r}),{disparos:i,erros:o}}async function Fj(t,e){let r=new Date,n=Db.get(t);return n||(n={tenantId:t,mensagensHora:0,mensagensDia:0,ultimaResetHora:r,ultimaResetDia:r},Db.set(t,n)),(r.getTime()-n.ultimaResetHora.getTime())/(1e3*60*60)>=1&&(n.mensagensHora=0,n.ultimaResetHora=r),(r.getTime()-n.ultimaResetDia.getTime())/(1e3*60*60*24)>=1&&(n.mensagensDia=0,n.ultimaResetDia=r),n.mensagensHora>=100?(e.warn("Rate limit de hora excedido",{tenantId:t,mensagensHora:n.mensagensHora}),!1):n.mensagensDia>=500?(e.warn("Rate limit de dia excedido",{tenantId:t,mensagensDia:n.mensagensDia}),!1):!0}async function n_e(t){let e=Db.get(t);e&&(e.mensagensHora++,e.mensagensDia++)}async function s_e(t,e){e.info("Buscando leads pendentes",{campanhaId:t.id});try{let r=t.ritmo.intervaloMinimo||48,s=(await el(`SELECT 
        l.id, l.tenant_id, l.empresa, l.contato, l.telefone, l.email, l.status,
        l.metadata->>'ultimoDisparo' as ultimo_disparo,
        COALESCE(l.metadata->>'estagioFunil', 'topo') as estagio_funil,
        COALESCE(l.metadata->>'variacaoTeste', 'A') as variacao_teste
      FROM nigredo_leads.leads l
      WHERE l.id = ANY($1)
        AND l.status IN ('enriquecido', 'contatado', 'respondeu')
        AND (
          l.metadata->>'ultimoDisparo' IS NULL
          OR (NOW() - (l.metadata->>'ultimoDisparo')::timestamp) > INTERVAL '${r} hours'
        )
        AND (
          ($2 = 'whatsapp' AND l.telefone IS NOT NULL)
          OR ($2 = 'email' AND l.email IS NOT NULL)
          OR ($2 = 'multi' AND (l.telefone IS NOT NULL OR l.email IS NOT NULL))
        )
      ORDER BY l.prioridade DESC
      LIMIT 50`,[t.leadIds,t.canal])).rows.map(i=>({id:i.id,tenantId:i.tenant_id,empresa:i.empresa,contato:i.contato,telefone:i.telefone,email:i.email,status:i.status,ultimoDisparo:i.ultimo_disparo?new Date(i.ultimo_disparo):void 0,estagioFunil:i.estagio_funil,variacaoTeste:i.variacao_teste}));return e.info("Leads pendentes encontrados",{count:s.length,campanhaId:t.id}),s}catch(r){throw e.error("Erro ao buscar leads pendentes",r,{campanhaId:t.id}),r}}async function i_e(t,e,r,n){r.info("Enviando mensagem",{leadId:t.id,empresa:t.empresa,canal:e.canal,estagioFunil:t.estagioFunil,traceId:n});let s=o_e(e,t);if(!s){r.warn("Nenhuma mensagem encontrada para lead",{leadId:t.id,estagioFunil:t.estagioFunil,variacaoTeste:t.variacaoTeste,traceId:n});return}let i=a_e(s.conteudo,t);await c_e();let o=u_e(t.id,e.id,s.variacao),a,c;if(e.canal==="whatsapp"||e.canal==="multi"&&t.telefone){let u=await JSe.sendMessage({to:t.telefone,message:i,idempotencyKey:o});a=u.messageId,c="whatsapp",r.info("Mensagem enviada via WhatsApp",{leadId:t.id,messageId:a,status:u.status,traceId:n})}else if(e.canal==="email"||e.canal==="multi"&&t.email)a=on(),c="email",r.info("Mensagem enviada via Email (simulado)",{leadId:t.id,messageId:a,traceId:n});else throw new Error(`Canal n\xE3o suportado ou lead sem contato: ${e.canal}`);await l_e(t.id,s.tipo,r),await d_e(t,e,s,a,c,r,n),await f_e(t,e,s,a,c,n,r)}function o_e(t,e){let r;e.estagioFunil==="topo"?r=t.mensagens.topo:e.estagioFunil==="meio"?r=t.mensagens.meio:r=t.mensagens.fundo;let n=r.filter(s=>s.variacao===e.variacaoTeste);return n.length===0?r[0]||null:n[0]}function a_e(t,e){let r=t;return r=r.replace(/\{empresa\}/g,e.empresa),r=r.replace(/\{contato\}/g,e.contato),r}async function c_e(){let t=Math.random()*5*60*1e3;t>1e4&&await Uj(t)}function u_e(t,e,r){let n=new Date().toISOString().split("T")[0];return`disparo-${t}-${e}-${r}-${n}`}async function l_e(t,e,r){r.debug("Atualizando status do lead",{leadId:t,estagioFunil:e});try{await el(`UPDATE nigredo_leads.leads
      SET 
        status = 'contatado',
        metadata = jsonb_set(
          jsonb_set(metadata, '{ultimoDisparo}', to_jsonb(NOW()::text)),
          '{estagioFunil}', to_jsonb($2::text)
        ),
        updated_at = NOW()
      WHERE id = $1`,[t,e]),r.debug("Status do lead atualizado",{leadId:t})}catch(n){throw r.error("Erro ao atualizar status do lead",n,{leadId:t}),n}}async function d_e(t,e,r,n,s,i,o){i.debug("Registrando intera\xE7\xE3o",{leadId:t.id,messageId:n,canal:s,traceId:o});try{await el(`INSERT INTO nigredo_leads.interacoes (
        id, lead_id, tipo, canal, mensagem, sentimento, intensidade,
        trace_id, metadata, created_at
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, NOW())`,[on(),t.id,"enviado",s,r.conteudo.substring(0,500),null,null,o,JSON.stringify({campanhaId:e.id,campanhaName:e.nome,messageId:n,estagioFunil:r.tipo,variacaoTeste:r.variacao,cta:r.cta})]),i.debug("Intera\xE7\xE3o registrada",{leadId:t.id,messageId:n,traceId:o})}catch(a){throw i.error("Erro ao registrar intera\xE7\xE3o",a,{leadId:t.id,traceId:o}),a}}async function f_e(t,e,r,n,s,i,o){try{let a=new og.PutEventsCommand({Entries:[{Source:"nigredo.disparo",DetailType:"disparo.sent",Detail:JSON.stringify({leadId:t.id,tenantId:t.tenantId,empresa:t.empresa,campanhaId:e.id,campanhaName:e.nome,messageId:n,canal:s,estagioFunil:r.tipo,variacaoTeste:r.variacao,metadata:{contato:t.contato,telefone:t.telefone?p_e(t.telefone):void 0,email:t.email},traceId:i,timestamp:new Date().toISOString()}),EventBusName:$j}]}),c=await YSe.send(a);o.info("Evento de disparo publicado",{eventBusName:$j,leadId:t.id,messageId:n,failedEntryCount:c.FailedEntryCount||0,traceId:i}),c.FailedEntryCount&&c.FailedEntryCount>0&&o.error("Falha ao publicar evento",new Error("EventBridge failed"),{failedEntries:c.Entries,traceId:i})}catch(a){throw o.error("Erro ao publicar evento no EventBridge",a,{traceId:i}),a}}function p_e(t){if(t.length<=7)return t;let e=t.substring(0,3),r=t.substring(t.length-4),n="*".repeat(t.length-7);return`${e}${n}${r}`}function Uj(t){return new Promise(e=>setTimeout(e,t))}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
