"use strict";var k3=Object.create;var _c=Object.defineProperty;var M3=Object.getOwnPropertyDescriptor;var q3=Object.getOwnPropertyNames;var $3=Object.getPrototypeOf,F3=Object.prototype.hasOwnProperty;var XR=t=>{throw TypeError(t)};var U3=(t,e,r)=>e in t?_c(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var w=(t,e)=>()=>(t&&(e=t(t=0)),e);var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),At=(t,e)=>{for(var r in e)_c(t,r,{get:e[r],enumerable:!0})},QR=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of q3(e))!F3.call(t,s)&&s!==r&&_c(t,s,{get:()=>e[s],enumerable:!(n=M3(e,s))||n.enumerable});return t};var T=(t,e,r)=>(r=t!=null?k3($3(t)):{},QR(e||!t||!t.__esModule?_c(r,"default",{value:t,enumerable:!0}):r,t)),le=t=>QR(_c({},"__esModule",{value:!0}),t);var f=(t,e,r)=>U3(t,typeof e!="symbol"?e+"":e,r),yy=(t,e,r)=>e.has(t)||XR("Cannot "+r);var k=(t,e,r)=>(yy(t,e,"read from private field"),r?r.call(t):e.get(t)),Le=(t,e,r)=>e.has(t)?XR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),pt=(t,e,r,n)=>(yy(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),je=(t,e,r)=>(yy(t,e,"access private method"),r);var xn=_(ke=>{"use strict";ke.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ke.HttpAuthLocation||(ke.HttpAuthLocation={}));ke.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ke.HttpApiKeyAuthLocation||(ke.HttpApiKeyAuthLocation={}));ke.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(ke.EndpointURLScheme||(ke.EndpointURLScheme={}));ke.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ke.AlgorithmId||(ke.AlgorithmId={}));var B3=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>ke.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>ke.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},j3=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},H3=t=>B3(t),V3=t=>j3(t);ke.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(ke.FieldPosition||(ke.FieldPosition={}));var z3="__smithy_context";ke.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(ke.IniSectionType||(ke.IniSectionType={}));ke.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ke.RequestHandlerProtocol||(ke.RequestHandlerProtocol={}));ke.SMITHY_CONTEXT_KEY=z3;ke.getDefaultClientConfiguration=H3;ke.resolveDefaultRuntimeConfig=V3});var Ne=_(ys=>{"use strict";var W3=xn(),G3=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),K3=t=>({httpHandler:t.httpHandler()}),Ey=class{constructor({name:e,kind:r=W3.FieldPosition.HEADER,values:n=[]}){f(this,"name");f(this,"kind");f(this,"values");this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},_y=class{constructor({fields:e=[],encoding:r="utf-8"}){f(this,"entries",{});f(this,"encoding");e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},Sy=class t{constructor(e){f(this,"method");f(this,"protocol");f(this,"hostname");f(this,"port");f(this,"path");f(this,"query");f(this,"headers");f(this,"username");f(this,"password");f(this,"fragment");f(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=X3(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function X3(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var vy=class{constructor(e){f(this,"statusCode");f(this,"reason");f(this,"headers");f(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Q3(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}ys.Field=Ey;ys.Fields=_y;ys.HttpRequest=Sy;ys.HttpResponse=vy;ys.getHttpHandlerExtensionConfiguration=G3;ys.isValidHostname=Q3;ys.resolveHttpHandlerRuntimeConfig=K3});var vc=_(Sc=>{"use strict";var Y3=Ne();function J3(t){return t}var YR=t=>e=>async r=>{if(!Y3.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},JR={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Z3=t=>({applyToStack:e=>{e.add(YR(t),JR)}});Sc.getHostHeaderPlugin=Z3;Sc.hostHeaderMiddleware=YR;Sc.hostHeaderMiddlewareOptions=JR;Sc.resolveHostHeaderConfig=J3});var wc=_(nd=>{"use strict";var ZR=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,d=u??e.outputFilterSensitiveLog,{$metadata:m,...g}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(g),metadata:m}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},eC={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},eV=t=>({applyToStack:e=>{e.add(ZR(),eC)}});nd.getLoggerPlugin=eV;nd.loggerMiddleware=ZR;nd.loggerMiddlewareOptions=eC});var rC={};At(rC,{InvokeStore:()=>rV});var tC,wy,tV,bc,sd,rV,nC=w(()=>{tC=require("async_hooks"),wy=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";wy||(globalThis.awslambda=globalThis.awslambda||{});tV={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},bc=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(bc,"storage",new tC.AsyncLocalStorage),f(bc,"PROTECTED_KEYS",tV);!wy&&globalThis.awslambda?.InvokeStore?sd=globalThis.awslambda.InvokeStore:(sd=bc,!wy&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=sd));rV=sd});var sC=_(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.recursionDetectionMiddleware=void 0;var nV=(nC(),le(rC)),sV=Ne(),by="X-Amzn-Trace-Id",iV="AWS_LAMBDA_FUNCTION_NAME",oV="_X_AMZN_TRACE_ID",aV=()=>t=>async e=>{let{request:r}=e;if(!sV.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===by.toLowerCase())??by;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[iV],i=process.env[oV],a=nV.InvokeStore.getXRayTraceId()??i,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[by]=a),t({...e,request:r})};id.recursionDetectionMiddleware=aV});var Rc=_(od=>{"use strict";var Ry=sC(),cV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},uV=t=>({applyToStack:e=>{e.add(Ry.recursionDetectionMiddleware(),cV)}});od.getRecursionDetectionPlugin=uV;Object.keys(Ry).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(od,t)&&Object.defineProperty(od,t,{enumerable:!0,get:function(){return Ry[t]}})})});var Cy,lV,iC=w(()=>{Cy=T(xn()),lV=t=>t[Cy.SMITHY_CONTEXT_KEY]||(t[Cy.SMITHY_CONTEXT_KEY]={})});var Bt=_(Ty=>{"use strict";var oC=xn(),dV=t=>t[oC.SMITHY_CONTEXT_KEY]||(t[oC.SMITHY_CONTEXT_KEY]={}),fV=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Ty.getSmithyContext=dV;Ty.normalizeProvider=fV});var aC,cC=w(()=>{aC=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function pV(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var uC,Cc,ad=w(()=>{uC=T(Bt());cC();Cc=(t,e)=>(r,n)=>async s=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=aC(i,o),c=pV(t.httpAuthSchemes),u=(0,uC.getSmithyContext)(n),l=[];for(let d of a){let m=c.get(d.schemeId);if(!m){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let g=m.identityProvider(await e.identityProviderConfigProvider(t));if(!g){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:E={},signingProperties:b={}}=d.propertiesExtractor?.(t,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},E),d.signingProperties=Object.assign(d.signingProperties||{},b),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await g(d.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var lC,Tc,dC=w(()=>{ad();lC={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Tc=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Cc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),lC)}})});var Ac=_(wo=>{"use strict";var hV=Ne(),fC=(t,e)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(hV.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:Ay(/^x-[\w-]+-request-?id$/,u),extendedRequestId:Ay(/^x-[\w-]+-id-2$/,u),cfId:Ay(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},Ay=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],pC=(t,e)=>(r,n)=>async s=>{let i=t,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:o});return r({...s,request:a})},hC={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},mC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function mV(t,e,r){return{applyToStack:n=>{n.add(fC(t,r),hC),n.add(pC(t,e),mC)}}}wo.deserializerMiddleware=fC;wo.deserializerMiddlewareOption=hC;wo.getSerdePlugin=mV;wo.serializerMiddleware=pC;wo.serializerMiddlewareOption=mC});var gC,yC,gV,EC=w(()=>{gC=T(Ac());ad();yC={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:gC.serializerMiddlewareOption.name},gV=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Cc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),yC)}})});var _C=w(()=>{ad();dC();EC()});var SC,vC,yV,EV,xy,Py=w(()=>{SC=T(Ne()),vC=T(Bt()),yV=t=>e=>{throw e},EV=(t,e)=>{},xy=t=>(e,r)=>async n=>{if(!SC.HttpRequest.isInstance(n.request))return e(n);let i=(0,vC.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||yV)(o));return(c.successHandler||EV)(u.response,o),u}});var wC,xc,bC=w(()=>{Py();wC={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},xc=t=>({applyToStack:e=>{e.addRelativeTo(xy(t),wC)}})});var RC=w(()=>{Py();bC()});var Es,CC=w(()=>{Es=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function TC(t,e,r,n,s){return async function*(o,a,...c){let u=a,l=o.startingToken??u[r],d=!0,m;for(;d;){if(u[r]=l,s&&(u[s]=u[s]??o.pageSize),o.client instanceof t)m=await _V(e,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let g=l;l=SV(m,n),d=!!(l&&(!o.stopOnSameToken||l!==g))}return void 0}}var _V,SV,AC=w(()=>{_V=async(t,e,r,n=i=>i,...s)=>{let i=new t(r);return i=n(i)??i,await e.send(i,...s)};SV=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var Iy=_(xC=>{"use strict";var vV=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";xC.isArrayBuffer=vV});var bo=_(Oy=>{"use strict";var wV=Iy(),Ny=require("buffer"),bV=(t,e=0,r=t.byteLength-e)=>{if(!wV.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Ny.Buffer.from(t,e,r)},RV=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Ny.Buffer.from(t,e):Ny.Buffer.from(t)};Oy.fromArrayBuffer=bV;Oy.fromString=RV});var PC=_(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.fromBase64=void 0;var CV=bo(),TV=/^[A-Za-z0-9+/]*={0,2}$/,AV=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!TV.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,CV.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};cd.fromBase64=AV});var St=_(ud=>{"use strict";var IC=bo(),NC=t=>{let e=IC.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},xV=t=>typeof t=="string"?NC(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),PV=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return IC.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};ud.fromUtf8=NC;ud.toUint8Array=xV;ud.toUtf8=PV});var OC=_(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.toBase64=void 0;var IV=bo(),NV=St(),OV=t=>{let e;if(typeof t=="string"?e=(0,NV.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,IV.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};ld.toBase64=OV});var vt=_(Pc=>{"use strict";var DC=PC(),LC=OC();Object.keys(DC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Pc,t)&&Object.defineProperty(Pc,t,{enumerable:!0,get:function(){return DC[t]}})});Object.keys(LC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Pc,t)&&Object.defineProperty(Pc,t,{enumerable:!0,get:function(){return LC[t]}})})});var Ly=_(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.ChecksumStream=void 0;var DV=vt(),LV=require("stream"),Dy=class extends LV.Duplex{constructor({expectedChecksum:r,checksum:n,source:s,checksumSourceLocation:i,base64Encoder:o}){super();f(this,"expectedChecksum");f(this,"checksumSourceLocation");f(this,"checksum");f(this,"source");f(this,"base64Encoder");if(typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??DV.toBase64,this.expectedChecksum=r,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(r){}_write(r,n,s){try{this.checksum.update(r),this.push(r)}catch(i){return s(i)}return s()}async _final(r){try{let n=await this.checksum.digest(),s=this.base64Encoder(n);if(this.expectedChecksum!==s)return r(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(n){return r(n)}return this.push(null),r()}};dd.ChecksumStream=Dy});var _s=_(Ro=>{"use strict";Object.defineProperty(Ro,"__esModule",{value:!0});Ro.isBlob=Ro.isReadableStream=void 0;var kV=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Ro.isReadableStream=kV;var MV=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Ro.isBlob=MV});var kC=_(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.ChecksumStream=void 0;var qV=typeof ReadableStream=="function"?ReadableStream:function(){},ky=class extends qV{};fd.ChecksumStream=ky});var MC=_(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.createChecksumStream=void 0;var $V=vt(),FV=_s(),UV=kC(),BV=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,FV.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??$V.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),l=i(u);if(t!==l){let d=new Error(`Checksum mismatch: expected "${t}" but received "${l}" in response header "${n}".`);c.error(d)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,UV.ChecksumStream.prototype),a};pd.createChecksumStream=BV});var qC=_(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.createChecksumStream=zV;var jV=_s(),HV=Ly(),VV=MC();function zV(t){return typeof ReadableStream=="function"&&(0,jV.isReadableStream)(t.source)?(0,VV.createChecksumStream)(t):new HV.ChecksumStream(t)}});var $y=_(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.ByteArrayCollector=void 0;var qy=class{constructor(e){f(this,"allocByteArray");f(this,"byteLength",0);f(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};hd.ByteArrayCollector=qy});var BC=_(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.createBufferedReadable=void 0;Pn.createBufferedReadableStream=$C;Pn.merge=FC;Pn.flush=md;Pn.sizeOf=Co;Pn.modeOf=UC;var WV=$y();function $C(t,e,r){let n=t.getReader(),s=!1,i=0,o=["",new WV.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:d}=await n.read(),m=l;if(d){if(a!==-1){let g=md(o,a);Co(g)>0&&u.enqueue(g)}u.close()}else{let g=UC(m,!1);if(a!==g&&(a>=0&&u.enqueue(md(o,a)),a=g),a===-1){u.enqueue(m);return}let E=Co(m);i+=E;let b=Co(o[a]);if(E>=e&&b===0)u.enqueue(m);else{let x=FC(o,a,m);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${E} is below threshold of ${e}, automatically buffering.`)),x>=e?u.enqueue(md(o,a)):await c(u)}}};return new ReadableStream({pull:c})}Pn.createBufferedReadable=$C;function FC(t,e,r){switch(e){case 0:return t[0]+=r,Co(t[0]);case 1:case 2:return t[e].push(r),Co(t[e])}}function md(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function Co(t){return t?.byteLength??t?.length??0}function UC(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var HC=_(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.createBufferedReadable=XV;var GV=require("stream"),jC=$y(),In=BC(),KV=_s();function XV(t,e,r){if((0,KV.isReadableStream)(t))return(0,In.createBufferedReadableStream)(t,e,r);let n=new GV.Readable({read(){}}),s=!1,i=0,o=["",new jC.ByteArrayCollector(c=>new Uint8Array(c)),new jC.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,In.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,In.flush)(o,a)),a=u),a===-1){n.push(c);return}let l=(0,In.sizeOf)(c);i+=l;let d=(0,In.sizeOf)(o[a]);if(l>=e&&d===0)n.push(c);else{let m=(0,In.merge)(o,a,c);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${e}, automatically buffering.`)),m>=e&&n.push((0,In.flush)(o,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,In.flush)(o,a);(0,In.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var VC=_(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.getAwsChunkedEncodingStream=void 0;var QV=require("stream"),YV=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,t):void 0,u=new QV.Readable({read:()=>{}});return t.on("data",l=>{let d=n(l)||0;u.push(`${d.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${i}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};gd.getAwsChunkedEncodingStream=YV});var zC=_(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.headStream=JV;async function JV(t,e){let r=0,n=[],s=t.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var WC=_(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});yd.headStream=void 0;var ZV=require("stream"),ez=zC(),tz=_s(),rz=(t,e)=>(0,tz.isReadableStream)(t)?(0,ez.headStream)(t,e):new Promise((r,n)=>{let s=new By;s.limit=e,t.pipe(s),t.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});yd.headStream=rz;var By=class extends ZV.Writable{constructor(){super(...arguments);f(this,"buffers",[]);f(this,"limit",1/0);f(this,"bytesBuffered",0)}_write(r,n,s){if(this.buffers.push(r),this.bytesBuffered+=r.byteLength??0,this.bytesBuffered>=this.limit){let i=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-i),this.emit("finish")}s()}}});var Hy=_(jy=>{"use strict";var GC=t=>encodeURIComponent(t).replace(/[!'()*]/g,nz),nz=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,sz=t=>t.split("/").map(GC).join("/");jy.escapeUri=GC;jy.escapeUriPath=sz});var zy=_(KC=>{"use strict";var Vy=Hy();function iz(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Vy.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${Vy.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Vy.escapeUri(n)}`),e.push(s)}}return e.join("&")}KC.buildQueryString=iz});var mi=_(Ic=>{"use strict";var JC=Ne(),ZC=zy(),Ed=require("http"),_d=require("https"),eT=require("stream"),Wy=require("http2"),oz=["ECONNRESET","EPIPE","ETIMEDOUT"],tT=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},jt={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},XC=1e3,az=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let i=jt.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{jt.clearTimeout(i)}):jt.clearTimeout(i)};t.socket?o(t.socket):t.on("socket",o)};return r<2e3?(n(0),0):jt.setTimeout(n.bind(null,XC),XC)},cz=(t,e,r=0,n,s)=>r?jt.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(o),e(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,uz=3e3,lz=(t,{keepAlive:e,keepAliveMsecs:r},n=uz)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})};return n===0?(s(),0):jt.setTimeout(s,n)},QC=3e3,dz=(t,e,r=0)=>{let n=s=>{let i=r-s,o=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(i,o),t.on("close",()=>t.socket?.removeListener("timeout",o))):t.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):jt.setTimeout(n.bind(null,r===0?0:QC),QC)},YC=6e3;async function rT(t,e,r=YC,n=!1){let s=e.headers??{},i=s.Expect||s.expect,o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(jt.setTimeout(()=>c(!0),Math.max(YC,r)))}),new Promise(c=>{t.on("continue",()=>{jt.clearTimeout(o),c(!0)}),t.on("response",()=>{jt.clearTimeout(o),c(!1)}),t.on("error",()=>{jt.clearTimeout(o),c(!1)})})])),a&&fz(t,e.body)}function fz(t,e){if(e instanceof eT.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var pz=0,Gy=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"socketWarningTimestamp",0);f(this,"externalAgent",!1);f(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:i,maxSockets:o}=e;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let u=s[c]?.length??0,l=i[c]?.length??0;if(u>=o&&l>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof Ed.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new Ed.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof _d.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new _d.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],u=async he=>{await a,c.forEach(jt.clearTimeout),s(he)},l=async he=>{await a,c.forEach(jt.clearTimeout),i(he)};if(r?.aborted){let he=new Error("Request aborted");he.name="AbortError",l(he);return}let d=e.protocol==="https:",m=e.headers??{},g=(m.Expect??m.expect)==="100-continue",E=d?o.httpsAgent:o.httpAgent;g&&!this.externalAgent&&(E=new(d?_d.Agent:Ed.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(jt.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(E,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let b=ZC.buildQueryString(e.query||{}),x;if(e.username!=null||e.password!=null){let he=e.username??"",oe=e.password??"";x=`${he}:${oe}`}let A=e.path;b&&(A+=`?${b}`),e.fragment&&(A+=`#${e.fragment}`);let N=e.hostname??"";N[0]==="["&&N.endsWith("]")?N=e.hostname.slice(1,-1):N=e.hostname;let M={headers:e.headers,host:N,method:e.method,path:A,port:e.port,agent:E,auth:x},z=(d?_d.request:Ed.request)(M,he=>{let oe=new JC.HttpResponse({statusCode:he.statusCode||-1,reason:he.statusMessage,headers:tT(he.headers),body:he});u({response:oe})});if(z.on("error",he=>{oz.includes(he.code)?l(Object.assign(he,{name:"TimeoutError"})):l(he)}),r){let he=()=>{z.destroy();let oe=new Error("Request aborted");oe.name="AbortError",l(oe)};if(typeof r.addEventListener=="function"){let oe=r;oe.addEventListener("abort",he,{once:!0}),z.once("close",()=>oe.removeEventListener("abort",he))}else r.onabort=he}let ye=n??o.requestTimeout;c.push(az(z,l,o.connectionTimeout)),c.push(cz(z,l,ye,o.throwOnRequestTimeout,o.logger??console)),c.push(dz(z,l,o.socketTimeout));let at=M.agent;typeof at=="object"&&"keepAlive"in at&&c.push(lz(z,{keepAlive:at.keepAlive,keepAliveMsecs:at.keepAliveMsecs})),a=rT(z,e,ye,this.externalAgent).catch(he=>(c.forEach(jt.clearTimeout),i(he)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Ky=class{constructor(e){f(this,"sessions",[]);this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},Xy=class{constructor(e){f(this,"config");f(this,"sessionCache",new Map);if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=Wy.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new Ky;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},Qy=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"metadata",{handlerProtocol:"h2"});f(this,"connectionManager",new Xy({}));this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let u=!1,l,d=async Ie=>{await l,a(Ie)},m=async Ie=>{await l,c(Ie)};if(r?.aborted){u=!0;let Ie=new Error("Request aborted");Ie.name="AbortError",m(Ie);return}let{hostname:g,method:E,port:b,protocol:x,query:A}=e,N="";if(e.username!=null||e.password!=null){let Ie=e.username??"",rt=e.password??"";N=`${Ie}:${rt}@`}let M=`${x}//${N}${g}${b?`:${b}`:""}`,U={destination:new URL(M)},z=this.connectionManager.lease(U,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),ye=Ie=>{i&&this.destroySession(z),u=!0,m(Ie)},at=ZC.buildQueryString(A||{}),he=e.path;at&&(he+=`?${at}`),e.fragment&&(he+=`#${e.fragment}`);let oe=z.request({...e.headers,[Wy.constants.HTTP2_HEADER_PATH]:he,[Wy.constants.HTTP2_HEADER_METHOD]:E});if(z.ref(),oe.on("response",Ie=>{let rt=new JC.HttpResponse({statusCode:Ie[":status"]||-1,headers:tT(Ie),body:oe});u=!0,d({response:rt}),i&&(z.close(),this.connectionManager.deleteSession(M,z))}),o&&oe.setTimeout(o,()=>{oe.close();let Ie=new Error(`Stream timed out because of no activity for ${o} ms`);Ie.name="TimeoutError",ye(Ie)}),r){let Ie=()=>{oe.close();let rt=new Error("Request aborted");rt.name="AbortError",ye(rt)};if(typeof r.addEventListener=="function"){let rt=r;rt.addEventListener("abort",Ie,{once:!0}),oe.once("close",()=>rt.removeEventListener("abort",Ie))}else r.onabort=Ie}oe.on("frameError",(Ie,rt,vo)=>{ye(new Error(`Frame type id ${Ie} in stream id ${vo} has failed with code ${rt}.`))}),oe.on("error",ye),oe.on("aborted",()=>{ye(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${oe.rstCode}.`))}),oe.on("close",()=>{z.unref(),i&&z.destroy(),u||ye(new Error("Unexpected error: http2 request did not get a response"))}),l=rT(oe,e,o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Yy=class extends eT.Writable{constructor(){super(...arguments);f(this,"bufferedBytes",[])}_write(r,n,s){this.bufferedBytes.push(r),s()}},hz=t=>mz(t)?gz(t):new Promise((e,r)=>{let n=new Yy;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),mz=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function gz(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}Ic.DEFAULT_REQUEST_TIMEOUT=pz;Ic.NodeHttp2Handler=Qy;Ic.NodeHttpHandler=Gy;Ic.streamCollector=hz});var iT=_(vd=>{"use strict";var nT=Ne(),yz=zy(),Ez=vt();function sT(t,e){return new Request(t,e)}function _z(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var Sd={supported:void 0},Jy=class t{constructor(e){f(this,"config");f(this,"configProvider");typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),Sd.supported===void 0&&(Sd.supported=typeof Request<"u"&&"keepalive"in sT("https://[::1]"))}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let N=new Error("Request aborted");return N.name="AbortError",Promise.reject(N)}let a=e.path,c=yz.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let N=e.username??"",M=e.password??"";u=`${N}:${M}@`}let{port:l,method:d}=e,m=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,g=d==="GET"||d==="HEAD"?void 0:e.body,E={body:g,headers:new Headers(e.headers),method:d,credentials:o};this.config?.cache&&(E.cache=this.config.cache),g&&(E.duplex="half"),typeof AbortController<"u"&&(E.signal=r),Sd.supported&&(E.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(E,this.config.requestInit(e));let b=()=>{},x=sT(m,E),A=[fetch(x).then(N=>{let M=N.headers,U={};for(let ye of M.entries())U[ye[0]]=ye[1];return N.body!=null?{response:new nT.HttpResponse({headers:U,reason:N.statusText,statusCode:N.status,body:N.body})}:N.blob().then(ye=>({response:new nT.HttpResponse({headers:U,reason:N.statusText,statusCode:N.status,body:ye})}))}),_z(s)];return r&&A.push(new Promise((N,M)=>{let U=()=>{let z=new Error("Request aborted");z.name="AbortError",M(z)};if(typeof r.addEventListener=="function"){let z=r;z.addEventListener("abort",U,{once:!0}),b=()=>z.removeEventListener("abort",U)}else r.onabort=U})),Promise.race(A).finally(b)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},Sz=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):vz(t):wz(t);async function vz(t){let e=await bz(t),r=Ez.fromBase64(e);return new Uint8Array(r)}async function wz(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}function bz(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}vd.FetchHttpHandler=Jy;vd.keepAliveSupport=Sd;vd.streamCollector=Sz});var tE=_(eE=>{"use strict";var oT={},Zy={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),oT[t]=e,Zy[e]=t}function Rz(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in Zy)e[r/2]=Zy[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function Cz(t){let e="";for(let r=0;r<t.byteLength;r++)e+=oT[t[r]];return e}eE.fromHex=Rz;eE.toHex=Cz});var lT=_(wd=>{"use strict";Object.defineProperty(wd,"__esModule",{value:!0});wd.sdkStreamMixin=void 0;var Tz=iT(),Az=vt(),xz=tE(),Pz=St(),aT=_s(),cT="The stream has already been transformed.",Iz=t=>{if(!uT(t)&&!(0,aT.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(cT);return e=!0,await(0,Tz.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,Az.toBase64)(i);if(s==="hex")return(0,xz.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,Pz.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(cT);if(e=!0,uT(t))return n(t);if((0,aT.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};wd.sdkStreamMixin=Iz;var uT=t=>typeof Blob=="function"&&t instanceof Blob});var fT=_(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});bd.sdkStreamMixin=void 0;var Nz=mi(),Oz=bo(),rE=require("stream"),Dz=lT(),dT="The stream has already been transformed.",Lz=t=>{if(!(t instanceof rE.Readable))try{return(0,Dz.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(dT);return e=!0,await(0,Nz.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,Oz.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(dT);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof rE.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,rE.Readable.toWeb(t)}})};bd.sdkStreamMixin=Lz});var pT=_(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});nE.splitStream=kz;async function kz(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var gT=_(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});sE.splitStream=qz;var hT=require("stream"),Mz=pT(),mT=_s();async function qz(t){if((0,mT.isReadableStream)(t)||(0,mT.isBlob)(t))return(0,Mz.splitStream)(t);let e=new hT.PassThrough,r=new hT.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var Nc=_(ht=>{"use strict";var yT=vt(),ET=St(),_T=Ly(),ST=qC(),vT=HC(),wT=VC(),bT=WC(),RT=fT(),CT=gT(),TT=_s(),iE=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(yT.fromBase64(e)):t.mutate(ET.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?yT.toBase64(this):ET.toUtf8(this)}};ht.Uint8ArrayBlobAdapter=iE;Object.keys(_T).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return _T[t]}})});Object.keys(ST).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return ST[t]}})});Object.keys(vT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return vT[t]}})});Object.keys(wT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return wT[t]}})});Object.keys(bT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return bT[t]}})});Object.keys(RT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return RT[t]}})});Object.keys(CT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return CT[t]}})});Object.keys(TT).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return TT[t]}})})});var Rd,jr,Cd=w(()=>{Rd=T(Nc()),jr=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Rd.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Rd.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Rd.Uint8ArrayBlobAdapter.mutate(await r)}});function cn(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var Td=w(()=>{});var Hr,oE=w(()=>{Hr=t=>typeof t=="function"?t():t});var Oc,Ad=w(()=>{Oc=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var AT,xT,PT,aE,IT=w(()=>{AT=T(Ne()),xT=T(Bt());Ad();PT=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:i}=(0,xT.getSmithyContext)(r),[,o,a,c,u,l]=i??[];try{let d=await t.protocol.deserializeResponse(Oc(o,a,c,u,l),{...t,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s}),!("$metadata"in d)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(AT.HttpResponse.isInstance(s)){let{headers:g={}}=s,E=Object.entries(g);d.$metadata={httpStatusCode:s.statusCode,requestId:aE(/^x-[\w-]+-request-?id$/,E),extendedRequestId:aE(/^x-[\w-]+-id-2$/,E),cfId:aE(/^x-[\w-]+-cf-id$/,E)}}}catch{}}throw d}},aE=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var NT,OT,DT=w(()=>{NT=T(Bt());Ad();OT=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,NT.getSmithyContext)(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(Oc(i,o,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:d})}});function cE(t){return{applyToStack:e=>{e.add(OT(t),kT),e.add(PT(t),LT),t.protocol.setSerdeContext(t)}}}var LT,kT,MT=w(()=>{IT();DT();LT={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},kT={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var nt,Ss=w(()=>{nt=class{constructor(){f(this,"name");f(this,"namespace");f(this,"traits")}static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Pd,xd,$z,qT=w(()=>{Ss();Pd=class Pd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"valueSchema");f(this,"symbol",Pd.symbol)}};f(Pd,"symbol",Symbol.for("@smithy/lis"));xd=Pd,$z=(t,e,r,n)=>nt.assign(new xd,{name:e,namespace:t,traits:r,valueSchema:n})});var Nd,Id,Fz,$T=w(()=>{Ss();Nd=class Nd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"keySchema");f(this,"valueSchema");f(this,"symbol",Nd.symbol)}};f(Nd,"symbol",Symbol.for("@smithy/map"));Id=Nd,Fz=(t,e,r,n,s)=>nt.assign(new Id,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var Dd,Od,Uz,FT=w(()=>{Ss();Dd=class Dd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"input");f(this,"output");f(this,"symbol",Dd.symbol)}};f(Dd,"symbol",Symbol.for("@smithy/ope"));Od=Dd,Uz=(t,e,r,n,s)=>nt.assign(new Od,{name:e,namespace:t,traits:r,input:n,output:s})});var Ld,To,Bz,uE=w(()=>{Ss();Ld=class Ld extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"memberNames");f(this,"memberList");f(this,"symbol",Ld.symbol)}};f(Ld,"symbol",Symbol.for("@smithy/str"));To=Ld,Bz=(t,e,r,n,s)=>nt.assign(new To,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var Md,kd,jz,UT=w(()=>{Ss();uE();Md=class Md extends To{constructor(){super(...arguments);f(this,"ctor");f(this,"symbol",Md.symbol)}};f(Md,"symbol",Symbol.for("@smithy/err"));kd=Md,jz=(t,e,r,n,s,i)=>nt.assign(new kd,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function un(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var lE=w(()=>{});function Dc(t,e){if(t instanceof K)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=K;return new r(t,e)}var vs,K,dE,BT,jT=w(()=>{oE();lE();vs=class vs{constructor(e,r){f(this,"ref");f(this,"memberName");f(this,"symbol",vs.symbol);f(this,"name");f(this,"schema");f(this,"_isMemberSchema");f(this,"traits");f(this,"memberTraits");f(this,"normalizedTraits");this.ref=e,this.memberName=r;let n=[],s=e,i=e;for(this._isMemberSchema=!1;dE(s);)n.push(s[1]),s=s[0],i=Hr(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,un(a))}}else this.memberTraits=0;if(i instanceof vs){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Hr(i),BT(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Hr(e);if(r instanceof vs)return r;if(dE(r)){let[n,s]=r;if(n instanceof vs)return Object.assign(n.getMergedTraits(),un(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new vs(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return un(this.memberTraits)}getOwnTraits(){return un(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return Dc([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return Dc([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return Dc(dE(s)?s:[s,0],e)}if(this.isDocumentSchema())return Dc([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],Dc([e[5][r],0],e[4][r])]}};f(vs,"symbol",Symbol.for("@smithy/nor"));K=vs;dE=t=>Array.isArray(t)&&t.length===2,BT=t=>Array.isArray(t)&&t.length>=5});var qd,Lc,Hz,Vz,HT=w(()=>{Ss();qd=class qd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"schemaRef");f(this,"traits");f(this,"symbol",qd.symbol)}};f(qd,"symbol",Symbol.for("@smithy/sim"));Lc=qd,Hz=(t,e,r,n)=>nt.assign(new Lc,{name:e,namespace:t,traits:n,schemaRef:r}),Vz=(t,e,r,n)=>nt.assign(new Lc,{name:e,namespace:t,traits:r,schemaRef:n})});var zz,VT=w(()=>{zz={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var ln,_e,zT=w(()=>{ln=class ln{constructor(e,r=new Map,n=new Map){f(this,"namespace");f(this,"schemas");f(this,"exceptions");this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return ln.registries.has(e)||ln.registries.set(e,new ln(e)),ln.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);ln.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=ln.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return ln.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};f(ln,"registries",new Map);_e=ln});var $d={};At($d,{ErrorSchema:()=>kd,ListSchema:()=>xd,MapSchema:()=>Id,NormalizedSchema:()=>K,OperationSchema:()=>Od,SCHEMA:()=>zz,Schema:()=>nt,SimpleSchema:()=>Lc,StructureSchema:()=>To,TypeRegistry:()=>_e,deref:()=>Hr,deserializerMiddlewareOption:()=>LT,error:()=>jz,getSchemaSerdePlugin:()=>cE,isStaticSchema:()=>BT,list:()=>$z,map:()=>Fz,op:()=>Uz,operation:()=>Oc,serializerMiddlewareOption:()=>kT,sim:()=>Hz,simAdapter:()=>Vz,struct:()=>Bz,translateTraits:()=>un});var $e=w(()=>{oE();MT();qT();$T();FT();Ad();UT();jT();Ss();HT();uE();VT();lE();zT()});var Wz,WT=w(()=>{Wz=(t,e,r=n=>n)=>t});var Gz,Kz,kc,Xz,Fd,Mc,Qz,fE,pE,hE,mE,Yz,Jz,GT,Zz,eW,Bd,tW,gE,rW,Ao,yE,nW,sW,iW,KT,XT,oW,aW,gi,EE,Ud,qc,_E=w(()=>{Gz=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},Kz=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&qc.warn(Ud(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&qc.warn(Ud(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},kc=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&qc.warn(Ud(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},Xz=Math.ceil(34028234663852886e22),Fd=t=>{let e=kc(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>Xz)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},Mc=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},Qz=Mc,fE=t=>mE(t,32),pE=t=>mE(t,16),hE=t=>mE(t,8),mE=(t,e)=>{let r=Mc(t);if(r!==void 0&&Yz(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},Yz=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},Jz=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},GT=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},Zz=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return qc.warn(Ud(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},eW=t=>{if(t==null)return;let e=GT(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Bd=t=>kc(typeof t=="string"?Ao(t):t),tW=Bd,gE=t=>Fd(typeof t=="string"?Ao(t):t),rW=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ao=t=>{let e=t.match(rW);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},yE=t=>typeof t=="string"?KT(t):kc(t),nW=yE,sW=yE,iW=t=>typeof t=="string"?KT(t):Fd(t),KT=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},XT=t=>Mc(typeof t=="string"?Ao(t):t),oW=XT,aW=t=>fE(typeof t=="string"?Ao(t):t),gi=t=>pE(typeof t=="string"?Ao(t):t),EE=t=>hE(typeof t=="string"?Ao(t):t),Ud=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),qc={warn:console.warn}});function Fc(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${cW[n]}, ${c} ${vE[r]} ${e} ${u}:${l}:${d} GMT`}var cW,vE,uW,lW,dW,wE,fW,pW,hW,bE,RE,$c,mW,gW,yW,SE,EW,_W,SW,dn,vW,wW,xo,QT=w(()=>{_E();cW=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],vE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];uW=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),lW=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=uW.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u]=e,l=gi(xo(n)),d=dn(s,"month",1,12),m=dn(i,"day",1,31);return $c(l,d,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},dW=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),wE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=dW.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u,l]=e,d=gi(xo(n)),m=dn(s,"month",1,12),g=dn(i,"day",1,31),E=$c(d,m,g,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&E.setTime(E.getTime()-wW(l)),E},fW=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),pW=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),hW=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),bE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=fW.exec(t);if(e){let[r,n,s,i,o,a,c,u]=e;return $c(gi(xo(i)),SE(s),dn(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=pW.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return yW($c(mW(i),SE(s),dn(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=hW.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return $c(gi(xo(u)),SE(n),dn(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},RE=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Bd(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},$c=(t,e,r,n)=>{let s=e-1;return _W(t,s,r),new Date(Date.UTC(t,s,r,dn(n.hours,"hour",0,23),dn(n.minutes,"minute",0,59),dn(n.seconds,"seconds",0,60),vW(n.fractionalMilliseconds)))},mW=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+gi(xo(t));return r<e?r+100:r},gW=50*365*24*60*60*1e3,yW=t=>t.getTime()-new Date().getTime()>gW?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,SE=t=>{let e=vE.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},EW=[31,28,31,30,31,30,31,31,30,31,30,31],_W=(t,e,r)=>{let n=EW[e];if(e===1&&SW(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${vE[e]} in ${t}: ${r}`)},SW=t=>t%4===0&&(t%100!==0||t%400===0),dn=(t,e,r,n)=>{let s=EE(xo(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},vW=t=>t==null?0:gE("0."+t)*1e3,wW=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},xo=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var Uc={};At(Uc,{__addDisposableResource:()=>vA,__assign:()=>jd,__asyncDelegator:()=>pA,__asyncGenerator:()=>fA,__asyncValues:()=>hA,__await:()=>Po,__awaiter:()=>oA,__classPrivateFieldGet:()=>EA,__classPrivateFieldIn:()=>SA,__classPrivateFieldSet:()=>_A,__createBinding:()=>Vd,__decorate:()=>ZT,__disposeResources:()=>wA,__esDecorate:()=>tA,__exportStar:()=>cA,__extends:()=>YT,__generator:()=>aA,__importDefault:()=>yA,__importStar:()=>gA,__makeTemplateObject:()=>mA,__metadata:()=>iA,__param:()=>eA,__propKey:()=>nA,__read:()=>AE,__rest:()=>JT,__rewriteRelativeImportExtension:()=>bA,__runInitializers:()=>rA,__setFunctionName:()=>sA,__spread:()=>uA,__spreadArray:()=>dA,__spreadArrays:()=>lA,__values:()=>Hd,default:()=>CW});function YT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");CE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function JT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function ZT(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function eA(t,e){return function(r,n){e(r,n,t)}}function tA(t,e,r,n,s,i){function o(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,m=!1,g=r.length-1;g>=0;g--){var E={};for(var b in n)E[b]=b==="access"?{}:n[b];for(var b in n.access)E.access[b]=n.access[b];E.addInitializer=function(A){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(A||null))};var x=(0,r[g])(a==="accessor"?{get:l.get,set:l.set}:l[c],E);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=o(x.get))&&(l.get=d),(d=o(x.set))&&(l.set=d),(d=o(x.init))&&s.unshift(d)}else(d=o(x))&&(a==="field"?s.unshift(d):l[c]=d)}u&&Object.defineProperty(u,n.name,l),m=!0}function rA(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function nA(t){return typeof t=="symbol"?t:"".concat(t)}function sA(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function iA(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oA(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function aA(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function cA(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Vd(e,t,r)}function Hd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function AE(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function uA(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(AE(arguments[e]));return t}function lA(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function dA(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Po(t){return this instanceof Po?(this.v=t,this):new Po(t)}function fA(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(E){return Promise.resolve(E).then(g,d)}}function a(g,E){n[g]&&(s[g]=function(b){return new Promise(function(x,A){i.push([g,b,x,A])>1||c(g,b)})},E&&(s[g]=E(s[g])))}function c(g,E){try{u(n[g](E))}catch(b){m(i[0][3],b)}}function u(g){g.value instanceof Po?Promise.resolve(g.value.v).then(l,d):m(i[0][2],g)}function l(g){c("next",g)}function d(g){c("throw",g)}function m(g,E){g(E),i.shift(),i.length&&c(i[0][0],i[0][1])}}function pA(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Po(t[s](o)),done:!1}:i?i(o):o}:i}}function hA(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Hd=="function"?Hd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function mA(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gA(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=TE(t),n=0;n<r.length;n++)r[n]!=="default"&&Vd(e,t,r[n]);return bW(e,t),e}function yA(t){return t&&t.__esModule?t:{default:t}}function EA(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function _A(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function SA(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function vA(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function wA(t){function e(i){t.error=t.hasError?new RW(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function bA(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}var CE,jd,Vd,bW,TE,RW,CW,Bc=w(()=>{CE=function(t,e){return CE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},CE(t,e)};jd=function(){return jd=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},jd.apply(this,arguments)};Vd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};bW=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},TE=function(t){return TE=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},TE(t)};RW=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};CW={__extends:YT,__assign:jd,__rest:JT,__decorate:ZT,__param:eA,__esDecorate:tA,__runInitializers:rA,__propKey:nA,__setFunctionName:sA,__metadata:iA,__awaiter:oA,__generator:aA,__createBinding:Vd,__exportStar:cA,__values:Hd,__read:AE,__spread:uA,__spreadArrays:lA,__spreadArray:dA,__await:Po,__asyncGenerator:fA,__asyncDelegator:pA,__asyncValues:hA,__makeTemplateObject:mA,__importStar:gA,__importDefault:yA,__classPrivateFieldGet:EA,__classPrivateFieldSet:_A,__classPrivateFieldIn:SA,__addDisposableResource:vA,__disposeResources:wA,__rewriteRelativeImportExtension:bA}});var CA=_(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.randomUUID=void 0;var TW=(Bc(),le(Uc)),RA=TW.__importDefault(require("crypto"));zd.randomUUID=RA.default.randomUUID.bind(RA.default)});var xE=_(AA=>{"use strict";var TA=CA(),xt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),AW=()=>{if(TA.randomUUID)return TA.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,xt[t[0]]+xt[t[1]]+xt[t[2]]+xt[t[3]]+"-"+xt[t[4]]+xt[t[5]]+"-"+xt[t[6]]+xt[t[7]]+"-"+xt[t[8]]+xt[t[9]]+"-"+xt[t[10]]+xt[t[11]]+xt[t[12]]+xt[t[13]]+xt[t[14]]+xt[t[15]]};AA.v4=AW});var fn,xA=w(()=>{fn=T(xE())});var Ht,PA=w(()=>{Ht=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Ht.from=t=>t&&typeof t=="object"&&(t instanceof Ht||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Ht(String(t)):Ht(JSON.stringify(t));Ht.fromObject=Ht.from});function PE(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var IA=w(()=>{});function Nn(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var IE,NE,OE,NA,OA,xW,PW,IW,NW,OW,jc,DE,LE,DA=w(()=>{IE="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",NE="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",OE="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",NA="(\\d?\\d)",OA="(\\d{4})",xW=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),PW=new RegExp(`^${IE}, ${NA} ${NE} ${OA} ${OE} GMT$`),IW=new RegExp(`^${IE}, ${NA}-${NE}-(\\d\\d) ${OE} GMT$`),NW=new RegExp(`^${IE} ${NE} ( [1-9]|\\d\\d) ${OE} ${OA}$`),OW=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],jc=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},DE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=xW.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,i,o,a,,c,u]=e;Nn(n,1,12),Nn(s,1,31),Nn(i,0,23),Nn(o,0,59),Nn(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,d,m,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],E=d==="-"?1:-1;l.setTime(l.getTime()+E*(Number(m)*60*60*1e3+Number(g)*60*1e3))}return l},LE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=PW.exec(t))?[,e,r,n,s,i,o,a]=c:(c=IW.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=NW.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){let u=Date.UTC(Number(n),OW.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Nn(e,1,31),Nn(s,0,23),Nn(i,0,59),Nn(o,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function kE(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=e+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var LA=w(()=>{});var Hc,kA=w(()=>{Hc=t=>{let e=t.length,r=[],n=!1,s,i=0;for(let o=0;o<e;++o){let a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break;default:}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function ME(t){return new Xe(String(t),"bigDecimal")}var MA,Xe,qA=w(()=>{MA=/^-?\d*(\.\d+)?$/,Xe=class t{constructor(e,r){f(this,"string");f(this,"type");if(this.string=e,this.type=r,!MA.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&MA.test(r.string)}}});var $A={};At($A,{LazyJsonString:()=>Ht,NumericValue:()=>Xe,_parseEpochTimestamp:()=>jc,_parseRfc3339DateTimeWithOffset:()=>DE,_parseRfc7231DateTime:()=>LE,copyDocumentWithTransform:()=>Wz,dateToUtcString:()=>Fc,expectBoolean:()=>Kz,expectByte:()=>hE,expectFloat32:()=>Fd,expectInt:()=>Qz,expectInt32:()=>fE,expectLong:()=>Mc,expectNonNull:()=>Jz,expectNumber:()=>kc,expectObject:()=>GT,expectShort:()=>pE,expectString:()=>Zz,expectUnion:()=>eW,generateIdempotencyToken:()=>fn.v4,handleFloat:()=>nW,limitedParseDouble:()=>yE,limitedParseFloat:()=>sW,limitedParseFloat32:()=>iW,logger:()=>qc,nv:()=>ME,parseBoolean:()=>Gz,parseEpochTimestamp:()=>RE,parseRfc3339DateTime:()=>lW,parseRfc3339DateTimeWithOffset:()=>wE,parseRfc7231DateTime:()=>bE,quoteHeader:()=>PE,splitEvery:()=>kE,splitHeader:()=>Hc,strictParseByte:()=>EE,strictParseDouble:()=>Bd,strictParseFloat:()=>tW,strictParseFloat32:()=>gE,strictParseInt:()=>oW,strictParseInt32:()=>aW,strictParseLong:()=>XT,strictParseShort:()=>gi});var nr=w(()=>{WT();QT();xA();PA();_E();IA();DA();LA();kA();qA()});var Vt,Io=w(()=>{Vt=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});var FA,qE,UA=w(()=>{FA=T(St()),qE=class{constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){f(this,"marshaller");f(this,"serializer");f(this,"deserializer");f(this,"serdeContext");f(this,"defaultContentType");this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let d={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:d,body:m}}for await(let d of e)yield d}};return s.serialize(l,d=>{if(d[u])return{headers:d.headers,body:d.body};let m=Object.keys(d).find(N=>N!=="__type")??"",{additionalHeaders:g,body:E,eventType:b,explicitPayloadContentType:x}=this.writeEventBody(m,o,d);return{headers:{":event-type":{type:"string",value:b},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:x??c},...g},body:E}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async m=>{let g=Object.keys(m).find(E=>E!=="__type")??"";if(g==="initial-response"){let E=await this.deserializer.read(r,m[g].body);return delete E[i],{[c]:!0,...E}}else if(g in a){let E=a[g];return{[g]:await this.deserializer.read(E,m[g].body)}}else return{$unknown:m}}),l=u[Symbol.asyncIterator](),d=await l.next();if(d.done)return u;if(d.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,g]of Object.entries(d.value))n[m]=g}return{async*[Symbol.asyncIterator](){for(d?.value?.[c]||(yield d.value);;){let{done:m,value:g}=await l.next();if(m)break;yield g}}}}writeEventBody(e,r,n){let s=this.serializer,i=e,o=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let m=r.getMemberSchema(e);if(m.isStructSchema()){for(let[g,E]of m.structIterator()){let{eventHeader:b,eventPayload:x}=E.getMergedTraits();if(x){o=g;break}else if(b){let A=n[e][g],N="binary";E.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?N="integer":N="long":E.isTimestampSchema()?N="timestamp":E.isStringSchema()?N="string":E.isBooleanSchema()&&(N="boolean"),A!=null&&(u[g]={type:N,value:A},delete n[e][g])}}if(o!==null){let g=m.getMemberSchema(o);g.isBlobSchema()?a="application/octet-stream":g.isStringSchema()&&(a="text/plain"),s.write(g,n[e][o])}else s.write(m,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,g]=n[e];i=m,s.write(15,g)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??FA.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var BA={};At(BA,{EventStreamSerde:()=>qE});var jA=w(()=>{UA()});var Wd,yi,Gd=w(()=>{$e();Wd=T(Ne());Io();yi=class extends Vt{constructor(r){super();f(this,"options");this.options=r}getRequestType(){return Wd.HttpRequest}getResponseType(){return Wd.HttpResponse}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(let[s,i]of n.url.searchParams.entries())r.query[s]=i;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,s){let i=K.of(n.input),o=un(n.traits??{});if(o.endpoint){let a=o.endpoint?.[0];if(typeof a=="string"){let c=[...i.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of c){let l=s[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);a=a.replace(`{${u}}`,l)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:r}=await Promise.resolve().then(()=>(jA(),BA));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,s,i,o){return[]}getEventStreamMarshaller(){let r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}});var HA,VA,Ei,zA=w(()=>{$e();nr();HA=T(Ne()),VA=T(Nc());Cd();Td();Gd();Ei=class extends yi{async serializeRequest(e,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=K.of(e?.input),l=u.getSchema(),d=!1,m,g=new HA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(g,c),this.setHostPrefix(g,e,s);let E=un(e.traits);if(E.http){g.method=E.http[0];let[b,x]=E.http[1].split("?");g.path=="/"?g.path=b:g.path+=b;let A=new URLSearchParams(x??"");Object.assign(o,Object.fromEntries(A))}}for(let[E,b]of u.structIterator()){let x=b.getMergedTraits()??{},A=s[E];if(A!=null)if(x.httpPayload)b.isStreaming()?b.isStructSchema()?s[E]&&(m=await this.serializeEventStream({eventStream:s[E],requestSchema:u})):m=A:(i.write(b,A),m=i.flush()),delete s[E];else if(x.httpLabel){i.write(b,A);let N=i.flush();g.path.includes(`{${E}+}`)?g.path=g.path.replace(`{${E}+}`,N.split("/").map(cn).join("/")):g.path.includes(`{${E}}`)&&(g.path=g.path.replace(`{${E}}`,cn(N))),delete s[E]}else if(x.httpHeader)i.write(b,A),a[x.httpHeader.toLowerCase()]=String(i.flush()),delete s[E];else if(typeof x.httpPrefixHeaders=="string"){for(let[N,M]of Object.entries(A)){let U=x.httpPrefixHeaders+N;i.write([b.getValueSchema(),{httpHeader:U}],M),a[U.toLowerCase()]=i.flush()}delete s[E]}else x.httpQuery||x.httpQueryParams?(this.serializeQuery(b,A,o),delete s[E]):d=!0}return d&&s&&(i.write(l,s),m=i.flush()),g.headers=a,g.query=o,g.body=m,g}serializeQuery(e,r,n){let s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let o=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),i],c);let u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,i=K.of(e.output),o={};if(n.statusCode>=300){let c=await jr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await jr(n.body,r);if(c.byteLength>0){let u=await s.read(i,c);for(let l of a)o[l]=u[l]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(e,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=K.of(e),u=[];for(let[l,d]of c.structIterator()){let m=d.getMemberTraits();if(m.httpPayload){if(d.isStreaming())d.isStructSchema()?o[l]=await this.deserializeEventStream({response:n,responseSchema:c}):o[l]=(0,VA.sdkStreamMixin)(n.body);else if(n.body){let E=await jr(n.body,r);E.byteLength>0&&(o[l]=await a.read(d,E))}}else if(m.httpHeader){let g=String(m.httpHeader).toLowerCase(),E=n.headers[g];if(E!=null)if(d.isListSchema()){let b=d.getValueSchema();b.getMergedTraits().httpHeader=g;let x;b.isTimestampSchema()&&b.getSchema()===4?x=kE(E,",",2):x=Hc(E);let A=[];for(let N of x)A.push(await a.read(b,N.trim()));o[l]=A}else o[l]=await a.read(d,E)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[g,E]of Object.entries(n.headers))if(g.startsWith(m.httpPrefixHeaders)){let b=d.getValueSchema();b.getMergedTraits().httpHeader=g,o[l][g.slice(m.httpPrefixHeaders.length)]=await a.read(b,E)}}else m.httpResponseCode?o[l]=n.statusCode:u.push(l)}return u}}});var WA,On,GA=w(()=>{$e();WA=T(Ne());Cd();Gd();On=class extends yi{async serializeRequest(e,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=K.of(e?.input),u=c.getSchema(),l,d=new WA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(d,a),this.setHostPrefix(d,e,r));let m={...r};if(r){let g=c.getEventStreamMember();if(g){if(m[g]){let E={};for(let[b,x]of c.structIterator())b!==g&&m[b]&&(s.write(x,m[b]),E[b]=s.flush());l=await this.serializeEventStream({eventStream:m[g],requestSchema:c,initialRequest:E})}}else s.write(u,m),l=s.flush()}return d.headers=o,d.query=i,d.body=l,d.method="POST",d}async deserializeResponse(e,r,n){let s=this.deserializer,i=K.of(e.output),o={};if(n.statusCode>=300){let c=await jr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await jr(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var $E,FE=w(()=>{Td();$E=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?o.split("/").map(a=>cn(a)).join("/"):cn(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function UE(t,e){return new Kd(t,e)}var KA,Kd,XA=w(()=>{KA=T(Ne());FE();Kd=class{constructor(e,r){f(this,"input");f(this,"context");f(this,"query",{});f(this,"method","");f(this,"headers",{});f(this,"path","");f(this,"body",null);f(this,"hostname","");f(this,"resolvePathStack",[]);this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new KA.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=$E(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function hr(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}var Xd=w(()=>{});var BE,QA,_i,jE=w(()=>{$e();nr();BE=T(vt()),QA=T(St());Io();Xd();_i=class extends Vt{constructor(r){super();f(this,"settings");this.settings=r}read(r,n){let s=K.of(r);if(s.isListSchema())return Hc(n).map(i=>this.read(s.getValueSchema(),i));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??BE.fromBase64)(n);if(s.isTimestampSchema())switch(hr(s,this.settings)){case 5:return DE(n);case 6:return LE(n);case 7:return jc(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isStringSchema()){let i=s.getMergedTraits().mediaType,o=n;if(i)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(i==="application/json"||i.endsWith("+json"))&&(o=Ht.from(o)),o}return s.isNumericSchema()?Number(n):s.isBigIntegerSchema()?BigInt(n):s.isBigDecimalSchema()?new Xe(n,"bigDecimal"):s.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??QA.toUtf8)((this.serdeContext?.base64Decoder??BE.fromBase64)(r))}}});var Qd,Si,YA=w(()=>{$e();Qd=T(St());Io();jE();Si=class extends Vt{constructor(r,n){super();f(this,"codecDeserializer");f(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new _i(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){let s=K.of(r),i=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??Qd.toUtf8;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(n));if(i.httpPayload){if(s.isBlobSchema()){let a=this.serdeContext?.utf8Decoder??Qd.fromUtf8;return typeof n=="string"?a(n):n}else if(s.isStringSchema())return"byteLength"in n?o(n):n}return this.codecDeserializer.read(s,n)}}});var HE,Vc,VE=w(()=>{$e();nr();HE=T(vt());Io();Xd();Vc=class extends Vt{constructor(r){super();f(this,"settings");f(this,"stringBuffer","");this.settings=r}write(r,n){let s=K.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${s.getName(!0)}`);switch(hr(s,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Fc(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??HE.toBase64)(n);return}if(s.isListSchema()&&Array.isArray(n)){let a="";for(let c of n){this.write([s.getValueSchema(),s.getMergedTraits()],c);let u=this.flush(),l=s.getValueSchema().isTimestampSchema()?u:PE(u);a!==""&&(a+=", "),a+=l}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":let i=s.getMergedTraits().mediaType,o=n;if(i&&((i==="application/json"||i.endsWith("+json"))&&(o=Ht.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??HE.toBase64)(o.toString());return}this.stringBuffer=n;break;default:this.stringBuffer=String(n)}}flush(){let r=this.stringBuffer;return this.stringBuffer="",r}}});var vi,JA=w(()=>{$e();VE();vi=class{constructor(e,r,n=new Vc(r)){f(this,"codecSerializer");f(this,"stringSerializer");f(this,"buffer");this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=K.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var ZA={};At(ZA,{FromStringShapeDeserializer:()=>_i,HttpBindingProtocol:()=>Ei,HttpInterceptingShapeDeserializer:()=>Si,HttpInterceptingShapeSerializer:()=>vi,HttpProtocol:()=>yi,RequestBuilder:()=>Kd,RpcProtocol:()=>On,SerdeContext:()=>Vt,ToStringShapeSerializer:()=>Vc,collectBody:()=>jr,determineTimestampFormat:()=>hr,extendedEncodeURIComponent:()=>cn,requestBuilder:()=>UE,resolvedPath:()=>$E});var sr=w(()=>{Cd();Td();zA();Gd();GA();XA();FE();jE();YA();JA();VE();Xd();Io()});var ex=w(()=>{sr()});function DW(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var tx=w(()=>{});var wi,rx=w(()=>{wi=class{constructor(e){f(this,"authSchemes",new Map);for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var nx,zE,WE,sx=w(()=>{nx=T(Ne()),zE=T(xn()),WE=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=nx.HttpRequest.clone(e);if(n.in===zE.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===zE.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var ix,GE,ox=w(()=>{ix=T(Ne()),GE=class{async sign(e,r,n){let s=ix.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Dn,ax=w(()=>{Dn=class{async sign(e,r,n){return e}}});var cx=w(()=>{sx();ox();ax()});var ux,LW,KE,Yd,XE,lx=w(()=>{ux=t=>function(r){return Yd(r)&&r.expiration.getTime()-Date.now()<t},LW=3e5,KE=ux(3e5),Yd=t=>t.expiration!==void 0,XE=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,i,o,a=!1,c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var dx=w(()=>{rx();cx();lx()});var bi={};At(bi,{DefaultIdentityProviderConfig:()=>wi,EXPIRATION_MS:()=>LW,HttpApiKeyAuthSigner:()=>WE,HttpBearerAuthSigner:()=>GE,NoAuthSigner:()=>Dn,createIsIdentityExpiredFunction:()=>ux,createPaginator:()=>TC,doesIdentityRequireRefresh:()=>Yd,getHttpAuthSchemeEndpointRuleSetPlugin:()=>Tc,getHttpAuthSchemePlugin:()=>gV,getHttpSigningPlugin:()=>xc,getSmithyContext:()=>lV,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>lC,httpAuthSchemeMiddleware:()=>Cc,httpAuthSchemeMiddlewareOptions:()=>yC,httpSigningMiddleware:()=>xy,httpSigningMiddlewareOptions:()=>wC,isIdentityExpired:()=>KE,memoizeIdentityProvider:()=>XE,normalizeProvider:()=>Es,requestBuilder:()=>UE,setFeature:()=>DW});var ir=w(()=>{iC();_C();RC();CC();AC();ex();tx();dx()});var Ci=_(Ri=>{"use strict";var YE=xn(),JE=class{constructor({size:e,params:r}){f(this,"capacity");f(this,"data",new Map);f(this,"parameters",[]);this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},kW=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),fx=t=>kW.test(t)||t.startsWith("[")&&t.endsWith("]"),MW=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),e_=(t,e=!1)=>{if(!e)return MW.test(t);let r=t.split(".");for(let n of r)if(!e_(n))return!1;return!0},ZE={},zc="endpoints";function ws(t){return typeof t!="object"||t==null?t:"ref"in t?`$${ws(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(ws).join(", ")})`:JSON.stringify(t,null,2)}var Pt=class extends Error{constructor(e){super(e),this.name="EndpointError"}},qW=(t,e)=>t===e,$W=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Pt(`Path: '${t}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Pt(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},px=(t,e)=>$W(e).reduce((r,n)=>{if(typeof r!="object")throw new Pt(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),FW=t=>t!=null,UW=t=>!t,QE={[YE.EndpointURLScheme.HTTP]:80,[YE.EndpointURLScheme.HTTPS]:443},BW=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:g,protocol:E="",path:b="",query:x={}}=t,A=new URL(`${E}//${m}${g?`:${g}`:""}${b}`);return A.search=Object.entries(x).map(([N,M])=>`${N}=${M}`).join("&"),A}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(YE.EndpointURLScheme).includes(c))return null;let u=fx(s),l=r.includes(`${n}:${QE[c]}`)||typeof t=="string"&&t.includes(`${n}:${QE[c]}`),d=`${n}${l?`:${QE[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},jW=(t,e)=>t===e,HW=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),VW=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),zW={booleanEquals:qW,getAttr:px,isSet:FW,isValidHostLabel:e_,not:UW,parseURL:BW,stringEquals:jW,substring:HW,uriEncode:VW},hx=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));let o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(px(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},WW=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],Jd=(t,e,r)=>{if(typeof t=="string")return hx(t,r);if(t.fn)return gx.callFunction(t,r);if(t.ref)return WW(t,r);throw new Pt(`'${e}': ${String(t)} is not a string, function or reference.`)},mx=({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:gx.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in ZE&&s[1]!=null?ZE[s[0]][s[1]](...n):zW[t](...n)},gx={evaluateExpression:Jd,callFunction:mx},GW=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Pt(`'${t}' is already defined in Reference Record.`);let n=mx(e,r);return r.logger?.debug?.(`${zc} evaluateCondition: ${ws(e)} = ${ws(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},t_=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:i}=GW(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${zc} assign: ${i.name} := ${ws(i.value)}`))}return{result:!0,referenceRecord:r}},KW=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=Jd(i,"Header value entry",e);if(typeof o!="string")throw new Pt(`Header '${n}' value '${o}' is not a string`);return o})}),{}),yx=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:_x.getEndpointProperty(s,e)}),{}),Ex=(t,e)=>{if(Array.isArray(t))return t.map(r=>Ex(r,e));switch(typeof t){case"string":return hx(t,e);case"object":if(t===null)throw new Pt(`Unexpected endpoint property: ${t}`);return _x.getEndpointProperties(t,e);case"boolean":return t;default:throw new Pt(`Unexpected endpoint property type: ${typeof t}`)}},_x={getEndpointProperty:Ex,getEndpointProperties:yx},XW=(t,e)=>{let r=Jd(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Pt(`Endpoint URL must be a string, got ${typeof r}`)},QW=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=t_(r,e);if(!s)return;let o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${zc} Resolving endpoint from template: ${ws(n)}`),{...u!=null&&{headers:KW(u,o)},...c!=null&&{properties:yx(c,o)},url:XW(a,o)}},YW=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:i}=t_(r,e);if(s)throw new Pt(Jd(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Sx=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=QW(r,e);if(n)return n}else if(r.type==="error")YW(r,e);else if(r.type==="tree"){let n=vx.evaluateTreeRule(r,e);if(n)return n}else throw new Pt(`Unknown endpoint rule: ${r}`);throw new Pt("Rules evaluation failed")},JW=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=t_(r,e);if(s)return vx.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},vx={evaluateRules:Sx,evaluateTreeRule:JW},ZW=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${zc} Initial EndpointParams: ${ws(r)}`);let o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(let[u,l]of o)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Pt(`Missing required parameter: '${u}'`);let c=Sx(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${zc} Resolved endpoint: ${ws(c)}`),c};Ri.EndpointCache=JE;Ri.EndpointError=Pt;Ri.customEndpointFunctions=ZE;Ri.isIpAddress=fx;Ri.isValidHostLabel=e_;Ri.resolveEndpoint=ZW});var bx=_(wx=>{"use strict";function eG(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}wx.parseQueryString=eG});var bs=_(Cx=>{"use strict";var tG=bx(),Rx=t=>{if(typeof t=="string")return Rx(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:i}=t,o;return i&&(o=tG.parseQueryString(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};Cx.parseUrl=Rx});var Oo=_(Vr=>{"use strict";var No=Ci(),rG=bs(),Ax=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Ax(r))return!1;return!0}return!(!No.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||No.isIpAddress(t))},Tx=":",nG="/",sG=t=>{let e=t.split(Tx);if(e.length<6)return null;let[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Tx)==="")return null;let c=a.map(u=>u.split(nG)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},iG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],oG="1.1",xx={partitions:iG,version:oG},Px=xx,Ix="",Nx=t=>{let{partitions:e}=Px;for(let n of e){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(let n of e){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Ox=(t,e="")=>{Px=t,Ix=e},aG=()=>{Ox(xx,"")},cG=()=>Ix,Dx={isVirtualHostableS3Bucket:Ax,parseArn:sG,partition:Nx};No.customEndpointFunctions.aws=Dx;var uG=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>Lx(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},Lx=t=>rG.parseUrl(t.url);Object.defineProperty(Vr,"EndpointError",{enumerable:!0,get:function(){return No.EndpointError}});Object.defineProperty(Vr,"isIpAddress",{enumerable:!0,get:function(){return No.isIpAddress}});Object.defineProperty(Vr,"resolveEndpoint",{enumerable:!0,get:function(){return No.resolveEndpoint}});Vr.awsEndpointFunctions=Dx;Vr.getUserAgentPrefix=cG;Vr.partition=Nx;Vr.resolveDefaultAwsRegionalEndpointsConfig=uG;Vr.setPartitionInfo=Ox;Vr.toEndpointV1=Lx;Vr.useDefaultPartitionInfo=aG});var Zd,Do,kx=w(()=>{Zd={warningEmitted:!1},Do=t=>{t&&!Zd.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(Zd.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Rs(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Mx=w(()=>{});function qx(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var $x=w(()=>{});function Fx(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Ux=w(()=>{});var Cs={};At(Cs,{emitWarningIfUnsupportedVersion:()=>Do,setCredentialFeature:()=>Rs,setFeature:()=>qx,setTokenFeature:()=>Fx,state:()=>Zd});var zr=w(()=>{kx();Mx();$x();Ux()});var Bx,r_,jx=w(()=>{Bx=T(Ne()),r_=t=>Bx.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Lo,n_=w(()=>{Lo=t=>new Date(Date.now()+t)});var Hx,Vx=w(()=>{n_();Hx=(t,e)=>Math.abs(Lo(e).getTime()-t)>=3e5});var s_,zx=w(()=>{Vx();s_=(t,e)=>{let r=Date.parse(t);return Hx(r,e)?r-Date.now():e}});var i_=w(()=>{jx();n_();zx()});var Wx,Wc,ko,or,o_,a_=w(()=>{Wx=T(Ne());i_();Wc=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},ko=async t=>{let e=Wc("context",t.context),r=Wc("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Wc("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},or=class{async sign(e,r,n){if(!Wx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ko(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[d,m]=u.authSchemes;d?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await o.sign(e,{signingDate:Lo(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??r_(r.$response);if(n){let s=Wc("config",e.config),i=s.systemClockOffset;s.systemClockOffset=s_(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=r_(e);if(n){let s=Wc("config",r.config);s.systemClockOffset=s_(n,s.systemClockOffset)}}},o_=or});var Gx,Gc,Kx=w(()=>{Gx=T(Ne());i_();a_();Gc=class extends or{async sign(e,r,n){if(!Gx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await ko(n),l=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:Lo(s.systemClockOffset),signingRegion:l,signingService:c})}}});var c_,Xx=w(()=>{c_=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var ef,u_=w(()=>{ef=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var Qx,Yx,Mo,Jx=w(()=>{Xx();u_();Qx="AWS_AUTH_SCHEME_PREFERENCE",Yx="auth_scheme_preference",Mo={environmentVariableSelector:(t,e)=>{if(e?.signingName&&ef(e.signingName)in t)return["httpBearerAuth"];if(Qx in t)return c_(t[Qx])},configFileSelector:t=>{if(Yx in t)return c_(t[Yx])},default:[]}});var zt=_(Ti=>{"use strict";var qo=class t extends Error{constructor(r,n=!0){let s,i=!0;typeof n=="boolean"?(s=void 0,i=n):n!=null&&typeof n=="object"&&(s=n.logger,i=n.tryNextLink??!0);super(r);f(this,"name","ProviderError");f(this,"tryNextLink");this.tryNextLink=i,Object.setPrototypeOf(this,t.prototype),s?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}},l_=class t extends qo{constructor(r,n=!0){super(r,n);f(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,t.prototype)}},d_=class t extends qo{constructor(r,n=!0){super(r,n);f(this,"name","TokenProviderError");Object.setPrototypeOf(this,t.prototype)}},lG=(...t)=>async()=>{if(t.length===0)throw new qo("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},dG=t=>()=>Promise.resolve(t),fG=(t,e,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return e===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(e(n)&&await a(),n))};Ti.CredentialsProviderError=l_;Ti.ProviderError=qo;Ti.TokenProviderError=d_;Ti.chain=lG;Ti.fromStatic=dG;Ti.memoize=fG});var f_,Zx,eP,tP=w(()=>{ir();f_=T(zt()),Zx=t=>(t.sigv4aSigningRegionSet=Es(t.sigv4aSigningRegionSet),t),eP={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new f_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new f_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var uf=_(ae=>{"use strict";var Ts=tE(),Ai=St(),pG=Iy(),iP=Ne(),rP=Bt(),tf=Hy(),oP="X-Amz-Algorithm",aP="X-Amz-Credential",E_="X-Amz-Date",cP="X-Amz-SignedHeaders",uP="X-Amz-Expires",__="X-Amz-Signature",S_="X-Amz-Security-Token",hG="X-Amz-Region-Set",v_="authorization",w_=E_.toLowerCase(),lP="date",dP=[v_,w_,lP],fP=__.toLowerCase(),af="x-amz-content-sha256",pP=S_.toLowerCase(),mG="host",hP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},mP=/^proxy-/,gP=/^sec-/,gG=[/^proxy-/i,/^sec-/i],rf="AWS4-HMAC-SHA256",yG="AWS4-ECDSA-P256-SHA256",yP="AWS4-HMAC-SHA256-PAYLOAD",EP="UNSIGNED-PAYLOAD",_P=50,b_="aws4_request",SP=60*60*24*7,$o={},nf=[],sf=(t,e,r)=>`${t}/${e}/${r}/${b_}`,vP=async(t,e,r,n,s)=>{let i=await nP(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${Ts.toHex(i)}:${e.sessionToken}`;if(o in $o)return $o[o];for(nf.push(o);nf.length>_P;)delete $o[nf.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,b_])a=await nP(t,a,c);return $o[o]=a},EG=()=>{nf.length=0,Object.keys($o).forEach(t=>{delete $o[t]})},nP=(t,e,r)=>{let n=new t(e);return n.update(Ai.toUint8Array(r)),n.digest()},p_=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let i=s.toLowerCase();(i in hP||e?.has(i)||mP.test(i)||gP.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},of=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===af)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||pG.isArrayBuffer(e)){let n=new r;return n.update(Ai.toUint8Array(e)),Ts.toHex(await n.digest())}return EP},h_=class{format(e){let r=[];for(let i of Object.keys(e)){let o=Ai.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=Ai.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(m_.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!_G.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(Ts.fromHex(e.value.replace(/\-/g,"")),1),d}}},_G=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,m_=class t{constructor(e){f(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&sP(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&sP(e),parseInt(Ts.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function sP(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var wP=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},bP=(t,e={})=>{let{headers:r,query:n={}}=iP.HttpRequest.clone(t);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},g_=t=>{t=iP.HttpRequest.clone(t);for(let e of Object.keys(t.headers))dP.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},RP=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===fP)continue;let s=tf.escapeUri(n);e.push(s);let i=t[n];typeof i=="string"?r[s]=`${s}=${tf.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${tf.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},SG=t=>vG(t).toISOString().replace(/\.\d{3}Z$/,"Z"),vG=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,cf=class{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){f(this,"service");f(this,"regionProvider");f(this,"credentialProvider");f(this,"sha256");f(this,"uriEscapePath");f(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=rP.normalizeProvider(n),this.credentialProvider=rP.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${RP(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let i=new this.sha256;i.update(Ai.toUint8Array(n));let o=await i.digest();return`${s}
${e}
${r}
${Ts.toHex(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return tf.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=SG(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},y_=class extends cf{constructor({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a});f(this,"headerFormatter",new h_)}async presign(r,n={}){let{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:u,signingRegion:l,signingService:d}=n,m=await this.credentialProvider();this.validateResolvedCredentials(m);let g=l??await this.regionProvider(),{longDate:E,shortDate:b}=this.formatDate(s);if(i>SP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=sf(b,g,d??this.service),A=bP(g_(r),{unhoistableHeaders:a,hoistableHeaders:u});m.sessionToken&&(A.query[S_]=m.sessionToken),A.query[oP]=rf,A.query[aP]=`${m.accessKeyId}/${x}`,A.query[E_]=E,A.query[uP]=i.toString(10);let N=p_(A,o,c);return A.query[cP]=this.getCanonicalHeaderList(N),A.query[__]=await this.getSignature(E,x,this.getSigningKey(m,g,b,d),this.createCanonicalRequest(A,N,await of(r,this.sha256))),A}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(s),d=sf(u,c,a??this.service),m=await of({headers:{},body:n},this.sha256),g=new this.sha256;g.update(r);let E=Ts.toHex(await g.digest()),b=[yP,l,d,i,E,m].join(`
`);return this.signString(b,{signingDate:s,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:s,signingService:i,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:s,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:c}=this.formatDate(n),u=new this.sha256(await this.getSigningKey(o,a,c,i));return u.update(Ai.toUint8Array(r)),Ts.toHex(await u.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=o??await this.regionProvider(),l=g_(r),{longDate:d,shortDate:m}=this.formatDate(n),g=sf(m,u,a??this.service);l.headers[w_]=d,c.sessionToken&&(l.headers[pP]=c.sessionToken);let E=await of(l,this.sha256);!wP(af,l.headers)&&this.applyChecksum&&(l.headers[af]=E);let b=p_(l,i,s),x=await this.getSignature(d,g,this.getSigningKey(c,u,m,a),this.createCanonicalRequest(l,b,E));return l.headers[v_]=`${rf} Credential=${c.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(b)}, Signature=${x}`,l}async getSignature(r,n,s,i){let o=await this.createStringToSign(r,n,i,rf),a=new this.sha256(await s);return a.update(Ai.toUint8Array(o)),Ts.toHex(await a.digest())}getSigningKey(r,n,s,i){return vP(this.sha256,r,s,n,i||this.service)}},wG={SignatureV4a:null};ae.ALGORITHM_IDENTIFIER=rf;ae.ALGORITHM_IDENTIFIER_V4A=yG;ae.ALGORITHM_QUERY_PARAM=oP;ae.ALWAYS_UNSIGNABLE_HEADERS=hP;ae.AMZ_DATE_HEADER=w_;ae.AMZ_DATE_QUERY_PARAM=E_;ae.AUTH_HEADER=v_;ae.CREDENTIAL_QUERY_PARAM=aP;ae.DATE_HEADER=lP;ae.EVENT_ALGORITHM_IDENTIFIER=yP;ae.EXPIRES_QUERY_PARAM=uP;ae.GENERATED_HEADERS=dP;ae.HOST_HEADER=mG;ae.KEY_TYPE_IDENTIFIER=b_;ae.MAX_CACHE_SIZE=_P;ae.MAX_PRESIGNED_TTL=SP;ae.PROXY_HEADER_PATTERN=mP;ae.REGION_SET_PARAM=hG;ae.SEC_HEADER_PATTERN=gP;ae.SHA256_HEADER=af;ae.SIGNATURE_HEADER=fP;ae.SIGNATURE_QUERY_PARAM=__;ae.SIGNED_HEADERS_QUERY_PARAM=cP;ae.SignatureV4=y_;ae.SignatureV4Base=cf;ae.TOKEN_HEADER=pP;ae.TOKEN_QUERY_PARAM=S_;ae.UNSIGNABLE_PATTERNS=gG;ae.UNSIGNED_PAYLOAD=EP;ae.clearCredentialCache=EG;ae.createScope=sf;ae.getCanonicalHeaders=p_;ae.getCanonicalQuery=RP;ae.getPayloadHash=of;ae.getSigningKey=vP;ae.hasHeader=wP;ae.moveHeadersToQuery=bP;ae.prepareRequest=g_;ae.signatureV4aContainer=wG});function bG(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=XE(e,KE,Yd):r?n=Es(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function RG(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var R_,xi,CP,TP=w(()=>{zr();ir();R_=T(uf()),xi=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let l=bG(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=RG(t,l);r&&!d.attributed?(n=async m=>d(m).then(g=>Rs(g,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,a;return t.signer?a=Es(t.signer):t.regionInfoProvider?a=()=>Es(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:d,signingService:m}=u;t.signingRegion=t.signingRegion||d||l,t.signingName=t.signingName||m||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},E=t.signerConstructor||R_.SignatureV4;return new E(g)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Es(t.region)(),properties:{}},u);let l=u.signingRegion,d=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||d||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||R_.SignatureV4;return new g(m)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})},CP=xi});var AP=w(()=>{a_();Kx();Jx();tP();TP()});var xP={};At(xP,{AWSSDKSigV4Signer:()=>o_,AwsSdkSigV4ASigner:()=>Gc,AwsSdkSigV4Signer:()=>or,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mo,NODE_SIGV4A_CONFIG_OPTIONS:()=>eP,getBearerTokenEnvKey:()=>ef,resolveAWSSDKSigV4Config:()=>CP,resolveAwsSdkSigV4AConfig:()=>Zx,resolveAwsSdkSigV4Config:()=>xi,validateSigningProperties:()=>ko});var C_=w(()=>{AP();u_()});function As(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function lf(t){return t[T_]=!0,t}var T_,df=w(()=>{T_=Symbol("@smithy/core/cbor::tagSymbol")});function NP(t){Oe=t,kn=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength)}function pn(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(Oe[t]&224)>>5,n=Oe[t]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=DP[n],a=o+1;if(i=a,e-t<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=t+1;o===1?s=Oe[c]:o===2?s=kn.getUint16(c):o===4?s=kn.getUint32(c):s=kn.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return de=i,A_(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,de=i,A_(o)}else if(n===2||n===3){let o=Yc(t+i,e),a=BigInt(0),c=t+i+de;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(Oe[u]);return de=i+de+o,n===3?-a-BigInt(1):a}else if(n===4){let o=pn(t+i,e),[a,c]=o,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),d,m=c<0?"-":"";return d=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),d=d.replace(/^0+/g,""),d===""&&(d="0"),d[0]==="."&&(d="0"+d),d=m+d,de=i+de,ME(d)}else{let o=pn(t+i,e);return de=i+de,lf({tag:A_(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return NG(t,e);case 5:return MG(t,e);case 4:return LG(t,e);case 2:return OG(t,e)}else switch(r){case 3:return IG(t,e);case 5:return kG(t,e);case 4:return DG(t,e);case 2:return D_(t,e)}default:return qG(t,e)}}function OP(t,e,r){return AG&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):PP?PP.decode(t.subarray(e,r)):(0,IP.toUtf8)(t.subarray(e,r))}function xG(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function PG(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function Yc(t,e){let r=Oe[t]&31;if(r<24)return de=1,r;if(r===24||r===25||r===26||r===27){let n=DP[r];if(de=n+1,e-t<de)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?Oe[s]:n===2?kn.getUint16(s):n===4?kn.getUint32(s):xG(kn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function IG(t,e){let r=Yc(t,e),n=de;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=OP(Oe,t,t+r);return de=n+r,s}function NG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Oe[t]===255){let c=As(r.length);return c.set(r,0),de=t-n+2,OP(c,0,c.length)}let s=(Oe[t]&224)>>5,i=Oe[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=D_(t,e);t+=de;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function D_(t,e){let r=Yc(t,e),n=de;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=Oe.subarray(t,t+r);return de=n+r,s}function OG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Oe[t]===255){let c=As(r.length);return c.set(r,0),de=t-n+2,c}let s=(Oe[t]&224)>>5,i=Oe[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=D_(t,e);t+=de;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function DG(t,e){let r=Yc(t,e),n=de;t+=n;let s=t,i=Array(r);for(let o=0;o<r;++o){let a=pn(t,e),c=de;i[o]=a,t+=c}return de=n+(t-s),i}function LG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Oe[t]===255)return de=t-n+2,r;let s=pn(t,e);t+=de,r.push(s)}throw new Error("expected break marker.")}function kG(t,e){let r=Yc(t,e),n=de;t+=n;let s=t,i={};for(let o=0;o<r;++o){if(t>=e)throw new Error("unexpected end of map payload.");let a=(Oe[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=pn(t,e);t+=de;let u=pn(t,e);t+=de,i[c]=u}return de=n+(t-s),i}function MG(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(Oe[t]===255)return de=t-r+2,n;let s=(Oe[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=pn(t,e);t+=de;let o=pn(t,e);t+=de,n[i]=o}throw new Error("expected break marker.")}function qG(t,e){let r=Oe[t]&31;switch(r){case 21:case 20:return de=1,r===21;case 22:return de=1,null;case 23:return de=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return de=3,PG(Oe[t+1],Oe[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return de=5,kn.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return de=9,kn.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function A_(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var IP,TG,AG,Oe,kn,PP,de,DP,LP=w(()=>{nr();IP=T(St());df();TG=typeof TextDecoder<"u",AG=typeof Buffer<"u",Oe=As(0),kn=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength),PP=TG?new TextDecoder:null,de=0;DP={[24]:1,[25]:2,[26]:4,[27]:8}});function k_(t){Z.byteLength-X<t&&(X<16e6?pf(Math.max(Z.byteLength*4,Z.byteLength+t)):pf(Z.byteLength+t+16e6))}function M_(){let t=As(X);return t.set(Z.subarray(0,X),0),X=0,t}function pf(t){let e=Z;Z=As(t),e&&(e.copy?e.copy(Z,0,0,e.byteLength):Z.set(e,0)),$n=new DataView(Z.buffer,Z.byteOffset,Z.byteLength)}function qn(t,e){e<24?Z[X++]=t<<5|e:e<256?(Z[X++]=t<<5|24,Z[X++]=e):e<65536?(Z[X++]=t<<5|25,$n.setUint16(X,e),X+=2):e<2**32?(Z[X++]=t<<5|26,$n.setUint32(X,e),X+=4):(Z[X++]=t<<5|27,$n.setBigUint64(X,typeof e=="bigint"?e:BigInt(e)),X+=8)}function qP(t){let e=[t];for(;e.length;){let r=e.pop();if(k_(typeof r=="string"?r.length*4:64),typeof r=="string"){if(kP)qn(3,Buffer.byteLength(r)),X+=Z.write(r,X);else{let n=(0,MP.fromUtf8)(r);qn(3,n.byteLength),Z.set(n,X),X+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?Z[X++]=s<<5|i:i<256?(Z[X++]=s<<5|24,Z[X++]=i):i<65536?(Z[X++]=s<<5|25,Z[X++]=i>>8,Z[X++]=i):i<4294967296?(Z[X++]=s<<5|26,$n.setUint32(X,i),X+=4):(Z[X++]=s<<5|27,$n.setBigUint64(X,BigInt(i)),X+=8);continue}Z[X++]=251,$n.setFloat64(X,r),X+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)Z[X++]=s<<5|o;else if(o<256)Z[X++]=s<<5|24,Z[X++]=o;else if(o<65536)Z[X++]=s<<5|25,Z[X++]=o>>8,Z[X++]=o&255;else if(o<4294967296)Z[X++]=s<<5|26,$n.setUint32(X,o),X+=4;else if(i<BigInt("18446744073709551616"))Z[X++]=s<<5|27,$n.setBigUint64(X,i),X+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);k_(c.byteLength*2),Z[X++]=n?194:195,kP?qn(2,Buffer.byteLength(c)):qn(2,c.byteLength),Z.set(c,X),X+=c.byteLength}continue}else if(r===null){Z[X++]=246;continue}else if(typeof r=="boolean"){Z[X++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);qn(4,r.length);continue}else if(typeof r.byteLength=="number"){k_(r.length*2),qn(2,r.length),Z.set(r,X),X+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Xe){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));Z[X++]=196,e.push(o),e.push(i),qn(4,2);continue}if(r[T_])if("tag"in r&&"value"in r){e.push(r.value),qn(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];e.push(r[i]),e.push(i)}qn(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var MP,kP,$G,Z,$n,X,$P=w(()=>{nr();MP=T(St());df();kP=typeof Buffer<"u",$G=2048,Z=As($G),$n=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),X=0});var q_,FP=w(()=>{LP();$P();q_={deserialize(t){return NP(t),pn(0,t.length)},serialize(t){try{return qP(t),M_()}catch(e){throw M_(),e}},resizeEncodingBuffer(t){pf(t)}}});var hf,mf,gf=w(()=>{df();hf=t=>lf({tag:1,value:t.getTime()/1e3}),mf=(t,e)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var U_,yf,$_,F_,B_=w(()=>{sr();$e();nr();U_=T(vt());FP();gf();yf=class extends Vt{createSerializer(){let e=new $_;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new F_;return e.setSerdeContext(this.serdeContext),e}},$_=class extends Vt{constructor(){super(...arguments);f(this,"value")}write(r,n){this.value=this.serialize(r,n)}serialize(r,n){let s=K.of(r);if(n==null)return s.isIdempotencyToken()?(0,fn.v4)():n;if(s.isBlobSchema())return typeof n=="string"?(this.serdeContext?.base64Decoder??U_.fromBase64)(n):n;if(s.isTimestampSchema())return typeof n=="number"||typeof n=="bigint"?hf(new Date(Number(n)/1e3|0)):hf(n);if(typeof n=="function"||typeof n=="object"){let i=n;if(s.isListSchema()&&Array.isArray(i)){let a=!!s.getMergedTraits().sparse,c=[],u=0;for(let l of i){let d=this.serialize(s.getValueSchema(),l);(d!=null||a)&&(c[u++]=d)}return c}if(i instanceof Date)return hf(i);let o={};if(s.isMapSchema()){let a=!!s.getMergedTraits().sparse;for(let c of Object.keys(i)){let u=this.serialize(s.getValueSchema(),i[c]);(u!=null||a)&&(o[c]=u)}}else if(s.isStructSchema())for(let[a,c]of s.structIterator()){let u=this.serialize(c,i[a]);u!=null&&(o[a]=u)}else if(s.isDocumentSchema())for(let a of Object.keys(i))o[a]=this.serialize(s.getValueSchema(),i[a]);return o}return n}flush(){let r=q_.serialize(this.value);return this.value=void 0,r}},F_=class extends Vt{read(e,r){let n=q_.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=K.of(e);if(n.isTimestampSchema()&&typeof r=="number")return jc(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??U_.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator()){let a=this.readValue(o,r[i]);a!=null&&(s[i]=a)}return s}else return r}}});var UP,Ef,BP=w(()=>{sr();$e();UP=T(Bt());B_();gf();Ef=class extends On{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"codec",new yf);f(this,"serializer",this.codec.createSerializer());f(this,"deserializer",this.codec.createDeserializer())}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);if(Object.assign(i.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Hr(r.input)==="unit")delete i.body,delete i.headers["content-type"];else{i.body||(this.serializer.write(15,{}),i.body=this.serializer.flush());try{i.headers["content-length"]=String(i.body.byteLength)}catch{}}let{service:o,operation:a}=(0,UP.getSmithyContext)(s),c=`/service/${o}/operation/${a}`;return i.path.endsWith("/")?i.path+=c.slice(1):i.path+=c,i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=mf(s,i)??"Unknown",c=this.options.defaultNamespace;a.includes("#")&&([c]=a.split("#"));let u={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},l=_e.for(c),d;try{d=l.getSchema(a)}catch{i.Message&&(i.message=i.Message);let N=_e.for("smithy.ts.sdk.synthetic."+c),M=N.getBaseException();if(M){let U=N.getErrorCtor(M);throw Object.assign(new U({name:a}),u,i)}throw Object.assign(new Error(a),u,i)}let m=K.of(d),g=l.getErrorCtor(d),E=i.message??i.Message??"Unknown",b=new g(E),x={};for(let[A,N]of m.structIterator())x[A]=this.deserializer.readValue(N,i[A]);throw Object.assign(b,u,{$fault:m.getMergedTraits().error,message:E},x)}getDefaultContentType(){return"application/cbor"}}});var jP=w(()=>{gf();BP();B_()});var Sr,Uo=w(()=>{$e();Sr=class{resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},l=_e.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=_e.for("smithy.ts.sdk.synthetic."+a),g=m.getBaseException();if(g){let E=m.getErrorCtor(g)??Error;throw Object.assign(new E({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(let[c,u]of o)a[c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}}});var _f,HP=w(()=>{jP();$e();Uo();_f=class extends Ef{constructor({defaultNamespace:r,awsQueryCompatible:n}){super({defaultNamespace:r});f(this,"awsQueryCompatible");f(this,"mixin",new Sr);this.awsQueryCompatible=!!n}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),i}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=mf(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[b,x]of l.structIterator())E[b]=this.deserializer.readValue(x,i[b]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var VP,zP,WP,GP=w(()=>{VP=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},zP=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},WP=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var It,Ns=w(()=>{It=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});function KP(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new Xe(n,"bigDecimal"):BigInt(n)}return e}var XP=w(()=>{nr()});var ZP=_(JP=>{"use strict";var Pi=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},Os=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,j_=()=>{let t=[],e=[],r=!1,n=new Set,s=d=>d.sort((m,g)=>QP[g.step]-QP[m.step]||YP[g.priority||"normal"]-YP[m.priority||"normal"]),i=d=>{let m=!1,g=E=>{let b=Pi(E.name,E.aliases);if(b.includes(d)){m=!0;for(let x of b)n.delete(x);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},o=d=>{let m=!1,g=E=>{if(E.middleware===d){m=!0;for(let b of Pi(E.name,E.aliases))n.delete(b);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},a=d=>(t.forEach(m=>{d.add(m.middleware,{...m})}),e.forEach(m=>{d.addRelativeTo(m.middleware,{...m})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{let m=[];return d.before.forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m.push(d),d.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m},u=(d=!1)=>{let m=[],g=[],E={};return t.forEach(x=>{let A={...x,before:[],after:[]};for(let N of Pi(A.name,A.aliases))E[N]=A;m.push(A)}),e.forEach(x=>{let A={...x,before:[],after:[]};for(let N of Pi(A.name,A.aliases))E[N]=A;g.push(A)}),g.forEach(x=>{if(x.toMiddleware){let A=E[x.toMiddleware];if(A===void 0){if(d)return;throw new Error(`${x.toMiddleware} is not found when adding ${Os(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&A.after.push(x),x.relation==="before"&&A.before.push(x)}}),s(m).map(c).reduce((x,A)=>(x.push(...A),x),[])},l={add:(d,m={})=>{let{name:g,override:E,aliases:b}=m,x={step:"initialize",priority:"normal",middleware:d,...m},A=Pi(g,b);if(A.length>0){if(A.some(N=>n.has(N))){if(!E)throw new Error(`Duplicate middleware name '${Os(g,b)}'`);for(let N of A){let M=t.findIndex(z=>z.name===N||z.aliases?.some(ye=>ye===N));if(M===-1)continue;let U=t[M];if(U.step!==x.step||x.priority!==U.priority)throw new Error(`"${Os(U.name,U.aliases)}" middleware with ${U.priority} priority in ${U.step} step cannot be overridden by "${Os(g,b)}" middleware with ${x.priority} priority in ${x.step} step.`);t.splice(M,1)}}for(let N of A)n.add(N)}t.push(x)},addRelativeTo:(d,m)=>{let{name:g,override:E,aliases:b}=m,x={middleware:d,...m},A=Pi(g,b);if(A.length>0){if(A.some(N=>n.has(N))){if(!E)throw new Error(`Duplicate middleware name '${Os(g,b)}'`);for(let N of A){let M=e.findIndex(z=>z.name===N||z.aliases?.some(ye=>ye===N));if(M===-1)continue;let U=e[M];if(U.toMiddleware!==x.toMiddleware||U.relation!==x.relation)throw new Error(`"${Os(U.name,U.aliases)}" middleware ${U.relation} "${U.toMiddleware}" middleware cannot be overridden by "${Os(g,b)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);e.splice(M,1)}}for(let N of A)n.add(N)}e.push(x)},clone:()=>a(j_()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let m=!1,g=E=>{let{tags:b,name:x,aliases:A}=E;if(b&&b.includes(d)){let N=Pi(x,A);for(let M of N)n.delete(M);return m=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),m},concat:d=>{let m=a(j_());return m.use(d),m.identifyOnResolve(r||m.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(d=>{let m=d.step??d.relation+" "+d.toMiddleware;return Os(d.name,d.aliases)+" - "+m}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,m)=>{for(let g of u().map(E=>E.middleware).reverse())d=g(d,m);return r&&console.log(l.identify()),d}};return l},QP={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},YP={high:3,normal:2,low:1};JP.constructStack=j_});var fe=_(xe=>{"use strict";var rI=ZP(),Y_=(sr(),le(ZA)),V_=xn(),FG=($e(),le($d)),eI=(nr(),le($A)),z_=class{constructor(e){f(this,"config");f(this,"middlewareStack",rI.constructStack());f(this,"initConfig");f(this,"handlers");this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},H_="***SensitiveInformation***";function W_(t,e){if(e==null)return e;let r=FG.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return H_;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return H_}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return H_}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=W_(o,n[i]));return s}return e}var Sf=class{constructor(){f(this,"middlewareStack",rI.constructStack());f(this,"schema")}static classBuilder(){return new G_}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(let x of s.bind(this)(d,e,r,n))this.middlewareStack.use(x);let m=e.concat(this.middlewareStack),{logger:g}=r,E={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[V_.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:b}=r;return m.resolve(x=>b.handle(x.request,n||{}),E)}},G_=class{constructor(){f(this,"_init",()=>{});f(this,"_ep",{});f(this,"_middlewareFn",()=>[]);f(this,"_commandName","");f(this,"_clientName","");f(this,"_additionalContext",{});f(this,"_smithyContext",{});f(this,"_inputFilterSensitiveLog");f(this,"_outputFilterSensitiveLog");f(this,"_serializer",null);f(this,"_deserializer",null);f(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends Sf{constructor(...[s]){super();f(this,"input");f(this,"serialize",e._serializer);f(this,"deserialize",e._deserializer);this.input=s??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(s,i,o){let a=e._operationSchema,c=a?.[4]??a?.input,u=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?W_.bind(null,c):l=>l),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?W_.bind(null,u):l=>l),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}},UG="***SensitiveInformation***",BG=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(o,a,c){let u=new n(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=s}},K_=class t extends Error{constructor(r){super(r.message);f(this,"$fault");f(this,"$response");f(this,"$retryable");f(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;let n=r;return t.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;let n=r;return this===t?t.isInstance(r):t.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}},nI=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},sI=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=HG(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw nI(o,e)},jG=t=>({output:e,parsedBody:r,errorCode:n})=>{sI({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},HG=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),VG=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},tI=!1,zG=t=>{t&&!tI&&parseInt(t.substring(1,t.indexOf(".")))<16&&(tI=!0)},WG=t=>{let e=[];for(let r in V_.AlgorithmId){let n=V_.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},GG=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},KG=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),XG=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},iI=t=>Object.assign(WG(t),KG(t)),QG=iI,YG=t=>Object.assign(GG(t),XG(t)),JG=t=>Array.isArray(t)?t:[t],oI=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=oI(t[r]));return t},ZG=t=>t!=null,X_=class{trace(){}debug(){}info(){}warn(){}error(){}};function aI(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,r6(n,s,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}cI(n,null,i,o)}return n}var e6=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},t6=(t,e)=>{let r={};for(let n in e)cI(r,t,e,n);return r},r6=(t,e,r)=>aI(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),cI=(t,e,r,n)=>{if(e!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=n6,c=s6,u=n]=o;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=o:c&&(t[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[n]=i)}},n6=t=>t!=null,s6=t=>t,i6=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},o6=t=>t.toISOString().replace(".000Z","Z"),Q_=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(Q_);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=Q_(t[r]));return e}return t};Object.defineProperty(xe,"collectBody",{enumerable:!0,get:function(){return Y_.collectBody}});Object.defineProperty(xe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Y_.extendedEncodeURIComponent}});Object.defineProperty(xe,"resolvedPath",{enumerable:!0,get:function(){return Y_.resolvedPath}});xe.Client=z_;xe.Command=Sf;xe.NoOpLogger=X_;xe.SENSITIVE_STRING=UG;xe.ServiceException=K_;xe._json=Q_;xe.convertMap=e6;xe.createAggregatedClient=BG;xe.decorateServiceException=nI;xe.emitWarningIfUnsupportedVersion=zG;xe.getArrayIfSingleItem=JG;xe.getDefaultClientConfiguration=QG;xe.getDefaultExtensionConfiguration=iI;xe.getValueFromTextNode=oI;xe.isSerializableHeaderValue=ZG;xe.loadConfigsForDefaultMode=VG;xe.map=aI;xe.resolveDefaultRuntimeConfig=YG;xe.serializeDateTime=o6;xe.serializeFloat=i6;xe.take=t6;xe.throwDefaultError=sI;xe.withBaseException=jG;Object.keys(eI).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(xe,t)&&Object.defineProperty(xe,t,{enumerable:!0,get:function(){return eI[t]}})})});var uI,lI,vf,J_=w(()=>{uI=T(fe()),lI=T(St()),vf=(t,e)=>(0,uI.collectBody)(t,e).then(r=>(e?.utf8Encoder??lI.toUtf8)(r))});var Jc,dI,Bo,Zc=w(()=>{J_();Jc=(t,e)=>vf(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),dI=async(t,e)=>{let r=await Jc(t,e);return r.message=r.message??r.Message,r},Bo=(t,e)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let i=r(e,"code");if(i&&e[i]!==void 0)return n(e[i]);if(e.__type!==void 0)return n(e.__type)}}});var fI,jo,Z_=w(()=>{sr();$e();nr();fI=T(vt());Ns();XP();Zc();jo=class extends It{constructor(r){super();f(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,KP):await Jc(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let s=n!==null&&typeof n=="object",i=K.of(r);if(i.isListSchema()&&Array.isArray(n)){let a=i.getValueSchema(),c=[],u=!!i.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._read(a,l));return c}else if(i.isMapSchema()&&s){let a=i.getValueSchema(),c={},u=!!i.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._read(a,d));return c}else if(i.isStructSchema()&&s){let a={};for(let[c,u]of i.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._read(u,n[l]);d!=null&&(a[c]=d)}return a}if(i.isBlobSchema()&&typeof n=="string")return(0,fI.fromBase64)(n);let o=i.getMergedTraits().mediaType;if(i.isStringSchema()&&typeof n=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return Ht.from(n);if(i.isTimestampSchema()&&n!=null)switch(hr(i,this.settings)){case 5:return wE(n);case 6:return bE(n);case 7:return RE(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(i.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(i.isBigDecimalSchema()&&n!=null){if(n instanceof Xe)return n;let a=n;return a.type==="bigDecimal"&&"string"in a?new Xe(a.string,a.type):new Xe(String(n),"bigDecimal")}if(i.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(i.isDocumentSchema())if(s){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Xe?a[c]=u:a[c]=this._read(i,u);return a}else return structuredClone(n);return n}}});var pI,wf,hI=w(()=>{nr();pI="\u039D",wf=class{constructor(){f(this,"values",new Map);f(this,"counter",0);f(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof Xe){let n=`${pI+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${pI+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var mI,Ho,eS=w(()=>{sr();$e();nr();mI=T(vt());Ns();hI();Ho=class extends It{constructor(r){super();f(this,"settings");f(this,"buffer");f(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=K.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=K.of(r).getName(!0))}flush(){let{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){let n=new wf;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,s){let i=n!==null&&typeof n=="object",o=K.of(r);if(o.isListSchema()&&Array.isArray(n)){let a=o.getValueSchema(),c=[],u=!!o.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._write(a,l));return c}else if(o.isMapSchema()&&i){let a=o.getValueSchema(),c={},u=!!o.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._write(a,d));return c}else if(o.isStructSchema()&&i){let a={};for(let[c,u]of o.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._write(u,n[c],o);d!==void 0&&(a[l]=d)}return a}if(!(n===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||o.isDocumentSchema()&&n instanceof Uint8Array)return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??mI.toBase64)(n);if((o.isTimestampSchema()||o.isDocumentSchema())&&n instanceof Date)switch(hr(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return Fc(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(o.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return(0,fn.v4)();let a=o.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return Ht.from(n)}if(o.isDocumentSchema())if(i){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Xe?a[c]=u:a[c]=this._write(o,u);return a}else return structuredClone(n);return n}}}});var Ds,bf=w(()=>{Ns();Z_();eS();Ds=class extends It{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Ho(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new jo(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Ls,Rf=w(()=>{sr();$e();Uo();bf();Zc();Ls=class extends On{constructor({defaultNamespace:r,serviceTarget:n,awsQueryCompatible:s}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"serviceTarget");f(this,"codec");f(this,"mixin",new Sr);f(this,"awsQueryCompatible");this.serviceTarget=n,this.codec=new Ds({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),(Hr(r.input)==="unit"||!i.body)&&(i.body="{}"),i}getPayloadCodec(){return this.codec}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=Bo(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[b,x]of l.structIterator()){let A=x.getMergedTraits().jsonName??b;E[b]=this.codec.createDeserializer().readObject(x,i[A])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var Cf,gI=w(()=>{Rf();Cf=class extends Ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var Tf,yI=w(()=>{Rf();Tf=class extends Ls{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Vo,EI=w(()=>{sr();$e();Uo();bf();Zc();Vo=class extends Ei{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"codec");f(this,"mixin",new Sr);let n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new Ds(n),this.serializer=new vi(this.codec.createSerializer(),n),this.deserializer=new Si(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=K.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]&&!i.body&&(i.body="{}"),i}async handleError(r,n,s,i,o){let a=Bo(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[b,x]of l.structIterator()){let A=x.getMergedTraits().jsonName??b;E[b]=this.codec.createDeserializer().readObject(x,i[A])}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/json"}}});var _I,SI,vI=w(()=>{_I=T(fe()),SI=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,_I.expectUnion)(t)}});var bI=_((qxe,wI)=>{(()=>{"use strict";var t={d:(p,h)=>{for(var S in h)t.o(h,S)&&!t.o(p,S)&&Object.defineProperty(p,S,{enumerable:!0,get:h[S]})},o:(p,h)=>Object.prototype.hasOwnProperty.call(p,h),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>ms,XMLParser:()=>T3,XMLValidator:()=>L3});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(p,h){let S=[],C=h.exec(p);for(;C;){let v=[];v.startIndex=h.lastIndex-C[0].length;let R=C.length;for(let I=0;I<R;I++)v.push(C[I]);S.push(v),C=h.exec(p)}return S}let i=function(p){return n.exec(p)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(p,h){h=Object.assign({},o,h);let S=[],C=!1,v=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let R=0;R<p.length;R++)if(p[R]==="<"&&p[R+1]==="?"){if(R+=2,R=u(p,R),R.err)return R}else{if(p[R]!=="<"){if(c(p[R]))continue;return A("InvalidChar","char '"+p[R]+"' is not expected.",M(p,R))}{let I=R;if(R++,p[R]==="!"){R=l(p,R);continue}{let P=!1;p[R]==="/"&&(P=!0,R++);let O="";for(;R<p.length&&p[R]!==">"&&p[R]!==" "&&p[R]!=="	"&&p[R]!==`
`&&p[R]!=="\r";R++)O+=p[R];if(O=O.trim(),O[O.length-1]==="/"&&(O=O.substring(0,O.length-1),R--),!i(O)){let Q;return Q=O.trim().length===0?"Invalid space after '<'.":"Tag '"+O+"' is an invalid name.",A("InvalidTag",Q,M(p,R))}let $=g(p,R);if($===!1)return A("InvalidAttr","Attributes for '"+O+"' have open quote.",M(p,R));let re=$.value;if(R=$.index,re[re.length-1]==="/"){let Q=R-re.length;re=re.substring(0,re.length-1);let ge=b(re,h);if(ge!==!0)return A(ge.err.code,ge.err.msg,M(p,Q+ge.err.line));C=!0}else if(P){if(!$.tagClosed)return A("InvalidTag","Closing tag '"+O+"' doesn't have proper closing.",M(p,R));if(re.trim().length>0)return A("InvalidTag","Closing tag '"+O+"' can't have attributes or invalid starting.",M(p,I));if(S.length===0)return A("InvalidTag","Closing tag '"+O+"' has not been opened.",M(p,I));{let Q=S.pop();if(O!==Q.tagName){let ge=M(p,Q.tagStartPos);return A("InvalidTag","Expected closing tag '"+Q.tagName+"' (opened in line "+ge.line+", col "+ge.col+") instead of closing tag '"+O+"'.",M(p,I))}S.length==0&&(v=!0)}}else{let Q=b(re,h);if(Q!==!0)return A(Q.err.code,Q.err.msg,M(p,R-re.length+Q.err.line));if(v===!0)return A("InvalidXml","Multiple possible root nodes found.",M(p,R));h.unpairedTags.indexOf(O)!==-1||S.push({tagName:O,tagStartPos:I}),C=!0}for(R++;R<p.length;R++)if(p[R]==="<"){if(p[R+1]==="!"){R++,R=l(p,R);continue}if(p[R+1]!=="?")break;if(R=u(p,++R),R.err)return R}else if(p[R]==="&"){let Q=x(p,R);if(Q==-1)return A("InvalidChar","char '&' is not expected.",M(p,R));R=Q}else if(v===!0&&!c(p[R]))return A("InvalidXml","Extra text at the end",M(p,R));p[R]==="<"&&R--}}}return C?S.length==1?A("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",M(p,S[0].tagStartPos)):!(S.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(S.map(R=>R.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(p){return p===" "||p==="	"||p===`
`||p==="\r"}function u(p,h){let S=h;for(;h<p.length;h++)if(!(p[h]!="?"&&p[h]!=" ")){let C=p.substr(S,h-S);if(h>5&&C==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",M(p,h));if(p[h]=="?"&&p[h+1]==">"){h++;break}}return h}function l(p,h){if(p.length>h+5&&p[h+1]==="-"&&p[h+2]==="-"){for(h+=3;h<p.length;h++)if(p[h]==="-"&&p[h+1]==="-"&&p[h+2]===">"){h+=2;break}}else if(p.length>h+8&&p[h+1]==="D"&&p[h+2]==="O"&&p[h+3]==="C"&&p[h+4]==="T"&&p[h+5]==="Y"&&p[h+6]==="P"&&p[h+7]==="E"){let S=1;for(h+=8;h<p.length;h++)if(p[h]==="<")S++;else if(p[h]===">"&&(S--,S===0))break}else if(p.length>h+9&&p[h+1]==="["&&p[h+2]==="C"&&p[h+3]==="D"&&p[h+4]==="A"&&p[h+5]==="T"&&p[h+6]==="A"&&p[h+7]==="["){for(h+=8;h<p.length;h++)if(p[h]==="]"&&p[h+1]==="]"&&p[h+2]===">"){h+=2;break}}return h}let d='"',m="'";function g(p,h){let S="",C="",v=!1;for(;h<p.length;h++){if(p[h]===d||p[h]===m)C===""?C=p[h]:C!==p[h]||(C="");else if(p[h]===">"&&C===""){v=!0;break}S+=p[h]}return C===""&&{value:S,index:h,tagClosed:v}}let E=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function b(p,h){let S=s(p,E),C={};for(let v=0;v<S.length;v++){if(S[v][1].length===0)return A("InvalidAttr","Attribute '"+S[v][2]+"' has no space in starting.",U(S[v]));if(S[v][3]!==void 0&&S[v][4]===void 0)return A("InvalidAttr","Attribute '"+S[v][2]+"' is without value.",U(S[v]));if(S[v][3]===void 0&&!h.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+S[v][2]+"' is not allowed.",U(S[v]));let R=S[v][2];if(!N(R))return A("InvalidAttr","Attribute '"+R+"' is an invalid name.",U(S[v]));if(C.hasOwnProperty(R))return A("InvalidAttr","Attribute '"+R+"' is repeated.",U(S[v]));C[R]=1}return!0}function x(p,h){if(p[++h]===";")return-1;if(p[h]==="#")return function(C,v){let R=/\d/;for(C[v]==="x"&&(v++,R=/[\da-fA-F]/);v<C.length;v++){if(C[v]===";")return v;if(!C[v].match(R))break}return-1}(p,++h);let S=0;for(;h<p.length;h++,S++)if(!(p[h].match(/\w/)&&S<20)){if(p[h]===";")break;return-1}return h}function A(p,h,S){return{err:{code:p,msg:h,line:S.line||S,col:S.col}}}function N(p){return i(p)}function M(p,h){let S=p.substring(0,h).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function U(p){return p.startIndex+p[1].length}let z={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,h,S){return p},captureMetaData:!1},ye;ye=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class at{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,S){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:S})}addChild(h,S){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child}),S!==void 0&&(this.child[this.child.length-1][ye]={startIndex:S})}static getMetaDataSymbol(){return ye}}function he(p,h){let S={};if(p[h+3]!=="O"||p[h+4]!=="C"||p[h+5]!=="T"||p[h+6]!=="Y"||p[h+7]!=="P"||p[h+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{h+=9;let C=1,v=!1,R=!1,I="";for(;h<p.length;h++)if(p[h]!=="<"||R)if(p[h]===">"){if(R?p[h-1]==="-"&&p[h-2]==="-"&&(R=!1,C--):C--,C===0)break}else p[h]==="["?v=!0:I+=p[h];else{if(v&&pi(p,"!ENTITY",h)){let P,O;h+=7,[P,O,h]=Ie(p,h+1),O.indexOf("&")===-1&&(S[P]={regx:RegExp(`&${P};`,"g"),val:O})}else if(v&&pi(p,"!ELEMENT",h)){h+=8;let{index:P}=i3(p,h+1);h=P}else if(v&&pi(p,"!ATTLIST",h))h+=8;else if(v&&pi(p,"!NOTATION",h)){h+=9;let{index:P}=rt(p,h+1);h=P}else{if(!pi(p,"!--",h))throw new Error("Invalid DOCTYPE");R=!0}C++,I=""}if(C!==0)throw new Error("Unclosed DOCTYPE")}return{entities:S,i:h}}let oe=(p,h)=>{for(;h<p.length&&/\s/.test(p[h]);)h++;return h};function Ie(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h])&&p[h]!=='"'&&p[h]!=="'";)S+=p[h],h++;if(hy(S),h=oe(p,h),p.substring(h,h+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(p[h]==="%")throw new Error("Parameter entities are not supported");let C="";return[h,C]=vo(p,h,"entity"),[S,C,--h]}function rt(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h]);)S+=p[h],h++;hy(S),h=oe(p,h);let C=p.substring(h,h+6).toUpperCase();if(C!=="SYSTEM"&&C!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${C}"`);h+=C.length,h=oe(p,h);let v=null,R=null;if(C==="PUBLIC")[h,v]=vo(p,h,"publicIdentifier"),p[h=oe(p,h)]!=='"'&&p[h]!=="'"||([h,R]=vo(p,h,"systemIdentifier"));else if(C==="SYSTEM"&&([h,R]=vo(p,h,"systemIdentifier"),!R))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:S,publicIdentifier:v,systemIdentifier:R,index:--h}}function vo(p,h,S){let C="",v=p[h];if(v!=='"'&&v!=="'")throw new Error(`Expected quoted string, found "${v}"`);for(h++;h<p.length&&p[h]!==v;)C+=p[h],h++;if(p[h]!==v)throw new Error(`Unterminated ${S} value`);return[++h,C]}function i3(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h]);)S+=p[h],h++;if(!hy(S))throw new Error(`Invalid element name: "${S}"`);let C="";if(p[h=oe(p,h)]==="E"&&pi(p,"MPTY",h))h+=4;else if(p[h]==="A"&&pi(p,"NY",h))h+=2;else{if(p[h]!=="(")throw new Error(`Invalid Element Expression, found "${p[h]}"`);for(h++;h<p.length&&p[h]!==")";)C+=p[h],h++;if(p[h]!==")")throw new Error("Unterminated content model")}return{elementName:S,contentModel:C.trim(),index:h}}function pi(p,h,S){for(let C=0;C<h.length;C++)if(h[C]!==p[S+C+1])return!1;return!0}function hy(p){if(i(p))return p;throw new Error(`Invalid entity name ${p}`)}let o3=/^[-+]?0x[a-fA-F0-9]+$/,a3=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,c3={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},u3=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function HR(p){return typeof p=="function"?p:Array.isArray(p)?h=>{for(let S of p)if(typeof S=="string"&&h===S||S instanceof RegExp&&S.test(h))return!0}:()=>!1}class l3{constructor(h){this.options=h,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(S,C)=>String.fromCodePoint(Number.parseInt(C,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(S,C)=>String.fromCodePoint(Number.parseInt(C,16))}},this.addExternalEntities=d3,this.parseXml=g3,this.parseTextData=f3,this.resolveNameSpace=p3,this.buildAttributesMap=m3,this.isItStopNode=S3,this.replaceEntitiesValue=E3,this.readStopNodeData=v3,this.saveTextToParentTag=_3,this.addChild=y3,this.ignoreAttributesFn=HR(this.options.ignoreAttributes)}}function d3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let C=h[S];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:p[C]}}}function f3(p,h,S,C,v,R,I){if(p!==void 0&&(this.options.trimValues&&!C&&(p=p.trim()),p.length>0)){I||(p=this.replaceEntitiesValue(p));let P=this.options.tagValueProcessor(h,p,S,v,R);return P==null?p:typeof P!=typeof p||P!==p?P:this.options.trimValues||p.trim()===p?VR(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function p3(p){if(this.options.removeNSPrefix){let h=p.split(":"),S=p.charAt(0)==="/"?"/":"";if(h[0]==="xmlns")return"";h.length===2&&(p=S+h[1])}return p}let h3=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function m3(p,h,S){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){let C=s(p,h3),v=C.length,R={};for(let I=0;I<v;I++){let P=this.resolveNameSpace(C[I][1]);if(this.ignoreAttributesFn(P,h))continue;let O=C[I][4],$=this.options.attributeNamePrefix+P;if(P.length)if(this.options.transformAttributeName&&($=this.options.transformAttributeName($)),$==="__proto__"&&($="#__proto__"),O!==void 0){this.options.trimValues&&(O=O.trim()),O=this.replaceEntitiesValue(O);let re=this.options.attributeValueProcessor(P,O,h);R[$]=re==null?O:typeof re!=typeof O||re!==O?re:VR(O,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(R[$]=!0)}if(!Object.keys(R).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=R,I}return R}}let g3=function(p){p=p.replace(/\r\n?/g,`
`);let h=new at("!xml"),S=h,C="",v="";for(let R=0;R<p.length;R++)if(p[R]==="<")if(p[R+1]==="/"){let I=hi(p,">",R,"Closing Tag is not closed."),P=p.substring(R+2,I).trim();if(this.options.removeNSPrefix){let re=P.indexOf(":");re!==-1&&(P=P.substr(re+1))}this.options.transformTagName&&(P=this.options.transformTagName(P)),S&&(C=this.saveTextToParentTag(C,S,v));let O=v.substring(v.lastIndexOf(".")+1);if(P&&this.options.unpairedTags.indexOf(P)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${P}>`);let $=0;O&&this.options.unpairedTags.indexOf(O)!==-1?($=v.lastIndexOf(".",v.lastIndexOf(".")-1),this.tagsNodeStack.pop()):$=v.lastIndexOf("."),v=v.substring(0,$),S=this.tagsNodeStack.pop(),C="",R=I}else if(p[R+1]==="?"){let I=my(p,R,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,S,v),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let P=new at(I.tagName);P.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(P[":@"]=this.buildAttributesMap(I.tagExp,v,I.tagName)),this.addChild(S,P,v,R)}R=I.closeIndex+1}else if(p.substr(R+1,3)==="!--"){let I=hi(p,"-->",R+4,"Comment is not closed.");if(this.options.commentPropName){let P=p.substring(R+4,I-2);C=this.saveTextToParentTag(C,S,v),S.add(this.options.commentPropName,[{[this.options.textNodeName]:P}])}R=I}else if(p.substr(R+1,2)==="!D"){let I=he(p,R);this.docTypeEntities=I.entities,R=I.i}else if(p.substr(R+1,2)==="!["){let I=hi(p,"]]>",R,"CDATA is not closed.")-2,P=p.substring(R+9,I);C=this.saveTextToParentTag(C,S,v);let O=this.parseTextData(P,S.tagname,v,!0,!1,!0,!0);O==null&&(O=""),this.options.cdataPropName?S.add(this.options.cdataPropName,[{[this.options.textNodeName]:P}]):S.add(this.options.textNodeName,O),R=I+2}else{let I=my(p,R,this.options.removeNSPrefix),P=I.tagName,O=I.rawTagName,$=I.tagExp,re=I.attrExpPresent,Q=I.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),S&&C&&S.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,S,v,!1));let ge=S;ge&&this.options.unpairedTags.indexOf(ge.tagname)!==-1&&(S=this.tagsNodeStack.pop(),v=v.substring(0,v.lastIndexOf("."))),P!==h.tagname&&(v+=v?"."+P:P);let Ae=R;if(this.isItStopNode(this.options.stopNodes,v,P)){let Ee="";if($.length>0&&$.lastIndexOf("/")===$.length-1)P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),$=P):$=$.substr(0,$.length-1),R=I.closeIndex;else if(this.options.unpairedTags.indexOf(P)!==-1)R=I.closeIndex;else{let an=this.readStopNodeData(p,O,Q+1);if(!an)throw new Error(`Unexpected end of ${O}`);R=an.i,Ee=an.tagContent}let ct=new at(P);P!==$&&re&&(ct[":@"]=this.buildAttributesMap($,v,P)),Ee&&(Ee=this.parseTextData(Ee,P,v,!0,re,!0,!0)),v=v.substr(0,v.lastIndexOf(".")),ct.add(this.options.textNodeName,Ee),this.addChild(S,ct,v,Ae)}else{if($.length>0&&$.lastIndexOf("/")===$.length-1){P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),$=P):$=$.substr(0,$.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));let Ee=new at(P);P!==$&&re&&(Ee[":@"]=this.buildAttributesMap($,v,P)),this.addChild(S,Ee,v,Ae),v=v.substr(0,v.lastIndexOf("."))}else{let Ee=new at(P);this.tagsNodeStack.push(S),P!==$&&re&&(Ee[":@"]=this.buildAttributesMap($,v,P)),this.addChild(S,Ee,v,Ae),S=Ee}C="",R=Q}}else C+=p[R];return h.child};function y3(p,h,S,C){this.options.captureMetaData||(C=void 0);let v=this.options.updateTag(h.tagname,S,h[":@"]);v===!1||(typeof v=="string"&&(h.tagname=v),p.addChild(h,C))}let E3=function(p){if(this.options.processEntities){for(let h in this.docTypeEntities){let S=this.docTypeEntities[h];p=p.replace(S.regx,S.val)}for(let h in this.lastEntities){let S=this.lastEntities[h];p=p.replace(S.regex,S.val)}if(this.options.htmlEntities)for(let h in this.htmlEntities){let S=this.htmlEntities[h];p=p.replace(S.regex,S.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function _3(p,h,S,C){return p&&(C===void 0&&(C=h.child.length===0),(p=this.parseTextData(p,h.tagname,S,!1,!!h[":@"]&&Object.keys(h[":@"]).length!==0,C))!==void 0&&p!==""&&h.add(this.options.textNodeName,p),p=""),p}function S3(p,h,S){let C="*."+S;for(let v in p){let R=p[v];if(C===R||h===R)return!0}return!1}function hi(p,h,S,C){let v=p.indexOf(h,S);if(v===-1)throw new Error(C);return v+h.length-1}function my(p,h,S,C=">"){let v=function(Q,ge,Ae=">"){let Ee,ct="";for(let an=ge;an<Q.length;an++){let gs=Q[an];if(Ee)gs===Ee&&(Ee="");else if(gs==='"'||gs==="'")Ee=gs;else if(gs===Ae[0]){if(!Ae[1])return{data:ct,index:an};if(Q[an+1]===Ae[1])return{data:ct,index:an}}else gs==="	"&&(gs=" ");ct+=gs}}(p,h+1,C);if(!v)return;let R=v.data,I=v.index,P=R.search(/\s/),O=R,$=!0;P!==-1&&(O=R.substring(0,P),R=R.substring(P+1).trimStart());let re=O;if(S){let Q=O.indexOf(":");Q!==-1&&(O=O.substr(Q+1),$=O!==v.data.substr(Q+1))}return{tagName:O,tagExp:R,closeIndex:I,attrExpPresent:$,rawTagName:re}}function v3(p,h,S){let C=S,v=1;for(;S<p.length;S++)if(p[S]==="<")if(p[S+1]==="/"){let R=hi(p,">",S,`${h} is not closed`);if(p.substring(S+2,R).trim()===h&&(v--,v===0))return{tagContent:p.substring(C,S),i:R};S=R}else if(p[S+1]==="?")S=hi(p,"?>",S+1,"StopNode is not closed.");else if(p.substr(S+1,3)==="!--")S=hi(p,"-->",S+3,"StopNode is not closed.");else if(p.substr(S+1,2)==="![")S=hi(p,"]]>",S,"StopNode is not closed.")-2;else{let R=my(p,S,">");R&&((R&&R.tagName)===h&&R.tagExp[R.tagExp.length-1]!=="/"&&v++,S=R.closeIndex)}}function VR(p,h,S){if(h&&typeof p=="string"){let C=p.trim();return C==="true"||C!=="false"&&function(v,R={}){if(R=Object.assign({},c3,R),!v||typeof v!="string")return v;let I=v.trim();if(R.skipLike!==void 0&&R.skipLike.test(I))return v;if(v==="0")return 0;if(R.hex&&o3.test(I))return function(O){if(parseInt)return parseInt(O,16);if(Number.parseInt)return Number.parseInt(O,16);if(window&&window.parseInt)return window.parseInt(O,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(I);if(I.search(/.+[eE].+/)!==-1)return function(O,$,re){if(!re.eNotation)return O;let Q=$.match(u3);if(Q){let ge=Q[1]||"",Ae=Q[3].indexOf("e")===-1?"E":"e",Ee=Q[2],ct=ge?O[Ee.length+1]===Ae:O[Ee.length]===Ae;return Ee.length>1&&ct?O:Ee.length!==1||!Q[3].startsWith(`.${Ae}`)&&Q[3][0]!==Ae?re.leadingZeros&&!ct?($=(Q[1]||"")+Q[3],Number($)):O:Number($)}return O}(v,I,R);{let O=a3.exec(I);if(O){let $=O[1]||"",re=O[2],Q=((P=O[3])&&P.indexOf(".")!==-1&&((P=P.replace(/0+$/,""))==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substring(0,P.length-1))),P),ge=$?v[re.length+1]===".":v[re.length]===".";if(!R.leadingZeros&&(re.length>1||re.length===1&&!ge))return v;{let Ae=Number(I),Ee=String(Ae);if(Ae===0||Ae===-0)return Ae;if(Ee.search(/[eE]/)!==-1)return R.eNotation?Ae:v;if(I.indexOf(".")!==-1)return Ee==="0"||Ee===Q||Ee===`${$}${Q}`?Ae:v;let ct=re?Q:I;return re?ct===Ee||$+ct===Ee?Ae:v:ct===Ee||ct===$+Ee?Ae:v}}return v}var P}(p,S)}return p!==void 0?p:""}let gy=at.getMetaDataSymbol();function w3(p,h){return zR(p,h)}function zR(p,h,S){let C,v={};for(let R=0;R<p.length;R++){let I=p[R],P=b3(I),O="";if(O=S===void 0?P:S+"."+P,P===h.textNodeName)C===void 0?C=I[P]:C+=""+I[P];else{if(P===void 0)continue;if(I[P]){let $=zR(I[P],h,O),re=C3($,h);I[gy]!==void 0&&($[gy]=I[gy]),I[":@"]?R3($,I[":@"],O,h):Object.keys($).length!==1||$[h.textNodeName]===void 0||h.alwaysCreateTextNode?Object.keys($).length===0&&(h.alwaysCreateTextNode?$[h.textNodeName]="":$=""):$=$[h.textNodeName],v[P]!==void 0&&v.hasOwnProperty(P)?(Array.isArray(v[P])||(v[P]=[v[P]]),v[P].push($)):h.isArray(P,O,re)?v[P]=[$]:v[P]=$}}}return typeof C=="string"?C.length>0&&(v[h.textNodeName]=C):C!==void 0&&(v[h.textNodeName]=C),v}function b3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let C=h[S];if(C!==":@")return C}}function R3(p,h,S,C){if(h){let v=Object.keys(h),R=v.length;for(let I=0;I<R;I++){let P=v[I];C.isArray(P,S+"."+P,!0,!0)?p[P]=[h[P]]:p[P]=h[P]}}}function C3(p,h){let{textNodeName:S}=h,C=Object.keys(p).length;return C===0||!(C!==1||!p[S]&&typeof p[S]!="boolean"&&p[S]!==0)}class T3{constructor(h){this.externalEntities={},this.options=function(S){return Object.assign({},z,S)}(h)}parse(h,S){if(typeof h!="string"){if(!h.toString)throw new Error("XML data is accepted in String or Bytes[] form.");h=h.toString()}if(S){S===!0&&(S={});let R=a(h,S);if(R!==!0)throw Error(`${R.err.msg}:${R.err.line}:${R.err.col}`)}let C=new l3(this.options);C.addExternalEntities(this.externalEntities);let v=C.parseXml(h);return this.options.preserveOrder||v===void 0?v:w3(v,this.options)}addEntity(h,S){if(S.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(h.indexOf("&")!==-1||h.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(S==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[h]=S}static getMetaDataSymbol(){return at.getMetaDataSymbol()}}function A3(p,h){let S="";return h.format&&h.indentBy.length>0&&(S=`
`),WR(p,h,"",S)}function WR(p,h,S,C){let v="",R=!1;for(let I=0;I<p.length;I++){let P=p[I],O=x3(P);if(O===void 0)continue;let $="";if($=S.length===0?O:`${S}.${O}`,O===h.textNodeName){let Ae=P[O];P3($,h)||(Ae=h.tagValueProcessor(O,Ae),Ae=KR(Ae,h)),R&&(v+=C),v+=Ae,R=!1;continue}if(O===h.cdataPropName){R&&(v+=C),v+=`<![CDATA[${P[O][0][h.textNodeName]}]]>`,R=!1;continue}if(O===h.commentPropName){v+=C+`<!--${P[O][0][h.textNodeName]}-->`,R=!0;continue}if(O[0]==="?"){let Ae=GR(P[":@"],h),Ee=O==="?xml"?"":C,ct=P[O][0][h.textNodeName];ct=ct.length!==0?" "+ct:"",v+=Ee+`<${O}${ct}${Ae}?>`,R=!0;continue}let re=C;re!==""&&(re+=h.indentBy);let Q=C+`<${O}${GR(P[":@"],h)}`,ge=WR(P[O],h,$,re);h.unpairedTags.indexOf(O)!==-1?h.suppressUnpairedNode?v+=Q+">":v+=Q+"/>":ge&&ge.length!==0||!h.suppressEmptyNode?ge&&ge.endsWith(">")?v+=Q+`>${ge}${C}</${O}>`:(v+=Q+">",ge&&C!==""&&(ge.includes("/>")||ge.includes("</"))?v+=C+h.indentBy+ge+C:v+=ge,v+=`</${O}>`):v+=Q+"/>",R=!0}return v}function x3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let C=h[S];if(p.hasOwnProperty(C)&&C!==":@")return C}}function GR(p,h){let S="";if(p&&!h.ignoreAttributes)for(let C in p){if(!p.hasOwnProperty(C))continue;let v=h.attributeValueProcessor(C,p[C]);v=KR(v,h),v===!0&&h.suppressBooleanAttributes?S+=` ${C.substr(h.attributeNamePrefix.length)}`:S+=` ${C.substr(h.attributeNamePrefix.length)}="${v}"`}return S}function P3(p,h){let S=(p=p.substr(0,p.length-h.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(let C in h.stopNodes)if(h.stopNodes[C]===p||h.stopNodes[C]==="*."+S)return!0;return!1}function KR(p,h){if(p&&p.length>0&&h.processEntities)for(let S=0;S<h.entities.length;S++){let C=h.entities[S];p=p.replace(C.regex,C.val)}return p}let I3={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ms(p){this.options=Object.assign({},I3,p),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=HR(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=D3),this.processTextOrObjNode=N3,this.options.format?(this.indentate=O3,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function N3(p,h,S,C){let v=this.j2x(p,S+1,C.concat(h));return p[this.options.textNodeName]!==void 0&&Object.keys(p).length===1?this.buildTextValNode(p[this.options.textNodeName],h,v.attrStr,S):this.buildObjectNode(v.val,h,v.attrStr,S)}function O3(p){return this.options.indentBy.repeat(p)}function D3(p){return!(!p.startsWith(this.options.attributeNamePrefix)||p===this.options.textNodeName)&&p.substr(this.attrPrefixLen)}ms.prototype.build=function(p){return this.options.preserveOrder?A3(p,this.options):(Array.isArray(p)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(p={[this.options.arrayNodeName]:p}),this.j2x(p,0,[]).val)},ms.prototype.j2x=function(p,h,S){let C="",v="",R=S.join(".");for(let I in p)if(Object.prototype.hasOwnProperty.call(p,I))if(p[I]===void 0)this.isAttribute(I)&&(v+="");else if(p[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?v+="":I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(p[I]instanceof Date)v+=this.buildTextValNode(p[I],I,"",h);else if(typeof p[I]!="object"){let P=this.isAttribute(I);if(P&&!this.ignoreAttributesFn(P,R))C+=this.buildAttrPairStr(P,""+p[I]);else if(!P)if(I===this.options.textNodeName){let O=this.options.tagValueProcessor(I,""+p[I]);v+=this.replaceEntitiesValue(O)}else v+=this.buildTextValNode(p[I],I,"",h)}else if(Array.isArray(p[I])){let P=p[I].length,O="",$="";for(let re=0;re<P;re++){let Q=p[I][re];if(Q!==void 0)if(Q===null)I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(typeof Q=="object")if(this.options.oneListGroup){let ge=this.j2x(Q,h+1,S.concat(I));O+=ge.val,this.options.attributesGroupName&&Q.hasOwnProperty(this.options.attributesGroupName)&&($+=ge.attrStr)}else O+=this.processTextOrObjNode(Q,I,h,S);else if(this.options.oneListGroup){let ge=this.options.tagValueProcessor(I,Q);ge=this.replaceEntitiesValue(ge),O+=ge}else O+=this.buildTextValNode(Q,I,"",h)}this.options.oneListGroup&&(O=this.buildObjectNode(O,I,$,h)),v+=O}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let P=Object.keys(p[I]),O=P.length;for(let $=0;$<O;$++)C+=this.buildAttrPairStr(P[$],""+p[I][P[$]])}else v+=this.processTextOrObjNode(p[I],I,h,S);return{attrStr:C,val:v}},ms.prototype.buildAttrPairStr=function(p,h){return h=this.options.attributeValueProcessor(p,""+h),h=this.replaceEntitiesValue(h),this.options.suppressBooleanAttributes&&h==="true"?" "+p:" "+p+'="'+h+'"'},ms.prototype.buildObjectNode=function(p,h,S,C){if(p==="")return h[0]==="?"?this.indentate(C)+"<"+h+S+"?"+this.tagEndChar:this.indentate(C)+"<"+h+S+this.closeTag(h)+this.tagEndChar;{let v="</"+h+this.tagEndChar,R="";return h[0]==="?"&&(R="?",v=""),!S&&S!==""||p.indexOf("<")!==-1?this.options.commentPropName!==!1&&h===this.options.commentPropName&&R.length===0?this.indentate(C)+`<!--${p}-->`+this.newLine:this.indentate(C)+"<"+h+S+R+this.tagEndChar+p+this.indentate(C)+v:this.indentate(C)+"<"+h+S+R+">"+p+v}},ms.prototype.closeTag=function(p){let h="";return this.options.unpairedTags.indexOf(p)!==-1?this.options.suppressUnpairedNode||(h="/"):h=this.options.suppressEmptyNode?"/":`></${p}`,h},ms.prototype.buildTextValNode=function(p,h,S,C){if(this.options.cdataPropName!==!1&&h===this.options.cdataPropName)return this.indentate(C)+`<![CDATA[${p}]]>`+this.newLine;if(this.options.commentPropName!==!1&&h===this.options.commentPropName)return this.indentate(C)+`<!--${p}-->`+this.newLine;if(h[0]==="?")return this.indentate(C)+"<"+h+S+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(h,p);return v=this.replaceEntitiesValue(v),v===""?this.indentate(C)+"<"+h+S+this.closeTag(h)+this.tagEndChar:this.indentate(C)+"<"+h+S+">"+v+"</"+h+this.tagEndChar}},ms.prototype.replaceEntitiesValue=function(p){if(p&&p.length>0&&this.options.processEntities)for(let h=0;h<this.options.entities.length;h++){let S=this.options.entities[h];p=p.replace(S.regex,S.val)}return p};let L3={validate:a};wI.exports=e})()});var RI=_(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.parseXML=c6;var a6=bI(),tS=new a6.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});tS.addEntity("#xD","\r");tS.addEntity("#10",`
`);function c6(t){return tS.parse(t,!0)}});var Pf=_(xf=>{"use strict";var u6=RI();function l6(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function d6(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Af=class{constructor(e){f(this,"value");this.value=e}toString(){return d6(""+this.value)}},nS=class t{constructor(e,r=[]){f(this,"name");f(this,"children");f(this,"attributes",{});this.name=e,this.children=r}static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new Af(r)),n!==void 0&&s.withName(n),s}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(e,r,n,s){if(e[r]!=null){let i=s(),o=new t(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${l6(""+i)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(xf,"parseXML",{enumerable:!0,get:function(){return u6.parseXML}});xf.XmlNode=nS;xf.XmlText=Af});var CI,TI,AI,ks,If=w(()=>{CI=T(Pf());sr();$e();TI=T(fe()),AI=T(St());Ns();ks=class extends It{constructor(r){super();f(this,"settings");f(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new _i(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,s){let i=K.of(r),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(l=>!!l.getMemberTraits().eventPayload)){let l={},d=Object.keys(o)[0];return o[d].isBlobSchema()?l[d]=n:l[d]=this.read(o[d],n),l}let c=(this.serdeContext?.utf8Encoder??AI.toUtf8)(n),u=this.parseXml(c);return this.readSchema(r,s?u[s]:u)}readSchema(r,n){let s=K.of(r);if(s.isUnitSchema())return;let i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(n))return this.readSchema(s,[n]);if(n==null)return n;if(typeof n=="object"){let o=!!i.sparse,a=!!i.xmlFlattened;if(s.isListSchema()){let u=s.getValueSchema(),l=[],d=u.getMergedTraits().xmlName??"member",m=a?n:(n[0]??n)[d],g=Array.isArray(m)?m:[m];for(let E of g)(E!=null||o)&&l.push(this.readSchema(u,E));return l}let c={};if(s.isMapSchema()){let u=s.getKeySchema(),l=s.getValueSchema(),d;a?d=Array.isArray(n)?n:[n]:d=Array.isArray(n.entry)?n.entry:[n.entry];let m=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let E of d){let b=E[m],x=E[g];(x!=null||o)&&(c[b]=this.readSchema(l,x))}return c}if(s.isStructSchema()){for(let[u,l]of s.structIterator()){let d=l.getMergedTraits(),m=d.httpPayload?d.xmlName??l.getName():l.getMemberTraits().xmlName??u;n[m]!=null&&(c[u]=this.readSchema(l,n[m]))}return c}if(s.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,n)}parseXml(r){if(r.length){let n;try{n=(0,CI.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,TI.getValueFromTextNode)(o)}return{}}}});var xI,PI,Nf,II=w(()=>{sr();$e();nr();xI=T(fe()),PI=T(vt());Ns();Nf=class extends It{constructor(r){super();f(this,"settings");f(this,"buffer");this.settings=r}write(r,n,s=""){this.buffer===void 0&&(this.buffer="");let i=K.of(r);if(s&&!s.endsWith(".")&&(s+="."),i.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??PI.toBase64)(n)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())n!=null?(this.writeKey(s),this.writeValue(String(n))):i.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,fn.v4)()));else if(i.isBigIntegerSchema())n!=null&&(this.writeKey(s),this.writeValue(String(n)));else if(i.isBigDecimalSchema())n!=null&&(this.writeKey(s),this.writeValue(n instanceof Xe?n.string:String(n)));else if(i.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(s),hr(i,this.settings)){case 5:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,xI.dateToUtcString)(n));break;case 7:this.writeValue(String(n.getTime()/1e3));break}}else{if(i.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${i.getName(!0)}`);if(i.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=i.getValueSchema(),a=this.settings.flattenLists||i.getMergedTraits().xmlFlattened,c=1;for(let u of n){if(u==null)continue;let l=this.getKey("member",o.getMergedTraits().xmlName),d=a?`${s}${c}`:`${s}${l}.${c}`;this.write(o,u,d),++c}}}else if(i.isMapSchema()){if(n&&typeof n=="object"){let o=i.getKeySchema(),a=i.getValueSchema(),c=i.getMergedTraits().xmlFlattened,u=1;for(let[l,d]of Object.entries(n)){if(d==null)continue;let m=this.getKey("key",o.getMergedTraits().xmlName),g=c?`${s}${u}.${m}`:`${s}entry.${u}.${m}`,E=this.getKey("value",a.getMergedTraits().xmlName),b=c?`${s}${u}.${E}`:`${s}entry.${u}.${E}`;this.write(o,l,g),this.write(a,d,b),++u}}}else if(i.isStructSchema()){if(n&&typeof n=="object")for(let[o,a]of i.structIterator()){if(n[o]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(o,a.getMergedTraits().xmlName),u=`${s}${c}`;this.write(a,n[o],u)}}else if(!i.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let s=n??r;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${cn(r)}=`}writeValue(r){this.buffer+=cn(r)}}});var zo,sS=w(()=>{sr();$e();Uo();If();II();zo=class extends On{constructor(r){super({defaultNamespace:r.defaultNamespace});f(this,"options");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new Sr);this.options=r;let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Nf(n),this.deserializer=new ks(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),(Hr(r.input)==="unit"||!i.body)&&(i.body="");let o=r.name.split("#")[1]??r.name;return i.body=`Action=${o}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(r,n,s){let i=this.deserializer,o=K.of(r.output),a={};if(s.statusCode>=300){let m=await jr(s.body,n);m.byteLength>0&&Object.assign(a,await i.read(15,m)),await this.handleError(r,n,s,a,this.deserializeMetadata(s))}for(let m in s.headers){let g=s.headers[m];delete s.headers[m],s.headers[m.toLowerCase()]=g}let c=r.name.split("#")[1]??r.name,u=o.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,l=await jr(s.body,n);return l.byteLength>0&&Object.assign(a,await i.read(o,l,u)),{$metadata:this.deserializeMetadata(s),...a}}useNestedResult(){return!0}async handleError(r,n,s,i,o){let a=this.loadQueryErrorCode(s,i)??"Unknown",c=this.loadQueryError(i),u=this.loadQueryErrorMessage(i);c.message=u,c.Error={Type:c.Type,Code:c.Code,Message:u};let{errorSchema:l,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,c,o,(x,A)=>{try{return x.getSchema(A)}catch{return x.find(M=>K.of(M).getMergedTraits().awsQueryError?.[0]===A)}}),m=K.of(l),g=_e.for(l[1]).getErrorCtor(l)??Error,E=new g(u),b={Error:c.Error};for(let[x,A]of m.structIterator()){let N=A.getMergedTraits().xmlName??x,M=c[N]??i[N];b[x]=this.deserializer.readSchema(A,M)}throw Object.assign(E,d,{$fault:m.getMergedTraits().error,message:u},b)}loadQueryErrorCode(r,n){let s=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(s!==void 0)return s;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Of,NI=w(()=>{sS();Of=class extends zo{constructor(r){super(r);f(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var OI,DI,Wo,Df,Lf,iS=w(()=>{OI=T(Pf()),DI=T(fe());J_();Wo=(t,e)=>vf(t,e).then(r=>{if(r.length){let n;try{n=(0,OI.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,DI.getValueFromTextNode)(o)}return{}}),Df=async(t,e)=>{let r=await Wo(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Lf=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var vr,oS,kf,Go,aS=w(()=>{vr=T(Pf());sr();$e();nr();oS=T(fe()),kf=T(vt());Ns();Go=class extends It{constructor(r){super();f(this,"settings");f(this,"stringBuffer");f(this,"byteBuffer");f(this,"buffer");this.settings=r}write(r,n){let s=K.of(r);if(s.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(s.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??kf.fromBase64)(n);else{this.buffer=this.writeStruct(s,n,void 0);let i=s.getMergedTraits();i.httpPayload&&!i.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,s){let i=r.getMergedTraits(),o=r.isMemberSchema()&&!i.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():i.xmlName??r.getName();if(!o||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=vr.XmlNode.of(o),[c,u]=this.getXmlnsAttribute(r,s);for(let[l,d]of r.structIterator()){let m=n[l];if(m!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){a.addAttribute(d.getMergedTraits().xmlName??l,this.writeSimple(d,m));continue}if(d.isListSchema())this.writeList(d,m,a,u);else if(d.isMapSchema())this.writeMap(d,m,a,u);else if(d.isStructSchema())a.addChildNode(this.writeStruct(d,m,u));else{let g=vr.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,m,g,u),a.addChildNode(g)}}}return u&&a.addAttribute(c,u),a}writeList(r,n,s,i){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let o=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),u=!!c.sparse,l=!!o.xmlFlattened,[d,m]=this.getXmlnsAttribute(r,i),g=(E,b)=>{if(a.isListSchema())this.writeList(a,Array.isArray(b)?b:[b],E,m);else if(a.isMapSchema())this.writeMap(a,b,E,m);else if(a.isStructSchema()){let x=this.writeStruct(a,b,m);E.addChildNode(x.withName(l?o.xmlName??r.getMemberName():c.xmlName??"member"))}else{let x=vr.XmlNode.of(l?o.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,b,x,m),E.addChildNode(x)}};if(l)for(let E of n)(u||E!=null)&&g(s,E);else{let E=vr.XmlNode.of(o.xmlName??r.getMemberName());m&&E.addAttribute(d,m);for(let b of n)(u||b!=null)&&g(E,b);s.addChildNode(E)}}writeMap(r,n,s,i,o=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),l=c.getMergedTraits().xmlName??"key",d=r.getValueSchema(),m=d.getMergedTraits(),g=m.xmlName??"value",E=!!m.sparse,b=!!a.xmlFlattened,[x,A]=this.getXmlnsAttribute(r,i),N=(M,U,z)=>{let ye=vr.XmlNode.of(l,U),[at,he]=this.getXmlnsAttribute(c,A);he&&ye.addAttribute(at,he),M.addChildNode(ye);let oe=vr.XmlNode.of(g);d.isListSchema()?this.writeList(d,z,oe,A):d.isMapSchema()?this.writeMap(d,z,oe,A,!0):d.isStructSchema()?oe=this.writeStruct(d,z,A):this.writeSimpleInto(d,z,oe,A),M.addChildNode(oe)};if(b){for(let[M,U]of Object.entries(n))if(E||U!=null){let z=vr.XmlNode.of(a.xmlName??r.getMemberName());N(z,M,U),s.addChildNode(z)}}else{let M;o||(M=vr.XmlNode.of(a.xmlName??r.getMemberName()),A&&M.addAttribute(x,A),s.addChildNode(M));for(let[U,z]of Object.entries(n))if(E||z!=null){let ye=vr.XmlNode.of("entry");N(ye,U,z),(o?s:M).addChildNode(ye)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=K.of(r),i=null;if(n&&typeof n=="object")if(s.isBlobSchema())i=(this.serdeContext?.base64Encoder??kf.toBase64)(n);else if(s.isTimestampSchema()&&n instanceof Date)switch(hr(s,this.settings)){case 5:i=n.toISOString().replace(".000Z","Z");break;case 6:i=(0,oS.dateToUtcString)(n);break;case 7:i=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),i=(0,oS.dateToUtcString)(n);break}else{if(s.isBigDecimalSchema()&&n)return n instanceof Xe?n.string:String(n);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(n)),s.isStringSchema()&&(n===void 0&&s.isIdempotencyToken()?i=(0,fn.v4)():i=String(n)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${n}`);return i}writeSimpleInto(r,n,s,i){let o=this.writeSimple(r,n),a=K.of(r),c=new vr.XmlText(o),[u,l]=this.getXmlnsAttribute(a,i);l&&s.addAttribute(u,l),s.addChildNode(c)}getXmlnsAttribute(r,n){let s=r.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==n?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}});var Ko,cS=w(()=>{Ns();If();aS();Ko=class extends It{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Go(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new ks(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Mf,LI=w(()=>{sr();$e();Uo();iS();cS();Mf=class extends Ei{constructor(r){super(r);f(this,"codec");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new Sr);let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new Ko(n),this.serializer=new vi(this.codec.createSerializer(),n),this.deserializer=new Si(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=K.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]===this.getDefaultContentType()&&typeof i.body=="string"&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=Lf(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.Error?.message??i.Error?.Message??i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[b,x]of l.structIterator()){let A=x.getMergedTraits().xmlName??b,N=i.Error?.[A]??i[A];E[b]=this.codec.createDeserializer().readSchema(x,N)}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/xml"}}});var uS={};At(uS,{AwsEc2QueryProtocol:()=>Of,AwsJson1_0Protocol:()=>Cf,AwsJson1_1Protocol:()=>Tf,AwsJsonRpcProtocol:()=>Ls,AwsQueryProtocol:()=>zo,AwsRestJsonProtocol:()=>Vo,AwsRestXmlProtocol:()=>Mf,AwsSmithyRpcV2CborProtocol:()=>_f,JsonCodec:()=>Ds,JsonShapeDeserializer:()=>jo,JsonShapeSerializer:()=>Ho,XmlCodec:()=>Ko,XmlShapeDeserializer:()=>ks,XmlShapeSerializer:()=>Go,_toBool:()=>zP,_toNum:()=>WP,_toStr:()=>VP,awsExpectUnion:()=>SI,loadRestJsonErrorCode:()=>Bo,loadRestXmlErrorCode:()=>Lf,parseJsonBody:()=>Jc,parseJsonErrorBody:()=>dI,parseXmlBody:()=>Wo,parseXmlErrorBody:()=>Df});var eu=w(()=>{HP();GP();gI();yI();Rf();EI();bf();Z_();eS();vI();Zc();NI();sS();LI();cS();If();aS();iS()});var Fn={};At(Fn,{AWSSDKSigV4Signer:()=>o_,AwsEc2QueryProtocol:()=>Of,AwsJson1_0Protocol:()=>Cf,AwsJson1_1Protocol:()=>Tf,AwsJsonRpcProtocol:()=>Ls,AwsQueryProtocol:()=>zo,AwsRestJsonProtocol:()=>Vo,AwsRestXmlProtocol:()=>Mf,AwsSdkSigV4ASigner:()=>Gc,AwsSdkSigV4Signer:()=>or,AwsSmithyRpcV2CborProtocol:()=>_f,JsonCodec:()=>Ds,JsonShapeDeserializer:()=>jo,JsonShapeSerializer:()=>Ho,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mo,NODE_SIGV4A_CONFIG_OPTIONS:()=>eP,XmlCodec:()=>Ko,XmlShapeDeserializer:()=>ks,XmlShapeSerializer:()=>Go,_toBool:()=>zP,_toNum:()=>WP,_toStr:()=>VP,awsExpectUnion:()=>SI,emitWarningIfUnsupportedVersion:()=>Do,getBearerTokenEnvKey:()=>ef,loadRestJsonErrorCode:()=>Bo,loadRestXmlErrorCode:()=>Lf,parseJsonBody:()=>Jc,parseJsonErrorBody:()=>dI,parseXmlBody:()=>Wo,parseXmlErrorBody:()=>Df,resolveAWSSDKSigV4Config:()=>CP,resolveAwsSdkSigV4AConfig:()=>Zx,resolveAwsSdkSigV4Config:()=>xi,setCredentialFeature:()=>Rs,setFeature:()=>qx,setTokenFeature:()=>Fx,state:()=>Zd,validateSigningProperties:()=>ko});var Nt=w(()=>{zr();C_();eu()});var Qo=_(Xo=>{"use strict";var f6=(ir(),le(bi)),p6=Oo(),h6=Ne(),hn=(Nt(),le(Fn)),$I=void 0;function m6(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function g6(t){let e=f6.normalizeProvider(t.userAgentAppId??$I),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!m6(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var y6=/\d{12}\.ddb/;async function E6(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&hn.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?hn.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):hn.setFeature(t,"RETRY_MODE_STANDARD","E"):hn.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let i=t.endpointV2;switch(String(i?.url?.hostname).match(y6)&&hn.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":hn.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":hn.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":hn.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&hn.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))hn.setFeature(t,o,a)}}var kI="user-agent",lS="x-amz-user-agent",MI=" ",dS="/",_6=/[^!$%&'*+\-.^_`|~\w]/g,S6=/[^!$%&'*+\-.^_`|~\w#]/g,qI="-",v6=1024;function w6(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=v6){e.length?e+=","+n:e+=n;continue}break}return e}var FI=t=>(e,r)=>async n=>{let{request:s}=n;if(!h6.HttpRequest.isInstance(s))return e(n);let{headers:i}=s,o=r?.userAgent?.map(qf)||[],a=(await t.defaultUserAgentProvider()).map(qf);await E6(r,t,n);let c=r;a.push(`m/${w6(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(qf)||[],l=await t.userAgentAppId();l&&a.push(qf(["app",`${l}`]));let d=p6.getUserAgentPrefix(),m=(d?[d]:[]).concat([...a,...o,...u]).join(MI),g=[...a.filter(E=>E.startsWith("aws-sdk-")),...u].join(MI);return t.runtime!=="browser"?(g&&(i[lS]=i[lS]?`${i[kI]} ${g}`:g),i[kI]=m):i[lS]=m,e({...n,request:s})},qf=t=>{let e=t[0].split(dS).map(o=>o.replace(_6,qI)).join(dS),r=t[1]?.replace(S6,qI),n=e.indexOf(dS),s=e.substring(0,n),i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},UI={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},b6=t=>({applyToStack:e=>{e.add(FI(t),UI)}});Xo.DEFAULT_UA_APP_ID=$I;Xo.getUserAgentMiddlewareOptions=UI;Xo.getUserAgentPlugin=b6;Xo.resolveUserAgentConfig=g6;Xo.userAgentMiddleware=FI});var fS=_(Yo=>{"use strict";var R6=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},C6=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};Yo.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Yo.SelectorType||(Yo.SelectorType={}));Yo.booleanSelector=R6;Yo.numberSelector=C6});var wr=_(wt=>{"use strict";var Ms=fS(),$f=Bt(),T6=Ci(),HI="AWS_USE_DUALSTACK_ENDPOINT",VI="use_dualstack_endpoint",A6=!1,x6={environmentVariableSelector:t=>Ms.booleanSelector(t,HI,Ms.SelectorType.ENV),configFileSelector:t=>Ms.booleanSelector(t,VI,Ms.SelectorType.CONFIG),default:!1},zI="AWS_USE_FIPS_ENDPOINT",WI="use_fips_endpoint",P6=!1,I6={environmentVariableSelector:t=>Ms.booleanSelector(t,zI,Ms.SelectorType.ENV),configFileSelector:t=>Ms.booleanSelector(t,WI,Ms.SelectorType.CONFIG),default:!1},N6=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:$f.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:$f.normalizeProvider(s??!1)})},O6=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:o}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${o}`)},D6=t=>{let e=$f.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=t;return Object.assign(t,{tls:i??!0,endpoint:r?$f.normalizeProvider(typeof r=="string"?s(r):r):()=>O6({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},GI="AWS_REGION",KI="region",L6={environmentVariableSelector:t=>t[GI],configFileSelector:t=>t[KI],default:()=>{throw new Error("Region is missing")}},k6={preferredFile:"credentials"},BI=new Set,M6=(t,e=T6.isValidHostLabel)=>{if(!BI.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else BI.add(t)},XI=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),q6=t=>XI(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,$6=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=q6(n);return M6(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return XI(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},jI=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,F6=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),U6=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",B6=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(s);if(i)return i[0].slice(1,-1)}},j6=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=U6(t,{partitionHash:i}),a=t in s?t:i[o]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=jI(s[a]?.variants,c),l=jI(i[o]?.variants,c),d=F6(a,{regionHostname:u,partitionHostname:l});if(d===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let m=B6(d,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:e});return{partition:o,signingService:n,hostname:d,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};wt.CONFIG_USE_DUALSTACK_ENDPOINT=VI;wt.CONFIG_USE_FIPS_ENDPOINT=WI;wt.DEFAULT_USE_DUALSTACK_ENDPOINT=A6;wt.DEFAULT_USE_FIPS_ENDPOINT=P6;wt.ENV_USE_DUALSTACK_ENDPOINT=HI;wt.ENV_USE_FIPS_ENDPOINT=zI;wt.NODE_REGION_CONFIG_FILE_OPTIONS=k6;wt.NODE_REGION_CONFIG_OPTIONS=L6;wt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=x6;wt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=I6;wt.REGION_ENV_NAME=GI;wt.REGION_INI_NAME=KI;wt.getRegionInfo=j6;wt.resolveCustomEndpointsConfig=N6;wt.resolveEndpointsConfig=D6;wt.resolveRegionConfig=$6});var tu=_(Ff=>{"use strict";var H6=Ne(),QI="content-length";function YI(t){return e=>async r=>{let n=r.request;if(H6.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(QI)===-1)try{let o=t(s);n.headers={...n.headers,[QI]:String(o)}}catch{}}return e({...r,request:n})}}var JI={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},V6=t=>({applyToStack:e=>{e.add(YI(t.bodyLengthChecker),JI)}});Ff.contentLengthMiddleware=YI;Ff.contentLengthMiddlewareOptions=JI;Ff.getContentLengthPlugin=V6});var hS=_(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.getHomeDir=void 0;var z6=require("os"),W6=require("path"),pS={},G6=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",K6=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${W6.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=G6();return pS[s]||(pS[s]=(0,z6.homedir)()),pS[s]};Uf.getHomeDir=K6});var mS=_(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.getSSOTokenFilepath=void 0;var X6=require("crypto"),Q6=require("path"),Y6=hS(),J6=t=>{let r=(0,X6.createHash)("sha1").update(t).digest("hex");return(0,Q6.join)((0,Y6.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Bf.getSSOTokenFilepath=J6});var ZI=_(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.getSSOTokenFromFile=qs.tokenIntercept=void 0;var Z6=require("fs/promises"),e8=mS();qs.tokenIntercept={};var t8=async t=>{if(qs.tokenIntercept[t])return qs.tokenIntercept[t];let e=(0,e8.getSSOTokenFilepath)(t),r=await(0,Z6.readFile)(e,"utf8");return JSON.parse(r)};qs.getSSOTokenFromFile=t8});var eN=_(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.readFile=mr.fileIntercept=mr.filePromises=void 0;var r8=require("fs/promises");mr.filePromises={};mr.fileIntercept={};var n8=(t,e)=>mr.fileIntercept[t]!==void 0?mr.fileIntercept[t]:((!mr.filePromises[t]||e?.ignoreCache)&&(mr.filePromises[t]=(0,r8.readFile)(t,"utf8")),mr.filePromises[t]);mr.readFile=n8});var Un=_(Wt=>{"use strict";var ru=hS(),tN=mS(),gS=ZI(),jf=require("path"),Hf=xn(),Jo=eN(),nN="AWS_PROFILE",sN="default",s8=t=>t.profile||process.env[nN]||sN,Ii=".",i8=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Ii);return r===-1?!1:Object.values(Hf.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(Ii),i=r.substring(0,s)===Hf.IniSectionType.PROFILE?r.substring(s+1):r;return e[i]=n,e},{...t.default&&{default:t.default}}),o8="AWS_CONFIG_FILE",iN=()=>process.env[o8]||jf.join(ru.getHomeDir(),".aws","config"),a8="AWS_SHARED_CREDENTIALS_FILE",c8=()=>process.env[a8]||jf.join(ru.getHomeDir(),".aws","credentials"),u8=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,l8=["__proto__","profile __proto__"],yS=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=u8.exec(a);if(c){let[,u,,l]=c;Object.values(Hf.IniSectionType).includes(u)&&(r=[u,l].join(Ii))}else r=a;if(l8.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let l=n?[n,c].join(Ii):c;e[r][l]=u}}}}return e},rN=()=>({}),oN=async(t={})=>{let{filepath:e=c8(),configFilepath:r=iN()}=t,n=ru.getHomeDir(),s="~/",i=e;e.startsWith(s)&&(i=jf.join(n,e.slice(2)));let o=r;r.startsWith(s)&&(o=jf.join(n,r.slice(2)));let a=await Promise.all([Jo.readFile(o,{ignoreCache:t.ignoreCache}).then(yS).then(i8).catch(rN),Jo.readFile(i,{ignoreCache:t.ignoreCache}).then(yS).catch(rN)]);return{configFile:a[0],credentialsFile:a[1]}},d8=t=>Object.entries(t).filter(([e])=>e.startsWith(Hf.IniSectionType.SSO_SESSION+Ii)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Ii)+1)]:n}),{}),f8=()=>({}),p8=async(t={})=>Jo.readFile(t.configFilepath??iN()).then(yS).then(d8).catch(f8),h8=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},m8=async t=>{let e=await oN(t);return h8(e.configFile,e.credentialsFile)},g8={getFileRecord(){return Jo.fileIntercept},interceptFile(t,e){Jo.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return gS.tokenIntercept},interceptToken(t,e){gS.tokenIntercept[t]=e}};Object.defineProperty(Wt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return gS.getSSOTokenFromFile}});Object.defineProperty(Wt,"readFile",{enumerable:!0,get:function(){return Jo.readFile}});Wt.CONFIG_PREFIX_SEPARATOR=Ii;Wt.DEFAULT_PROFILE=sN;Wt.ENV_PROFILE=nN;Wt.externalDataInterceptor=g8;Wt.getProfileName=s8;Wt.loadSharedConfigFiles=oN;Wt.loadSsoSessionData=p8;Wt.parseKnownFiles=m8;Object.keys(ru).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Wt,t)&&Object.defineProperty(Wt,t,{enumerable:!0,get:function(){return ru[t]}})});Object.keys(tN).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Wt,t)&&Object.defineProperty(Wt,t,{enumerable:!0,get:function(){return tN[t]}})})});var Bn=_(uN=>{"use strict";var nu=zt(),aN=Un();function cN(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var y8=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new nu.CredentialsProviderError(r.message||`Not found in ENV: ${cN(t.toString())}`,{logger:e?.logger})}},E8=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=aN.getProfileName(r),{configFile:s,credentialsFile:i}=await aN.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=e==="config"?{...o,...a}:{...a,...o};try{let l=t(c,e==="config"?s:i);if(l===void 0)throw new Error;return l}catch(u){throw new nu.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${cN(t.toString())}`,{logger:r.logger})}},_8=t=>typeof t=="function",S8=t=>_8(t)?async()=>await t():nu.fromStatic(t),v8=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return nu.memoize(nu.chain(y8(t,o),E8(e,n),S8(r)))};uN.loadConfig=v8});var pN=_(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.getEndpointUrlConfig=void 0;var lN=Un(),dN="AWS_ENDPOINT_URL",fN="endpoint_url",w8=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),n=e[[dN,...r].join("_")];if(n)return n;let s=e[dN];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(lN.CONFIG_PREFIX_SEPARATOR)];if(s){let i=t.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),fN].join(lN.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=e[fN];if(n)return n},default:void 0});Vf.getEndpointUrlConfig=w8});var hN=_(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.getEndpointFromConfig=void 0;var b8=Bn(),R8=pN(),C8=async t=>(0,b8.loadConfig)((0,R8.getEndpointUrlConfig)(t??""))();zf.getEndpointFromConfig=C8});var Hn=_(jn=>{"use strict";var gN=hN(),mN=bs(),T8=(ir(),le(bi)),Wf=Bt(),A8=Ac(),x8=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),D8(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!O8(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},P8=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,I8=/(\d+\.){3}\d+/,N8=/\.\./,O8=t=>P8.test(t)&&!I8.test(t)&&!N8.test(t),D8=t=>{let[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},L8=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},ES=t=>typeof t=="object"?"url"in t?mN.parseUrl(t.url):t:mN.parseUrl(t),yN=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await gN.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(ES(o)),r.isCustomEndpoint=!0)}let s=await EN(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},EN=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await L8(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await x8(n),n},_N=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&T8.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await yN(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=Wf.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},SN={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:A8.serializerMiddlewareOption.name},k8=(t,e)=>({applyToStack:r=>{r.addRelativeTo(_N({config:t,instructions:e}),SN)}}),M8=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>ES(await Wf.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Wf.normalizeProvider(n??!1),useFipsEndpoint:Wf.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=gN.getEndpointFromConfig(t.serviceId)),c),a},q8=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};jn.endpointMiddleware=_N;jn.endpointMiddlewareOptions=SN;jn.getEndpointFromInstructions=yN;jn.getEndpointPlugin=k8;jn.resolveEndpointConfig=M8;jn.resolveEndpointRequiredConfig=q8;jn.resolveParams=EN;jn.toEndpointV1=ES});var SS=_($s=>{"use strict";var $8=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],F8=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],U8=["TimeoutError","RequestTimeout","RequestTimeoutException"],B8=[500,502,503,504],j8=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],H8=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],vN=t=>t?.$retryable!==void 0,V8=t=>$8.includes(t.name),wN=t=>t.$metadata?.clockSkewCorrected,bN=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},z8=t=>t.$metadata?.httpStatusCode===429||F8.includes(t.name)||t.$retryable?.throttling==!0,_S=(t,e=0)=>vN(t)||wN(t)||U8.includes(t.name)||j8.includes(t?.code||"")||H8.includes(t?.code||"")||B8.includes(t.$metadata?.httpStatusCode||0)||bN(t)||t.cause!==void 0&&e<=10&&_S(t.cause,e+1),W8=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!_S(t)}return!1};$s.isBrowserNetworkError=bN;$s.isClockSkewCorrectedError=wN;$s.isClockSkewError=V8;$s.isRetryableByTrait=vN;$s.isServerError=W8;$s.isThrottlingError=z8;$s.isTransientError=_S});var Zo=_(et=>{"use strict";var G8=SS();et.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(et.RETRY_MODES||(et.RETRY_MODES={}));var vS=3,K8=et.RETRY_MODES.STANDARD,Kf=class Kf{constructor(e){f(this,"beta");f(this,"minCapacity");f(this,"minFillRate");f(this,"scaleConstant");f(this,"smooth");f(this,"currentCapacity",0);f(this,"enabled",!1);f(this,"lastMaxRate",0);f(this,"measuredTxRate",0);f(this,"requestCount",0);f(this,"fillRate");f(this,"lastThrottleTime");f(this,"lastTimestamp",0);f(this,"lastTxRateBucket");f(this,"maxCapacity");f(this,"timeWindow",0);this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Kf.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),G8.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};f(Kf,"setTimeoutFn",setTimeout);var Gf=Kf,su=100,CS=20*1e3,CN=500,wS=500,TN=5,AN=10,xN=1,X8="amz-sdk-invocation-id",Q8="amz-sdk-request",Y8=()=>{let t=su;return{computeNextBackoffDelay:n=>Math.floor(Math.min(CS,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},RN=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(CS,t),getRetryCost:()=>r}),iu=class{constructor(e){f(this,"maxAttempts");f(this,"mode",et.RETRY_MODES.STANDARD);f(this,"capacity",wS);f(this,"retryBackoffStrategy",Y8());f(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return RN({retryDelay:su,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?CN:su);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,RN({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(wS,this.capacity+(e.getRetryCost()??xN))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${vS}`),vS}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?AN:TN}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},bS=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"rateLimiter");f(this,"standardRetryStrategy");f(this,"mode",et.RETRY_MODES.ADAPTIVE);this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Gf,this.standardRetryStrategy=new iu(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},RS=class extends iu{constructor(r,n=su){super(typeof r=="function"?r:async()=>r);f(this,"computeNextBackoffDelay");typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(r,n){let s=await super.refreshRetryTokenForRetry(r,n);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};et.AdaptiveRetryStrategy=bS;et.ConfiguredRetryStrategy=RS;et.DEFAULT_MAX_ATTEMPTS=vS;et.DEFAULT_RETRY_DELAY_BASE=su;et.DEFAULT_RETRY_MODE=K8;et.DefaultRateLimiter=Gf;et.INITIAL_RETRY_TOKENS=wS;et.INVOCATION_ID_HEADER=X8;et.MAXIMUM_RETRY_DELAY=CS;et.NO_RETRY_INCREMENT=xN;et.REQUEST_HEADER=Q8;et.RETRY_COST=TN;et.StandardRetryStrategy=iu;et.THROTTLING_RETRY_DELAY_BASE=CN;et.TIMEOUT_RETRY_COST=AN});var PN=_(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.isStreamingPayload=void 0;var J8=require("stream"),Z8=t=>t?.body instanceof J8.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Xf.isStreamingPayload=Z8});var Vn=_(dt=>{"use strict";var Qe=Zo(),ea=Ne(),Fs=SS(),NN=xE(),IN=Bt(),e5=fe(),t5=PN(),r5=(t,e)=>{let r=t,n=Qe.NO_RETRY_INCREMENT,s=Qe.RETRY_COST,i=Qe.TIMEOUT_RETRY_COST,o=t,a=d=>d.name==="TimeoutError"?i:s,c=d=>a(d)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");let m=a(d);return o-=m,m},releaseRetryTokens:d=>{o+=d??n,o=Math.min(o,r)}})},ON=(t,e)=>Math.floor(Math.min(Qe.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),DN=t=>t?Fs.isRetryableByTrait(t)||Fs.isClockSkewError(t)||Fs.isThrottlingError(t)||Fs.isTransientError(t):!1,LN=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Qf=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"retryDecider");f(this,"delayDecider");f(this,"retryQuota");f(this,"mode",Qe.RETRY_MODES.STANDARD);this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??DN,this.delayDecider=r?.delayDecider??ON,this.retryQuota=r?.retryQuota??r5(Qe.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Qe.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(ea.HttpRequest.isInstance(c)&&(c.headers[Qe.INVOCATION_ID_HEADER]=NN.v4());;)try{ea.HttpRequest.isInstance(c)&&(c.headers[Qe.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,{response:u,output:l}}catch(u){let l=LN(u);if(i++,this.shouldRetry(l,i,a)){s=this.retryQuota.retrieveRetryTokens(l);let d=this.delayDecider(Fs.isThrottlingError(l)?Qe.THROTTLING_RETRY_DELAY_BASE:Qe.DEFAULT_RETRY_DELAY_BASE,i),m=n5(l.$response),g=Math.max(m||0,d);o+=g,await new Promise(E=>setTimeout(E,g));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=i,l.$metadata.totalRetryDelay=o,l}}},n5=t=>{if(!ea.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},TS=class extends Qf{constructor(r,n){let{rateLimiter:s,...i}=n??{};super(r,i);f(this,"rateLimiter");this.rateLimiter=s??new Qe.DefaultRateLimiter,this.mode=Qe.RETRY_MODES.ADAPTIVE}async retry(r,n){return super.retry(r,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},AS="AWS_MAX_ATTEMPTS",xS="max_attempts",s5={environmentVariableSelector:t=>{let e=t[AS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${AS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[xS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${xS} mast be a number, got "${e}"`);return r},default:Qe.DEFAULT_MAX_ATTEMPTS},i5=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=IN.normalizeProvider(n??Qe.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await IN.normalizeProvider(r)()===Qe.RETRY_MODES.ADAPTIVE?new Qe.AdaptiveRetryStrategy(s):new Qe.StandardRetryStrategy(s))})},kN="AWS_RETRY_MODE",MN="retry_mode",o5={environmentVariableSelector:t=>t[kN],configFileSelector:t=>t[MN],default:Qe.DEFAULT_RETRY_MODE},qN=()=>t=>async e=>{let{request:r}=e;return ea.HttpRequest.isInstance(r)&&(delete r.headers[Qe.INVOCATION_ID_HEADER],delete r.headers[Qe.REQUEST_HEADER]),t(e)},$N={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},a5=t=>({applyToStack:e=>{e.addRelativeTo(qN(),$N)}}),FN=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),i=await t.maxAttempts();if(c5(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,d=ea.HttpRequest.isInstance(l);for(d&&(l.headers[Qe.INVOCATION_ID_HEADER]=NN.v4());;)try{d&&(l.headers[Qe.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:m,output:g}=await e(n);return s.recordSuccess(o),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=u,{response:m,output:g}}catch(m){let g=u5(m);if(a=LN(m),d&&t5.isStreamingPayload(l))throw(r.logger instanceof e5.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let E=o.getRetryDelay();u+=E,await new Promise(b=>setTimeout(b,E))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},c5=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",u5=t=>{let e={error:t,errorType:l5(t)},r=BN(t.$response);return r&&(e.retryAfterHint=r),e},l5=t=>Fs.isThrottlingError(t)?"THROTTLING":Fs.isTransientError(t)?"TRANSIENT":Fs.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",UN={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},d5=t=>({applyToStack:e=>{e.add(FN(t),UN)}}),BN=t=>{if(!ea.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};dt.AdaptiveRetryStrategy=TS;dt.CONFIG_MAX_ATTEMPTS=xS;dt.CONFIG_RETRY_MODE=MN;dt.ENV_MAX_ATTEMPTS=AS;dt.ENV_RETRY_MODE=kN;dt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=s5;dt.NODE_RETRY_MODE_CONFIG_OPTIONS=o5;dt.StandardRetryStrategy=Qf;dt.defaultDelayDecider=ON;dt.defaultRetryDecider=DN;dt.getOmitRetryHeadersPlugin=a5;dt.getRetryAfterHint=BN;dt.getRetryPlugin=d5;dt.omitRetryHeadersMiddleware=qN;dt.omitRetryHeadersMiddlewareOptions=$N;dt.resolveRetryConfig=i5;dt.retryMiddleware=FN;dt.retryMiddlewareOptions=UN});var VN=_((hIe,HN)=>{"use strict";var Yf=Object.defineProperty,f5=Object.getOwnPropertyDescriptor,p5=Object.getOwnPropertyNames,h5=Object.prototype.hasOwnProperty,PS=(t,e)=>Yf(t,"name",{value:e,configurable:!0}),m5=(t,e)=>{for(var r in e)Yf(t,r,{get:e[r],enumerable:!0})},g5=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of p5(e))!h5.call(t,s)&&s!==r&&Yf(t,s,{get:()=>e[s],enumerable:!(n=f5(e,s))||n.enumerable});return t},y5=t=>g5(Yf({},"__esModule",{value:!0}),t),jN={};m5(jN,{build:()=>S5,parse:()=>_5,validate:()=>E5});HN.exports=y5(jN);var E5=PS(t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6,"validate"),_5=PS(t=>{let e=t.split(":");if(e.length<6||e[0]!=="arn")throw new Error("Malformed ARN");let[,r,n,s,i,...o]=e;return{partition:r,service:n,region:s,accountId:i,resource:o.join(":")}},"parse"),S5=PS(t=>{let{partition:e="aws",service:r,region:n,accountId:s,resource:i}=t;if([r,n,s,i].some(o=>typeof o!="string"))throw new Error("Input ARN object is invalid");return`arn:${e}:${r}:${n}:${s}:${i}`},"build")});var dO=_(Ce=>{"use strict";var ou=Ne(),KN=fe(),v5=uf(),Jf=fS(),w5=(Nt(),le(Fn)),XN=(ir(),le(bi));xn();var b5=Bt(),zN=Nc(),R5=VN(),C5="content-length",T5="x-amz-decoded-content-length";function QN(){return(t,e)=>async r=>{let{request:n}=r;if(ou.HttpRequest.isInstance(n)&&!(C5 in n.headers)&&!(T5 in n.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof KN.NoOpLogger)?e.logger.warn(s):console.warn(s)}return t({...r})}}var YN={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},A5=t=>({applyToStack:e=>{e.add(QN(),YN)}}),JN=t=>(e,r)=>async n=>{let s=await t.region(),i=t.region,o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{let a=await e(n);if(r.__s3RegionRedirect){o();let c=await t.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},ZN={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function eO(t){return(e,r)=>async n=>{try{return await e(n)}catch(s){if(t.followRegionRedirects){let i=s?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=s?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(s?.name==="IllegalLocationConstraintException"||o))){try{let c=a;r.logger?.debug(`Redirecting from ${await t.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return e(n)}}throw s}}}var tO={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},x5=t=>({applyToStack:e=>{e.add(eO(t),tO),e.addRelativeTo(JN(t),ZN)}}),rO=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(ou.HttpResponse.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{KN.parseRfc7231DateTime(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return s},nO={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},P5=t=>({applyToStack:e=>{e.addRelativeTo(rO(),nO)}}),tp=class tp{constructor(e={}){f(this,"data");f(this,"lastPurgeTime",Date.now());this.data=e}get(e){let r=this.data[e];if(r)return r}set(e,r){return this.data[e]=r,r}delete(e){delete this.data[e]}async purgeExpired(){let e=Date.now();if(!(this.lastPurgeTime+tp.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let s=await n.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[r]}}}};f(tp,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);var Zf=tp,ta=class{constructor(e,r=!1,n=Date.now()){f(this,"_identity");f(this,"isRefreshing");f(this,"accessed");this._identity=e,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}},rp=class rp{constructor(e,r=new Zf){f(this,"createSessionFn");f(this,"cache");this.createSessionFn=e,this.cache=r}async getS3ExpressIdentity(e,r){let n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?s.set(n,new ta(this.getIdentity(n))).identity:((o.expiration?.getTime()??0)<Date.now()+rp.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(u=>{s.set(n,new ta(Promise.resolve(u)))})),o)):s.set(n,new ta(this.getIdentity(n))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});let r=await this.createSessionFn(e);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};f(rp,"REFRESH_WINDOW_MS",6e4);var ep=rp,I5="Directory",N5="S3Express",O5="sigv4-s3express",IS="X-Amz-S3session-Token",NS=IS.toLowerCase(),D5="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",L5="s3_disable_express_session_auth",k5={environmentVariableSelector:t=>Jf.booleanSelector(t,D5,Jf.SelectorType.ENV),configFileSelector:t=>Jf.booleanSelector(t,L5,Jf.SelectorType.CONFIG),default:!1},OS=class extends v5.SignatureV4{async signWithCredentials(e,r,n){let s=WN(r);e.headers[NS]=r.sessionToken;let i=this;return GN(i,s),i.signRequest(e,n??{})}async presignWithCredentials(e,r,n){let s=WN(r);return delete e.headers[NS],e.headers[IS]=r.sessionToken,e.query=e.query??{},e.query[IS]=r.sessionToken,GN(this,s),this.presign(e,n)}};function WN(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function GN(t,e){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=t.credentialProvider,s=()=>(clearTimeout(r),t.credentialProvider=n,Promise.resolve(e));t.credentialProvider=s}var sO=t=>(e,r)=>async n=>{if(r.endpointV2){let s=r.endpointV2,i=s.properties?.authSchemes?.[0]?.name===O5;if((s.properties?.backend===N5||s.properties?.bucketType===I5)&&(w5.setFeature(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let c=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:a});r.s3ExpressIdentity=c,ou.HttpRequest.isInstance(n.request)&&c.sessionToken&&(n.request.headers[NS]=c.sessionToken)}}}return e(n)},iO={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},M5=t=>({applyToStack:e=>{e.add(sO(t),iO)}}),q5=async(t,e,r,n)=>{let s=await n.signWithCredentials(r,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},$5=t=>e=>{throw e},F5=(t,e)=>{},U5=XN.httpSigningMiddlewareOptions,oO=t=>(e,r)=>async n=>{if(!ou.HttpRequest.isInstance(n.request))return e(n);let i=b5.getSmithyContext(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u;r.s3ExpressIdentity?u=await q5(r.s3ExpressIdentity,o,n.request,await t.signer()):u=await c.sign(n.request,a,o);let l=await e({...n,request:u}).catch((c.errorHandler||$5)(o));return(c.successHandler||F5)(l.response,o),l},B5=t=>({applyToStack:e=>{e.addRelativeTo(oO(t),XN.httpSigningMiddlewareOptions)}}),j5=(t,{session:e})=>{let[r,n]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:c,bucketEndpoint:u,expectContinueHeader:l}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:c??new ep(async d=>r().send(new n({Bucket:d}))),bucketEndpoint:u??!1,expectContinueHeader:l??2097152})},H5={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},V5=3e3,aO=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(!ou.HttpResponse.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let u=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([u,l]=await zN.splitStream(a)),i.body=l;let d=await z5(u,{streamCollector:async g=>zN.headStream(g,V5)});typeof u?.destroy=="function"&&u.destroy();let m=t.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&H5[r.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return m&&m.endsWith("</Error>")&&(i.statusCode=400),s},z5=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),cO={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},W5=t=>({applyToStack:e=>{e.addRelativeTo(aO(t),cO)}});function G5(t){return(e,r)=>async n=>{if(t.bucketEndpoint){let s=r.endpointV2;if(s){let i=n.input.Bucket;if(typeof i=="string")try{let o=new URL(i);r.endpointV2={...s,url:o}}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return e(n)}}var K5={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function uO({bucketEndpoint:t}){return e=>async r=>{let{input:{Bucket:n}}=r;if(!t&&typeof n=="string"&&!R5.validate(n)&&n.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return e({...r})}}var lO={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},X5=t=>({applyToStack:e=>{e.add(uO(t),lO),e.addRelativeTo(G5(t),K5)}});Ce.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS=k5;Ce.S3ExpressIdentityCache=Zf;Ce.S3ExpressIdentityCacheEntry=ta;Ce.S3ExpressIdentityProviderImpl=ep;Ce.SignatureV4S3Express=OS;Ce.checkContentLengthHeader=QN;Ce.checkContentLengthHeaderMiddlewareOptions=YN;Ce.getCheckContentLengthHeaderPlugin=A5;Ce.getRegionRedirectMiddlewarePlugin=x5;Ce.getS3ExpiresMiddlewarePlugin=P5;Ce.getS3ExpressHttpSigningPlugin=B5;Ce.getS3ExpressPlugin=M5;Ce.getThrow200ExceptionsPlugin=W5;Ce.getValidateBucketNamePlugin=X5;Ce.regionRedirectEndpointMiddleware=JN;Ce.regionRedirectEndpointMiddlewareOptions=ZN;Ce.regionRedirectMiddleware=eO;Ce.regionRedirectMiddlewareOptions=tO;Ce.resolveS3Config=j5;Ce.s3ExpiresMiddleware=rO;Ce.s3ExpiresMiddlewareOptions=nO;Ce.s3ExpressHttpSigningMiddleware=oO;Ce.s3ExpressHttpSigningMiddlewareOptions=U5;Ce.s3ExpressMiddleware=sO;Ce.s3ExpressMiddlewareOptions=iO;Ce.throw200ExceptionsMiddleware=aO;Ce.throw200ExceptionsMiddlewareOptions=cO;Ce.validateBucketNameMiddleware=uO;Ce.validateBucketNameMiddlewareOptions=lO});var kS=_(LS=>{"use strict";var Q5=dO(),fO=uf(),au={CrtSignerV4:null},DS=class{constructor(e){f(this,"sigv4aSigner");f(this,"sigv4Signer");f(this,"signerOptions");this.sigv4Signer=new Q5.SignatureV4S3Express(e),this.signerOptions=e}static sigv4aDependency(){return typeof au.CrtSignerV4=="function"?"crt":typeof fO.signatureV4aContainer.SignatureV4a=="function"?"js":"none"}async sign(e,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(e,r):this.sigv4Signer.sign(e,r)}async signWithCredentials(e,r,n={}){if(n.signingRegion==="*"){let s=this.getSigv4aSigner(),i=au.CrtSignerV4;if(i&&s instanceof i)return s.signWithCredentials(e,r,n);throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(e,r,n)}async presign(e,r={}){if(r.signingRegion==="*"){let n=this.getSigv4aSigner(),s=au.CrtSignerV4;if(s&&n instanceof s)return n.presign(e,r);throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(e,r)}async presignWithCredentials(e,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let e=au.CrtSignerV4,r=fO.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!e&&!r)throw new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(e&&typeof e=="function")this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r=="function")this.sigv4aSigner=new r({...this.signerOptions});else throw new Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!="function")throw new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}};LS.SignatureV4MultiRegion=DS;LS.signatureV4CrtContainer=au});var wO=_(np=>{"use strict";Object.defineProperty(np,"__esModule",{value:!0});np.ruleSet=void 0;var SO="required",me="type",mt="fn",gt="argv",Us="ref",Y5=!1,MS=!0,KS="isSet",qS="stringEquals",XS="getAttr",ra="booleanEquals",Wr="endpoint",ar="tree",zn="error",$S={[SO]:!1,[me]:"string"},pO={[SO]:!0,default:!1,[me]:"boolean"},VS={[Us]:"Endpoint"},FS={[mt]:KS,[gt]:[{[Us]:"Region"}]},zS={[Us]:"Region"},US={[mt]:"aws.partition",[gt]:[zS],assign:"PartitionResult"},QS={[Us]:"PartitionResult"},WS={[mt]:ra,[gt]:[{[Us]:"UseFIPS"},!0]},J5={[Us]:"UseFIPS"},GS={[mt]:ra,[gt]:[{[Us]:"UseDualStack"},!0]},hO={url:"https://events.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:{},headers:{}},Gt={},mO={[Us]:"EndpointId"},BS={authSchemes:[{name:"sigv4a",signingName:"events",signingRegionSet:["*"]}]},vO={[mt]:ra,[gt]:[!0,{[mt]:XS,[gt]:[QS,"supportsDualStack"]}]},gO={[zn]:"DualStack is enabled but this partition does not support DualStack",[me]:zn},yO={[mt]:XS,[gt]:[QS,"supportsFIPS"]},jS=[{[mt]:KS,[gt]:[VS]}],HS=[GS],EO=[vO],_O=[WS],Z5={version:"1.0",parameters:{Region:$S,UseDualStack:pO,UseFIPS:pO,Endpoint:$S,EndpointId:$S},rules:[{conditions:[{[mt]:"not",[gt]:jS},FS,US,{[mt]:qS,[gt]:[{[mt]:XS,[gt]:[QS,"name"]},"aws-us-gov"]},WS,GS],endpoint:hO,[me]:Wr},{conditions:[{[mt]:KS,[gt]:[mO]},FS,US],rules:[{conditions:[{[mt]:"isValidHostLabel",[gt]:[mO,MS]}],rules:[{conditions:[{[mt]:ra,[gt]:[J5,Y5]}],rules:[{conditions:jS,endpoint:{url:VS,properties:BS,headers:Gt},[me]:Wr},{conditions:HS,rules:[{conditions:EO,rules:[{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dualStackDnsSuffix}",properties:BS,headers:Gt},[me]:Wr}],[me]:ar},gO],[me]:ar},{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dnsSuffix}",properties:BS,headers:Gt},[me]:Wr}],[me]:ar},{error:"Invalid Configuration: FIPS is not supported with EventBridge multi-region endpoints.",[me]:zn}],[me]:ar},{error:"EndpointId must be a valid host label.",[me]:zn}],[me]:ar},{conditions:jS,rules:[{conditions:_O,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[me]:zn},{conditions:HS,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[me]:zn},{endpoint:{url:VS,properties:Gt,headers:Gt},[me]:Wr}],[me]:ar},{conditions:[FS],rules:[{conditions:[US],rules:[{conditions:[WS,GS],rules:[{conditions:[{[mt]:ra,[gt]:[MS,yO]},vO],rules:[{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gt,headers:Gt},[me]:Wr}],[me]:ar},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[me]:zn}],[me]:ar},{conditions:_O,rules:[{conditions:[{[mt]:ra,[gt]:[yO,MS]}],rules:[{conditions:[{[mt]:qS,[gt]:[zS,"us-gov-east-1"]}],endpoint:{url:"https://events.us-gov-east-1.amazonaws.com",properties:Gt,headers:Gt},[me]:Wr},{conditions:[{[mt]:qS,[gt]:[zS,"us-gov-west-1"]}],endpoint:{url:"https://events.us-gov-west-1.amazonaws.com",properties:Gt,headers:Gt},[me]:Wr},{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},[me]:Wr}],[me]:ar},{error:"FIPS is enabled but this partition does not support FIPS",[me]:zn}],[me]:ar},{conditions:HS,rules:[{conditions:EO,rules:[{endpoint:hO,[me]:Wr}],[me]:ar},gO],[me]:ar},{endpoint:{url:"https://events.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},[me]:Wr}],[me]:ar}],[me]:ar},{error:"Invalid Configuration: Missing Region",[me]:zn}]};np.ruleSet=Z5});var JS=_(sp=>{"use strict";Object.defineProperty(sp,"__esModule",{value:!0});sp.defaultEndpointResolver=void 0;var eK=Oo(),YS=Ci(),tK=wO(),rK=new YS.EndpointCache({size:50,params:["Endpoint","EndpointId","Region","UseDualStack","UseFIPS"]}),nK=(t,e={})=>rK.get(t,()=>(0,YS.resolveEndpoint)(tK.ruleSet,{endpointParams:t,logger:e.logger}));sp.defaultEndpointResolver=nK;YS.customEndpointFunctions.aws=eK.awsEndpointFunctions});var ZS=_(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.resolveHttpAuthSchemeConfig=Bs.defaultEventBridgeHttpAuthSchemeProvider=Bs.defaultEventBridgeHttpAuthSchemeParametersProvider=void 0;var bO=(Nt(),le(Fn)),sK=kS(),iK=Hn(),ip=Bt(),oK=JS(),aK=t=>async(e,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=await t(e,r,n),i=(0,ip.getSmithyContext)(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let o=await(0,iK.resolveParams)(n,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},cK=async(t,e,r)=>({operation:(0,ip.getSmithyContext)(e).operation,region:await(0,ip.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Bs.defaultEventBridgeHttpAuthSchemeParametersProvider=aK(cK);function RO(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function CO(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var uK=(t,e,r)=>s=>{let o=t(s).properties?.authSchemes;if(!o)return e(s);let a=[];for(let c of o){let{name:u,properties:l={},...d}=c,m=u.toLowerCase();u!==m&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${u}\` to \`${m}\``);let g;if(m==="sigv4a"){g="aws.auth#sigv4a";let x=o.find(A=>{let N=A.name.toLowerCase();return N!=="sigv4a"&&N.startsWith("sigv4")});if(sK.SignatureV4MultiRegion.sigv4aDependency()==="none"&&x)continue}else if(m.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${m}\``);let E=r[g];if(!E)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);let b=E(s);b.schemeId=g,b.signingProperties={...b.signingProperties||{},...d,...l},a.push(b)}return a},lK=t=>{let e=[];switch(t.operation){default:e.push(RO(t)),e.push(CO(t))}return e};Bs.defaultEventBridgeHttpAuthSchemeProvider=uK(oK.defaultEndpointResolver,lK,{"aws.auth#sigv4":RO,"aws.auth#sigv4a":CO});var dK=t=>{let e=(0,bO.resolveAwsSdkSigV4Config)(t),r=(0,bO.resolveAwsSdkSigV4AConfig)(e);return Object.assign(r,{authSchemePreference:(0,ip.normalizeProvider)(t.authSchemePreference??[])})};Bs.resolveHttpAuthSchemeConfig=dK});var TO=_((wIe,fK)=>{fK.exports={name:"@aws-sdk/client-eventbridge",description:"AWS SDK for JavaScript Eventbridge Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-eventbridge","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo eventbridge",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.929.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/signature-v4-multi-region":"3.928.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.928.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-eventbridge",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-eventbridge"}}});var ev=_(js=>{"use strict";var pK=(zr(),le(Cs)),hK=zt(),AO="AWS_ACCESS_KEY_ID",xO="AWS_SECRET_ACCESS_KEY",PO="AWS_SESSION_TOKEN",IO="AWS_CREDENTIAL_EXPIRATION",NO="AWS_CREDENTIAL_SCOPE",OO="AWS_ACCOUNT_ID",mK=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[AO],r=process.env[xO],n=process.env[PO],s=process.env[IO],i=process.env[NO],o=process.env[OO];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return pK.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new hK.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};js.ENV_ACCOUNT_ID=OO;js.ENV_CREDENTIAL_SCOPE=NO;js.ENV_EXPIRATION=IO;js.ENV_KEY=AO;js.ENV_SECRET=xO;js.ENV_SESSION=PO;js.fromEnv=mK});var uu=_(Ot=>{"use strict";var mn=zt(),gK=require("url"),yK=require("buffer"),EK=require("http"),iv=Bn(),_K=bs();function cu(t){return new Promise((e,r)=>{let n=EK.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new mn.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new mn.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new mn.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{e(yK.Buffer.concat(o)),n.destroy()})}),n.end()})}var MO=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",qO=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),$O=1e3,FO=0,ov=({maxRetries:t=FO,timeout:e=$O})=>({maxRetries:t,timeout:e}),rv=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},op="AWS_CONTAINER_CREDENTIALS_FULL_URI",ap="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",nv="AWS_CONTAINER_AUTHORIZATION_TOKEN",SK=(t={})=>{let{timeout:e,maxRetries:r}=ov(t);return()=>rv(async()=>{let n=await CK({logger:t.logger}),s=JSON.parse(await vK(e,n));if(!MO(s))throw new mn.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return qO(s)},r)},vK=async(t,e)=>(process.env[nv]&&(e.headers={...e.headers,Authorization:process.env[nv]}),(await cu({...e,timeout:t})).toString()),wK="169.254.170.2",bK={localhost:!0,"127.0.0.1":!0},RK={"http:":!0,"https:":!0},CK=async({logger:t})=>{if(process.env[ap])return{hostname:wK,path:process.env[ap]};if(process.env[op]){let e=gK.parse(process.env[op]);if(!e.hostname||!(e.hostname in bK))throw new mn.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in RK))throw new mn.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new mn.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${ap} or ${op} environment variable is set`,{tryNextLink:!1,logger:t})},sv=class t extends mn.CredentialsProviderError{constructor(r,n=!0){super(r,n);f(this,"tryNextLink");f(this,"name","InstanceMetadataV1FallbackError");this.tryNextLink=n,Object.setPrototypeOf(this,t.prototype)}};Ot.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(Ot.Endpoint||(Ot.Endpoint={}));var TK="AWS_EC2_METADATA_SERVICE_ENDPOINT",AK="ec2_metadata_service_endpoint",xK={environmentVariableSelector:t=>t[TK],configFileSelector:t=>t[AK],default:void 0},na;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(na||(na={}));var PK="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",IK="ec2_metadata_service_endpoint_mode",NK={environmentVariableSelector:t=>t[PK],configFileSelector:t=>t[IK],default:na.IPv4},UO=async()=>_K.parseUrl(await OK()||await DK()),OK=async()=>iv.loadConfig(xK)(),DK=async()=>{let t=await iv.loadConfig(NK)();switch(t){case na.IPv4:return Ot.Endpoint.IPv4;case na.IPv6:return Ot.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(na)}`)}},LK=5*60,kK=5*60,MK="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",DO=(t,e)=>{let r=LK+Math.floor(Math.random()*kK),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+MK);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},qK=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=DO(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=DO(n,r);else throw i}return n=s,s}},BO="/latest/meta-data/iam/security-credentials/",$K="/latest/api/token",tv="AWS_EC2_METADATA_V1_DISABLED",LO="ec2_metadata_v1_disabled",kO="x-aws-ec2-metadata-token",FK=(t={})=>qK(UK(t),{logger:t.logger}),UK=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:i}=ov(t),o=async(a,c)=>{if(e||c.headers?.[kO]==null){let d=!1,m=!1,g=await iv.loadConfig({environmentVariableSelector:E=>{let b=E[tv];if(m=!!b&&b!=="false",b===void 0)throw new mn.CredentialsProviderError(`${tv} not set in env, checking config file next.`,{logger:t.logger});return m},configFileSelector:E=>{let b=E[LO];return d=!!b&&b!=="false",d},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||g){let E=[];throw t.ec2MetadataV1Disabled&&E.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),d&&E.push(`config file profile (${LO})`),m&&E.push(`process environment variable (${tv})`),new sv(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${E.join(", ")}].`)}}let l=(await rv(async()=>{let d;try{d=await jK(c)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)).trim();return rv(async()=>{let d;try{d=await HK(l,c,t)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)};return async()=>{let a=await UO();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await BK({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[kO]:c},timeout:s})}}},BK=async t=>cu({...t,path:$K,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),jK=async t=>(await cu({...t,path:BO})).toString(),HK=async(t,e,r)=>{let n=JSON.parse((await cu({...e,path:BO+t})).toString());if(!MO(n))throw new mn.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return qO(n)};Ot.DEFAULT_MAX_RETRIES=FO;Ot.DEFAULT_TIMEOUT=$O;Ot.ENV_CMDS_AUTH_TOKEN=nv;Ot.ENV_CMDS_FULL_URI=op;Ot.ENV_CMDS_RELATIVE_URI=ap;Ot.fromContainerMetadata=SK;Ot.fromInstanceMetadata=FK;Ot.getInstanceMetadataEndpoint=UO;Ot.httpRequest=cu;Ot.providerConfigFromInit=ov});var jO=_(cp=>{"use strict";Object.defineProperty(cp,"__esModule",{value:!0});cp.checkUrl=void 0;var VK=zt(),zK="169.254.170.2",WK="169.254.170.23",GK="[fd00:ec2::23]",KK=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===zK||t.hostname===WK||t.hostname===GK)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new VK.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};cp.checkUrl=KK});var HO=_(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.createGetRequest=JK;up.getCredentials=ZK;var av=zt(),XK=Ne(),QK=fe(),YK=Nc();function JK(t){return new XK.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function ZK(t,e){let n=await(0,YK.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new av.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,QK.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new av.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new av.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var VO=_(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.retryWrapper=void 0;var e9=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};lp.retryWrapper=e9});var GO=_(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.fromHttp=void 0;var t9=(Bc(),le(Uc)),r9=(zr(),le(Cs)),n9=mi(),zO=zt(),s9=t9.__importDefault(require("fs/promises")),i9=jO(),WO=HO(),o9=VO(),a9="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",c9="http://169.254.170.2",u9="AWS_CONTAINER_CREDENTIALS_FULL_URI",l9="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",d9="AWS_CONTAINER_AUTHORIZATION_TOKEN",f9=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[a9],n=t.awsContainerCredentialsFullUri??process.env[u9],s=t.awsContainerAuthorizationToken??process.env[d9],i=t.awsContainerAuthorizationTokenFile??process.env[l9],o=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${c9}${r}`;else throw new zO.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,i9.checkUrl)(a,t.logger);let c=n9.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,o9.retryWrapper)(async()=>{let u=(0,WO.createGetRequest)(a);s?u.headers.Authorization=s:i&&(u.headers.Authorization=(await s9.default.readFile(i)).toString());try{let l=await c.handle(u);return(0,WO.getCredentials)(l.response).then(d=>(0,r9.setCredentialFeature)(d,"CREDENTIALS_HTTP","z"))}catch(l){throw new zO.CredentialsProviderError(String(l),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};dp.fromHttp=f9});var cv=_(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.fromHttp=void 0;var p9=GO();Object.defineProperty(fp,"fromHttp",{enumerable:!0,get:function(){return p9.fromHttp}})});function h9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function m9(t){return{schemeId:"smithy.api#noAuth"}}var lu,KO,XO,QO,uv=w(()=>{Nt();lu=T(Bt()),KO=async(t,e,r)=>({operation:(0,lu.getSmithyContext)(e).operation,region:await(0,lu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});XO=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(m9(t));break}default:e.push(h9(t))}return e},QO=t=>{let e=xi(t);return Object.assign(e,{authSchemePreference:(0,lu.normalizeProvider)(t.authSchemePreference??[])})}});var YO,JO,lv=w(()=>{YO=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),JO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var pp,dv=w(()=>{pp={name:"@aws-sdk/nested-clients",version:"3.929.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var du=_(Ni=>{"use strict";var ZO=require("os"),fv=require("process"),y9=Qo(),eD={isCrtAvailable:!1},E9=()=>eD.isCrtAvailable?["md/crt-avail"]:null,tD=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${ZO.platform()}`,ZO.release()],["lang/js"],["md/nodejs",`${fv.versions.node}`]],s=E9();s&&n.push(s),t&&n.push([`api/${t}`,e]),fv.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${fv.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},_9=tD,rD="AWS_SDK_UA_APP_ID",nD="sdk_ua_app_id",S9="sdk-ua-app-id",v9={environmentVariableSelector:t=>t[rD],configFileSelector:t=>t[nD]??t[S9],default:y9.DEFAULT_UA_APP_ID};Ni.NODE_APP_ID_CONFIG_OPTIONS=v9;Ni.UA_APP_ID_ENV_NAME=rD;Ni.UA_APP_ID_INI_NAME=nD;Ni.createDefaultUserAgentProvider=tD;Ni.crtAvailability=eD;Ni.defaultUserAgent=_9});var fu=_(oD=>{"use strict";var pv=bo(),w9=St(),b9=require("buffer"),sD=require("crypto"),hv=class{constructor(e,r){f(this,"algorithmIdentifier");f(this,"secret");f(this,"hash");this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(w9.toUint8Array(iD(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?sD.createHmac(this.algorithmIdentifier,iD(this.secret)):sD.createHash(this.algorithmIdentifier)}};function iD(t,e){return b9.Buffer.isBuffer(t)?t:typeof t=="string"?pv.fromString(t,e):ArrayBuffer.isView(t)?pv.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):pv.fromArrayBuffer(t)}oD.Hash=hv});var pu=_(aD=>{"use strict";var mv=require("fs"),R9=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof mv.ReadStream){if(t.path!=null)return mv.lstatSync(t.path).size;if(typeof t.fd=="number")return mv.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};aD.calculateBodyLength=R9});var yD,Rr,Cr,oa,cD,hu,sa,ia,Wn,gv,yv,uD,lD,dD,ED,_D,br,fD,SD,pD,hD,mD,gD,C9,vD,wD=w(()=>{yD="required",Rr="fn",Cr="argv",oa="ref",cD="isSet",hu="booleanEquals",sa="error",ia="endpoint",Wn="tree",gv="PartitionResult",yv="getAttr",uD={[yD]:!1,type:"string"},lD={[yD]:!0,default:!1,type:"boolean"},dD={[oa]:"Endpoint"},ED={[Rr]:hu,[Cr]:[{[oa]:"UseFIPS"},!0]},_D={[Rr]:hu,[Cr]:[{[oa]:"UseDualStack"},!0]},br={},fD={[Rr]:yv,[Cr]:[{[oa]:gv},"supportsFIPS"]},SD={[oa]:gv},pD={[Rr]:hu,[Cr]:[!0,{[Rr]:yv,[Cr]:[SD,"supportsDualStack"]}]},hD=[ED],mD=[_D],gD=[{[oa]:"Region"}],C9={version:"1.0",parameters:{Region:uD,UseDualStack:lD,UseFIPS:lD,Endpoint:uD},rules:[{conditions:[{[Rr]:cD,[Cr]:[dD]}],rules:[{conditions:hD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:sa},{conditions:mD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:sa},{endpoint:{url:dD,properties:br,headers:br},type:ia}],type:Wn},{conditions:[{[Rr]:cD,[Cr]:gD}],rules:[{conditions:[{[Rr]:"aws.partition",[Cr]:gD,assign:gv}],rules:[{conditions:[ED,_D],rules:[{conditions:[{[Rr]:hu,[Cr]:[!0,fD]},pD],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:ia}],type:Wn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:sa}],type:Wn},{conditions:hD,rules:[{conditions:[{[Rr]:hu,[Cr]:[fD,!0]}],rules:[{conditions:[{[Rr]:"stringEquals",[Cr]:[{[Rr]:yv,[Cr]:[SD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:br,headers:br},type:ia},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:ia}],type:Wn},{error:"FIPS is enabled but this partition does not support FIPS",type:sa}],type:Wn},{conditions:mD,rules:[{conditions:[pD],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:ia}],type:Wn},{error:"DualStack is enabled but this partition does not support DualStack",type:sa}],type:Wn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:ia}],type:Wn}],type:Wn},{error:"Invalid Configuration: Missing Region",type:sa}]},vD=C9});var bD,aa,T9,RD,CD=w(()=>{bD=T(Oo()),aa=T(Ci());wD();T9=new aa.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),RD=(t,e={})=>T9.get(t,()=>(0,aa.resolveEndpoint)(vD,{endpointParams:t,logger:e.logger}));aa.customEndpointFunctions.aws=bD.awsEndpointFunctions});var TD,AD,hp,mp,xD,PD=w(()=>{Nt();eu();ir();TD=T(fe()),AD=T(bs()),hp=T(vt()),mp=T(St());uv();CD();xD=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??hp.fromBase64,base64Encoder:t?.base64Encoder??hp.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??RD,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??XO,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new or},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Dn}],logger:t?.logger??new TD.NoOpLogger,protocol:t?.protocol??new Vo({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??AD.parseUrl,utf8Decoder:t?.utf8Decoder??mp.fromUtf8,utf8Encoder:t?.utf8Encoder??mp.toUtf8})});var mu=_(DD=>{"use strict";var A9=wr(),ID=Bn(),x9=zt(),P9="AWS_EXECUTION_ENV",ND="AWS_REGION",OD="AWS_DEFAULT_REGION",I9="AWS_EC2_METADATA_DISABLED",N9=["in-region","cross-region","mobile","standard","legacy"],O9="/latest/meta-data/placement/region",D9="AWS_DEFAULTS_MODE",L9="defaults_mode",k9={environmentVariableSelector:t=>t[D9],configFileSelector:t=>t[L9],default:"legacy"},M9=({region:t=ID.loadConfig(A9.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=ID.loadConfig(k9)}={})=>x9.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return q9(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${N9.join(", ")}, got ${r}`)}}),q9=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await $9();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},$9=async()=>{if(process.env[P9]&&(process.env[ND]||process.env[OD]))return process.env[ND]??process.env[OD];if(!process.env[I9])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>T(uu())),r=await t();return(await e({...r,path:O9})).toString()}catch{}};DD.resolveDefaultsModeConfig=M9});var gp,Vs,LD,yp,Hs,Ep,kD,MD,qD,$D,FD,UD,BD=w(()=>{dv();Nt();gp=T(du()),Vs=T(wr()),LD=T(fu()),yp=T(Vn()),Hs=T(Bn()),Ep=T(mi()),kD=T(pu()),MD=T(Zo());PD();qD=T(fe()),$D=T(mu()),FD=T(fe()),UD=t=>{(0,FD.emitWarningIfUnsupportedVersion)(process.version);let e=(0,$D.resolveDefaultsModeConfig)(t),r=()=>e().then(qD.loadConfigsForDefaultMode),n=xD(t);Do(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Hs.loadConfig)(Mo,s),bodyLengthChecker:t?.bodyLengthChecker??kD.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,gp.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:pp.version}),maxAttempts:t?.maxAttempts??(0,Hs.loadConfig)(yp.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Hs.loadConfig)(Vs.NODE_REGION_CONFIG_OPTIONS,{...Vs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Ep.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Hs.loadConfig)({...yp.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||MD.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??LD.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Ep.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Hs.loadConfig)(Vs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Hs.loadConfig)(Vs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Hs.loadConfig)(gp.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var HD=_(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.warning=void 0;ca.stsRegionDefaultResolver=U9;var jD=wr(),F9=Bn();function U9(t={}){return(0,F9.loadConfig)({...jD.NODE_REGION_CONFIG_OPTIONS,async default(){return ca.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...jD.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}ca.warning={silence:!1}});var ua=_(gn=>{"use strict";var gu=wr(),VD=HD(),B9=t=>({setRegion(e){t.region=e},region(){return t.region}}),j9=t=>({region:t.region()});Object.defineProperty(gn,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return gu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(gn,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return gu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(gn,"REGION_ENV_NAME",{enumerable:!0,get:function(){return gu.REGION_ENV_NAME}});Object.defineProperty(gn,"REGION_INI_NAME",{enumerable:!0,get:function(){return gu.REGION_INI_NAME}});Object.defineProperty(gn,"resolveRegionConfig",{enumerable:!0,get:function(){return gu.resolveRegionConfig}});gn.getAwsRegionExtensionConfiguration=B9;gn.resolveAwsRegionExtensionConfiguration=j9;Object.keys(VD).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(gn,t)&&Object.defineProperty(gn,t,{enumerable:!0,get:function(){return VD[t]}})})});var zD,WD,GD=w(()=>{zD=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},WD=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var _p,Sp,vp,KD,XD=w(()=>{_p=T(ua()),Sp=T(Ne()),vp=T(fe());GD();KD=(t,e)=>{let r=Object.assign((0,_p.getAwsRegionExtensionConfiguration)(t),(0,vp.getDefaultExtensionConfiguration)(t),(0,Sp.getHttpHandlerExtensionConfiguration)(t),zD(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,_p.resolveAwsRegionExtensionConfiguration)(r),(0,vp.resolveDefaultRuntimeConfig)(r),(0,Sp.resolveHttpHandlerRuntimeConfig)(r),WD(r))}});var wp,QD,YD,bp,JD,ZD,eL,Rp,Ev,yu,_v=w(()=>{wp=T(vc()),QD=T(wc()),YD=T(Rc()),bp=T(Qo()),JD=T(wr());ir();$e();ZD=T(tu()),eL=T(Hn()),Rp=T(Vn()),Ev=T(fe());uv();lv();BD();XD();yu=class extends Ev.Client{constructor(...[r]){let n=UD(r||{});super(n);f(this,"config");this.initConfig=n;let s=YO(n),i=(0,bp.resolveUserAgentConfig)(s),o=(0,Rp.resolveRetryConfig)(i),a=(0,JD.resolveRegionConfig)(o),c=(0,wp.resolveHostHeaderConfig)(a),u=(0,eL.resolveEndpointConfig)(c),l=QO(u),d=KD(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(cE(this.config)),this.middlewareStack.use((0,bp.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Rp.getRetryPlugin)(this.config)),this.middlewareStack.use((0,ZD.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,wp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,QD.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,YD.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Tc(this.config,{httpAuthSchemeParametersProvider:KO,identityProviderConfigProvider:async m=>new wi({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(xc(this.config))}destroy(){super.destroy()}}});var tL,yt,Cp=w(()=>{tL=T(fe()),yt=class t extends tL.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var H9,Eu,_u,Su,vu,wu,bu,V9,Ru,Cu,Tu,Au,xu,rL=w(()=>{Cp();H9={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Eu=class t extends yt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},_u=class t extends yt{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});f(this,"name","AuthorizationPendingException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Su=class t extends yt{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},vu=class t extends yt{constructor(r){super({name:"InternalServerException",$fault:"server",...r});f(this,"name","InternalServerException");f(this,"$fault","server");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},wu=class t extends yt{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});f(this,"name","InvalidClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},bu=class t extends yt{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});f(this,"name","InvalidGrantException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},V9={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Ru=class t extends yt{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},Cu=class t extends yt{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});f(this,"name","InvalidScopeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Tu=class t extends yt{constructor(r){super({name:"SlowDownException",$fault:"client",...r});f(this,"name","SlowDownException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Au=class t extends yt{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});f(this,"name","UnauthorizedClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},xu=class t extends yt{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});f(this,"name","UnsupportedGrantTypeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}}});var Sv=w(()=>{rL()});var z9,W9,G9,K9,X9,Q9,Y9,J9,Z9,eX,tX,rX,nX,sX,iX,oX,aX,cX,uX,lX,yn,dX,fX,pX,hX,mX,tt,gX,Gr,yX,EX,Kr,_X,nL,sL,SX,vX,wX,iL,bX,Te,RX,CX,TX,AX,oL,xX,PX,IX,NX,OX,DX,LX,kX,MX,qX,$X,FX,UX,BX,aL,cL=w(()=>{$e();Sv();Cp();z9="AccessDeniedException",W9="AuthorizationPendingException",G9="AccessToken",K9="ClientSecret",X9="CreateToken",Q9="CreateTokenRequest",Y9="CreateTokenResponse",J9="CodeVerifier",Z9="ExpiredTokenException",eX="InvalidClientException",tX="InvalidGrantException",rX="InvalidRequestException",nX="InternalServerException",sX="InvalidScopeException",iX="IdToken",oX="RefreshToken",aX="SlowDownException",cX="UnauthorizedClientException",uX="UnsupportedGrantTypeException",lX="accessToken",yn="client",dX="clientId",fX="clientSecret",pX="codeVerifier",hX="code",mX="deviceCode",tt="error",gX="expiresIn",Gr="error_description",yX="grantType",EX="http",Kr="httpError",_X="idToken",nL="reason",sL="refreshToken",SX="redirectUri",vX="scope",wX="server",iL="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",bX="tokenType",Te="com.amazonaws.ssooidc",RX=[0,Te,G9,8,0],CX=[0,Te,K9,8,0],TX=[0,Te,J9,8,0],AX=[0,Te,iX,8,0],oL=[0,Te,oX,8,0],xX=[-3,Te,z9,{[tt]:yn,[Kr]:400},[tt,nL,Gr],[0,0,0]];_e.for(Te).registerError(xX,Eu);PX=[-3,Te,W9,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(PX,_u);IX=[3,Te,Q9,0,[dX,fX,yX,mX,hX,sL,vX,SX,pX],[0,[()=>CX,0],0,0,0,[()=>oL,0],64,0,[()=>TX,0]]],NX=[3,Te,Y9,0,[lX,bX,gX,sL,_X],[[()=>RX,0],0,1,[()=>oL,0],[()=>AX,0]]],OX=[-3,Te,Z9,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(OX,Su);DX=[-3,Te,nX,{[tt]:wX,[Kr]:500},[tt,Gr],[0,0]];_e.for(Te).registerError(DX,vu);LX=[-3,Te,eX,{[tt]:yn,[Kr]:401},[tt,Gr],[0,0]];_e.for(Te).registerError(LX,wu);kX=[-3,Te,tX,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(kX,bu);MX=[-3,Te,rX,{[tt]:yn,[Kr]:400},[tt,nL,Gr],[0,0,0]];_e.for(Te).registerError(MX,Ru);qX=[-3,Te,sX,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(qX,Cu);$X=[-3,Te,aX,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError($X,Tu);FX=[-3,Te,cX,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(FX,Au);UX=[-3,Te,uX,{[tt]:yn,[Kr]:400},[tt,Gr],[0,0]];_e.for(Te).registerError(UX,xu);BX=[-3,iL,"SSOOIDCServiceException",0,[],[]];_e.for(iL).registerError(BX,yt);aL=[9,Te,X9,{[EX]:["POST","/token",200]},()=>IX,()=>NX]});var uL,vv,Pu,wv=w(()=>{uL=T(Hn()),vv=T(fe());lv();cL();Pu=class extends vv.Command.classBuilder().ep(JO).m(function(e,r,n,s){return[(0,uL.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(aL).build(){}});var lL,jX,Tp,dL=w(()=>{lL=T(fe());wv();_v();jX={CreateTokenCommand:Pu},Tp=class extends yu{};(0,lL.createAggregatedClient)(jX,Tp)});var fL=w(()=>{wv()});var bv={};At(bv,{$Command:()=>vv.Command,AccessDeniedException:()=>Eu,AccessDeniedExceptionReason:()=>H9,AuthorizationPendingException:()=>_u,CreateTokenCommand:()=>Pu,ExpiredTokenException:()=>Su,InternalServerException:()=>vu,InvalidClientException:()=>wu,InvalidGrantException:()=>bu,InvalidRequestException:()=>Ru,InvalidRequestExceptionReason:()=>V9,InvalidScopeException:()=>Cu,SSOOIDC:()=>Tp,SSOOIDCClient:()=>yu,SSOOIDCServiceException:()=>yt,SlowDownException:()=>Tu,UnauthorizedClientException:()=>Au,UnsupportedGrantTypeException:()=>xu,__Client:()=>Ev.Client});var Rv=w(()=>{_v();dL();fL();Sv();Cp()});var gL=_(Nu=>{"use strict";var HX=(zr(),le(Cs)),VX=(C_(),le(xP)),gr=zt(),Iu=Un(),zX=require("fs"),WX=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new gr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=VX.getBearerTokenEnvKey(e);if(!(r in process.env))throw new gr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return HX.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},GX=5*60*1e3,Cv="To refresh this SSO session run 'aws sso login' with the corresponding profile.",KX=async(t,e={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Rv(),bv)),n=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i];return new r(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},XX=async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Rv(),bv));return(await KX(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},pL=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new gr.TokenProviderError(`Token is expired. ${Cv}`,!1)},Oi=(t,e,r=!1)=>{if(typeof e>"u")throw new gr.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Cv}`,!1)},{writeFile:QX}=zX.promises,YX=(t,e)=>{let r=Iu.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return QX(r,n)},hL=new Date(0),mL=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await Iu.parseKnownFiles(r),s=Iu.getProfileName({profile:r.profile??e?.profile}),i=n[s];if(i){if(!i.sso_session)throw new gr.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new gr.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await Iu.loadSsoSessionData(r))[o];if(!c)throw new gr.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let E of["sso_start_url","sso_region"])if(!c[E])throw new gr.TokenProviderError(`Sso session '${o}' is missing required property '${E}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await Iu.getSSOTokenFromFile(o)}catch{throw new gr.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${Cv}`,!1)}Oi("accessToken",l.accessToken),Oi("expiresAt",l.expiresAt);let{accessToken:d,expiresAt:m}=l,g={token:d,expiration:new Date(m)};if(g.expiration.getTime()-Date.now()>GX)return g;if(Date.now()-hL.getTime()<30*1e3)return pL(g),g;Oi("clientId",l.clientId,!0),Oi("clientSecret",l.clientSecret,!0),Oi("refreshToken",l.refreshToken,!0);try{hL.setTime(Date.now());let E=await XX(l,u,r);Oi("accessToken",E.accessToken),Oi("expiresIn",E.expiresIn);let b=new Date(Date.now()+E.expiresIn*1e3);try{await YX(o,{...l,accessToken:E.accessToken,expiresAt:b.toISOString(),refreshToken:E.refreshToken})}catch{}return{token:E.accessToken,expiration:b}}catch{return pL(g),g}},JX=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new gr.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},ZX=(t={})=>gr.memoize(gr.chain(mL(t),async()=>{throw new gr.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Nu.fromEnvSigningName=WX;Nu.fromSso=mL;Nu.fromStatic=JX;Nu.nodeProvider=ZX});var Av=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.resolveHttpAuthSchemeConfig=zs.defaultSSOHttpAuthSchemeProvider=zs.defaultSSOHttpAuthSchemeParametersProvider=void 0;var eQ=(Nt(),le(Fn)),Tv=Bt(),tQ=async(t,e,r)=>({operation:(0,Tv.getSmithyContext)(e).operation,region:await(0,Tv.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});zs.defaultSSOHttpAuthSchemeParametersProvider=tQ;function rQ(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Ap(t){return{schemeId:"smithy.api#noAuth"}}var nQ=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Ap(t));break}case"ListAccountRoles":{e.push(Ap(t));break}case"ListAccounts":{e.push(Ap(t));break}case"Logout":{e.push(Ap(t));break}default:e.push(rQ(t))}return e};zs.defaultSSOHttpAuthSchemeProvider=nQ;var sQ=t=>{let e=(0,eQ.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Tv.normalizeProvider)(t.authSchemePreference??[])})};zs.resolveHttpAuthSchemeConfig=sQ});var yL=_((qNe,iQ)=>{iQ.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var OL=_(xp=>{"use strict";Object.defineProperty(xp,"__esModule",{value:!0});xp.ruleSet=void 0;var xL="required",Ar="fn",xr="argv",fa="ref",EL=!0,_L="isSet",Ou="booleanEquals",la="error",da="endpoint",Gn="tree",xv="PartitionResult",Pv="getAttr",SL={[xL]:!1,type:"string"},vL={[xL]:!0,default:!1,type:"boolean"},wL={[fa]:"Endpoint"},PL={[Ar]:Ou,[xr]:[{[fa]:"UseFIPS"},!0]},IL={[Ar]:Ou,[xr]:[{[fa]:"UseDualStack"},!0]},Tr={},bL={[Ar]:Pv,[xr]:[{[fa]:xv},"supportsFIPS"]},NL={[fa]:xv},RL={[Ar]:Ou,[xr]:[!0,{[Ar]:Pv,[xr]:[NL,"supportsDualStack"]}]},CL=[PL],TL=[IL],AL=[{[fa]:"Region"}],oQ={version:"1.0",parameters:{Region:SL,UseDualStack:vL,UseFIPS:vL,Endpoint:SL},rules:[{conditions:[{[Ar]:_L,[xr]:[wL]}],rules:[{conditions:CL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:la},{conditions:TL,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:la},{endpoint:{url:wL,properties:Tr,headers:Tr},type:da}],type:Gn},{conditions:[{[Ar]:_L,[xr]:AL}],rules:[{conditions:[{[Ar]:"aws.partition",[xr]:AL,assign:xv}],rules:[{conditions:[PL,IL],rules:[{conditions:[{[Ar]:Ou,[xr]:[EL,bL]},RL],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tr,headers:Tr},type:da}],type:Gn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:la}],type:Gn},{conditions:CL,rules:[{conditions:[{[Ar]:Ou,[xr]:[bL,EL]}],rules:[{conditions:[{[Ar]:"stringEquals",[xr]:[{[Ar]:Pv,[xr]:[NL,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Tr,headers:Tr},type:da},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Tr,headers:Tr},type:da}],type:Gn},{error:"FIPS is enabled but this partition does not support FIPS",type:la}],type:Gn},{conditions:TL,rules:[{conditions:[RL],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Tr,headers:Tr},type:da}],type:Gn},{error:"DualStack is enabled but this partition does not support DualStack",type:la}],type:Gn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Tr,headers:Tr},type:da}],type:Gn}],type:Gn},{error:"Invalid Configuration: Missing Region",type:la}]};xp.ruleSet=oQ});var DL=_(Pp=>{"use strict";Object.defineProperty(Pp,"__esModule",{value:!0});Pp.defaultEndpointResolver=void 0;var aQ=Oo(),Iv=Ci(),cQ=OL(),uQ=new Iv.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),lQ=(t,e={})=>uQ.get(t,()=>(0,Iv.resolveEndpoint)(cQ.ruleSet,{endpointParams:t,logger:e.logger}));Pp.defaultEndpointResolver=lQ;Iv.customEndpointFunctions.aws=aQ.awsEndpointFunctions});var ML=_(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.getRuntimeConfig=void 0;var dQ=(Nt(),le(Fn)),fQ=(eu(),le(uS)),pQ=(ir(),le(bi)),hQ=fe(),mQ=bs(),LL=vt(),kL=St(),gQ=Av(),yQ=DL(),EQ=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??LL.fromBase64,base64Encoder:t?.base64Encoder??LL.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??yQ.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??gQ.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new dQ.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new pQ.NoAuthSigner}],logger:t?.logger??new hQ.NoOpLogger,protocol:t?.protocol??new fQ.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??mQ.parseUrl,utf8Decoder:t?.utf8Decoder??kL.fromUtf8,utf8Encoder:t?.utf8Encoder??kL.toUtf8});Ip.getRuntimeConfig=EQ});var BL=_(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.getRuntimeConfig=void 0;var _Q=(Bc(),le(Uc)),SQ=_Q.__importDefault(yL()),qL=(Nt(),le(Fn)),$L=du(),Np=wr(),vQ=fu(),FL=Vn(),Di=Bn(),UL=mi(),wQ=pu(),bQ=Zo(),RQ=ML(),CQ=fe(),TQ=mu(),AQ=fe(),xQ=t=>{(0,AQ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,TQ.resolveDefaultsModeConfig)(t),r=()=>e().then(CQ.loadConfigsForDefaultMode),n=(0,RQ.getRuntimeConfig)(t);(0,qL.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Di.loadConfig)(qL.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??wQ.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,$L.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:SQ.default.version}),maxAttempts:t?.maxAttempts??(0,Di.loadConfig)(FL.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Di.loadConfig)(Np.NODE_REGION_CONFIG_OPTIONS,{...Np.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:UL.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Di.loadConfig)({...FL.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||bQ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??vQ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??UL.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Di.loadConfig)(Np.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Di.loadConfig)(Np.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Di.loadConfig)($L.NODE_APP_ID_CONFIG_OPTIONS,s)}};Op.getRuntimeConfig=xQ});var u1=_(Dt=>{"use strict";var jL=vc(),PQ=wc(),IQ=Rc(),HL=Qo(),NQ=wr(),Du=(ir(),le(bi)),ha=($e(),le($d)),OQ=tu(),Mu=Hn(),VL=Vn(),Xr=fe(),zL=Av(),DQ=BL(),WL=ua(),GL=Ne(),LQ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),Mp={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},kQ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},MQ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),qQ=(t,e)=>{let r=Object.assign(WL.getAwsRegionExtensionConfiguration(t),Xr.getDefaultExtensionConfiguration(t),GL.getHttpHandlerExtensionConfiguration(t),kQ(t));return e.forEach(n=>n.configure(r)),Object.assign(t,WL.resolveAwsRegionExtensionConfiguration(r),Xr.resolveDefaultRuntimeConfig(r),GL.resolveHttpHandlerRuntimeConfig(r),MQ(r))},pa=class extends Xr.Client{constructor(...[r]){let n=DQ.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=LQ(n),i=HL.resolveUserAgentConfig(s),o=VL.resolveRetryConfig(i),a=NQ.resolveRegionConfig(o),c=jL.resolveHostHeaderConfig(a),u=Mu.resolveEndpointConfig(c),l=zL.resolveHttpAuthSchemeConfig(u),d=qQ(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(ha.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(HL.getUserAgentPlugin(this.config)),this.middlewareStack.use(VL.getRetryPlugin(this.config)),this.middlewareStack.use(OQ.getContentLengthPlugin(this.config)),this.middlewareStack.use(jL.getHostHeaderPlugin(this.config)),this.middlewareStack.use(PQ.getLoggerPlugin(this.config)),this.middlewareStack.use(IQ.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Du.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:zL.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new Du.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Du.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},ma=class KL extends Xr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,KL.prototype)}},XL=class QL extends ma{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");Object.setPrototypeOf(this,QL.prototype)}},YL=class JL extends ma{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,JL.prototype)}},ZL=class e1 extends ma{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});f(this,"name","TooManyRequestsException");f(this,"$fault","client");Object.setPrototypeOf(this,e1.prototype)}},t1=class r1 extends ma{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});f(this,"name","UnauthorizedException");f(this,"$fault","client");Object.setPrototypeOf(this,r1.prototype)}},$Q="AccountInfo",FQ="AccountListType",UQ="AccessTokenType",BQ="GetRoleCredentials",jQ="GetRoleCredentialsRequest",HQ="GetRoleCredentialsResponse",VQ="InvalidRequestException",zQ="Logout",WQ="ListAccounts",GQ="ListAccountsRequest",KQ="ListAccountRolesRequest",XQ="ListAccountRolesResponse",QQ="ListAccountsResponse",YQ="ListAccountRoles",JQ="LogoutRequest",ZQ="RoleCredentials",eY="RoleInfo",tY="RoleListType",rY="ResourceNotFoundException",nY="SecretAccessKeyType",sY="SessionTokenType",iY="TooManyRequestsException",oY="UnauthorizedException",qp="accountId",aY="accessKeyId",cY="accountList",uY="accountName",$p="accessToken",n1="account_id",Fp="client",Up="error",lY="emailAddress",dY="expiration",Bp="http",jp="httpError",Hp="httpHeader",Li="httpQuery",Vp="message",s1="maxResults",i1="max_result",zp="nextToken",o1="next_token",fY="roleCredentials",pY="roleList",a1="roleName",hY="role_name",c1="smithy.ts.sdk.synthetic.com.amazonaws.sso",mY="secretAccessKey",gY="sessionToken",Wp="x-amz-sso_bearer_token",Me="com.amazonaws.sso",Gp=[0,Me,UQ,8,0],yY=[0,Me,nY,8,0],EY=[0,Me,sY,8,0],_Y=[3,Me,$Q,0,[qp,uY,lY],[0,0,0]],SY=[3,Me,jQ,0,[a1,qp,$p],[[0,{[Li]:hY}],[0,{[Li]:n1}],[()=>Gp,{[Hp]:Wp}]]],vY=[3,Me,HQ,0,[fY],[[()=>PY,0]]],wY=[-3,Me,VQ,{[Up]:Fp,[jp]:400},[Vp],[0]];ha.TypeRegistry.for(Me).registerError(wY,XL);var bY=[3,Me,KQ,0,[zp,s1,$p,qp],[[0,{[Li]:o1}],[1,{[Li]:i1}],[()=>Gp,{[Hp]:Wp}],[0,{[Li]:n1}]]],RY=[3,Me,XQ,0,[zp,pY],[0,()=>MY]],CY=[3,Me,GQ,0,[zp,s1,$p],[[0,{[Li]:o1}],[1,{[Li]:i1}],[()=>Gp,{[Hp]:Wp}]]],TY=[3,Me,QQ,0,[zp,cY],[0,()=>kY]],AY=[3,Me,JQ,0,[$p],[[()=>Gp,{[Hp]:Wp}]]],xY=[-3,Me,rY,{[Up]:Fp,[jp]:404},[Vp],[0]];ha.TypeRegistry.for(Me).registerError(xY,YL);var PY=[3,Me,ZQ,0,[aY,mY,gY,dY],[0,[()=>yY,0],[()=>EY,0],1]],IY=[3,Me,eY,0,[a1,qp],[0,0]],NY=[-3,Me,iY,{[Up]:Fp,[jp]:429},[Vp],[0]];ha.TypeRegistry.for(Me).registerError(NY,ZL);var OY=[-3,Me,oY,{[Up]:Fp,[jp]:401},[Vp],[0]];ha.TypeRegistry.for(Me).registerError(OY,t1);var DY="unit",LY=[-3,c1,"SSOServiceException",0,[],[]];ha.TypeRegistry.for(c1).registerError(LY,ma);var kY=[1,Me,FQ,0,()=>_Y],MY=[1,Me,tY,0,()=>IY],qY=[9,Me,BQ,{[Bp]:["GET","/federation/credentials",200]},()=>SY,()=>vY],$Y=[9,Me,YQ,{[Bp]:["GET","/assignment/roles",200]},()=>bY,()=>RY],FY=[9,Me,WQ,{[Bp]:["GET","/assignment/accounts",200]},()=>CY,()=>TY],UY=[9,Me,zQ,{[Bp]:["POST","/logout",200]},()=>AY,()=>DY],Dp=class extends Xr.Command.classBuilder().ep(Mp).m(function(e,r,n,s){return[Mu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(qY).build(){},Lu=class extends Xr.Command.classBuilder().ep(Mp).m(function(e,r,n,s){return[Mu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc($Y).build(){},ku=class extends Xr.Command.classBuilder().ep(Mp).m(function(e,r,n,s){return[Mu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(FY).build(){},Lp=class extends Xr.Command.classBuilder().ep(Mp).m(function(e,r,n,s){return[Mu.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(UY).build(){},BY={GetRoleCredentialsCommand:Dp,ListAccountRolesCommand:Lu,ListAccountsCommand:ku,LogoutCommand:Lp},kp=class extends pa{};Xr.createAggregatedClient(BY,kp);var jY=Du.createPaginator(pa,Lu,"nextToken","nextToken","maxResults"),HY=Du.createPaginator(pa,ku,"nextToken","nextToken","maxResults");Object.defineProperty(Dt,"$Command",{enumerable:!0,get:function(){return Xr.Command}});Object.defineProperty(Dt,"__Client",{enumerable:!0,get:function(){return Xr.Client}});Dt.GetRoleCredentialsCommand=Dp;Dt.InvalidRequestException=XL;Dt.ListAccountRolesCommand=Lu;Dt.ListAccountsCommand=ku;Dt.LogoutCommand=Lp;Dt.ResourceNotFoundException=YL;Dt.SSO=kp;Dt.SSOClient=pa;Dt.SSOServiceException=ma;Dt.TooManyRequestsException=ZL;Dt.UnauthorizedException=t1;Dt.paginateListAccountRoles=jY;Dt.paginateListAccounts=HY});var d1=_(Nv=>{"use strict";var l1=u1();Object.defineProperty(Nv,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return l1.GetRoleCredentialsCommand}});Object.defineProperty(Nv,"SSOClient",{enumerable:!0,get:function(){return l1.SSOClient}})});var Ov=_(Xp=>{"use strict";var Qr=zt(),Kp=Un(),f1=(zr(),le(Cs)),VY=gL(),h1=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),qu=!1,p1=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:d,logger:m})=>{let g,E="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let rt=await VY.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:d})();g={accessToken:rt.token,expiresAt:new Date(rt.expiration).toISOString()}}catch(rt){throw new Qr.CredentialsProviderError(rt.message,{tryNextLink:qu,logger:m})}else try{g=await Kp.getSSOTokenFromFile(t)}catch{throw new Qr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${E}`,{tryNextLink:qu,logger:m})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new Qr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${E}`,{tryNextLink:qu,logger:m});let{accessToken:b}=g,{SSOClient:x,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return d1()}),N=i||new x(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n,userAgentAppId:o?.userAgentAppId??a?.userAgentAppId})),M;try{M=await N.send(new A({accountId:r,roleName:s,accessToken:b}))}catch(rt){throw new Qr.CredentialsProviderError(rt,{tryNextLink:qu,logger:m})}let{roleCredentials:{accessKeyId:U,secretAccessKey:z,sessionToken:ye,expiration:at,credentialScope:he,accountId:oe}={}}=M;if(!U||!z||!ye||!at)throw new Qr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:qu,logger:m});let Ie={accessKeyId:U,secretAccessKey:z,sessionToken:ye,expiration:new Date(at),...he&&{credentialScope:he},...oe&&{accountId:oe}};return e?f1.setCredentialFeature(Ie,"CREDENTIALS_SSO","s"):f1.setCredentialFeature(Ie,"CREDENTIALS_SSO_LEGACY","u"),Ie},m1=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=t;if(!r||!n||!s||!i)throw new Qr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},zY=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t,{ssoClient:a}=t,c=Kp.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!i&&!o){let l=(await Kp.parseKnownFiles(t))[c];if(!l)throw new Qr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!h1(l))throw new Qr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(l?.sso_session){let A=(await Kp.loadSsoSessionData(t))[l.sso_session],N=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==A.sso_region)throw new Qr.CredentialsProviderError("Conflicting SSO region"+N,{tryNextLink:!1,logger:t.logger});if(r&&r!==A.sso_start_url)throw new Qr.CredentialsProviderError("Conflicting SSO start_url"+N,{tryNextLink:!1,logger:t.logger});l.sso_region=A.sso_region,l.sso_start_url=A.sso_start_url}let{sso_start_url:d,sso_account_id:m,sso_region:g,sso_role_name:E,sso_session:b}=m1(l,t.logger);return p1({ssoStartUrl:d,ssoSession:b,ssoAccountId:m,ssoRegion:g,ssoRoleName:E,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!i)throw new Qr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return p1({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Xp.fromSSO=zY;Xp.isSsoProfile=h1;Xp.validateSsoProfile=m1});function WY(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function GY(t){return{schemeId:"smithy.api#noAuth"}}var $u,g1,y1,KY,E1,Dv=w(()=>{Nt();$u=T(Bt());Fu();g1=async(t,e,r)=>({operation:(0,$u.getSmithyContext)(e).operation,region:await(0,$u.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});y1=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(GY(t));break}default:e.push(WY(t))}return e},KY=t=>Object.assign(t,{stsClientCtor:En}),E1=t=>{let e=KY(t),r=xi(e);return Object.assign(r,{authSchemePreference:(0,$u.normalizeProvider)(t.authSchemePreference??[])})}});var _1,Qp,Yp=w(()=>{_1=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Qp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var I1,ie,Se,ve,Gs,Ws,bt,N1,O1,D1,He,S1,_n,ga,kv,v1,Lv,L1,w1,Rt,b1,k1,M1,Lt,yr,R1,q1,$1,C1,F1,T1,A1,x1,P1,XY,U1,B1=w(()=>{I1="required",ie="type",Se="fn",ve="argv",Gs="ref",Ws="booleanEquals",bt="stringEquals",N1="sigv4",O1="sts",D1="us-east-1",He="endpoint",S1="https://sts.{Region}.{PartitionResult#dnsSuffix}",_n="tree",ga="error",kv="getAttr",v1={[I1]:!1,[ie]:"string"},Lv={[I1]:!0,default:!1,[ie]:"boolean"},L1={[Gs]:"Endpoint"},w1={[Se]:"isSet",[ve]:[{[Gs]:"Region"}]},Rt={[Gs]:"Region"},b1={[Se]:"aws.partition",[ve]:[Rt],assign:"PartitionResult"},k1={[Gs]:"UseFIPS"},M1={[Gs]:"UseDualStack"},Lt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:N1,signingName:O1,signingRegion:D1}]},headers:{}},yr={},R1={conditions:[{[Se]:bt,[ve]:[Rt,"aws-global"]}],[He]:Lt,[ie]:He},q1={[Se]:Ws,[ve]:[k1,!0]},$1={[Se]:Ws,[ve]:[M1,!0]},C1={[Se]:kv,[ve]:[{[Gs]:"PartitionResult"},"supportsFIPS"]},F1={[Gs]:"PartitionResult"},T1={[Se]:Ws,[ve]:[!0,{[Se]:kv,[ve]:[F1,"supportsDualStack"]}]},A1=[{[Se]:"isSet",[ve]:[L1]}],x1=[q1],P1=[$1],XY={version:"1.0",parameters:{Region:v1,UseDualStack:Lv,UseFIPS:Lv,Endpoint:v1,UseGlobalEndpoint:Lv},rules:[{conditions:[{[Se]:Ws,[ve]:[{[Gs]:"UseGlobalEndpoint"},!0]},{[Se]:"not",[ve]:A1},w1,b1,{[Se]:Ws,[ve]:[k1,!1]},{[Se]:Ws,[ve]:[M1,!1]}],rules:[{conditions:[{[Se]:bt,[ve]:[Rt,"ap-northeast-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-south-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-southeast-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-southeast-2"]}],endpoint:Lt,[ie]:He},R1,{conditions:[{[Se]:bt,[ve]:[Rt,"ca-central-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-central-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-north-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-2"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-3"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"sa-east-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,D1]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-east-2"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-west-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-west-2"]}],endpoint:Lt,[ie]:He},{endpoint:{url:S1,properties:{authSchemes:[{name:N1,signingName:O1,signingRegion:"{Region}"}]},headers:yr},[ie]:He}],[ie]:_n},{conditions:A1,rules:[{conditions:x1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ie]:ga},{conditions:P1,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ie]:ga},{endpoint:{url:L1,properties:yr,headers:yr},[ie]:He}],[ie]:_n},{conditions:[w1],rules:[{conditions:[b1],rules:[{conditions:[q1,$1],rules:[{conditions:[{[Se]:Ws,[ve]:[!0,C1]},T1],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:_n},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ie]:ga}],[ie]:_n},{conditions:x1,rules:[{conditions:[{[Se]:Ws,[ve]:[C1,!0]}],rules:[{conditions:[{[Se]:bt,[ve]:[{[Se]:kv,[ve]:[F1,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:yr,headers:yr},[ie]:He},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:_n},{error:"FIPS is enabled but this partition does not support FIPS",[ie]:ga}],[ie]:_n},{conditions:P1,rules:[{conditions:[T1],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:_n},{error:"DualStack is enabled but this partition does not support DualStack",[ie]:ga}],[ie]:_n},R1,{endpoint:{url:S1,properties:yr,headers:yr},[ie]:He}],[ie]:_n}],[ie]:_n},{error:"Invalid Configuration: Missing Region",[ie]:ga}]},U1=XY});var j1,ya,QY,H1,V1=w(()=>{j1=T(Oo()),ya=T(Ci());B1();QY=new ya.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),H1=(t,e={})=>QY.get(t,()=>(0,ya.resolveEndpoint)(U1,{endpointParams:t,logger:e.logger}));ya.customEndpointFunctions.aws=j1.awsEndpointFunctions});var z1,W1,Jp,Zp,G1,K1=w(()=>{Nt();ir();z1=T(fe()),W1=T(bs()),Jp=T(vt()),Zp=T(St());Dv();V1();G1=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??Jp.fromBase64,base64Encoder:t?.base64Encoder??Jp.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??H1,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??y1,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new or},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Dn}],logger:t?.logger??new z1.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??W1.parseUrl,utf8Decoder:t?.utf8Decoder??Zp.fromUtf8,utf8Encoder:t?.utf8Encoder??Zp.toUtf8})});var eh,Xs,X1,th,Ks,rh,Q1,Y1,J1,Z1,ek,tk,rk=w(()=>{dv();Nt();eh=T(du()),Xs=T(wr());ir();X1=T(fu()),th=T(Vn()),Ks=T(Bn()),rh=T(mi()),Q1=T(pu()),Y1=T(Zo());K1();J1=T(fe()),Z1=T(mu()),ek=T(fe()),tk=t=>{(0,ek.emitWarningIfUnsupportedVersion)(process.version);let e=(0,Z1.resolveDefaultsModeConfig)(t),r=()=>e().then(J1.loadConfigsForDefaultMode),n=G1(t);Do(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ks.loadConfig)(Mo,s),bodyLengthChecker:t?.bodyLengthChecker??Q1.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,eh.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:pp.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await t.credentialDefaultProvider(o?.__config||{})()),signer:new or},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Dn}],maxAttempts:t?.maxAttempts??(0,Ks.loadConfig)(th.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ks.loadConfig)(Xs.NODE_REGION_CONFIG_OPTIONS,{...Xs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:rh.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ks.loadConfig)({...th.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Y1.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??X1.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??rh.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ks.loadConfig)(Xs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ks.loadConfig)(Xs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ks.loadConfig)(eh.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var nk,sk,ik=w(()=>{nk=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},sk=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var nh,sh,ih,ok,ak=w(()=>{nh=T(ua()),sh=T(Ne()),ih=T(fe());ik();ok=(t,e)=>{let r=Object.assign((0,nh.getAwsRegionExtensionConfiguration)(t),(0,ih.getDefaultExtensionConfiguration)(t),(0,sh.getHttpHandlerExtensionConfiguration)(t),nk(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,nh.resolveAwsRegionExtensionConfiguration)(r),(0,ih.resolveDefaultRuntimeConfig)(r),(0,sh.resolveHttpHandlerRuntimeConfig)(r),sk(r))}});var oh,ck,uk,ah,lk,dk,fk,ch,Mv,En,Fu=w(()=>{oh=T(vc()),ck=T(wc()),uk=T(Rc()),ah=T(Qo()),lk=T(wr());ir();dk=T(tu()),fk=T(Hn()),ch=T(Vn()),Mv=T(fe());Dv();Yp();rk();ak();En=class extends Mv.Client{constructor(...[r]){let n=tk(r||{});super(n);f(this,"config");this.initConfig=n;let s=_1(n),i=(0,ah.resolveUserAgentConfig)(s),o=(0,ch.resolveRetryConfig)(i),a=(0,lk.resolveRegionConfig)(o),c=(0,oh.resolveHostHeaderConfig)(a),u=(0,fk.resolveEndpointConfig)(c),l=E1(u),d=ok(l,r?.extensions||[]);this.config=d,this.middlewareStack.use((0,ah.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,ch.getRetryPlugin)(this.config)),this.middlewareStack.use((0,dk.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,oh.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,ck.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,uk.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(Tc(this.config,{httpAuthSchemeParametersProvider:g1,identityProviderConfigProvider:async m=>new wi({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(xc(this.config))}destroy(){super.destroy()}}});var pk,cr,uh=w(()=>{pk=T(fe()),cr=class t extends pk.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var qv,$v,Fv,Uu,Bu,ju,Hu,Vu,zu,Uv,Bv,Wu,Gu=w(()=>{qv=T(fe());uh();$v=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:qv.SENSITIVE_STRING}}),Fv=t=>({...t,...t.Credentials&&{Credentials:$v(t.Credentials)}}),Uu=class t extends cr{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Bu=class t extends cr{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});f(this,"name","MalformedPolicyDocumentException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},ju=class t extends cr{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});f(this,"name","PackedPolicyTooLargeException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Hu=class t extends cr{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});f(this,"name","RegionDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Vu=class t extends cr{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});f(this,"name","IDPRejectedClaimException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},zu=class t extends cr{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});f(this,"name","InvalidIdentityTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Uv=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:qv.SENSITIVE_STRING}}),Bv=t=>({...t,...t.Credentials&&{Credentials:$v(t.Credentials)}}),Wu=class t extends cr{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});f(this,"name","IDPCommunicationErrorException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}}});var hk,ue,mk,gk,yk,Ek,_k,YY,JY,ZY,eJ,tJ,rJ,nJ,sJ,iJ,Sk,oJ,aJ,cJ,uJ,lJ,dJ,vk,fJ,pJ,wk,hJ,mJ,gJ,yJ,EJ,_J,SJ,Xn,vJ,bk,Rk,Ck,Tk,jv,wJ,Hv,Ea,bJ,Vv,zv,_a,Wv,Sa,Gv,Kv,Xv,va,wa,Qv,Yv,Jv,ba,Zv,Ra,Ca,ew,tw,Kn,rw,nw,sw,iw,ow,Ak,aw,cw,uw,st,xk,RJ,lw=w(()=>{Nt();hk=T(Ne()),ue=T(fe());Gu();uh();mk=async(t,e)=>{let r=Rk,n;return n=xk({...sJ(t,e),[Tk]:wJ,[Ak]:Ck}),bk(e,r,"/",void 0,n)},gk=async(t,e)=>{let r=Rk,n;return n=xk({...iJ(t,e),[Tk]:bJ,[Ak]:Ck}),bk(e,r,"/",void 0,n)},yk=async(t,e)=>{if(t.statusCode>=300)return _k(t,e);let r=await Wo(t.body,e),n={};return n=fJ(r.AssumeRoleResult,e),{$metadata:Xn(t),...n}},Ek=async(t,e)=>{if(t.statusCode>=300)return _k(t,e);let r=await Wo(t.body,e),n={};return n=pJ(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Xn(t),...n}},_k=async(t,e)=>{let r={...t,body:await Df(t.body,e)},n=RJ(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await YY(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await tJ(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rJ(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await nJ(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await JY(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await ZY(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await eJ(r,e);default:let s=r.body;return vJ({output:t,parsedBody:s.Error,errorCode:n})}},YY=async(t,e)=>{let r=t.body,n=hJ(r.Error,e),s=new Uu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},JY=async(t,e)=>{let r=t.body,n=mJ(r.Error,e),s=new Wu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},ZY=async(t,e)=>{let r=t.body,n=gJ(r.Error,e),s=new Vu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},eJ=async(t,e)=>{let r=t.body,n=yJ(r.Error,e),s=new zu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},tJ=async(t,e)=>{let r=t.body,n=EJ(r.Error,e),s=new Bu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},rJ=async(t,e)=>{let r=t.body,n=_J(r.Error,e),s=new ju({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},nJ=async(t,e)=>{let r=t.body,n=SJ(r.Error,e),s=new Hu({$metadata:Xn(t),...n});return(0,ue.decorateServiceException)(s,r)},sJ=(t,e)=>{let r={};if(t[Ra]!=null&&(r[Ra]=t[Ra]),t[Ca]!=null&&(r[Ca]=t[Ca]),t[wa]!=null){let n=Sk(t[wa],e);t[wa]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(t[va]!=null&&(r[va]=t[va]),t[Sa]!=null&&(r[Sa]=t[Sa]),t[sw]!=null){let n=dJ(t[sw],e);t[sw]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(t[ow]!=null){let n=lJ(t[ow],e);t[ow]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(t[Kv]!=null&&(r[Kv]=t[Kv]),t[rw]!=null&&(r[rw]=t[rw]),t[iw]!=null&&(r[iw]=t[iw]),t[Kn]!=null&&(r[Kn]=t[Kn]),t[Yv]!=null){let n=cJ(t[Yv],e);t[Yv]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},iJ=(t,e)=>{let r={};if(t[Ra]!=null&&(r[Ra]=t[Ra]),t[Ca]!=null&&(r[Ca]=t[Ca]),t[cw]!=null&&(r[cw]=t[cw]),t[Jv]!=null&&(r[Jv]=t[Jv]),t[wa]!=null){let n=Sk(t[wa],e);t[wa]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return t[va]!=null&&(r[va]=t[va]),t[Sa]!=null&&(r[Sa]=t[Sa]),r},Sk=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=oJ(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},oJ=(t,e)=>{let r={};return t[uw]!=null&&(r[uw]=t[uw]),r},aJ=(t,e)=>{let r={};return t[Qv]!=null&&(r[Qv]=t[Qv]),t[Wv]!=null&&(r[Wv]=t[Wv]),r},cJ=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=aJ(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},uJ=(t,e)=>{let r={};return t[Xv]!=null&&(r[Xv]=t[Xv]),t[aw]!=null&&(r[aw]=t[aw]),r},lJ=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},dJ=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=uJ(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},vk=(t,e)=>{let r={};return t[Hv]!=null&&(r[Hv]=(0,ue.expectString)(t[Hv])),t[Vv]!=null&&(r[Vv]=(0,ue.expectString)(t[Vv])),r},fJ=(t,e)=>{let r={};return t[_a]!=null&&(r[_a]=wk(t[_a],e)),t[Ea]!=null&&(r[Ea]=vk(t[Ea],e)),t[ba]!=null&&(r[ba]=(0,ue.strictParseInt32)(t[ba])),t[Kn]!=null&&(r[Kn]=(0,ue.expectString)(t[Kn])),r},pJ=(t,e)=>{let r={};return t[_a]!=null&&(r[_a]=wk(t[_a],e)),t[tw]!=null&&(r[tw]=(0,ue.expectString)(t[tw])),t[Ea]!=null&&(r[Ea]=vk(t[Ea],e)),t[ba]!=null&&(r[ba]=(0,ue.strictParseInt32)(t[ba])),t[Zv]!=null&&(r[Zv]=(0,ue.expectString)(t[Zv])),t[zv]!=null&&(r[zv]=(0,ue.expectString)(t[zv])),t[Kn]!=null&&(r[Kn]=(0,ue.expectString)(t[Kn])),r},wk=(t,e)=>{let r={};return t[jv]!=null&&(r[jv]=(0,ue.expectString)(t[jv])),t[ew]!=null&&(r[ew]=(0,ue.expectString)(t[ew])),t[nw]!=null&&(r[nw]=(0,ue.expectString)(t[nw])),t[Gv]!=null&&(r[Gv]=(0,ue.expectNonNull)((0,ue.parseRfc3339DateTimeWithOffset)(t[Gv]))),r},hJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},mJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},gJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},yJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},EJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},_J=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},SJ=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},Xn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),vJ=(0,ue.withBaseException)(cr),bk=async(t,e,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await t.endpoint(),u={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new hk.HttpRequest(u)},Rk={"content-type":"application/x-www-form-urlencoded"},Ck="2011-06-15",Tk="Action",jv="AccessKeyId",wJ="AssumeRole",Hv="AssumedRoleId",Ea="AssumedRoleUser",bJ="AssumeRoleWithWebIdentity",Vv="Arn",zv="Audience",_a="Credentials",Wv="ContextAssertion",Sa="DurationSeconds",Gv="Expiration",Kv="ExternalId",Xv="Key",va="Policy",wa="PolicyArns",Qv="ProviderArn",Yv="ProvidedContexts",Jv="ProviderId",ba="PackedPolicySize",Zv="Provider",Ra="RoleArn",Ca="RoleSessionName",ew="SecretAccessKey",tw="SubjectFromWebIdentityToken",Kn="SourceIdentity",rw="SerialNumber",nw="SessionToken",sw="Tags",iw="TokenCode",ow="TransitiveTagKeys",Ak="Version",aw="Value",cw="WebIdentityToken",uw="arn",st="message",xk=t=>Object.entries(t).map(([e,r])=>(0,ue.extendedEncodeURIComponent)(e)+"="+(0,ue.extendedEncodeURIComponent)(r)).join("&"),RJ=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var Pk,Ik,Nk,ki,lh=w(()=>{Pk=T(Hn()),Ik=T(Ac()),Nk=T(fe());Yp();Gu();lw();ki=class extends Nk.Command.classBuilder().ep(Qp).m(function(e,r,n,s){return[(0,Ik.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Pk.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Fv).ser(mk).de(yk).build(){}});var Ok,Dk,Lk,Mi,dh=w(()=>{Ok=T(Hn()),Dk=T(Ac()),Lk=T(fe());Yp();Gu();lw();Mi=class extends Lk.Command.classBuilder().ep(Qp).m(function(e,r,n,s){return[(0,Dk.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Ok.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Uv,Bv).ser(gk).de(Ek).build(){}});var kk,CJ,fh,Mk=w(()=>{kk=T(fe());lh();dh();Fu();CJ={AssumeRoleCommand:ki,AssumeRoleWithWebIdentityCommand:Mi},fh=class extends En{};(0,kk.createAggregatedClient)(CJ,fh)});var qk=w(()=>{lh();dh()});var $k=w(()=>{Gu()});var Fk,Uk,Bk,jk,Hk,Vk,zk=w(()=>{zr();Fk=T(ua());lh();dh();Uk=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},Bk=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e,o=await(0,Fk.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s??i??o},jk=(t,e)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:l=t?.parentClientConfig?.logger,profile:d=t?.parentClientConfig?.profile,region:m,requestHandler:g=t?.parentClientConfig?.requestHandler,credentialProviderLogger:E,userAgentAppId:b=t?.parentClientConfig?.userAgentAppId}=t,x=await Bk(m,t?.parentClientConfig?.region,E,{logger:l,profile:d}),A=!Vk(g);r=new e({...t,userAgentAppId:b,profile:d,credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:A?g:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new ki(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=Uk(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Rs(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},Hk=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:l,requestHandler:d=t?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:g=t?.parentClientConfig?.userAgentAppId}=t,E=await Bk(l,t?.parentClientConfig?.region,m,{logger:c,profile:u}),b=!Vk(d);r=new e({...t,userAgentAppId:g,profile:u,region:E,requestHandler:b?d:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new Mi(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=Uk(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&Rs(a,"RESOLVED_ACCOUNT_ID","T"),Rs(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},Vk=t=>t?.metadata?.handlerProtocol==="h2"});var Wk,Gk,Kk,TJ,Xk=w(()=>{zk();Fu();Wk=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,Gk=(t={},e)=>jk(t,Wk(En,e)),Kk=(t={},e)=>Hk(t,Wk(En,e)),TJ=t=>e=>t({roleAssumer:Gk(e),roleAssumerWithWebIdentity:Kk(e),...e})});var dw={};At(dw,{AssumeRoleCommand:()=>ki,AssumeRoleResponseFilterSensitiveLog:()=>Fv,AssumeRoleWithWebIdentityCommand:()=>Mi,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Uv,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>Bv,CredentialsFilterSensitiveLog:()=>$v,ExpiredTokenException:()=>Uu,IDPCommunicationErrorException:()=>Wu,IDPRejectedClaimException:()=>Vu,InvalidIdentityTokenException:()=>zu,MalformedPolicyDocumentException:()=>Bu,PackedPolicyTooLargeException:()=>ju,RegionDisabledException:()=>Hu,STS:()=>fh,STSClient:()=>En,STSServiceException:()=>cr,__Client:()=>Mv.Client,decorateDefaultCredentialProvider:()=>TJ,getDefaultRoleAssumer:()=>Gk,getDefaultRoleAssumerWithWebIdentity:()=>Kk});var fw=w(()=>{Fu();Mk();qk();$k();Xk();uh()});var mw=_(Qk=>{"use strict";var hw=Un(),pw=zt(),AJ=require("child_process"),xJ=require("util"),PJ=(zr(),le(Cs)),IJ=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return PJ.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},NJ=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let i=xJ.promisify(hw.externalDataInterceptor?.getTokenRecord?.().exec??AJ.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return IJ(t,a,e)}catch(o){throw new pw.CredentialsProviderError(o.message,{logger:r})}}else throw new pw.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new pw.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},OJ=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await hw.parseKnownFiles(t);return NJ(hw.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};Qk.fromProcess=OJ});var gw=_(Sn=>{"use strict";var DJ=Sn&&Sn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),LJ=Sn&&Sn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kJ=Sn&&Sn.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&DJ(r,e,n[s]);return LJ(r,e),r}}();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.fromWebToken=void 0;var MJ=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>kJ((fw(),le(dw))));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};Sn.fromWebToken=MJ});var Jk=_(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});ph.fromTokenFile=void 0;var qJ=(zr(),le(Cs)),$J=zt(),FJ=Un(),UJ=require("fs"),BJ=gw(),Yk="AWS_WEB_IDENTITY_TOKEN_FILE",jJ="AWS_ROLE_ARN",HJ="AWS_ROLE_SESSION_NAME",VJ=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[Yk],n=t?.roleArn??process.env[jJ],s=t?.roleSessionName??process.env[HJ];if(!r||!n)throw new $J.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,BJ.fromWebToken)({...t,webIdentityToken:FJ.externalDataInterceptor?.getTokenRecord?.()[r]??(0,UJ.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[Yk]&&(0,qJ.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};ph.fromTokenFile=VJ});var yw=_(Ku=>{"use strict";var Zk=Jk(),eM=gw();Object.keys(Zk).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ku,t)&&Object.defineProperty(Ku,t,{enumerable:!0,get:function(){return Zk[t]}})});Object.keys(eM).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Ku,t)&&Object.defineProperty(Ku,t,{enumerable:!0,get:function(){return eM[t]}})})});var oM=_(iM=>{"use strict";var _w=Un(),Xu=zt(),Qs=(zr(),le(Cs)),zJ=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>T(cv())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>T(uu()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Xu.chain(i(s??{}),o(s))().then(Ew)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>T(uu()));return async()=>i(s)().then(Ew)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>T(ev()));return async()=>i(s)().then(Ew)}};if(t in n)return n[t];throw new Xu.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},Ew=t=>Qs.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),WJ=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(GJ(t,{profile:e,logger:r})||KJ(t,{profile:e,logger:r})),GJ=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},KJ=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},XJ=async(t,e,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(fw(),dw));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Xu.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${_w.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${t}]`}`);let c=o?s(o,e,r,{...n,[o]:!0},tM(e[o]??{})):(await zJ(i.credential_source,t,r.logger)(r))();if(tM(i))return c.then(u=>Qs.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Xu.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let d=await c;return r.roleAssumer(d,u).then(m=>Qs.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},tM=t=>!t.role_arn&&!!t.credential_source,QJ=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",YJ=async(t,e)=>Promise.resolve().then(()=>T(mw())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>Qs.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),JJ=async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>T(Ov()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>e.sso_session?Qs.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):Qs.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},ZJ=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),rM=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,nM=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Qs.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},e7=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,t7=async(t,e)=>Promise.resolve().then(()=>T(yw())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>Qs.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),sM=async(t,e,r,n={},s=!1)=>{let i=e[t];if(Object.keys(n).length>0&&rM(i))return nM(i,r);if(s||WJ(i,{profile:t,logger:r.logger}))return XJ(t,e,r,n,sM);if(rM(i))return nM(i,r);if(e7(i))return t7(i,r);if(QJ(i))return YJ(r,t);if(ZJ(i))return await JJ(t,i,r);throw new Xu.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},r7=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await _w.parseKnownFiles(r);return sM(_w.getProfileName({profile:t.profile??e?.profile}),n,r)};iM.fromIni=r7});var lM=_(hh=>{"use strict";var Sw=ev(),Qu=zt(),n7=Un(),aM="AWS_EC2_METADATA_DISABLED",s7=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>T(uu()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>T(cv()));return Qu.chain(i(t),n(t))}return process.env[aM]&&process.env[aM]!=="false"?async()=>{throw new Qu.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function i7(t,e){let r=o7(t),n,s,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),n)await n;else if(!i||e?.(i))if(i)s||(s=r(a).then(c=>{i=c,s=void 0}));else return n=r(a).then(c=>{i=c,n=void 0}),o(a);return i};return o}var o7=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},cM=!1,a7=(t={})=>i7([async()=>{if(t.profile??process.env[n7.ENV_PROFILE])throw process.env[Sw.ENV_KEY]&&process.env[Sw.ENV_SECRET]&&(cM||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),cM=!0)),new Qu.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Sw.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t;if(!r&&!n&&!s&&!i&&!o)throw new Qu.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>T(Ov()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>T(oM()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>T(mw()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>T(yw()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await s7(t))()),async()=>{throw new Qu.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],uM),c7=t=>t?.expiration!==void 0,uM=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;hh.credentialsTreatedAsExpired=uM;hh.credentialsWillNeedRefresh=c7;hh.defaultProvider=a7});var hM=_(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.getRuntimeConfig=void 0;var dM=(Nt(),le(Fn)),u7=(eu(),le(uS)),l7=kS(),d7=fe(),f7=bs(),fM=vt(),pM=St(),p7=ZS(),h7=JS(),m7=t=>({apiVersion:"2015-10-07",base64Decoder:t?.base64Decoder??fM.fromBase64,base64Encoder:t?.base64Encoder??fM.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??h7.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??p7.defaultEventBridgeHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new dM.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new dM.AwsSdkSigV4ASigner}],logger:t?.logger??new d7.NoOpLogger,protocol:t?.protocol??new u7.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.eventbridge",serviceTarget:"AWSEvents",awsQueryCompatible:!1}),serviceId:t?.serviceId??"EventBridge",signerConstructor:t?.signerConstructor??l7.SignatureV4MultiRegion,urlParser:t?.urlParser??f7.parseUrl,utf8Decoder:t?.utf8Decoder??pM.fromUtf8,utf8Encoder:t?.utf8Encoder??pM.toUtf8});mh.getRuntimeConfig=m7});var EM=_(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.getRuntimeConfig=void 0;var g7=(Bc(),le(Uc)),y7=g7.__importDefault(TO()),vw=(Nt(),le(Fn)),E7=lM(),mM=du(),gh=wr(),_7=fu(),gM=Vn(),Ys=Bn(),yM=mi(),S7=pu(),v7=Zo(),w7=hM(),b7=fe(),R7=mu(),C7=fe(),T7=t=>{(0,C7.emitWarningIfUnsupportedVersion)(process.version);let e=(0,R7.resolveDefaultsModeConfig)(t),r=()=>e().then(b7.loadConfigsForDefaultMode),n=(0,w7.getRuntimeConfig)(t);(0,vw.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ys.loadConfig)(vw.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??S7.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??E7.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,mM.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:y7.default.version}),maxAttempts:t?.maxAttempts??(0,Ys.loadConfig)(gM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ys.loadConfig)(gh.NODE_REGION_CONFIG_OPTIONS,{...gh.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:yM.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ys.loadConfig)({...gM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||v7.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??_7.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:t?.sigv4aSigningRegionSet??(0,Ys.loadConfig)(vw.NODE_SIGV4A_CONFIG_OPTIONS,s),streamCollector:t?.streamCollector??yM.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ys.loadConfig)(gh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ys.loadConfig)(gh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ys.loadConfig)(mM.NODE_APP_ID_CONFIG_OPTIONS,s)}};yh.getRuntimeConfig=T7});var e$=_(L=>{"use strict";var _M=vc(),A7=wc(),x7=Rc(),SM=Qo(),P7=wr(),ww=(ir(),le(bi)),Kt=($e(),le($d)),I7=tu(),W=Hn(),vM=Vn(),H=fe(),wM=ZS(),N7=EM(),bM=ua(),RM=Ne(),O7=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"events"}),G={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},D7=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},L7=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),k7=(t,e)=>{let r=Object.assign(bM.getAwsRegionExtensionConfiguration(t),H.getDefaultExtensionConfiguration(t),RM.getHttpHandlerExtensionConfiguration(t),D7(t));return e.forEach(n=>n.configure(r)),Object.assign(t,bM.resolveAwsRegionExtensionConfiguration(r),H.resolveDefaultRuntimeConfig(r),RM.resolveHttpHandlerRuntimeConfig(r),L7(r))},Eh=class extends H.Client{constructor(...[r]){let n=N7.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=O7(n),i=SM.resolveUserAgentConfig(s),o=vM.resolveRetryConfig(i),a=P7.resolveRegionConfig(o),c=_M.resolveHostHeaderConfig(a),u=W.resolveEndpointConfig(c),l=wM.resolveHttpAuthSchemeConfig(u),d=k7(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(Kt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(SM.getUserAgentPlugin(this.config)),this.middlewareStack.use(vM.getRetryPlugin(this.config)),this.middlewareStack.use(I7.getContentLengthPlugin(this.config)),this.middlewareStack.use(_M.getHostHeaderPlugin(this.config)),this.middlewareStack.use(A7.getLoggerPlugin(this.config)),this.middlewareStack.use(x7.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ww.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:wM.defaultEventBridgeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new ww.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials,"aws.auth#sigv4a":m.credentials})})),this.middlewareStack.use(ww.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Xt=class CM extends H.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,CM.prototype)}},TM=class AM extends Xt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");Object.setPrototypeOf(this,AM.prototype)}},xM=class PM extends Xt{constructor(r){super({name:"ConcurrentModificationException",$fault:"client",...r});f(this,"name","ConcurrentModificationException");f(this,"$fault","client");Object.setPrototypeOf(this,PM.prototype)}},IM=class NM extends Xt{constructor(r){super({name:"InternalException",$fault:"server",...r});f(this,"name","InternalException");f(this,"$fault","server");Object.setPrototypeOf(this,NM.prototype)}},OM=class DM extends Xt{constructor(r){super({name:"InvalidStateException",$fault:"client",...r});f(this,"name","InvalidStateException");f(this,"$fault","client");Object.setPrototypeOf(this,DM.prototype)}},LM=class kM extends Xt{constructor(r){super({name:"OperationDisabledException",$fault:"client",...r});f(this,"name","OperationDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,kM.prototype)}},MM=class qM extends Xt{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,qM.prototype)}},M7={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},q7={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",OPTIONS:"OPTIONS",PATCH:"PATCH",POST:"POST",PUT:"PUT"},$7={CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DISABLED:"DISABLED",ENABLED:"ENABLED",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},F7={DISABLED:"DISABLED",ENABLED:"ENABLED"},U7={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",RUNNING:"RUNNING",STARTING:"STARTING"},$M=class FM extends Xt{constructor(r){super({name:"IllegalStatusException",$fault:"client",...r});f(this,"name","IllegalStatusException");f(this,"$fault","client");Object.setPrototypeOf(this,FM.prototype)}},UM=class BM extends Xt{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});f(this,"name","LimitExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,BM.prototype)}},jM=class HM extends Xt{constructor(r){super({name:"ResourceAlreadyExistsException",$fault:"client",...r});f(this,"name","ResourceAlreadyExistsException");f(this,"$fault","client");Object.setPrototypeOf(this,HM.prototype)}},VM=class zM extends Xt{constructor(r){super({name:"InvalidEventPatternException",$fault:"client",...r});f(this,"name","InvalidEventPatternException");f(this,"$fault","client");Object.setPrototypeOf(this,zM.prototype)}},B7={API_KEY:"API_KEY",BASIC:"BASIC",OAUTH_CLIENT_CREDENTIALS:"OAUTH_CLIENT_CREDENTIALS"},j7={GET:"GET",POST:"POST",PUT:"PUT"},H7={ACTIVE:"ACTIVE",AUTHORIZED:"AUTHORIZED",AUTHORIZING:"AUTHORIZING",CREATING:"CREATING",DEAUTHORIZED:"DEAUTHORIZED",DEAUTHORIZING:"DEAUTHORIZING",DELETING:"DELETING",FAILED_CONNECTIVITY:"FAILED_CONNECTIVITY",UPDATING:"UPDATING"},WM=class GM extends Xt{constructor(r){super({name:"ThrottlingException",$fault:"client",...r});f(this,"name","ThrottlingException");f(this,"$fault","client");Object.setPrototypeOf(this,GM.prototype)}},V7={DISABLED:"DISABLED",ENABLED:"ENABLED"},z7={ACTIVE:"ACTIVE",CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DELETE_FAILED:"DELETE_FAILED",DELETING:"DELETING",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},W7={FULL:"FULL",NONE:"NONE"},G7={ERROR:"ERROR",INFO:"INFO",OFF:"OFF",TRACE:"TRACE"},KM=class XM extends Xt{constructor(r){super({name:"ManagedRuleException",$fault:"client",...r});f(this,"name","ManagedRuleException");f(this,"$fault","client");Object.setPrototypeOf(this,XM.prototype)}},K7={ACTIVE:"ACTIVE",DELETED:"DELETED",PENDING:"PENDING"},X7={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS:"ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS"},Q7={EC2:"EC2",EXTERNAL:"EXTERNAL",FARGATE:"FARGATE"},Y7={DISTINCT_INSTANCE:"distinctInstance",MEMBER_OF:"memberOf"},J7={BINPACK:"binpack",RANDOM:"random",SPREAD:"spread"},Z7={TASK_DEFINITION:"TASK_DEFINITION"},QM=class YM extends Xt{constructor(r){super({name:"PolicyLengthExceededException",$fault:"client",...r});f(this,"name","PolicyLengthExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,YM.prototype)}},eZ="Archive",bw="ArchiveArn",tZ="ApiDestination",bm="ApiDestinationArn",rZ="AccessDeniedException",nZ="ApiDestinationResponseList",Rm="ApiDestinationState",sZ="ApiDestinations",Rw="AuthorizationEndpoint",iZ="ActivateEventSource",oZ="ActivateEventSourceRequest",aZ="AuthHeaderParametersSensitive",Cw="ApiKeyAuthParameters",Tw="ApiKeyName",JM="ApiKeyValue",Ta="ArchiveName",cZ="ArrayProperties",uZ="AssignPublicIp",Aw="AuthParameters",lZ="ArchiveResponseList",ZM="AppSyncParameters",Cm="AuthorizationType",dZ="AwsVpcConfiguration",xw="Account",fZ="Action",kt="Arn",pZ="Archives",hZ="Attempts",mZ="BatchArrayProperties",Pw="BasicAuthParameters",eq="BatchParameters",gZ="BodyParameters",yZ="BatchRetryStrategy",tq="Condition",Yr="ConnectionArn",EZ="CreateApiDestination",_Z="CreateApiDestinationRequest",SZ="CreateApiDestinationResponse",vZ="ConnectionApiKeyAuthResponseParameters",wZ="CreateArchiveRequest",bZ="ConnectionAuthResponseParameters",RZ="CreateArchiveResponse",CZ="CreateArchive",Iw="CreatedBy",TZ="ConnectionBasicAuthResponseParameters",AZ="ConnectionBodyParameter",xZ="ConnectionBodyParametersList",PZ="CreateConnection",IZ="CreateConnectionApiKeyAuthRequestParameters",NZ="CreateConnectionAuthRequestParameters",OZ="CreateConnectionBasicAuthRequestParameters",DZ="CreateConnectionOAuthClientRequestParameters",LZ="CreateConnectionOAuthRequestParameters",kZ="CreateConnectionRequest",MZ="CreateConnectionResponse",qZ="CreateEndpoint",$Z="CreateEventBus",FZ="CreateEventBusRequest",UZ="CreateEventBusResponse",BZ="CreateEndpointRequest",jZ="CreateEndpointResponse",HZ="ConnectionHeaderParameter",VZ="ConnectionHeaderParametersList",zZ="ConnectionHttpParameters",Nw="ClientID",WZ="ConcurrentModificationException",GZ="ConnectionOAuthClientResponseParameters",KZ="ConnectionOAuthResponseParameters",Ow="ConnectivityParameters",XZ="CreatePartnerEventSource",QZ="CreatePartnerEventSourceRequest",YZ="CreatePartnerEventSourceResponse",rq="CapacityProviderStrategy",JZ="CapacityProviderStrategyItem",Dw="ClientParameters",ZZ="ConnectionQueryStringParameter",eee="ConnectionQueryStringParametersList",tee="CancelReplay",ree="ConnectivityResourceConfigurationArn",nee="ConnectionResponseList",see="ConnectivityResourceParameters",iee="CancelReplayRequest",oee="CancelReplayResponse",qi="ConnectionState",nq="ClientSecret",it="CreationTime",aee="Connection",cee="Connections",Ve="Description",uee="DeleteArchive",lee="DeleteApiDestination",dee="DeleteApiDestinationRequest",fee="DeleteApiDestinationResponse",pee="DescribeApiDestinationRequest",hee="DescribeApiDestinationResponse",mee="DescribeApiDestination",gee="DeleteArchiveRequest",yee="DeleteArchiveResponse",Eee="DescribeArchiveRequest",_ee="DescribeArchiveResponse",See="DescribeArchive",vee="DeauthorizeConnection",wee="DescribeConnectionConnectivityParameters",bee="DeauthorizeConnectionRequest",Ree="DescribeConnectionResourceParameters",Cee="DeauthorizeConnectionResponse",Tee="DeleteConnectionRequest",Aee="DeleteConnectionResponse",xee="DescribeConnectionRequest",Pee="DescribeConnectionResponse",Iee="DeleteConnection",Nee="DescribeConnection",Oee="DeleteEndpoint",Dee="DeleteEventBus",Lee="DeleteEventBusRequest",kee="DescribeEventBusRequest",Mee="DescribeEventBusResponse",qee="DescribeEventBus",$ee="DeleteEndpointRequest",Fee="DeleteEndpointResponse",Uee="DescribeEndpointRequest",Bee="DescribeEndpointResponse",jee="DeactivateEventSource",Hee="DeactivateEventSourceRequest",Vee="DescribeEventSourceRequest",zee="DescribeEventSourceResponse",Wee="DescribeEventSource",Gee="DescribeEndpoint",$i="DeadLetterConfig",Kee="DeletePartnerEventSource",Xee="DeletePartnerEventSourceRequest",Qee="DescribePartnerEventSourceRequest",Yee="DescribePartnerEventSourceResponse",Jee="DescribePartnerEventSource",Zee="DeleteRule",ete="DeleteRuleRequest",tte="DescribeReplayRequest",rte="DescribeReplayResponse",nte="DescribeRuleRequest",ste="DescribeRuleResponse",ite="DisableRuleRequest",ote="DescribeReplay",ate="DescribeRule",cte="DisableRule",sq="DetailType",ute="DbUser",lte="Database",iq="Destination",oq="Detail",dte="Endpoint",Fi="EventBuses",aq="EventBusArn",fte="EventBusList",Qt="EventBusName",pte="EventBus",cq="EventCount",Tm="ErrorCode",hte="EndpointEventBus",mte="EndpointEventBusList",gte="EnableExecuteCommand",yte="EnableECSManagedTags",Lw="EventEndTime",Am="EndpointId",uq="EventId",Ete="EndpointList",lq="EventLastReplayedTime",xm="ErrorMessage",Ui="EventPattern",dq="EcsParameters",_te="EnableRule",Ste="EnableRuleRequest",vte="EventSource",Qn="EventSourceArn",wte="EventSourceList",fq="EventSourceName",kw="EventStartTime",bte="EventSources",Mw="ExpirationTime",qw="EndpointUrl",Rte="Endpoints",Pm="Entries",Cte="Event",pq="Force",Tte="FilterArns",hq="FailoverConfig",mq="FailedEntries",Im="FailedEntryCount",Ate="Group",gq="GraphQLOperation",xte="HealthCheck",Bi="HttpMethod",yq="HeaderParameters",Eq="HttpParameters",_q="HomeRegion",Pte="HeaderValueSensitive",Ite="Ids",$w="InvocationConnectivityParameters",Nte="IncludeDetail",Nm="InvocationEndpoint",Ote="InvalidEventPatternException",Dte="InternalException",Fw="InvocationHttpParameters",Lte="InputPath",kte="InputPathsMap",Om="InvocationRateLimitPerSecond",Mte="IllegalStatusException",qte="InvalidStateException",Sq="InputTransformer",$te="InputTemplate",Uw="IsValueSecret",Fte="Id",Ute="Input",Bte="JobDefinition",jte="JobName",Aa="Key",Jr="KmsKeyIdentifier",vq="KinesisParameters",Zr="Limit",Hte="ListArchives",Vte="ListApiDestinations",zte="ListApiDestinationsRequest",Wte="ListApiDestinationsResponse",Gte="ListArchivesRequest",Kte="ListArchivesResponse",Yu="LastAuthorizedTime",xa="LogConfig",Xte="ListConnectionsRequest",Qte="ListConnectionsResponse",Yte="ListConnections",Jte="ListEndpoints",Zte="ListEventBuses",ere="ListEventBusesRequest",tre="ListEventBusesResponse",rre="LimitExceededException",nre="ListEndpointsRequest",sre="ListEndpointsResponse",ire="ListEventSources",ore="ListEventSourcesRequest",are="ListEventSourcesResponse",ur="LastModifiedTime",cre="ListPartnerEventSources",ure="ListPartnerEventSourceAccounts",lre="ListPartnerEventSourceAccountsRequest",dre="ListPartnerEventSourceAccountsResponse",fre="ListPartnerEventSourcesRequest",pre="ListPartnerEventSourcesResponse",hre="ListReplays",mre="ListRuleNamesByTarget",gre="ListRuleNamesByTargetRequest",yre="ListRuleNamesByTargetResponse",Ere="ListReplaysRequest",_re="ListReplaysResponse",Sre="ListRulesRequest",vre="ListRulesResponse",wre="ListRules",bre="LaunchType",Rre="ListTargetsByRule",Cre="ListTargetsByRuleRequest",Tre="ListTargetsByRuleResponse",Are="ListTagsForResource",xre="ListTagsForResourceRequest",Pre="ListTagsForResourceResponse",Ire="Level",wq="ManagedBy",Nre="MaximumEventAgeInSeconds",Ore="MessageGroupId",Dre="MaxResults",Lre="MaximumRetryAttempts",kre="ManagedRuleException",ee="Name",bq="NetworkConfiguration",Yn="NamePrefix",ze="NextToken",Bw="OAuthHttpParameters",jw="OAuthParameters",Mre="OperationDisabledException",Rq="Password",Cq="PlacementConstraints",qre="PlacementConstraint",$re="PutEvents",Fre="PutEventsRequest",Ure="PutEventsRequestEntry",Bre="PutEventsRequestEntryList",jre="PutEventsResultEntryList",Hre="PutEventsResultEntry",Vre="PutEventsResponse",zre="PartnerEventSources",Wre="PartnerEventSourceAccounts",Gre="PartnerEventSourceAccountList",Kre="PartnerEventSourceAccount",Xre="PartnerEventSourceList",Qre="PartnerEventSource",Yre="PartitionKeyPath",Jre="PolicyLengthExceededException",Zre="PutPermission",ene="PutPartnerEvents",tne="PutPartnerEventsRequest",rne="PutPartnerEventsRequestEntry",nne="PutPartnerEventsRequestEntryList",sne="PutPartnerEventsResultEntryList",ine="PutPartnerEventsResultEntry",one="PutPartnerEventsResponse",ane="PipelineParameterList",cne="PutPermissionRequest",une="PathParameterValues",lne="PutRule",dne="PutRuleRequest",fne="PutRuleResponse",Tq="PlacementStrategy",pne="PlacementStrategies",hne="PropagateTags",mne="PutTargetsRequest",gne="PutTargetsResultEntry",yne="PutTargetsResultEntryList",Ene="PutTargetsResponse",_ne="PutTargets",Sne="PlatformVersion",Hw="Policy",Aq="Primary",vne="Principal",xq="QueryStringParameters",wne="QueryStringValueSensitive",bne="Replays",Vw="ReplayArn",Rne="ResourceAssociationArn",Cne="ResourceAlreadyExistsException",Tne="RemoveAllPermissions",zw="ResourceARN",vn="RoleArn",Ane="RuleArn",ji="RoutingConfig",Pq="ResourceConfigurationArn",Iq="RunCommandParameters",Nq="RunCommandTargets",xne="RunCommandTarget",Hi="ReplicationConfig",Dm="RetentionDays",Oq="RedshiftDataParameters",Pne="ReplayDestination",Dq="ReplayEndTime",Ine="ReferenceId",Nne="ReplayList",Ju="ReplayName",One="ResourceNotFoundException",Dne="RuleNames",Lq="ResourceParameters",Lne="RemovePermissionRequest",kq="RetryPolicy",kne="RemovePermission",Mne="RuleResponseList",qne="RetryStrategy",Ww="ReplayStartTime",$ne="RemoveTargets",Fne="RemoveTargetsRequest",Une="RemoveTargetsResultEntry",Bne="RemoveTargetsResultEntryList",jne="RemoveTargetsResponse",Mq="Resources",Hne="Replay",Vne="Result",zne="Route",Wne="Rules",Lm="Rule",qq="Sql",Gne="SecretArn",$q="SizeBytes",Gw="ScheduleExpression",Kne="SecurityGroups",Fq="StatementId",Xne="SecretManagerArn",Qne="SageMakerPipelineParameter",Yne="SageMakerPipelineParameterList",Uq="SageMakerPipelineParameters",Jne="StatementName",Bq="SqsParameters",Pr="StateReason",Zne="StartReplayRequest",ese="StartReplayResponse",tse="StartReplay",rse="SensitiveString",jq="Secondary",nse="Size",Hq="Source",Vq="Sqls",ot="State",sse="Subnets",ise="Type",ose="TargetArn",ase="TaskCount",cse="TaskDefinitionArn",use="ThrottlingException",lse="TestEventPattern",dse="TestEventPatternRequest",fse="TestEventPatternResponse",pse="TraceHeader",zq="TargetId",hse="TagKeys",mse="TagList",gse="TargetList",yse="TagResource",Ese="TagResourceRequest",_se="TagResourceResponse",Zu="Tags",Sse="Tag",Wq="Targets",vse="Target",Gq="Time",Kw="Username",wse="UpdateArchive",bse="UpdateApiDestination",Rse="UpdateApiDestinationRequest",Cse="UpdateApiDestinationResponse",Tse="UpdateArchiveRequest",Ase="UpdateArchiveResponse",xse="UpdateConnection",Pse="UpdateConnectionApiKeyAuthRequestParameters",Ise="UpdateConnectionAuthRequestParameters",Nse="UpdateConnectionBasicAuthRequestParameters",Ose="UpdateConnectionOAuthClientRequestParameters",Dse="UpdateConnectionOAuthRequestParameters",Lse="UpdateConnectionRequest",kse="UpdateConnectionResponse",Mse="UpdateEndpoint",qse="UpdateEventBus",$se="UpdateEventBusRequest",Fse="UpdateEventBusResponse",Use="UpdateEndpointRequest",Bse="UpdateEndpointResponse",jse="UntagResource",Hse="UntagResourceRequest",Vse="UntagResourceResponse",Pa="Value",zse="Values",Wse="WithEvent",Gse="awsvpcConfiguration",Kse="base",Ir="client",Xse="capacityProvider",Er="error",Qse="expression",Yse="field",_r="message",Jse="server",Kq="smithy.ts.sdk.synthetic.com.amazonaws.eventbridge",Xq="type",Zse="weight",y="com.amazonaws.eventbridge",Ia=[0,y,aZ,8,0],eie=[0,y,gq,8,0],tie=[0,y,Pte,8,0],rie=[0,y,wne,8,0],nie=[0,y,rse,8,0],Qq=[0,y,qq,8,0],sie=[-3,y,rZ,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(sie,TM);var iie=[3,y,oZ,0,[ee],[0]],oie=[3,y,tZ,0,[bm,ee,Rm,Yr,Nm,Bi,Om,it,ur],[0,0,0,0,0,0,1,4,4]],aie=[3,y,ZM,0,[gq],[[()=>eie,0]]],cie=[3,y,eZ,0,[Ta,Qn,ot,Pr,Dm,$q,cq,it],[0,0,0,0,1,1,1,4]],uie=[3,y,dZ,0,[sse,Kne,uZ],[64,64,0]],lie=[3,y,mZ,0,[nse],[1]],die=[3,y,eq,0,[Bte,jte,cZ,qne],[0,0,()=>lie,()=>fie]],fie=[3,y,yZ,0,[hZ],[1]],pie=[3,y,iee,0,[Ju],[0]],hie=[3,y,oee,0,[Vw,ot,Pr],[0,0,0]],mie=[3,y,JZ,0,[Xse,Zse,Kse],[0,1,1]],gie=[-3,y,WZ,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(gie,xM);var yie=[3,y,tq,0,[ise,Aa,Pa],[0,0,0]],Eie=[3,y,aee,0,[Yr,ee,qi,Pr,Cm,it,ur,Yu],[0,0,0,0,0,4,4,4]],_ie=[3,y,vZ,0,[Tw],[0]],Sie=[3,y,bZ,0,[Pw,jw,Cw,Fw,Ow],[()=>vie,[()=>Cie,0],()=>_ie,[()=>Na,0],()=>Yq]],vie=[3,y,TZ,0,[Kw],[0]],wie=[3,y,AZ,0,[Aa,Pa,Uw],[0,[()=>nie,0],2]],bie=[3,y,HZ,0,[Aa,Pa,Uw],[0,[()=>tie,0],2]],Na=[3,y,zZ,0,[yq,xq,gZ],[[()=>xce,0],[()=>Pce,0],[()=>Ace,0]]],Rie=[3,y,GZ,0,[Nw],[0]],Cie=[3,y,KZ,0,[Dw,Rw,Bi,Bw],[()=>Rie,0,0,[()=>Na,0]]],Tie=[3,y,ZZ,0,[Aa,Pa,Uw],[0,[()=>rie,0],2]],Aie=[3,y,ree,0,[Pq],[0]],km=[3,y,see,0,[Lq],[()=>Aie]],xie=[3,y,_Z,0,[ee,Ve,Yr,Nm,Bi,Om],[0,0,0,0,0,1]],Pie=[3,y,SZ,0,[bm,Rm,it,ur],[0,0,4,4]],Iie=[3,y,wZ,0,[Ta,Qn,Ve,Ui,Dm,Jr],[0,0,0,0,1,0]],Nie=[3,y,RZ,0,[bw,ot,Pr,it],[0,0,0,4]],Oie=[3,y,IZ,0,[Tw,JM],[0,[()=>Ia,0]]],Die=[3,y,NZ,0,[Pw,jw,Cw,Fw,Ow],[[()=>Lie,0],[()=>Mie,0],[()=>Oie,0],[()=>Na,0],()=>km]],Lie=[3,y,OZ,0,[Kw,Rq],[0,[()=>Ia,0]]],kie=[3,y,DZ,0,[Nw,nq],[0,[()=>Ia,0]]],Mie=[3,y,LZ,0,[Dw,Rw,Bi,Bw],[[()=>kie,0],0,0,[()=>Na,0]]],qie=[3,y,kZ,0,[ee,Ve,Cm,Aw,$w,Jr],[0,0,0,[()=>Die,0],()=>km,0]],$ie=[3,y,MZ,0,[Yr,qi,it,ur],[0,0,4,4]],Fie=[3,y,BZ,0,[ee,Ve,ji,Hi,Fi,vn],[0,0,()=>La,()=>Da,()=>ka,0]],Uie=[3,y,jZ,0,[ee,kt,ji,Hi,Fi,vn,ot],[0,0,()=>La,()=>Da,()=>ka,0,0]],Bie=[3,y,FZ,0,[ee,fq,Ve,Jr,$i,xa,Zu],[0,0,0,0,()=>Oa,()=>el,()=>tl]],jie=[3,y,UZ,0,[aq,Ve,Jr,$i,xa],[0,0,0,()=>Oa,()=>el]],Hie=[3,y,QZ,0,[ee,xw],[0,0]],Vie=[3,y,YZ,0,[Qn],[0]],zie=[3,y,Hee,0,[ee],[0]],Oa=[3,y,$i,0,[kt],[0]],Wie=[3,y,bee,0,[ee],[0]],Gie=[3,y,Cee,0,[Yr,qi,it,ur,Yu],[0,0,4,4,4]],Kie=[3,y,dee,0,[ee],[0]],Xie=[3,y,fee,0,[],[]],Qie=[3,y,gee,0,[Ta],[0]],Yie=[3,y,yee,0,[],[]],Jie=[3,y,Tee,0,[ee],[0]],Zie=[3,y,Aee,0,[Yr,qi,it,ur,Yu],[0,0,4,4,4]],eoe=[3,y,$ee,0,[ee],[0]],toe=[3,y,Fee,0,[],[]],roe=[3,y,Lee,0,[ee],[0]],noe=[3,y,Xee,0,[ee,xw],[0,0]],soe=[3,y,ete,0,[ee,Qt,pq],[0,0,2]],ioe=[3,y,pee,0,[ee],[0]],ooe=[3,y,hee,0,[bm,ee,Ve,Rm,Yr,Nm,Bi,Om,it,ur],[0,0,0,0,0,0,0,1,4,4]],aoe=[3,y,Eee,0,[Ta],[0]],coe=[3,y,_ee,0,[bw,Ta,Qn,Ve,Ui,ot,Pr,Jr,Dm,$q,cq,it],[0,0,0,0,0,0,0,0,1,1,1,4]],Yq=[3,y,wee,0,[Lq],[()=>loe]],uoe=[3,y,xee,0,[ee],[0]],loe=[3,y,Ree,0,[Pq,Rne],[0,0]],doe=[3,y,Pee,0,[Yr,ee,Ve,$w,qi,Pr,Cm,Gne,Jr,Aw,it,ur,Yu],[0,0,0,()=>Yq,0,0,0,0,0,[()=>Sie,0],4,4,4]],foe=[3,y,Uee,0,[ee,_q],[0,0]],poe=[3,y,Bee,0,[ee,Ve,kt,ji,Hi,Fi,vn,Am,qw,ot,Pr,it,ur],[0,0,0,()=>La,()=>Da,()=>ka,0,0,0,0,0,4,4]],hoe=[3,y,kee,0,[ee],[0]],moe=[3,y,Mee,0,[ee,kt,Ve,Jr,$i,Hw,xa,it,ur],[0,0,0,0,()=>Oa,0,()=>el,4,4]],goe=[3,y,Vee,0,[ee],[0]],yoe=[3,y,zee,0,[kt,Iw,it,Mw,ee,ot],[0,0,4,4,0,0]],Eoe=[3,y,Qee,0,[ee],[0]],_oe=[3,y,Yee,0,[kt,ee],[0,0]],Soe=[3,y,tte,0,[Ju],[0]],voe=[3,y,rte,0,[Ju,Vw,Ve,ot,Pr,Qn,iq,kw,Lw,lq,Ww,Dq],[0,0,0,0,0,0,()=>Jq,4,4,4,4,4]],woe=[3,y,nte,0,[ee,Qt],[0,0]],boe=[3,y,ste,0,[ee,kt,Ui,Gw,ot,Ve,vn,wq,Qt,Iw],[0,0,0,0,0,0,0,0,0,0]],Roe=[3,y,ite,0,[ee,Qt],[0,0]],Coe=[3,y,dq,0,[cse,ase,bre,bq,Sne,Ate,rq,yte,gte,Cq,Tq,hne,Ine,Zu],[0,1,0,()=>pae,0,0,()=>Tce,2,2,()=>Mce,()=>qce,0,0,()=>tl]],Toe=[3,y,Ste,0,[ee,Qt],[0,0]],Aoe=[3,y,dte,0,[ee,Ve,kt,ji,Hi,Fi,vn,Am,qw,ot,Pr,it,ur],[0,0,0,()=>La,()=>Da,()=>ka,0,0,0,0,0,4,4]],xoe=[3,y,hte,0,[aq],[0]],Poe=[3,y,pte,0,[ee,kt,Ve,Hw,it,ur],[0,0,0,0,4,4]],Ioe=[3,y,vte,0,[kt,Iw,it,Mw,ee,ot],[0,0,4,4,0,0]],Noe=[3,y,hq,0,[Aq,jq],[()=>Sae,()=>Xae]],Ooe=[3,y,Eq,0,[une,yq,xq],[64,128,128]],Doe=[-3,y,Mte,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Doe,$M);var Loe=[3,y,Sq,0,[kte,$te],[128,0]],koe=[-3,y,Dte,{[Er]:Jse},[_r],[0]];Kt.TypeRegistry.for(y).registerError(koe,IM);var Moe=[-3,y,Ote,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Moe,VM);var qoe=[-3,y,qte,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(qoe,OM);var $oe=[3,y,vq,0,[Yre],[0]],Foe=[-3,y,rre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Foe,UM);var Uoe=[3,y,zte,0,[Yn,Yr,ze,Zr],[0,0,0,1]],Boe=[3,y,Wte,0,[sZ,ze],[()=>Rce,0]],joe=[3,y,Gte,0,[Yn,Qn,ot,ze,Zr],[0,0,0,0,1]],Hoe=[3,y,Kte,0,[pZ,ze],[()=>Cce,0]],Voe=[3,y,Xte,0,[Yn,qi,ze,Zr],[0,0,0,1]],zoe=[3,y,Qte,0,[cee,ze],[()=>Ice,0]],Woe=[3,y,nre,0,[Yn,_q,ze,Dre],[0,0,0,1]],Goe=[3,y,sre,0,[Rte,ze],[()=>Nce,0]],Koe=[3,y,ere,0,[Yn,ze,Zr],[0,0,1]],Xoe=[3,y,tre,0,[Fi,ze],[()=>Oce,0]],Qoe=[3,y,ore,0,[Yn,ze,Zr],[0,0,1]],Yoe=[3,y,are,0,[bte,ze],[()=>Dce,0]],Joe=[3,y,lre,0,[fq,ze,Zr],[0,0,1]],Zoe=[3,y,dre,0,[Wre,ze],[()=>Lce,0]],eae=[3,y,fre,0,[Yn,ze,Zr],[0,0,1]],tae=[3,y,pre,0,[zre,ze],[()=>kce,0]],rae=[3,y,Ere,0,[Yn,ot,Qn,ze,Zr],[0,0,0,0,1]],nae=[3,y,_re,0,[bne,ze],[()=>Vce,0]],sae=[3,y,gre,0,[ose,Qt,ze,Zr],[0,0,0,1]],iae=[3,y,yre,0,[Dne,ze],[64,0]],oae=[3,y,Sre,0,[Yn,Qt,ze,Zr],[0,0,0,1]],aae=[3,y,vre,0,[Wne,ze],[()=>zce,0]],cae=[3,y,xre,0,[zw],[0]],uae=[3,y,Pre,0,[Zu],[()=>tl]],lae=[3,y,Cre,0,[Lm,Qt,ze,Zr],[0,0,0,1]],dae=[3,y,Tre,0,[Wq,ze],[[()=>Zq,0],0]],el=[3,y,xa,0,[Nte,Ire],[0,0]],fae=[-3,y,kre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(fae,KM);var pae=[3,y,bq,0,[Gse],[()=>uie]],hae=[-3,y,Mre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(hae,LM);var mae=[3,y,Qre,0,[kt,ee],[0,0]],gae=[3,y,Kre,0,[xw,it,Mw,ot],[0,4,4,0]],yae=[3,y,qre,0,[Xq,Qse],[0,0]],Eae=[3,y,Tq,0,[Xq,Yse],[0,0]],_ae=[-3,y,Jre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(_ae,QM);var Sae=[3,y,Aq,0,[xte],[0]],vae=[3,y,Fre,0,[Pm,Am],[()=>$ce,0]],wae=[3,y,Ure,0,[Gq,Hq,Mq,sq,oq,Qt,pse],[4,0,64,0,0,0,0]],bae=[3,y,Vre,0,[Im,Pm],[1,()=>Fce]],Rae=[3,y,Hre,0,[uq,Tm,xm],[0,0,0]],Cae=[3,y,tne,0,[Pm],[()=>Uce]],Tae=[3,y,rne,0,[Gq,Hq,Mq,sq,oq],[4,0,64,0,0]],Aae=[3,y,one,0,[Im,Pm],[1,()=>Bce]],xae=[3,y,ine,0,[uq,Tm,xm],[0,0,0]],Pae=[3,y,cne,0,[Qt,fZ,vne,Fq,tq,Hw],[0,0,0,0,()=>yie,0]],Iae=[3,y,dne,0,[ee,Gw,Ui,ot,Ve,vn,Zu,Qt],[0,0,0,0,0,0,()=>tl,0]],Nae=[3,y,fne,0,[Ane],[0]],Oae=[3,y,mne,0,[Lm,Qt,Wq],[0,0,[()=>Zq,0]]],Dae=[3,y,Ene,0,[Im,mq],[1,()=>jce]],Lae=[3,y,gne,0,[zq,Tm,xm],[0,0,0]],kae=[3,y,Oq,0,[Xne,lte,ute,qq,Jne,Wse,Vq],[0,0,0,[()=>Qq,0],0,2,[()=>Kce,0]]],Mae=[3,y,Lne,0,[Fq,Tne,Qt],[0,2,0]],qae=[3,y,Fne,0,[Lm,Qt,Ite,pq],[0,0,64,2]],$ae=[3,y,jne,0,[Im,mq],[1,()=>Hce]],Fae=[3,y,Une,0,[zq,Tm,xm],[0,0,0]],Uae=[3,y,Hne,0,[Ju,Qn,ot,Pr,kw,Lw,lq,Ww,Dq],[0,0,0,0,4,4,4,4,4]],Jq=[3,y,Pne,0,[kt,Tte],[0,64]],Da=[3,y,Hi,0,[ot],[0]],Bae=[-3,y,Cne,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Bae,jM);var jae=[-3,y,One,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(jae,MM);var Hae=[3,y,kq,0,[Lre,Nre],[1,1]],La=[3,y,ji,0,[hq],[()=>Noe]],Vae=[3,y,Lm,0,[ee,kt,Ui,ot,Ve,Gw,vn,wq,Qt],[0,0,0,0,0,0,0,0,0]],zae=[3,y,Iq,0,[Nq],[()=>Wce]],Wae=[3,y,xne,0,[Aa,zse],[0,64]],Gae=[3,y,Qne,0,[ee,Pa],[0,0]],Kae=[3,y,Uq,0,[ane],[()=>Gce]],Xae=[3,y,jq,0,[zne],[0]],Qae=[3,y,Bq,0,[Ore],[0]],Yae=[3,y,Zne,0,[Ju,Ve,Qn,kw,Lw,iq],[0,0,0,4,4,()=>Jq]],Jae=[3,y,ese,0,[Vw,ot,Pr,Ww],[0,0,0,4]],Zae=[3,y,Sse,0,[Aa,Pa],[0,0]],ece=[3,y,Ese,0,[zw,Zu],[0,()=>tl]],tce=[3,y,_se,0,[],[]],rce=[3,y,vse,0,[Fte,kt,vn,Ute,Lte,Sq,vq,Iq,dq,eq,Bq,Eq,Oq,Uq,$i,kq,ZM],[0,0,0,0,0,()=>Loe,()=>$oe,()=>zae,()=>Coe,()=>die,()=>Qae,()=>Ooe,[()=>kae,0],()=>Kae,()=>Oa,()=>Hae,[()=>aie,0]]],nce=[3,y,dse,0,[Ui,Cte],[0,0]],sce=[3,y,fse,0,[Vne],[2]],ice=[-3,y,use,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(ice,WM);var oce=[3,y,Hse,0,[zw,hse],[0,64]],ace=[3,y,Vse,0,[],[]],cce=[3,y,Rse,0,[ee,Ve,Yr,Nm,Bi,Om],[0,0,0,0,0,1]],uce=[3,y,Cse,0,[bm,Rm,it,ur],[0,0,4,4]],lce=[3,y,Tse,0,[Ta,Ve,Ui,Dm,Jr],[0,0,0,1,0]],dce=[3,y,Ase,0,[bw,ot,Pr,it],[0,0,0,4]],fce=[3,y,Pse,0,[Tw,JM],[0,[()=>Ia,0]]],pce=[3,y,Ise,0,[Pw,jw,Cw,Fw,Ow],[[()=>hce,0],[()=>gce,0],[()=>fce,0],[()=>Na,0],()=>km]],hce=[3,y,Nse,0,[Kw,Rq],[0,[()=>Ia,0]]],mce=[3,y,Ose,0,[Nw,nq],[0,[()=>Ia,0]]],gce=[3,y,Dse,0,[Dw,Rw,Bi,Bw],[[()=>mce,0],0,0,[()=>Na,0]]],yce=[3,y,Lse,0,[ee,Ve,Cm,Aw,$w,Jr],[0,0,0,[()=>pce,0],()=>km,0]],Ece=[3,y,kse,0,[Yr,qi,it,ur,Yu],[0,0,4,4,4]],_ce=[3,y,Use,0,[ee,Ve,ji,Hi,Fi,vn],[0,0,()=>La,()=>Da,()=>ka,0]],Sce=[3,y,Bse,0,[ee,kt,ji,Hi,Fi,vn,Am,qw,ot],[0,0,()=>La,()=>Da,()=>ka,0,0,0,0]],vce=[3,y,$se,0,[ee,Jr,Ve,$i,xa],[0,0,0,()=>Oa,()=>el]],wce=[3,y,Fse,0,[kt,ee,Jr,Ve,$i,xa],[0,0,0,0,()=>Oa,()=>el]],Jn="unit",bce=[-3,Kq,"EventBridgeServiceException",0,[],[]];Kt.TypeRegistry.for(Kq).registerError(bce,Xt);var Rce=[1,y,nZ,0,()=>oie],Cce=[1,y,lZ,0,()=>cie],Tce=[1,y,rq,0,()=>mie],Ace=[1,y,xZ,0,[()=>wie,0]],xce=[1,y,VZ,0,[()=>bie,0]],Pce=[1,y,eee,0,[()=>Tie,0]],Ice=[1,y,nee,0,()=>Eie],ka=[1,y,mte,0,()=>xoe],Nce=[1,y,Ete,0,()=>Aoe],Oce=[1,y,fte,0,()=>Poe],Dce=[1,y,wte,0,()=>Ioe],Lce=[1,y,Gre,0,()=>gae],kce=[1,y,Xre,0,()=>mae],Mce=[1,y,Cq,0,()=>yae],qce=[1,y,pne,0,()=>Eae],$ce=[1,y,Bre,0,()=>wae],Fce=[1,y,jre,0,()=>Rae],Uce=[1,y,nne,0,()=>Tae],Bce=[1,y,sne,0,()=>xae],jce=[1,y,yne,0,()=>Lae],Hce=[1,y,Bne,0,()=>Fae],Vce=[1,y,Nne,0,()=>Uae],zce=[1,y,Mne,0,()=>Vae],Wce=[1,y,Nq,0,()=>Wae],Gce=[1,y,Yne,0,()=>Gae],Kce=[1,y,Vq,8,[()=>Qq,0]],tl=[1,y,mse,0,()=>Zae],Zq=[1,y,gse,0,[()=>rce,0]],Xce=[9,y,iZ,0,()=>iie,()=>Jn],Qce=[9,y,tee,0,()=>pie,()=>hie],Yce=[9,y,EZ,0,()=>xie,()=>Pie],Jce=[9,y,CZ,0,()=>Iie,()=>Nie],Zce=[9,y,PZ,0,()=>qie,()=>$ie],eue=[9,y,qZ,0,()=>Fie,()=>Uie],tue=[9,y,$Z,0,()=>Bie,()=>jie],rue=[9,y,XZ,0,()=>Hie,()=>Vie],nue=[9,y,jee,0,()=>zie,()=>Jn],sue=[9,y,vee,0,()=>Wie,()=>Gie],iue=[9,y,lee,0,()=>Kie,()=>Xie],oue=[9,y,uee,0,()=>Qie,()=>Yie],aue=[9,y,Iee,0,()=>Jie,()=>Zie],cue=[9,y,Oee,0,()=>eoe,()=>toe],uue=[9,y,Dee,0,()=>roe,()=>Jn],lue=[9,y,Kee,0,()=>noe,()=>Jn],due=[9,y,Zee,0,()=>soe,()=>Jn],fue=[9,y,mee,0,()=>ioe,()=>ooe],pue=[9,y,See,0,()=>aoe,()=>coe],hue=[9,y,Nee,0,()=>uoe,()=>doe],mue=[9,y,Gee,0,()=>foe,()=>poe],gue=[9,y,qee,0,()=>hoe,()=>moe],yue=[9,y,Wee,0,()=>goe,()=>yoe],Eue=[9,y,Jee,0,()=>Eoe,()=>_oe],_ue=[9,y,ote,0,()=>Soe,()=>voe],Sue=[9,y,ate,0,()=>woe,()=>boe],vue=[9,y,cte,0,()=>Roe,()=>Jn],wue=[9,y,_te,0,()=>Toe,()=>Jn],bue=[9,y,Vte,0,()=>Uoe,()=>Boe],Rue=[9,y,Hte,0,()=>joe,()=>Hoe],Cue=[9,y,Yte,0,()=>Voe,()=>zoe],Tue=[9,y,Jte,0,()=>Woe,()=>Goe],Aue=[9,y,Zte,0,()=>Koe,()=>Xoe],xue=[9,y,ire,0,()=>Qoe,()=>Yoe],Pue=[9,y,ure,0,()=>Joe,()=>Zoe],Iue=[9,y,cre,0,()=>eae,()=>tae],Nue=[9,y,hre,0,()=>rae,()=>nae],Oue=[9,y,mre,0,()=>sae,()=>iae],Due=[9,y,wre,0,()=>oae,()=>aae],Lue=[9,y,Are,0,()=>cae,()=>uae],kue=[9,y,Rre,0,()=>lae,()=>dae],Mue=[9,y,$re,0,()=>vae,()=>bae],que=[9,y,ene,0,()=>Cae,()=>Aae],$ue=[9,y,Zre,0,()=>Pae,()=>Jn],Fue=[9,y,lne,0,()=>Iae,()=>Nae],Uue=[9,y,_ne,0,()=>Oae,()=>Dae],Bue=[9,y,kne,0,()=>Mae,()=>Jn],jue=[9,y,$ne,0,()=>qae,()=>$ae],Hue=[9,y,tse,0,()=>Yae,()=>Jae],Vue=[9,y,yse,0,()=>ece,()=>tce],zue=[9,y,lse,0,()=>nce,()=>sce],Wue=[9,y,jse,0,()=>oce,()=>ace],Gue=[9,y,bse,0,()=>cce,()=>uce],Kue=[9,y,wse,0,()=>lce,()=>dce],Xue=[9,y,xse,0,()=>yce,()=>Ece],Que=[9,y,Mse,0,()=>_ce,()=>Sce],Yue=[9,y,qse,0,()=>vce,()=>wce],_h=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ActivateEventSource",{}).n("EventBridgeClient","ActivateEventSourceCommand").sc(Xce).build(){},Sh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CancelReplay",{}).n("EventBridgeClient","CancelReplayCommand").sc(Qce).build(){},vh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateApiDestination",{}).n("EventBridgeClient","CreateApiDestinationCommand").sc(Yce).build(){},wh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateArchive",{}).n("EventBridgeClient","CreateArchiveCommand").sc(Jce).build(){},bh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateConnection",{}).n("EventBridgeClient","CreateConnectionCommand").sc(Zce).build(){},Rh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEndpoint",{}).n("EventBridgeClient","CreateEndpointCommand").sc(eue).build(){},Ch=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEventBus",{}).n("EventBridgeClient","CreateEventBusCommand").sc(tue).build(){},Th=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreatePartnerEventSource",{}).n("EventBridgeClient","CreatePartnerEventSourceCommand").sc(rue).build(){},Ah=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeactivateEventSource",{}).n("EventBridgeClient","DeactivateEventSourceCommand").sc(nue).build(){},xh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeauthorizeConnection",{}).n("EventBridgeClient","DeauthorizeConnectionCommand").sc(sue).build(){},Ph=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteApiDestination",{}).n("EventBridgeClient","DeleteApiDestinationCommand").sc(iue).build(){},Ih=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteArchive",{}).n("EventBridgeClient","DeleteArchiveCommand").sc(oue).build(){},Nh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteConnection",{}).n("EventBridgeClient","DeleteConnectionCommand").sc(aue).build(){},Oh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEndpoint",{}).n("EventBridgeClient","DeleteEndpointCommand").sc(cue).build(){},Dh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEventBus",{}).n("EventBridgeClient","DeleteEventBusCommand").sc(uue).build(){},Lh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeletePartnerEventSource",{}).n("EventBridgeClient","DeletePartnerEventSourceCommand").sc(lue).build(){},kh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteRule",{}).n("EventBridgeClient","DeleteRuleCommand").sc(due).build(){},Mh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeApiDestination",{}).n("EventBridgeClient","DescribeApiDestinationCommand").sc(fue).build(){},qh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeArchive",{}).n("EventBridgeClient","DescribeArchiveCommand").sc(pue).build(){},$h=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeConnection",{}).n("EventBridgeClient","DescribeConnectionCommand").sc(hue).build(){},Fh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEndpoint",{}).n("EventBridgeClient","DescribeEndpointCommand").sc(mue).build(){},Uh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventBus",{}).n("EventBridgeClient","DescribeEventBusCommand").sc(gue).build(){},Bh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventSource",{}).n("EventBridgeClient","DescribeEventSourceCommand").sc(yue).build(){},jh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribePartnerEventSource",{}).n("EventBridgeClient","DescribePartnerEventSourceCommand").sc(Eue).build(){},Hh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeReplay",{}).n("EventBridgeClient","DescribeReplayCommand").sc(_ue).build(){},Vh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeRule",{}).n("EventBridgeClient","DescribeRuleCommand").sc(Sue).build(){},zh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DisableRule",{}).n("EventBridgeClient","DisableRuleCommand").sc(vue).build(){},Wh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","EnableRule",{}).n("EventBridgeClient","EnableRuleCommand").sc(wue).build(){},Gh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListApiDestinations",{}).n("EventBridgeClient","ListApiDestinationsCommand").sc(bue).build(){},Kh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListArchives",{}).n("EventBridgeClient","ListArchivesCommand").sc(Rue).build(){},Xh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListConnections",{}).n("EventBridgeClient","ListConnectionsCommand").sc(Cue).build(){},Qh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEndpoints",{}).n("EventBridgeClient","ListEndpointsCommand").sc(Tue).build(){},Yh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventBuses",{}).n("EventBridgeClient","ListEventBusesCommand").sc(Aue).build(){},Jh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventSources",{}).n("EventBridgeClient","ListEventSourcesCommand").sc(xue).build(){},Zh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSourceAccounts",{}).n("EventBridgeClient","ListPartnerEventSourceAccountsCommand").sc(Pue).build(){},em=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSources",{}).n("EventBridgeClient","ListPartnerEventSourcesCommand").sc(Iue).build(){},tm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListReplays",{}).n("EventBridgeClient","ListReplaysCommand").sc(Nue).build(){},rm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRuleNamesByTarget",{}).n("EventBridgeClient","ListRuleNamesByTargetCommand").sc(Oue).build(){},nm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRules",{}).n("EventBridgeClient","ListRulesCommand").sc(Due).build(){},sm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTagsForResource",{}).n("EventBridgeClient","ListTagsForResourceCommand").sc(Lue).build(){},im=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTargetsByRule",{}).n("EventBridgeClient","ListTargetsByRuleCommand").sc(kue).build(){},om=class extends H.Command.classBuilder().ep({...G,EndpointId:{type:"contextParams",name:"EndpointId"}}).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutEvents",{}).n("EventBridgeClient","PutEventsCommand").sc(Mue).build(){},am=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPartnerEvents",{}).n("EventBridgeClient","PutPartnerEventsCommand").sc(que).build(){},cm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPermission",{}).n("EventBridgeClient","PutPermissionCommand").sc($ue).build(){},um=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutRule",{}).n("EventBridgeClient","PutRuleCommand").sc(Fue).build(){},lm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutTargets",{}).n("EventBridgeClient","PutTargetsCommand").sc(Uue).build(){},dm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemovePermission",{}).n("EventBridgeClient","RemovePermissionCommand").sc(Bue).build(){},fm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemoveTargets",{}).n("EventBridgeClient","RemoveTargetsCommand").sc(jue).build(){},pm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","StartReplay",{}).n("EventBridgeClient","StartReplayCommand").sc(Hue).build(){},hm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TagResource",{}).n("EventBridgeClient","TagResourceCommand").sc(Vue).build(){},mm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TestEventPattern",{}).n("EventBridgeClient","TestEventPatternCommand").sc(zue).build(){},gm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UntagResource",{}).n("EventBridgeClient","UntagResourceCommand").sc(Wue).build(){},ym=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateApiDestination",{}).n("EventBridgeClient","UpdateApiDestinationCommand").sc(Gue).build(){},Em=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateArchive",{}).n("EventBridgeClient","UpdateArchiveCommand").sc(Kue).build(){},_m=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateConnection",{}).n("EventBridgeClient","UpdateConnectionCommand").sc(Xue).build(){},Sm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEndpoint",{}).n("EventBridgeClient","UpdateEndpointCommand").sc(Que).build(){},vm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[W.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEventBus",{}).n("EventBridgeClient","UpdateEventBusCommand").sc(Yue).build(){},Jue={ActivateEventSourceCommand:_h,CancelReplayCommand:Sh,CreateApiDestinationCommand:vh,CreateArchiveCommand:wh,CreateConnectionCommand:bh,CreateEndpointCommand:Rh,CreateEventBusCommand:Ch,CreatePartnerEventSourceCommand:Th,DeactivateEventSourceCommand:Ah,DeauthorizeConnectionCommand:xh,DeleteApiDestinationCommand:Ph,DeleteArchiveCommand:Ih,DeleteConnectionCommand:Nh,DeleteEndpointCommand:Oh,DeleteEventBusCommand:Dh,DeletePartnerEventSourceCommand:Lh,DeleteRuleCommand:kh,DescribeApiDestinationCommand:Mh,DescribeArchiveCommand:qh,DescribeConnectionCommand:$h,DescribeEndpointCommand:Fh,DescribeEventBusCommand:Uh,DescribeEventSourceCommand:Bh,DescribePartnerEventSourceCommand:jh,DescribeReplayCommand:Hh,DescribeRuleCommand:Vh,DisableRuleCommand:zh,EnableRuleCommand:Wh,ListApiDestinationsCommand:Gh,ListArchivesCommand:Kh,ListConnectionsCommand:Xh,ListEndpointsCommand:Qh,ListEventBusesCommand:Yh,ListEventSourcesCommand:Jh,ListPartnerEventSourceAccountsCommand:Zh,ListPartnerEventSourcesCommand:em,ListReplaysCommand:tm,ListRuleNamesByTargetCommand:rm,ListRulesCommand:nm,ListTagsForResourceCommand:sm,ListTargetsByRuleCommand:im,PutEventsCommand:om,PutPartnerEventsCommand:am,PutPermissionCommand:cm,PutRuleCommand:um,PutTargetsCommand:lm,RemovePermissionCommand:dm,RemoveTargetsCommand:fm,StartReplayCommand:pm,TagResourceCommand:hm,TestEventPatternCommand:mm,UntagResourceCommand:gm,UpdateApiDestinationCommand:ym,UpdateArchiveCommand:Em,UpdateConnectionCommand:_m,UpdateEndpointCommand:Sm,UpdateEventBusCommand:vm},wm=class extends Eh{};H.createAggregatedClient(Jue,wm);Object.defineProperty(L,"$Command",{enumerable:!0,get:function(){return H.Command}});Object.defineProperty(L,"__Client",{enumerable:!0,get:function(){return H.Client}});L.AccessDeniedException=TM;L.ActivateEventSourceCommand=_h;L.ApiDestinationHttpMethod=q7;L.ApiDestinationState=M7;L.ArchiveState=$7;L.AssignPublicIp=F7;L.CancelReplayCommand=Sh;L.ConcurrentModificationException=xM;L.ConnectionAuthorizationType=B7;L.ConnectionOAuthHttpMethod=j7;L.ConnectionState=H7;L.CreateApiDestinationCommand=vh;L.CreateArchiveCommand=wh;L.CreateConnectionCommand=bh;L.CreateEndpointCommand=Rh;L.CreateEventBusCommand=Ch;L.CreatePartnerEventSourceCommand=Th;L.DeactivateEventSourceCommand=Ah;L.DeauthorizeConnectionCommand=xh;L.DeleteApiDestinationCommand=Ph;L.DeleteArchiveCommand=Ih;L.DeleteConnectionCommand=Nh;L.DeleteEndpointCommand=Oh;L.DeleteEventBusCommand=Dh;L.DeletePartnerEventSourceCommand=Lh;L.DeleteRuleCommand=kh;L.DescribeApiDestinationCommand=Mh;L.DescribeArchiveCommand=qh;L.DescribeConnectionCommand=$h;L.DescribeEndpointCommand=Fh;L.DescribeEventBusCommand=Uh;L.DescribeEventSourceCommand=Bh;L.DescribePartnerEventSourceCommand=jh;L.DescribeReplayCommand=Hh;L.DescribeRuleCommand=Vh;L.DisableRuleCommand=zh;L.EnableRuleCommand=Wh;L.EndpointState=z7;L.EventBridge=wm;L.EventBridgeClient=Eh;L.EventBridgeServiceException=Xt;L.EventSourceState=K7;L.IllegalStatusException=$M;L.IncludeDetail=W7;L.InternalException=IM;L.InvalidEventPatternException=VM;L.InvalidStateException=OM;L.LaunchType=Q7;L.Level=G7;L.LimitExceededException=UM;L.ListApiDestinationsCommand=Gh;L.ListArchivesCommand=Kh;L.ListConnectionsCommand=Xh;L.ListEndpointsCommand=Qh;L.ListEventBusesCommand=Yh;L.ListEventSourcesCommand=Jh;L.ListPartnerEventSourceAccountsCommand=Zh;L.ListPartnerEventSourcesCommand=em;L.ListReplaysCommand=tm;L.ListRuleNamesByTargetCommand=rm;L.ListRulesCommand=nm;L.ListTagsForResourceCommand=sm;L.ListTargetsByRuleCommand=im;L.ManagedRuleException=KM;L.OperationDisabledException=LM;L.PlacementConstraintType=Y7;L.PlacementStrategyType=J7;L.PolicyLengthExceededException=QM;L.PropagateTags=Z7;L.PutEventsCommand=om;L.PutPartnerEventsCommand=am;L.PutPermissionCommand=cm;L.PutRuleCommand=um;L.PutTargetsCommand=lm;L.RemovePermissionCommand=dm;L.RemoveTargetsCommand=fm;L.ReplayState=U7;L.ReplicationState=V7;L.ResourceAlreadyExistsException=jM;L.ResourceNotFoundException=MM;L.RuleState=X7;L.StartReplayCommand=pm;L.TagResourceCommand=hm;L.TestEventPatternCommand=mm;L.ThrottlingException=WM;L.UntagResourceCommand=gm;L.UpdateApiDestinationCommand=ym;L.UpdateArchiveCommand=Em;L.UpdateConnectionCommand=_m;L.UpdateEndpointCommand=Sm;L.UpdateEventBusCommand=vm});var a0=_((sl,Ma)=>{var tle=200,S$="__lodash_hash_undefined__",rle=800,nle=16,v$=9007199254740991,w$="[object Arguments]",sle="[object Array]",ile="[object AsyncFunction]",ole="[object Boolean]",ale="[object Date]",cle="[object Error]",b$="[object Function]",ule="[object GeneratorFunction]",lle="[object Map]",dle="[object Number]",fle="[object Null]",R$="[object Object]",ple="[object Proxy]",hle="[object RegExp]",mle="[object Set]",gle="[object String]",yle="[object Undefined]",Ele="[object WeakMap]",_le="[object ArrayBuffer]",Sle="[object DataView]",vle="[object Float32Array]",wle="[object Float64Array]",ble="[object Int8Array]",Rle="[object Int16Array]",Cle="[object Int32Array]",Tle="[object Uint8Array]",Ale="[object Uint8ClampedArray]",xle="[object Uint16Array]",Ple="[object Uint32Array]",Ile=/[\\^$.*+?()[\]{}|]/g,Nle=/^\[object .+?Constructor\]$/,Ole=/^(?:0|[1-9]\d*)$/,Fe={};Fe[vle]=Fe[wle]=Fe[ble]=Fe[Rle]=Fe[Cle]=Fe[Tle]=Fe[Ale]=Fe[xle]=Fe[Ple]=!0;Fe[w$]=Fe[sle]=Fe[_le]=Fe[ole]=Fe[Sle]=Fe[ale]=Fe[cle]=Fe[b$]=Fe[lle]=Fe[dle]=Fe[R$]=Fe[hle]=Fe[mle]=Fe[gle]=Fe[Ele]=!1;var C$=typeof global=="object"&&global&&global.Object===Object&&global,Dle=typeof self=="object"&&self&&self.Object===Object&&self,al=C$||Dle||Function("return this")(),T$=typeof sl=="object"&&sl&&!sl.nodeType&&sl,il=T$&&typeof Ma=="object"&&Ma&&!Ma.nodeType&&Ma,A$=il&&il.exports===T$,Yw=A$&&C$.process,d$=function(){try{var t=il&&il.require&&il.require("util").types;return t||Yw&&Yw.binding&&Yw.binding("util")}catch{}}(),f$=d$&&d$.isTypedArray;function Lle(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function kle(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Mle(t){return function(e){return t(e)}}function qle(t,e){return t?.[e]}function $le(t,e){return function(r){return t(e(r))}}var Fle=Array.prototype,Ule=Function.prototype,Um=Object.prototype,Jw=al["__core-js_shared__"],Bm=Ule.toString,es=Um.hasOwnProperty,p$=function(){var t=/[^.]+$/.exec(Jw&&Jw.keys&&Jw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),x$=Um.toString,Ble=Bm.call(Object),jle=RegExp("^"+Bm.call(es).replace(Ile,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$m=A$?al.Buffer:void 0,h$=al.Symbol,m$=al.Uint8Array,g$=$m?$m.allocUnsafe:void 0,P$=$le(Object.getPrototypeOf,Object),y$=Object.create,Hle=Um.propertyIsEnumerable,Vle=Fle.splice,Vi=h$?h$.toStringTag:void 0,Fm=function(){try{var t=s0(Object,"defineProperty");return t({},"",{}),t}catch{}}(),zle=$m?$m.isBuffer:void 0,E$=Math.max,Wle=Date.now,I$=s0(al,"Map"),ol=s0(Object,"create"),Gle=function(){function t(){}return function(e){if(!Wi(e))return{};if(y$)return y$(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function zi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Kle(){this.__data__=ol?ol(null):{},this.size=0}function Xle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Qle(t){var e=this.__data__;if(ol){var r=e[t];return r===S$?void 0:r}return es.call(e,t)?e[t]:void 0}function Yle(t){var e=this.__data__;return ol?e[t]!==void 0:es.call(e,t)}function Jle(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ol&&e===void 0?S$:e,this}zi.prototype.clear=Kle;zi.prototype.delete=Xle;zi.prototype.get=Qle;zi.prototype.has=Yle;zi.prototype.set=Jle;function ts(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Zle(){this.__data__=[],this.size=0}function ede(t){var e=this.__data__,r=jm(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Vle.call(e,r,1),--this.size,!0}function tde(t){var e=this.__data__,r=jm(e,t);return r<0?void 0:e[r][1]}function rde(t){return jm(this.__data__,t)>-1}function nde(t,e){var r=this.__data__,n=jm(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}ts.prototype.clear=Zle;ts.prototype.delete=ede;ts.prototype.get=tde;ts.prototype.has=rde;ts.prototype.set=nde;function qa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function sde(){this.size=0,this.__data__={hash:new zi,map:new(I$||ts),string:new zi}}function ide(t){var e=Vm(this,t).delete(t);return this.size-=e?1:0,e}function ode(t){return Vm(this,t).get(t)}function ade(t){return Vm(this,t).has(t)}function cde(t,e){var r=Vm(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}qa.prototype.clear=sde;qa.prototype.delete=ide;qa.prototype.get=ode;qa.prototype.has=ade;qa.prototype.set=cde;function $a(t){var e=this.__data__=new ts(t);this.size=e.size}function ude(){this.__data__=new ts,this.size=0}function lde(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function dde(t){return this.__data__.get(t)}function fde(t){return this.__data__.has(t)}function pde(t,e){var r=this.__data__;if(r instanceof ts){var n=r.__data__;if(!I$||n.length<tle-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qa(n)}return r.set(t,e),this.size=r.size,this}$a.prototype.clear=ude;$a.prototype.delete=lde;$a.prototype.get=dde;$a.prototype.has=fde;$a.prototype.set=pde;function hde(t,e){var r=r0(t),n=!r&&t0(t),s=!r&&!n&&L$(t),i=!r&&!n&&!s&&M$(t),o=r||n||s||i,a=o?kle(t.length,String):[],c=a.length;for(var u in t)(e||es.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||O$(u,c)))&&a.push(u);return a}function Zw(t,e,r){(r!==void 0&&!zm(t[e],r)||r===void 0&&!(e in t))&&n0(t,e,r)}function mde(t,e,r){var n=t[e];(!(es.call(t,e)&&zm(n,r))||r===void 0&&!(e in t))&&n0(t,e,r)}function jm(t,e){for(var r=t.length;r--;)if(zm(t[r][0],e))return r;return-1}function n0(t,e,r){e=="__proto__"&&Fm?Fm(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var gde=Pde();function Hm(t){return t==null?t===void 0?yle:fle:Vi&&Vi in Object(t)?Ide(t):Mde(t)}function _$(t){return cl(t)&&Hm(t)==w$}function yde(t){if(!Wi(t)||Lde(t))return!1;var e=o0(t)?jle:Nle;return e.test(Ude(t))}function Ede(t){return cl(t)&&k$(t.length)&&!!Fe[Hm(t)]}function _de(t){if(!Wi(t))return kde(t);var e=D$(t),r=[];for(var n in t)n=="constructor"&&(e||!es.call(t,n))||r.push(n);return r}function N$(t,e,r,n,s){t!==e&&gde(e,function(i,o){if(s||(s=new $a),Wi(i))Sde(t,e,o,r,N$,n,s);else{var a=n?n(e0(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),Zw(t,o,a)}},q$)}function Sde(t,e,r,n,s,i,o){var a=e0(t,r),c=e0(e,r),u=o.get(c);if(u){Zw(t,r,u);return}var l=i?i(a,c,r+"",t,e,o):void 0,d=l===void 0;if(d){var m=r0(c),g=!m&&L$(c),E=!m&&!g&&M$(c);l=c,m||g||E?r0(a)?l=a:Bde(a)?l=Tde(a):g?(d=!1,l=bde(c,!0)):E?(d=!1,l=Cde(c,!0)):l=[]:jde(c)||t0(c)?(l=a,t0(a)?l=Hde(a):(!Wi(a)||o0(a))&&(l=Nde(c))):d=!1}d&&(o.set(c,l),s(l,c,n,i,o),o.delete(c)),Zw(t,r,l)}function vde(t,e){return $de(qde(t,e,$$),t+"")}var wde=Fm?function(t,e){return Fm(t,"toString",{configurable:!0,enumerable:!1,value:zde(e),writable:!0})}:$$;function bde(t,e){if(e)return t.slice();var r=t.length,n=g$?g$(r):new t.constructor(r);return t.copy(n),n}function Rde(t){var e=new t.constructor(t.byteLength);return new m$(e).set(new m$(t)),e}function Cde(t,e){var r=e?Rde(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Tde(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function Ade(t,e,r,n){var s=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),s?n0(r,a,c):mde(r,a,c)}return r}function xde(t){return vde(function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&Ode(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,i)}return e})}function Pde(t){return function(e,r,n){for(var s=-1,i=Object(e),o=n(e),a=o.length;a--;){var c=o[t?a:++s];if(r(i[c],c,i)===!1)break}return e}}function Vm(t,e){var r=t.__data__;return Dde(e)?r[typeof e=="string"?"string":"hash"]:r.map}function s0(t,e){var r=qle(t,e);return yde(r)?r:void 0}function Ide(t){var e=es.call(t,Vi),r=t[Vi];try{t[Vi]=void 0;var n=!0}catch{}var s=x$.call(t);return n&&(e?t[Vi]=r:delete t[Vi]),s}function Nde(t){return typeof t.constructor=="function"&&!D$(t)?Gle(P$(t)):{}}function O$(t,e){var r=typeof t;return e=e??v$,!!e&&(r=="number"||r!="symbol"&&Ole.test(t))&&t>-1&&t%1==0&&t<e}function Ode(t,e,r){if(!Wi(r))return!1;var n=typeof e;return(n=="number"?i0(r)&&O$(e,r.length):n=="string"&&e in r)?zm(r[e],t):!1}function Dde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Lde(t){return!!p$&&p$ in t}function D$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Um;return t===r}function kde(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Mde(t){return x$.call(t)}function qde(t,e,r){return e=E$(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,i=E$(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=r(o),Lle(t,this,a)}}function e0(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var $de=Fde(wde);function Fde(t){var e=0,r=0;return function(){var n=Wle(),s=nle-(n-r);if(r=n,s>0){if(++e>=rle)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Ude(t){if(t!=null){try{return Bm.call(t)}catch{}try{return t+""}catch{}}return""}function zm(t,e){return t===e||t!==t&&e!==e}var t0=_$(function(){return arguments}())?_$:function(t){return cl(t)&&es.call(t,"callee")&&!Hle.call(t,"callee")},r0=Array.isArray;function i0(t){return t!=null&&k$(t.length)&&!o0(t)}function Bde(t){return cl(t)&&i0(t)}var L$=zle||Wde;function o0(t){if(!Wi(t))return!1;var e=Hm(t);return e==b$||e==ule||e==ile||e==ple}function k$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=v$}function Wi(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function cl(t){return t!=null&&typeof t=="object"}function jde(t){if(!cl(t)||Hm(t)!=R$)return!1;var e=P$(t);if(e===null)return!0;var r=es.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Bm.call(r)==Ble}var M$=f$?Mle(f$):Ede;function Hde(t){return Ade(t,q$(t))}function q$(t){return i0(t)?hde(t,!0):_de(t)}var Vde=xde(function(t,e,r){N$(t,e,r)});function zde(t){return function(){return t}}function $$(t){return t}function Wde(){return!1}Ma.exports=Vde});var tF,rF=w(()=>{tF="ffffffff-ffff-ffff-ffff-ffffffffffff"});var nF,sF=w(()=>{nF="00000000-0000-0000-0000-000000000000"});var iF,oF=w(()=>{iF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function Qde(t){return typeof t=="string"&&iF.test(t)}var ei,ml=w(()=>{oF();ei=Qde});function Yde(t){if(!ei(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var ti,gl=w(()=>{ml();ti=Yde});function Yt(t,e=0){return(Ct[t[e+0]]+Ct[t[e+1]]+Ct[t[e+2]]+Ct[t[e+3]]+"-"+Ct[t[e+4]]+Ct[t[e+5]]+"-"+Ct[t[e+6]]+Ct[t[e+7]]+"-"+Ct[t[e+8]]+Ct[t[e+9]]+"-"+Ct[t[e+10]]+Ct[t[e+11]]+Ct[t[e+12]]+Ct[t[e+13]]+Ct[t[e+14]]+Ct[t[e+15]]).toLowerCase()}function Jde(t,e=0){let r=Yt(t,e);if(!ei(r))throw TypeError("Stringified UUID is invalid");return r}var Ct,aF,ns=w(()=>{ml();Ct=[];for(let t=0;t<256;++t)Ct.push((t+256).toString(16).slice(1));aF=Jde});function Yi(){return Qm>Ym.length-16&&(cF.default.randomFillSync(Ym),Qm=0),Ym.slice(Qm,Qm+=16)}var cF,Ym,Qm,Jm=w(()=>{cF=T(require("crypto")),Ym=new Uint8Array(256),Qm=Ym.length});function Zde(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node,o=t.clockseq;if(t._v6||(i||(i=y0),o==null&&(o=Zm)),i==null||o==null){let m=t.random||(t.rng||Yi)();i==null&&(i=[m[0],m[1],m[2],m[3],m[4],m[5]],!y0&&!t._v6&&(i[0]|=1,y0=i)),o==null&&(o=(m[6]<<8|m[7])&16383,Zm===void 0&&!t._v6&&(Zm=o))}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:_0+1,u=a-E0+(c-_0)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||a>E0)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");E0=a,_0=c,Zm=o,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let d=a/4294967296*1e4&268435455;s[n++]=d>>>8&255,s[n++]=d&255,s[n++]=d>>>24&15|16,s[n++]=d>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let m=0;m<6;++m)s[n+m]=i[m];return e||Yt(s)}var y0,Zm,E0,_0,eg,S0=w(()=>{Jm();ns();E0=0,_0=0;eg=Zde});function yl(t){let e=typeof t=="string"?ti(t):t,r=efe(e);return typeof t=="string"?Yt(r):r}function efe(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var v0=w(()=>{gl();ns()});function tfe(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function El(t,e,r){function n(s,i,o,a){var c;if(typeof s=="string"&&(s=tfe(s)),typeof i=="string"&&(i=ti(i)),((c=i)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return Yt(u)}try{n.name=t}catch{}return n.DNS=rfe,n.URL=nfe,n}var rfe,nfe,w0=w(()=>{ns();gl();rfe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",nfe="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function sfe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),uF.default.createHash("md5").update(t).digest()}var uF,lF,dF=w(()=>{uF=T(require("crypto"));lF=sfe});var ife,fF,pF=w(()=>{w0();dF();ife=El("v3",48,lF),fF=ife});var hF,b0,mF=w(()=>{hF=T(require("crypto")),b0={randomUUID:hF.default.randomUUID}});function ofe(t,e,r){if(b0.randomUUID&&!e&&!t)return b0.randomUUID();t=t||{};let n=t.random||(t.rng||Yi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Yt(n)}var ss,gF=w(()=>{mF();Jm();ns();ss=ofe});function afe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),yF.default.createHash("sha1").update(t).digest()}var yF,EF,_F=w(()=>{yF=T(require("crypto"));EF=afe});var cfe,SF,vF=w(()=>{w0();_F();cfe=El("v5",80,EF),SF=cfe});function R0(t={},e,r=0){let n=eg({...t,_v6:!0},new Uint8Array(16));if(n=yl(n),e){for(let s=0;s<16;s++)e[r+s]=n[s];return e}return Yt(n)}var wF=w(()=>{ns();S0();v0()});function C0(t){let e=typeof t=="string"?ti(t):t,r=ufe(e);return typeof t=="string"?Yt(r):r}function ufe(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var bF=w(()=>{gl();ns()});function lfe(t,e,r){t=t||{};let n=e&&r||0,s=e||new Uint8Array(16),i=t.random||(t.rng||Yi)(),o=t.msecs!==void 0?t.msecs:Date.now(),a=t.seq!==void 0?t.seq:null,c=CF,u=RF;return o>rn&&t.msecs===void 0&&(rn=o,a!==null&&(c=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),c=a>>>19&4095,u=a&524287),(c===null||u===null)&&(c=i[6]&127,c=c<<8|i[7],u=i[8]&63,u=u<<8|i[9],u=u<<5|i[10]>>>3),o+1e4>rn&&a===null?++u>524287&&(u=0,++c>4095&&(c=0,rn++)):rn=o,CF=c,RF=u,s[n++]=rn/1099511627776&255,s[n++]=rn/4294967296&255,s[n++]=rn/16777216&255,s[n++]=rn/65536&255,s[n++]=rn/256&255,s[n++]=rn&255,s[n++]=c>>>4&15|112,s[n++]=c&255,s[n++]=u>>>13&63|128,s[n++]=u>>>5&255,s[n++]=u<<3&255|i[10]&7,s[n++]=i[11],s[n++]=i[12],s[n++]=i[13],s[n++]=i[14],s[n++]=i[15],e||Yt(s)}var RF,CF,rn,TF,AF=w(()=>{Jm();ns();RF=null,CF=null,rn=0;TF=lfe});function dfe(t){if(!ei(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var xF,PF=w(()=>{ml();xF=dfe});var T0={};At(T0,{MAX:()=>tF,NIL:()=>nF,parse:()=>ti,stringify:()=>aF,v1:()=>eg,v1ToV6:()=>yl,v3:()=>fF,v4:()=>ss,v5:()=>SF,v6:()=>R0,v6ToV1:()=>C0,v7:()=>TF,validate:()=>ei,version:()=>xF});var Va=w(()=>{rF();sF();gl();ns();S0();v0();pF();gF();vF();wF();bF();AF();ml();PF()});var LF=_((b1e,DF)=>{"use strict";function A0(t){return typeof t=="function"}var Jt=console.error.bind(console);function _l(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Sl(t){t&&t.logger&&(A0(t.logger)?Jt=t.logger:Jt("new logger isn't a function, not replacing"))}function NF(t,e,r){if(!t||!t[e]){Jt("no original function "+e+" to wrap");return}if(!r){Jt("no wrapper function"),Jt(new Error().stack);return}if(!A0(t[e])||!A0(r)){Jt("original object and wrapper must be functions");return}var n=t[e],s=r(n,e);return _l(s,"__original",n),_l(s,"__unwrap",function(){t[e]===s&&_l(t,e,n)}),_l(s,"__wrapped",!0),_l(t,e,s),s}function ffe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Jt("must provide one or more modules to patch"),Jt(new Error().stack);return}if(!(e&&Array.isArray(e))){Jt("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(s){NF(n,s,r)})})}function OF(t,e){if(!t||!t[e]){Jt("no function to unwrap."),Jt(new Error().stack);return}if(!t[e].__unwrap)Jt("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function pfe(t,e){if(t)Array.isArray(t)||(t=[t]);else{Jt("must provide one or more modules to patch"),Jt(new Error().stack);return}if(!(e&&Array.isArray(e))){Jt("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){OF(r,n)})})}Sl.wrap=NF;Sl.massWrap=ffe;Sl.unwrap=OF;Sl.massUnwrap=pfe;DF.exports=Sl});var FF=_((R1e,$F)=>{"use strict";var MF=LF(),Wa=MF.wrap,tg=MF.unwrap,is="wrap@before";function rg(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function hfe(t,e){for(var r=e.length,n=0;n<r;n++){var s=e[n],i=t[is];if(typeof i=="function")i(s);else if(Array.isArray(i))for(var o=i.length,a=0;a<o;a++)i[a](s)}}function qF(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function mfe(t,e,r){var n=qF(t,e),s=n.filter(function(i){return r.indexOf(i)===-1});s.length>0&&hfe(t,s)}function kF(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}$F.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function s(o){return function(c,u){var l=qF(this,c).slice();try{var d=o.call(this,c,u);return mfe(this,c,l),d}finally{this.on.__wrapped||Wa(this,"on",s),this.addListener.__wrapped||Wa(this,"addListener",s)}}}function i(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=kF(u,n)}}}Wa(this,"removeListener",l);try{return this._events[c]=kF(u,n),o.apply(this,arguments)}finally{tg(this,"removeListener"),this._events[c]=u}}}e[is]?typeof e[is]=="function"?rg(e,is,[e[is],r]):Array.isArray(e[is])&&e[is].push(r):rg(e,is,r),e.__wrapped||(Wa(e,"addListener",s),Wa(e,"on",s),Wa(e,"emit",i),rg(e,"__unwrap",function(){tg(e,"addListener"),tg(e,"on"),tg(e,"emit"),delete e[is],delete e.__wrapped}),rg(e,"__wrapped",!0))}});var HF=_((C1e,jF)=>{"use strict";var be=require("util"),os=require("assert"),gfe=FF(),Ue=require("async_hooks"),vl="cls@contexts",wl="error@context",Ye=process.env.DEBUG_CLS_HOOKED,we=-1;jF.exports={getNamespace:UF,createNamespace:yfe,destroyNamespace:BF,reset:Efe,ERROR_SYMBOL:wl};function Nr(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Nr.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Ye){let n=" ".repeat(this._indent<0?0:this._indent);We(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+we+" active:"+be.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Nr.prototype.get=function(e){if(!this.active){if(Ye){let r=Ue.currentId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);We(`${s}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);We(s+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+we+" active:"+be.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),We(`${s}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${be.inspect(this.active)}`)}return this.active[e]};Nr.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=we,Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);We(`${s}CONTEXT-CREATED Context: (${this.name}) currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${be.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Nr.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Ye){let n=Ue.triggerAsyncId(),s=Ue.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);We(`${i}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} context:${be.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[wl]=r),n}finally{if(Ye){let n=Ue.triggerAsyncId(),s=Ue.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);We(`${i}CONTEXT-RUN END: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} ${be.inspect(r)}`)}this.exit(r)}};Nr.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Nr.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Ye&&We("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),n.then(s=>(Ye&&We("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),this.exit(r),s)).catch(s=>{throw s[wl]=r,Ye&&We("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),this.exit(r),s})};Nr.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(i){throw i&&(i[wl]=r),i}finally{n.exit(r)}}};Nr.prototype.enter=function(e){if(os.ok(e,"context must be provided for entering"),Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);We(`${s}CONTEXT-ENTER: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${be.inspect(e)}`)}this._set.push(this.active),this.active=e};Nr.prototype.exit=function(e){if(os.ok(e,"context must be provided for exiting"),Ye){let n=Ue.executionAsyncId(),s=Ue.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);We(`${i}CONTEXT-EXIT: (${this.name}) currentUid:${we} triggerId:${s} asyncHooksCurrentId:${n} len:${this._set.length} ${be.inspect(e)}`)}if(this.active===e){os.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Ye&&We("??ERROR?? context exiting but not entered - ignoring: "+be.inspect(e)),os.ok(r>=0,`context not currently entered; can't exit. 
`+be.inspect(this)+`
`+be.inspect(e))):(os.ok(r,"can't remove top context"),this._set.splice(r,1))};Nr.prototype.bindEmitter=function(e){os.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function s(o){o&&(o[vl]||(o[vl]=Object.create(null)),o[vl][n]={namespace:r,context:r.active})}function i(o){if(!(o&&o[vl]))return o;let a=o,c=o[vl];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}gfe(e,s,i)};Nr.prototype.fromException=function(e){return e[wl]};function UF(t){return process.namespaces[t]}function yfe(t){os.ok(t,"namespace must be given a name."),Ye&&We(`NS-CREATING NAMESPACE (${t})`);let e=new Nr(t);return e.id=we,Ue.createHook({init(n,s,i,o){if(we=Ue.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Ye){let a=" ".repeat(e._indent<0?0:e._indent);We(`${a}INIT [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(we===0){let a=Ue.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),Ye){let u=" ".repeat(e._indent<0?0:e._indent);We(`${u}INIT USING CONTEXT FROM TRIGGERID [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${a} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(Ye){let u=" ".repeat(e._indent<0?0:e._indent);We(`${u}INIT MISSING CONTEXT [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${a} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(Ye&&s==="PROMISE"){We(be.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(e._indent<0?0:e._indent);We(`${c}INIT RESOURCE-PROMISE [${s}] (${t}) parentId:${a} asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){we=Ue.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(we),s){if(Ye){let i=Ue.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);We(`${o}BEFORE (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`),e._indent+=2}e.enter(s)}else if(Ye){let i=Ue.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);We(`${o}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${be.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){we=Ue.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(we),s){if(Ye){let i=Ue.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);We(`${o}AFTER (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`)}e.exit(s)}else if(Ye){let i=Ue.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);We(`${o}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`)}},destroy(n){if(we=Ue.executionAsyncId(),Ye){let s=Ue.triggerAsyncId(),i=" ".repeat(e._indent<0?0:e._indent);We(`${i}DESTROY (${t}) currentUid:${we} asyncId:${n} triggerId:${s} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(e._contexts.get(we))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function BF(t){let e=UF(t);os.ok(e,`can't delete nonexistent namespace! "`+t+'"'),os.ok(e.id,"don't assign to process.namespaces directly! "+be.inspect(e)),process.namespaces[t]=null}function Efe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){BF(t)}),process.namespaces=Object.create(null)}process.namespaces={};function We(...t){Ye&&process._rawDebug(`${be.format(...t)}`)}});var Ge=_((T1e,WF)=>{"use strict";var x0=["debug","info","warn","error","silent"],VF=x0.indexOf("error"),_fe=Sfe(process.env.AWS_XRAY_DEBUG_MODE?"debug":process.env.AWS_XRAY_LOG_LEVEL),zF={error:ng("error"),info:ng("info"),warn:ng("warn"),debug:ng("debug")};function ng(t){var e=x0.indexOf(t),r=console[t]||console.log||(()=>{});return e>=_fe?(n,s)=>{(n||s)&&r(bfe(t,n,s))}:()=>{}}function Sfe(t){if(t){var e=t.toLowerCase(),r=x0.indexOf(e);return r>=0?r:VF}return VF}function vfe(t){var e=-t.getTimezoneOffset(),r=e>=0?"+":"-",n=function(s){var i=Math.floor(Math.abs(s));return(i<10?"0":"")+i};return new Date(t.getTime()+e*60*1e3).toISOString().replace(/T/," ").replace(/Z/," ")+r+n(e/60)+":"+n(e%60)}function wfe(){return process.env.LAMBDA_TASK_ROOT!==void 0}function bfe(t,e,r){var n=[];wfe()||(n.push(vfe(new Date)),n.push(`[${t.toUpperCase()}]`)),e&&n.push(e);var s=n.join(" "),i=Rfe(r);return[s,i].filter(o=>o.length>0).join(`
  `)}function Rfe(t){return t?typeof t=="string"?t:JSON.stringify(t):""}var Cfe={setLogger:function(e){zF=e},getLogger:function(){return zF}};WF.exports=Cfe});var P0=_((A1e,KF)=>{"use strict";var Tfe=require("crypto");function GF(t,e){this.init(t,e)}GF.prototype.init=function(e,r){var n=typeof e=="string"||e instanceof String?{message:e,name:""}:e;if(this.message=n.message,this.type=n.name,this.stack=[],this.remote=!!r,this.id=Tfe.randomBytes(8).toString("hex"),n.stack){var s=n.stack.split(`
`);s.shift(),s.forEach(i=>{var o=i.trim().replace(/\(|\)/g,"");o=o.substring(o.indexOf(" ")+1);var a=o.lastIndexOf(" ")>=0?o.slice(0,o.lastIndexOf(" ")):null,c=Array.isArray(a)&&!a.length?o:o.slice(o.lastIndexOf(" ")+1);c=c.split(":");var u={path:c[0],line:parseInt(c[1]),label:a||"anonymous"};this.stack.push(u)},this)}};KF.exports=GF});var QF=_((x1e,XF)=>{XF.exports=Afe;function Afe(t){var e=!1,r=null,n=null,s=null;return o;function i(a){s&&Ife(s,a),e=!1,s=n;var c=r;if(r=null,n=null,!c||!c.length){if(!s||!s.length){s=null;return}c||(c=[])}e=!0,t(c,i)}function o(a,c){e?(r||(r=[],n=[]),xfe(r,a),c&&n.push(c)):(c&&(s=[c]),e=!0,t(Array.isArray(a)?a:[a],i))}}function xfe(t,e){Array.isArray(e)?Pfe(t,e):t.push(e)}function Pfe(t,e){for(var r=0;r<e.length;r++)t.push(e[r])}function Ife(t,e){for(var r=0;r<t.length;r++)t[r](e)}});var sg=_((P1e,ZF)=>{"use strict";var YF=Ge(),nn={udp_ip:"127.0.0.1",udp_port:2e3,tcp_ip:"127.0.0.1",tcp_port:2e3,setDaemonAddress:function(e){process.env.AWS_XRAY_DAEMON_ADDRESS?YF.getLogger().warn("Ignoring call to setDaemonAddress as AWS_XRAY_DAEMON_ADDRESS is set. The current daemon address will not be changed."):(JF(e),YF.getLogger().info("Configured daemon address to "+e+"."))}},JF=function(e){if(e.indexOf(":")===-1)throw new Error("Invalid Daemon Address. You must specify an ip and port.");var r=e.split(" ");if(r.length===1){if(e.indexOf("udp")>-1||e.indexOf("tcp")>-1)throw new Error("Invalid Daemon Address. You must specify both tcp and udp addresses.");var n=e.split(":");if(!n[0])throw new Error("Invalid Daemon Address. You must specify an ip.");nn.udp_ip=n[0],nn.tcp_ip=n[0],nn.udp_port=n[1],nn.tcp_port=n[1]}else if(r.length===2){var s=r[0].split(":"),i=r[1].split(":"),o={};if(o[s[0]]=s,o[i[0]]=i,nn.udp_ip=o.udp[1],nn.udp_port=parseInt(o.udp[2]),nn.tcp_ip=o.tcp[1],nn.tcp_port=parseInt(o.tcp[2]),!nn.udp_port||!nn.tcp_port)throw new Error("Invalid Daemon Address. You must specify port number.")}};process.env.AWS_XRAY_DAEMON_ADDRESS&&JF(process.env.AWS_XRAY_DAEMON_ADDRESS);ZF.exports=nn});var og=_((I1e,iU)=>{"use strict";var rU=require("dgram"),Nfe=QF(),ig=Ge(),eU='{"format":"json","version":1}',tU=`
`;function Ofe(t,e){var r=rU.createSocket("udp4");nU(r,t,0,function(){try{r.close()}finally{e()}})}function nU(t,e,r,n){if(r>=e.length){n();return}Dfe(t,e[r],function(){nU(t,e,r+1,n)})}function Dfe(t,e,r){var n=e.msg,s=e.offset,i=e.length,o=e.port,a=e.address,c=e.callback;t.send(n,s,i,o,a,function(u){try{c(u)}finally{r()}})}function sU(){this.batchSend=Nfe(Ofe)}sU.prototype.send=function(t,e,r,n,s,i){var o={msg:t,offset:e,length:r,port:n,address:s,callback:i};this.batchSend(o)};var Lfe={daemonConfig:sg(),format:function(e){return eU+tU+e.toString()},send:function(e){this.socket||(this.useBatchingTemporarySocket?this.socket=new sU:this.socket=rU.createSocket("udp4").unref());var r=this.socket,n=e.format(),s=eU+tU+n,i=Buffer.from(s),o='{"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}',a=e.type==="subsegment"?"Subsegment":"Segment";r.send(i,0,i.length,this.daemonConfig.udp_port,this.daemonConfig.udp_ip,function(c){c?c.code==="EMSGSIZE"?ig.getLogger().error(a+" too large to send: "+o+" ("+i.length+" bytes)."):ig.getLogger().error("Error occured sending segment: ",c):(ig.getLogger().debug(a+' sent: {"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}'),ig.getLogger().debug("UDP message sent: "+e))})},setDaemonAddress:function(e){this.daemonConfig.setDaemonAddress(e)},getIp:function(){return this.daemonConfig.udp_ip},getPort:function(){return this.daemonConfig.udp_port},disableReusableSocket:function(){this.useBatchingTemporarySocket=!0}};iU.exports=Lfe});var cg=_((N1e,oU)=>{"use strict";var kfe=require("crypto"),ag=Ge(),I0=class t{constructor(e,r){this.version=1,this.timestamp=e||Math.round(new Date().getTime()/1e3).toString(16),this.id=r||kfe.randomBytes(12).toString("hex")}static Invalid(){return new t("00000000","000000000000000000000000")}static FromString(e){let r="-";var n=new t,s,i;if(!e||typeof e!="string")return ag.getLogger().error("Empty or non-string trace ID provided"),n;let o=e.trim().split(r);return o.length!==3?(ag.getLogger().error("Unrecognized trace ID format"),n):(s=parseInt(o[0]),isNaN(s)||s<1?(ag.getLogger().error("Trace ID version must be positive integer"),n):(i=parseInt(o[1],16).toString(16),i==="NaN"?(ag.getLogger().error("Trace ID timestamp must be a hex-encoded value"),n):(i=i.padStart(8,"0"),n.version=s,n.timestamp=i,n.id=o[2],n)))}toString(){return`${this.version.toString()}-${this.timestamp}-${this.id}`}};oU.exports=I0});var Mt=_((O1e,aU)=>{"use strict";var Mfe=require("crypto"),bl=Ge(),qfe=cg(),N0={getCauseTypeFromHttpStatus:function(e){var r=e.toString();if(r.match(/^[4][0-9]{2}$/)!==null)return"error";if(r.match(/^[5][0-9]{2}$/)!==null)return"fault"},stripQueryStringFromPath:function(e){return e?e.split("?")[0]:""},wildcardMatch:function(e,r){if(e===void 0||r===void 0)return!1;if(e.length===1&&e.charAt(0)==="*")return!0;var n=e.length,s=r.length,i=e.indexOf("*");if(e=e.toLowerCase(),r=r.toLowerCase(),i===-1||i===n-1){var o=function(){for(var m=0,g=0;g<n;g++){var E=e.charAt(g);if(E==="*")return!0;if(E==="?"){if(m===s)return!1;m++}else{if(m>=s||E!=r.charAt(m))return!1;m++}}return m===s};return o()}var a=[];a[0]=!0;for(var c=0;c<n;c++){var u,l=e.charAt(c);if(l!="*")for(u=s-1;u>=0;u--)a[u+1]=!!a[u]&&(l==="?"||l===r.charAt(u));else{for(u=0;u<=s&&!a[u];)u++;for(u;u<=s;u++)a[u]=!0}a[0]=a[0]&&l==="*"}return a[s]},LambdaUtils:{validTraceData:function(t){var e=!1;if(t){var r=N0.processTraceData(t);e=!!(r&&r.root&&r.parent&&r.sampled)}return e},populateTraceData:function(t,e){bl.getLogger().debug("Lambda trace data found: "+e);let r=N0.processTraceData(e);var n=!1;return r?r.root&&!r.parent&&!r.sampled?(t.noOp=!0,n=!0):!r.root||!r.parent||!r.sampled?bl.getLogger().error("_X_AMZN_TRACE_ID is missing required information"):n=!0:(r={},bl.getLogger().error("_X_AMZN_TRACE_ID is empty or has an invalid format")),t.trace_id=qfe.FromString(r.root).toString(),t.id=r.parent||Mfe.randomBytes(8).toString("hex"),r.root&&t.trace_id!==r.root&&(bl.getLogger().error("_X_AMZN_TRACE_ID contains invalid trace ID"),n=!1),parseInt(r.sampled)?delete t.notTraced:t.notTraced=!0,r.data&&(t.additionalTraceData=r.data),bl.getLogger().debug("Segment started: "+JSON.stringify(r)),n}},processTraceData:function(e){var r={},n={},s=["root","parent","sampled","self"],i=256;return typeof e=="string"&&e&&(e.split(";").forEach(function(o){if(o){var a=o.split("=");if(a[0]&&a[1]){let c=a[0].trim(),u=a[1].trim(),l=c.toLowerCase(),d=s.indexOf(l)!==-1;d?r[l]=u:!d&&i-(l.length+u.length)>=0&&(n[c]=u,i-=c.length+u.length)}}}),r.data=n),r},objectWithoutProperties:function(e,r,n){r=Array.isArray(r)?r:[],n=typeof n=="boolean"?n:!1;var s=n?Object.create(Object.getPrototypeOf(e)):{};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i]);return s},safeParseInt:t=>!t||isNaN(t)?0:parseInt(t)};aU.exports=N0});var ri=_((D1e,lU)=>{"use strict";var{safeParseInt:cU}=Mt(),uU=Ge(),$fe=100,O0={streamingThreshold:$fe,getCurrentTime:function(){return Date.now()/1e3},setOrigin:function(e){this.origin=e},setPluginData:function(e){this.pluginData=e},setSDKData:function(e){this.sdkData=e},setServiceData:function(e){this.serviceData=e},setStreamingThreshold:function(e){isFinite(e)&&e>=0?(O0.streamingThreshold=e,uU.getLogger().debug("Subsegment streaming threshold set to: "+e)):uU.getLogger().error("Invalid threshold: "+e+". Must be a whole number >= 0.")},getStreamingThreshold:function(){return O0.streamingThreshold},getHttpResponseData:t=>{let e={};if(!t)return e;let r=cU(t.statusCode);return r!==0&&(e.status=r),t.headers&&t.headers["content-length"]&&(e.content_length=cU(t.headers["content-length"])),e},getJsonStringifyReplacer:()=>(t,e)=>typeof e=="bigint"?e.toString():e};lU.exports=O0});var pU=_((L1e,fU)=>{"use strict";var{getHttpResponseData:Ffe}=ri(),{stripQueryStringFromPath:Ufe}=Mt();function dU(t,e,r){this.init(t,e,r)}dU.prototype.init=function(e,r,n){this.request={url:e.agent&&e.agent.protocol?e.agent.protocol+"//"+(e.host||e.getHeader("host"))+Ufe(e.path):"",method:e.method||""},n&&(this.request.traced=!0),r&&(this.response=Ffe(r))};fU.exports=dU});var Rl=_((k1e,hU)=>{"use strict";var Bfe=require("crypto"),jfe=P0(),Hfe=pU(),Vfe=og(),ug=ri(),zfe=Mt(),as=Ge();function Re(t){this.init(t)}Re.prototype.init=function(e){if(typeof e!="string")throw new Error("Subsegment name must be of type string.");this.id=Bfe.randomBytes(8).toString("hex"),this.name=e,this.start_time=ug.getCurrentTime(),this.in_progress=!0,this.counter=0,this.notTraced=!1};Re.prototype.addNewSubsegment=function(e){let r=new Re(e);return this.addSubsegment(r),r};Re.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};Re.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new Re(e);return this.addSubsegment(r),r.notTraced=!0,r};Re.prototype.addSubsegment=function(t){if(!(t instanceof Re))throw new Error("Failed to add subsegment:"+t+' to subsegment "'+this.name+'".  Not a subsegment.');this.subsegments===void 0&&(this.subsegments=[]),t.segment=this.segment,t.parent=this,t.notTraced=t.parent.notTraced,t.noOp=t.parent.noOp,t.end_time===void 0&&this.incrementCounter(t.counter),this.subsegments.push(t)};Re.prototype.removeSubsegment=function(e){if(!(e instanceof Re))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};Re.prototype.addAttribute=function(e,r){this[e]=r};Re.prototype.addPrecursorId=function(t){typeof t!="string"&&as.getLogger().error("Failed to add id:"+t+" to subsegment "+this.name+".  Precursor Ids must be of type string."),this.precursor_ids===void 0&&(this.precursor_ids=[]),this.precursor_ids.push(t)};Re.prototype.addAnnotation=function(t,e){if(typeof e!="boolean"&&typeof e!="string"&&!isFinite(e)){as.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof t!="string"){as.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[t]=e};Re.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){as.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){as.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};Re.prototype.addSqlData=function(e){this.sql=e};Re.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){as.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.segment&&this.segment.exception){if(e===this.segment.exception.ex){this.fault=!0,this.cause={id:this.segment.exception.cause,exceptions:[]};return}delete this.segment.exception}this.segment&&(this.segment.exception={ex:e,cause:this.id}),this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.unshift(new jfe(e,r))};Re.prototype.addRemoteRequestData=function(e,r,n){this.http=new Hfe(e,r,n),"traced"in this.http.request&&(this.traced=this.http.request.traced,delete this.http.request.traced)};Re.prototype.addFaultFlag=function(){this.fault=!0};Re.prototype.addErrorFlag=function(){this.error=!0};Re.prototype.addThrottleFlag=function(){this.throttle=!0};Re.prototype.close=function(e,r){var n=this.segment;this.end_time=ug.getCurrentTime(),delete this.in_progress,e&&this.addError(e,r),this.parent&&this.parent.decrementCounter(),n&&n.counter>ug.getStreamingThreshold()&&this.streamSubsegments()&&this.parent&&this.parent.removeSubsegment(this)};Re.prototype.incrementCounter=function(e){this.counter=e?this.counter+e+1:this.counter+1,this.parent&&this.parent.incrementCounter(e)};Re.prototype.decrementCounter=function(){this.counter--,this.parent&&this.parent.decrementCounter()};Re.prototype.isClosed=function(){return!this.in_progress};Re.prototype.flush=function(){if(!this.parent||!this.segment){as.getLogger().error("Failed to flush subsegment: "+this.name+". Subsegment must be added to a segment chain to flush.");return}this.segment.trace_id?this.segment.notTraced!==!0&&!this.notTraced?Vfe.send(this):as.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is marked as not sampled."):as.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is missing a trace ID.")};Re.prototype.streamSubsegments=function(){if(this.isClosed()&&this.counter<=0)return this.flush(),!0;if(this.subsegments&&this.subsegments.length>0){var e=[];this.subsegments.forEach(function(r){r.streamSubsegments()||e.push(r)}),this.subsegments=e}};Re.prototype.format=function(){return this.type="subsegment",this.parent&&(this.parent_id=this.parent.id),this.segment&&(this.trace_id=this.segment.trace_id),this.serialize()};Re.prototype.toString=function(){return this.serialize()};Re.prototype.toJSON=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=zfe.objectWithoutProperties(this,e,!1);return r};Re.prototype.serialize=function(e){return JSON.stringify(e??this,ug.getJsonStringifyReplacer())};hU.exports=Re});var Cl=_((M1e,yU)=>{"use strict";var Wfe=require("crypto"),Gfe=P0(),Kfe=og(),Or=ri(),lg=Rl(),mU=cg(),gU=Mt(),ni=Ge();function qe(t,e,r){this.init(t,e,r)}qe.prototype.init=function(e,r,n){if(typeof e!="string")throw new Error("Segment name must be of type string.");var s;r&&typeof r=="string"?s=mU.FromString(r):s=new mU;var i=Wfe.randomBytes(8).toString("hex"),o=Or.getCurrentTime();this.trace_id=s.toString(),this.id=i,this.start_time=o,this.name=e||"",this.in_progress=!0,this.counter=0,n&&(this.parent_id=n),Or.serviceData&&this.setServiceData(Or.serviceData),Or.pluginData&&this.addPluginData(Or.pluginData),Or.origin&&(this.origin=Or.origin),Or.sdkData&&this.setSDKData(Or.sdkData)};qe.prototype.addIncomingRequestData=function(e){this.http=e};qe.prototype.addAnnotation=function(e,r){if(typeof r!="boolean"&&typeof r!="string"&&!isFinite(r)){ni.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof e!="string"){ni.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[e]=r};qe.prototype.setUser=function(t){typeof t!="string"&&ni.getLogger().error("Set user: "+t+" failed. User IDs must be of type string."),this.user=t};qe.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){ni.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){ni.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};qe.prototype.setSDKData=function(e){if(!e){ni.getLogger().error("Add SDK data: "+e+" failed.Must not be empty.");return}this.aws||(this.aws={}),this.aws.xray=e};qe.prototype.setMatchedSamplingRule=function(e){this.aws&&(this.aws=JSON.parse(JSON.stringify(this.aws))),this.aws&&this.aws.xray?this.aws.xray.rule_name=e:this.aws={xray:{rule_name:e}}};qe.prototype.setServiceData=function(e){if(!e){ni.getLogger().error("Add service data: "+e+" failed.Must not be empty.");return}this.service=e};qe.prototype.addPluginData=function(e){this.aws===void 0&&(this.aws={}),Object.assign(this.aws,e)};qe.prototype.addNewSubsegment=function(e){var r=new lg(e);return this.addSubsegment(r),r};qe.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};qe.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new lg(e);return this.addSubsegment(r),r.notTraced=!0,r};qe.prototype.addSubsegment=function(e){if(!(e instanceof lg))throw new Error("Cannot add subsegment: "+e+". Not a subsegment.");this.subsegments===void 0&&(this.subsegments=[]),e.segment=this,e.parent=this,e.notTraced=e.parent.notTraced,e.noOp=e.parent.noOp,this.subsegments.push(e),e.end_time||this.incrementCounter(e.counter)};qe.prototype.removeSubsegment=function(e){if(!(e instanceof lg))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};qe.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){ni.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.exception){if(e===this.exception.ex){this.cause={id:this.exception.cause},delete this.exception;return}delete this.exception}this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.push(new Gfe(e,r))};qe.prototype.addFaultFlag=function(){this.fault=!0};qe.prototype.addErrorFlag=function(){this.error=!0};qe.prototype.addThrottleFlag=function(){this.throttle=!0};qe.prototype.isClosed=function(){return!this.in_progress};qe.prototype.incrementCounter=function(e){if(this.counter=e?this.counter+e+1:this.counter+1,this.counter>Or.streamingThreshold&&this.subsegments&&this.subsegments.length>0){var r=[];this.subsegments.forEach(function(n){n.streamSubsegments()||r.push(n)}),this.subsegments=r}};qe.prototype.decrementCounter=function(){this.counter--,this.counter<=0&&this.isClosed()&&this.flush()};qe.prototype.close=function(t,e){this.end_time||(this.end_time=Or.getCurrentTime()),t!==void 0&&this.addError(t,e),delete this.in_progress,delete this.exception,this.counter<=0&&this.flush()};qe.prototype.flush=function(){if(this.notTraced!==!0){delete this.exception;var e=gU.objectWithoutProperties(this,["counter","notTraced"],!0);Kfe.send(e)}};qe.prototype.format=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=gU.objectWithoutProperties(this,e,!1);return this.serialize(r)};qe.prototype.toString=function(){return this.serialize()};qe.prototype.serialize=function(e){return JSON.stringify(e??this,Or.getJsonStringifyReplacer())};yU.exports=qe});var ii=_((q1e,vU)=>{"use strict";var Tl=HF(),sn=Ge(),D0=Cl(),EU=Rl(),cs=!0,si="AWSXRay",_U="segment",SU=!1,qt={CONTEXT_MISSING_STRATEGY:{RUNTIME_ERROR:{contextMissing:function(e){throw new Error(e)}},LOG_ERROR:{contextMissing:function(e){var r=new Error(e);sn.getLogger().error(r.stack)}},IGNORE_ERROR:{contextMissing:function(){}}},contextMissingStrategy:{},resolveManualSegmentParams:function(e){if(e&&!qt.isAutomaticMode()){var r=e.XRaySegment||e.XraySegment,n=e.Segment,s=null;return r&&(r instanceof D0||r instanceof EU)?(s=r,delete e.XRaySegment,delete e.XraySegment):n&&(n instanceof D0||n instanceof EU)&&(s=n,delete e.Segment),s}},getNamespace:function(){return Tl.getNamespace(si)||Tl.createNamespace(si)},resolveSegment:function(e){if(cs)return this.getSegment();if(e&&!cs)return e;!e&&!cs&&qt.contextMissingStrategy.contextMissing("No sub/segment specified. A sub/segment must be provided for manual mode.")},getSegment:function(){if(cs){var e=qt.getNamespace(si).get(_U);return e?e instanceof D0&&process.env.LAMBDA_TASK_ROOT&&e.facade==!0&&e.resolveLambdaTraceData():qt.contextMissingStrategy.contextMissing("Failed to get the current sub/segment from the context."),e}else qt.contextMissingStrategy.contextMissing("Cannot get sub/segment from context. Not supported in manual mode.")},setSegment:function(e){cs?qt.getNamespace(si).set(_U,e)||sn.getLogger().warn("Failed to set the current sub/segment on the context."):qt.contextMissingStrategy.contextMissing("Cannot set sub/segment on context. Not supported in manual mode.")},isAutomaticMode:function(){return cs},enableAutomaticMode:function(){cs=!0,qt.getNamespace(si),sn.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to automatic mode.")},enableManualMode:function(){cs=!1,Tl.getNamespace(si)&&Tl.destroyNamespace(si),sn.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to manual mode.")},setContextMissingStrategy:function(e){if(SU)sn.getLogger().warn("Ignoring call to setContextMissingStrategy as AWS_XRAY_CONTEXT_MISSING is set. The current context missing strategy will not be changed.");else if(typeof e=="string"){var r=qt.CONTEXT_MISSING_STRATEGY[e.toUpperCase()];if(r)qt.contextMissingStrategy.contextMissing=r.contextMissing,process.env.AWS_XRAY_CONTEXT_MISSING?sn.getLogger().debug("AWS_XRAY_CONTEXT_MISSING is set. Configured context missing strategy to "+process.env.AWS_XRAY_CONTEXT_MISSING+"."):sn.getLogger().debug("Configured context missing strategy to: "+e);else throw new Error("Invalid context missing strategy: "+e+". Valid values are "+Object.keys(qt.CONTEXT_MISSING_STRATEGY)+".")}else if(typeof e=="function")qt.contextMissingStrategy.contextMissing=e,sn.getLogger().info("Configured custom context missing strategy to function: "+e.name);else throw new Error("Context missing strategy must be either a string or a custom function.")}};process.env.AWS_XRAY_MANUAL_MODE?(cs=!1,sn.getLogger().debug("Starting the AWS X-Ray SDK in manual mode.")):(Tl.createNamespace(si),sn.getLogger().debug("Starting the AWS X-Ray SDK in automatic mode (default)."));process.env.AWS_XRAY_CONTEXT_MISSING?(qt.setContextMissingStrategy(process.env.AWS_XRAY_CONTEXT_MISSING),SU=!0):(qt.contextMissingStrategy.contextMissing=qt.CONTEXT_MISSING_STRATEGY.LOG_ERROR.contextMissing,sn.getLogger().debug("Using default context missing strategy: LOG_ERROR"));vU.exports=qt});var k0=_(($1e,wU)=>{"use strict";var{getHttpResponseData:Xfe}=ri();function L0(t){this.init(t)}L0.prototype.init=function(e){var r=!!e.headers["x-forwarded-for"],n;e.connection&&(n=(e.connection.secure||e.connection.encrypted?"https://":"http://")+((e.headers.host||"")+(e.url||""))),this.request={method:e.method||"",user_agent:e.headers["user-agent"]||"",client_ip:Qfe(e)||"",url:n||""},r&&(this.request.x_forwarded_for=r)};var Qfe=function(e){var r;return e.headers["x-forwarded-for"]?r=(e.headers["x-forwarded-for"]||"").split(",")[0]:e.connection&&e.connection.remoteAddress?r=e.connection.remoteAddress:e.socket&&e.socket.remoteAddress?r=e.socket.remoteAddress:e.connection&&e.connection.socket&&e.connection.socket.remoteAddress&&(r=e.connection.socket.remoteAddress),r};L0.prototype.close=function(e){this.response=Xfe(e)};wU.exports=L0});var RU=_((F1e,bU)=>{"use strict";function M0(t,e){this.init(t,e)}M0.prototype.init=function(e,r){if(this.usedThisSecond=0,typeof e=="number"&&e%1===0&&e>=0)this.fixedTarget=e;else throw new Error('Error in sampling file. Rule attribute "fixed_target" must be a non-negative integer.');if(typeof r=="number"&&r>=0&&r<=1)this.fallbackRate=r;else throw new Error('Error in sampling file. Rule attribute "rate" must be a number between 0 and 1 inclusive.')};M0.prototype.isSampled=function(){var e=Math.round(new Date().getTime()/1e3);return e!==this.thisSecond&&(this.usedThisSecond=0,this.thisSecond=e),this.usedThisSecond>=this.fixedTarget?Math.random()<this.fallbackRate:(this.usedThisSecond++,!0)};bU.exports=M0});var CU=_((U1e,Yfe)=>{Yfe.exports={default:{fixed_target:1,rate:.05},version:2}});var $0=_((B1e,IU)=>{"use strict";var Jfe=require("fs"),TU=RU(),q0=Mt(),Zfe=CU(),dg=Ge(),xU={shouldSample:function(e){var r=e.host,n=e.httpMethod,s=e.urlPath,i="{ http_method: "+n+", host: "+r+", url_path: "+s+" }",o;return this.rules.some(function(a){if(a.default||r==null||q0.wildcardMatch(a.host,r)&&(n==null||q0.wildcardMatch(a.http_method,n))&&(s==null||q0.wildcardMatch(a.url_path,s)))return o=a.reservoir,dg.getLogger().debug("Local sampling rule match found for "+i+". Matched "+(a.default?"default":"{ http_method: "+a.http_method+", host: "+a.host+", url_path: "+a.url_path+" }")+". Using fixed_target: "+o.fixedTarget+" and rate: "+o.fallbackRate+"."),!0}),o?o.isSampled():(dg.getLogger().debug("No sampling rule matched for "+i),!1)},setLocalRules:function(e){e?typeof e=="string"?(dg.getLogger().info("Using custom sampling rules file: "+e),this.rules=AU(JSON.parse(Jfe.readFileSync(e,"utf8")))):(dg.getLogger().info("Using custom sampling rules source."),this.rules=AU(e)):this.rules=PU(Zfe)}},AU=function(e){if(!e.version)throw new Error('Error in sampling file. Missing "version" attribute.');if(e.version===1||e.version===2)return PU(e);throw new Error('Error in sampling file. Unknown version "'+e.version+'".')},PU=function(e){var r,n=[];if(e.default){var s=[];for(var i in e.default){if(i!=="fixed_target"&&i!=="rate")throw new Error("Error in sampling file. Invalid attribute for default: "+i+'. Valid attributes for default are "fixed_target" and "rate".');if(typeof e.default[i]!="number")throw new Error("Error in sampling file. Default "+i+" must be a number.")}if(typeof e.default.fixed_target>"u"&&s.push("fixed_target"),typeof e.default.rate>"u"&&s.push("rate"),s.length!==0)throw new Error("Error in sampling file. Missing required attributes for default: "+s+".");r={default:!0,reservoir:new TU(e.default.fixed_target,e.default.rate)}}else throw new Error('Error in sampling file. Expecting "default" object to be defined with attributes "fixed_target" and "rate".');return Array.isArray(e.rules)&&e.rules.forEach(function(o){var a={},c;e.version===2&&(c={host:1,http_method:1,url_path:1,fixed_target:1,rate:1}),e.version===1&&(c={service_name:1,http_method:1,url_path:1,fixed_target:1,rate:1});for(var u in o){var l=o[u];if(!c[u]&&u!="description")throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" has invalid attribute: "+u+".");if(u!="description"&&!l&&l!==0)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+' attribute "'+u+'" has invalid value: '+l+".");e.version===2&&(a[u]=l),e.version===1&&u==="service_name"?a.host=l:a[u]=l,delete c[u]}if(Object.keys(c).length!==0&&c.constructor===Object)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" is missing required attributes: "+Object.keys(c)+".");var d=a;d.reservoir=new TU(o.fixed_target,o.rate),n.push(d)}),n.push(r),n};xU.setLocalRules();IU.exports=xU});var OU=_((j1e,NU)=>{"use strict";function Ga(){this.init()}Ga.prototype.init=function(){this.quota=null,this.TTL=null,this.takenThisSec=0,this.borrowedThisSec=0,this.reportInterval=1,this.reportElapsed=0};Ga.prototype.borrowOrTake=function(e,r){if(this.adjustThisSec(e),this.quota>=0&&this.TTL>=e)return this.takenThisSec>=this.quota?!1:(this.takenThisSec++,"take");if(r)return this.borrowedThisSec>=1?!1:(this.borrowedThisSec++,"borrow")};Ga.prototype.adjustThisSec=function(e){e!==this.thisSec&&(this.takenThisSec=0,this.borrowedThisSec=0,this.thisSec=e)};Ga.prototype.loadNewQuota=function(e,r,n){e&&(this.quota=e),r&&(this.TTL=r),n&&(this.reportInterval=n/10)};Ga.prototype.timeToReport=function(){return this.reportElapsed+1>=this.reportInterval?(this.reportElapsed=0,!0):(this.reportElapsed+=1,!1)};NU.exports=Ga});var LU=_((H1e,DU)=>{"use strict";var Al=Mt(),epe=OU();function Et(t,e,r,n,s,i,o,a,c){this.init(t,e,r,n,s,i,o,a,c)}Et.prototype.init=function(e,r,n,s,i,o,a,c,u){this.name=e,this.priority=r,this.rate=n,this.host=i,this.httpMethod=o,this.urlPath=a,this.serviceName=c,this.serviceType=u,this.reservoir=new epe,this.borrow=!!s,this.resetStatistics()};Et.prototype.match=function(e){var r=e.host,n=e.httpMethod,s=e.serviceName,i=e.urlPath,o=e.serviceType;return this.isDefault()||(!r||Al.wildcardMatch(this.host,r))&&(!n||Al.wildcardMatch(this.httpMethod,n))&&(!s||Al.wildcardMatch(this.serviceName,s))&&(!i||Al.wildcardMatch(this.urlPath,i))&&(!o||Al.wildcardMatch(this.serviceType,o))};Et.prototype.snapshotStatistics=function(){var e={requestCount:this.requestCount,borrowCount:this.borrowCount,sampledCount:this.sampledCount};return this.resetStatistics(),e};Et.prototype.merge=function(e){this.reservoir=e.reservoir,this.requestCount=e.requestCount,this.borrowCount=e.borrowCount,this.sampledCount=e.sampledCount,e=null};Et.prototype.isDefault=function(){return this.name==="Default"};Et.prototype.incrementRequestCount=function(){this.requestCount++};Et.prototype.incrementBorrowCount=function(){this.borrowCount++};Et.prototype.incrementSampledCount=function(){this.sampledCount++};Et.prototype.setRate=function(e){this.rate=e};Et.prototype.getRate=function(){return this.rate};Et.prototype.getName=function(){return this.name};Et.prototype.getPriority=function(){return this.priority};Et.prototype.getReservoir=function(){return this.reservoir};Et.prototype.resetStatistics=function(){this.requestCount=0,this.borrowCount=0,this.sampledCount=0};Et.prototype.canBorrow=function(){return this.borrow};Et.prototype.everMatched=function(){return this.requestCount>0};Et.prototype.timeToReport=function(){return this.reservoir.timeToReport()};DU.exports=Et});var F0=_((V1e,$U)=>{"use strict";var tpe=require("crypto"),rpe=Ge(),npe=LU(),fg=sg(),spe=require("util"),ipe=require("http"),MU={clientId:tpe.randomBytes(12).toString("hex"),samplingRulesPath:"/GetSamplingRules",samplingTargetsPath:"/SamplingTargets",logger:rpe,httpClient:ipe,fetchSamplingRules:function(e){let r="{}",n=kU(this.samplingRulesPath,r.length),i=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(n,o=>{var a="";o.on("data",c=>{a+=c}),o.on("error",c=>{e(c)}),o.on("end",()=>{var c;try{c=JSON.parse(a)}catch(l){e(l);return}if(!c){e(new Error("AWS X-Ray GetSamplingRules API returned empty response"));return}var u=ape(c);e(null,u)})});i.on("error",()=>{e(new Error(`Failed to connect to X-Ray daemon at ${n.hostname}:${n.port} to get sampling rules.`))}),i.write(r),i.end()},fetchTargets:function(e,r){let n=JSON.stringify(ope(e)),s=kU(this.samplingTargetsPath,n.length),o=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(s,a=>{var c="";a.on("data",u=>{c+=u}),a.on("error",u=>{r(u)}),a.on("end",()=>{var u;try{u=JSON.parse(c)}catch(m){r(m);return}if(!u||typeof u.LastRuleModification!="number"){r(new Error("AWS X-Ray SamplingTargets API returned invalid response"));return}var l=cpe(u),d=qU(u.LastRuleModification);r(null,l,d)})});o.on("error",()=>{r(new Error(`Failed to connect to X-Ray daemon at ${s.hostname}:${s.port} to get sampling targets.`))}),o.write(n),o.end()}},ope=function(e){var r=[],n=Math.floor(new Date().getTime()/1e3);return e.forEach(function(s){var i=s.snapshotStatistics(),o={RuleName:s.getName(),ClientID:MU.clientId,RequestCount:i.requestCount,BorrowCount:i.borrowCount,SampledCount:i.sampledCount,Timestamp:n};r.push(o)}),{SamplingStatisticsDocuments:r}},ape=function(e){var r=[],n=e.SamplingRuleRecords||[];return n.forEach(function(s){if(s=s.SamplingRule,upe(s)){var i=new npe(s.RuleName,s.Priority,s.FixedRate,s.ReservoirSize,s.Host,s.HTTPMethod,s.URLPath,s.ServiceName,s.ServiceType);r.push(i)}}),r},cpe=function(e){var r=e.SamplingTargetDocuments||[],n={};return r.forEach(function(s){var i={rate:s.FixedRate,quota:s.ReservoirQuota,TTL:qU(s.ReservoirQuotaTTL),interval:s.Interval};n[s.RuleName]=i}),n},upe=function(e){return e.Version===1&&e.ResourceARN==="*"&&e.Attributes&&Object.keys(e.Attributes).length===0&&e.ServiceType&&e.RuleName&&e.Priority&&typeof e.FixedRate=="number"},qU=function(e){return new Date(e).getTime()/1e3},kU=function(e,r){return{hostname:fg.tcp_ip,port:fg.tcp_port,method:"POST",path:e,headers:{"Content-Type":"application/json","Content-Length":r,Host:spe.format("%s:%d",fg.tcp_ip,fg.tcp_port)}}};$U.exports=MU});var pg=_((z1e,FU)=>{"use strict";var lpe=3600,U0={rules:[],lastUpdated:null,getMatchedRule:function(e,r){if(dpe(r))return null;var n;return this.rules.forEach(function(s){!n&&s.match(e)&&(n=s),s.isDefault()&&!n&&(n=s)}),n},loadRules:function(e){var r={};this.rules.forEach(function(n){r[n.getName()]=n}),this.rules=e,this.rules.forEach(function(n){var s=r[n.getName()];s&&n.merge(s)}),this.rules.sort(function(n,s){var i=n.getPriority()-s.getPriority();return i!==0?i:n.getName()>s.getName()?1:-1})},loadTargets:function(e){this.rules.forEach(function(r){var n=e[r.getName()];n&&(r.getReservoir().loadNewQuota(n.quota,n.TTL,n.interval),r.setRate(n.rate))})},getRules:function(){return this.rules},timestamp:function(e){this.lastUpdated=e},getLastUpdated:function(){return this.lastUpdated}},dpe=function(e){return U0.getLastUpdated()?e>U0.getLastUpdated()+lpe:!0};FU.exports=U0});var j0=_((W1e,HU)=>{"use strict";var B0=Ge(),fpe=F0(),UU=pg(),ppe=5*60*1e3,hpe={start:function(){this.poller&&clearInterval(this.poller),BU(!1),this.poller=setInterval(BU,ppe),this.poller.unref()}},BU=function(e){if(e=typeof e>"u"?!0:e,e){var r=gpe();setTimeout(jU,r)}else jU()},jU=function(){try{mpe()}catch(e){B0.getLogger().warn("Encountered unexpected exception when fetching sampling rules: "+e)}},mpe=function(){var e=Math.floor(new Date().getTime()/1e3);fpe.fetchSamplingRules(function(r,n){r?B0.getLogger().warn("Failed to retrieve sampling rules from X-Ray service:",r):n.length!==0&&(UU.loadRules(n),UU.timestamp(e),B0.getLogger().info("Successfully refreshed centralized sampling rule cache."))})},gpe=function(){return Math.random()*5};HU.exports=hpe});var GU=_((G1e,WU)=>{"use strict";var ype=j0(),Epe=F0(),H0=pg(),hg=Ge(),VU=10*1e3,zU={interval:VU,start:function(){this.poller=setInterval(_pe,VU+wpe()),this.poller.unref()}},_pe=function(){try{Spe()}catch(e){hg.getLogger().warn("Encountered unexpected exception when fetching sampling targets: "+e)}},Spe=function(){var e=vpe();e&&e.length>0&&Epe.fetchTargets(e,function(r,n,s){if(r){hg.getLogger().warn("Failed to retrieve sampling targets from X-Ray service:",r);return}H0.loadTargets(n),s>H0.getLastUpdated()&&(hg.getLogger().info("Performing out-of-band sampling rule polling to fetch updated rules."),ype.start()),hg.getLogger().info("Successfully reported rule statistics to get new sampling quota.")})},vpe=function(){var e=H0.getRules(),r=[];return e.forEach(function(n){n.everMatched()&&n.timeToReport()&&r.push(n)}),r},wpe=function(){return Math.random()/zU.interval};WU.exports=zU});var XU=_((K1e,KU)=>{"use strict";var V0=Ge(),bpe=require("util"),Rpe=ri(),Cpe={localSampler:$0(),rulePoller:j0(),targetPoller:GU(),ruleCache:pg(),started:!1,shouldSample:function(e){try{this.started||this.start(),e.serviceType||(e.serviceType=Rpe.origin);var r=Math.floor(new Date().getTime()/1e3),n=this.ruleCache.getMatchedRule(e,r);return n?(V0.getLogger().debug(bpe.format("Rule %s is matched.",n.getName())),Tpe(n,r)):(V0.getLogger().info("No effective centralized sampling rule match. Fallback to local rules."),this.localSampler.shouldSample(e))}catch(s){V0.getLogger().error("Unhandled exception by the SDK during making sampling decisions: "+s)}},setLocalRules:function(e){this.localSampler.setLocalRules(e)},start:function(){this.started||(this.rulePoller.start(),this.targetPoller.start(),this.started=!0)}},Tpe=function(e,r){e.incrementRequestCount();var n=e.getReservoir(),s=!0,i=n.borrowOrTake(r,e.canBorrow());return i==="borrow"?e.incrementBorrowCount():i==="take"||Math.random()<=e.getRate()?e.incrementSampledCount():s=!1,s?e.getName():!1};KU.exports=Cpe});var W0=_((X1e,QU)=>{"use strict";var Ape=Cl(),xpe=k0(),Ppe=Ge(),Ipe=Mt(),Npe=Mt().wildcardMatch,Ope=Mt().processTraceData,z0="x-amzn-trace-id",Dpe=!!process.env.AWS_XRAY_TRACING_NAME,Lpe={defaultName:process.env.AWS_XRAY_TRACING_NAME,dynamicNaming:!1,hostPattern:null,sampler:XU(),enableDynamicNaming:function(t){if(this.dynamicNaming=!0,t&&typeof t!="string")throw new Error("Host pattern must be a string.");this.hostPattern=t||null},processHeaders:function(e){var r={};return e&&e.headers&&e.headers[z0]&&(r=Ope(e.headers[z0])),r},resolveName:function(e){var r;return this.dynamicNaming&&e?r=this.hostPattern?Npe(this.hostPattern,e)?e:this.defaultName:e:r=this.defaultName,r},resolveSampling:function(e,r,n){var s;if(e.sampled==="1")s=!0;else if(e.sampled==="0")s=!1;else{var i={host:n.req.headers.host,httpMethod:n.req.method,urlPath:n.req.url,serviceName:r.name};s=this.sampler.shouldSample(i),(s instanceof String||typeof s=="string")&&(r.setMatchedSamplingRule(s),s=!0)}e.sampled==="?"&&n.header&&n.header(z0,"Root="+e.root+";Sampled="+(s?"1":"0")),s||(r.notTraced=!0)},setDefaultName:function(e){Dpe||(this.defaultName=e)},disableCentralizedSampling:function(){this.sampler=$0()},setSamplingRules:function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local sampling rules file, or supply an object containing the rules.");this.sampler.setLocalRules(e)},middlewareLog:function(e,r,n){Ppe.getLogger().debug(e+": { url: "+r+", name: "+n.name+", trace_id: "+n.trace_id+", id: "+n.id+", sampled: "+!n.notTraced+" }")},traceRequestResponseCycle:function(e,r){var n=this.processHeaders(e),s=this.resolveName(e.headers.host),i=new Ape(s,n.root,n.parent);r.req||(r.req=e),this.resolveSampling(n,i,r),i.addIncomingRequestData(new xpe(e)),this.middlewareLog("Starting middleware segment",e.url,i);var o=this.middlewareLog,a=!1,c=function(){if(a)return;a=!0,r.statusCode===429&&i.addThrottleFlag();let u=Ipe.getCauseTypeFromHttpStatus(r.statusCode);u&&(i[u]=!0),i.http.close(r),i.close(),o("Closed middleware segment successfully",e.url,i)};return r.on("finish",c),r.on("close",c),i}};QU.exports=Lpe});var YU=_(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.InvokeStore=void 0;var kpe=require("async_hooks"),G0=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";G0||(globalThis.awslambda=globalThis.awslambda||{});var Mpe={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},xl=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(xl,"storage",new kpe.AsyncLocalStorage),f(xl,"PROTECTED_KEYS",Mpe);var mg;!G0&&globalThis.awslambda?.InvokeStore?mg=globalThis.awslambda.InvokeStore:(mg=xl,!G0&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=mg));gg.InvokeStore=mg});var eB=_((J1e,ZU)=>{"use strict";var yg=ii(),qpe=W0(),K0=Mt().LambdaUtils,$pe=Cl(),Fpe=og(),Upe=ri(),Q0=Ge(),JU=cg(),{InvokeStore:Bpe}=YU(),X0=null;ZU.exports.init=function(){yg.enableManualMode=function(){Q0.getLogger().warn("AWS Lambda does not support AWS X-Ray manual mode.")},Fpe.disableReusableSocket(),Upe.setStreamingThreshold(0),Q0.getLogger().info("Disabling centralized sampling in Lambda environment."),qpe.disableCentralizedSampling();var e=yg.getNamespace();e.enter(e.createContext()),yg.setSegment(jpe())};var jpe=function(){var e=new $pe("facade"),r=["addNewSubsegment","addSubsegment","removeSubsegment","toString","addSubsegmentWithoutSampling","addNewSubsegmentWithoutSampling"],n=["incrementCounter","decrementCounter","isClosed","close","format","flush"],s=process.env._X_AMZN_TRACE_ID;for(var i in e)typeof e[i]=="function"&&r.indexOf(i)===-1&&(n.indexOf(i)===-1?e[i]=function(){var o=i;return function(){Q0.getLogger().warn('Function "'+o+'" cannot be called on an AWS Lambda segment. Please use a subsegment to record data.')}}():e[i]=function(){});return e.trace_id=JU.Invalid().toString(),e.isClosed=function(){return!0},e.in_progress=!1,e.counter=1,e.notTraced=!0,e.facade=!0,e.reset=function(){this.trace_id=JU.Invalid().toString(),this.id="00000000",delete this.subsegments,this.notTraced=!0},e.resolveLambdaTraceData=function(){let a=Bpe.getXRayTraceId(),c=process.env._X_AMZN_TRACE_ID;var u=a??c;u?u!=X0&&(this.reset(),K0.populateTraceData(e,u)&&(X0=u)):(this.reset(),yg.contextMissingStrategy.contextMissing("Missing AWS Lambda trace data for X-Ray. Ensure Active Tracing is enabled and no subsegments are created outside the function handler."))},K0.validTraceData(s)&&K0.populateTraceData(e,s)&&(X0=s),e}});var tB=_((Z1e,Hpe)=>{Hpe.exports={name:"aws-xray-sdk-core",version:"3.11.0",description:"AWS X-Ray SDK for Javascript",author:"Amazon Web Services",contributors:["Sandra McMullen <mcmuls@amazon.com>","William Armiros <armiros@amazon.com>","Moritz Onken <onken@netcubed.de>"],files:["dist/lib/**/*","LICENSE","README.md"],main:"dist/lib/index.js",types:"dist/lib/index.d.ts",engines:{node:">= 14.x"},directories:{test:"test"},"//":"@types/cls-hooked is exposed in API so must be in dependencies, not devDependencies",dependencies:{"@aws-sdk/types":"^3.4.1","@aws/lambda-invoke-store":"^0.0.1","@smithy/service-error-classification":"^2.0.4","@types/cls-hooked":"^4.3.3","atomic-batcher":"^1.0.2","cls-hooked":"^4.2.2",semver:"^7.5.3"},scripts:{prepare:"npm run compile",compile:"tsc && npm run copy-lib && npm run copy-test","copy-lib":"find lib -type f \\( -name '*.d.ts' -o -name '*.json' \\) | xargs -I % ../../scripts/cp-with-structure.sh % dist","copy-test":"find test -name '*.json' | xargs -I % ../../scripts/cp-with-structure.sh % dist",lint:"eslint .","lint:fix":"eslint . --fix",test:"npm run compile && mocha --recursive ./dist/test/ -R spec && tsd && mocha --recursive ./dist/test_async/ -R spec","test-d":"tsd","test-async":"npm run compile && mocha --recursive ./dist/test_async/ -R spec",clean:"rm -rf dist && rm -rf node_modules",testcov:"nyc npm run test",reportcov:"nyc report --reporter=text-lcov > coverage.lcov"},keywords:["amazon","api","aws","core","xray","x-ray","x ray"],license:"Apache-2.0",repository:"https://github.com/aws/aws-xray-sdk-node/tree/master/packages/core",gitHead:"4e6f43ed3c4686418c2139d4b86ab5513e0ca8ed"}});var sB=_((eke,nB)=>{"use strict";var Y0=require("http"),rB={METADATA_TIMEOUT:1e3,getPluginMetadata:function(t,e){var s=5,i=function(){var o=Y0.__request?Y0.__request:Y0.request,a=o(t,function(c){var u="";c.on("data",function(l){u+=l}),c.on("end",function(){if(this.statusCode===200||this.statusCode===300){try{u=JSON.parse(u)}catch(l){e(l);return}e(null,u)}else s>0&&Math.floor(this.statusCode/100)===5?(s--,setTimeout(i,250)):e(new Error(`Failed to retrieve metadata with options: ${t}`))})});a.on("error",function(c){e(c)}),a.on("timeout",function(){a.abort()}),a.setTimeout(rB.METADATA_TIMEOUT),a.end()};i()}};nB.exports=rB});var uB=_((tke,cB)=>{"use strict";var oB=sB(),iB=Ge(),J0=require("http"),Vpe={getData:function(t){let e="/latest/dynamic/instance-identity/document";function r(n){let s=aB(e,"GET",n?{"X-aws-ec2-metadata-token":n}:{});oB.getPluginMetadata(s,function(i,o){if(i||!o){iB.getLogger().error("Error loading EC2 plugin metadata: ",i?i.toString():"Could not retrieve data from IMDS."),t();return}let a={ec2:{instance_id:o.instanceId,availability_zone:o.availabilityZone,instance_size:o.instanceType,ami_id:o.imageId}};t(a)})}zpe(function(n){n===null&&iB.getLogger().debug("EC2Plugin failed to get token from IMDSv2. Falling back to IMDSv1."),r(n)})},originName:"AWS::EC2::Instance"};function zpe(t){let e=J0.__request?J0.__request:J0.request,s=aB("/latest/api/token","PUT",{"X-aws-ec2-metadata-token-ttl-seconds":60}),i=e(s,function(o){let a="";o.on("data",function(c){a+=c}),o.on("end",function(){this.statusCode===200||this.statusCode===300?t(a):t(null)})});i.on("error",function(){t(null)}),i.on("timeout",function(){i.abort(),t(null)}),i.setTimeout(oB.METADATA_TIMEOUT),i.end()}function aB(t,e,r){return e||(e="GET"),r||(r={}),{host:"169.254.169.254",path:t,method:e,headers:r}}cB.exports=Vpe});var dB=_((rke,lB)=>{"use strict";var Wpe=require("os"),Gpe={getData:function(t){t({ecs:{container:Wpe.hostname()}})},originName:"AWS::ECS::Container"};lB.exports=Gpe});var pB=_((nke,fB)=>{"use strict";var Kpe=require("fs"),Xpe=Ge(),Qpe="/var/elasticbeanstalk/xray/environment.conf",Ype={getData:function(t){Kpe.readFile(Qpe,"utf8",function(e,r){if(e)Xpe.getLogger().error("Error loading Elastic Beanstalk plugin:",e.stack),t();else{var n=JSON.parse(r),s={elastic_beanstalk:{environment:n.environment_name,version_label:n.version_label,deployment_id:n.deployment_id}};t(s)}})},originName:"AWS::ElasticBeanstalk::Environment"};fB.exports=Ype});var hB=_((ske,Jpe)=>{Jpe.exports={services:{dynamodb:{operations:{batchGetItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity"]},batchWriteItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},createTable:{request_parameters:["GlobalSecondaryIndexes","LocalSecondaryIndexes","ProvisionedThroughput","TableName"]},deleteItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},deleteTable:{request_parameters:["TableName"]},describeTable:{request_parameters:["TableName"]},getItem:{request_parameters:["ConsistentRead","ProjectionExpression","TableName"],response_parameters:["ConsumedCapacity"]},listTables:{request_parameters:["ExclusiveStartTableName","Limit"],response_descriptors:{TableNames:{list:!0,get_count:!0,rename_to:"table_count"}}},putItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},query:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","ScanIndexForward","Select","TableName"],response_parameters:["ConsumedCapacity"]},scan:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","Segment","Select","TableName","TotalSegments"],response_parameters:["ConsumedCapacity","Count","ScannedCount"]},updateItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},updateTable:{request_parameters:["AttributeDefinitions","GlobalSecondaryIndexUpdates","ProvisionedThroughput","TableName"]}}},sqs:{operations:{addPermission:{request_parameters:["Label","QueueUrl"]},changeMessageVisibility:{request_parameters:["QueueUrl","VisibilityTimeout"]},changeMessageVisibilityBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},createQueue:{request_parameters:["Attributes","QueueName"]},deleteMessage:{request_parameters:["QueueUrl"]},deleteMessageBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},deleteQueue:{request_parameters:["QueueUrl"]},getQueueAttributes:{request_parameters:["QueueUrl"],response_parameters:["Attributes"]},getQueueUrl:{request_parameters:["QueueName","QueueOwnerAWSAccountId"],response_parameters:["QueueUrl"]},listDeadLetterSourceQueues:{request_parameters:["QueueUrl"],response_parameters:["QueueUrls"]},listQueues:{request_parameters:["QueueNamePrefix"],response_descriptors:{QueueUrls:{list:!0,get_count:!0,rename_to:"queue_count"}}},purgeQueue:{request_parameters:["QueueUrl"]},receiveMessage:{request_parameters:["AttributeNames","MaxNumberOfMessages","MessageAttributeNames","QueueUrl","VisibilityTimeout","WaitTimeSeconds"],response_descriptors:{Messages:{list:!0,get_count:!0,rename_to:"message_count"}}},removePermission:{request_parameters:["QueueUrl"]},sendMessage:{request_parameters:["DelaySeconds","QueueUrl"],request_descriptors:{MessageAttributes:{get_keys:!0,rename_to:"message_attribute_names"}},response_parameters:["MessageId"]},sendMessageBatch:{request_parameters:["QueueUrl"],request_descriptors:{Entries:{list:!0,get_count:!0,rename_to:"message_count"}},response_descriptors:{Failed:{list:!0,get_count:!0,rename_to:"failed_count"},Successful:{list:!0,get_count:!0,rename_to:"successful_count"}}},setQueueAttributes:{request_parameters:["QueueUrl"],request_descriptors:{Attributes:{get_keys:!0,rename_to:"attribute_names"}}}}},sns:{operations:{publish:{request_parameters:["TopicArn"]},publishBatch:{request_parameters:["TopicArn"]}}},lambda:{operations:{invoke:{request_parameters:["FunctionName","InvocationType","LogType","Qualifier"],response_parameters:["FunctionError","StatusCode"]},invokeAsync:{request_parameters:["FunctionName"],response_parameters:["Status"]}}},s3:{operations:{abortMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},completeMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},copyObject:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjects:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLocation:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTorrent:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketAnalyticsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketInventoryConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketMetricsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listMultipartUploads:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectVersions:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjects:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectsV2:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listParts:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObject:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},restoreObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPart:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPartCopy:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}}}},sagemakerruntime:{operations:{invokeEndpoint:{request_parameters:["EndpointName"]}}}}}});var SB=_((ike,_B)=>{"use strict";var yB=require("fs"),Ka=Ge(),Zpe=hB(),Eg={REQ_DESC:"request_descriptors",REQ_PARAMS:"request_parameters",RES_DESC:"response_descriptors",RES_PARAMS:"response_parameters"};function Sg(t){this.init(t)}Sg.prototype.init=function(e){e?typeof e=="string"?(Ka.getLogger().info("Using custom AWS whitelist file: "+e),this.services=_g(JSON.parse(yB.readFileSync(e,"utf8")))):(Ka.getLogger().info("Using custom AWS whitelist source."),this.services=_g(e)):this.services=Zpe.services};Sg.prototype.append=function(e){var r={};typeof e=="string"?(Ka.getLogger().info("Appending AWS whitelist with custom file: "+e),r=_g(JSON.parse(yB.readFileSync(e,"utf8")))):(Ka.getLogger().info("Appending AWS whitelist with a custom source."),r=_g(e));for(var n in r)this.services[n]=r[n]};Sg.prototype.capture=function(e,r){var n=r.request.operation,s=this.services[e]!==void 0?this.services[e].operations[n]:null;if(s===null){Ka.getLogger().debug('Call "'+e+"."+n+'" is not whitelisted for additional data capturing. Ignoring.');return}var i={};for(var o in s){var a=s[o];o===Eg.REQ_PARAMS?mB(a,r.request.params,i):o===Eg.REQ_DESC?gB(a,r.request.params,i):o===Eg.RES_PARAMS?r.data&&mB(a,r.data,i):o===Eg.RES_DESC?r.data&&gB(a,r.data,i):Ka.getLogger().error('Unknown parameter type "'+o+'". Must be "request_descriptors", "response_descriptors", "request_parameters" or "response_parameters".')}return i};function mB(t,e,r){t.forEach(function(n){if(typeof e[n]<"u"){var s=EB(n);this[s]=e[n]}},r)}function gB(t,e,r){for(var n in t){var s=t[n];if(typeof e[n]<"u"){var i;if(s.list&&s.get_count?i=e[n]?e[n].length:0:i=s.get_keys===!0?Object.keys(e[n]):e[n],typeof s.rename_to=="string")r[s.rename_to]=i;else{var o=EB(n);r[o]=i}}}}function EB(t){return t==="IPAddress"?"ip_address":t.split(/(?=[A-Z])/).join("_").toLowerCase()}function _g(t){var e=t;if(e.services===void 0)throw new Error('Document formatting is incorrect. Expecting "services" param.');return e.services}_B.exports=Sg});var Pl=_((oke,vg)=>{"use strict";var vB=SB(),Z0=new vB;function eb(t,e){this.init(t,e)}eb.prototype.init=function(e,r){this.operation=rhe(e.request.operation)||"",e&&e.request&&e.request.httpRequest&&e.request.httpRequest.region&&(this.region=e.request.httpRequest.region),e&&e.requestId&&(this.request_id=e.requestId),this.retries=e.retryCount||0,e.extendedRequestId&&r&&r.toLowerCase()==="s3"&&(this.id_2=e.extendedRequestId),r&&this.addData(Z0.capture(r.toLowerCase(),e))};eb.prototype.addData=function(e){for(var r in e)this[r]=e[r]};var ehe=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");Z0=new vB(e)},the=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");Z0.append(e)};function rhe(t){if(t)return t.charAt(0).toUpperCase()+t.slice(1)}vg.exports=eb;vg.exports.appendAWSWhitelist=the;vg.exports.setAWSWhitelist=ehe});var bg=_((ake,wg)=>{"use strict";var Ji=ii(),Il=Ge(),wB=function(e,r,n){tb(e,r);var s,i,o=Ji.resolveSegment(n);if(!o)return Il.getLogger().warn("Failed to capture function."),r();s=o.addNewSubsegment(e),i=bB(r,s);try{let a=i(s);return s.close(),a}catch(a){throw s.close(a),a}},nhe=function(e,r,n){tb(e,r);var s,i,o=Ji.resolveSegment(n);if(!o)return Il.getLogger().warn("Failed to capture async function."),r();s=o.addNewSubsegment(e),i=bB(r,s);try{return i(s)}catch(a){throw s.close(a),a}},she=function(e,r,n){tb(e,r);var s=Ji.resolveSegment(n);return s?(s.incrementCounter(),function(){var i=Ji.resolveSegment(n),o=Array.prototype.slice.call(arguments);wB(e,r.bind.apply(r,[null].concat(o)),i),s.decrementCounter()}.bind(this)):(Il.getLogger().warn("Failed to capture callback function."),r)};function bB(t,e){var r;if(Ji.isAutomaticMode()){var n=Ji.getNamespace(),s=function(){var i;return n.run(function(){Ji.setSegment(e),i=t(e)}),i};r=s}else r=t;return r}function tb(t,e){var r;if(!t||typeof t!="string")throw r='Param "name" must be a non-empty string.',Il.getLogger().error(r),new Error(r);if(typeof e!="function")throw r='Param "fcn" must be a function.',Il.getLogger().error(r),new Error(r)}wg.exports.captureFunc=wB;wg.exports.captureAsyncFunc=nhe;wg.exports.captureCallbackFunc=she});var Nl=_((cke,RB)=>{"use strict";var ihe="2.0.0",ohe=Number.MAX_SAFE_INTEGER||9007199254740991,ahe=16,che=250,uhe=["major","premajor","minor","preminor","patch","prepatch","prerelease"];RB.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:ahe,MAX_SAFE_BUILD_LENGTH:che,MAX_SAFE_INTEGER:ohe,RELEASE_TYPES:uhe,SEMVER_SPEC_VERSION:ihe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ol=_((uke,CB)=>{"use strict";var lhe=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};CB.exports=lhe});var Xa=_((bn,TB)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:rb,MAX_SAFE_BUILD_LENGTH:dhe,MAX_LENGTH:fhe}=Nl(),phe=Ol();bn=TB.exports={};var hhe=bn.re=[],mhe=bn.safeRe=[],B=bn.src=[],ghe=bn.safeSrc=[],j=bn.t={},yhe=0,nb="[a-zA-Z0-9-]",Ehe=[["\\s",1],["\\d",fhe],[nb,dhe]],_he=t=>{for(let[e,r]of Ehe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ne=(t,e,r)=>{let n=_he(e),s=yhe++;phe(t,s,e),j[t]=s,B[s]=e,ghe[s]=n,hhe[s]=new RegExp(e,r?"g":void 0),mhe[s]=new RegExp(n,r?"g":void 0)};ne("NUMERICIDENTIFIER","0|[1-9]\\d*");ne("NUMERICIDENTIFIERLOOSE","\\d+");ne("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${nb}*`);ne("MAINVERSION",`(${B[j.NUMERICIDENTIFIER]})\\.(${B[j.NUMERICIDENTIFIER]})\\.(${B[j.NUMERICIDENTIFIER]})`);ne("MAINVERSIONLOOSE",`(${B[j.NUMERICIDENTIFIERLOOSE]})\\.(${B[j.NUMERICIDENTIFIERLOOSE]})\\.(${B[j.NUMERICIDENTIFIERLOOSE]})`);ne("PRERELEASEIDENTIFIER",`(?:${B[j.NONNUMERICIDENTIFIER]}|${B[j.NUMERICIDENTIFIER]})`);ne("PRERELEASEIDENTIFIERLOOSE",`(?:${B[j.NONNUMERICIDENTIFIER]}|${B[j.NUMERICIDENTIFIERLOOSE]})`);ne("PRERELEASE",`(?:-(${B[j.PRERELEASEIDENTIFIER]}(?:\\.${B[j.PRERELEASEIDENTIFIER]})*))`);ne("PRERELEASELOOSE",`(?:-?(${B[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[j.PRERELEASEIDENTIFIERLOOSE]})*))`);ne("BUILDIDENTIFIER",`${nb}+`);ne("BUILD",`(?:\\+(${B[j.BUILDIDENTIFIER]}(?:\\.${B[j.BUILDIDENTIFIER]})*))`);ne("FULLPLAIN",`v?${B[j.MAINVERSION]}${B[j.PRERELEASE]}?${B[j.BUILD]}?`);ne("FULL",`^${B[j.FULLPLAIN]}$`);ne("LOOSEPLAIN",`[v=\\s]*${B[j.MAINVERSIONLOOSE]}${B[j.PRERELEASELOOSE]}?${B[j.BUILD]}?`);ne("LOOSE",`^${B[j.LOOSEPLAIN]}$`);ne("GTLT","((?:<|>)?=?)");ne("XRANGEIDENTIFIERLOOSE",`${B[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ne("XRANGEIDENTIFIER",`${B[j.NUMERICIDENTIFIER]}|x|X|\\*`);ne("XRANGEPLAIN",`[v=\\s]*(${B[j.XRANGEIDENTIFIER]})(?:\\.(${B[j.XRANGEIDENTIFIER]})(?:\\.(${B[j.XRANGEIDENTIFIER]})(?:${B[j.PRERELEASE]})?${B[j.BUILD]}?)?)?`);ne("XRANGEPLAINLOOSE",`[v=\\s]*(${B[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[j.XRANGEIDENTIFIERLOOSE]})(?:${B[j.PRERELEASELOOSE]})?${B[j.BUILD]}?)?)?`);ne("XRANGE",`^${B[j.GTLT]}\\s*${B[j.XRANGEPLAIN]}$`);ne("XRANGELOOSE",`^${B[j.GTLT]}\\s*${B[j.XRANGEPLAINLOOSE]}$`);ne("COERCEPLAIN",`(^|[^\\d])(\\d{1,${rb}})(?:\\.(\\d{1,${rb}}))?(?:\\.(\\d{1,${rb}}))?`);ne("COERCE",`${B[j.COERCEPLAIN]}(?:$|[^\\d])`);ne("COERCEFULL",B[j.COERCEPLAIN]+`(?:${B[j.PRERELEASE]})?(?:${B[j.BUILD]})?(?:$|[^\\d])`);ne("COERCERTL",B[j.COERCE],!0);ne("COERCERTLFULL",B[j.COERCEFULL],!0);ne("LONETILDE","(?:~>?)");ne("TILDETRIM",`(\\s*)${B[j.LONETILDE]}\\s+`,!0);bn.tildeTrimReplace="$1~";ne("TILDE",`^${B[j.LONETILDE]}${B[j.XRANGEPLAIN]}$`);ne("TILDELOOSE",`^${B[j.LONETILDE]}${B[j.XRANGEPLAINLOOSE]}$`);ne("LONECARET","(?:\\^)");ne("CARETTRIM",`(\\s*)${B[j.LONECARET]}\\s+`,!0);bn.caretTrimReplace="$1^";ne("CARET",`^${B[j.LONECARET]}${B[j.XRANGEPLAIN]}$`);ne("CARETLOOSE",`^${B[j.LONECARET]}${B[j.XRANGEPLAINLOOSE]}$`);ne("COMPARATORLOOSE",`^${B[j.GTLT]}\\s*(${B[j.LOOSEPLAIN]})$|^$`);ne("COMPARATOR",`^${B[j.GTLT]}\\s*(${B[j.FULLPLAIN]})$|^$`);ne("COMPARATORTRIM",`(\\s*)${B[j.GTLT]}\\s*(${B[j.LOOSEPLAIN]}|${B[j.XRANGEPLAIN]})`,!0);bn.comparatorTrimReplace="$1$2$3";ne("HYPHENRANGE",`^\\s*(${B[j.XRANGEPLAIN]})\\s+-\\s+(${B[j.XRANGEPLAIN]})\\s*$`);ne("HYPHENRANGELOOSE",`^\\s*(${B[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[j.XRANGEPLAINLOOSE]})\\s*$`);ne("STAR","(<|>)?=?\\s*\\*");ne("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ne("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Rg=_((lke,AB)=>{"use strict";var She=Object.freeze({loose:!0}),vhe=Object.freeze({}),whe=t=>t?typeof t!="object"?She:t:vhe;AB.exports=whe});var sb=_((dke,IB)=>{"use strict";var xB=/^[0-9]+$/,PB=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=xB.test(t),n=xB.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},bhe=(t,e)=>PB(e,t);IB.exports={compareIdentifiers:PB,rcompareIdentifiers:bhe}});var $t=_((fke,OB)=>{"use strict";var Cg=Ol(),{MAX_LENGTH:NB,MAX_SAFE_INTEGER:Tg}=Nl(),{safeRe:Ag,t:xg}=Xa(),Rhe=Rg(),{compareIdentifiers:ib}=sb(),ob=class t{constructor(e,r){if(r=Rhe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>NB)throw new TypeError(`version is longer than ${NB} characters`);Cg("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Ag[xg.LOOSE]:Ag[xg.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Tg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Tg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Tg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Tg)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Cg("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(Cg("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ib(n,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(Cg("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return ib(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Ag[xg.PRERELEASELOOSE]:Ag[xg.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),ib(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};OB.exports=ob});var Zi=_((pke,LB)=>{"use strict";var DB=$t(),Che=(t,e,r=!1)=>{if(t instanceof DB)return t;try{return new DB(t,e)}catch(n){if(!r)return null;throw n}};LB.exports=Che});var MB=_((hke,kB)=>{"use strict";var The=Zi(),Ahe=(t,e)=>{let r=The(t,e);return r?r.version:null};kB.exports=Ahe});var $B=_((mke,qB)=>{"use strict";var xhe=Zi(),Phe=(t,e)=>{let r=xhe(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};qB.exports=Phe});var BB=_((gke,UB)=>{"use strict";var FB=$t(),Ihe=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new FB(t instanceof FB?t.version:t,r).inc(e,n,s).version}catch{return null}};UB.exports=Ihe});var VB=_((yke,HB)=>{"use strict";var jB=Zi(),Nhe=(t,e)=>{let r=jB(t,null,!0),n=jB(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};HB.exports=Nhe});var WB=_((Eke,zB)=>{"use strict";var Ohe=$t(),Dhe=(t,e)=>new Ohe(t,e).major;zB.exports=Dhe});var KB=_((_ke,GB)=>{"use strict";var Lhe=$t(),khe=(t,e)=>new Lhe(t,e).minor;GB.exports=khe});var QB=_((Ske,XB)=>{"use strict";var Mhe=$t(),qhe=(t,e)=>new Mhe(t,e).patch;XB.exports=qhe});var JB=_((vke,YB)=>{"use strict";var $he=Zi(),Fhe=(t,e)=>{let r=$he(t,e);return r&&r.prerelease.length?r.prerelease:null};YB.exports=Fhe});var Dr=_((wke,e2)=>{"use strict";var ZB=$t(),Uhe=(t,e,r)=>new ZB(t,r).compare(new ZB(e,r));e2.exports=Uhe});var r2=_((bke,t2)=>{"use strict";var Bhe=Dr(),jhe=(t,e,r)=>Bhe(e,t,r);t2.exports=jhe});var s2=_((Rke,n2)=>{"use strict";var Hhe=Dr(),Vhe=(t,e)=>Hhe(t,e,!0);n2.exports=Vhe});var Pg=_((Cke,o2)=>{"use strict";var i2=$t(),zhe=(t,e,r)=>{let n=new i2(t,r),s=new i2(e,r);return n.compare(s)||n.compareBuild(s)};o2.exports=zhe});var c2=_((Tke,a2)=>{"use strict";var Whe=Pg(),Ghe=(t,e)=>t.sort((r,n)=>Whe(r,n,e));a2.exports=Ghe});var l2=_((Ake,u2)=>{"use strict";var Khe=Pg(),Xhe=(t,e)=>t.sort((r,n)=>Khe(n,r,e));u2.exports=Xhe});var Dl=_((xke,d2)=>{"use strict";var Qhe=Dr(),Yhe=(t,e,r)=>Qhe(t,e,r)>0;d2.exports=Yhe});var Ig=_((Pke,f2)=>{"use strict";var Jhe=Dr(),Zhe=(t,e,r)=>Jhe(t,e,r)<0;f2.exports=Zhe});var ab=_((Ike,p2)=>{"use strict";var eme=Dr(),tme=(t,e,r)=>eme(t,e,r)===0;p2.exports=tme});var cb=_((Nke,h2)=>{"use strict";var rme=Dr(),nme=(t,e,r)=>rme(t,e,r)!==0;h2.exports=nme});var Ng=_((Oke,m2)=>{"use strict";var sme=Dr(),ime=(t,e,r)=>sme(t,e,r)>=0;m2.exports=ime});var Og=_((Dke,g2)=>{"use strict";var ome=Dr(),ame=(t,e,r)=>ome(t,e,r)<=0;g2.exports=ame});var ub=_((Lke,y2)=>{"use strict";var cme=ab(),ume=cb(),lme=Dl(),dme=Ng(),fme=Ig(),pme=Og(),hme=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return cme(t,r,n);case"!=":return ume(t,r,n);case">":return lme(t,r,n);case">=":return dme(t,r,n);case"<":return fme(t,r,n);case"<=":return pme(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};y2.exports=hme});var _2=_((kke,E2)=>{"use strict";var mme=$t(),gme=Zi(),{safeRe:Dg,t:Lg}=Xa(),yme=(t,e)=>{if(t instanceof mme)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Dg[Lg.COERCEFULL]:Dg[Lg.COERCE]);else{let c=e.includePrerelease?Dg[Lg.COERCERTLFULL]:Dg[Lg.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return gme(`${n}.${s}.${i}${o}${a}`,e)};E2.exports=yme});var v2=_((Mke,S2)=>{"use strict";var lb=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};S2.exports=lb});var Lr=_((qke,C2)=>{"use strict";var Eme=/\s+/g,db=class t{constructor(e,r){if(r=Sme(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof fb)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(Eme," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!b2(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Ame(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&Cme)|(this.options.loose&&Tme))+":"+e,s=w2.get(n);if(s)return s;let i=this.options.loose,o=i?Zt[Ft.HYPHENRANGELOOSE]:Zt[Ft.HYPHENRANGE];e=e.replace(o,qme(this.options.includePrerelease)),Be("hyphen replace",e),e=e.replace(Zt[Ft.COMPARATORTRIM],wme),Be("comparator trim",e),e=e.replace(Zt[Ft.TILDETRIM],bme),Be("tilde trim",e),e=e.replace(Zt[Ft.CARETTRIM],Rme),Be("caret trim",e);let a=e.split(" ").map(d=>xme(d,this.options)).join(" ").split(/\s+/).map(d=>Mme(d,this.options));i&&(a=a.filter(d=>(Be("loose invalid filter",d,this.options),!!d.match(Zt[Ft.COMPARATORLOOSE])))),Be("range list",a);let c=new Map,u=a.map(d=>new fb(d,this.options));for(let d of u){if(b2(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return w2.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>R2(n,r)&&e.set.some(s=>R2(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new vme(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if($me(this.set[r],e,this.options))return!0;return!1}};C2.exports=db;var _me=v2(),w2=new _me,Sme=Rg(),fb=Ll(),Be=Ol(),vme=$t(),{safeRe:Zt,t:Ft,comparatorTrimReplace:wme,tildeTrimReplace:bme,caretTrimReplace:Rme}=Xa(),{FLAG_INCLUDE_PRERELEASE:Cme,FLAG_LOOSE:Tme}=Nl(),b2=t=>t.value==="<0.0.0-0",Ame=t=>t.value==="",R2=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},xme=(t,e)=>(t=t.replace(Zt[Ft.BUILD],""),Be("comp",t,e),t=Nme(t,e),Be("caret",t),t=Pme(t,e),Be("tildes",t),t=Dme(t,e),Be("xrange",t),t=kme(t,e),Be("stars",t),t),er=t=>!t||t.toLowerCase()==="x"||t==="*",Pme=(t,e)=>t.trim().split(/\s+/).map(r=>Ime(r,e)).join(" "),Ime=(t,e)=>{let r=e.loose?Zt[Ft.TILDELOOSE]:Zt[Ft.TILDE];return t.replace(r,(n,s,i,o,a)=>{Be("tilde",t,n,s,i,o,a);let c;return er(s)?c="":er(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:er(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Be("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Be("tilde return",c),c})},Nme=(t,e)=>t.trim().split(/\s+/).map(r=>Ome(r,e)).join(" "),Ome=(t,e)=>{Be("caret",t,e);let r=e.loose?Zt[Ft.CARETLOOSE]:Zt[Ft.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,c)=>{Be("caret",t,s,i,o,a,c);let u;return er(i)?u="":er(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:er(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(Be("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(Be("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Be("caret return",u),u})},Dme=(t,e)=>(Be("replaceXRanges",t,e),t.split(/\s+/).map(r=>Lme(r,e)).join(" ")),Lme=(t,e)=>{t=t.trim();let r=e.loose?Zt[Ft.XRANGELOOSE]:Zt[Ft.XRANGE];return t.replace(r,(n,s,i,o,a,c)=>{Be("xRange",t,n,s,i,o,a,c);let u=er(i),l=u||er(o),d=l||er(a),m=d;return s==="="&&m&&(s=""),c=e.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&m?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),Be("xRange return",n),n})},kme=(t,e)=>(Be("replaceStars",t,e),t.trim().replace(Zt[Ft.STAR],"")),Mme=(t,e)=>(Be("replaceGTE0",t,e),t.trim().replace(Zt[e.includePrerelease?Ft.GTE0PRE:Ft.GTE0],"")),qme=t=>(e,r,n,s,i,o,a,c,u,l,d,m)=>(er(n)?r="":er(s)?r=`>=${n}.0.0${t?"-0":""}`:er(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,er(u)?c="":er(l)?c=`<${+u+1}.0.0-0`:er(d)?c=`<${u}.${+l+1}.0-0`:m?c=`<=${u}.${l}.${d}-${m}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),$me=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Be(t[n].semver),t[n].semver!==fb.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Ll=_(($ke,N2)=>{"use strict";var kl=Symbol("SemVer ANY"),mb=class t{static get ANY(){return kl}constructor(e,r){if(r=T2(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),hb("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===kl?this.value="":this.value=this.operator+this.semver.version,hb("comp",this)}parse(e){let r=this.options.loose?A2[x2.COMPARATORLOOSE]:A2[x2.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new P2(n[2],this.options.loose):this.semver=kl}toString(){return this.value}test(e){if(hb("Comparator.test",e,this.options.loose),this.semver===kl||e===kl)return!0;if(typeof e=="string")try{e=new P2(e,this.options)}catch{return!1}return pb(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new I2(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new I2(this.value,r).test(e.semver):(r=T2(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||pb(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||pb(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};N2.exports=mb;var T2=Rg(),{safeRe:A2,t:x2}=Xa(),pb=ub(),hb=Ol(),P2=$t(),I2=Lr()});var Ml=_((Fke,O2)=>{"use strict";var Fme=Lr(),Ume=(t,e,r)=>{try{e=new Fme(e,r)}catch{return!1}return e.test(t)};O2.exports=Ume});var L2=_((Uke,D2)=>{"use strict";var Bme=Lr(),jme=(t,e)=>new Bme(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));D2.exports=jme});var M2=_((Bke,k2)=>{"use strict";var Hme=$t(),Vme=Lr(),zme=(t,e,r)=>{let n=null,s=null,i=null;try{i=new Vme(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Hme(n,r))}),n};k2.exports=zme});var $2=_((jke,q2)=>{"use strict";var Wme=$t(),Gme=Lr(),Kme=(t,e,r)=>{let n=null,s=null,i=null;try{i=new Gme(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Wme(n,r))}),n};q2.exports=Kme});var B2=_((Hke,U2)=>{"use strict";var gb=$t(),Xme=Lr(),F2=Dl(),Qme=(t,e)=>{t=new Xme(t,e);let r=new gb("0.0.0");if(t.test(r)||(r=new gb("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new gb(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||F2(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||F2(r,i))&&(r=i)}return r&&t.test(r)?r:null};U2.exports=Qme});var H2=_((Vke,j2)=>{"use strict";var Yme=Lr(),Jme=(t,e)=>{try{return new Yme(t,e).range||"*"}catch{return null}};j2.exports=Jme});var kg=_((zke,G2)=>{"use strict";var Zme=$t(),W2=Ll(),{ANY:ege}=W2,tge=Lr(),rge=Ml(),V2=Dl(),z2=Ig(),nge=Og(),sge=Ng(),ige=(t,e,r,n)=>{t=new Zme(t,n),e=new tge(e,n);let s,i,o,a,c;switch(r){case">":s=V2,i=nge,o=z2,a=">",c=">=";break;case"<":s=z2,i=sge,o=V2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rge(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,m=null;if(l.forEach(g=>{g.semver===ege&&(g=new W2(">=0.0.0")),d=d||g,m=m||g,s(g.semver,d.semver,n)?d=g:o(g.semver,m.semver,n)&&(m=g)}),d.operator===a||d.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};G2.exports=ige});var X2=_((Wke,K2)=>{"use strict";var oge=kg(),age=(t,e,r)=>oge(t,e,">",r);K2.exports=age});var Y2=_((Gke,Q2)=>{"use strict";var cge=kg(),uge=(t,e,r)=>cge(t,e,"<",r);Q2.exports=uge});var ej=_((Kke,Z2)=>{"use strict";var J2=Lr(),lge=(t,e,r)=>(t=new J2(t,r),e=new J2(e,r),t.intersects(e,r));Z2.exports=lge});var rj=_((Xke,tj)=>{"use strict";var dge=Ml(),fge=Dr();tj.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((l,d)=>fge(l,d,r));for(let l of o)dge(l,e,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var cj=_((Qke,aj)=>{"use strict";var nj=Lr(),Eb=Ll(),{ANY:yb}=Eb,ql=Ml(),_b=Dr(),pge=(t,e,r={})=>{if(t===e)return!0;t=new nj(t,r),e=new nj(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=mge(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},hge=[new Eb(">=0.0.0-0")],sj=[new Eb(">=0.0.0")],mge=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===yb){if(e.length===1&&e[0].semver===yb)return!0;r.includePrerelease?t=hge:t=sj}if(e.length===1&&e[0].semver===yb){if(r.includePrerelease)return!0;e=sj}let n=new Set,s,i;for(let g of t)g.operator===">"||g.operator===">="?s=ij(s,g,r):g.operator==="<"||g.operator==="<="?i=oj(i,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(s&&i){if(o=_b(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let g of n){if(s&&!ql(g,String(s),r)||i&&!ql(g,String(i),r))return null;for(let E of e)if(!ql(g,String(E),r))return!1;return!0}let a,c,u,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let g of e){if(l=l||g.operator===">"||g.operator===">=",u=u||g.operator==="<"||g.operator==="<=",s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator===">"||g.operator===">="){if(a=ij(s,g,r),a===g&&a!==s)return!1}else if(s.operator===">="&&!ql(s.semver,String(g),r))return!1}if(i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(c=oj(i,g,r),c===g&&c!==i)return!1}else if(i.operator==="<="&&!ql(i.semver,String(g),r))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||m||d)},ij=(t,e,r)=>{if(!t)return e;let n=_b(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},oj=(t,e,r)=>{if(!t)return e;let n=_b(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};aj.exports=pge});var fj=_((Yke,dj)=>{"use strict";var Sb=Xa(),uj=Nl(),gge=$t(),lj=sb(),yge=Zi(),Ege=MB(),_ge=$B(),Sge=BB(),vge=VB(),wge=WB(),bge=KB(),Rge=QB(),Cge=JB(),Tge=Dr(),Age=r2(),xge=s2(),Pge=Pg(),Ige=c2(),Nge=l2(),Oge=Dl(),Dge=Ig(),Lge=ab(),kge=cb(),Mge=Ng(),qge=Og(),$ge=ub(),Fge=_2(),Uge=Ll(),Bge=Lr(),jge=Ml(),Hge=L2(),Vge=M2(),zge=$2(),Wge=B2(),Gge=H2(),Kge=kg(),Xge=X2(),Qge=Y2(),Yge=ej(),Jge=rj(),Zge=cj();dj.exports={parse:yge,valid:Ege,clean:_ge,inc:Sge,diff:vge,major:wge,minor:bge,patch:Rge,prerelease:Cge,compare:Tge,rcompare:Age,compareLoose:xge,compareBuild:Pge,sort:Ige,rsort:Nge,gt:Oge,lt:Dge,eq:Lge,neq:kge,gte:Mge,lte:qge,cmp:$ge,coerce:Fge,Comparator:Uge,Range:Bge,satisfies:jge,toComparators:Hge,maxSatisfying:Vge,minSatisfying:zge,minVersion:Wge,validRange:Gge,outside:Kge,gtr:Xge,ltr:Qge,intersects:Yge,simplifyRange:Jge,subset:Zge,SemVer:gge,re:Sb.re,src:Sb.src,tokens:Sb.t,SEMVER_SPEC_VERSION:uj.SEMVER_SPEC_VERSION,RELEASE_TYPES:uj.RELEASE_TYPES,compareIdentifiers:lj.compareIdentifiers,rcompareIdentifiers:lj.rcompareIdentifiers}});var wb=_((Jke,vb)=>{"use strict";var eye=fj(),tye=Pl(),Qa=ii(),pj=Mt(),hj=Ge(),mj="2.7.15",rye=function(){return!1},nye=function(e){if(!eye.gte(e.VERSION,mj))throw new Error("AWS SDK version "+mj+" or greater required.");for(var r in e)if(e[r].serviceIdentifier){var n=e[r];n.prototype.customizeRequests(gj)}return e},sye=function(e){return e.customizeRequests(gj),e};function gj(t){var e=Qa.resolveSegment(Qa.resolveManualSegmentParams(t.params));if(!e){var r=this.serviceIdentifier+"."+t.operation;return Qa.isAutomaticMode()?hj.getLogger().info("Call "+r+" is missing the sub/segment context for automatic mode. Ignoring."):hj.getLogger().info("Call "+r+' requires a segment object on the request params as "XRaySegment" for tracing in manual mode. Ignoring.'),t}var n=this.throttledError||rye,s=new Error().stack;let i;e.notTraced?i=e.addNewSubsegmentWithoutSampling(this.serviceIdentifier):i=e.addNewSubsegment(this.serviceIdentifier);var o=e.segment?e.segment.trace_id:e.trace_id;let a=e.segment?e.segment.additionalTraceData:e.additionalTraceData;var c=function(l){if(e.noOp)return;let d="Root="+o+";Parent="+i.id+";Sampled="+(i.notTraced?"0":"1");if(a!=null)for(let[m,g]of Object.entries(a))d+=";"+m+"="+g;l.httpRequest.headers["X-Amzn-Trace-Id"]=d},u=function(l){i.addAttribute("namespace","aws"),i.addAttribute("aws",new tye(l,i.name));var d=l.httpResponse;if(d&&(i.addAttribute("http",new yj(d)),(d.statusCode===429||l.error&&n(l.error))&&i.addThrottleFlag()),l.error){var m={message:l.error.message,name:l.error.code,stack:s};d&&d.statusCode?(pj.getCauseTypeFromHttpStatus(d.statusCode)=="error"&&i.addErrorFlag(),i.close(m,!0)):i.close(m)}else{if(d&&d.statusCode){var g=pj.getCauseTypeFromHttpStatus(d.statusCode);g&&(i[g]=!0)}i.close()}};t.on("beforePresign",function(l){e.removeSubsegment(i),e.decrementCounter(),l.removeListener("build",c),l.removeListener("complete",u)}),t.on("build",c).on("complete",u),t.__send||(t.__send=t.send,t.send=function(l){if(Qa.isAutomaticMode()){var d=Qa.getNamespace();d.run(function(){Qa.setSegment(i),t.__send(l)})}else t.__send(l)})}function yj(t){this.init(t)}yj.prototype.init=function(e){this.response={status:e.statusCode||""},e.headers&&e.headers["content-length"]&&(this.response.content_length=e.headers["content-length"])};vb.exports.captureAWSClient=sye;vb.exports.captureAWS=nye});var wj=_((Zke,vj)=>{var Mg=Object.defineProperty,iye=Object.getOwnPropertyDescriptor,oye=Object.getOwnPropertyNames,aye=Object.prototype.hasOwnProperty,Ya=(t,e)=>Mg(t,"name",{value:e,configurable:!0}),cye=(t,e)=>{for(var r in e)Mg(t,r,{get:e[r],enumerable:!0})},uye=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oye(e))!aye.call(t,s)&&s!==r&&Mg(t,s,{get:()=>e[s],enumerable:!(n=iye(e,s))||n.enumerable});return t},lye=t=>uye(Mg({},"__esModule",{value:!0}),t),Ej={};cye(Ej,{isClockSkewCorrectedError:()=>_j,isClockSkewError:()=>yye,isRetryableByTrait:()=>gye,isServerError:()=>_ye,isThrottlingError:()=>Eye,isTransientError:()=>Sj});vj.exports=lye(Ej);var dye=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],fye=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],pye=["TimeoutError","RequestTimeout","RequestTimeoutException"],hye=[500,502,503,504],mye=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],gye=Ya(t=>t.$retryable!==void 0,"isRetryableByTrait"),yye=Ya(t=>dye.includes(t.name),"isClockSkewError"),_j=Ya(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),Eye=Ya(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||fye.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),Sj=Ya(t=>{var e;return _j(t)||pye.includes(t.name)||mye.includes(t?.code||"")||hye.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},"isTransientError"),_ye=Ya(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Sj(t)}return!1},"isServerError")});var xj=_(Ja=>{"use strict";var Tj=Ja&&Ja.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.captureAWSClient=void 0;var Sye=wj(),vye=Tj(Pl()),wye=require("querystring"),bye=Tj(Rl()),bb=ii(),bj=Ge(),{safeParseInt:qg}=Mt(),Rye=Mt(),Aj="XRaySDKInstrumentation",Rj=async(t,e,r,n,s,i)=>{var o,a,c;let{extendedRequestId:u,requestId:l,httpStatusCode:d,attempts:m}=((o=s?.output)===null||o===void 0?void 0:o.$metadata)||i?.$metadata,g=new vye.default({extendedRequestId:u,requestId:l,retryCount:m,data:s?.output,request:{operation:e,params:n,httpRequest:{region:r,statusCode:d}}},t),E={};return d&&(E.response={},E.response.status=d),!((a=s?.response)===null||a===void 0)&&a.headers&&((c=s?.response)===null||c===void 0?void 0:c.headers["content-length"])!==void 0&&(E.response||(E.response={}),E.response.content_length=qg(s.response.headers["content-length"])),[g,E]};function Cj(t,e,r){var n,s,i;(r&&(0,Sye.isThrottlingError)(r)||qg((n=t.response)===null||n===void 0?void 0:n.status)===429||qg((s=r?.$metadata)===null||s===void 0?void 0:s.httpStatusCode)===429)&&e.addThrottleFlag();let o=(0,Rye.getCauseTypeFromHttpStatus)(qg((i=t.response)===null||i===void 0?void 0:i.status));o==="fault"?e.addFaultFlag():o==="error"&&e.addErrorFlag()}var Cye=(t,e)=>(r,n)=>async s=>{var i;let o=bb.isAutomaticMode()?bb.resolveSegment():e,{clientName:a,commandName:c}=n,u=(i=s?.input)!==null&&i!==void 0?i:{},l=c.slice(0,-7),d=l.charAt(0).toLowerCase()+l.slice(1),m=a.slice(0,-6);if(!o){let N=m+"."+d;return bb.isAutomaticMode()?bj.getLogger().info("Call "+N+" is missing the sub/segment context for automatic mode. Ignoring."):bj.getLogger().info("Call "+N+" requires a segment object passed to captureAWSv3Client for tracing in manual mode. Ignoring."),r(s)}let g;o.notTraced?g=o.addNewSubsegmentWithoutSampling(m):g=o.addNewSubsegment(m),g.addAttribute("namespace","aws");let E=o instanceof bye.default?o.segment:o,b=E.segment?E.segment.additionalTraceData:E.additionalTraceData,x=(0,wye.stringify)({Root:E.trace_id,Parent:g.id,Sampled:g.notTraced?"0":"1"},";");if(b!=null)for(let[N,M]of Object.entries(b))x+=";"+N+"="+M;o.noOp||(s.request.headers["X-Amzn-Trace-Id"]=x);let A;try{if(A=await r(s),!A)throw new Error("Failed to get response from instrumented AWS Client.");let[N,M]=await Rj(m,d,await t.region(),u,A,null);return g.addAttribute("aws",N),g.addAttribute("http",M),Cj(M,g),g.close(),A}catch(N){if(N.$metadata){let[U,z]=await Rj(m,d,await t.region(),u,null,N);g.addAttribute("aws",U),g.addAttribute("http",z),Cj(z,g,N)}let M={message:N.message,name:N.name,stack:N.stack||new Error().stack};throw g.close(M,!0),N}},Tye={name:Aj,step:"build"},Aye=(t,e)=>({applyToStack:r=>{r.add(Cye(t,e),Tye)}});function xye(t,e){return t.middlewareStack.remove(Aj),t.middlewareStack.use(Aye(t.config,e)),t}Ja.captureAWSClient=xye});var Cb=_((tMe,Rb)=>{"use strict";var Pj=require("url"),Za=ii(),$g=Mt(),Ij=Ge(),Pye=require("events"),Iye=function(e,r,n){e.__request||Nj(e,r,n)},Nye=function(e,r,n){if(e.__request)return e;var s={};return Object.keys(e).forEach(function(i){s[i]=e[i]}),Nj(s,r,n),s};function Nj(t,e,r){function n(o,...a){let c,u,l,d,m=a[0];if(typeof a[1]=="object"?(l=!0,d=typeof m=="string"?new Pj.URL(m):m,c=a[1],u=a[2]):(l=!1,c=m,u=a[1]),!c||c.headers&&c.headers["X-Amzn-Trace-Id"])return o(...a);typeof c=="string"&&(c=new Pj.URL(c)),l||(d=c);let g=Za.resolveSegment(Za.resolveManualSegmentParams(c)),E=c.hostname||c.host||d.hostname||d.host||"Unknown host";if(!g){let U="[ host: "+E;return U=c.method?U+", method: "+c.method:U,U+=", path: "+(d.pathname||$g.stripQueryStringFromPath(c.path))+" ]",Za.isAutomaticMode()?Ij.getLogger().info("Options for request "+U+" is missing the sub/segment context for automatic mode. Ignoring."):Ij.getLogger().info("Options for request "+U+' requires a segment object on the options params as "XRaySegment" for tracing in manual mode. Ignoring.'),o(...a)}let b;g.notTraced?b=g.addNewSubsegmentWithoutSampling(E):b=g.addNewSubsegment(E);let x=g.segment?g.segment:g;b.namespace="remote",c.headers||(c.headers={}),g.noOp||(c.headers["X-Amzn-Trace-Id"]="Root="+x.trace_id+";Parent="+b.id+";Sampled="+(b.notTraced?"0":"1"));let A=function(z){if(r&&r(b,this,null,z),b.http&&b.http.response)$g.getCauseTypeFromHttpStatus(b.http.response.status)==="error"&&b.addErrorFlag(),b.close(z,!0);else{let ye=z.code!=="ECONNREFUSED";b.addRemoteRequestData(this,null,ye&&e),b.close(z)}},N=$g.objectWithoutProperties(c,["Segment"],!0),M=o(...l?[m,N]:[c],function(U){U.on("end",function(){r&&r(b,this.req,U),U.statusCode===429&&b.addThrottleFlag();let z=$g.getCauseTypeFromHttpStatus(U.statusCode);z&&(b[z]=!0),b.addRemoteRequestData(U.req,U,!!e),b.close()}),typeof u=="function"?Za.isAutomaticMode()?Za.getNamespace().run(function(){Za.setSegment(b),u(U)}):u(U):U.req&&U.req.listenerCount("response")===0&&U.resume()});return M.on(Pye.errorMonitor||"error",A),M}t.__request=t.request;function s(...o){return n(t.__request,...o)}t.__get=t.get;function i(...o){return n(t.__get,...o)}Object.defineProperties(t,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:i,configurable:!0,enumerable:!0,writable:!0}})}Rb.exports.captureHTTPsGlobal=Iye;Rb.exports.captureHTTPs=Nye});var kj=_((rMe,Tb)=>{"use strict";var $l=ii(),Fg=Symbol("original then"),Ug=Symbol("original catch");function Dj(t){let e=t.prototype.then;e[Fg]||(t.prototype.then=function(n,s){if($l.isAutomaticMode()&&Oj()){let i=$l.getNamespace();n=n&&i.bind(n),s=s&&i.bind(s)}return e.call(this,n,s)},t.prototype.then[Fg]=e);let r=t.prototype.catch;r&&!r[Ug]&&(t.prototype.catch=function(n){if($l.isAutomaticMode()&&Oj()){let s=$l.getNamespace();n=n&&s.bind(n)}return r.call(this,n)},t.prototype.catch[Ug]=r)}function Oye(t){let e=t.prototype.then;e[Fg]&&(t.prototype.then=e[Fg]);let r=t.prototype.catch;r&&r[Ug]&&(t.prototype.catch=r[Ug])}function Oj(){try{return $l.getSegment()}catch{return}}function Lj(){Dj(Promise)}function Dye(){Oye(Promise)}Lj.patchThirdPartyPromise=Dj;Tb.exports.capturePromise=Lj;Tb.exports.uncapturePromise=Dye});var $j=_((nMe,qj)=>{"use strict";function Mj(t,e,r,n,s){this.init(t,e,r,n,s)}Mj.prototype.init=function(e,r,n,s,i){e&&(this.database_version=e),r&&(this.driver_version=r),i&&(this.preparation=i),this.url=s,this.user=n};qj.exports=Mj});var Bj=_((sMe,Uj)=>{"use strict";var us=ii(),Ab=Ge(),ec=ri(),Lye=Mt(),kye=eB(),Ul={};try{Ul=tB()}catch(t){Ab.getLogger().debug("Failed to load SDK data:",t)}var Fl="unknown",Fj={plugins:{EC2Plugin:uB(),ECSPlugin:dB(),ElasticBeanstalkPlugin:pB()},config:function(t){var e={};t.forEach(function(r){r.getData(function(n){if(n)for(var s in n)e[s]=n[s]}),ec.setOrigin(r.originName),ec.setPluginData(e)})},setAWSWhitelist:Pl().setAWSWhitelist,appendAWSWhitelist:Pl().appendAWSWhitelist,setStreamingThreshold:ec.setStreamingThreshold,setLogger:Ab.setLogger,getLogger:Ab.getLogger,setDaemonAddress:sg().setDaemonAddress,captureFunc:bg().captureFunc,captureAsyncFunc:bg().captureAsyncFunc,captureCallbackFunc:bg().captureCallbackFunc,captureAWS:wb().captureAWS,captureAWSClient:wb().captureAWSClient,captureAWSv3Client:xj().captureAWSClient,captureHTTPs:Cb().captureHTTPs,captureHTTPsGlobal:Cb().captureHTTPsGlobal,capturePromise:kj().capturePromise,utils:Lye,database:{SqlData:$j()},middleware:W0(),getNamespace:us.getNamespace,resolveSegment:us.resolveSegment,resolveManualSegmentParams:us.resolveManualSegmentParams,getSegment:us.getSegment,setSegment:us.setSegment,isAutomaticMode:us.isAutomaticMode,enableAutomaticMode:us.enableAutomaticMode,enableManualMode:us.enableManualMode,setContextMissingStrategy:us.setContextMissingStrategy,Segment:Cl(),Subsegment:Rl(),SegmentUtils:ec};Fj.middleware.IncomingRequestData=k0(),function(){var t={runtime:process.release&&process.release.name?process.release.name:Fl,runtime_version:process.version,version:process.env.npm_package_version||Fl,name:process.env.npm_package_name||Fl},e={sdk:"X-Ray for Node.js",sdk_version:Ul.version?Ul.version:Fl,package:Ul.name?Ul.name:Fl};ec.setSDKData(e),ec.setServiceData(t),process.env.LAMBDA_TASK_ROOT&&kye.init()}();Uj.exports=Fj});var xb=_((iMe,jj)=>{"use strict";jj.exports=Bj()});var Ob=_(r4=>{"use strict";r4.parse=function(t,e){return new Nb(t,e).parse()};var Nb=class t{constructor(e,r){this.source=e,this.transform=r||rEe,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function rEe(t){return t}});var Db=_((TMe,n4)=>{var nEe=Ob();n4.exports={create:function(t,e){return{parse:function(){return nEe.parse(t,e)}}}}});var o4=_((AMe,i4)=>{"use strict";var sEe=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,iEe=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,oEe=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,aEe=/^-?infinity$/;i4.exports=function(e){if(aEe.test(e))return Number(e.replace("i","I"));var r=sEe.exec(e);if(!r)return cEe(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=s4(s));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var d,m=uEe(e);return m!=null?(d=new Date(Date.UTC(s,i,o,a,c,u,l)),Lb(s)&&d.setUTCFullYear(s),m!==0&&d.setTime(d.getTime()-m)):(d=new Date(s,i,o,a,c,u,l),Lb(s)&&d.setFullYear(s)),d};function cEe(t){var e=iEe.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=s4(r));var s=parseInt(e[2],10)-1,i=e[3],o=new Date(r,s,i);return Lb(r)&&o.setFullYear(r),o}}function uEe(t){if(t.endsWith("+00"))return 0;var e=oEe.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function s4(t){return-(t-1)}function Lb(t){return t>=0&&t<100}});var c4=_((xMe,a4)=>{a4.exports=dEe;var lEe=Object.prototype.hasOwnProperty;function dEe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)lEe.call(r,n)&&(t[n]=r[n])}return t}});var d4=_((PMe,l4)=>{"use strict";var fEe=c4();l4.exports=tc;function tc(t){if(!(this instanceof tc))return new tc(t);fEe(this,REe(t))}var pEe=["seconds","minutes","hours","days","months","years"];tc.prototype.toPostgres=function(){var t=pEe.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var hEe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},mEe=["years","months","days"],gEe=["hours","minutes","seconds"];tc.prototype.toISOString=tc.prototype.toISO=function(){var t=mEe.map(r,this).join(""),e=gEe.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+hEe[n]}};var kb="([+-]?\\d+)",yEe=kb+"\\s+years?",EEe=kb+"\\s+mons?",_Ee=kb+"\\s+days?",SEe="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",vEe=new RegExp([yEe,EEe,_Ee,SEe].map(function(t){return"("+t+")?"}).join("\\s*")),u4={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},wEe=["hours","minutes","seconds","milliseconds"];function bEe(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function REe(t){if(!t)return{};var e=vEe.exec(t),r=e[8]==="-";return Object.keys(u4).reduce(function(n,s){var i=u4[s],o=e[i];return!o||(o=s==="milliseconds"?bEe(o):parseInt(o,10),!o)||(r&&~wEe.indexOf(s)&&(o*=-1),n[s]=o),n},{})}});var p4=_((IMe,f4)=>{"use strict";f4.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var S4=_((NMe,_4)=>{var Hl=Ob(),Vl=Db(),Wg=o4(),m4=d4(),g4=p4();function Gg(t){return function(r){return r===null?r:t(r)}}function y4(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function CEe(t){return t?Hl.parse(t,y4):null}function TEe(t){return parseInt(t,10)}function Mb(t){return t?Hl.parse(t,Gg(TEe)):null}function AEe(t){return t?Hl.parse(t,Gg(function(e){return E4(e).trim()})):null}var xEe=function(t){if(!t)return null;var e=Vl.create(t,function(r){return r!==null&&(r=Ub(r)),r});return e.parse()},qb=function(t){if(!t)return null;var e=Vl.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},kr=function(t){if(!t)return null;var e=Vl.create(t);return e.parse()},$b=function(t){if(!t)return null;var e=Vl.create(t,function(r){return r!==null&&(r=Wg(r)),r});return e.parse()},PEe=function(t){if(!t)return null;var e=Vl.create(t,function(r){return r!==null&&(r=m4(r)),r});return e.parse()},IEe=function(t){return t?Hl.parse(t,Gg(g4)):null},Fb=function(t){return parseInt(t,10)},E4=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},h4=function(t){return t?Hl.parse(t,Gg(JSON.parse)):null},Ub=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},NEe=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var i=Ub(e);return i.radius=parseFloat(r),i},OEe=function(t){t(20,E4),t(21,Fb),t(23,Fb),t(26,Fb),t(700,parseFloat),t(701,parseFloat),t(16,y4),t(1082,Wg),t(1114,Wg),t(1184,Wg),t(600,Ub),t(651,kr),t(718,NEe),t(1e3,CEe),t(1001,IEe),t(1005,Mb),t(1007,Mb),t(1028,Mb),t(1016,AEe),t(1017,xEe),t(1021,qb),t(1022,qb),t(1231,qb),t(1014,kr),t(1015,kr),t(1008,kr),t(1009,kr),t(1040,kr),t(1041,kr),t(1115,$b),t(1182,$b),t(1185,$b),t(1186,m4),t(1187,PEe),t(17,g4),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,h4),t(3807,h4),t(3907,kr),t(2951,kr),t(791,kr),t(1183,kr),t(1270,kr)};_4.exports={init:OEe}});var w4=_((OMe,v4)=>{"use strict";var lr=1e6;function DEe(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",i,o,a,c,u,l;{if(i=e%lr,e=e/lr>>>0,o=4294967296*i+r,r=o/lr>>>0,a=""+(o-lr*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%lr,e=e/lr>>>0,o=4294967296*i+r,r=o/lr>>>0,a=""+(o-lr*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%lr,e=e/lr>>>0,o=4294967296*i+r,r=o/lr>>>0,a=""+(o-lr*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return i=e%lr,o=4294967296*i+r,a=""+o%lr,n+a+s}v4.exports=DEe});var A4=_((DMe,T4)=>{var LEe=w4(),Je=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(g,E,b){return g*Math.pow(2,b)+E};var i=r>>3,o=function(g){return n?~g&255:g},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,o(t[i])&a,c));for(var l=e+r>>3,d=i+1;d<l;d++)u=s(u,o(t[d]),8);var m=(e+r)%8;return m>0&&(u=s(u,o(t[l])>>8-m,m)),u},C4=function(t,e,r){var n=Math.pow(2,r-1)-1,s=Je(t,1),i=Je(t,r,1);if(i===0)return 0;var o=1,a=function(u,l,d){u===0&&(u=1);for(var m=1;m<=d;m++)o/=2,(l&1<<d-m)>0&&(u+=o);return u},c=Je(t,e,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,i-n)*c},kEe=function(t){return Je(t,1)==1?-1*(Je(t,15,1,!0)+1):Je(t,15,1)},b4=function(t){return Je(t,1)==1?-1*(Je(t,31,1,!0)+1):Je(t,31,1)},MEe=function(t){return C4(t,23,8)},qEe=function(t){return C4(t,52,11)},$Ee=function(t){var e=Je(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,Je(t,16,16)),n=0,s=[],i=Je(t,16),o=0;o<i;o++)n+=Je(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,Je(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},R4=function(t,e){var r=Je(e,1),n=Je(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(i){this.usec=i},s.getUTCMicroSeconds=function(){return this.usec},s},zl=function(t){for(var e=Je(t,32),r=Je(t,32,32),n=Je(t,32,64),s=96,i=[],o=0;o<e;o++)i[o]=Je(t,32,s),s+=32,s+=32;var a=function(u){var l=Je(t,32,s);if(s+=32,l==4294967295)return null;var d;if(u==23||u==20)return d=Je(t,l*8,s),s+=l*8,d;if(u==25)return d=t.toString(this.encoding,s>>3,(s+=l<<3)>>3),d;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var d=[],m;if(u.length>1){var g=u.shift();for(m=0;m<g;m++)d[m]=c(u,l);u.unshift(g)}else for(m=0;m<u[0];m++)d[m]=a(l);return d};return c(i,n)},FEe=function(t){return t.toString("utf8")},UEe=function(t){return t===null?null:Je(t,8)>0},BEe=function(t){t(20,LEe),t(21,kEe),t(23,b4),t(26,b4),t(1700,$Ee),t(700,MEe),t(701,qEe),t(16,UEe),t(1114,R4.bind(null,!1)),t(1184,R4.bind(null,!0)),t(1e3,zl),t(1007,zl),t(1016,zl),t(1008,zl),t(1009,zl),t(25,FEe)};T4.exports={init:BEe}});var P4=_((LMe,x4)=>{x4.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Kl=_(Gl=>{var jEe=S4(),HEe=A4(),VEe=Db(),zEe=P4();Gl.getTypeParser=WEe;Gl.setTypeParser=GEe;Gl.arrayParser=VEe;Gl.builtins=zEe;var Wl={text:{},binary:{}};function I4(t){return String(t)}function WEe(t,e){return e=e||"text",Wl[e]&&Wl[e][t]||I4}function GEe(t,e,r){typeof e=="function"&&(r=e,e="text"),Wl[e][t]=r}jEe.init(function(t,e){Wl.text[t]=e});HEe.init(function(t,e){Wl.binary[t]=e})});var Xl=_((MMe,Bb)=>{"use strict";Bb.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var rc=Kl(),KEe=rc.getTypeParser(20,"text"),XEe=rc.getTypeParser(1016,"text");Bb.exports.__defineSetter__("parseInt8",function(t){rc.setTypeParser(20,"text",t?rc.getTypeParser(23,"text"):KEe),rc.setTypeParser(1016,"text",t?rc.getTypeParser(1007,"text"):XEe)})});var nc=_((qMe,D4)=>{"use strict";var QEe=Xl(),N4=require("util"),{isDate:YEe}=N4.types||N4;function JEe(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function O4(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+O4(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=JEe(Kg(t[r]));return e=e+"}",e}var Kg=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return YEe(t)?QEe.parseInputDatesAsUTC?t_e(t):e_e(t):Array.isArray(t)?O4(t):ZEe(t,e)}return t.toString()};function ZEe(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Kg(t.toPostgres(Kg),e)}return JSON.stringify(t)}function e_e(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function t_e(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function r_e(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var n_e=function(t){return'"'+t.replace(/"/g,'""')+'"'},s_e=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};D4.exports={prepareValue:function(e){return Kg(e)},normalizeQueryConfig:r_e,escapeIdentifier:n_e,escapeLiteral:s_e}});var k4=_(($Me,L4)=>{"use strict";var sc=require("crypto");function jb(t){return sc.createHash("md5").update(t,"utf-8").digest("hex")}function i_e(t,e,r){let n=jb(e+t);return"md5"+jb(Buffer.concat([Buffer.from(n),r]))}function o_e(t){return sc.createHash("sha256").update(t).digest()}function a_e(t,e){return t=t.replace(/(\D)-/,"$1"),sc.createHash(t).update(e).digest()}function c_e(t,e){return sc.createHmac("sha256",t).update(e).digest()}async function u_e(t,e,r){return sc.pbkdf2Sync(t,e,r,32,"sha256")}L4.exports={postgresMd5PasswordHash:i_e,randomBytes:sc.randomBytes,deriveKey:u_e,sha256:o_e,hashByName:a_e,hmacSha256:c_e,md5:jb}});var F4=_((FMe,$4)=>{var M4=require("crypto");$4.exports={postgresMd5PasswordHash:d_e,randomBytes:l_e,deriveKey:m_e,sha256:f_e,hashByName:p_e,hmacSha256:h_e,md5:Hb};var q4=M4.webcrypto||globalThis.crypto,to=q4.subtle,Vb=new TextEncoder;function l_e(t){return q4.getRandomValues(Buffer.alloc(t))}async function Hb(t){try{return M4.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?Vb.encode(t):t,n=await to.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function d_e(t,e,r){let n=await Hb(e+t);return"md5"+await Hb(Buffer.concat([Buffer.from(n),r]))}async function f_e(t){return await to.digest("SHA-256",t)}async function p_e(t,e){return await to.digest(t,e)}async function h_e(t,e){let r=await to.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await to.sign("HMAC",r,Vb.encode(e))}async function m_e(t,e,r){let n=await to.importKey("raw",Vb.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await to.deriveBits(s,n,32*8,["deriveBits"])}});var Wb=_((UMe,zb)=>{"use strict";var g_e=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;g_e?zb.exports=k4():zb.exports=F4()});var j4=_((BMe,B4)=>{function ro(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function Gb(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw ro("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function U4(t,e){if(t[e++]!==6)throw ro("non-OID data",t);let{length:r,index:n}=Gb(t,e);e=n;let s=e+r,i=t[e++],o=(i/40>>0)+"."+i%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:e}}function Ql(t,e){if(t[e++]!==48)throw ro("non-sequence data",t);return Gb(t,e)}function y_e(t,e){e===void 0&&(e=0),e=Ql(t,e).index;let{length:r,index:n}=Ql(t,e);e=n+r,e=Ql(t,e).index;let{oid:s,index:i}=U4(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=i,e=Ql(t,e).index,t[e++]!==160)throw ro("non-tag data",t);e=Gb(t,e).index,e=Ql(t,e).index;let{oid:o}=U4(t,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw ro("unknown hash OID "+o,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw ro("Ed448 certificate channel binding is not currently supported by Postgres")}throw ro("unknown OID "+s,t)}B4.exports={signatureAlgorithmHashFromCertificate:y_e}});var W4=_((jMe,z4)=>{"use strict";var oi=Wb(),{signatureAlgorithmHashFromCertificate:E_e}=j4();function __e(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>t.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=oi.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function S_e(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=b_e(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+t.clientNonce,o="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let N=n.getPeerCertificate().raw,M=E_e(N);(M==="MD5"||M==="SHA-1")&&(M="SHA-256");let U=await oi.hashByName(M,N);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(U)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=i+","+o+","+c,l=Buffer.from(s.salt,"base64"),d=await oi.deriveKey(e,l,s.iteration),m=await oi.hmacSha256(d,"Client Key"),g=await oi.sha256(m),E=await oi.hmacSha256(g,u),b=C_e(Buffer.from(m),Buffer.from(E)).toString("base64"),x=await oi.hmacSha256(d,"Server Key"),A=await oi.hmacSha256(x,u);t.message="SASLResponse",t.serverSignature=Buffer.from(A).toString("base64"),t.response=c+",p="+b}function v_e(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=R_e(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function w_e(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function H4(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function V4(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function b_e(t){let e=V4(t),r=e.get("r");if(r){if(!w_e(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!H4(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(s,10);return{nonce:r,salt:n,iteration:i}}function R_e(t){let r=V4(t).get("v");if(r){if(!H4(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function C_e(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}z4.exports={startSession:__e,continueSession:S_e,finalizeSession:v_e}});var Qg=_((HMe,G4)=>{"use strict";var T_e=Kl();function Xg(t){this._types=t||T_e,this.text={},this.binary={}}Xg.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Xg.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Xg.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};G4.exports=Xg});var Q4=_((VMe,X4)=>{"use strict";function ic(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let i=s?"":n.hostname;r.host?i&&/^%2f/i.test(i)&&(n.pathname=i+n.pathname):r.host=decodeURIComponent(i),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function A_e(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function K4(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let i=s;typeof i=="boolean"&&(r[n]=i),typeof i=="object"&&(r[n]=A_e(i))}else if(s!=null)if(n==="port"){if(s!==""){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid ${n}: ${s}`);r[n]=i}}else r[n]=s;return r},{})}function x_e(t){return K4(ic(t))}X4.exports=ic;ic.parse=ic;ic.toClientConfig=K4;ic.parseIntoClientConfig=x_e});var Xb=_((zMe,Z4)=>{"use strict";var P_e=require("dns"),J4=Xl(),Y4=Q4().parse,tr=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||J4[t]},I_e=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return J4.ssl},oc=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},Mr=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+oc(n))},Kb=class{constructor(e){e=typeof e=="string"?Y4(e):e||{},e.connectionString&&(e=Object.assign({},e,Y4(e.connectionString))),this.user=tr("user",e),this.database=tr("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(tr("port",e),10),this.host=tr("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:tr("password",e)}),this.binary=tr("binary",e),this.options=tr("options",e),this.ssl=typeof e.ssl>"u"?I_e():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=tr("client_encoding",e),this.replication=tr("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=tr("application_name",e,"PGAPPNAME"),this.fallback_application_name=tr("fallback_application_name",e,!1),this.statement_timeout=tr("statement_timeout",e,!1),this.lock_timeout=tr("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=tr("idle_in_transaction_session_timeout",e,!1),this.query_timeout=tr("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];Mr(r,this,"user"),Mr(r,this,"password"),Mr(r,this,"port"),Mr(r,this,"application_name"),Mr(r,this,"fallback_application_name"),Mr(r,this,"connect_timeout"),Mr(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(Mr(r,n,"sslmode"),Mr(r,n,"sslca"),Mr(r,n,"sslkey"),Mr(r,n,"sslcert"),Mr(r,n,"sslrootcert"),this.database&&r.push("dbname="+oc(this.database)),this.replication&&r.push("replication="+oc(this.replication)),this.host&&r.push("host="+oc(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+oc(this.client_encoding)),P_e.lookup(this.host,function(s,i){return s?e(s,null):(r.push("hostaddr="+oc(i)),e(null,r.join(" ")))})}};Z4.exports=Kb});var Yb=_((WMe,tH)=>{"use strict";var N_e=Kl(),eH=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,Qb=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=eH.exec(e.text):r=eH.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let i=e[n];i!==null?r[n]=this._parsers[n](i):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let i=e[n],o=this.fields[n].name;if(i!==null){let a=this.fields[n].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=N_e.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};tH.exports=Qb});var iH=_((GMe,sH)=>{"use strict";var{EventEmitter:O_e}=require("events"),rH=Yb(),nH=nc(),Jb=class extends O_e{constructor(e,r,n){super(),e=nH.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new rH(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new rH(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:nH.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};sH.exports=Jb});var pR=_(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.NoticeMessage=te.DataRowMessage=te.CommandCompleteMessage=te.ReadyForQueryMessage=te.NotificationResponseMessage=te.BackendKeyDataMessage=te.AuthenticationMD5Password=te.ParameterStatusMessage=te.ParameterDescriptionMessage=te.RowDescriptionMessage=te.Field=te.CopyResponse=te.CopyDataMessage=te.DatabaseError=te.copyDone=te.emptyQuery=te.replicationStart=te.portalSuspended=te.noData=te.closeComplete=te.bindComplete=te.parseComplete=void 0;te.parseComplete={name:"parseComplete",length:5};te.bindComplete={name:"bindComplete",length:5};te.closeComplete={name:"closeComplete",length:5};te.noData={name:"noData",length:5};te.portalSuspended={name:"portalSuspended",length:5};te.replicationStart={name:"replicationStart",length:4};te.emptyQuery={name:"emptyQuery",length:4};te.copyDone={name:"copyDone",length:4};var Zb=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};te.DatabaseError=Zb;var eR=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};te.CopyDataMessage=eR;var tR=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};te.CopyResponse=tR;var rR=class{constructor(e,r,n,s,i,o,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};te.Field=rR;var nR=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};te.RowDescriptionMessage=nR;var sR=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};te.ParameterDescriptionMessage=sR;var iR=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};te.ParameterStatusMessage=iR;var oR=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};te.AuthenticationMD5Password=oR;var aR=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};te.BackendKeyDataMessage=aR;var cR=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};te.NotificationResponseMessage=cR;var uR=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};te.ReadyForQueryMessage=uR;var lR=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};te.CommandCompleteMessage=lR;var dR=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};te.DataRowMessage=dR;var fR=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};te.NoticeMessage=fR});var oH=_(Yg=>{"use strict";Object.defineProperty(Yg,"__esModule",{value:!0});Yg.Writer=void 0;var hR=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Yg.Writer=hR});var cH=_(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.serialize=void 0;var mR=oH(),Ke=new mR.Writer,D_e=t=>{Ke.addInt16(3).addInt16(0);for(let n of Object.keys(t))Ke.addCString(n).addCString(t[n]);Ke.addCString("client_encoding").addCString("UTF8");let e=Ke.addCString("").flush(),r=e.length+4;return new mR.Writer().addInt32(r).add(e).flush()},L_e=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},k_e=t=>Ke.addCString(t).flush(112),M_e=function(t,e){return Ke.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),Ke.flush(112)},q_e=function(t){return Ke.addString(t).flush(112)},$_e=t=>Ke.addCString(t).flush(81),aH=[],F_e=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||aH,n=r.length,s=Ke.addCString(e).addCString(t.text).addInt16(n);for(let i=0;i<n;i++)s.addInt32(r[i]);return Ke.flush(80)},ac=new mR.Writer,U_e=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(Ke.addInt16(0),ac.addInt32(-1)):n instanceof Buffer?(Ke.addInt16(1),ac.addInt32(n.length),ac.add(n)):(Ke.addInt16(0),ac.addInt32(Buffer.byteLength(n)),ac.addString(n))}},B_e=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||aH,i=s.length;return Ke.addCString(e).addCString(r),Ke.addInt16(i),U_e(s,t.valueMapper),Ke.addInt16(i),Ke.add(ac.flush()),Ke.addInt16(1),Ke.addInt16(n?1:0),Ke.flush(66)},j_e=Buffer.from([69,0,0,0,9,0,0,0,0,0]),H_e=t=>{if(!t||!t.portal&&!t.rows)return j_e;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(e,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},V_e=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},gR=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},z_e=Ke.addCString("P").flush(68),W_e=Ke.addCString("S").flush(68),G_e=t=>t.name?gR(68,`${t.type}${t.name||""}`):t.type==="P"?z_e:W_e,K_e=t=>{let e=`${t.type}${t.name||""}`;return gR(67,e)},X_e=t=>Ke.add(t).flush(100),Q_e=t=>gR(102,t),Jg=t=>Buffer.from([t,0,0,0,4]),Y_e=Jg(72),J_e=Jg(83),Z_e=Jg(88),eSe=Jg(99),tSe={startup:D_e,password:k_e,requestSsl:L_e,sendSASLInitialResponseMessage:M_e,sendSCRAMClientFinalMessage:q_e,query:$_e,parse:F_e,bind:B_e,execute:H_e,describe:G_e,close:K_e,flush:()=>Y_e,sync:()=>J_e,end:()=>Z_e,copyData:X_e,copyDone:()=>eSe,copyFail:Q_e,cancel:V_e};Zg.serialize=tSe});var uH=_(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.BufferReader=void 0;var rSe=Buffer.allocUnsafe(0),yR=class{constructor(e=0){this.offset=e,this.buffer=rSe,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};ey.BufferReader=yR});var fH=_(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.Parser=void 0;var Ze=pR(),nSe=uH(),ER=1,sSe=4,lH=ER+sSe,dH=Buffer.allocUnsafe(0),_R=class{constructor(e){if(this.buffer=dH,this.bufferLength=0,this.bufferOffset=0,this.reader=new nSe.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+lH<=n;){let i=this.buffer[s],o=this.buffer.readUInt32BE(s+ER),a=ER+o;if(a+s<=n){let c=this.handlePacket(s+lH,i,o,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=dH,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;s=Buffer.allocUnsafe(i)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){switch(r){case 50:return Ze.bindComplete;case 49:return Ze.parseComplete;case 51:return Ze.closeComplete;case 110:return Ze.noData;case 115:return Ze.portalSuspended;case 99:return Ze.copyDone;case 87:return Ze.replicationStart;case 73:return Ze.emptyQuery;case 68:return this.parseDataRowMessage(e,n,s);case 67:return this.parseCommandCompleteMessage(e,n,s);case 90:return this.parseReadyForQueryMessage(e,n,s);case 65:return this.parseNotificationMessage(e,n,s);case 82:return this.parseAuthenticationResponse(e,n,s);case 83:return this.parseParameterStatusMessage(e,n,s);case 75:return this.parseBackendKeyData(e,n,s);case 69:return this.parseErrorMessage(e,n,s,"error");case 78:return this.parseErrorMessage(e,n,s,"notice");case 84:return this.parseRowDescriptionMessage(e,n,s);case 116:return this.parseParameterDescriptionMessage(e,n,s);case 71:return this.parseCopyInMessage(e,n,s);case 72:return this.parseCopyOutMessage(e,n,s);case 100:return this.parseCopyData(e,n,s);default:return new Ze.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.string(1);return new Ze.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring();return new Ze.CommandCompleteMessage(r,s)}parseCopyData(e,r,n){let s=n.slice(e,e+(r-4));return new Ze.CopyDataMessage(r,s)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,s){this.reader.setBuffer(e,n);let i=this.reader.byte()!==0,o=this.reader.int16(),a=new Ze.CopyResponse(r,s,i,o);for(let c=0;c<o;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new Ze.NotificationResponseMessage(r,s,i,o)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ze.RowDescriptionMessage(r,s);for(let o=0;o<s;o++)i.fields[o]=this.parseField();return i}parseField(){let e=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),i=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ze.Field(e,r,n,s,i,o,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ze.ParameterDescriptionMessage(r,s);for(let o=0;o<s;o++)i.dataTypeIDs[o]=this.reader.int32();return i}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Array(s);for(let o=0;o<s;o++){let a=this.reader.int32();i[o]=a===-1?null:this.reader.string(a)}return new Ze.DataRowMessage(r,i)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring(),i=this.reader.cstring();return new Ze.ParameterStatusMessage(r,s,i)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.int32();return new Ze.BackendKeyDataMessage(r,s,i)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new Ze.AuthenticationMD5Password(r,o)}break;case 10:{i.name="authenticationSASL",i.mechanisms=[];let o;do o=this.reader.cstring(),o&&i.mechanisms.push(o);while(o)}break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return i}parseErrorMessage(e,r,n,s){this.reader.setBuffer(e,n);let i={},o=this.reader.string(1);for(;o!=="\0";)i[o]=this.reader.cstring(),o=this.reader.string(1);let a=i.M,c=s==="notice"?new Ze.NoticeMessage(r,a):new Ze.DatabaseError(a,r,s);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};ty.Parser=_R});var SR=_(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.DatabaseError=ai.serialize=ai.parse=void 0;var iSe=pR();Object.defineProperty(ai,"DatabaseError",{enumerable:!0,get:function(){return iSe.DatabaseError}});var oSe=cH();Object.defineProperty(ai,"serialize",{enumerable:!0,get:function(){return oSe.serialize}});var aSe=fH();function cSe(t,e){let r=new aSe.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}ai.parse=cSe});var pH=_(vR=>{"use strict";Object.defineProperty(vR,"__esModule",{value:!0});vR.default={}});var mH=_((tqe,hH)=>{var{getStream:uSe,getSecureStream:lSe}=hSe();hH.exports={getStream:uSe,getSecureStream:lSe};function dSe(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function fSe(){function t(r){let{CloudflareSocket:n}=pH();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function pSe(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function hSe(){return pSe()?fSe():dSe()}});var bR=_((rqe,gH)=>{"use strict";var mSe=require("events").EventEmitter,{parse:gSe,serialize:_t}=SR(),{getStream:ySe,getSecureStream:ESe}=mH(),_Se=_t.flush(),SSe=_t.sync(),vSe=_t.end(),wR=class extends mSe{constructor(e){super(),e=e||{},this.stream=e.stream||ySe(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(i){n._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||n.emit("error",i)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=ESe(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){gSe(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(_t.requestSsl())}startup(e){this.stream.write(_t.startup(e))}cancel(e,r){this._send(_t.cancel(e,r))}password(e){this._send(_t.password(e))}sendSASLInitialResponseMessage(e,r){this._send(_t.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(_t.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(_t.query(e))}parse(e){this._send(_t.parse(e))}bind(e){this._send(_t.bind(e))}execute(e){this._send(_t.execute(e))}flush(){this.stream.writable&&this.stream.write(_Se)}sync(){this._ending=!0,this._send(SSe)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(vSe,()=>{this.stream.end()})}close(e){this._send(_t.close(e))}describe(e){this._send(_t.describe(e))}sendCopyFromChunk(e){this._send(_t.copyData(e))}endCopyFrom(){this._send(_t.copyDone())}sendCopyFail(e){this._send(_t.copyFail(e))}};gH.exports=wR});var SH=_((nqe,_H)=>{"use strict";var{Transform:wSe}=require("stream"),{StringDecoder:bSe}=require("string_decoder"),ci=Symbol("last"),ry=Symbol("decoder");function RSe(t,e,r){let n;if(this.overflow){if(n=this[ry].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[ci]+=this[ry].write(t),n=this[ci].split(this.matcher);this[ci]=n.pop();for(let s=0;s<n.length;s++)try{EH(this,this.mapper(n[s]))}catch(i){return r(i)}if(this.overflow=this[ci].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function CSe(t){if(this[ci]+=this[ry].end(),this[ci])try{EH(this,this.mapper(this[ci]))}catch(e){return t(e)}t()}function EH(t,e){e!==void 0&&t.push(e)}function yH(t){return t}function TSe(t,e,r){switch(t=t||/\r?\n/,e=e||yH,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=yH)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=RSe,r.flush=CSe,r.readableObjectMode=!0;let n=new wSe(r);return n[ci]="",n[ry]=new bSe("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,i){this._writableState.errorEmitted=!1,i(s)},n}_H.exports=TSe});var bH=_((sqe,ls)=>{"use strict";var vH=require("path"),ASe=require("stream").Stream,xSe=SH(),wH=require("util"),PSe=5432,ny=process.platform==="win32",Yl=process.stderr,ISe=56,NSe=7,OSe=61440,DSe=32768;function LSe(t){return(t&OSe)==DSe}var cc=["host","port","database","user","password"],RR=cc.length,kSe=cc[RR-1];function CR(){var t=Yl instanceof ASe&&Yl.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Yl.write(wH.format.apply(wH,e))}}Object.defineProperty(ls.exports,"isWin",{get:function(){return ny},set:function(t){ny=t}});ls.exports.warnTo=function(t){var e=Yl;return Yl=t,e};ls.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(ny?vH.join(e.APPDATA||"./","postgresql","pgpass.conf"):vH.join(e.HOME||"./",".pgpass"));return r};ls.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:ny?!0:(e=e||"<unkn>",LSe(t.mode)?t.mode&(ISe|NSe)?(CR('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(CR('WARNING: password file "%s" is not a plain file',e),!1))};var MSe=ls.exports.match=function(t,e){return cc.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||PSe)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};ls.exports.getPassword=function(t,e,r){var n,s=e.pipe(xSe());function i(c){var u=qSe(c);u&&$Se(u)&&MSe(t,u)&&(n=u[kSe],s.end())}var o=function(){e.destroy(),r(n)},a=function(c){e.destroy(),CR("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",i).on("end",o).on("error",a)};var qSe=ls.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,i=0,o={},a=!1,c=function(l,d,m){var g=t.substring(d,m);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),o[cc[l]]=g},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==RR-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return o=Object.keys(o).length===RR?o:null,o},$Se=ls.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<cc.length;r+=1){var n=e[r],s=t[cc[r]]||"",i=n(s);if(!i)return!1}return!0}});var CH=_((oqe,TR)=>{"use strict";var iqe=require("path"),RH=require("fs"),sy=bH();TR.exports=function(t,e){var r=sy.getFileName();RH.stat(r,function(n,s){if(n||!sy.usePgPass(s,r))return e(void 0);var i=RH.createReadStream(r);sy.getPassword(t,i,e)})};TR.exports.warnTo=sy.warnTo});var PH=_((aqe,xH)=>{"use strict";var FSe=require("events").EventEmitter,TH=nc(),AR=W4(),USe=Qg(),BSe=Xb(),AH=iH(),jSe=Xl(),HSe=bR(),VSe=Wb(),iy=class extends FSe{constructor(e){super(),this.connectionParameters=new BSe(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};this._Promise=r.Promise||global.Promise,this._types=new USe(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new HSe({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||jSe.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{CH()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await VSe.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=AR.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await AR.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{AR.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return TH.escapeIdentifier(e)}escapeLiteral(e){return TH.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){let s,i,o,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,i=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(o=e.query_timeout||this.connectionParameters.query_timeout,s=new AH(e,r,n),s.callback||(i=new this._Promise((u,l)=>{s.callback=(d,m)=>d?l(d):u(m)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},o),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(s),this._pulseQueryQueue(),i):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};iy.Query=AH;xH.exports=iy});var DH=_((cqe,OH)=>{"use strict";var zSe=require("events").EventEmitter,IH=function(){},NH=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},xR=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},uc=class{constructor(e){this.callback=e}};function WSe(){throw new Error("Release called on client which has already been released to the pool.")}function oy(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(o,a){o?r(o):n(a)},i=new t(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:s,result:i}}function GSe(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var PR=class extends zSe{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||IR().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=NH(this._idle,i=>i.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(i=>i!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=oy(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new uc(r.callback)),n;let s=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new uc(s),o=setTimeout(()=>{NH(this._pendingQueue,a=>a.callback===s),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),n}return this.newClient(new uc(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=GSe(this,r);this.log("checking client timeout");let s,i=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(s&&clearTimeout(s),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,IH);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new uc((u,l,d)=>d()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,IH);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&WSe(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new xR(e,r,i)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let i=oy(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(n=r,r=void 0);let s=oy(this.Promise,n);return n=s.callback,this.connect((i,o)=>{if(i)return n(i);let a=!1,c=u=>{a||(a=!0,o.release(u),n(u))};o.once("error",c),this.log("dispatching query");try{o.query(e,r,(u,l)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?n(u):n(void 0,l)})}catch(u){return o.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=oy(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};OH.exports=PR});var MH=_((uqe,kH)=>{"use strict";var LH=require("events").EventEmitter,KSe=require("util"),NR=nc(),lc=kH.exports=function(t,e,r){LH.call(this),t=NR.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};KSe.inherits(lc,LH);var XSe={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};lc.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=XSe[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};lc.prototype.then=function(t,e){return this._getPromise().then(t,e)};lc.prototype.catch=function(t){return this._getPromise().catch(t)};lc.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};lc.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,i){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(i.length>1?s.forEach((o,a)=>{o.forEach(c=>{e.emit("row",c,i[a])})}):s.forEach(function(o){e.emit("row",o,i)})),e.state="end",e.emit("end",i),e.callback&&e.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(NR.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(NR.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var BH=_((lqe,UH)=>{"use strict";var qH;try{qH=require("pg-native")}catch(t){throw t}var QSe=Qg(),$H=require("events").EventEmitter,YSe=require("util"),JSe=Xb(),FH=MH(),dr=UH.exports=function(t){$H.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new QSe(t.types),this.native=new qH({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new JSe(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};dr.Query=FH;YSe.inherits(dr,$H);dr.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};dr.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};dr.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};dr.prototype.query=function(t,e,r){let n,s,i,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(i=t.query_timeout||this.connectionParameters.query_timeout,n=new FH(t,e,r),!n.callback){let c,u;s=new this._Promise((l,d)=>{c=l,u=d}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,d)=>l?u(l):c(d)}return i&&(a=n.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};dr.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=i=>i?s(i):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};dr.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};dr.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};dr.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};dr.prototype.ref=function(){};dr.prototype.unref=function(){};dr.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};dr.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var OR=_((dqe,jH)=>{"use strict";jH.exports=BH()});var IR=_((pqe,Jl)=>{"use strict";var ZSe=PH(),eve=Xl(),tve=bR(),rve=Yb(),nve=nc(),sve=DH(),ive=Qg(),{DatabaseError:ove}=SR(),{escapeIdentifier:ave,escapeLiteral:cve}=nc(),uve=t=>class extends sve{constructor(r){super(r,t)}},DR=function(t){this.defaults=eve,this.Client=t,this.Query=this.Client.Query,this.Pool=uve(this.Client),this._pools=[],this.Connection=tve,this.types=Kl(),this.DatabaseError=ove,this.TypeOverrides=ive,this.escapeIdentifier=ave,this.escapeLiteral=cve,this.Result=rve,this.utils=nve};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Jl.exports=new DR(OR()):(Jl.exports=new DR(ZSe),Object.defineProperty(Jl.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new DR(OR())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(Jl.exports,"native",{value:t}),t}}))});var Xwe={};At(Xwe,{handler:()=>Awe});module.exports=le(Xwe);var py=T(e$());var zg=require("aws-sdk");var Xw={PRETTY:4,COMPACT:0};var Pe={TRACE:6,DEBUG:8,INFO:12,WARN:16,ERROR:20,CRITICAL:24,SILENT:28},t$=["level","message","sampling_rate","service","timestamp"],r$="Uncaught error detected, flushing log buffer before exit";var n$="POWERTOOLS_DEV",s$="POWERTOOLS_SERVICE_NAME",i$="_X_AMZN_TRACE_ID";var ut=({key:t,defaultValue:e,errorMessage:r})=>{let n=process.env[t];if(n===void 0){if(e!==void 0)return e;throw r?new Error(r):new Error(`Environment variable ${t} is required`)}return n.trim()},o$=({key:t,defaultValue:e,errorMessage:r})=>{let n=ut({key:t,defaultValue:String(e),errorMessage:r}),s=Number(n);if(Number.isNaN(s))throw new TypeError(`Environment variable ${t} must be a number`);return s},Zue=new Set(["1","y","yes","t","true","on"]),ele=new Set(["0","n","no","f","false","off"]),Qw=({key:t,defaultValue:e,errorMessage:r,extendedParsing:n})=>{let i=ut({key:t,defaultValue:String(e),errorMessage:r}).toLowerCase();if(n){if(Zue.has(i))return!0;if(ele.has(i))return!1}if(i!=="true"&&i!=="false")throw new Error(`Environment variable ${t} must be a boolean`);return i==="true"},rl=()=>{try{return Qw({key:n$,extendedParsing:!0})}catch{return!1}},a$=()=>ut({key:s$,defaultValue:""}),c$=()=>{let t=ut({key:i$,defaultValue:""});if(t==="")return;if(!t.includes("="))return{Root:t};let e={};for(let r of t.split(";")){let[n,s]=r.split("=");e[n]=s}return e},u$=()=>c$()?.Sampled==="1",Zn=()=>c$()?.Root;var Mm,qm,l$,nl=class{constructor(){Le(this,qm);Le(this,Mm,e=>{let r="2-digit",n=Intl.supportedValuesOf("timeZone").includes(e)?e:"UTC";return new Intl.DateTimeFormat("en",{hourCycle:"h23",year:"numeric",month:r,day:r,hour:r,minute:r,second:r,timeZone:n})})}formatError(e){let{name:r,message:n,stack:s,cause:i,...o}=e,a={name:r,location:this.getCodeLocation(e.stack),message:n,stack:rl()&&typeof s=="string"?s?.split(`
`):s,cause:i instanceof Error?this.formatError(i):i};for(let c in e)typeof c=="string"&&!["name","message","stack","cause"].includes(c)&&(a[c]=o[c]);return a}formatTimestamp(e){let r="UTC",n=ut({key:"TZ",defaultValue:""});return n&&!n.includes(r)?je(this,qm,l$).call(this,e,n):e.toISOString()}getCodeLocation(e){if(!e)return"";let r=e.split(`
`),n=/\(([^()]*?):(\d+?):(\d+?)\)\\?$/;for(let s of r){let i=n.exec(s);if(Array.isArray(i))return`${i[1]}:${Number(i[2])}`}return""}};Mm=new WeakMap,qm=new WeakSet,l$=function(e,r){let{year:n,month:s,day:i,hour:o,minute:a,second:c}=k(this,Mm).call(this,r).formatToParts(e).reduce((x,A)=>(x[A.type]=A.value,x),{}),u=`${n}-${s}-${i}T${o}:${a}:${c}`,l=-e.getTimezoneOffset(),d=l>=0?"+":"-",m=Math.abs(Math.floor(l/60)).toString().padStart(2,"0"),g=Math.abs(l%60).toString().padStart(2,"0"),E=e.getMilliseconds().toString().padStart(3,"0"),b=`${d}${m}:${g}`;return`${u}.${E}${b}`};var F$=T(a0(),1);var Fa=class{constructor(e){f(this,"attributes",{});this.setAttributes(e.attributes)}addAttributes(e){return(0,F$.default)(this.attributes,e),this}getAttributes(){return this.attributes}prepareForPrint(){this.attributes=this.removeEmptyKeys(this.getAttributes())}removeEmptyKeys(e){let r={};for(let n in e)e[n]!==void 0&&e[n]!==""&&e[n]!==null&&(r[n]=e[n]);return r}setAttributes(e){this.attributes=e}};var K$=require("console"),X$=require("crypto");var Js="2.28.1";var c0=process.env.AWS_EXECUTION_ENV||"NA",Gde={relation:"after",toMiddleware:"getUserAgentMiddleware",name:"addPowertoolsToUserAgent",tags:["POWERTOOLS","USER_AGENT"]},U$=t=>typeof t=="object"&&t!==null&&"send"in t&&typeof t.send=="function"&&"config"in t&&t.config!==void 0&&typeof t.config=="object"&&t.config!==null&&"middlewareStack"in t&&t.middlewareStack!==void 0&&typeof t.middlewareStack=="object"&&t.middlewareStack!==null&&"identify"in t.middlewareStack&&typeof t.middlewareStack.identify=="function"&&"addRelativeTo"in t.middlewareStack&&typeof t.middlewareStack.addRelativeTo=="function",Kde=t=>e=>async r=>{let n=r.request.headers["user-agent"]||"";if(n.includes("PT/NO-OP")){let s=n.replace("PT/NO-OP",`PT/${t}/${Js} PTEnv/${c0}`);return r.request.headers["user-agent"]=s,await e(r)}return n.includes("PT/")?await e(r):(r.request.headers["user-agent"]=n===""?`PT/${t}/${Js} PTEnv/${c0}`:`${n} PT/${t}/${Js} PTEnv/${c0}`,await e(r))},Xde=t=>{let e=!1;for(let r of t)r.includes("addPowertoolsToUserAgent")&&(e=!0);return e},u0=(t,e)=>{try{if(U$(t)){if(Xde(t.middlewareStack.identify()))return;t.middlewareStack.addRelativeTo(Kde(e),Gde)}else throw new Error("The client provided does not match the expected interface")}catch(r){console.warn("Failed to add user agent middleware",r)}};var Wm="powertools-for-aws",B$=`${Wm}.tracer`,j$=`${Wm}.metrics`,H$=`${Wm}.logger`,V$=`${Wm}.idempotency`;var l0=t=>typeof t=="string";var z$=t=>Object.is(t,null),d0=t=>z$(t)||Object.is(t,void 0);var Ua,Gi=class{constructor(){Le(this,Ua);f(this,"coldStart",!0);f(this,"defaultServiceName","service_undefined");pt(this,Ua,this.getInitializationType()),k(this,Ua)!=="on-demand"&&(this.coldStart=!1)}getInitializationType(){let e=process.env.AWS_LAMBDA_INITIALIZATION_TYPE?.trim();return e==="on-demand"?"on-demand":e==="provisioned-concurrency"?"provisioned-concurrency":"unknown"}getColdStart(){return k(this,Ua)!=="on-demand"?!1:this.coldStart?(this.coldStart=!1,!0):!1}isValidServiceName(e){return typeof e=="string"&&e.trim().length>0}};Ua=new WeakMap;var W$=process.env.AWS_EXECUTION_ENV||"NA";process.env.AWS_SDK_UA_APP_ID?process.env.AWS_SDK_UA_APP_ID=`${process.env.AWS_SDK_UA_APP_ID}/PT/NO-OP/${Js}/PTEnv/${W$}`:process.env.AWS_SDK_UA_APP_ID=`PT/NO-OP/${Js}/PTEnv/${W$}`;var ul=T(a0(),1);var Ba,Gm=class extends nl{constructor(r){super();Le(this,Ba);pt(this,Ba,r?.logRecordOrder)}formatAttributes(r,n){let s={level:r.logLevel,message:r.message,timestamp:this.formatTimestamp(r.timestamp),service:r.serviceName,cold_start:r.lambdaContext?.coldStart,function_arn:r.lambdaContext?.invokedFunctionArn,function_memory_size:r.lambdaContext?.memoryLimitInMB,function_name:r.lambdaContext?.functionName,function_request_id:r.lambdaContext?.awsRequestId,sampling_rate:r.sampleRateValue,xray_trace_id:r.xRayTraceId};if(k(this,Ba)===void 0)return new Fa({attributes:s}).addAttributes(n);let i={};for(let a of k(this,Ba))a in s&&!(a in i)?i[a]=s[a]:a in n&&!(a in i)&&(i[a]=n[a]);for(let a in s)a in i||(i[a]=s[a]);for(let a in n)a in i||(i[a]=n[a]);return new Fa({attributes:i})}};Ba=new WeakMap;var f0=class{constructor(e,r){f(this,"value");f(this,"logLevel");f(this,"byteSize");if(!l0(e))throw new Error("Value should be a string");this.value=e,this.logLevel=r,this.byteSize=Buffer.byteLength(e)}},p0=class extends Set{constructor(){super(...arguments);f(this,"currentBytesSize",0);f(this,"hasEvictedLog",!1)}add(r){return this.currentBytesSize+=r.byteSize,super.add(r),this}delete(r){let n=super.delete(r);return n&&(this.currentBytesSize-=r.byteSize),n}clear(){super.clear(),this.currentBytesSize=0}shift(){let r=this.values().next().value;return r&&this.delete(r),r}},Ki,ja,Xm,G$,Km=class extends Map{constructor({maxBytesSize:r,onBufferOverflow:n}){super();Le(this,Xm);Le(this,Ki);Le(this,ja);pt(this,Ki,r),pt(this,ja,n)}setItem(r,n,s){let i=new f0(n,s);if(i.byteSize>k(this,Ki))throw new Error("Item too big");let o=this.get(r)||new p0;return o.currentBytesSize+i.byteSize>=k(this,Ki)&&(je(this,Xm,G$).call(this,o,i),k(this,ja)&&k(this,ja).call(this)),o.add(i),super.set(r,o),this}};Ki=new WeakMap,ja=new WeakMap,Xm=new WeakSet,G$=function(r,n){for(;r.currentBytesSize+n.byteSize>=k(this,Ki);)r.shift(),r.hasEvictedLog=!0};var en,Ha,pl,tn,Zs,Xi,ft,wn,Qi,rs,hl,De,ll,h0,Q$,Y$,J$,Z$,m0,dl,eF,g0=class g0 extends Gi{constructor(r={}){super();Le(this,De);f(this,"console");f(this,"customConfigService");f(this,"logEvent",!1);f(this,"logFormatter");f(this,"logIndentation",Xw.COMPACT);f(this,"logLevel",Pe.INFO);Le(this,en);f(this,"persistentLogAttributes",{});f(this,"powertoolsLogData",{sampleRateValue:0});f(this,"temporaryLogAttributes",{});Le(this,Ha,[]);Le(this,pl,!1);Le(this,tn,new Map);Le(this,Zs,Pe.INFO);Le(this,Xi);Le(this,ft,{enabled:!1,flushOnErrorLog:!0,maxBytes:20480,bufferAtVerbosity:Pe.DEBUG});Le(this,wn);Le(this,Qi);Le(this,rs,{sampleRateValue:0,refreshedTimes:0});Le(this,hl,new Map);let{customConfigService:n,...s}=r;this.customConfigService=n||void 0,this.setOptions(s),pt(this,pl,!0);for(let[i,o]of k(this,Ha))this.printLog(i,this.createAndPopulateLogItem(...o));pt(this,Ha,[])}get level(){return this.logLevel}addContext(r){this.addToPowertoolsLogData({lambdaContext:{invokedFunctionArn:r.invokedFunctionArn,coldStart:this.getColdStart(),awsRequestId:r.awsRequestId,memoryLimitInMB:r.memoryLimitInMB,functionName:r.functionName,functionVersion:r.functionVersion}})}addPersistentLogAttributes(r){this.appendPersistentKeys(r)}appendKeys(r){je(this,De,h0).call(this,r,"temp")}appendPersistentKeys(r){je(this,De,h0).call(this,r,"persistent")}createChild(r={}){let n=this.createLogger((0,ul.default)({},{logLevel:this.getLevelName(),serviceName:this.powertoolsLogData.serviceName,sampleRateValue:k(this,rs).sampleRateValue,logFormatter:this.getLogFormatter(),customConfigService:this.getCustomConfigService(),environment:this.powertoolsLogData.environment,persistentLogAttributes:this.persistentLogAttributes,jsonReplacerFn:k(this,Xi),correlationIdSearchFn:k(this,Qi),...k(this,ft).enabled&&{logBufferOptions:{maxBytes:k(this,ft).maxBytes,bufferAtVerbosity:this.getLogLevelNameFromNumber(k(this,ft).bufferAtVerbosity),flushOnErrorLog:k(this,ft).flushOnErrorLog}}},r));return this.powertoolsLogData.lambdaContext&&n.addContext(this.powertoolsLogData.lambdaContext),this.temporaryLogAttributes&&n.appendKeys(this.temporaryLogAttributes),n}critical(r,...n){this.processLogItem(Pe.CRITICAL,r,n)}debug(r,...n){this.processLogItem(Pe.DEBUG,r,n)}error(r,...n){k(this,ft).enabled&&k(this,ft).flushOnErrorLog&&this.flushBuffer(),this.processLogItem(Pe.ERROR,r,n)}getLevelName(){return this.getLogLevelNameFromNumber(this.logLevel)}getLogEvent(){return this.logEvent}getPersistentLogAttributes(){return this.persistentLogAttributes}info(r,...n){this.processLogItem(Pe.INFO,r,n)}injectLambdaContext(r){return(n,s,i)=>{let o=i.value,a=this;i.value=async function(...c){a.refreshSampleRateCalculation(),a.addContext(c[1]),a.logEventIfEnabled(c[0],r?.logEvent),r?.correlationIdPath&&a.setCorrelationId(c[0],r?.correlationIdPath);try{return await o.apply(this,c)}catch(u){throw r?.flushBufferOnUncaughtError&&(a.flushBuffer(),a.error({message:r$,error:u})),u}finally{(r?.clearState||r?.resetKeys)&&a.resetKeys(),a.clearBuffer()}}}}static injectLambdaContextAfterOrOnError(r,n,s){s&&(s.clearState||s?.resetKeys)&&r.resetKeys()}static injectLambdaContextBefore(r,n,s,i){r.addContext(s),r.logEventIfEnabled(n,i?.logEvent)}logEventIfEnabled(r,n){this.shouldLogEvent(n)&&this.info("Lambda invocation event",{event:r})}refreshSampleRateCalculation(){if(k(this,rs).refreshedTimes===0){k(this,rs).refreshedTimes++;return}je(this,De,m0).call(this)&&this.logLevel>Pe.TRACE?(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate")):this.setLogLevel(this.getLogLevelNameFromNumber(k(this,Zs)))}removeKeys(r){for(let n of r)this.temporaryLogAttributes[n]=void 0,this.persistentLogAttributes[n]?k(this,tn).set(n,"persistent"):k(this,tn).delete(n)}removePersistentKeys(r){for(let n of r)this.persistentLogAttributes[n]=void 0,this.temporaryLogAttributes[n]?k(this,tn).set(n,"temp"):k(this,tn).delete(n)}removePersistentLogAttributes(r){this.removePersistentKeys(r)}resetKeys(){for(let r of Object.keys(this.temporaryLogAttributes))this.persistentLogAttributes[r]?k(this,tn).set(r,"persistent"):k(this,tn).delete(r);this.temporaryLogAttributes={}}setLogLevel(r){if(!this.awsLogLevelShortCircuit(r))if(this.isValidLogLevel(r))this.logLevel=Pe[r];else throw new Error(`Invalid log level: ${r}`)}setPersistentLogAttributes(r){this.persistentLogAttributes=r}shouldLogEvent(r){return typeof r=="boolean"?r:this.getLogEvent()}trace(r,...n){this.processLogItem(Pe.TRACE,r,n)}warn(r,...n){this.processLogItem(Pe.WARN,r,n)}createLogger(r){return new g0(r)}getJsonReplacer(){let r=new WeakSet;return(n,s)=>{var o;let i=s;if(k(this,Xi)&&(i=(o=k(this,Xi))==null?void 0:o.call(this,n,i)),i instanceof Error&&(i=this.getLogFormatter().formatError(i)),typeof i=="bigint")return i.toString();if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return i}}addToPowertoolsLogData(r){(0,ul.default)(this.powertoolsLogData,r)}awsLogLevelShortCircuit(r){return k(this,en)!==void 0?(this.logLevel=Pe[k(this,en)],this.isValidLogLevel(r)&&this.logLevel>Pe[r]&&je(this,De,ll).call(this,`Current log level (${r}) does not match AWS Lambda Advanced Logging Controls minimum log level (${k(this,en)}). This can lead to data loss, consider adjusting them.`),!0):!1}createAndPopulateLogItem(r,n,s){let i={logLevel:this.getLogLevelNameFromNumber(r),timestamp:new Date,xRayTraceId:Zn(),...this.getPowertoolsLogData(),message:""},o=je(this,De,Q$).call(this);return je(this,De,Y$).call(this,n,i,o),je(this,De,J$).call(this,s,o),this.getLogFormatter().formatAttributes(i,o)}getCustomConfigService(){return this.customConfigService}getLogFormatter(){return this.logFormatter}getLogLevelNameFromNumber(r){let n;for(let[s,i]of Object.entries(Pe))if(i===r){n=s;break}return n}getPowertoolsLogData(){return this.powertoolsLogData}isValidLogLevel(r){return typeof r=="string"&&r in Pe}isValidSampleRate(r){return typeof r=="number"&&0<=r&&r<=1}printLog(r,n){n.prepareForPrint();let s=r===Pe.CRITICAL?"error":this.getLogLevelNameFromNumber(r).toLowerCase();this.console[s](JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation))}processLogItem(r,n,s){let i=Zn();if(i!==void 0&&this.shouldBufferLog(i,r)){try{this.bufferLogItem(i,this.createAndPopulateLogItem(r,n,s),r)}catch(o){this.printLog(Pe.WARN,this.createAndPopulateLogItem(Pe.WARN,`Unable to buffer log: ${o.message}`,[o])),this.printLog(r,this.createAndPopulateLogItem(r,n,s))}return}r>=this.logLevel&&(k(this,pl)?this.printLog(r,this.createAndPopulateLogItem(r,n,s)):k(this,Ha).push([r,[r,n,s]]))}setConsole(){rl()?this.console=console:this.console=new K$.Console({stdout:process.stdout,stderr:process.stderr}),this.console.trace=(r,...n)=>{this.console.log(r,...n)}}setInitialLogLevel(r){let n=r?.toUpperCase();if(this.awsLogLevelShortCircuit(n)){pt(this,Zs,this.logLevel);return}if(this.isValidLogLevel(n)){this.logLevel=Pe[n],pt(this,Zs,this.logLevel);return}let s=this.getCustomConfigService()?.getLogLevel()?.toUpperCase();if(this.isValidLogLevel(s)){this.logLevel=Pe[s],pt(this,Zs,this.logLevel);return}let i=ut({key:"POWERTOOLS_LOG_LEVEL",defaultValue:""}),o=ut({key:"LOG_LEVEL",defaultValue:""}),a=i!==""?i:o;this.isValidLogLevel(a)&&(this.logLevel=Pe[a],pt(this,Zs,this.logLevel))}setInitialSampleRate(r){let n=r,s=this.getCustomConfigService()?.getSampleRateValue(),i=o$({key:"POWERTOOLS_LOGGER_SAMPLE_RATE",defaultValue:0});for(let o of[n,s,i])if(this.isValidSampleRate(o)){k(this,rs).sampleRateValue=o,this.powertoolsLogData.sampleRateValue=o,je(this,De,m0).call(this)&&this.logLevel>Pe.TRACE&&(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate"));break}}setLogEvent(){this.logEvent=Qw({key:"POWERTOOLS_LOGGER_LOG_EVENT",defaultValue:!1})}setLogFormatter(r,n){this.logFormatter=r??new Gm({logRecordOrder:n})}setLogIndentation(){rl()&&(this.logIndentation=Xw.PRETTY)}setOptions(r){let{logLevel:n,serviceName:s,sampleRateValue:i,logFormatter:o,persistentKeys:a,persistentLogAttributes:c,environment:u,jsonReplacerFn:l,logRecordOrder:d,logBufferOptions:m,correlationIdSearchFn:g}=r;c&&Object.keys(c).length>0&&a&&Object.keys(a).length>0&&this.warn("Both persistentLogAttributes and persistentKeys options were provided. Using persistentKeys as persistentLogAttributes is deprecated and will be removed in future releases"),this.setPowertoolsLogData(s,u,a||c);let E=ut({key:"AWS_LAMBDA_LOG_LEVEL",defaultValue:""}),b=E==="FATAL"?"CRITICAL":E;return this.isValidLogLevel(b)&&pt(this,en,b),this.setLogEvent(),this.setInitialLogLevel(n),this.setInitialSampleRate(i),this.setLogFormatter(o,d),this.setConsole(),this.setLogIndentation(),pt(this,Xi,l),je(this,De,eF).call(this,m),pt(this,Qi,g),this}setPowertoolsLogData(r,n,s){this.addToPowertoolsLogData({awsRegion:ut({key:"AWS_REGION",defaultValue:""}),environment:n||this.getCustomConfigService()?.getCurrentEnvironment()||ut({key:"ENVIRONMENT",defaultValue:""}),serviceName:r||this.getCustomConfigService()?.getServiceName()||ut({key:"POWERTOOLS_SERVICE_NAME",defaultValue:""})||this.defaultServiceName}),s&&this.appendPersistentKeys(s)}bufferLogItem(r,n,s){n.prepareForPrint(),k(this,wn)?.has(r)===!1&&k(this,wn)?.clear(),k(this,wn)?.setItem(r,JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation),s)}flushBuffer(){let r=Zn();if(r===void 0)return;let n=k(this,wn)?.get(r);if(n!==void 0){for(let s of n){let i=this.getLogLevelNameFromNumber(s.logLevel).toLowerCase();this.console[i](s.value)}n.hasEvictedLog&&this.printLog(Pe.WARN,this.createAndPopulateLogItem(Pe.WARN,"Some logs are not displayed because they were evicted from the buffer. Increase buffer size to store more logs in the buffer",[])),k(this,en)!==void 0&&Pe[k(this,en)]>k(this,ft).bufferAtVerbosity&&je(this,De,ll).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Some logs might be missing."),k(this,wn)?.delete(r)}}clearBuffer(){let r=Zn();r!==void 0&&k(this,wn)?.delete(r)}shouldBufferLog(r,n){return k(this,ft).enabled&&r!==void 0&&n<=k(this,ft).bufferAtVerbosity}setCorrelationId(r,n){if(typeof n=="string"){if(!k(this,Qi)){je(this,De,ll).call(this,"correlationIdPath is set but no search function was provided. The correlation ID will not be added to the log attributes.");return}let s=k(this,Qi).call(this,n,r);s&&this.appendKeys({correlation_id:s});return}this.appendKeys({correlation_id:r})}getCorrelationId(){return this.temporaryLogAttributes.correlation_id}};en=new WeakMap,Ha=new WeakMap,pl=new WeakMap,tn=new WeakMap,Zs=new WeakMap,Xi=new WeakMap,ft=new WeakMap,wn=new WeakMap,Qi=new WeakMap,rs=new WeakMap,hl=new WeakMap,De=new WeakSet,ll=function(r){k(this,hl).has(r)||(k(this,hl).set(r,!0),this.warn(r))},h0=function(r,n){for(let s of Object.keys(r))je(this,De,dl).call(this,s)===!1&&k(this,tn).set(s,n);n==="temp"?(0,ul.default)(this.temporaryLogAttributes,r):(0,ul.default)(this.persistentLogAttributes,r)},Q$=function(){let r={};for(let[n,s]of k(this,tn))je(this,De,dl).call(this,n)||(r[n]=s==="persistent"?this.persistentLogAttributes[n]:this.temporaryLogAttributes[n]);return r},Y$=function(r,n,s){if(typeof r=="string"){n.message=r;return}let{message:i,...o}=r;n.message=i;for(let[a,c]of Object.entries(o))je(this,De,dl).call(this,a)||(s[a]=c)},J$=function(r,n){for(let s of r)d0(s)||(s instanceof Error?n.error=s:typeof s=="string"?n.extra=s:je(this,De,Z$).call(this,s,n))},Z$=function(r,n){for(let[s,i]of Object.entries(r))je(this,De,dl).call(this,s)||(n[s]=i)},m0=function(){return k(this,rs).sampleRateValue&&(0,X$.randomInt)(0,100)/100<=k(this,rs).sampleRateValue},dl=function(r){return t$.includes(r)?(this.warn(`The key "${r}" is a reserved key and will be dropped.`),!0):!1},eF=function(r){if(r===void 0||(k(this,ft).enabled=r?.enabled!==!1,k(this,ft).enabled===!1))return;r?.maxBytes!==void 0&&(k(this,ft).maxBytes=r.maxBytes),pt(this,wn,new Km({maxBytesSize:k(this,ft).maxBytes})),r?.flushOnErrorLog===!1&&(k(this,ft).flushOnErrorLog=!1);let n=r?.bufferAtVerbosity?.toUpperCase();this.isValidLogLevel(n)&&(k(this,ft).bufferAtVerbosity=Pe[n]),k(this,en)!==void 0&&Pe[k(this,en)]>k(this,ft).bufferAtVerbosity&&je(this,De,ll).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Buffered logs will be filtered by ALC")};var fl=g0;Va();var za=class t{constructor(e,r){this.logger=new fl({serviceName:e||process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",logLevel:process.env.LOG_LEVEL||"INFO",sampleRateValue:.1}),this.context={traceId:r?.traceId||ss(),...r},this.context.agent&&this.logger.appendKeys({agent:this.context.agent}),this.context.leadId&&this.logger.appendKeys({leadId:this.context.leadId}),this.context.tenantId&&this.logger.appendKeys({tenantId:this.context.tenantId})}getTraceId(){return this.context.traceId||""}setTraceId(e){this.context.traceId=e}getContext(){return{...this.context}}updateContext(e){this.context={...this.context,...e};let r={};e.agent&&(r.agent=e.agent),e.leadId&&(r.leadId=e.leadId),e.tenantId&&(r.tenantId=e.tenantId),e.campaignId&&(r.campaignId=e.campaignId),Object.keys(r).length>0&&this.logger.appendKeys(r)}info(e,r){this.logger.info(e,{trace_id:this.context.traceId,...r})}warn(e,r){this.logger.warn(e,{trace_id:this.context.traceId,...r})}error(e,r,n){let s=r?{error:{name:r.name,message:r.message,stack:r.stack}}:{};this.logger.error(e,{trace_id:this.context.traceId,...s,...n})}debug(e,r){this.logger.debug(e,{trace_id:this.context.traceId,...r})}appendKeys(e){this.logger.appendKeys(e)}removeKeys(e){this.logger.removeKeys(e)}createChild(e){return new t(process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",{...this.context,...e})}logCustomMetric(e,r,n){this.info(`Custom metric: ${e}`,{metric:e,value:r,...n})}logApiRequest(e,r,n){this.info(`API Request: ${e} ${r}`,{method:e,path:r,...n})}finishOperation(e,r){e?this.info("Operation completed successfully",r):this.error("Operation failed",void 0,r)}};function IF(t,e){return new za(t,e)}var v1e=new za;Va();var Yj=T(xb(),1);var Kj=T(xb(),1),Bg=require("diagnostics_channel"),Xj=T(require("http"),1),Qj=T(require("https"),1);var Pb=require("url"),Hj=new TextDecoder,Vj=(t,e)=>{let r=-1;for(let n=0;n<t.length;n+=2)if(Hj.decode(t[n]).toLowerCase()===e){r=n;break}return r===-1?null:Hj.decode(t[r+1])},Ib=t=>t!==void 0&&"http"in t&&"parent"in t&&"namespace"in t&&t.namespace==="remote",zj=t=>{if(typeof t.origin=="string")return new Pb.URL(`${t.origin}${t.path||""}`);if(t.origin instanceof Pb.URL)return t.origin.pathname=t.path||"",t.origin};var{captureAWS:Mye,captureAWSClient:qye,captureAWSv3Client:$ye,captureAsyncFunc:Fye,captureFunc:Uye,captureHTTPsGlobal:Wj,getNamespace:Bye,getSegment:jye,setSegment:Hye,Segment:Gj,setContextMissingStrategy:Vye,setDaemonAddress:zye,setLogger:Wye}=Kj.default,jg=class{captureAWS(e){return Mye(e)}captureAWSClient(e){return qye(e)}captureAWSv3Client(e){return u0(e,"tracer"),$ye(e)}captureAsyncFunc(e,r,n){return Fye(e,r)}captureFunc(e,r,n){return Uye(e,r)}captureHTTPsGlobal(){Wj(Xj.default),Wj(Qj.default)}getNamespace(){return Bye()}getSegment(){return jye()}instrumentFetch(){let e=s=>{let{request:i}=s,o=i.method;if(o==="CONNECT")return;let a=this.getSegment(),c=zj(i);if(a&&c){let u=a.addNewSubsegment(c.hostname);u.addAttribute("namespace","remote"),i.addHeader("X-Amzn-Trace-Id",`Root=${Zn()};Parent=${u.id};Sampled=${u.notTraced?"0":"1"}`),u.http={request:{url:`${c.protocol}//${c.hostname}${c.pathname}`,method:o}},this.setSegment(u)}},r=s=>{let{response:i}=s,o=this.getSegment();if(Ib(o)){let a=i.statusCode,c=Vj(i.headers,"content-length");o.http={...o.http,response:{status:a,...c&&{content_length:Number.parseInt(c,10)}}},a===429&&o.addThrottleFlag(),a>=400&&a<500?o.addErrorFlag():a>=500&&a<600&&o.addFaultFlag(),o.close(),this.setSegment(o.parent)}},n=s=>{let{error:i}=s,o=this.getSegment();Ib(o)&&(o.addErrorFlag(),i instanceof Error&&o.addError(i,!0),o.close(),this.setSegment(o.parent))};(0,Bg.subscribe)("undici:request:create",e),(0,Bg.subscribe)("undici:request:headers",r),(0,Bg.subscribe)("undici:request:error",n)}putAnnotation(e,r){let n=this.getSegment();if(n===void 0){console.warn("No active segment or subsegment found, skipping annotation");return}if(n instanceof Gj){console.warn("You cannot annotate the main segment in a Lambda execution environment");return}n.addAnnotation(e,r)}putMetadata(e,r,n){let s=this.getSegment();if(s===void 0){console.warn("No active segment or subsegment found, skipping metadata addition");return}if(s instanceof Gj){console.warn("You cannot add metadata to the main segment in a Lambda execution environment");return}s.addMetadata(e,r,n)}setContextMissingStrategy(e){Vye(e)}setDaemonAddress(e){zye(e)}setLogger(e){Wye(e)}setSegment(e){Hye(e)}};(process.env.AWS_XRAY_CONTEXT_MISSING===""||process.env.AWS_XRAY_CONTEXT_MISSING===void 0)&&(process.env.AWS_XRAY_CONTEXT_MISSING="IGNORE_ERROR");var{Subsegment:Gye}=Yj.default,lt,Hg,Jj,Bl=class extends Gi{constructor(r={}){super();Le(this,Hg);f(this,"provider");f(this,"captureError",!0);f(this,"captureHTTPsRequests",!0);f(this,"captureResponse",!0);f(this,"customConfigService");Le(this,lt,{awsExecutionEnv:"",samLocal:"",captureError:"",captureHTTPsRequests:"",captureResponse:"",tracingEnabled:"",serviceName:""});f(this,"serviceName");f(this,"tracingEnabled",!0);je(this,Hg,Jj).call(this),this.setOptions(r),this.provider=new jg,this.isTracingEnabled()&&this.captureHTTPsRequests&&(this.provider.captureHTTPsGlobal(),this.provider.instrumentFetch()),this.isTracingEnabled()||this.provider.setContextMissingStrategy(()=>({}))}addErrorAsMetadata(r,n){if(!this.isTracingEnabled())return;let s=this.getSegment();if(s!==void 0){if(!this.captureError){s.addErrorFlag();return}s.addError(r,n||!1)}}addResponseAsMetadata(r,n){r===void 0||!this.captureResponse||!this.isTracingEnabled()||this.putMetadata(`${n} response`,r)}addServiceNameAnnotation(){this.isTracingEnabled()&&this.putAnnotation("Service",this.serviceName)}annotateColdStart(){this.isTracingEnabled()&&this.putAnnotation("ColdStart",this.getColdStart())}captureAWS(r){return this.isTracingEnabled()?this.provider.captureAWS(r):r}captureAWSClient(r){if(!this.isTracingEnabled())return r;try{return this.provider.captureAWSClient(r)}catch(n){try{return this.provider.captureAWSClient(r.service),r}catch{throw n}}}captureAWSv3Client(r){return this.isTracingEnabled()?this.provider.captureAWSv3Client(r):r}captureLambdaHandler(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){return a.isTracingEnabled()?a.provider.captureAsyncFunc(`## ${process.env._HANDLER}`,async u=>{a.annotateColdStart(),a.addServiceNameAnnotation();let l;try{l=await o.apply(this,c),(r?.captureResponse??!0)&&a.addResponseAsMetadata(l,process.env._HANDLER)}catch(d){throw a.addErrorAsMetadata(d),d}finally{try{u?.close()}catch(d){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",u?.name,d)}}return l}):o.apply(this,c)},i}}captureMethod(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){if(!a.isTracingEnabled())return o.apply(this,[...c]);let u=String(s),l=r?.subSegmentName?r.subSegmentName:`### ${u}`;return a.provider.captureAsyncFunc(l,async d=>{let m;try{m=await o.apply(this,[...c]),(r?.captureResponse??!0)&&a.addResponseAsMetadata(m,u)}catch(g){throw a.addErrorAsMetadata(g),g}finally{try{d?.close()}catch(g){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",d?.name,g)}}return m})},i}}getRootXrayTraceId(){return Zn()}getSegment(){if(!this.isTracingEnabled())return new Gye("## Dummy segment");let r=this.provider.getSegment();return r===void 0&&console.warn("Failed to get the current sub/segment from the context, this is likely because you are not using the Tracer in a Lambda function."),r}isTraceSampled(){return this.isTracingEnabled()?u$():!1}isTracingEnabled(){return this.tracingEnabled}putAnnotation(r,n){this.isTracingEnabled()&&this.provider.putAnnotation(r,n)}putMetadata(r,n,s){this.isTracingEnabled()&&this.provider.putMetadata(r,n,s||this.serviceName)}setSegment(r){this.isTracingEnabled()&&this.provider.setSegment(r)}getCustomConfigService(){return this.customConfigService}isAmplifyCli(){return k(this,lt).awsExecutionEnv==="AWS_Lambda_amplify-mock"}isLambdaExecutionEnv(){return k(this,lt).awsExecutionEnv!==""}isLambdaSamCli(){return k(this,lt).samLocal!==""}setCaptureError(){let r=this.getCustomConfigService()?.getTracingCaptureError();if(r!==void 0&&r.toLowerCase()==="false"){this.captureError=!1;return}if(k(this,lt).captureError.toLowerCase()==="false"){this.captureError=!1;return}}setCaptureHTTPsRequests(r){if(r!==void 0&&!r){this.captureHTTPsRequests=!1;return}let n=this.getCustomConfigService()?.getCaptureHTTPsRequests();if(n!==void 0&&n.toLowerCase()==="false"){this.captureHTTPsRequests=!1;return}k(this,lt).captureHTTPsRequests.toLowerCase()==="false"&&(this.captureHTTPsRequests=!1)}setCaptureResponse(){let r=this.getCustomConfigService()?.getTracingCaptureResponse();if(r!==void 0&&r.toLowerCase()==="false"){this.captureResponse=!1;return}if(k(this,lt).captureResponse.toLowerCase()==="false"){this.captureResponse=!1;return}}setCustomConfigService(r){this.customConfigService=r||void 0}setOptions(r){let{enabled:n,serviceName:s,captureHTTPsRequests:i,customConfigService:o}=r;return this.setCustomConfigService(o),this.setTracingEnabled(n),this.setCaptureResponse(),this.setCaptureError(),this.setServiceName(s),this.setCaptureHTTPsRequests(i),this}setServiceName(r){if(r!==void 0&&this.isValidServiceName(r)){this.serviceName=r;return}let n=this.getCustomConfigService()?.getServiceName();if(n!==void 0&&this.isValidServiceName(n)){this.serviceName=n;return}if(k(this,lt).serviceName!==void 0&&this.isValidServiceName(k(this,lt).serviceName)){this.serviceName=k(this,lt).serviceName;return}this.serviceName=this.defaultServiceName}setTracingEnabled(r){if(r!==void 0&&!r){this.tracingEnabled=r;return}let n=this.getCustomConfigService()?.getTracingEnabled();if(n!==void 0&&n.toLowerCase()==="false"){this.tracingEnabled=!1;return}if(k(this,lt).tracingEnabled.toLowerCase()==="false"){this.tracingEnabled=!1;return}(this.isAmplifyCli()||this.isLambdaSamCli()||!this.isLambdaExecutionEnv())&&(this.tracingEnabled=!1)}};lt=new WeakMap,Hg=new WeakSet,Jj=function(){k(this,lt).awsExecutionEnv=ut({key:"AWS_EXECUTION_ENV",defaultValue:""}),k(this,lt).samLocal=ut({key:"AWS_SAM_LOCAL",defaultValue:""}),k(this,lt).captureError=ut({key:"POWERTOOLS_TRACER_CAPTURE_ERROR",defaultValue:""}),k(this,lt).captureHTTPsRequests=ut({key:"POWERTOOLS_TRACER_CAPTURE_HTTPS_REQUESTS",defaultValue:""}),k(this,lt).captureResponse=ut({key:"POWERTOOLS_TRACER_CAPTURE_RESPONSE",defaultValue:""}),k(this,lt).tracingEnabled=ut({key:"POWERTOOLS_TRACE_ENABLED",defaultValue:""}),k(this,lt).serviceName=a$()};var Kye=new Bl({serviceName:process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service"});function jl(){try{return Kye.getSegment()}catch(t){console.warn("Failed to get X-Ray segment:",t);return}}function Xye(t,e,r){try{let n=jl();if(!n)return;let s=n.addNewSubsegment(t);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&s.addAnnotation(i,o);if(r)for(let[i,o]of Object.entries(r))s.addMetadata(i,o);return s}catch(n){console.warn("Failed to create X-Ray subsegment:",n);return}}function Zj(t,e="success",r){if(t)try{t.addAnnotation("status",e),r&&(t.addError(r),t.addMetadata("error",{name:r.name,message:r.message,stack:r.stack})),t.close()}catch(n){console.warn("Failed to close X-Ray subsegment:",n)}}async function Qye(t,e,r,n){let s=Xye(t,r,n);try{let i=await e();return Zj(s,"success"),i}catch(i){throw Zj(s,"error",i),i}}function eo(t){try{let e=jl();if(!e)return;for(let[r,n]of Object.entries(t))n!==void 0&&e.addAnnotation(r,n)}catch(e){console.warn("Failed to add X-Ray annotations:",e)}}function Vg(t,e){try{let r=jl();if(!r)return;if(e)r.addMetadata(e,t);else for(let[n,s]of Object.entries(t))r.addMetadata(n,s)}catch(r){console.warn("Failed to add X-Ray metadata:",r)}}async function e4(t,e,r){return Qye(`DB:${t}`,e,{operation:"database"},{queryParams:r})}var Yye=new zg.SQS,Jye=new zg.SNS;function Zye(t){let e=t.message.toLowerCase(),r=t.name.toLowerCase(),n=t.code,s=["timeout","econnrefused","econnreset","etimedout","enotfound","network","connection","throttl","rate limit","429","503","504","too many requests","service unavailable","gateway timeout"];for(let a of s)if(e.includes(a)||r.includes(a)||n===a)return{type:"transient",shouldRetry:!0,shouldAlert:!1};let i=["unauthorized","forbidden","access denied","authentication","security","corruption","integrity","out of memory","disk full","database corruption"];for(let a of i)if(e.includes(a)||r.includes(a))return{type:"critical",shouldRetry:!1,shouldAlert:!0};let o=["validation","invalid","not found","404","400","bad request","malformed","schema","parse error"];for(let a of o)if(e.includes(a)||r.includes(a)||n===a)return{type:"permanent",shouldRetry:!1,shouldAlert:!1};return{type:"permanent",shouldRetry:!1,shouldAlert:!1}}async function eEe(t,e,r,n){let s=process.env.DLQ_URL;if(!s){console.warn("DLQ_URL not configured, skipping DLQ send");return}try{let i={originalEvent:t,error:{name:e.name,message:e.message,stack:e.stack},traceId:r,context:{functionName:n.functionName,functionVersion:n.functionVersion,requestId:n.awsRequestId,timestamp:new Date().toISOString()}};await Yye.sendMessage({QueueUrl:s,MessageBody:JSON.stringify(i),MessageAttributes:{traceId:{DataType:"String",StringValue:r},errorType:{DataType:"String",StringValue:e.name}}}).promise(),console.log("Message sent to DLQ",{traceId:r,dlqUrl:s})}catch(i){console.error("Failed to send message to DLQ",i)}}async function tEe(t,e,r,n){let s=process.env.ALERT_TOPIC_ARN;if(!s){console.warn("ALERT_TOPIC_ARN not configured, skipping alert");return}try{let i={severity:"CRITICAL",service:r.functionName,error:{name:t.name,message:t.message,stack:t.stack},traceId:e,timestamp:new Date().toISOString(),requestId:r.awsRequestId,event:JSON.stringify(n).substring(0,500)};await Jye.publish({TopicArn:s,Subject:`\u{1F6A8} CRITICAL ERROR: ${r.functionName}`,Message:JSON.stringify(i,null,2),MessageAttributes:{severity:{DataType:"String",StringValue:"CRITICAL"},service:{DataType:"String",StringValue:r.functionName}}}).promise(),console.log("Critical alert sent",{traceId:e,alertTopicArn:s})}catch(i){console.error("Failed to send alert",i)}}function t4(t){return async(e,r)=>{let n=ss(),s=IF(r.functionName,{traceId:n}),i=jl();eo({traceId:n,functionName:r.functionName,requestId:r.awsRequestId});try{s.info("Processing event",{functionName:r.functionName});let o=await t(e,r,s);return eo({status:"success"}),s.info("Event processed successfully"),o}catch(o){let a=o,c=Zye(a);throw eo({status:"error",errorType:c.type,errorName:a.name}),Vg({error:{name:a.name,message:a.message,stack:a.stack,classification:c.type}},"error"),i&&i.addError(a),s.error("Event processing failed",a,{errorType:c.type}),c.shouldRetry||await eEe(e,a,n,r),c.shouldAlert&&await tEe(a,n,r,e),a}}}var qr=T(IR(),1),hqe=qr.default.Client,HH=qr.default.Pool,mqe=qr.default.Connection,gqe=qr.default.types,yqe=qr.default.Query,Eqe=qr.default.DatabaseError,_qe=qr.default.escapeIdentifier,Sqe=qr.default.escapeLiteral,vqe=qr.default.Result,wqe=qr.default.TypeOverrides,bqe=qr.default.defaults;var VH=require("aws-sdk");var $r=new za("database"),lve=new VH.SecretsManager,LR=class{constructor(e){this.pool=null;this.credentials=null;this.secretArn=e||process.env.DB_SECRET_ARN||""}async getCredentials(){if(this.credentials)return this.credentials;try{$r.info("Fetching database credentials from Secrets Manager",{secretArn:this.secretArn});let e=await lve.getSecretValue({SecretId:this.secretArn}).promise();if(!e.SecretString)throw new Error("Secret string is empty");let r=JSON.parse(e.SecretString);return this.credentials={username:r.username,password:r.password,host:r.host,port:r.port||5432,dbname:r.dbname||"fibonacci"},$r.info("Database credentials fetched successfully"),this.credentials}catch(e){throw $r.error("Failed to fetch database credentials",e),e}}async initializePool(){if(this.pool)return this.pool;let e=await this.getCredentials();return $r.info("Initializing database connection pool",{host:e.host,port:e.port,database:e.dbname}),this.pool=new HH({user:e.username,password:e.password,host:e.host,port:e.port,database:e.dbname,max:10,idleTimeoutMillis:3e4,connectionTimeoutMillis:1e4,ssl:{rejectUnauthorized:!1}}),this.pool.on("error",r=>{$r.error("Unexpected error on idle database client",r)}),$r.info("Database connection pool initialized"),this.pool}async getPool(){return await this.initializePool()}async close(){this.pool&&($r.info("Closing database connection pool"),await this.pool.end(),this.pool=null,this.credentials=null)}},dve=new LR;async function kR(t,e,r=3){let n=t.trim().split(" ")[0].toUpperCase();return e4(n,async()=>{let s=await dve.getPool(),i=null;for(let o=1;o<=r;o++)try{$r.debug("Executing database query",{attempt:o,query:t.substring(0,100),paramCount:e?.length||0}),Vg({query:t.substring(0,200),paramCount:e?.length||0,attempt:o},"database");let a=Date.now(),c=await s.query(t,e),u=Date.now()-a;return eo({dbOperation:n,dbRowCount:c.rowCount||0,dbDuration:u}),$r.debug("Query executed successfully",{rowCount:c.rowCount,duration:u}),c}catch(a){if(i=a,$r.warn(`Query failed on attempt ${o}`,{attempt:o,maxRetries:r,error:i.message}),!fve(i)||o===r)throw eo({dbOperation:n,dbError:i.name}),$r.error("Query failed permanently",i,{query:t.substring(0,100),attempts:o}),i;let u=Math.pow(2,o)*100;$r.debug(`Retrying query after ${u}ms`),await pve(u)}throw i||new Error("Query failed after retries")},{operation:n,paramCount:e?.length||0})}function fve(t){let e=["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","57P03","53300","08006","08003"],r=t.message.toLowerCase(),n=t.code;return e.includes(n)||r.includes("connection")||r.includes("timeout")||r.includes("econnrefused")}function pve(t){return new Promise(e=>setTimeout(e,t))}Va();var An={};At(An,{BRAND:()=>Fve,DIRTY:()=>no,EMPTY_PATH:()=>yve,INVALID:()=>Y,NEVER:()=>bwe,OK:()=>Ut,ParseStatus:()=>Tt,Schema:()=>ce,ZodAny:()=>di,ZodArray:()=>hs,ZodBigInt:()=>io,ZodBoolean:()=>oo,ZodBranded:()=>ed,ZodCatch:()=>Eo,ZodDate:()=>ao,ZodDefault:()=>yo,ZodDiscriminatedUnion:()=>uy,ZodEffects:()=>Br,ZodEnum:()=>mo,ZodError:()=>fr,ZodFirstPartyTypeKind:()=>J,ZodFunction:()=>dy,ZodIntersection:()=>fo,ZodIssueCode:()=>D,ZodLazy:()=>po,ZodLiteral:()=>ho,ZodMap:()=>gc,ZodNaN:()=>Ec,ZodNativeEnum:()=>go,ZodNever:()=>on,ZodNull:()=>uo,ZodNullable:()=>Tn,ZodNumber:()=>so,ZodObject:()=>pr,ZodOptional:()=>Fr,ZodParsedType:()=>F,ZodPipeline:()=>td,ZodPromise:()=>fi,ZodReadonly:()=>_o,ZodRecord:()=>ly,ZodSchema:()=>ce,ZodSet:()=>yc,ZodString:()=>li,ZodSymbol:()=>hc,ZodTransformer:()=>Br,ZodTuple:()=>Cn,ZodType:()=>ce,ZodUndefined:()=>co,ZodUnion:()=>lo,ZodUnknown:()=>ps,ZodVoid:()=>mc,addIssueToContext:()=>q,any:()=>Kve,array:()=>Jve,bigint:()=>Hve,boolean:()=>t3,coerce:()=>wwe,custom:()=>JH,date:()=>Vve,datetimeRegex:()=>QH,defaultErrorMap:()=>ds,discriminatedUnion:()=>rwe,effect:()=>hwe,enum:()=>dwe,function:()=>cwe,getErrorMap:()=>dc,getParsedType:()=>Rn,instanceof:()=>Bve,intersection:()=>nwe,isAborted:()=>ay,isAsync:()=>fc,isDirty:()=>cy,isValid:()=>ui,late:()=>Uve,lazy:()=>uwe,literal:()=>lwe,makeIssue:()=>Zl,map:()=>owe,nan:()=>jve,nativeEnum:()=>fwe,never:()=>Qve,null:()=>Gve,nullable:()=>gwe,number:()=>e3,object:()=>Zve,objectUtil:()=>MR,oboolean:()=>vwe,onumber:()=>Swe,optional:()=>mwe,ostring:()=>_we,pipeline:()=>Ewe,preprocess:()=>ywe,promise:()=>pwe,quotelessJson:()=>hve,record:()=>iwe,set:()=>awe,setErrorMap:()=>gve,strictObject:()=>ewe,string:()=>ZH,symbol:()=>zve,transformer:()=>hwe,tuple:()=>swe,undefined:()=>Wve,union:()=>twe,unknown:()=>Xve,util:()=>pe,void:()=>Yve});var pe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(pe||(pe={}));var MR;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(MR||(MR={}));var F=pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Rn=t=>{switch(typeof t){case"undefined":return F.undefined;case"string":return F.string;case"number":return Number.isNaN(t)?F.nan:F.number;case"boolean":return F.boolean;case"function":return F.function;case"bigint":return F.bigint;case"symbol":return F.symbol;case"object":return Array.isArray(t)?F.array:t===null?F.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?F.promise:typeof Map<"u"&&t instanceof Map?F.map:typeof Set<"u"&&t instanceof Set?F.set:typeof Date<"u"&&t instanceof Date?F.date:F.object;default:return F.unknown}};var D=pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),hve=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),fr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){let u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)if(s.path.length>0){let i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};fr.create=t=>new fr(t);var mve=(t,e)=>{let r;switch(t.code){case D.invalid_type:t.received===F.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,pe.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:r=`Unrecognized key(s) in object: ${pe.joinValues(t.keys,", ")}`;break;case D.invalid_union:r="Invalid input";break;case D.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${pe.joinValues(t.options)}`;break;case D.invalid_enum_value:r=`Invalid enum value. Expected ${pe.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:r="Invalid function arguments";break;case D.invalid_return_type:r="Invalid function return type";break;case D.invalid_date:r="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:pe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case D.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case D.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case D.custom:r="Invalid input";break;case D.invalid_intersection_types:r="Intersection results could not be merged";break;case D.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:r="Number must be finite";break;default:r=e.defaultError,pe.assertNever(t)}return{message:r}},ds=mve;var zH=ds;function gve(t){zH=t}function dc(){return zH}var Zl=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},yve=[];function q(t,e){let r=dc(),n=Zl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===ds?void 0:ds].filter(s=>!!s)});t.common.issues.push(n)}var Tt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return Y;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Y;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},Y=Object.freeze({status:"aborted"}),no=t=>({status:"dirty",value:t}),Ut=t=>({status:"valid",value:t}),ay=t=>t.status==="aborted",cy=t=>t.status==="dirty",ui=t=>t.status==="valid",fc=t=>typeof Promise<"u"&&t instanceof Promise;var V;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(V||(V={}));var Ur=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},WH=(t,e)=>{if(ui(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new fr(t.common.issues);return this._error=r,this._error}}};function se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{let{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:s}}var ce=class{get description(){return this._def.description}_getType(e){return Rn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Tt,ctx:{common:e.parent.common,data:e.data,parsedType:Rn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(fc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},s=this._parseSync({data:e,path:n.path,parent:n});return WH(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return ui(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>ui(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Rn(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(fc(s)?s:Promise.resolve(s));return WH(n,i)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:D.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Br({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Fr.create(this,this._def)}nullable(){return Tn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return hs.create(this)}promise(){return fi.create(this,this._def)}or(e){return lo.create([this,e],this._def)}and(e){return fo.create(this,e,this._def)}transform(e){return new Br({...se(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new yo({...se(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new ed({typeName:J.ZodBranded,type:this,...se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Eo({...se(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return td.create(this,e)}readonly(){return _o.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Eve=/^c[^\s-]{8,}$/i,_ve=/^[0-9a-z]+$/,Sve=/^[0-9A-HJKMNP-TV-Z]{26}$/i,vve=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wve=/^[a-z0-9_-]{21}$/i,bve=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Rve=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Cve=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Tve="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",qR,Ave=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,xve=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pve=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ive=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Nve=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ove=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,KH="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Dve=new RegExp(`^${KH}$`);function XH(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Lve(t){return new RegExp(`^${XH(t)}$`)}function QH(t){let e=`${KH}T${XH(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function kve(t,e){return!!((e==="v4"||!e)&&Ave.test(t)||(e==="v6"||!e)&&Pve.test(t))}function Mve(t,e){if(!bve.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function qve(t,e){return!!((e==="v4"||!e)&&xve.test(t)||(e==="v6"||!e)&&Ive.test(t))}var li=class t extends ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==F.string){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.string,received:i.parsedType}),Y}let n=new Tt,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?q(s,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&q(s,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Cve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"email",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")qR||(qR=new RegExp(Tve,"u")),qR.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"emoji",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")vve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"uuid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")wve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"nanoid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Eve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")_ve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid2",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Sve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ulid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),q(s,{validation:"url",code:D.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"regex",code:D.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?QH(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Dve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Lve(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Rve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"duration",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?kve(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ip",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Mve(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"jwt",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?qve(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cidr",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Nve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"base64",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Ove.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"base64url",code:D.invalid_string,message:i.message}),n.dirty()):pe.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:D.invalid_string,...V.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...V.errToObj(e)})}url(e){return this._addCheck({kind:"url",...V.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...V.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...V.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...V.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...V.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...V.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...V.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...V.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...V.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...V.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...V.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...V.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...V.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...V.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...V.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...V.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...V.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...V.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...V.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...V.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...V.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...V.errToObj(r)})}nonempty(e){return this.min(1,V.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};li.create=t=>new li({checks:[],typeName:J.ZodString,coerce:t?.coerce??!1,...se(t)});function $ve(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}var so=class t extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==F.number){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.number,received:i.parsedType}),Y}let n,s=new Tt;for(let i of this._def.checks)i.kind==="int"?pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:D.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?$ve(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_finite,message:i.message}),s.dirty()):pe.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,V.toString(r))}gt(e,r){return this.setLimit("min",e,!1,V.toString(r))}lte(e,r){return this.setLimit("max",e,!0,V.toString(r))}lt(e,r){return this.setLimit("max",e,!1,V.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:V.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:V.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:V.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:V.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:V.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:V.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};so.create=t=>new so({checks:[],typeName:J.ZodNumber,coerce:t?.coerce||!1,...se(t)});var io=class t extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==F.bigint)return this._getInvalidInput(e);let n,s=new Tt;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):pe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return q(r,{code:D.invalid_type,expected:F.bigint,received:r.parsedType}),Y}gte(e,r){return this.setLimit("min",e,!0,V.toString(r))}gt(e,r){return this.setLimit("min",e,!1,V.toString(r))}lte(e,r){return this.setLimit("max",e,!0,V.toString(r))}lt(e,r){return this.setLimit("max",e,!1,V.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:V.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:V.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};io.create=t=>new io({checks:[],typeName:J.ZodBigInt,coerce:t?.coerce??!1,...se(t)});var oo=class extends ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==F.boolean){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.boolean,received:n.parsedType}),Y}return Ut(e.data)}};oo.create=t=>new oo({typeName:J.ZodBoolean,coerce:t?.coerce||!1,...se(t)});var ao=class t extends ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==F.date){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.date,received:i.parsedType}),Y}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_date}),Y}let n=new Tt,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):pe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:V.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:V.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ao.create=t=>new ao({checks:[],coerce:t?.coerce||!1,typeName:J.ZodDate,...se(t)});var hc=class extends ce{_parse(e){if(this._getType(e)!==F.symbol){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.symbol,received:n.parsedType}),Y}return Ut(e.data)}};hc.create=t=>new hc({typeName:J.ZodSymbol,...se(t)});var co=class extends ce{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.undefined,received:n.parsedType}),Y}return Ut(e.data)}};co.create=t=>new co({typeName:J.ZodUndefined,...se(t)});var uo=class extends ce{_parse(e){if(this._getType(e)!==F.null){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.null,received:n.parsedType}),Y}return Ut(e.data)}};uo.create=t=>new uo({typeName:J.ZodNull,...se(t)});var di=class extends ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Ut(e.data)}};di.create=t=>new di({typeName:J.ZodAny,...se(t)});var ps=class extends ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ut(e.data)}};ps.create=t=>new ps({typeName:J.ZodUnknown,...se(t)});var on=class extends ce{_parse(e){let r=this._getOrReturnCtx(e);return q(r,{code:D.invalid_type,expected:F.never,received:r.parsedType}),Y}};on.create=t=>new on({typeName:J.ZodNever,...se(t)});var mc=class extends ce{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.void,received:n.parsedType}),Y}return Ut(e.data)}};mc.create=t=>new mc({typeName:J.ZodVoid,...se(t)});var hs=class t extends ce{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==F.array)return q(r,{code:D.invalid_type,expected:F.array,received:r.parsedType}),Y;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(q(r,{code:o?D.too_big:D.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(q(r,{code:D.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(q(r,{code:D.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Ur(r,o,r.path,a)))).then(o=>Tt.mergeArray(n,o));let i=[...r.data].map((o,a)=>s.type._parseSync(new Ur(r,o,r.path,a)));return Tt.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:V.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:V.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:V.toString(r)}})}nonempty(e){return this.min(1,e)}};hs.create=(t,e)=>new hs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...se(e)});function pc(t){if(t instanceof pr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Fr.create(pc(n))}return new pr({...t._def,shape:()=>e})}else return t instanceof hs?new hs({...t._def,type:pc(t.element)}):t instanceof Fr?Fr.create(pc(t.unwrap())):t instanceof Tn?Tn.create(pc(t.unwrap())):t instanceof Cn?Cn.create(t.items.map(e=>pc(e))):t}var pr=class t extends ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=pe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==F.object){let u=this._getOrReturnCtx(e);return q(u,{code:D.invalid_type,expected:F.object,received:u.parsedType}),Y}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof on&&this._def.unknownKeys==="strip"))for(let u in s.data)o.includes(u)||a.push(u);let c=[];for(let u of o){let l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ur(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof on){let u=this._def.unknownKeys;if(u==="passthrough")for(let l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(q(s,{code:D.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let l of a){let d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ur(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let u=[];for(let l of c){let d=await l.key,m=await l.value;u.push({key:d,value:m,alwaysSet:l.alwaysSet})}return u}).then(u=>Tt.mergeObjectSync(n,u)):Tt.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return V.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:V.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of pe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of pe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return pc(this)}partial(e){let r={};for(let n of pe.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of pe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Fr;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:()=>r})}keyof(){return YH(pe.objectKeys(this.shape))}};pr.create=(t,e)=>new pr({shape:()=>t,unknownKeys:"strip",catchall:on.create(),typeName:J.ZodObject,...se(e)});pr.strictCreate=(t,e)=>new pr({shape:()=>t,unknownKeys:"strict",catchall:on.create(),typeName:J.ZodObject,...se(e)});pr.lazycreate=(t,e)=>new pr({shape:t,unknownKeys:"strip",catchall:on.create(),typeName:J.ZodObject,...se(e)});var lo=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new fr(a.ctx.common.issues));return q(r,{code:D.invalid_union,unionErrors:o}),Y}if(r.common.async)return Promise.all(n.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(c=>new fr(c));return q(r,{code:D.invalid_union,unionErrors:a}),Y}}get options(){return this._def.options}};lo.create=(t,e)=>new lo({options:t,typeName:J.ZodUnion,...se(e)});var fs=t=>t instanceof po?fs(t.schema):t instanceof Br?fs(t.innerType()):t instanceof ho?[t.value]:t instanceof mo?t.options:t instanceof go?pe.objectValues(t.enum):t instanceof yo?fs(t._def.innerType):t instanceof co?[void 0]:t instanceof uo?[null]:t instanceof Fr?[void 0,...fs(t.unwrap())]:t instanceof Tn?[null,...fs(t.unwrap())]:t instanceof ed||t instanceof _o?fs(t.unwrap()):t instanceof Eo?fs(t._def.innerType):[],uy=class t extends ce{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.object)return q(r,{code:D.invalid_type,expected:F.object,received:r.parsedType}),Y;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(q(r,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let o=fs(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new t({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...se(n)})}};function $R(t,e){let r=Rn(t),n=Rn(e);if(t===e)return{valid:!0,data:t};if(r===F.object&&n===F.object){let s=pe.objectKeys(e),i=pe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(let a of i){let c=$R(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===F.array&&n===F.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],c=$R(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===F.date&&n===F.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var fo=class extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(ay(i)||ay(o))return Y;let a=$R(i.value,o.value);return a.valid?((cy(i)||cy(o))&&r.dirty(),{status:r.value,value:a.data}):(q(n,{code:D.invalid_intersection_types}),Y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};fo.create=(t,e,r)=>new fo({left:t,right:e,typeName:J.ZodIntersection,...se(r)});var Cn=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.array)return q(n,{code:D.invalid_type,expected:F.array,received:n.parsedType}),Y;if(n.data.length<this._def.items.length)return q(n,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&n.data.length>this._def.items.length&&(q(n,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((o,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new Ur(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Tt.mergeArray(r,o)):Tt.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Cn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cn({items:t,typeName:J.ZodTuple,rest:null,...se(e)})};var ly=class t extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.object)return q(n,{code:D.invalid_type,expected:F.object,received:n.parsedType}),Y;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new Ur(n,a,n.path,a)),value:o._parse(new Ur(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Tt.mergeObjectAsync(r,s):Tt.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ce?new t({keyType:e,valueType:r,typeName:J.ZodRecord,...se(n)}):new t({keyType:li.create(),valueType:e,typeName:J.ZodRecord,...se(r)})}},gc=class extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.map)return q(n,{code:D.invalid_type,expected:F.map,received:n.parsedType}),Y;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Ur(n,a,n.path,[u,"key"])),value:i._parse(new Ur(n,c,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of o){let u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Y;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of o){let u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Y;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};gc.create=(t,e,r)=>new gc({valueType:e,keyType:t,typeName:J.ZodMap,...se(r)});var yc=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.set)return q(n,{code:D.invalid_type,expected:F.set,received:n.parsedType}),Y;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(q(n,{code:D.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(q(n,{code:D.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function o(c){let u=new Set;for(let l of c){if(l.status==="aborted")return Y;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}let a=[...n.data.values()].map((c,u)=>i._parse(new Ur(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:V.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:V.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};yc.create=(t,e)=>new yc({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...se(e)});var dy=class t extends ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.function)return q(r,{code:D.invalid_type,expected:F.function,received:r.parsedType}),Y;function n(a,c){return Zl({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,dc(),ds].filter(u=>!!u),issueData:{code:D.invalid_arguments,argumentsError:c}})}function s(a,c){return Zl({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,dc(),ds].filter(u=>!!u),issueData:{code:D.invalid_return_type,returnTypeError:c}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof fi){let a=this;return Ut(async function(...c){let u=new fr([]),l=await a._def.args.parseAsync(c,i).catch(g=>{throw u.addIssue(n(c,g)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(g=>{throw u.addIssue(s(d,g)),u})})}else{let a=this;return Ut(function(...c){let u=a._def.args.safeParse(c,i);if(!u.success)throw new fr([n(c,u.error)]);let l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new fr([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Cn.create(e).rest(ps.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Cn.create([]).rest(ps.create()),returns:r||ps.create(),typeName:J.ZodFunction,...se(n)})}},po=class extends ce{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};po.create=(t,e)=>new po({getter:t,typeName:J.ZodLazy,...se(e)});var ho=class extends ce{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return q(r,{received:r.data,code:D.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}};ho.create=(t,e)=>new ho({value:t,typeName:J.ZodLiteral,...se(e)});function YH(t,e){return new mo({values:t,typeName:J.ZodEnum,...se(e)})}var mo=class t extends ce{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return q(r,{expected:pe.joinValues(n),received:r.parsedType,code:D.invalid_type}),Y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return q(r,{received:r.data,code:D.invalid_enum_value,options:n}),Y}return Ut(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};mo.create=YH;var go=class extends ce{_parse(e){let r=pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==F.string&&n.parsedType!==F.number){let s=pe.objectValues(r);return q(n,{expected:pe.joinValues(s),received:n.parsedType,code:D.invalid_type}),Y}if(this._cache||(this._cache=new Set(pe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let s=pe.objectValues(r);return q(n,{received:n.data,code:D.invalid_enum_value,options:s}),Y}return Ut(e.data)}get enum(){return this._def.values}};go.create=(t,e)=>new go({values:t,typeName:J.ZodNativeEnum,...se(e)});var fi=class extends ce{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.promise&&r.common.async===!1)return q(r,{code:D.invalid_type,expected:F.promise,received:r.parsedType}),Y;let n=r.parsedType===F.promise?r.data:Promise.resolve(r.data);return Ut(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};fi.create=(t,e)=>new fi({type:t,typeName:J.ZodPromise,...se(e)});var Br=class extends ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{q(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return Y;let c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?Y:c.status==="dirty"?no(c.value):r.value==="dirty"?no(c.value):c});{if(r.value==="aborted")return Y;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Y:a.status==="dirty"?no(a.value):r.value==="dirty"?no(a.value):a}}if(s.type==="refinement"){let o=a=>{let c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!ui(o))return Y;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>ui(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):Y);pe.assertNever(s)}};Br.create=(t,e,r)=>new Br({schema:t,typeName:J.ZodEffects,effect:e,...se(r)});Br.createWithPreprocess=(t,e,r)=>new Br({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...se(r)});var Fr=class extends ce{_parse(e){return this._getType(e)===F.undefined?Ut(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Fr.create=(t,e)=>new Fr({innerType:t,typeName:J.ZodOptional,...se(e)});var Tn=class extends ce{_parse(e){return this._getType(e)===F.null?Ut(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Tn.create=(t,e)=>new Tn({innerType:t,typeName:J.ZodNullable,...se(e)});var yo=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===F.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};yo.create=(t,e)=>new yo({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...se(e)});var Eo=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return fc(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new fr(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new fr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Eo.create=(t,e)=>new Eo({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...se(e)});var Ec=class extends ce{_parse(e){if(this._getType(e)!==F.nan){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.nan,received:n.parsedType}),Y}return{status:"valid",value:e.data}}};Ec.create=t=>new Ec({typeName:J.ZodNaN,...se(t)});var Fve=Symbol("zod_brand"),ed=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},td=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Y:i.status==="dirty"?(r.dirty(),no(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Y:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:J.ZodPipeline})}},_o=class extends ce{_parse(e){let r=this._def.innerType._parse(e),n=s=>(ui(s)&&(s.value=Object.freeze(s.value)),s);return fc(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};_o.create=(t,e)=>new _o({innerType:t,typeName:J.ZodReadonly,...se(e)});function GH(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function JH(t,e={},r){return t?di.create().superRefine((n,s)=>{let i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){let a=GH(e,n),c=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){let o=GH(e,n),a=o.fatal??r??!0;s.addIssue({code:"custom",...o,fatal:a})}}):di.create()}var Uve={object:pr.lazycreate},J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));var Bve=(t,e={message:`Input not instance of ${t.name}`})=>JH(r=>r instanceof t,e),ZH=li.create,e3=so.create,jve=Ec.create,Hve=io.create,t3=oo.create,Vve=ao.create,zve=hc.create,Wve=co.create,Gve=uo.create,Kve=di.create,Xve=ps.create,Qve=on.create,Yve=mc.create,Jve=hs.create,Zve=pr.create,ewe=pr.strictCreate,twe=lo.create,rwe=uy.create,nwe=fo.create,swe=Cn.create,iwe=ly.create,owe=gc.create,awe=yc.create,cwe=dy.create,uwe=po.create,lwe=ho.create,dwe=mo.create,fwe=go.create,pwe=fi.create,hwe=Br.create,mwe=Fr.create,gwe=Tn.create,ywe=Br.createWithPreprocess,Ewe=td.create,_we=()=>ZH().optional(),Swe=()=>e3().optional(),vwe=()=>t3().optional(),wwe={string:t=>li.create({...t,coerce:!0}),number:t=>so.create({...t,coerce:!0}),boolean:t=>oo.create({...t,coerce:!0}),bigint:t=>io.create({...t,coerce:!0}),date:t=>ao.create({...t,coerce:!0})};var bwe=Y;var{v4:r3}=(Va(),le(T0)),rr=class extends Error{constructor(r,n,s,i,o,a=!1){super(r);this.code=n;this.server=s;this.method=i;this.traceId=o;this.isRetryable=a;this.name="MCPError"}},FR=class extends rr{constructor(e,r,n,s){super(`MCP call timed out after ${s}ms`,"MCP_TIMEOUT",e,r,n,!0),this.name="MCPTimeoutError"}},UR=class extends rr{constructor(e,r,n,s){super(`Network error during MCP call: ${s.message}`,"MCP_NETWORK_ERROR",e,r,n,!0),this.name="MCPNetworkError"}};var BR=class{info(e,r){console.log(JSON.stringify({level:"INFO",message:e,...r}))}warn(e,r){console.warn(JSON.stringify({level:"WARN",message:e,...r}))}error(e,r,n){console.error(JSON.stringify({level:"ERROR",message:e,error:{name:r.name,message:r.message,stack:r.stack},...n}))}debug(e,r){console.debug(JSON.stringify({level:"DEBUG",message:e,...r}))}},fy=class{constructor(e={}){this.timeout=e.timeout??3e4,this.maxRetries=e.maxRetries??3,this.initialRetryDelay=e.initialRetryDelay??1e3,this.maxRetryDelay=e.maxRetryDelay??3e4,this.logger=e.logger??new BR}async call(e,r,n={}){let s=r3(),i=Date.now();this.logger.info("MCP call initiated",{traceId:s,server:e,method:r,params:this.sanitizeParams(n)});let o=null;for(let a=1;a<=this.maxRetries;a++)try{let c=await this.executeCall(e,r,n,s,a),u=Date.now()-i;return this.logger.info("MCP call succeeded",{traceId:s,server:e,method:r,attempt:a,duration:u}),c}catch(c){let u=Date.now()-i;if(c instanceof rr){if(o=c,this.logger.warn("MCP call failed",{traceId:s,server:e,method:r,attempt:a,maxRetries:this.maxRetries,duration:u,error:c.message,code:c.code,isRetryable:c.isRetryable}),!c.isRetryable)throw this.logger.error("MCP call failed with non-retryable error",c,{traceId:s,server:e,method:r}),c;if(a===this.maxRetries)break;let l=this.calculateRetryDelay(a);this.logger.debug("Retrying MCP call after delay",{traceId:s,server:e,method:r,attempt:a,nextAttempt:a+1,delayMs:l}),await this.sleep(l)}else{let l=new rr(`Unexpected error during MCP call: ${c}`,"MCP_UNEXPECTED_ERROR",e,r,s,!1);throw this.logger.error("MCP call failed with unexpected error",l,{traceId:s,server:e,method:r,originalError:c}),l}}throw this.logger.error("MCP call failed after all retries",o,{traceId:s,server:e,method:r,attempts:this.maxRetries}),o}async listTools(e){let r=r3();this.logger.info("Listing MCP tools",{traceId:r,server:e});try{let n=await this.executeListTools(e,r);return this.logger.info("MCP tools listed successfully",{traceId:r,server:e,toolCount:n.length}),n}catch(n){throw this.logger.error("Failed to list MCP tools",n,{traceId:r,server:e}),n}}async executeCall(e,r,n,s,i){let o=new AbortController,a=global.setTimeout(()=>o.abort(),this.timeout);try{let c=await this.simulateMCPCall(e,r,n,o.signal);return global.clearTimeout(a),c}catch(c){throw global.clearTimeout(a),c instanceof Error&&c.name==="AbortError"?new FR(e,r,s,this.timeout):this.isNetworkError(c)?new UR(e,r,s,c):c}}async executeListTools(e,r){return[]}async simulateMCPCall(e,r,n,s){return new Promise((i,o)=>{if(s.aborted){o(new Error("AbortError"));return}s.addEventListener("abort",()=>{o(new Error("AbortError"))}),global.setTimeout(()=>{i({})},100)})}calculateRetryDelay(e){let r=this.initialRetryDelay*Math.pow(2,e-1),n=r*.25*(Math.random()*2-1),s=r+n;return Math.min(s,this.maxRetryDelay)}sleep(e){return new Promise(r=>global.setTimeout(r,e))}isNetworkError(e){return e instanceof Error?["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","ENETUNREACH"].some(n=>e.message.includes(n)):!1}sanitizeParams(e){let r=["password","token","apiKey","secret","authorization"],n={...e};for(let s of Object.keys(n))r.some(i=>s.toLowerCase().includes(i))&&(n[s]="***REDACTED***");return n}};var{v4:So}=(Va(),le(T0)),Rwe=require("aws-sdk"),rd=class{constructor(e){this.requestTimestamps=[];this.requestsPerMinute=e}async waitForSlot(){let e=Date.now(),r=e-6e4;for(this.requestTimestamps=this.requestTimestamps.filter(n=>n>r);this.requestTimestamps.length>=this.requestsPerMinute;){await this.sleep(100);let s=Date.now()-6e4;this.requestTimestamps=this.requestTimestamps.filter(i=>i>s)}this.requestTimestamps.push(e)}sleep(e){return new Promise(r=>setTimeout(r,e))}},jR=class{constructor(e={}){this.cnpjCache=new Map;this.placesCache=new Map;this.linkedInCache=new Map;this.credentials=null;this.credentialsExpiry=0;this.mcpClient=new fy(e),this.secretName=e.secretName??"fibonacci/mcp/enrichment",this.receitaFederalEndpoint=e.receitaFederalEndpoint??"https://receitaws.com.br/v1",this.googlePlacesEndpoint=e.googlePlacesEndpoint??"https://maps.googleapis.com/maps/api/place",this.linkedInEndpoint=e.linkedInEndpoint??"https://api.linkedin.com/v2",this.logger=e.logger??this.mcpClient.logger,this.cacheEnabled=e.cacheConfig?.enabled??!0,this.cacheTTL=e.cacheConfig?.ttlSeconds??3600,this.maxCacheEntries=e.cacheConfig?.maxEntries??1e3,this.receitaFederalLimiter=new rd(e.rateLimits?.receitaFederal?.requestsPerMinute??3),this.googlePlacesLimiter=new rd(e.rateLimits?.googlePlaces?.requestsPerMinute??50),this.linkedInLimiter=new rd(e.rateLimits?.linkedIn?.requestsPerMinute??20),this.secretsManager=new Rwe.SecretsManager({region:process.env.AWS_REGION??"us-east-1"})}async lookupCNPJ(e){let r=So(),n=Date.now(),s=this.normalizeCNPJ(e.cnpj);if(this.validateCNPJ(s),this.logger.info("CNPJ lookup initiated",{traceId:r,cnpj:this.maskCNPJ(s)}),this.cacheEnabled){let i=this.getFromCache(this.cnpjCache,s);if(i)return this.logger.info("CNPJ lookup returned from cache",{traceId:r,cnpj:this.maskCNPJ(s)}),i}try{await this.receitaFederalLimiter.waitForSlot();let i=await this.fetchCNPJData(s,r);this.cacheEnabled&&this.setCache(this.cnpjCache,s,i);let o=Date.now()-n;return this.logger.info("CNPJ lookup succeeded",{traceId:r,cnpj:this.maskCNPJ(s),duration:o}),i}catch(i){let o=Date.now()-n;throw this.logger.error("CNPJ lookup failed",i,{traceId:r,cnpj:this.maskCNPJ(s),duration:o}),i}}async lookupPlaces(e){let r=So(),n=Date.now();this.logger.info("Places lookup initiated",{traceId:r,query:e.query});let s=this.generatePlacesCacheKey(e);if(this.cacheEnabled){let i=this.getFromCache(this.placesCache,s);if(i)return this.logger.info("Places lookup returned from cache",{traceId:r,query:e.query}),i}try{let i=await this.getCredentials();if(!i.googlePlacesApiKey)throw new rr("Google Places API key not configured","ENRICHMENT_CONFIG_ERROR","enrichment","lookupPlaces",r,!1);await this.googlePlacesLimiter.waitForSlot();let o=await this.fetchPlacesData(e,i.googlePlacesApiKey,r);this.cacheEnabled&&this.setCache(this.placesCache,s,o);let a=Date.now()-n;return this.logger.info("Places lookup succeeded",{traceId:r,query:e.query,duration:a}),o}catch(i){let o=Date.now()-n;throw this.logger.error("Places lookup failed",i,{traceId:r,query:e.query,duration:o}),i}}async lookupLinkedIn(e){let r=So(),n=Date.now();this.logger.info("LinkedIn lookup initiated",{traceId:r,companyName:e.companyName});let s=e.domain??e.companyName;if(this.cacheEnabled){let i=this.getFromCache(this.linkedInCache,s);if(i)return this.logger.info("LinkedIn lookup returned from cache",{traceId:r,companyName:e.companyName}),i}try{let i=await this.getCredentials();if(!i.linkedInAccessToken)throw new rr("LinkedIn access token not configured","ENRICHMENT_CONFIG_ERROR","enrichment","lookupLinkedIn",r,!1);await this.linkedInLimiter.waitForSlot();let o=await this.fetchLinkedInData(e,i.linkedInAccessToken,r);this.cacheEnabled&&this.setCache(this.linkedInCache,s,o);let a=Date.now()-n;return this.logger.info("LinkedIn lookup succeeded",{traceId:r,companyName:e.companyName,duration:a}),o}catch(i){let o=Date.now()-n;throw this.logger.error("LinkedIn lookup failed",i,{traceId:r,companyName:e.companyName,duration:o}),i}}async enrichCompany(e){let r=So(),n=Date.now();this.logger.info("Company enrichment initiated",{traceId:r,hasCNPJ:!!e.cnpj,hasCompanyName:!!e.companyName,includeLinkedIn:e.includeLinkedIn});let s={enrichmentDate:new Date().toISOString(),sources:[]};try{if(e.cnpj)try{s.cnpj=await this.lookupCNPJ({cnpj:e.cnpj}),s.sources.push("receita-federal")}catch(o){this.logger.warn("CNPJ lookup failed during enrichment",{traceId:r,error:o.message})}if(e.companyName||e.address)try{let o=e.companyName??e.address;s.places=await this.lookupPlaces({query:o}),s.sources.push("google-places")}catch(o){this.logger.warn("Places lookup failed during enrichment",{traceId:r,error:o.message})}if(e.includeLinkedIn&&e.companyName)try{s.linkedin=await this.lookupLinkedIn({companyName:e.companyName}),s.sources.push("linkedin")}catch(o){this.logger.warn("LinkedIn lookup failed during enrichment",{traceId:r,error:o.message})}let i=Date.now()-n;return this.logger.info("Company enrichment succeeded",{traceId:r,sources:s.sources,duration:i}),s}catch(i){let o=Date.now()-n;throw this.logger.error("Company enrichment failed",i,{traceId:r,duration:o}),i}}async getCredentials(){let e=Date.now();if(this.credentials&&e<this.credentialsExpiry)return this.credentials;try{this.logger.debug("Fetching enrichment credentials from Secrets Manager",{secretName:this.secretName});let r=await this.secretsManager.getSecretValue({SecretId:this.secretName}).promise();if(!r.SecretString)throw new Error("Secret value is empty");return this.credentials=JSON.parse(r.SecretString),this.credentialsExpiry=e+3e5,this.logger.debug("Enrichment credentials fetched successfully"),this.credentials}catch(r){throw this.logger.error("Failed to fetch enrichment credentials",r,{secretName:this.secretName}),new rr(`Failed to fetch credentials from Secrets Manager: ${r}`,"ENRICHMENT_AUTH_ERROR","enrichment","getCredentials",So(),!1)}}async fetchCNPJData(e,r){try{let n=`${this.receitaFederalEndpoint}/cnpj/${e}`;this.logger.debug("Fetching CNPJ data",{traceId:r,url:n});let s=await this.makeHttpRequest("GET",n,null,{"X-Trace-Id":r});return this.mapReceitaWSResponse(s)}catch(n){throw new rr(`Receita Federal API error: ${n}`,"ENRICHMENT_API_ERROR","enrichment","lookupCNPJ",r,this.isRetryableError(n))}}async fetchPlacesData(e,r,n){try{let s=`${this.googlePlacesEndpoint}/textsearch/json`,i=new URLSearchParams({query:e.query,key:r});e.location&&i.append("location",`${e.location.lat},${e.location.lng}`),e.radius&&i.append("radius",e.radius.toString()),this.logger.debug("Searching Google Places",{traceId:n,query:e.query});let o=await this.makeHttpRequest("GET",`${s}?${i.toString()}`,null,{"X-Trace-Id":n});if(!o.results||o.results.length===0)throw new Error("No results found");let a=o.results[0].place_id,c=`${this.googlePlacesEndpoint}/details/json`,u=new URLSearchParams({place_id:a,key:r,fields:"place_id,name,formatted_address,formatted_phone_number,website,rating,user_ratings_total,business_status"}),l=await this.makeHttpRequest("GET",`${c}?${u.toString()}`,null,{"X-Trace-Id":n});return this.mapGooglePlacesResponse(l.result)}catch(s){throw new rr(`Google Places API error: ${s}`,"ENRICHMENT_API_ERROR","enrichment","lookupPlaces",n,this.isRetryableError(s))}}async fetchLinkedInData(e,r,n){try{let s=`${this.linkedInEndpoint}/organizationSearches`,i=new URLSearchParams({q:"universalName",keywords:e.companyName});this.logger.debug("Searching LinkedIn companies",{traceId:n,companyName:e.companyName});let o=await this.makeHttpRequest("GET",`${s}?${i.toString()}`,null,{Authorization:`Bearer ${r}`,"X-Trace-Id":n,"X-Restli-Protocol-Version":"2.0.0"});if(!o.elements||o.elements.length===0)throw new Error("No LinkedIn company found");let c=o.elements[0].id,u=`${this.linkedInEndpoint}/organizations/${c}`,l=await this.makeHttpRequest("GET",u,null,{Authorization:`Bearer ${r}`,"X-Trace-Id":n,"X-Restli-Protocol-Version":"2.0.0"});return this.mapLinkedInResponse(l)}catch(s){throw new rr(`LinkedIn API error: ${s}`,"ENRICHMENT_API_ERROR","enrichment","lookupLinkedIn",n,this.isRetryableError(s))}}async makeHttpRequest(e,r,n,s){return this.logger.debug("Making HTTP request",{method:e,url:this.sanitizeUrl(r)}),new Promise(i=>{setTimeout(()=>{r.includes("cnpj")?i(this.getMockCNPJResponse()):r.includes("place")?i(this.getMockPlacesResponse()):r.includes("linkedin")?i(this.getMockLinkedInResponse()):i({})},100)})}mapReceitaWSResponse(e){return{cnpj:e.cnpj,razaoSocial:e.nome,nomeFantasia:e.fantasia,situacaoCadastral:e.situacao,dataAbertura:e.abertura,atividadePrincipal:{codigo:e.atividade_principal?.[0]?.code??"",descricao:e.atividade_principal?.[0]?.text??""},atividadesSecundarias:e.atividades_secundarias?.map(r=>({codigo:r.code,descricao:r.text})),naturezaJuridica:e.natureza_juridica,porte:this.mapPorte(e.porte),capitalSocial:parseFloat(e.capital_social??"0"),endereco:{logradouro:e.logradouro,numero:e.numero,complemento:e.complemento,bairro:e.bairro,municipio:e.municipio,uf:e.uf,cep:e.cep},telefone:e.telefone,email:e.email}}mapGooglePlacesResponse(e){return{placeId:e.place_id,name:e.name,formattedAddress:e.formatted_address,phoneNumber:e.formatted_phone_number,website:e.website,rating:e.rating,userRatingsTotal:e.user_ratings_total,businessStatus:e.business_status}}mapLinkedInResponse(e){return{companyId:e.id,name:e.localizedName,description:e.localizedDescription,industry:e.industries?.[0],companySize:e.staffCountRange?.start?`${e.staffCountRange.start}-${e.staffCountRange.end}`:void 0,headquarters:e.locations?.[0]?.country,website:e.websiteUrl,specialties:e.specialties,followerCount:e.followersCount}}mapPorte(e){return{"00":"MEI","01":"ME","03":"EPP","05":"Demais"}[e]??"Demais"}normalizeCNPJ(e){return e.replace(/[^\d]/g,"")}validateCNPJ(e){if(e.length!==14)throw new rr("CNPJ must have 14 digits","ENRICHMENT_INVALID_CNPJ","enrichment","lookupCNPJ",So(),!1);if(/^(\d)\1+$/.test(e))throw new rr("Invalid CNPJ format","ENRICHMENT_INVALID_CNPJ","enrichment","lookupCNPJ",So(),!1)}maskCNPJ(e){return e.length!==14?e:`${e.substring(0,2)}.${"*".repeat(6)}.${e.substring(12,14)}`}generatePlacesCacheKey(e){let r=e.query;return e.location&&(r+=`|${e.location.lat},${e.location.lng}`),e.radius&&(r+=`|${e.radius}`),r}getFromCache(e,r){let n=e.get(r);return n?Date.now()>n.expiresAt?(e.delete(r),null):n.data:null}setCache(e,r,n){let s=Date.now(),i={data:n,timestamp:s,expiresAt:s+this.cacheTTL*1e3};if(e.set(r,i),e.size>this.maxCacheEntries){let o=e.keys().next().value;o&&e.delete(o)}}isRetryableError(e){return!!(e instanceof Error&&["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND"].some(n=>e.message.includes(n))||e.statusCode>=500&&e.statusCode<600||e.statusCode===429)}sanitizeUrl(e){return e.replace(/key=[^&]+/,"key=***")}getMockCNPJResponse(){return{cnpj:"00000000000191",nome:"Empresa Exemplo LTDA",fantasia:"Exemplo",situacao:"ATIVA",abertura:"01/01/2020",atividade_principal:[{code:"6201-5/00",text:"Desenvolvimento de programas de computador sob encomenda"}],atividades_secundarias:[],natureza_juridica:"206-2 - Sociedade Empres\xE1ria Limitada",porte:"03",capital_social:"100000.00",logradouro:"RUA EXEMPLO",numero:"123",complemento:"SALA 1",bairro:"CENTRO",municipio:"SAO PAULO",uf:"SP",cep:"01000-000",telefone:"(11) 1234-5678",email:"contato@exemplo.com.br"}}getMockPlacesResponse(){return{results:[{place_id:"ChIJN1t_tDeuEmsRUsoyG83frY4"}],result:{place_id:"ChIJN1t_tDeuEmsRUsoyG83frY4",name:"Empresa Exemplo",formatted_address:"Rua Exemplo, 123 - Centro, S\xE3o Paulo - SP, 01000-000",formatted_phone_number:"(11) 1234-5678",website:"https://exemplo.com.br",rating:4.5,user_ratings_total:100,business_status:"OPERATIONAL"}}}getMockLinkedInResponse(){return{elements:[{id:"12345"}],id:"12345",localizedName:"Empresa Exemplo",localizedDescription:"Empresa de tecnologia",industries:["Software Development"],staffCountRange:{start:11,end:50},locations:[{country:"BR"}],websiteUrl:"https://exemplo.com.br",specialties:["Software","Consulting"],followersCount:1e3}}};function n3(t){return new jR(t)}var Cwe=new py.EventBridgeClient({}),s3=process.env.EVENT_BUS_NAME||"fibonacci-bus-dev",m$e=An.object({segmento:An.string(),atividade:An.string(),leadIds:An.array(An.string()),count:An.number(),prioridadeMedia:An.number()}),Twe=n3({timeout:3e4,maxRetries:3,cacheConfig:{enabled:!0,ttlSeconds:3600,maxEntries:1e3}}),Awe=t4(async(t,e,r)=>{r.info("Agente de Estrat\xE9gia iniciado",{recordCount:t.Records.length,functionName:e.functionName});let n=[];for(let s of t.Records)try{let i=await xwe(s,r);i&&n.push(i)}catch(i){r.error("Erro ao processar registro SQS",i,{messageId:s.messageId})}return r.info("Agente de Estrat\xE9gia conclu\xEDdo",{campanhasCriadas:n.length}),{statusCode:200,body:JSON.stringify({campanhasCriadas:n.length,campanhas:n.map(s=>({id:s.id,nome:s.nome,segmento:s.segmento,leadCount:s.leadIds.length}))})}});async function xwe(t,e){let r=ss();e.setTraceId(r),e.info("Processando registro SQS",{messageId:t.messageId});let n=JSON.parse(t.body),s=typeof n.detail=="string"?JSON.parse(n.detail):n.detail,i=s.batches||[],o=s.tenantId||s.tenant_id||"default";if(e.updateContext({tenantId:o}),e.info("Lotes recebidos",{batchCount:i.length}),i.length===0)return e.warn("Nenhum lote recebido"),null;let a=i[0],c=await Pwe(a.leadIds,e);if(c.length===0)return e.warn("Nenhum lead encontrado",{leadIds:a.leadIds}),null;let u=await Iwe(c,e),l=await Fwe(c,u,a,o,e);return await Gwe(l,e),await Kwe(l,r,e),l}async function Pwe(t,e){e.info("Buscando leads do banco de dados",{count:t.length});try{let n=(await kR(`SELECT 
        id, tenant_id, empresa, contato, telefone, email, cnpj,
        setor, porte, atividade_principal, prioridade, segmento, metadata
      FROM nigredo_leads.leads
      WHERE id = ANY($1)
      ORDER BY prioridade DESC`,[t])).rows.map(s=>({id:s.id,tenantId:s.tenant_id,empresa:s.empresa,contato:s.contato,telefone:s.telefone,email:s.email,cnpj:s.cnpj,setor:s.setor,porte:s.porte,atividadePrincipal:s.atividade_principal,prioridade:s.prioridade,segmento:s.segmento,metadata:s.metadata||{}}));return e.info("Leads encontrados",{count:n.length}),n}catch(r){throw e.error("Erro ao buscar leads",r),r}}async function Iwe(t,e){e.info("Pesquisando perfil comercial detalhado",{count:t.length});let r=new Map;for(let n of t)try{e.debug("Pesquisando perfil comercial",{leadId:n.id,empresa:n.empresa});let s=null;if(n.cnpj)try{s=await Twe.enrichCompany({cnpj:n.cnpj,companyName:n.empresa,includeLinkedIn:!1})}catch(o){e.warn("Falha ao enriquecer dados para perfil comercial",{leadId:n.id,error:o.message})}let i=Nwe(n,s,e);r.set(n.id,i),e.debug("Perfil comercial calculado",{leadId:n.id,maturidade:i.maturidade,potencialCompra:i.potencialCompra})}catch(s){e.error("Erro ao pesquisar perfil comercial",s,{leadId:n.id}),r.set(n.id,{maturidade:"inicial",potencialCompra:"m\xE9dio",cicloVenda:"m\xE9dio",decisor:"Gerente",pontosFortes:[],desafios:[]})}return e.info("Perfis comerciais pesquisados",{count:r.size}),r}function Nwe(t,e,r){let n={maturidade:"inicial",potencialCompra:"m\xE9dio",cicloVenda:"m\xE9dio",decisor:"Gerente",pontosFortes:[],desafios:[]};if(e?.cnpj?.capitalSocial&&(n.faturamentoEstimado=Owe(e.cnpj.capitalSocial,t.porte)),e?.cnpj?.dataAbertura){let s=Dwe(e.cnpj.dataAbertura),i=(Date.now()-s.getTime())/(1e3*60*60*24*365);i<2?n.maturidade="inicial":i<5?n.maturidade="crescimento":i<10?n.maturidade="consolidada":n.maturidade="madura"}return n.potencialCompra=Lwe(t.porte,t.setor),n.cicloVenda=kwe(t.porte,t.setor),n.decisor=Mwe(t.porte),n.pontosFortes=qwe(t,e),n.desafios=$we(t,e),n}function Owe(t,e){let n={MEI:2,ME:5,EPP:10,M\u00E9dia:20,Grande:50,Demais:30}[e||"Demais"]||10;return t*n}function Dwe(t){let[e,r,n]=t.split("/").map(Number);return new Date(n,r-1,e)}function Lwe(t,e){return t==="Grande"||t==="M\xE9dia"||e&&["tecnologia","software","financeiro","sa\xFAde"].some(n=>e.toLowerCase().includes(n))?"alto":t==="EPP"?"m\xE9dio":"baixo"}function kwe(t,e){return t==="Grande"||e&&["financeiro","governo","ind\xFAstria"].some(n=>e.toLowerCase().includes(n))?"longo":t==="MEI"||t==="ME"?"curto":"m\xE9dio"}function Mwe(t){return{MEI:"Propriet\xE1rio",ME:"Propriet\xE1rio/S\xF3cio",EPP:"Diretor",M\u00E9dia:"Diretor/VP",Grande:"VP/C-Level",Demais:"Gerente"}[t||"Demais"]||"Gerente"}function qwe(t,e){let r=[];return(t.porte==="Grande"||t.porte==="M\xE9dia")&&r.push("Empresa consolidada no mercado"),e?.cnpj?.situacaoCadastral==="ATIVA"&&r.push("Situa\xE7\xE3o cadastral regular"),e?.places?.rating&&e.places.rating>=4&&r.push(`Boa reputa\xE7\xE3o online (${e.places.rating} estrelas)`),t.setor?.toLowerCase().includes("tecnologia")&&r.push("Setor de tecnologia (inovador)"),r}function $we(t,e){let r=[];(t.porte==="MEI"||t.porte==="ME")&&(r.push("Or\xE7amento limitado"),r.push("Equipe reduzida")),!t.telefone&&!t.email&&r.push("Dificuldade de contato");let n={com\u00E9rcio:["Alta concorr\xEAncia","Margens apertadas"],servi\u00E7os:["Depend\xEAncia de m\xE3o de obra","Sazonalidade"],ind\u00FAstria:["Custos operacionais altos","Complexidade log\xEDstica"]};if(t.setor){for(let[s,i]of Object.entries(n))if(t.setor.toLowerCase().includes(s)){r.push(...i);break}}return r}async function Fwe(t,e,r,n,s){s.info("Criando campanha",{segmento:r.segmento,atividade:r.atividade,leadCount:t.length});let i=ss(),o=Uwe(r.segmento,t),a=Bwe(r.segmento,r.atividade,e,t),c=jwe(r.segmento,r.atividade,e,t),u=Hwe(r.segmento,r.atividade,e,t),l=Vwe(r.segmento,e,t),d={id:i,tenantId:n,nome:`Campanha ${r.segmento} - ${r.atividade}`,segmento:r.segmento,atividade:r.atividade,canal:o,mensagens:{topo:a,meio:c,fundo:u},ritmo:l,status:"aprovada",leadIds:t.map(m=>m.id),metadata:{criadoEm:new Date().toISOString(),prioridadeMedia:r.prioridadeMedia,perfilMaturidade:zwe(e),perfilPotencial:Wwe(e)}};return s.info("Campanha criada",{id:d.id,nome:d.nome,canal:d.canal,leadCount:d.leadIds.length}),d}function Uwe(t,e){let r=e.filter(s=>s.telefone).length,n=e.filter(s=>s.email).length;return r>e.length*.7&&n>e.length*.7?"multi":r>n?"whatsapp":"email"}function Bwe(t,e,r,n){let s=[];return s.push({tipo:"topo",variacao:"A",conteudo:`Ol\xE1! \u{1F44B}

Notei que sua empresa atua no segmento de ${e}.

Voc\xEA sabia que empresas desse setor est\xE3o enfrentando desafios como:
\u2022 Digitaliza\xE7\xE3o de processos
\u2022 Otimiza\xE7\xE3o de custos operacionais
\u2022 Aumento de produtividade

Temos ajudado empresas similares a superar esses desafios.

Gostaria de conhecer mais sobre como podemos ajudar?`,cta:"Sim, tenho interesse!"}),s.push({tipo:"topo",variacao:"B",conteudo:`Ol\xE1! \u{1F44B}

Empresas do segmento de ${e} est\xE3o alcan\xE7ando resultados impressionantes:
\u2022 30% de redu\xE7\xE3o de custos
\u2022 50% de aumento em produtividade
\u2022 Processos 3x mais r\xE1pidos

Quer saber como sua empresa pode alcan\xE7ar resultados similares?`,cta:"Quero saber mais"}),s.push({tipo:"topo",variacao:"C",conteudo:`Ol\xE1! \u{1F44B}

Estou fazendo uma pesquisa com empresas de ${e} para entender os principais desafios do setor.

Posso fazer 3 perguntas r\xE1pidas? Em troca, compartilho insights valiosos que coletamos de outras empresas.`,cta:"Sim, pode perguntar"}),s}function jwe(t,e,r,n){let s=[];return s.push({tipo:"meio",variacao:"A",conteudo:`\xD3timo! \u{1F3AF}

Deixa eu te contar sobre a [Empresa X], que tamb\xE9m atua em ${e}.

Eles estavam enfrentando:
\u274C Processos manuais demorados
\u274C Falta de visibilidade de dados
\u274C Custos operacionais altos

Ap\xF3s implementar nossa solu\xE7\xE3o:
\u2705 40% de redu\xE7\xE3o no tempo de processos
\u2705 Dashboards em tempo real
\u2705 ROI de 300% em 6 meses

Quer ver como isso funcionaria na sua empresa?`,cta:"Sim, quero ver!"}),s.push({tipo:"meio",variacao:"B",conteudo:`Perfeito! \u{1F4CA}

Preparei uma an\xE1lise r\xE1pida do potencial de economia para empresas como a sua:

\u2022 Economia estimada: R$ 50-100k/ano
\u2022 Tempo de implementa\xE7\xE3o: 30-60 dias
\u2022 ROI esperado: 6-12 meses

Gostaria de receber uma an\xE1lise personalizada para sua empresa?`,cta:"Sim, quero a an\xE1lise"}),s.push({tipo:"meio",variacao:"C",conteudo:`Que bom! \u{1F31F}

Atualmente trabalhamos com mais de 50 empresas de ${e}, incluindo:
\u2022 [Cliente 1]
\u2022 [Cliente 2]
\u2022 [Cliente 3]

Todas alcan\xE7aram resultados significativos nos primeiros 3 meses.

Quer conversar com um dos nossos clientes para ouvir a experi\xEAncia deles?`,cta:"Sim, quero conversar"}),s}function Hwe(t,e,r,n){let s=[];return s.push({tipo:"fundo",variacao:"A",conteudo:`Excelente! \u{1F389}

Preparei uma proposta personalizada para sua empresa com:

\u{1F4CB} Escopo detalhado da solu\xE7\xE3o
\u{1F4B0} Investimento e condi\xE7\xF5es especiais
\u{1F4C8} Proje\xE7\xE3o de resultados
\u{1F5D3}\uFE0F Cronograma de implementa\xE7\xE3o

Podemos agendar 30 minutos para eu apresentar a proposta?

Tenho disponibilidade:
\u2022 Ter\xE7a, 14h
\u2022 Quarta, 10h
\u2022 Quinta, 15h

Qual hor\xE1rio funciona melhor para voc\xEA?`,cta:"Agendar reuni\xE3o"}),s.push({tipo:"fundo",variacao:"B",conteudo:`Perfeito! \u{1F680}

Que tal come\xE7armos com um projeto piloto?

\u2728 Implementa\xE7\xE3o em 1 \xE1rea espec\xEDfica
\u2728 Dura\xE7\xE3o: 30 dias
\u2728 Investimento reduzido
\u2728 Sem compromisso de longo prazo

Assim voc\xEA pode ver os resultados antes de expandir.

Vamos agendar uma conversa para definir o piloto?`,cta:"Sim, vamos agendar"}),s.push({tipo:"fundo",variacao:"C",conteudo:`\xD3tima not\xEDcia! \u26A1

Temos uma condi\xE7\xE3o especial v\xE1lida at\xE9 o final do m\xEAs:

\u{1F381} 20% de desconto na implementa\xE7\xE3o
\u{1F381} 3 meses de suporte premium gr\xE1tis
\u{1F381} Treinamento completo da equipe

S\xE3o apenas 5 vagas dispon\xEDveis e j\xE1 temos 3 empresas confirmadas.

Podemos agendar uma reuni\xE3o esta semana para garantir sua vaga?`,cta:"Quero garantir minha vaga"}),s}function Vwe(t,e,r){let n=["09:30","11:00","14:30","16:00"],s=Array.from(e.values()).map(c=>c.cicloVenda),i=s.sort((c,u)=>s.filter(l=>l===c).length-s.filter(l=>l===u).length)[0],o,a;return i==="curto"?(o="1x/dia",a=24):i==="longo"?(o="2x/semana",a=72):(o="3x/semana",a=48),{horarios:n,frequencia:o,intervaloMinimo:a}}function zwe(t){let e=Array.from(t.values()).map(n=>n.maturidade),r={};for(let n of e)r[n]=(r[n]||0)+1;return Object.entries(r).sort((n,s)=>s[1]-n[1])[0][0]}function Wwe(t){let e=Array.from(t.values()).map(n=>n.potencialCompra),r={};for(let n of e)r[n]=(r[n]||0)+1;return Object.entries(r).sort((n,s)=>s[1]-n[1])[0][0]}async function Gwe(t,e){e.info("Salvando campanha no banco de dados",{id:t.id,nome:t.nome});try{await kR(`INSERT INTO nigredo_leads.campanhas (
        id, tenant_id, nome, segmento, atividade, canal,
        mensagens, ritmo, status, lead_ids, metadata, created_at
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, NOW())
      ON CONFLICT (id) DO UPDATE SET
        updated_at = NOW(),
        status = EXCLUDED.status`,[t.id,t.tenantId,t.nome,t.segmento,t.atividade,t.canal,JSON.stringify(t.mensagens),JSON.stringify(t.ritmo),t.status,t.leadIds,JSON.stringify(t.metadata)]),e.info("Campanha salva com sucesso",{id:t.id})}catch(r){throw e.error("Erro ao salvar campanha",r,{id:t.id}),r}}async function Kwe(t,e,r){try{let n={topo:t.mensagens.topo.map(o=>({variacao:o.variacao,preview:o.conteudo.substring(0,100)+"..."})),meio:t.mensagens.meio.map(o=>({variacao:o.variacao,preview:o.conteudo.substring(0,100)+"..."})),fundo:t.mensagens.fundo.map(o=>({variacao:o.variacao,preview:o.conteudo.substring(0,100)+"..."}))},s=new py.PutEventsCommand({Entries:[{Source:"nigredo.estrategia",DetailType:"estrategia.completed",Detail:JSON.stringify({campanhaId:t.id,tenantId:t.tenantId,nome:t.nome,segmento:t.segmento,atividade:t.atividade,canal:t.canal,leadCount:t.leadIds.length,leadIds:t.leadIds,status:t.status,previews:n,ritmo:t.ritmo,metadata:t.metadata,traceId:e,timestamp:new Date().toISOString()}),EventBusName:s3}]}),i=await Cwe.send(s);r.info("Evento de conclus\xE3o publicado",{eventBusName:s3,campanhaId:t.id,failedEntryCount:i.FailedEntryCount||0,traceId:e}),i.FailedEntryCount&&i.FailedEntryCount>0&&r.error("Falha ao publicar evento",new Error("EventBridge failed"),{failedEntries:i.Entries,traceId:e})}catch(n){throw r.error("Erro ao publicar evento no EventBridge",n,{traceId:e}),n}}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
