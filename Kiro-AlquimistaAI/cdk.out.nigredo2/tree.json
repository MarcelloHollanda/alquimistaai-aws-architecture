{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.223.0"},"children":{"FibonacciStack-dev":{"id":"FibonacciStack-dev","path":"FibonacciStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"FibonacciKmsKey":{"id":"FibonacciKmsKey","path":"FibonacciStack-dev/FibonacciKmsKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciKmsKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"description":"KMS key for Fibonacci encryption - dev","enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":"arn:aws:iam::207933152643:root"},"Resource":"*"},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Principal":{"Service":"s3.amazonaws.com"},"Resource":"*","Sid":"Allow AWS Services"},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Principal":{"Service":"sqs.amazonaws.com"},"Resource":"*","Sid":"Allow SQS Service"},{"Action":["kms:CreateGrant","kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Principal":{"Service":"rds.amazonaws.com"},"Resource":"*","Sid":"Allow RDS Service"},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":"*"}],"Version":"2012-10-17"},"pendingWindowInDays":7}}},"Alias":{"id":"Alias","path":"FibonacciStack-dev/FibonacciKmsKey/Alias","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Alias","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciKmsKey/Alias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnAlias","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Alias","aws:cdk:cloudformation:props":{"aliasName":"alias/fibonacci-encryption-key-dev","targetKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]}}}}}}}},"FibonacciVpc":{"id":"FibonacciVpc","path":"FibonacciStack-dev/FibonacciVpc","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.Vpc","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPC","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPC","aws:cdk:cloudformation:props":{"cidrBlock":"10.0.0.0/16","enableDnsHostnames":true,"enableDnsSupport":true,"instanceTenancy":"default","tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}]}}},"PublicSubnet1":{"id":"PublicSubnet1","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.223.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.0.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"Acl":{"id":"Acl","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"FibonacciVpcPublicSubnet1RouteTable1FDEB4B1"},"subnetId":{"Ref":"FibonacciVpcPublicSubnet1SubnetE9415DB7"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet1/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"FibonacciVpcIGW6389DCD2"},"routeTableId":{"Ref":"FibonacciVpcPublicSubnet1RouteTable1FDEB4B1"}}}}}},"PublicSubnet2":{"id":"PublicSubnet2","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PublicSubnet","version":"2.223.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.1.0/24","mapPublicIpOnLaunch":true,"tags":[{"key":"aws-cdk:subnet-name","value":"Public"},{"key":"aws-cdk:subnet-type","value":"Public"},{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"Acl":{"id":"Acl","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"FibonacciVpcPublicSubnet2RouteTable723BB512"},"subnetId":{"Ref":"FibonacciVpcPublicSubnet2SubnetEAF9A033"}}}},"DefaultRoute":{"id":"DefaultRoute","path":"FibonacciStack-dev/FibonacciVpc/PublicSubnet2/DefaultRoute","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Route","aws:cdk:cloudformation:props":{"destinationCidrBlock":"0.0.0.0/0","gatewayId":{"Ref":"FibonacciVpcIGW6389DCD2"},"routeTableId":{"Ref":"FibonacciVpcPublicSubnet2RouteTable723BB512"}}}}}},"PrivateIsolatedSubnet1":{"id":"PrivateIsolatedSubnet1","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.223.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1a","cidrBlock":"10.0.2.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateIsolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"Acl":{"id":"Acl","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet1/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"FibonacciVpcPrivateIsolatedSubnet1RouteTable2D23BEA5"},"subnetId":{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"}}}}}},"PrivateIsolatedSubnet2":{"id":"PrivateIsolatedSubnet2","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.PrivateSubnet","version":"2.223.0","metadata":[]},"children":{"Subnet":{"id":"Subnet","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2/Subnet","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnet","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::Subnet","aws:cdk:cloudformation:props":{"availabilityZone":"us-east-1b","cidrBlock":"10.0.3.0/24","mapPublicIpOnLaunch":false,"tags":[{"key":"aws-cdk:subnet-name","value":"PrivateIsolated"},{"key":"aws-cdk:subnet-type","value":"Isolated"},{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"Acl":{"id":"Acl","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2/Acl","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"RouteTable":{"id":"RouteTable","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2/RouteTable","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnRouteTable","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::RouteTable","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"RouteTableAssociation":{"id":"RouteTableAssociation","path":"FibonacciStack-dev/FibonacciVpc/PrivateIsolatedSubnet2/RouteTableAssociation","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SubnetRouteTableAssociation","aws:cdk:cloudformation:props":{"routeTableId":{"Ref":"FibonacciVpcPrivateIsolatedSubnet2RouteTableF181CB21"},"subnetId":{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}}}}}},"IGW":{"id":"IGW","path":"FibonacciStack-dev/FibonacciVpc/IGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnInternetGateway","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::InternetGateway","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}]}}},"VPCGW":{"id":"VPCGW","path":"FibonacciStack-dev/FibonacciVpc/VPCGW","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCGatewayAttachment","aws:cdk:cloudformation:props":{"internetGatewayId":{"Ref":"FibonacciVpcIGW6389DCD2"},"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"RestrictDefaultSecurityGroupCustomResource":{"id":"RestrictDefaultSecurityGroupCustomResource","path":"FibonacciStack-dev/FibonacciVpc/RestrictDefaultSecurityGroupCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"FibonacciStack-dev/FibonacciVpc/RestrictDefaultSecurityGroupCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"S3Endpoint":{"id":"S3Endpoint","path":"FibonacciStack-dev/FibonacciVpc/S3Endpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.GatewayVpcEndpoint","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/S3Endpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}],"routeTableIds":[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1RouteTable2D23BEA5"},{"Ref":"FibonacciVpcPrivateIsolatedSubnet2RouteTableF181CB21"},{"Ref":"FibonacciVpcPublicSubnet1RouteTable1FDEB4B1"},{"Ref":"FibonacciVpcPublicSubnet2RouteTable723BB512"}],"serviceName":{"Fn::Join":["",["com.amazonaws.",{"Ref":"AWS::Region"},".s3"]]},"vpcEndpointType":"Gateway","vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}}}},"SecretsManagerEndpoint":{"id":"SecretsManagerEndpoint","path":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.223.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"from FibonacciStackdevLambdaSg4C2F05B4:443":{"id":"from FibonacciStackdevLambdaSg4C2F05B4:443","path":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint/SecurityGroup/from FibonacciStackdevLambdaSg4C2F05B4:443","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda access to Secrets Manager endpoint","fromPort":443,"groupId":{"Fn::GetAtt":["FibonacciVpcSecretsManagerEndpointSecurityGroup2603E8CC","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSg30A6108C","GroupId"]},"toPort":443}}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/SecretsManagerEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["FibonacciVpcSecretsManagerEndpointSecurityGroup2603E8CC","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.secretsmanager","subnetIds":[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"},{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}}}},"EventBridgeEndpoint":{"id":"EventBridgeEndpoint","path":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.InterfaceVpcEndpoint","version":"2.223.0","metadata":[]},"children":{"SecurityGroup":{"id":"SecurityGroup","path":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint/SecurityGroup","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"from FibonacciStackdevLambdaSg4C2F05B4:443":{"id":"from FibonacciStackdevLambdaSg4C2F05B4:443","path":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint/SecurityGroup/from FibonacciStackdevLambdaSg4C2F05B4:443","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda access to EventBridge endpoint","fromPort":443,"groupId":{"Fn::GetAtt":["FibonacciVpcEventBridgeEndpointSecurityGroupCB38502F","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSg30A6108C","GroupId"]},"toPort":443}}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciVpc/EventBridgeEndpoint/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnVPCEndpoint","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::VPCEndpoint","aws:cdk:cloudformation:props":{"tags":[{"key":"Name","value":"FibonacciStack-dev/FibonacciVpc"}],"privateDnsEnabled":true,"securityGroupIds":[{"Fn::GetAtt":["FibonacciVpcEventBridgeEndpointSecurityGroupCB38502F","GroupId"]}],"serviceName":"com.amazonaws.us-east-1.events","subnetIds":[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"},{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}],"vpcEndpointType":"Interface","vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}}}}}},"Custom::VpcRestrictDefaultSGCustomResourceProvider":{"id":"Custom::VpcRestrictDefaultSGCustomResourceProvider","path":"FibonacciStack-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"FibonacciStack-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"FibonacciStack-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"FibonacciStack-dev/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"LambdaSg":{"id":"LambdaSg","path":"FibonacciStack-dev/LambdaSg","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/LambdaSg/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Lambda functions","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}}}},"DbSg":{"id":"DbSg","path":"FibonacciStack-dev/DbSg","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DbSg/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Security group for Aurora cluster","securityGroupEgress":[{"cidrIp":"255.255.255.255/32","description":"Disallow all traffic","ipProtocol":"icmp","fromPort":252,"toPort":86}],"vpcId":{"Ref":"FibonacciVpcB997BDC3"}}}},"from FibonacciStackdevLambdaSg4C2F05B4:5432":{"id":"from FibonacciStackdevLambdaSg4C2F05B4:5432","path":"FibonacciStack-dev/DbSg/from FibonacciStackdevLambdaSg4C2F05B4:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Lambda access to Aurora","fromPort":5432,"groupId":{"Fn::GetAtt":["DbSg495F8305","GroupId"]},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["LambdaSg30A6108C","GroupId"]},"toPort":5432}}}}},"DbSecret":{"id":"DbSecret","path":"FibonacciStack-dev/DbSecret","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseSecret","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DbSecret/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecret","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::Secret","aws:cdk:cloudformation:props":{"description":{"Fn::Join":["",["Generated by the CDK for stack: ",{"Ref":"AWS::StackName"}]]},"generateSecretString":{"passwordLength":30,"secretStringTemplate":"{\"username\":\"dbadmin\"}","generateStringKey":"password","excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"},"name":"fibonacci/db/credentials-dev"}}},"Attachment":{"id":"Attachment","path":"FibonacciStack-dev/DbSecret/Attachment","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DbSecret/Attachment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::SecretTargetAttachment","aws:cdk:cloudformation:props":{"secretId":{"Ref":"DbSecret685A0FA5"},"targetId":{"Ref":"AuroraCluster23D869C0"},"targetType":"AWS::RDS::DBCluster"}}}}},"RotationSchedule":{"id":"RotationSchedule","path":"FibonacciStack-dev/DbSecret/RotationSchedule","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.RotationSchedule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DbSecret/RotationSchedule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnRotationSchedule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::RotationSchedule","aws:cdk:cloudformation:props":{"hostedRotationLambda":{"rotationType":"PostgreSQLSingleUser","rotationLambdaName":"fibonacci-secret-rotation-dev","vpcSecurityGroupIds":{"Fn::GetAtt":["LambdaSg30A6108C","GroupId"]},"vpcSubnetIds":{"Fn::Join":["",[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"},",",{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}]]},"excludeCharacters":" %+~`#$&*()|[]{}:;<>?!'/@\"\\"},"rotateImmediatelyOnUpdate":false,"rotationRules":{"scheduleExpression":"rate(30 days)"},"secretId":{"Ref":"DbSecret685A0FA5"}}}}}},"Policy":{"id":"Policy","path":"FibonacciStack-dev/DbSecret/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.ResourcePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DbSecret/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_secretsmanager.CfnResourcePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SecretsManager::ResourcePolicy","aws:cdk:cloudformation:props":{"resourcePolicy":{"Statement":[{"Action":"secretsmanager:DeleteSecret","Effect":"Deny","Principal":{"AWS":"arn:aws:iam::207933152643:root"},"Resource":"*"}],"Version":"2012-10-17"},"secretId":{"Ref":"DbSecret685A0FA5"}}}}}}}},"AuroraCluster":{"id":"AuroraCluster","path":"FibonacciStack-dev/AuroraCluster","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.DatabaseCluster","version":"2.223.0","metadata":[]},"children":{"Subnets":{"id":"Subnets","path":"FibonacciStack-dev/AuroraCluster/Subnets","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.SubnetGroup","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"FibonacciStack-dev/AuroraCluster/Subnets/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBSubnetGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBSubnetGroup","aws:cdk:cloudformation:props":{"dbSubnetGroupDescription":"Subnets for AuroraCluster database","subnetIds":[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"},{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}]}}}}},"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup":{"id":"AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","path":"FibonacciStack-dev/AuroraCluster/AuroraPostgreSqlDatabaseClusterEngineDefaultParameterGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/AuroraCluster/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBCluster","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBCluster","aws:cdk:cloudformation:props":{"backupRetentionPeriod":7,"copyTagsToSnapshot":true,"databaseName":"fibonacci","dbClusterParameterGroupName":"default.aurora-postgresql15","dbSubnetGroupName":{"Ref":"AuroraClusterSubnetsF3E9E6AD"},"deletionProtection":false,"engine":"aurora-postgresql","engineVersion":"15.8","kmsKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"masterUsername":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DbSecret685A0FA5"},":SecretString:username::}}"]]},"masterUserPassword":{"Fn::Join":["",["{{resolve:secretsmanager:",{"Ref":"DbSecret685A0FA5"},":SecretString:password::}}"]]},"port":5432,"preferredBackupWindow":"03:00-04:00","serverlessV2ScalingConfiguration":{"minCapacity":0.5,"maxCapacity":1},"storageEncrypted":true,"vpcSecurityGroupIds":[{"Fn::GetAtt":["DbSg495F8305","GroupId"]}]}}},"writer":{"id":"writer","path":"FibonacciStack-dev/AuroraCluster/writer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/AuroraCluster/writer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_rds.CfnDBInstance","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::RDS::DBInstance","aws:cdk:cloudformation:props":{"dbClusterIdentifier":{"Ref":"AuroraCluster23D869C0"},"dbInstanceClass":"db.serverless","engine":"aurora-postgresql","promotionTier":0,"publiclyAccessible":false}}}}}}},"FibonacciBus":{"id":"FibonacciBus","path":"FibonacciStack-dev/FibonacciBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"name":"fibonacci-bus-dev"}}}}},"DeadLetterQueue":{"id":"DeadLetterQueue","path":"FibonacciStack-dev/DeadLetterQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DeadLetterQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"messageRetentionPeriod":1209600,"queueName":"fibonacci-dlq-dev"}}}}},"MainQueue":{"id":"MainQueue","path":"FibonacciStack-dev/MainQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/MainQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-main-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}},"Policy":{"id":"Policy","path":"FibonacciStack-dev/MainQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/MainQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["MainQueueD24C6076","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"MainQueueD24C6076"}]}}}}}}},"recebimentoQueue":{"id":"recebimentoQueue","path":"FibonacciStack-dev/recebimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/recebimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-recebimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"estrategiaQueue":{"id":"estrategiaQueue","path":"FibonacciStack-dev/estrategiaQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/estrategiaQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-estrategia-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"disparoQueue":{"id":"disparoQueue","path":"FibonacciStack-dev/disparoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/disparoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-disparo-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"atendimentoQueue":{"id":"atendimentoQueue","path":"FibonacciStack-dev/atendimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/atendimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-atendimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"sentimentoQueue":{"id":"sentimentoQueue","path":"FibonacciStack-dev/sentimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/sentimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-sentimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"agendamentoQueue":{"id":"agendamentoQueue","path":"FibonacciStack-dev/agendamentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/agendamentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-agendamento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"relatoriosQueue":{"id":"relatoriosQueue","path":"FibonacciStack-dev/relatoriosQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/relatoriosQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]},"queueName":"fibonacci-relatorios-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["DeadLetterQueue9F481546","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}}}},"NigredoRoutingRule":{"id":"NigredoRoutingRule","path":"FibonacciStack-dev/NigredoRoutingRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/NigredoRoutingRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route Nigredo events to appropriate queues","eventBusName":{"Ref":"FibonacciBus476BDCEA"},"eventPattern":{"source":["nigredo"]},"name":"nigredo-routing-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["MainQueueD24C6076","Arn"]}}]}}}}},"AlquimistaRoutingRule":{"id":"AlquimistaRoutingRule","path":"FibonacciStack-dev/AlquimistaRoutingRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/AlquimistaRoutingRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route Alquimista events to appropriate queues","eventBusName":{"Ref":"FibonacciBus476BDCEA"},"eventPattern":{"source":["alquimista"]},"name":"alquimista-routing-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["MainQueueD24C6076","Arn"]}}]}}}}},"DemoRule":{"id":"DemoRule","path":"FibonacciStack-dev/DemoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DemoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Demo rule for testing","eventBusName":{"Ref":"FibonacciBus476BDCEA"},"eventPattern":{"source":["fibonacci.demo"]},"name":"demo-rule-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["MainQueueD24C6076","Arn"]}}]}}}}},"SiteBucket":{"id":"SiteBucket","path":"FibonacciStack-dev/SiteBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/SiteBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"bucketKeyEnabled":true,"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]}}}]},"bucketName":{"Fn::Join":["",["fibonacci-site-dev-",{"Ref":"AWS::AccountId"}]]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"FibonacciStack-dev/SiteBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/SiteBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"SiteBucket397A1860"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"CanonicalUser":{"Fn::GetAtt":["DistributionOrigin1S3Origin5F5C0696","S3CanonicalUserId"]}},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:aws:cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["SiteBucket397A1860","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"FibonacciStack-dev/SiteBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"FibonacciStack-dev/SiteBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"FibonacciStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.223.0"},"children":{"Staging":{"id":"Staging","path":"FibonacciStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"Role":{"id":"Role","path":"FibonacciStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}},"Handler":{"id":"Handler","path":"FibonacciStack-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"StackVersionsBucket":{"id":"StackVersionsBucket","path":"FibonacciStack-dev/StackVersionsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/StackVersionsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"bucketKeyEnabled":true,"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]}}}]},"bucketName":{"Fn::Join":["",["fibonacci-stack-versions-dev-",{"Ref":"AWS::AccountId"}]]},"lifecycleConfiguration":{"rules":[{"abortIncompleteMultipartUpload":{"daysAfterInitiation":1},"id":"DeleteOldVersions","noncurrentVersionExpiration":{"noncurrentDays":90},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"FibonacciStack-dev/StackVersionsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/StackVersionsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"StackVersionsBucket900BB24B"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["StackVersionsBucket900BB24B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["StackVersionsBucket900BB24B","Arn"]},"/*"]]}]},{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["StackVersionsBucket900BB24B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["StackVersionsBucket900BB24B","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"FibonacciStack-dev/StackVersionsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.223.0","metadata":[]},"children":{"Default":{"id":"Default","path":"FibonacciStack-dev/StackVersionsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}}}},"CloudFrontWebACL":{"id":"CloudFrontWebACL","path":"FibonacciStack-dev/CloudFrontWebACL","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"customResponseBodies":{"rate-limit-response":{"contentType":"APPLICATION_JSON","content":"{\"error\":\"Rate limit exceeded\",\"message\":\"Too many requests. Please try again later.\",\"code\":\"RATE_LIMIT_EXCEEDED\"}"}},"defaultAction":{"allow":{}},"description":"WAF Web ACL for Fibonacci CloudFront Distribution - dev","name":"fibonacci-cloudfront-waf-dev","rules":[{"name":"RateLimitRule","priority":1,"statement":{"rateBasedStatement":{"limit":2000,"aggregateKeyType":"IP","scopeDownStatement":{"notStatement":{"statement":{"byteMatchStatement":{"searchString":"/health","fieldToMatch":{"uriPath":{}},"textTransformations":[{"priority":0,"type":"LOWERCASE"}],"positionalConstraint":"STARTS_WITH"}}}}}},"action":{"block":{"customResponse":{"responseCode":429,"customResponseBodyKey":"rate-limit-response"}}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"RateLimitRule-dev"}},{"name":"SQLInjectionProtection","priority":2,"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesSQLiRuleSet","excludedRules":[]}},"overrideAction":{"none":{}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"SQLInjectionProtection-dev"}},{"name":"XSSProtection","priority":3,"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesKnownBadInputsRuleSet","excludedRules":[]}},"overrideAction":{"none":{}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"XSSProtection-dev"}},{"name":"CoreRuleSet","priority":4,"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesCommonRuleSet","excludedRules":[{"name":"SizeRestrictions_BODY"},{"name":"GenericRFI_BODY"}]}},"overrideAction":{"none":{}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"CoreRuleSet-dev"}},{"name":"BotProtection","priority":5,"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesBotControlRuleSet","managedRuleGroupConfigs":[{"awsManagedRulesBotControlRuleSet":{"inspectionLevel":"COMMON"}}]}},"overrideAction":{"none":{}},"visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"BotProtection-dev"}}],"scope":"CLOUDFRONT","visibilityConfig":{"sampledRequestsEnabled":true,"cloudWatchMetricsEnabled":true,"metricName":"FibonacciCloudFrontWAF-dev"}}}},"WAFBlockedRequestsAlarm":{"id":"WAFBlockedRequestsAlarm","path":"FibonacciStack-dev/WAFBlockedRequestsAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/WAFBlockedRequestsAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Alto número de requisições bloqueadas pelo WAF - Possível ataque em andamento","alarmName":"fibonacci-waf-blocked-requests-dev","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"Region","value":"us-east-1"},{"name":"Rule","value":"ALL"},{"name":"WebACL","value":"fibonacci-cloudfront-waf-dev"}],"evaluationPeriods":2,"metricName":"BlockedRequests","namespace":"AWS/WAFV2","period":300,"statistic":"Sum","threshold":100,"treatMissingData":"notBreaching"}}}}},"WAFRateLimitAlarm":{"id":"WAFRateLimitAlarm","path":"FibonacciStack-dev/WAFRateLimitAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/WAFRateLimitAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Rate limiting ativado - IPs excedendo limite de requisições","alarmName":"fibonacci-waf-rate-limit-dev","comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"Region","value":"us-east-1"},{"name":"Rule","value":"RateLimitRule"},{"name":"WebACL","value":"fibonacci-cloudfront-waf-dev"}],"evaluationPeriods":1,"metricName":"BlockedRequests","namespace":"AWS/WAFV2","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"OAC":{"id":"OAC","path":"FibonacciStack-dev/OAC","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"fibonacci-oac-dev","originAccessControlOriginType":"s3","signingBehavior":"always","signingProtocol":"sigv4"}}}},"Distribution":{"id":"Distribution","path":"FibonacciStack-dev/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.223.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"FibonacciStack-dev/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"S3Origin":{"id":"S3Origin","path":"FibonacciStack-dev/Distribution/Origin1/S3Origin","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.OriginAccessIdentity","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/Distribution/Origin1/S3Origin/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCloudFrontOriginAccessIdentity","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CloudFrontOriginAccessIdentity","aws:cdk:cloudformation:props":{"cloudFrontOriginAccessIdentityConfig":{"comment":"Identity for FibonacciStackdevDistributionOrigin1FBD7EA0E"}}}}}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["SiteBucket397A1860","RegionalDomainName"]},"id":"FibonacciStackdevDistributionOrigin1FBD7EA0E","s3OriginConfig":{"originAccessIdentity":{"Fn::Join":["",["origin-access-identity/cloudfront/",{"Ref":"DistributionOrigin1S3Origin5F5C0696"}]]}}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"FibonacciStackdevDistributionOrigin1FBD7EA0E","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":"658327ea-f89d-4fab-a63d-7e88639e58f6","compress":true,"viewerProtocolPolicy":"redirect-to-https"},"comment":"Fibonacci Front-End Distribution - dev","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100","webAclId":{"Fn::GetAtt":["CloudFrontWebACL","Arn"]}}}}}}},"UserPool":{"id":"UserPool","path":"FibonacciStack-dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.223.0","metadata":[]},"children":{"smsRole":{"id":"smsRole","path":"FibonacciStack-dev/UserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"FibonacciStack-dev/UserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/UserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"FibonacciStackdevUserPool015169EC"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","enabledMfas":["SMS_MFA","SOFTWARE_TOKEN_MFA"],"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":false,"required":true},{"name":"tenant_id","attributeDataType":"String","mutable":false},{"name":"company_name","attributeDataType":"String","mutable":true},{"name":"user_role","attributeDataType":"String","mutable":true}],"smsConfiguration":{"externalId":"FibonacciStackdevUserPool015169EC","snsCallerArn":{"Fn::GetAtt":["UserPoolsmsRole4EA729DD","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolName":"fibonacci-users-dev","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"WebClient":{"id":"WebClient","path":"FibonacciStack-dev/UserPool/WebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/UserPool/WebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"fibonacci-web-client-dev","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"UserPoolAuthorizerClient":{"id":"UserPoolAuthorizerClient","path":"FibonacciStack-dev/UserPool/UserPoolAuthorizerClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/UserPool/UserPoolAuthorizerClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}}}},"ApiHandler":{"id":"ApiHandler","path":"FibonacciStack-dev/ApiHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"FibonacciStack-dev/ApiHandler/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"FibonacciStack-dev/ApiHandler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandler/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"FibonacciStack-dev/ApiHandler/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandler/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["FibonacciBus476BDCEA","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DbSecret685A0FA5"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MainQueueD24C6076","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["FibonacciKmsKey4FDBC47E","Arn"]}}],"Version":"2012-10-17"},"policyName":"ApiHandlerServiceRoleDefaultPolicy10321D87","roles":[{"Ref":"ApiHandlerServiceRole592E70E9"}]}}}}}}},"Code":{"id":"Code","path":"FibonacciStack-dev/ApiHandler/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"FibonacciStack-dev/ApiHandler/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"FibonacciStack-dev/ApiHandler/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"d6282263f012b4d1e91794d6cb10ea2590b84c432dfee003c3383a069735d32b.zip"},"environment":{"variables":{"DB_SECRET_ARN":{"Ref":"DbSecret685A0FA5"},"EVENT_BUS_NAME":{"Ref":"FibonacciBus476BDCEA"},"NODE_OPTIONS":"--enable-source-maps","POWERTOOLS_SERVICE_NAME":"fibonacci-api","USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"}}},"functionName":"fibonacci-api-handler-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ApiHandlerServiceRole592E70E9","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}},"CurrentVersion":{"id":"CurrentVersion","path":"FibonacciStack-dev/ApiHandler/CurrentVersion","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Version","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandler/CurrentVersion/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnVersion","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Version","aws:cdk:cloudformation:props":{"functionName":{"Ref":"ApiHandler5E7490E8"}}}}}},"LogRetention":{"id":"LogRetention","path":"FibonacciStack-dev/ApiHandler/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandler/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"ApiHandler-LogGroup":{"id":"ApiHandler-LogGroup","path":"FibonacciStack-dev/ApiHandler/ApiHandler-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ApiHandlerAlias":{"id":"ApiHandlerAlias","path":"FibonacciStack-dev/ApiHandlerAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Alias","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiHandlerAlias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnAlias","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Alias","aws:cdk:cloudformation:props":{"description":"Alias para blue-green deployment","functionName":{"Ref":"ApiHandler5E7490E8"},"functionVersion":{"Fn::GetAtt":["ApiHandlerCurrentVersion5C7F0A60d661fb25a0c22558dda85ecb5ea616ce","Version"]},"name":"LIVE"}}},"ScalingRole":{"id":"ScalingRole","path":"FibonacciStack-dev/ApiHandlerAlias/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"NigredoWebhookHandler":{"id":"NigredoWebhookHandler","path":"FibonacciStack-dev/NigredoWebhookHandler","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"FibonacciStack-dev/NigredoWebhookHandler/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"FibonacciStack-dev/NigredoWebhookHandler/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/NigredoWebhookHandler/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"FibonacciStack-dev/NigredoWebhookHandler/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/NigredoWebhookHandler/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["FibonacciBus476BDCEA","Arn"]}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Ref":"DbSecret685A0FA5"}}],"Version":"2012-10-17"},"policyName":"NigredoWebhookHandlerServiceRoleDefaultPolicy52DBC0A5","roles":[{"Ref":"NigredoWebhookHandlerServiceRole1CEC625D"}]}}}}}}},"Code":{"id":"Code","path":"FibonacciStack-dev/NigredoWebhookHandler/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"FibonacciStack-dev/NigredoWebhookHandler/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"FibonacciStack-dev/NigredoWebhookHandler/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/NigredoWebhookHandler/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"930c6b6154394ce4fcb0f0733d5123b65a5659dbfc4a307e726a1910e1415fee.zip"},"environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"fibonacci-nigredo-webhook","EVENT_BUS_NAME":{"Ref":"FibonacciBus476BDCEA"},"DB_SECRET_ARN":{"Ref":"DbSecret685A0FA5"},"NIGREDO_WEBHOOK_SECRET":"change-me-in-production","NODE_OPTIONS":"--enable-source-maps"}},"functionName":"fibonacci-nigredo-webhook-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["NigredoWebhookHandlerServiceRole1CEC625D","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Ref":"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D"},{"Ref":"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF"}],"securityGroupIds":[{"Fn::GetAtt":["LambdaSg30A6108C","GroupId"]}]}}}}}},"HttpApi":{"id":"HttpApi","path":"FibonacciStack-dev/HttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Authorization"],"allowMethods":["GET","POST","OPTIONS"],"allowOrigins":["*"],"maxAge":86400},"description":"Fibonacci API Gateway - Orquestrador Central","name":"fibonacci-api-dev","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"FibonacciStack-dev/HttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"autoDeploy":true,"stageName":"$default"}}}}},"GET--health":{"id":"GET--health","path":"FibonacciStack-dev/HttpApi/GET--health","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"LambdaIntegration":{"id":"LambdaIntegration","path":"FibonacciStack-dev/HttpApi/GET--health/LambdaIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/GET--health/LambdaIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Ref":"ApiHandlerAlias005E4CA0"},"payloadFormatVersion":"1.0"}}}}},"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"FibonacciStack-dev/HttpApi/GET--health/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Ref":"ApiHandlerAlias005E4CA0"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/health"]]}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/GET--health/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"GET /health","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGEThealthLambdaIntegrationCBB2D3F6"}]]}}}}}},"POST--events":{"id":"POST--events","path":"FibonacciStack-dev/HttpApi/POST--events","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"LambdaIntegration-Permission":{"id":"LambdaIntegration-Permission","path":"FibonacciStack-dev/HttpApi/POST--events/LambdaIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Ref":"ApiHandlerAlias005E4CA0"},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/events"]]}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/POST--events/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /events","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGEThealthLambdaIntegrationCBB2D3F6"}]]}}}}}},"POST--public--nigredo-event":{"id":"POST--public--nigredo-event","path":"FibonacciStack-dev/HttpApi/POST--public--nigredo-event","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"NigredoWebhookIntegration":{"id":"NigredoWebhookIntegration","path":"FibonacciStack-dev/HttpApi/POST--public--nigredo-event/NigredoWebhookIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/POST--public--nigredo-event/NigredoWebhookIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["NigredoWebhookHandler1C5E581A","Arn"]},"payloadFormatVersion":"2.0"}}}}},"NigredoWebhookIntegration-Permission":{"id":"NigredoWebhookIntegration-Permission","path":"FibonacciStack-dev/HttpApi/POST--public--nigredo-event/NigredoWebhookIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["NigredoWebhookHandler1C5E581A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/public/nigredo-event"]]}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/HttpApi/POST--public--nigredo-event/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /public/nigredo-event","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiPOSTpublicnigredoeventNigredoWebhookIntegration8B405DD9"}]]}}}}}}}},"VpcId":{"id":"VpcId","path":"FibonacciStack-dev/VpcId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"S3EndpointId":{"id":"S3EndpointId","path":"FibonacciStack-dev/S3EndpointId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SecretsManagerEndpointId":{"id":"SecretsManagerEndpointId","path":"FibonacciStack-dev/SecretsManagerEndpointId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EventBridgeEndpointId":{"id":"EventBridgeEndpointId","path":"FibonacciStack-dev/EventBridgeEndpointId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DbClusterArn":{"id":"DbClusterArn","path":"FibonacciStack-dev/DbClusterArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DbSecretName":{"id":"DbSecretName","path":"FibonacciStack-dev/DbSecretName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EventBusName":{"id":"EventBusName","path":"FibonacciStack-dev/EventBusName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EventBusArn":{"id":"EventBusArn","path":"FibonacciStack-dev/EventBusArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"MainQueueUrl":{"id":"MainQueueUrl","path":"FibonacciStack-dev/MainQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DlqUrl":{"id":"DlqUrl","path":"FibonacciStack-dev/DlqUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolId":{"id":"UserPoolId","path":"FibonacciStack-dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"UserPoolArn":{"id":"UserPoolArn","path":"FibonacciStack-dev/UserPoolArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SiteBucketName":{"id":"SiteBucketName","path":"FibonacciStack-dev/SiteBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CloudFrontUrl":{"id":"CloudFrontUrl","path":"FibonacciStack-dev/CloudFrontUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DistributionId":{"id":"DistributionId","path":"FibonacciStack-dev/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebAclId":{"id":"WebAclId","path":"FibonacciStack-dev/WebAclId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebAclArn":{"id":"WebAclArn","path":"FibonacciStack-dev/WebAclArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"StackVersionsBucketName":{"id":"StackVersionsBucketName","path":"FibonacciStack-dev/StackVersionsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebAclName":{"id":"WebAclName","path":"FibonacciStack-dev/WebAclName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ApiUrl":{"id":"ApiUrl","path":"FibonacciStack-dev/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ApiId":{"id":"ApiId","path":"FibonacciStack-dev/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"FibonacciStack-dev/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"KmsKeyId":{"id":"KmsKeyId","path":"FibonacciStack-dev/KmsKeyId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"KmsKeyArn":{"id":"KmsKeyArn","path":"FibonacciStack-dev/KmsKeyArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"FibonacciCoreDashboard":{"id":"FibonacciCoreDashboard","path":"FibonacciStack-dev/FibonacciCoreDashboard","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Dashboard":{"id":"Dashboard","path":"FibonacciStack-dev/FibonacciCoreDashboard/Dashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/FibonacciCoreDashboard/Dashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"periodOverride\":\"auto\",\"widgets\":[{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway - Requests/min\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway - Errors\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"4XXError\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60,\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Gateway - Latency (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60}],[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60,\"stat\":\"p95\"}],[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"HttpApiF5A9A8A7"},"\",{\"period\":60,\"stat\":\"p99\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda - Invocations\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":8,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda - Errors & Throttles\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":16,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda - Concurrent Executions\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"Maximum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda - Duration (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ApiHandler5E7490E8"},"\",{\"period\":60,\"stat\":\"p99\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"EventBridge - Events Published\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Events\",\"Invocations\",\"EventBusName\",\"",{"Ref":"FibonacciBus476BDCEA"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"EventBridge - Failed Invocations\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Events\",\"FailedInvocations\",\"EventBusName\",\"",{"Ref":"FibonacciBus476BDCEA"},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SQS Main Queue - Messages In Flight\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::GetAtt":["MainQueueD24C6076","QueueName"]},"\",{\"period\":60}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":8,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SQS Main Queue - Messages Sent\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"NumberOfMessagesSent\",\"QueueName\",\"",{"Fn::GetAtt":["MainQueueD24C6076","QueueName"]},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":8,\"height\":6,\"x\":16,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"SQS Main Queue - Messages Received\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"NumberOfMessagesReceived\",\"QueueName\",\"",{"Fn::GetAtt":["MainQueueD24C6076","QueueName"]},"\",{\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"singleValue\",\"title\":\"DLQ - Message Count (ALERT IF > 0)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/SQS\",\"ApproximateNumberOfMessagesVisible\",\"QueueName\",\"",{"Fn::GetAtt":["DeadLetterQueue9F481546","QueueName"]},"\",{\"period\":60,\"stat\":\"Maximum\"}]],\"setPeriodToTimeRange\":false}}]}"]]},"dashboardName":"Fibonacci-Core-dev"}}}}}}},"DashboardName":{"id":"DashboardName","path":"FibonacciStack-dev/DashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AlarmTopic":{"id":"AlarmTopic","path":"FibonacciStack-dev/AlarmTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/AlarmTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Fibonacci CloudWatch Alarms","topicName":"fibonacci-alarms-dev"}}}}},"HighErrorRateAlarm":{"id":"HighErrorRateAlarm","path":"FibonacciStack-dev/HighErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HighErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Taxa de erro acima de 10 em 2 minutos - Requer investigação imediata","alarmName":"fibonacci-high-error-rate-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"ApiHandler5E7490E8"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":60,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"HighLatencyAlarm":{"id":"HighLatencyAlarm","path":"FibonacciStack-dev/HighLatencyAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/HighLatencyAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"P95 latência acima de 3 segundos - Performance degradada","alarmName":"fibonacci-high-latency-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"ApiHandler5E7490E8"}}],"evaluationPeriods":3,"extendedStatistic":"p95","metricName":"Duration","namespace":"AWS/Lambda","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":300,"threshold":3000,"treatMissingData":"notBreaching"}}}}},"DLQNotEmptyAlarm":{"id":"DLQNotEmptyAlarm","path":"FibonacciStack-dev/DLQNotEmptyAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/DLQNotEmptyAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Mensagens na DLQ - Falhas recorrentes detectadas","alarmName":"fibonacci-dlq-not-empty-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":1,"dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["DeadLetterQueue9F481546","QueueName"]}}],"evaluationPeriods":1,"metricName":"ApproximateNumberOfMessagesVisible","namespace":"AWS/SQS","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":60,"statistic":"Maximum","threshold":1,"treatMissingData":"notBreaching"}}}}},"AuroraCpuAlarm":{"id":"AuroraCpuAlarm","path":"FibonacciStack-dev/AuroraCpuAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/AuroraCpuAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Aurora CPU acima de 80% - Considerar escalar capacidade","alarmName":"fibonacci-aurora-cpu-high-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"DBClusterIdentifier","value":{"Ref":"AuroraCluster23D869C0"}}],"evaluationPeriods":3,"metricName":"CPUUtilization","namespace":"AWS/RDS","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":300,"statistic":"Average","threshold":80,"treatMissingData":"notBreaching"}}}}},"EstimatedCostAlarm":{"id":"EstimatedCostAlarm","path":"FibonacciStack-dev/EstimatedCostAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/EstimatedCostAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Invocações Lambda acima do esperado - Custos podem exceder budget","alarmName":"fibonacci-estimated-cost-high-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"ApiHandler5E7490E8"}}],"evaluationPeriods":2,"metricName":"Invocations","namespace":"AWS/Lambda","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":3600,"statistic":"Sum","threshold":10000,"treatMissingData":"notBreaching"}}}}},"ApiGateway5xxAlarm":{"id":"ApiGateway5xxAlarm","path":"FibonacciStack-dev/ApiGateway5xxAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/ApiGateway5xxAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"API Gateway retornando erros 5xx - Problema no servidor","alarmName":"fibonacci-api-5xx-errors-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"ApiId","value":{"Ref":"HttpApiF5A9A8A7"}}],"evaluationPeriods":2,"metricName":"5XXError","namespace":"AWS/ApiGateway","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":60,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"LambdaThrottleAlarm":{"id":"LambdaThrottleAlarm","path":"FibonacciStack-dev/LambdaThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/LambdaThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Lambda sendo throttled - Considerar aumentar reserved concurrency","alarmName":"fibonacci-lambda-throttles-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"ApiHandler5E7490E8"}}],"evaluationPeriods":2,"metricName":"Throttles","namespace":"AWS/Lambda","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"OldMessagesAlarm":{"id":"OldMessagesAlarm","path":"FibonacciStack-dev/OldMessagesAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/OldMessagesAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"Mensagens antigas na fila - Possível problema de processamento","alarmName":"fibonacci-old-messages-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","datapointsToAlarm":2,"dimensions":[{"name":"QueueName","value":{"Fn::GetAtt":["MainQueueD24C6076","QueueName"]}}],"evaluationPeriods":2,"metricName":"ApproximateAgeOfOldestMessage","namespace":"AWS/SQS","okActions":[{"Ref":"AlarmTopicD01E77F9"}],"period":300,"statistic":"Maximum","threshold":300,"treatMissingData":"notBreaching"}}}}},"CriticalSystemAlarm":{"id":"CriticalSystemAlarm","path":"FibonacciStack-dev/CriticalSystemAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CompositeAlarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/CriticalSystemAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnCompositeAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::CompositeAlarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"AlarmTopicD01E77F9"}],"alarmDescription":"CRÍTICO: Múltiplos alarmes ativos - Sistema em estado degradado","alarmName":"fibonacci-critical-system-dev","alarmRule":{"Fn::Join":["",["(ALARM(\"",{"Fn::GetAtt":["HighErrorRateAlarm9E2FAEE9","Arn"]},"\") OR (ALARM(\"",{"Fn::GetAtt":["HighLatencyAlarm61213652","Arn"]},"\") AND ALARM(\"",{"Fn::GetAtt":["DLQNotEmptyAlarm3601BB2F","Arn"]},"\")))"]]}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"FibonacciStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"InsightsQueries":{"id":"InsightsQueries","path":"FibonacciStack-dev/InsightsQueries","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"ErrorsByAgentQuery":{"id":"ErrorsByAgentQuery","path":"FibonacciStack-dev/InsightsQueries/ErrorsByAgentQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["ApiHandlerLogRetention907E318F","LogGroupName"]}],"name":"dev/fibonacci/errors-by-agent","queryString":"fields @timestamp, agent, message, error.message, error.name, error.stack, traceId, leadId\n| filter level = \"ERROR\"\n| stats count() as errorCount by agent\n| sort errorCount desc"}}},"LatencyByEndpointQuery":{"id":"LatencyByEndpointQuery","path":"FibonacciStack-dev/InsightsQueries/LatencyByEndpointQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["ApiHandlerLogRetention907E318F","LogGroupName"]}],"name":"dev/fibonacci/latency-by-endpoint","queryString":"fields @timestamp, requestContext.http.path as endpoint, duration, requestContext.http.method as method\n| filter requestContext.http.path like /api/\n| stats \n    count() as requestCount,\n    avg(duration) as avgDuration,\n    min(duration) as minDuration,\n    max(duration) as maxDuration,\n    pct(duration, 50) as p50,\n    pct(duration, 95) as p95,\n    pct(duration, 99) as p99\n  by endpoint, method\n| sort p95 desc"}}},"FunnelConversionQuery":{"id":"FunnelConversionQuery","path":"FibonacciStack-dev/InsightsQueries/FunnelConversionQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["ApiHandlerLogRetention907E318F","LogGroupName"]}],"name":"dev/fibonacci/funnel-conversion","queryString":"fields @timestamp, leadId, agent, classification.intent, proposedAction\n| filter agent in [\"recebimento\", \"estrategia\", \"disparo\", \"atendimento\", \"agendamento\"]\n| stats \n    count() as totalLeads by agent\n| sort agent asc"}}},"MCPCallsQuery":{"id":"MCPCallsQuery","path":"FibonacciStack-dev/InsightsQueries/MCPCallsQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["ApiHandlerLogRetention907E318F","LogGroupName"]}],"name":"dev/fibonacci/mcp-calls-analysis","queryString":"fields @timestamp, metadata.mcpServer as server, metadata.mcpMethod as method, duration, level, message\n| filter metadata.mcpServer like /.+/\n| stats \n    count() as callCount,\n    avg(duration) as avgDuration,\n    sum(level = \"ERROR\") as errorCount,\n    (sum(level = \"ERROR\") / count()) * 100 as errorRate\n  by server, method\n| sort errorRate desc, callCount desc"}}},"LeadProcessingTimeQuery":{"id":"LeadProcessingTimeQuery","path":"FibonacciStack-dev/InsightsQueries/LeadProcessingTimeQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["ApiHandlerLogRetention907E318F","LogGroupName"]}],"name":"dev/fibonacci/lead-processing-time","queryString":"fields @timestamp, leadId, agent, duration, classification.priority\n| filter leadId like /.+/\n| stats \n    min(@timestamp) as startTime,\n    max(@timestamp) as endTime,\n    (max(@timestamp) - min(@timestamp)) / 1000 as totalProcessingSeconds,\n    count() as stepsCompleted,\n    latest(classification.priority) as priority\n  by leadId\n| sort totalProcessingSeconds desc\n| limit 100"}}},"ErrorsByAgentQueryName":{"id":"ErrorsByAgentQueryName","path":"FibonacciStack-dev/InsightsQueries/ErrorsByAgentQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LatencyByEndpointQueryName":{"id":"LatencyByEndpointQueryName","path":"FibonacciStack-dev/InsightsQueries/LatencyByEndpointQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"FunnelConversionQueryName":{"id":"FunnelConversionQueryName","path":"FibonacciStack-dev/InsightsQueries/FunnelConversionQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"AlarmTopicArn":{"id":"AlarmTopicArn","path":"FibonacciStack-dev/AlarmTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AlarmTopicName":{"id":"AlarmTopicName","path":"FibonacciStack-dev/AlarmTopicName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"HighErrorRateAlarmName":{"id":"HighErrorRateAlarmName","path":"FibonacciStack-dev/HighErrorRateAlarmName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"HighLatencyAlarmName":{"id":"HighLatencyAlarmName","path":"FibonacciStack-dev/HighLatencyAlarmName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DLQNotEmptyAlarmName":{"id":"DLQNotEmptyAlarmName","path":"FibonacciStack-dev/DLQNotEmptyAlarmName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AuroraCpuAlarmName":{"id":"AuroraCpuAlarmName","path":"FibonacciStack-dev/AuroraCpuAlarmName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"InsightsQueryErrorsByAgent":{"id":"InsightsQueryErrorsByAgent","path":"FibonacciStack-dev/InsightsQueryErrorsByAgent","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"InsightsQueryLatencyByEndpoint":{"id":"InsightsQueryLatencyByEndpoint","path":"FibonacciStack-dev/InsightsQueryLatencyByEndpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"InsightsQueryFunnelConversion":{"id":"InsightsQueryFunnelConversion","path":"FibonacciStack-dev/InsightsQueryFunnelConversion","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"InsightsQueryMCPCalls":{"id":"InsightsQueryMCPCalls","path":"FibonacciStack-dev/InsightsQueryMCPCalls","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"InsightsQueryLeadProcessingTime":{"id":"InsightsQueryLeadProcessingTime","path":"FibonacciStack-dev/InsightsQueryLeadProcessingTime","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"FibonacciStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"FibonacciStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"Exports":{"id":"Exports","path":"FibonacciStack-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"FibonacciKmsKey4FDBC47E\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FibonacciKmsKey4FDBC47E\",\"Arn\"]}","path":"FibonacciStack-dev/Exports/Output{\"Fn::GetAtt\":[\"FibonacciKmsKey4FDBC47E\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"FibonacciBus476BDCEA\"}":{"id":"Output{\"Ref\":\"FibonacciBus476BDCEA\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"FibonacciBus476BDCEA\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"FibonacciBus476BDCEA\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"FibonacciBus476BDCEA\",\"Arn\"]}","path":"FibonacciStack-dev/Exports/Output{\"Fn::GetAtt\":[\"FibonacciBus476BDCEA\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"DbSecret685A0FA5\"}":{"id":"Output{\"Ref\":\"DbSecret685A0FA5\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"DbSecret685A0FA5\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"FibonacciVpcB997BDC3\"}":{"id":"Output{\"Ref\":\"FibonacciVpcB997BDC3\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"FibonacciVpcB997BDC3\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D\"}":{"id":"Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF\"}":{"id":"Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"FibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"DbSg495F8305\",\"GroupId\"]}":{"id":"Output{\"Fn::GetAtt\":[\"DbSg495F8305\",\"GroupId\"]}","path":"FibonacciStack-dev/Exports/Output{\"Fn::GetAtt\":[\"DbSg495F8305\",\"GroupId\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Fn::GetAtt\":[\"HttpApiF5A9A8A7\",\"ApiEndpoint\"]}":{"id":"Output{\"Fn::GetAtt\":[\"HttpApiF5A9A8A7\",\"ApiEndpoint\"]}","path":"FibonacciStack-dev/Exports/Output{\"Fn::GetAtt\":[\"HttpApiF5A9A8A7\",\"ApiEndpoint\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"Output{\"Ref\":\"UserPoolUserPoolAuthorizerClient680A88B6\"}":{"id":"Output{\"Ref\":\"UserPoolUserPoolAuthorizerClient680A88B6\"}","path":"FibonacciStack-dev/Exports/Output{\"Ref\":\"UserPoolUserPoolAuthorizerClient680A88B6\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"FibonacciStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"FibonacciStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"NigredoStack-dev":{"id":"NigredoStack-dev","path":"NigredoStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"NigredoDlq":{"id":"NigredoDlq","path":"NigredoStack-dev/NigredoDlq","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoDlq/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"messageRetentionPeriod":1209600,"queueName":"nigredo-dlq-dev"}}}}},"RecebimentoQueue":{"id":"RecebimentoQueue","path":"NigredoStack-dev/RecebimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-recebimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":60}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/RecebimentoQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["RecebimentoQueue7AB70855","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"RecebimentoQueue7AB70855"}]}}}}}}},"EstrategiaQueue":{"id":"EstrategiaQueue","path":"NigredoStack-dev/EstrategiaQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-estrategia-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":120}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/EstrategiaQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["EstrategiaQueue757B78A7","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"EstrategiaQueue757B78A7"}]}}}}}}},"DisparoQueue":{"id":"DisparoQueue","path":"NigredoStack-dev/DisparoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-disparo-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/DisparoQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["DisparoQueueBE25067A","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"DisparoQueueBE25067A"}]}}}}}}},"AtendimentoQueue":{"id":"AtendimentoQueue","path":"NigredoStack-dev/AtendimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-atendimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/AtendimentoQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["AtendimentoQueueFAE96496","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"AtendimentoQueueFAE96496"}]}}}}}}},"SentimentoQueue":{"id":"SentimentoQueue","path":"NigredoStack-dev/SentimentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-sentimento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":10}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/SentimentoQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["SentimentoQueueEAC65B25","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"SentimentoQueueEAC65B25"}]}}}}}}},"AgendamentoQueue":{"id":"AgendamentoQueue","path":"NigredoStack-dev/AgendamentoQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-agendamento-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":30}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/AgendamentoQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["AgendamentoQueue78A39639","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"AgendamentoQueue78A39639"}]}}}}}}},"RelatoriosQueue":{"id":"RelatoriosQueue","path":"NigredoStack-dev/RelatoriosQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"},"queueName":"nigredo-relatorios-dev","receiveMessageWaitTimeSeconds":10,"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]},"maxReceiveCount":3},"visibilityTimeout":120}}},"Policy":{"id":"Policy","path":"NigredoStack-dev/RelatoriosQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Condition":{"StringEquals":{"aws:SourceAccount":"207933152643"}},"Effect":"Allow","Principal":{"Service":"events.amazonaws.com"},"Resource":{"Fn::GetAtt":["RelatoriosQueue76D0C511","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"RelatoriosQueue76D0C511"}]}}}}}}},"RecebimentoRule":{"id":"RecebimentoRule","path":"NigredoStack-dev/RecebimentoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.recebimento.* events to Recebimento Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.recebimento"}]},"name":"nigredo-recebimento-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["RecebimentoQueue7AB70855","Arn"]}}]}}}}},"EstrategiaRule":{"id":"EstrategiaRule","path":"NigredoStack-dev/EstrategiaRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.estrategia.* events to Estrategia Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.estrategia"}]},"name":"nigredo-estrategia-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EstrategiaQueue757B78A7","Arn"]}}]}}}}},"DisparoRule":{"id":"DisparoRule","path":"NigredoStack-dev/DisparoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.disparo.* events to Disparo Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.disparo"}]},"name":"nigredo-disparo-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["DisparoQueueBE25067A","Arn"]}}]}}}}},"AtendimentoRule":{"id":"AtendimentoRule","path":"NigredoStack-dev/AtendimentoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.atendimento.* events to Atendimento Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.atendimento"}]},"name":"nigredo-atendimento-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AtendimentoQueueFAE96496","Arn"]}}]}}}}},"SentimentoRule":{"id":"SentimentoRule","path":"NigredoStack-dev/SentimentoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.sentimento.* events to Sentimento Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.sentimento"}]},"name":"nigredo-sentimento-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["SentimentoQueueEAC65B25","Arn"]}}]}}}}},"AgendamentoRule":{"id":"AgendamentoRule","path":"NigredoStack-dev/AgendamentoRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.agendamento.* events to Agendamento Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.agendamento"}]},"name":"nigredo-agendamento-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AgendamentoQueue78A39639","Arn"]}}]}}}}},"RelatoriosRule":{"id":"RelatoriosRule","path":"NigredoStack-dev/RelatoriosRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Route nigredo.relatorios.* events to Relatorios Queue","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":[{"prefix":"nigredo.relatorios"}]},"name":"nigredo-relatorios-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["RelatoriosQueue76D0C511","Arn"]}}]}}}}},"RecebimentoLambda":{"id":"RecebimentoLambda","path":"NigredoStack-dev/RecebimentoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/RecebimentoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/RecebimentoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/RecebimentoLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["sqs:ChangeMessageVisibility","sqs:DeleteMessage","sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:ReceiveMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["RecebimentoQueue7AB70855","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:207933152643:secret:fibonacci/mcp/*"}],"Version":"2012-10-17"},"policyName":"RecebimentoLambdaServiceRoleDefaultPolicy13D13D6D","roles":[{"Ref":"RecebimentoLambdaServiceRole5D2DCF51"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/RecebimentoLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/RecebimentoLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/RecebimentoLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/RecebimentoLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevRecebimentoLambda08B73125","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"cd4ea1381481d45752786d6c5f55c991ba6fe560b0fd63d583965319b9e25e2a.zip"},"description":"Agente de Recebimento - Higieniza, valida e enriquece leads","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-recebimento","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-recebimento-dev","handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["RecebimentoLambdaServiceRole5D2DCF51","Arn"]},"runtime":"nodejs20.x","timeout":60,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["RecebimentoLambdaSecurityGroupA209ECAB","GroupId"]}]}}}},"SqsEventSource:NigredoStackdevRecebimentoQueueBF30384E":{"id":"SqsEventSource:NigredoStackdevRecebimentoQueueBF30384E","path":"NigredoStack-dev/RecebimentoLambda/SqsEventSource:NigredoStackdevRecebimentoQueueBF30384E","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/SqsEventSource:NigredoStackdevRecebimentoQueueBF30384E/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"eventSourceArn":{"Fn::GetAtt":["RecebimentoQueue7AB70855","Arn"]},"functionName":{"Ref":"RecebimentoLambda94C8BF58"},"functionResponseTypes":["ReportBatchItemFailures"],"maximumBatchingWindowInSeconds":5}}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/RecebimentoLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RecebimentoLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"RecebimentoLambda-LogGroup":{"id":"RecebimentoLambda-LogGroup","path":"NigredoStack-dev/RecebimentoLambda/RecebimentoLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"DbSecurityGroup":{"id":"DbSecurityGroup","path":"NigredoStack-dev/DbSecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]},"children":{"from NigredoStackdevRecebimentoLambdaSecurityGroupFC10C513:5432":{"id":"from NigredoStackdevRecebimentoLambdaSecurityGroupFC10C513:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevRecebimentoLambdaSecurityGroupFC10C513:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Recebimento Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["RecebimentoLambdaSecurityGroupA209ECAB","GroupId"]},"toPort":5432}}},"from NigredoStackdevEstrategiaLambdaSecurityGroup702E75F7:5432":{"id":"from NigredoStackdevEstrategiaLambdaSecurityGroup702E75F7:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevEstrategiaLambdaSecurityGroup702E75F7:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Estrategia Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["EstrategiaLambdaSecurityGroup921EC55B","GroupId"]},"toPort":5432}}},"from NigredoStackdevDisparoLambdaSecurityGroup43D3A847:5432":{"id":"from NigredoStackdevDisparoLambdaSecurityGroup43D3A847:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevDisparoLambdaSecurityGroup43D3A847:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Disparo Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["DisparoLambdaSecurityGroupC69F09AB","GroupId"]},"toPort":5432}}},"from NigredoStackdevAtendimentoLambdaSecurityGroupD97407A5:5432":{"id":"from NigredoStackdevAtendimentoLambdaSecurityGroupD97407A5:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevAtendimentoLambdaSecurityGroupD97407A5:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Atendimento Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AtendimentoLambdaSecurityGroup033377B4","GroupId"]},"toPort":5432}}},"from NigredoStackdevAgendamentoLambdaSecurityGroupE04EAAB4:5432":{"id":"from NigredoStackdevAgendamentoLambdaSecurityGroupE04EAAB4:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevAgendamentoLambdaSecurityGroupE04EAAB4:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Agendamento Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["AgendamentoLambdaSecurityGroupCEF6E3F0","GroupId"]},"toPort":5432}}},"from NigredoStackdevRelatoriosLambdaSecurityGroupEF3A7686:5432":{"id":"from NigredoStackdevRelatoriosLambdaSecurityGroupEF3A7686:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevRelatoriosLambdaSecurityGroupEF3A7686:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Relatorios Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["RelatoriosLambdaSecurityGroup12D58779","GroupId"]},"toPort":5432}}},"from NigredoStackdevCreateLeadLambdaSecurityGroup8F4B8D8A:5432":{"id":"from NigredoStackdevCreateLeadLambdaSecurityGroup8F4B8D8A:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevCreateLeadLambdaSecurityGroup8F4B8D8A:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Create Lead Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["CreateLeadLambdaSecurityGroup08EA8DA7","GroupId"]},"toPort":5432}}},"from NigredoStackdevListLeadsLambdaSecurityGroupCF4012F1:5432":{"id":"from NigredoStackdevListLeadsLambdaSecurityGroupCF4012F1:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevListLeadsLambdaSecurityGroupCF4012F1:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow List Leads Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["ListLeadsLambdaSecurityGroup0162B7FB","GroupId"]},"toPort":5432}}},"from NigredoStackdevGetLeadLambdaSecurityGroup1D5C0192:5432":{"id":"from NigredoStackdevGetLeadLambdaSecurityGroup1D5C0192:5432","path":"NigredoStack-dev/DbSecurityGroup/from NigredoStackdevGetLeadLambdaSecurityGroup1D5C0192:5432","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroupIngress","aws:cdk:cloudformation:props":{"description":"Allow Get Lead Lambda to access Aurora","fromPort":5432,"groupId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttDbSg495F8305GroupIdA39418C8"},"ipProtocol":"tcp","sourceSecurityGroupId":{"Fn::GetAtt":["GetLeadLambdaSecurityGroupACE722A9","GroupId"]},"toPort":5432}}}}},"EstrategiaLambda":{"id":"EstrategiaLambda","path":"NigredoStack-dev/EstrategiaLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/EstrategiaLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/EstrategiaLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/EstrategiaLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:207933152643:secret:fibonacci/mcp/*"}],"Version":"2012-10-17"},"policyName":"EstrategiaLambdaServiceRoleDefaultPolicy2D186169","roles":[{"Ref":"EstrategiaLambdaServiceRole3FE3B52B"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/EstrategiaLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/EstrategiaLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/EstrategiaLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/EstrategiaLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevEstrategiaLambdaBCD4C40D","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"f36f80706bb1e4dae78cc68075f9fcfdc629b7c04fd064df6bc0e974149b5534.zip"},"description":"Agente de Estratégia - Cria campanhas segmentadas com mensagens personalizadas","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-estrategia","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-estrategia-dev","handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["EstrategiaLambdaServiceRole3FE3B52B","Arn"]},"runtime":"nodejs20.x","timeout":120,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["EstrategiaLambdaSecurityGroup921EC55B","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/EstrategiaLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"EstrategiaLambda-LogGroup":{"id":"EstrategiaLambda-LogGroup","path":"NigredoStack-dev/EstrategiaLambda/EstrategiaLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"EstrategiaEventRule":{"id":"EstrategiaEventRule","path":"NigredoStack-dev/EstrategiaEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/EstrategiaEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger Estrategia Lambda when recebimento completes","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":["nigredo.recebimento"],"detail-type":["recebimento.completed"]},"name":"nigredo-estrategia-trigger-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EstrategiaLambda99BF03B7","Arn"]}}]}}},"AllowEventRuleNigredoStackdevEstrategiaLambdaBCD4C40D":{"id":"AllowEventRuleNigredoStackdevEstrategiaLambdaBCD4C40D","path":"NigredoStack-dev/EstrategiaEventRule/AllowEventRuleNigredoStackdevEstrategiaLambdaBCD4C40D","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EstrategiaLambda99BF03B7","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["EstrategiaEventRule31DB2FBC","Arn"]}}}}}},"DisparoLambda":{"id":"DisparoLambda","path":"NigredoStack-dev/DisparoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/DisparoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/DisparoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/DisparoLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:207933152643:secret:fibonacci/mcp/*"}],"Version":"2012-10-17"},"policyName":"DisparoLambdaServiceRoleDefaultPolicyDA120B86","roles":[{"Ref":"DisparoLambdaServiceRoleF8DD2BAD"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/DisparoLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/DisparoLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/DisparoLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/DisparoLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevDisparoLambdaC1C1072D","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"c85e986a90a6b4a9cdf82b2fbe94cb733f1fe96fb9111f8b9b293c6aee63c950.zip"},"description":"Agente de Disparo - Envia mensagens respeitando horário comercial e rate limits","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-disparo","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-disparo-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["DisparoLambdaServiceRoleF8DD2BAD","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["DisparoLambdaSecurityGroupC69F09AB","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/DisparoLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"DisparoLambda-LogGroup":{"id":"DisparoLambda-LogGroup","path":"NigredoStack-dev/DisparoLambda/DisparoLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"DisparoScheduleRule":{"id":"DisparoScheduleRule","path":"NigredoStack-dev/DisparoScheduleRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/DisparoScheduleRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger Disparo Lambda every 15 minutes during business hours","name":"nigredo-disparo-schedule-dev","scheduleExpression":"cron(0,15,30,45 11-20 ? * MON-FRI *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["DisparoLambda0A5F8F52","Arn"]}}]}}},"AllowEventRuleNigredoStackdevDisparoLambdaC1C1072D":{"id":"AllowEventRuleNigredoStackdevDisparoLambdaC1C1072D","path":"NigredoStack-dev/DisparoScheduleRule/AllowEventRuleNigredoStackdevDisparoLambdaC1C1072D","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DisparoLambda0A5F8F52","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["DisparoScheduleRule4F391FF9","Arn"]}}}}}},"AtendimentoLambda":{"id":"AtendimentoLambda","path":"NigredoStack-dev/AtendimentoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/AtendimentoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/AtendimentoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/AtendimentoLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:207933152643:secret:fibonacci/mcp/*"},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":["arn:aws:lambda:us-east-1:207933152643:function:nigredo-sentimento-dev",{"Fn::GetAtt":["SentimentoLambda423C8224","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["SentimentoLambda423C8224","Arn"]},":*"]]}]},{"Action":["bedrock:InvokeModel","bedrock:InvokeModelWithResponseStream"],"Effect":"Allow","Resource":"arn:aws:bedrock:us-east-1::foundation-model/anthropic.claude-3-haiku-20240307-v1:0"}],"Version":"2012-10-17"},"policyName":"AtendimentoLambdaServiceRoleDefaultPolicy214AEDB1","roles":[{"Ref":"AtendimentoLambdaServiceRole0B734484"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/AtendimentoLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/AtendimentoLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/AtendimentoLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/AtendimentoLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevAtendimentoLambdaF0236663","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"d7c99933c62a21057f359d1a7534adf0da737a4a820f7a4d3834d54fc499b732.zip"},"description":"Agente de Atendimento - Responde leads com IA usando análise de sentimento","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-atendimento","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"SENTIMENT_LAMBDA_ARN":{"Fn::GetAtt":["SentimentoLambda423C8224","Arn"]},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-atendimento-dev","handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["AtendimentoLambdaServiceRole0B734484","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["AtendimentoLambdaSecurityGroup033377B4","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/AtendimentoLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AtendimentoLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"AtendimentoLambda-LogGroup":{"id":"AtendimentoLambda-LogGroup","path":"NigredoStack-dev/AtendimentoLambda/AtendimentoLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"SentimentoLambda":{"id":"SentimentoLambda","path":"NigredoStack-dev/SentimentoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/SentimentoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/SentimentoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/SentimentoLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["comprehend:BatchDetectKeyPhrases","comprehend:BatchDetectSentiment","comprehend:DetectKeyPhrases","comprehend:DetectSentiment","xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"SentimentoLambdaServiceRoleDefaultPolicyA859E67E","roles":[{"Ref":"SentimentoLambdaServiceRoleCF931BAD"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/SentimentoLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/SentimentoLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/SentimentoLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"8a1f0b4595ba52e6d41929fbdd2665d3b4981f256b84c67fdcd2ea9de8d10930.zip"},"description":"Agente de Análise de Sentimento - Classifica sentimento e detecta descadastro (LGPD)","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-sentimento","LOG_LEVEL":"DEBUG","NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-sentimento-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["SentimentoLambdaServiceRoleCF931BAD","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/SentimentoLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/SentimentoLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"SentimentoLambda-LogGroup":{"id":"SentimentoLambda-LogGroup","path":"NigredoStack-dev/SentimentoLambda/SentimentoLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"AgendamentoLambda":{"id":"AgendamentoLambda","path":"NigredoStack-dev/AgendamentoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/AgendamentoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/AgendamentoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/AgendamentoLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}},{"Action":"secretsmanager:GetSecretValue","Effect":"Allow","Resource":"arn:aws:secretsmanager:us-east-1:207933152643:secret:fibonacci/mcp/*"}],"Version":"2012-10-17"},"policyName":"AgendamentoLambdaServiceRoleDefaultPolicyF4C45D35","roles":[{"Ref":"AgendamentoLambdaServiceRole159D7517"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/AgendamentoLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/AgendamentoLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/AgendamentoLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/AgendamentoLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevAgendamentoLambdaD0E96495","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"7b975ebe14665b8990f2ed3b48f90872d0590d4fda4ea0b136a79425e99caf53.zip"},"description":"Agente de Agendamento - Marca reuniões verificando disponibilidade em tempo real","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-agendamento","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-agendamento-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AgendamentoLambdaServiceRole159D7517","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["AgendamentoLambdaSecurityGroupCEF6E3F0","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/AgendamentoLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"AgendamentoLambda-LogGroup":{"id":"AgendamentoLambda-LogGroup","path":"NigredoStack-dev/AgendamentoLambda/AgendamentoLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"AgendamentoEventRule":{"id":"AgendamentoEventRule","path":"NigredoStack-dev/AgendamentoEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/AgendamentoEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger Agendamento Lambda when schedule is requested","eventBusName":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"eventPattern":{"source":["nigredo.atendimento"],"detail-type":["schedule_requested"]},"name":"nigredo-agendamento-trigger-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["AgendamentoLambda083CE1CF","Arn"]}}]}}},"AllowEventRuleNigredoStackdevAgendamentoLambdaD0E96495":{"id":"AllowEventRuleNigredoStackdevAgendamentoLambdaD0E96495","path":"NigredoStack-dev/AgendamentoEventRule/AllowEventRuleNigredoStackdevAgendamentoLambdaD0E96495","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AgendamentoLambda083CE1CF","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["AgendamentoEventRule5EEA7BB0","Arn"]}}}}}},"RecebimentoQueueUrl":{"id":"RecebimentoQueueUrl","path":"NigredoStack-dev/RecebimentoQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RecebimentoQueueArn":{"id":"RecebimentoQueueArn","path":"NigredoStack-dev/RecebimentoQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EstrategiaQueueUrl":{"id":"EstrategiaQueueUrl","path":"NigredoStack-dev/EstrategiaQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EstrategiaQueueArn":{"id":"EstrategiaQueueArn","path":"NigredoStack-dev/EstrategiaQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DisparoQueueUrl":{"id":"DisparoQueueUrl","path":"NigredoStack-dev/DisparoQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DisparoQueueArn":{"id":"DisparoQueueArn","path":"NigredoStack-dev/DisparoQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AtendimentoQueueUrl":{"id":"AtendimentoQueueUrl","path":"NigredoStack-dev/AtendimentoQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AtendimentoQueueArn":{"id":"AtendimentoQueueArn","path":"NigredoStack-dev/AtendimentoQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SentimentoQueueUrl":{"id":"SentimentoQueueUrl","path":"NigredoStack-dev/SentimentoQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SentimentoQueueArn":{"id":"SentimentoQueueArn","path":"NigredoStack-dev/SentimentoQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AgendamentoQueueUrl":{"id":"AgendamentoQueueUrl","path":"NigredoStack-dev/AgendamentoQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AgendamentoQueueArn":{"id":"AgendamentoQueueArn","path":"NigredoStack-dev/AgendamentoQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RelatoriosQueueUrl":{"id":"RelatoriosQueueUrl","path":"NigredoStack-dev/RelatoriosQueueUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RelatoriosQueueArn":{"id":"RelatoriosQueueArn","path":"NigredoStack-dev/RelatoriosQueueArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoDlqUrl":{"id":"NigredoDlqUrl","path":"NigredoStack-dev/NigredoDlqUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoDlqArn":{"id":"NigredoDlqArn","path":"NigredoStack-dev/NigredoDlqArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RecebimentoLambdaArn":{"id":"RecebimentoLambdaArn","path":"NigredoStack-dev/RecebimentoLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RecebimentoLambdaName":{"id":"RecebimentoLambdaName","path":"NigredoStack-dev/RecebimentoLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EstrategiaLambdaArn":{"id":"EstrategiaLambdaArn","path":"NigredoStack-dev/EstrategiaLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"EstrategiaLambdaName":{"id":"EstrategiaLambdaName","path":"NigredoStack-dev/EstrategiaLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DisparoLambdaArn":{"id":"DisparoLambdaArn","path":"NigredoStack-dev/DisparoLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DisparoLambdaName":{"id":"DisparoLambdaName","path":"NigredoStack-dev/DisparoLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AtendimentoLambdaArn":{"id":"AtendimentoLambdaArn","path":"NigredoStack-dev/AtendimentoLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AtendimentoLambdaName":{"id":"AtendimentoLambdaName","path":"NigredoStack-dev/AtendimentoLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SentimentoLambdaArn":{"id":"SentimentoLambdaArn","path":"NigredoStack-dev/SentimentoLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"SentimentoLambdaName":{"id":"SentimentoLambdaName","path":"NigredoStack-dev/SentimentoLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AgendamentoLambdaArn":{"id":"AgendamentoLambdaArn","path":"NigredoStack-dev/AgendamentoLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AgendamentoLambdaName":{"id":"AgendamentoLambdaName","path":"NigredoStack-dev/AgendamentoLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RelatoriosLambda":{"id":"RelatoriosLambda","path":"NigredoStack-dev/RelatoriosLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/RelatoriosLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/RelatoriosLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/RelatoriosLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":["sqs:GetQueueAttributes","sqs:GetQueueUrl","sqs:SendMessage"],"Effect":"Allow","Resource":{"Fn::GetAtt":["NigredoDlqA8002B0C","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:GenerateDataKey*","kms:ReEncrypt*"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciKmsKey4FDBC47EArnEBA57FFE"}}],"Version":"2012-10-17"},"policyName":"RelatoriosLambdaServiceRoleDefaultPolicyF9C66D4C","roles":[{"Ref":"RelatoriosLambdaServiceRoleE8548A97"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/RelatoriosLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/RelatoriosLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/RelatoriosLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/RelatoriosLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevRelatoriosLambdaCAD762FC","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"522a86d6a782237bd77b79981abbea1728335cf6834cd6b38b4fed3185ffdf47.zip"},"description":"Agente de Relatórios - Gera dashboards e métricas de conversão do funil","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-relatorios","LOG_LEVEL":"DEBUG","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DLQ_URL":{"Ref":"NigredoDlqA8002B0C"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-relatorios-dev","handler":"index.handler","memorySize":1024,"role":{"Fn::GetAtt":["RelatoriosLambdaServiceRoleE8548A97","Arn"]},"runtime":"nodejs20.x","timeout":120,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["RelatoriosLambdaSecurityGroup12D58779","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/RelatoriosLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"RelatoriosLambda-LogGroup":{"id":"RelatoriosLambda-LogGroup","path":"NigredoStack-dev/RelatoriosLambda/RelatoriosLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"RelatoriosScheduleRule":{"id":"RelatoriosScheduleRule","path":"NigredoStack-dev/RelatoriosScheduleRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/RelatoriosScheduleRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Trigger Relatorios Lambda daily at 8am BRT","name":"nigredo-relatorios-schedule-dev","scheduleExpression":"cron(0 11 ? * MON-FRI *)","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["RelatoriosLambda21B77625","Arn"]}}]}}},"AllowEventRuleNigredoStackdevRelatoriosLambdaCAD762FC":{"id":"AllowEventRuleNigredoStackdevRelatoriosLambdaCAD762FC","path":"NigredoStack-dev/RelatoriosScheduleRule/AllowEventRuleNigredoStackdevRelatoriosLambdaCAD762FC","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RelatoriosLambda21B77625","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["RelatoriosScheduleRule6239324E","Arn"]}}}}}},"RelatoriosLambdaArn":{"id":"RelatoriosLambdaArn","path":"NigredoStack-dev/RelatoriosLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RelatoriosLambdaName":{"id":"RelatoriosLambdaName","path":"NigredoStack-dev/RelatoriosLambdaName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoAgentsDashboard":{"id":"NigredoAgentsDashboard","path":"NigredoStack-dev/NigredoAgentsDashboard","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Dashboard":{"id":"Dashboard","path":"NigredoStack-dev/NigredoAgentsDashboard/Dashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAgentsDashboard/Dashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"periodOverride\":\"auto\",\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Leads Processados por Agente (Invocations)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Taxa de Sucesso por Agente (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Recebimento\",\"expression\":\"(recebimento_inv - recebimento_err) / recebimento_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"id\":\"recebimento_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"id\":\"recebimento_err\",\"visible\":false,\"stat\":\"Sum\"}],[{\"label\":\"Estratégia\",\"expression\":\"(estrategia_inv - estrategia_err) / estrategia_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"id\":\"estrategia_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"id\":\"estrategia_err\",\"visible\":false,\"stat\":\"Sum\"}],[{\"label\":\"Disparo\",\"expression\":\"(disparo_inv - disparo_err) / disparo_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"id\":\"disparo_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"id\":\"disparo_err\",\"visible\":false,\"stat\":\"Sum\"}],[{\"label\":\"Atendimento\",\"expression\":\"(atendimento_inv - atendimento_err) / atendimento_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"id\":\"atendimento_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"id\":\"atendimento_err\",\"visible\":false,\"stat\":\"Sum\"}],[{\"label\":\"Sentimento\",\"expression\":\"(sentimento_inv - sentimento_err) / sentimento_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"id\":\"sentimento_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"id\":\"sentimento_err\",\"visible\":false,\"stat\":\"Sum\"}],[{\"label\":\"Agendamento\",\"expression\":\"(agendamento_inv - agendamento_err) / agendamento_inv * 100\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"id\":\"agendamento_inv\",\"visible\":false,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"id\":\"agendamento_err\",\"visible\":false,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Tempo Médio de Processamento (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Tempo de Processamento P95 (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento (p95)\",\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia (p95)\",\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo (p95)\",\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento (p95)\",\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento (p95)\",\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento (p95)\",\"stat\":\"p95\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Erros por Agente\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Throttles por Agente\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Concurrent Executions por Agente\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Maximum\"}],[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Maximum\"}],[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Maximum\"}],[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Maximum\"}],[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"SentimentoLambda423C8224"},"\",{\"label\":\"Sentimento\",\"stat\":\"Maximum\"}],[\"AWS/Lambda\",\"ConcurrentExecutions\",\"FunctionName\",\"",{"Ref":"AgendamentoLambda083CE1CF"},"\",{\"label\":\"Agendamento\",\"stat\":\"Maximum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Agente Recebimento - Detalhes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":42,\"properties\":{\"view\":\"singleValue\",\"title\":\"Recebimento - Última Execução\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RecebimentoLambda94C8BF58"},"\",{\"label\":\"Recebimento\",\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Agente Estratégia - Detalhes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":48,\"properties\":{\"view\":\"singleValue\",\"title\":\"Estratégia - Última Execução\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"EstrategiaLambda99BF03B7"},"\",{\"label\":\"Estratégia\",\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":54,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Agente Disparo - Detalhes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":54,\"properties\":{\"view\":\"singleValue\",\"title\":\"Disparo - Última Execução\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"DisparoLambda0A5F8F52"},"\",{\"label\":\"Disparo\",\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":60,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Agente Atendimento - Detalhes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":60,\"properties\":{\"view\":\"singleValue\",\"title\":\"Atendimento - Última Execução\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"AtendimentoLambda97A1D183"},"\",{\"label\":\"Atendimento\",\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":66,\"properties\":{\"view\":\"timeSeries\",\"title\":\"MCP Calls por Serviço\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/MCP\",\"WhatsAppCalls\",{\"label\":\"WhatsApp API\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"CalendarCalls\",{\"label\":\"Google Calendar\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"EnrichmentCalls\",{\"label\":\"Data Enrichment\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"SentimentCalls\",{\"label\":\"Sentiment Analysis\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":72,\"properties\":{\"view\":\"timeSeries\",\"title\":\"MCP Errors por Serviço\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/MCP\",\"WhatsAppErrors\",{\"label\":\"WhatsApp API\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"CalendarErrors\",{\"label\":\"Google Calendar\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"EnrichmentErrors\",{\"label\":\"Data Enrichment\",\"stat\":\"Sum\"}],[\"Fibonacci/MCP\",\"SentimentErrors\",{\"label\":\"Sentiment Analysis\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":78,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Agente Relatórios - Detalhes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"RelatoriosLambda21B77625"},"\",{\"label\":\"Relatórios\",\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RelatoriosLambda21B77625"},"\",{\"label\":\"Relatórios\",\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"RelatoriosLambda21B77625"},"\",{\"label\":\"Relatórios\",\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":78,\"properties\":{\"view\":\"singleValue\",\"title\":\"Relatórios - Última Execução\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"RelatoriosLambda21B77625"},"\",{\"label\":\"Relatórios\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"RelatoriosLambda21B77625"},"\",{\"label\":\"Relatórios\",\"stat\":\"Sum\"}]]}}]}"]]},"dashboardName":"Nigredo-Agents-dev"}}}}}}},"AgentsDashboardName":{"id":"AgentsDashboardName","path":"NigredoStack-dev/AgentsDashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"BusinessMetricsDashboard":{"id":"BusinessMetricsDashboard","path":"NigredoStack-dev/BusinessMetricsDashboard","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Dashboard":{"id":"Dashboard","path":"NigredoStack-dev/BusinessMetricsDashboard/Dashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/BusinessMetricsDashboard/Dashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"periodOverride\":\"auto\",\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":8,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Funil de Conversão - Leads por Estágio\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"stacked\":false,\"metrics\":[[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsEnriquecidos\",{\"label\":\"Leads Enriquecidos\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsAgendados\",{\"label\":\"Leads Agendados\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsConvertidos\",{\"label\":\"Leads Convertidos\",\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":0,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Recebidos\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":4,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Enriquecidos\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsEnriquecidos\",{\"label\":\"Leads Enriquecidos\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":8,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Contatados\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":12,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Responderam\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":16,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Interessados\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":4,\"height\":4,\"x\":20,\"y\":8,\"properties\":{\"view\":\"singleValue\",\"title\":\"Leads Agendados\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"LeadsAgendados\",{\"label\":\"Leads Agendados\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Taxa de Resposta (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Resposta (%)\",\"expression\":\"(resposta_m2 / resposta_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"id\":\"resposta_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"id\":\"resposta_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":12,\"properties\":{\"view\":\"singleValue\",\"title\":\"Taxa de Resposta Atual\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Resposta (%)\",\"expression\":\"(resposta_m2 / resposta_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"id\":\"resposta_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"id\":\"resposta_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Taxa de Agendamento (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Agendamento (%)\",\"expression\":\"(agend_m2 / agend_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"id\":\"agend_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsAgendados\",{\"label\":\"Leads Agendados\",\"id\":\"agend_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":18,\"properties\":{\"view\":\"singleValue\",\"title\":\"Taxa de Agendamento Atual\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Agendamento (%)\",\"expression\":\"(agend_m2 / agend_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"id\":\"agend_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsAgendados\",{\"label\":\"Leads Agendados\",\"id\":\"agend_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Taxa de Conversão Final (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Conversão (%)\",\"expression\":\"(conv_m2 / conv_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"id\":\"conv_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsConvertidos\",{\"label\":\"Leads Convertidos\",\"id\":\"conv_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":24,\"properties\":{\"view\":\"singleValue\",\"title\":\"Taxa de Conversão Atual\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Conversão (%)\",\"expression\":\"(conv_m2 / conv_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"id\":\"conv_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsConvertidos\",{\"label\":\"Leads Convertidos\",\"id\":\"conv_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Custo por Lead (R$)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"CustoPorLead\",{\"label\":\"Custo por Lead (R$)\",\"period\":3600}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":30,\"properties\":{\"view\":\"singleValue\",\"title\":\"Custo Médio por Lead\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"CustoPorLead\",{\"label\":\"Custo por Lead (R$)\",\"period\":3600}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"ROI por Campanha (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"ROICampanha\",{\"label\":\"ROI (%)\",\"period\":3600}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":36,\"properties\":{\"view\":\"singleValue\",\"title\":\"ROI Médio\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"ROICampanha\",{\"label\":\"ROI (%)\",\"period\":3600}]]}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Custo Total vs Receita Estimada (R$)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"CustoTotal\",{\"label\":\"Custo Total (R$)\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"ReceitaEstimada\",{\"label\":\"Receita Estimada (R$)\",\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Métricas de Eficiência por Estágio (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Enriquecimento (%)\",\"expression\":\"(enriq_m2 / enriq_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"id\":\"enriq_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsEnriquecidos\",{\"label\":\"Leads Enriquecidos\",\"id\":\"enriq_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Contato (%)\",\"expression\":\"(contato_m2 / contato_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsEnriquecidos\",{\"label\":\"Leads Enriquecidos\",\"id\":\"contato_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"id\":\"contato_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Resposta (%)\",\"expression\":\"(resposta_m2 / resposta_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsContatados\",{\"label\":\"Leads Contatados\",\"id\":\"resposta_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"id\":\"resposta_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Interesse (%)\",\"expression\":\"(interesse_m2 / interesse_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsResponderam\",{\"label\":\"Leads Responderam\",\"id\":\"interesse_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"id\":\"interesse_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Agendamento (%)\",\"expression\":\"(agend_m2 / agend_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsInteressados\",{\"label\":\"Leads Interessados\",\"id\":\"agend_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsAgendados\",{\"label\":\"Leads Agendados\",\"id\":\"agend_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Conversão (%)\",\"expression\":\"(conv_m2 / conv_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"LeadsRecebidos\",{\"label\":\"Leads Recebidos\",\"id\":\"conv_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsConvertidos\",{\"label\":\"Leads Convertidos\",\"id\":\"conv_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":6,\"height\":4,\"x\":0,\"y\":54,\"properties\":{\"view\":\"singleValue\",\"title\":\"Campanhas Ativas\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"CampanhasAtivas\",{\"label\":\"Campanhas Ativas\",\"period\":3600,\"stat\":\"Maximum\"}]]}},{\"type\":\"metric\",\"width\":6,\"height\":4,\"x\":6,\"y\":54,\"properties\":{\"view\":\"singleValue\",\"title\":\"Mensagens Enviadas\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"MensagensEnviadas\",{\"label\":\"Mensagens Enviadas\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":6,\"height\":4,\"x\":12,\"y\":54,\"properties\":{\"view\":\"singleValue\",\"title\":\"Mensagens Entregues\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"MensagensEntregues\",{\"label\":\"Mensagens Entregues\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":6,\"height\":4,\"x\":18,\"y\":54,\"properties\":{\"view\":\"singleValue\",\"title\":\"Mensagens Lidas\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"MensagensLidas\",{\"label\":\"Mensagens Lidas\",\"period\":3600,\"stat\":\"Sum\"}]]}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":58,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Taxa de Entrega e Leitura de Mensagens (%)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Taxa de Entrega (%)\",\"expression\":\"(entrega_m2 / entrega_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"MensagensEnviadas\",{\"label\":\"Mensagens Enviadas\",\"id\":\"entrega_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"MensagensEntregues\",{\"label\":\"Mensagens Entregues\",\"id\":\"entrega_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[{\"label\":\"Taxa de Leitura (%)\",\"expression\":\"(leitura_m2 / leitura_m1) * 100\",\"period\":3600}],[\"Fibonacci/Business\",\"MensagensEntregues\",{\"label\":\"Mensagens Entregues\",\"id\":\"leitura_m1\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"MensagensLidas\",{\"label\":\"Mensagens Lidas\",\"id\":\"leitura_m2\",\"visible\":false,\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":64,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Objeções, Descadastros e Descartes\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Fibonacci/Business\",\"Objecoes\",{\"label\":\"Objeções\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"Descadastros\",{\"label\":\"Descadastros (LGPD)\",\"period\":3600,\"stat\":\"Sum\"}],[\"Fibonacci/Business\",\"LeadsDescartados\",{\"label\":\"Leads Descartados\",\"period\":3600,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}}]}"]]},"dashboardName":"Business-Metrics-dev"}}}}}}},"BusinessDashboardName":{"id":"BusinessDashboardName","path":"NigredoStack-dev/BusinessDashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"NigredoInsightsQueries":{"id":"NigredoInsightsQueries","path":"NigredoStack-dev/NigredoInsightsQueries","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"ErrorsByAgentQuery":{"id":"ErrorsByAgentQuery","path":"NigredoStack-dev/NigredoInsightsQueries/ErrorsByAgentQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["RecebimentoLambdaLogRetentionA79028B3","LogGroupName"]},{"Fn::GetAtt":["EstrategiaLambdaLogRetentionBC743A98","LogGroupName"]},{"Fn::GetAtt":["DisparoLambdaLogRetentionD4C40594","LogGroupName"]},{"Fn::GetAtt":["AtendimentoLambdaLogRetention8283A17E","LogGroupName"]},{"Fn::GetAtt":["SentimentoLambdaLogRetention882AEAC5","LogGroupName"]},{"Fn::GetAtt":["AgendamentoLambdaLogRetention87CB9F44","LogGroupName"]},{"Fn::GetAtt":["RelatoriosLambdaLogRetentionF19BA1FB","LogGroupName"]}],"name":"dev/fibonacci/errors-by-agent","queryString":"fields @timestamp, agent, message, error.message, error.name, error.stack, traceId, leadId\n| filter level = \"ERROR\"\n| stats count() as errorCount by agent\n| sort errorCount desc"}}},"LatencyByEndpointQuery":{"id":"LatencyByEndpointQuery","path":"NigredoStack-dev/NigredoInsightsQueries/LatencyByEndpointQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["RecebimentoLambdaLogRetentionA79028B3","LogGroupName"]},{"Fn::GetAtt":["EstrategiaLambdaLogRetentionBC743A98","LogGroupName"]},{"Fn::GetAtt":["DisparoLambdaLogRetentionD4C40594","LogGroupName"]},{"Fn::GetAtt":["AtendimentoLambdaLogRetention8283A17E","LogGroupName"]},{"Fn::GetAtt":["SentimentoLambdaLogRetention882AEAC5","LogGroupName"]},{"Fn::GetAtt":["AgendamentoLambdaLogRetention87CB9F44","LogGroupName"]},{"Fn::GetAtt":["RelatoriosLambdaLogRetentionF19BA1FB","LogGroupName"]}],"name":"dev/fibonacci/latency-by-endpoint","queryString":"fields @timestamp, requestContext.http.path as endpoint, duration, requestContext.http.method as method\n| filter requestContext.http.path like /api/\n| stats \n    count() as requestCount,\n    avg(duration) as avgDuration,\n    min(duration) as minDuration,\n    max(duration) as maxDuration,\n    pct(duration, 50) as p50,\n    pct(duration, 95) as p95,\n    pct(duration, 99) as p99\n  by endpoint, method\n| sort p95 desc"}}},"FunnelConversionQuery":{"id":"FunnelConversionQuery","path":"NigredoStack-dev/NigredoInsightsQueries/FunnelConversionQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["RecebimentoLambdaLogRetentionA79028B3","LogGroupName"]},{"Fn::GetAtt":["EstrategiaLambdaLogRetentionBC743A98","LogGroupName"]},{"Fn::GetAtt":["DisparoLambdaLogRetentionD4C40594","LogGroupName"]},{"Fn::GetAtt":["AtendimentoLambdaLogRetention8283A17E","LogGroupName"]},{"Fn::GetAtt":["SentimentoLambdaLogRetention882AEAC5","LogGroupName"]},{"Fn::GetAtt":["AgendamentoLambdaLogRetention87CB9F44","LogGroupName"]},{"Fn::GetAtt":["RelatoriosLambdaLogRetentionF19BA1FB","LogGroupName"]}],"name":"dev/fibonacci/funnel-conversion","queryString":"fields @timestamp, leadId, agent, classification.intent, proposedAction\n| filter agent in [\"recebimento\", \"estrategia\", \"disparo\", \"atendimento\", \"agendamento\"]\n| stats \n    count() as totalLeads by agent\n| sort agent asc"}}},"MCPCallsQuery":{"id":"MCPCallsQuery","path":"NigredoStack-dev/NigredoInsightsQueries/MCPCallsQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["RecebimentoLambdaLogRetentionA79028B3","LogGroupName"]},{"Fn::GetAtt":["EstrategiaLambdaLogRetentionBC743A98","LogGroupName"]},{"Fn::GetAtt":["DisparoLambdaLogRetentionD4C40594","LogGroupName"]},{"Fn::GetAtt":["AtendimentoLambdaLogRetention8283A17E","LogGroupName"]},{"Fn::GetAtt":["SentimentoLambdaLogRetention882AEAC5","LogGroupName"]},{"Fn::GetAtt":["AgendamentoLambdaLogRetention87CB9F44","LogGroupName"]},{"Fn::GetAtt":["RelatoriosLambdaLogRetentionF19BA1FB","LogGroupName"]}],"name":"dev/fibonacci/mcp-calls-analysis","queryString":"fields @timestamp, metadata.mcpServer as server, metadata.mcpMethod as method, duration, level, message\n| filter metadata.mcpServer like /.+/\n| stats \n    count() as callCount,\n    avg(duration) as avgDuration,\n    sum(level = \"ERROR\") as errorCount,\n    (sum(level = \"ERROR\") / count()) * 100 as errorRate\n  by server, method\n| sort errorRate desc, callCount desc"}}},"LeadProcessingTimeQuery":{"id":"LeadProcessingTimeQuery","path":"NigredoStack-dev/NigredoInsightsQueries/LeadProcessingTimeQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["RecebimentoLambdaLogRetentionA79028B3","LogGroupName"]},{"Fn::GetAtt":["EstrategiaLambdaLogRetentionBC743A98","LogGroupName"]},{"Fn::GetAtt":["DisparoLambdaLogRetentionD4C40594","LogGroupName"]},{"Fn::GetAtt":["AtendimentoLambdaLogRetention8283A17E","LogGroupName"]},{"Fn::GetAtt":["SentimentoLambdaLogRetention882AEAC5","LogGroupName"]},{"Fn::GetAtt":["AgendamentoLambdaLogRetention87CB9F44","LogGroupName"]},{"Fn::GetAtt":["RelatoriosLambdaLogRetentionF19BA1FB","LogGroupName"]}],"name":"dev/fibonacci/lead-processing-time","queryString":"fields @timestamp, leadId, agent, duration, classification.priority\n| filter leadId like /.+/\n| stats \n    min(@timestamp) as startTime,\n    max(@timestamp) as endTime,\n    (max(@timestamp) - min(@timestamp)) / 1000 as totalProcessingSeconds,\n    count() as stepsCompleted,\n    latest(classification.priority) as priority\n  by leadId\n| sort totalProcessingSeconds desc\n| limit 100"}}}}},"NigredoInsightsQueryErrorsByAgent":{"id":"NigredoInsightsQueryErrorsByAgent","path":"NigredoStack-dev/NigredoInsightsQueryErrorsByAgent","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoInsightsQueryFunnelConversion":{"id":"NigredoInsightsQueryFunnelConversion","path":"NigredoStack-dev/NigredoInsightsQueryFunnelConversion","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoInsightsQueryLeadProcessingTime":{"id":"NigredoInsightsQueryLeadProcessingTime","path":"NigredoStack-dev/NigredoInsightsQueryLeadProcessingTime","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreateLeadLambda":{"id":"CreateLeadLambda","path":"NigredoStack-dev/CreateLeadLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/CreateLeadLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/CreateLeadLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/CreateLeadLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/CreateLeadLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/CreateLeadLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"CreateLeadLambdaServiceRoleDefaultPolicy7BFEB391","roles":[{"Ref":"CreateLeadLambdaServiceRole9158918A"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/CreateLeadLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/CreateLeadLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/CreateLeadLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/CreateLeadLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/CreateLeadLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevCreateLeadLambdaE87D8541","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/CreateLeadLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"b96ce3bb31bc3dc10de191f07feaef7283ec4cadcdb1fa9f382d721634d97a87.zip"},"description":"Create Lead API - Public endpoint for lead form submissions","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-create-lead","LOG_LEVEL":"DEBUG","DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"FIBONACCI_WEBHOOK_URL":{"Fn::Join":["",["https://",{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttHttpApiF5A9A8A7ApiEndpoint082134F8"},"/public/nigredo-event"]]},"DEFAULT_TENANT_ID":"00000000-0000-0000-0000-000000000000","NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-create-lead-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["CreateLeadLambdaServiceRole9158918A","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["CreateLeadLambdaSecurityGroup08EA8DA7","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/CreateLeadLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/CreateLeadLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"CreateLeadLambda-LogGroup":{"id":"CreateLeadLambda-LogGroup","path":"NigredoStack-dev/CreateLeadLambda/CreateLeadLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"ListLeadsLambda":{"id":"ListLeadsLambda","path":"NigredoStack-dev/ListLeadsLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/ListLeadsLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/ListLeadsLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/ListLeadsLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/ListLeadsLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/ListLeadsLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"ListLeadsLambdaServiceRoleDefaultPolicy1376932D","roles":[{"Ref":"ListLeadsLambdaServiceRoleA1C9ECAC"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/ListLeadsLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/ListLeadsLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/ListLeadsLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/ListLeadsLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/ListLeadsLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevListLeadsLambda9B357F8B","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/ListLeadsLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"58569dd76e626588c7e06cc3611e95a9e88b98e00ab8838298afbeb1247ef26b.zip"},"description":"List Leads API - Protected endpoint for listing leads with pagination","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-list-leads","LOG_LEVEL":"DEBUG","DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DEFAULT_TENANT_ID":"00000000-0000-0000-0000-000000000000","NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-list-leads-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ListLeadsLambdaServiceRoleA1C9ECAC","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["ListLeadsLambdaSecurityGroup0162B7FB","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/ListLeadsLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/ListLeadsLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"ListLeadsLambda-LogGroup":{"id":"ListLeadsLambda-LogGroup","path":"NigredoStack-dev/ListLeadsLambda/ListLeadsLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"GetLeadLambda":{"id":"GetLeadLambda","path":"NigredoStack-dev/GetLeadLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"NigredoStack-dev/GetLeadLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"NigredoStack-dev/GetLeadLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"NigredoStack-dev/GetLeadLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"NigredoStack-dev/GetLeadLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/GetLeadLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"GetLeadLambdaServiceRoleDefaultPolicyBC366B58","roles":[{"Ref":"GetLeadLambdaServiceRoleAEAD8583"}]}}}}}}},"Code":{"id":"Code","path":"NigredoStack-dev/GetLeadLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"NigredoStack-dev/GetLeadLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"NigredoStack-dev/GetLeadLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"SecurityGroup":{"id":"SecurityGroup","path":"NigredoStack-dev/GetLeadLambda/SecurityGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.SecurityGroup","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/GetLeadLambda/SecurityGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ec2.CfnSecurityGroup","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::EC2::SecurityGroup","aws:cdk:cloudformation:props":{"groupDescription":"Automatic security group for Lambda Function NigredoStackdevGetLeadLambda09DCA998","securityGroupEgress":[{"cidrIp":"0.0.0.0/0","description":"Allow all outbound traffic by default","ipProtocol":"-1"}],"vpcId":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcB997BDC36C512D91"}}}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/GetLeadLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"3d47206de2caf7113917e51891fb6729d06f4635ab4305388a0ccb32c365be70.zip"},"description":"Get Lead API - Protected endpoint for retrieving lead details","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"nigredo-get-lead","LOG_LEVEL":"DEBUG","DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"DEFAULT_TENANT_ID":"00000000-0000-0000-0000-000000000000","NODE_OPTIONS":"--enable-source-maps"}},"functionName":"nigredo-get-lead-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["GetLeadLambdaServiceRoleAEAD8583","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"},"vpcConfig":{"subnetIds":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet1Subnet0A47AF0D46C97751"},{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciVpcPrivateIsolatedSubnet2Subnet912A3FAFC541533A"}],"securityGroupIds":[{"Fn::GetAtt":["GetLeadLambdaSecurityGroupACE722A9","GroupId"]}]}}}},"LogRetention":{"id":"LogRetention","path":"NigredoStack-dev/GetLeadLambda/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.223.0"},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/GetLeadLambda/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"GetLeadLambda-LogGroup":{"id":"GetLeadLambda-LogGroup","path":"NigredoStack-dev/GetLeadLambda/GetLeadLambda-LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}}}},"NigredoHttpApi":{"id":"NigredoHttpApi","path":"NigredoStack-dev/NigredoHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Authorization","X-Correlation-Id"],"allowMethods":["GET","POST","OPTIONS"],"allowOrigins":["*"],"maxAge":3600},"description":"Nigredo Prospecting Core API","name":"nigredo-api-dev","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"NigredoStack-dev/NigredoHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"autoDeploy":true,"stageName":"$default"}}}}},"POST--api--leads":{"id":"POST--api--leads","path":"NigredoStack-dev/NigredoHttpApi/POST--api--leads","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"CreateLeadIntegration":{"id":"CreateLeadIntegration","path":"NigredoStack-dev/NigredoHttpApi/POST--api--leads/CreateLeadIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/POST--api--leads/CreateLeadIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["CreateLeadLambda7973BC1C","Arn"]},"payloadFormatVersion":"2.0"}}}}},"CreateLeadIntegration-Permission":{"id":"CreateLeadIntegration-Permission","path":"NigredoStack-dev/NigredoHttpApi/POST--api--leads/CreateLeadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateLeadLambda7973BC1C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"NigredoHttpApiD078601F"},"/*/*/api/leads"]]}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/POST--api--leads/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"authorizationType":"NONE","routeKey":"POST /api/leads","target":{"Fn::Join":["",["integrations/",{"Ref":"NigredoHttpApiPOSTapileadsCreateLeadIntegration44ACCC50"}]]}}}}}},"GET--api--leads":{"id":"GET--api--leads","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ListLeadsIntegration":{"id":"ListLeadsIntegration","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads/ListLeadsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads/ListLeadsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ListLeadsLambda2E94697E","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ListLeadsIntegration-Permission":{"id":"ListLeadsIntegration-Permission","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads/ListLeadsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListLeadsLambda2E94697E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"NigredoHttpApiD078601F"},"/*/*/api/leads"]]}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"authorizationType":"NONE","routeKey":"GET /api/leads","target":{"Fn::Join":["",["integrations/",{"Ref":"NigredoHttpApiGETapileadsListLeadsIntegration161C9B8A"}]]}}}}}},"GET--api--leads--{id}":{"id":"GET--api--leads--{id}","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads--{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"GetLeadIntegration":{"id":"GetLeadIntegration","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads--{id}/GetLeadIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads--{id}/GetLeadIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["GetLeadLambda3A46EB2B","Arn"]},"payloadFormatVersion":"2.0"}}}}},"GetLeadIntegration-Permission":{"id":"GetLeadIntegration-Permission","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads--{id}/GetLeadIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetLeadLambda3A46EB2B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"NigredoHttpApiD078601F"},"/*/*/api/leads/{id}"]]}}}},"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoHttpApi/GET--api--leads--{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"NigredoHttpApiD078601F"},"authorizationType":"NONE","routeKey":"GET /api/leads/{id}","target":{"Fn::Join":["",["integrations/",{"Ref":"NigredoHttpApiGETapileadsidGetLeadIntegrationFF3CA7BC"}]]}}}}}}}},"NigredoApiAlarmTopic":{"id":"NigredoApiAlarmTopic","path":"NigredoStack-dev/NigredoApiAlarmTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoApiAlarmTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"displayName":"Nigredo API Alarms","topicName":"nigredo-api-alarms-dev"}}}}},"NigredoAlarms":{"id":"NigredoAlarms","path":"NigredoStack-dev/NigredoAlarms","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"ApiErrorRateAlarm":{"id":"ApiErrorRateAlarm","path":"NigredoStack-dev/NigredoAlarms/ApiErrorRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/ApiErrorRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo API error rate exceeds 5%","alarmName":"nigredo-api-error-rate-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"((e4xx + e5xx) / requests) * 100","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"Count","namespace":"AWS/ApiGateway","dimensions":[{"name":"ApiId","value":{"Ref":"NigredoHttpApiD078601F"}}]},"period":300,"stat":"Sum"},"id":"requests","returnData":false},{"metricStat":{"metric":{"metricName":"4XXError","namespace":"AWS/ApiGateway","dimensions":[{"name":"ApiId","value":{"Ref":"NigredoHttpApiD078601F"}}]},"period":300,"stat":"Sum"},"id":"e4xx","returnData":false},{"metricStat":{"metric":{"metricName":"5XXError","namespace":"AWS/ApiGateway","dimensions":[{"name":"ApiId","value":{"Ref":"NigredoHttpApiD078601F"}}]},"period":300,"stat":"Sum"},"id":"e5xx","returnData":false}],"threshold":5,"treatMissingData":"notBreaching"}}}}},"ApiLatencyP99Alarm":{"id":"ApiLatencyP99Alarm","path":"NigredoStack-dev/NigredoAlarms/ApiLatencyP99Alarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/ApiLatencyP99Alarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo API p99 latency exceeds 1000ms","alarmName":"nigredo-api-latency-p99-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"ApiId","value":{"Ref":"NigredoHttpApiD078601F"}}],"evaluationPeriods":2,"extendedStatistic":"p99","metricName":"Latency","namespace":"AWS/ApiGateway","period":300,"threshold":1000,"treatMissingData":"notBreaching"}}}}},"WebhookFailureRateAlarm":{"id":"WebhookFailureRateAlarm","path":"NigredoStack-dev/NigredoAlarms/WebhookFailureRateAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/WebhookFailureRateAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo webhook failure rate exceeds 10%","alarmName":"nigredo-webhook-failure-rate-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metrics":[{"expression":"(failure / (success + failure)) * 100","id":"expr_1","returnData":true},{"metricStat":{"metric":{"metricName":"WebhookSuccess","namespace":"Nigredo/Prospecting"},"period":300,"stat":"Sum"},"id":"success","returnData":false},{"metricStat":{"metric":{"metricName":"WebhookFailure","namespace":"Nigredo/Prospecting"},"period":300,"stat":"Sum"},"id":"failure","returnData":false}],"threshold":10,"treatMissingData":"notBreaching"}}}}},"CreateLeadErrorAlarm":{"id":"CreateLeadErrorAlarm","path":"NigredoStack-dev/NigredoAlarms/CreateLeadErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/CreateLeadErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo CreateLead Lambda errors exceed threshold","alarmName":"nigredo-createlead-errors-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"CreateLeadLambda7973BC1C"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"ListLeadsErrorAlarm":{"id":"ListLeadsErrorAlarm","path":"NigredoStack-dev/NigredoAlarms/ListLeadsErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/ListLeadsErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo ListLeads Lambda errors exceed threshold","alarmName":"nigredo-listleads-errors-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"ListLeadsLambda2E94697E"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"GetLeadErrorAlarm":{"id":"GetLeadErrorAlarm","path":"NigredoStack-dev/NigredoAlarms/GetLeadErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/GetLeadErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"CRITICAL: Nigredo GetLead Lambda errors exceed threshold","alarmName":"nigredo-getlead-errors-critical-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"GetLeadLambda3A46EB2B"}}],"evaluationPeriods":2,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"ApiLatencyP95Alarm":{"id":"ApiLatencyP95Alarm","path":"NigredoStack-dev/NigredoAlarms/ApiLatencyP95Alarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/ApiLatencyP95Alarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"WARNING: Nigredo API p95 latency exceeds 500ms","alarmName":"nigredo-api-latency-p95-warning-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"ApiId","value":{"Ref":"NigredoHttpApiD078601F"}}],"evaluationPeriods":3,"extendedStatistic":"p95","metricName":"Latency","namespace":"AWS/ApiGateway","period":300,"threshold":500,"treatMissingData":"notBreaching"}}}}},"CreateLeadDurationAlarm":{"id":"CreateLeadDurationAlarm","path":"NigredoStack-dev/NigredoAlarms/CreateLeadDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/CreateLeadDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"WARNING: Nigredo CreateLead Lambda p95 duration exceeds 500ms","alarmName":"nigredo-createlead-duration-warning-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"dimensions":[{"name":"FunctionName","value":{"Ref":"CreateLeadLambda7973BC1C"}}],"evaluationPeriods":3,"extendedStatistic":"p95","metricName":"Duration","namespace":"AWS/Lambda","period":300,"threshold":500,"treatMissingData":"notBreaching"}}}}},"CreateLeadThrottleAlarm":{"id":"CreateLeadThrottleAlarm","path":"NigredoStack-dev/NigredoAlarms/CreateLeadThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/CreateLeadThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"WARNING: Nigredo CreateLead Lambda is being throttled","alarmName":"nigredo-createlead-throttles-warning-dev","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"CreateLeadLambda7973BC1C"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"RateLimitAlarm":{"id":"RateLimitAlarm","path":"NigredoStack-dev/NigredoAlarms/RateLimitAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoAlarms/RateLimitAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmActions":[{"Ref":"NigredoApiAlarmTopicB70677AA"}],"alarmDescription":"WARNING: High number of rate limit hits detected","alarmName":"nigredo-rate-limit-hits-warning-dev","comparisonOperator":"GreaterThanThreshold","datapointsToAlarm":2,"evaluationPeriods":2,"metricName":"RateLimitHits","namespace":"Nigredo/Prospecting","period":300,"statistic":"Sum","threshold":100,"treatMissingData":"notBreaching"}}}}},"CriticalAlarmsCount":{"id":"CriticalAlarmsCount","path":"NigredoStack-dev/NigredoAlarms/CriticalAlarmsCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WarningAlarmsCount":{"id":"WarningAlarmsCount","path":"NigredoStack-dev/NigredoAlarms/WarningAlarmsCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"NigredoDashboard":{"id":"NigredoDashboard","path":"NigredoStack-dev/NigredoDashboard","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Dashboard":{"id":"Dashboard","path":"NigredoStack-dev/NigredoDashboard/Dashboard","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Dashboard","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"NigredoStack-dev/NigredoDashboard/Dashboard/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnDashboard","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Dashboard","aws:cdk:cloudformation:props":{"dashboardBody":{"Fn::Join":["",["{\"periodOverride\":\"auto\",\"widgets\":[{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":0,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lead Submissions Over Time\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Nigredo/Prospecting\",\"LeadSubmissions\",{\"label\":\"Lead Submissions\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Webhook Success Rate\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Webhook Success Rate (%)\",\"expression\":\"(success / (success + failure)) * 100\"}],[\"Nigredo/Prospecting\",\"WebhookSuccess\",{\"label\":\"Webhook Success\",\"id\":\"success\",\"visible\":false,\"stat\":\"Sum\"}],[\"Nigredo/Prospecting\",\"WebhookFailure\",{\"label\":\"Webhook Failure\",\"id\":\"failure\",\"visible\":false,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100,\"label\":\"Success Rate (%)\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":6,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Webhook Attempts\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Nigredo/Prospecting\",\"WebhookSuccess\",{\"label\":\"Webhook Success\",\"stat\":\"Sum\"}],[\"Nigredo/Prospecting\",\"WebhookFailure\",{\"label\":\"Webhook Failure\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Count\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Requests per Minute\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Count\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"Total Requests\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Requests\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":12,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Error Rate\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[{\"label\":\"Error Rate (%)\",\"expression\":\"((e4xx + e5xx) / requests) * 100\",\"period\":60}],[\"AWS/ApiGateway\",\"Count\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"Total Requests\",\"id\":\"requests\",\"visible\":false,\"period\":60,\"stat\":\"Sum\"}],[\"AWS/ApiGateway\",\"4XXError\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"4xx Errors\",\"id\":\"e4xx\",\"period\":60,\"stat\":\"Sum\",\"yAxis\":\"right\"}],[\"AWS/ApiGateway\",\"5XXError\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"5xx Errors\",\"id\":\"e5xx\",\"period\":60,\"stat\":\"Sum\",\"yAxis\":\"right\"}]],\"yAxis\":{\"left\":{\"min\":0,\"max\":100,\"label\":\"Error Rate (%)\"},\"right\":{\"min\":0,\"label\":\"Error Count\"}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":18,\"properties\":{\"view\":\"timeSeries\",\"title\":\"API Latency Percentiles (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"Average\",\"period\":60}],[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"p50\",\"period\":60,\"stat\":\"p50\"}],[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"p95\",\"period\":60,\"stat\":\"p95\"}],[\"AWS/ApiGateway\",\"Latency\",\"ApiId\",\"",{"Ref":"NigredoHttpApiD078601F"},"\",{\"label\":\"p99\",\"period\":60,\"stat\":\"p99\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Latency (ms)\"}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":24,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Errors by Endpoint\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead Errors\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"ListLeadsLambda2E94697E"},"\",{\"label\":\"List Leads Errors\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"GetLeadLambda3A46EB2B"},"\",{\"label\":\"Get Lead Errors\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Error Count\"}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":30,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Invocations by Endpoint\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"ListLeadsLambda2E94697E"},"\",{\"label\":\"List Leads\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"GetLeadLambda3A46EB2B"},"\",{\"label\":\"Get Lead\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Invocations\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":36,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Create Lead Lambda - Duration (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead Avg\",\"period\":60}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead p95\",\"period\":60,\"stat\":\"p95\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead p99\",\"period\":60,\"stat\":\"p99\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Duration (ms)\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":36,\"properties\":{\"view\":\"singleValue\",\"title\":\"Create Lead - Latest Metrics\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Invocations\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Errors\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead Errors\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead p99\",\"period\":60,\"stat\":\"p99\"}]]}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"List Leads Lambda - Duration (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ListLeadsLambda2E94697E"},"\",{\"label\":\"List Leads Avg\",\"period\":60}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"ListLeadsLambda2E94697E"},"\",{\"label\":\"List Leads p95\",\"period\":60,\"stat\":\"p95\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Duration (ms)\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":42,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Get Lead Lambda - Duration (ms)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"GetLeadLambda3A46EB2B"},"\",{\"label\":\"Get Lead Avg\",\"period\":60}],[\"AWS/Lambda\",\"Duration\",\"FunctionName\",\"",{"Ref":"GetLeadLambda3A46EB2B"},"\",{\"label\":\"Get Lead p95\",\"period\":60,\"stat\":\"p95\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Duration (ms)\"}}}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":0,\"y\":48,\"properties\":{\"view\":\"singleValue\",\"title\":\"Rate Limit Hits (Last Hour)\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Nigredo/Prospecting\",\"RateLimitHits\",{\"label\":\"Rate Limit Hits\",\"stat\":\"Sum\"}]],\"setPeriodToTimeRange\":false}},{\"type\":\"metric\",\"width\":12,\"height\":6,\"x\":12,\"y\":48,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Rate Limit Hits Over Time\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"Nigredo/Prospecting\",\"RateLimitHits\",{\"label\":\"Rate Limit Hits\",\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Hits\"}}}},{\"type\":\"metric\",\"width\":24,\"height\":6,\"x\":0,\"y\":54,\"properties\":{\"view\":\"timeSeries\",\"title\":\"Lambda Throttles\",\"region\":\"",{"Ref":"AWS::Region"},"\",\"metrics\":[[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"CreateLeadLambda7973BC1C"},"\",{\"label\":\"Create Lead\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"ListLeadsLambda2E94697E"},"\",{\"label\":\"List Leads\",\"period\":60,\"stat\":\"Sum\"}],[\"AWS/Lambda\",\"Throttles\",\"FunctionName\",\"",{"Ref":"GetLeadLambda3A46EB2B"},"\",{\"label\":\"Get Lead\",\"period\":60,\"stat\":\"Sum\"}]],\"yAxis\":{\"left\":{\"min\":0,\"label\":\"Throttles\"}}}}]}"]]},"dashboardName":"Nigredo-Prospecting-dev"}}}}}}},"NigredoApiInsightsQueries":{"id":"NigredoApiInsightsQueries","path":"NigredoStack-dev/NigredoApiInsightsQueries","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"TopLeadSourcesQuery":{"id":"TopLeadSourcesQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/TopLeadSourcesQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/top-lead-sources","queryString":"fields @timestamp, leadData.source, leadData.utm_source, leadData.utm_campaign, leadData.utm_medium\n| filter @message like /Lead created successfully/\n| stats count() as leadCount by leadData.source, leadData.utm_source, leadData.utm_campaign\n| sort leadCount desc\n| limit 20"}}},"ConversionFunnelQuery":{"id":"ConversionFunnelQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/ConversionFunnelQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/conversion-funnel","queryString":"fields @timestamp, @message, leadId, webhookStatus\n| stats \n    count(@message like /Form submission received/) as formSubmissions,\n    count(@message like /Lead created successfully/) as leadsCreated,\n    count(@message like /Webhook sent successfully/) as webhooksSent,\n    count(@message like /Webhook failed/) as webhooksFailed\n| extend conversionRate = (leadsCreated / formSubmissions) * 100\n| extend webhookSuccessRate = (webhooksSent / (webhooksSent + webhooksFailed)) * 100"}}},"ErrorAnalysisQuery":{"id":"ErrorAnalysisQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/ErrorAnalysisQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/error-analysis","queryString":"fields @timestamp, level, error.message, error.name, error.code, requestContext.http.path as endpoint, requestContext.http.method as method\n| filter level = \"ERROR\"\n| stats count() as errorCount by endpoint, method, error.name, error.code\n| sort errorCount desc\n| limit 50"}}},"WebhookFailuresQuery":{"id":"WebhookFailuresQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/WebhookFailuresQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/webhook-failures","queryString":"fields @timestamp, leadId, webhookUrl, webhookStatus, webhookError, attemptNumber\n| filter @message like /Webhook failed/ or @message like /Webhook retry/\n| stats \n    count() as failureCount,\n    latest(@timestamp) as lastFailure,\n    latest(webhookError) as lastError,\n    max(attemptNumber) as maxAttempts\n  by leadId, webhookUrl\n| sort failureCount desc\n| limit 50"}}},"RateLimitAnalysisQuery":{"id":"RateLimitAnalysisQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/RateLimitAnalysisQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/rate-limit-analysis","queryString":"fields @timestamp, ipAddress, @message\n| filter @message like /Rate limit exceeded/\n| stats count() as rateLimitHits by ipAddress, bin(1h) as hour\n| sort rateLimitHits desc\n| limit 100"}}},"PerformanceAnalysisQuery":{"id":"PerformanceAnalysisQuery","path":"NigredoStack-dev/NigredoApiInsightsQueries/PerformanceAnalysisQuery","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnQueryDefinition","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::QueryDefinition","aws:cdk:cloudformation:props":{"logGroupNames":[{"Fn::GetAtt":["CreateLeadLambdaLogRetentionA089A5EA","LogGroupName"]},{"Fn::GetAtt":["ListLeadsLambdaLogRetention94AAF37D","LogGroupName"]},{"Fn::GetAtt":["GetLeadLambdaLogRetentionE1D96EC6","LogGroupName"]}],"name":"dev/nigredo/performance-analysis","queryString":"fields @timestamp, requestContext.http.path as endpoint, requestContext.http.method as method, duration\n| filter duration > 0\n| stats \n    count() as requestCount,\n    avg(duration) as avgDuration,\n    min(duration) as minDuration,\n    max(duration) as maxDuration,\n    pct(duration, 50) as p50,\n    pct(duration, 95) as p95,\n    pct(duration, 99) as p99\n  by endpoint, method\n| sort p99 desc"}}},"TopLeadSourcesQueryName":{"id":"TopLeadSourcesQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/TopLeadSourcesQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ConversionFunnelQueryName":{"id":"ConversionFunnelQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/ConversionFunnelQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ErrorAnalysisQueryName":{"id":"ErrorAnalysisQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/ErrorAnalysisQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"WebhookFailuresQueryName":{"id":"WebhookFailuresQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/WebhookFailuresQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"RateLimitAnalysisQueryName":{"id":"RateLimitAnalysisQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/RateLimitAnalysisQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"PerformanceAnalysisQueryName":{"id":"PerformanceAnalysisQueryName","path":"NigredoStack-dev/NigredoApiInsightsQueries/PerformanceAnalysisQueryName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}}}},"NigredoApiUrl":{"id":"NigredoApiUrl","path":"NigredoStack-dev/NigredoApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoApiId":{"id":"NigredoApiId","path":"NigredoStack-dev/NigredoApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreateLeadLambdaArn":{"id":"CreateLeadLambdaArn","path":"NigredoStack-dev/CreateLeadLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ListLeadsLambdaArn":{"id":"ListLeadsLambdaArn","path":"NigredoStack-dev/ListLeadsLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"GetLeadLambdaArn":{"id":"GetLeadLambdaArn","path":"NigredoStack-dev/GetLeadLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AlarmTopicArn":{"id":"AlarmTopicArn","path":"NigredoStack-dev/AlarmTopicArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoDashboardName":{"id":"NigredoDashboardName","path":"NigredoStack-dev/NigredoDashboardName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoTopLeadSourcesQuery":{"id":"NigredoTopLeadSourcesQuery","path":"NigredoStack-dev/NigredoTopLeadSourcesQuery","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoConversionFunnelQuery":{"id":"NigredoConversionFunnelQuery","path":"NigredoStack-dev/NigredoConversionFunnelQuery","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoErrorAnalysisQuery":{"id":"NigredoErrorAnalysisQuery","path":"NigredoStack-dev/NigredoErrorAnalysisQuery","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoCriticalAlarmsCount":{"id":"NigredoCriticalAlarmsCount","path":"NigredoStack-dev/NigredoCriticalAlarmsCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"NigredoWarningAlarmsCount":{"id":"NigredoWarningAlarmsCount","path":"NigredoStack-dev/NigredoWarningAlarmsCount","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"NigredoStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"NigredoStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"NigredoStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"NigredoStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"AlquimistaStack-dev":{"id":"AlquimistaStack-dev","path":"AlquimistaStack-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.223.0"},"children":{"ListAgentsFunction":{"id":"ListAgentsFunction","path":"AlquimistaStack-dev/ListAgentsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/ListAgentsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/ListAgentsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListAgentsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/ListAgentsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListAgentsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"ListAgentsFunctionServiceRoleDefaultPolicyFCA50532","roles":[{"Ref":"ListAgentsFunctionServiceRole6AEFCA72"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/ListAgentsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/ListAgentsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/ListAgentsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListAgentsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"1150482d1042f09577d5895c26f2700fb014f4829c01b1bf0ed81783b176c588.zip"},"description":"Lista agentes disponíveis no marketplace","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-list-agents-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ListAgentsFunctionServiceRole6AEFCA72","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"ActivateAgentFunction":{"id":"ActivateAgentFunction","path":"AlquimistaStack-dev/ActivateAgentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/ActivateAgentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/ActivateAgentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ActivateAgentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/ActivateAgentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ActivateAgentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}}],"Version":"2012-10-17"},"policyName":"ActivateAgentFunctionServiceRoleDefaultPolicy925EDEC5","roles":[{"Ref":"ActivateAgentFunctionServiceRole9F82FD8A"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/ActivateAgentFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/ActivateAgentFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/ActivateAgentFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ActivateAgentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"636acff1f932ba2a7d4dfbf12083bb982ecb3bd13bb6c64ce9af167970d68efa.zip"},"description":"Ativa agente para tenant específico","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-activate-agent-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["ActivateAgentFunctionServiceRole9F82FD8A","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"DeactivateAgentFunction":{"id":"DeactivateAgentFunction","path":"AlquimistaStack-dev/DeactivateAgentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/DeactivateAgentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/DeactivateAgentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DeactivateAgentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/DeactivateAgentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DeactivateAgentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}}],"Version":"2012-10-17"},"policyName":"DeactivateAgentFunctionServiceRoleDefaultPolicyB7E7A632","roles":[{"Ref":"DeactivateAgentFunctionServiceRole460539D7"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/DeactivateAgentFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/DeactivateAgentFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/DeactivateAgentFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DeactivateAgentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"7ab3c51d84f6f966726836f572937eb443c8f2893d6d6fb68c956261376a6e91.zip"},"description":"Desativa agente para tenant específico","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-deactivate-agent-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["DeactivateAgentFunctionServiceRole460539D7","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"AuditLogFunction":{"id":"AuditLogFunction","path":"AlquimistaStack-dev/AuditLogFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/AuditLogFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/AuditLogFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AuditLogFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/AuditLogFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AuditLogFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"AuditLogFunctionServiceRoleDefaultPolicyB3CE2636","roles":[{"Ref":"AuditLogFunctionServiceRole338E5EBB"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/AuditLogFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/AuditLogFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/AuditLogFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AuditLogFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"e2a642f36f5af3774f12faec605fe0af844fe78ed3d857d822cc0e189426f98c.zip"},"description":"Consulta logs de auditoria da plataforma","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-audit-log-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AuditLogFunctionServiceRole338E5EBB","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"AgentMetricsFunction":{"id":"AgentMetricsFunction","path":"AlquimistaStack-dev/AgentMetricsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/AgentMetricsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/AgentMetricsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AgentMetricsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/AgentMetricsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AgentMetricsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"AgentMetricsFunctionServiceRoleDefaultPolicyB1428369","roles":[{"Ref":"AgentMetricsFunctionServiceRoleDD5EAECA"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/AgentMetricsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/AgentMetricsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/AgentMetricsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/AgentMetricsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"e720f43c50373b8fec20f66f184cf358f4a5e5d4ec936519a8156a586931a4a6.zip"},"description":"Calcula e retorna métricas de performance e custo por agente","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-agent-metrics-dev","handler":"index.handler","memorySize":512,"role":{"Fn::GetAtt":["AgentMetricsFunctionServiceRoleDD5EAECA","Arn"]},"runtime":"nodejs20.x","timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"CreateApprovalFunction":{"id":"CreateApprovalFunction","path":"AlquimistaStack-dev/CreateApprovalFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/CreateApprovalFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/CreateApprovalFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CreateApprovalFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/CreateApprovalFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CreateApprovalFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}}],"Version":"2012-10-17"},"policyName":"CreateApprovalFunctionServiceRoleDefaultPolicyB096AF88","roles":[{"Ref":"CreateApprovalFunctionServiceRoleDB3AE4AE"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/CreateApprovalFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/CreateApprovalFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/CreateApprovalFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CreateApprovalFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"5341eb64f78e0fbb813b3795f3d0f6944ce924a4e9e9f9d1b41a150c4e31dd9c.zip"},"description":"Cria solicitação de aprovação para ações críticas","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-create-approval-dev","handler":"index.createHandler","memorySize":512,"role":{"Fn::GetAtt":["CreateApprovalFunctionServiceRoleDB3AE4AE","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"DecideApprovalFunction":{"id":"DecideApprovalFunction","path":"AlquimistaStack-dev/DecideApprovalFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/DecideApprovalFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/DecideApprovalFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DecideApprovalFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/DecideApprovalFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DecideApprovalFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}}],"Version":"2012-10-17"},"policyName":"DecideApprovalFunctionServiceRoleDefaultPolicy09FB1EFF","roles":[{"Ref":"DecideApprovalFunctionServiceRole2EB5D0EF"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/DecideApprovalFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/DecideApprovalFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/DecideApprovalFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/DecideApprovalFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"5341eb64f78e0fbb813b3795f3d0f6944ce924a4e9e9f9d1b41a150c4e31dd9c.zip"},"description":"Processa decisão de aprovação (aprovar/rejeitar)","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-decide-approval-dev","handler":"index.decideHandler","memorySize":512,"role":{"Fn::GetAtt":["DecideApprovalFunctionServiceRole2EB5D0EF","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"GetApprovalFunction":{"id":"GetApprovalFunction","path":"AlquimistaStack-dev/GetApprovalFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/GetApprovalFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/GetApprovalFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/GetApprovalFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/GetApprovalFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/GetApprovalFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"GetApprovalFunctionServiceRoleDefaultPolicy25B032BB","roles":[{"Ref":"GetApprovalFunctionServiceRole2FF49C1C"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/GetApprovalFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/GetApprovalFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/GetApprovalFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/GetApprovalFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"5341eb64f78e0fbb813b3795f3d0f6944ce924a4e9e9f9d1b41a150c4e31dd9c.zip"},"description":"Obtém detalhes de uma solicitação de aprovação","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-get-approval-dev","handler":"index.getHandler","memorySize":512,"role":{"Fn::GetAtt":["GetApprovalFunctionServiceRole2FF49C1C","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"ListApprovalsFunction":{"id":"ListApprovalsFunction","path":"AlquimistaStack-dev/ListApprovalsFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/ListApprovalsFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/ListApprovalsFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListApprovalsFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/ListApprovalsFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListApprovalsFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}}],"Version":"2012-10-17"},"policyName":"ListApprovalsFunctionServiceRoleDefaultPolicy0B5C5186","roles":[{"Ref":"ListApprovalsFunctionServiceRole3ECA45FF"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/ListApprovalsFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/ListApprovalsFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/ListApprovalsFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/ListApprovalsFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"5341eb64f78e0fbb813b3795f3d0f6944ce924a4e9e9f9d1b41a150c4e31dd9c.zip"},"description":"Lista solicitações de aprovação do tenant","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-list-approvals-dev","handler":"index.listHandler","memorySize":512,"role":{"Fn::GetAtt":["ListApprovalsFunctionServiceRole3ECA45FF","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"CancelApprovalFunction":{"id":"CancelApprovalFunction","path":"AlquimistaStack-dev/CancelApprovalFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.223.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"AlquimistaStack-dev/CancelApprovalFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.223.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"AlquimistaStack-dev/CancelApprovalFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.223.0","metadata":[]}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CancelApprovalFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AlquimistaStack-dev/CancelApprovalFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CancelApprovalFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["secretsmanager:DescribeSecret","secretsmanager:GetSecretValue"],"Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputFnGetAttFibonacciBus476BDCEAArnB772AB72"}}],"Version":"2012-10-17"},"policyName":"CancelApprovalFunctionServiceRoleDefaultPolicy7C37236E","roles":[{"Ref":"CancelApprovalFunctionServiceRole55078AE2"}]}}}}}}},"Code":{"id":"Code","path":"AlquimistaStack-dev/CancelApprovalFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.223.0"},"children":{"Stage":{"id":"Stage","path":"AlquimistaStack-dev/CancelApprovalFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.223.0"}},"AssetBucket":{"id":"AssetBucket","path":"AlquimistaStack-dev/CancelApprovalFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.223.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/CancelApprovalFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-207933152643-us-east-1","s3Key":"5341eb64f78e0fbb813b3795f3d0f6944ce924a4e9e9f9d1b41a150c4e31dd9c.zip"},"description":"Cancela solicitação de aprovação pendente","environment":{"variables":{"POWERTOOLS_SERVICE_NAME":"alquimista-platform","EVENT_BUS_NAME":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefFibonacciBus476BDCEA864F6572"},"DB_SECRET_ARN":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefDbSecret685A0FA57881E1C6"},"USER_POOL_ID":{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"NODE_OPTIONS":"--enable-source-maps"}},"functionName":"alquimista-cancel-approval-dev","handler":"index.cancelHandler","memorySize":512,"role":{"Fn::GetAtt":["CancelApprovalFunctionServiceRole55078AE2","Arn"]},"runtime":"nodejs20.x","timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"PlatformApi":{"id":"PlatformApi","path":"AlquimistaStack-dev/PlatformApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["Content-Type","Authorization"],"allowMethods":["GET","POST","PUT","DELETE","OPTIONS"],"allowOrigins":["*"],"maxAge":86400},"description":"Alquimista Platform API - Marketplace e Gestão de Agentes","name":"alquimista-platform-api-dev","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"AlquimistaStack-dev/PlatformApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"autoDeploy":true,"stageName":"$default"}}}}},"GET--api--agents":{"id":"GET--api--agents","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ListAgentsIntegration":{"id":"ListAgentsIntegration","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents/ListAgentsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents/ListAgentsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ListAgentsFunction75B90D55","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ListAgentsIntegration-Permission":{"id":"ListAgentsIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents/ListAgentsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListAgentsFunction75B90D55","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/agents"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/agents","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiagentsListAgentsIntegration2F9E5C0F"}]]}}}}}},"CognitoAuthorizer":{"id":"CognitoAuthorizer","path":"AlquimistaStack-dev/PlatformApi/CognitoAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpAuthorizer","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/CognitoAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnAuthorizer","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Authorizer","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizerType":"JWT","identitySource":["$request.header.Authorization"],"jwtConfiguration":{"audience":[{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPoolUserPoolAuthorizerClient680A88B611CBC378"}],"issuer":{"Fn::Join":["",["https://cognito-idp.us-east-1.amazonaws.com/",{"Fn::ImportValue":"FibonacciStack-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"}]]}},"name":"alquimista-authorizer-dev"}}}}},"POST--api--agents--{id}--activate":{"id":"POST--api--agents--{id}--activate","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--activate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ActivateAgentIntegration":{"id":"ActivateAgentIntegration","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--activate/ActivateAgentIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--activate/ActivateAgentIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ActivateAgentFunction216E09F6","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ActivateAgentIntegration-Permission":{"id":"ActivateAgentIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--activate/ActivateAgentIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ActivateAgentFunction216E09F6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/agents/{id}/activate"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--activate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"POST /api/agents/{id}/activate","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiPOSTapiagentsidactivateActivateAgentIntegration6B00FE76"}]]}}}}}},"POST--api--agents--{id}--deactivate":{"id":"POST--api--agents--{id}--deactivate","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--deactivate","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"DeactivateAgentIntegration":{"id":"DeactivateAgentIntegration","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--deactivate/DeactivateAgentIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--deactivate/DeactivateAgentIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["DeactivateAgentFunctionFF0DBE38","Arn"]},"payloadFormatVersion":"2.0"}}}}},"DeactivateAgentIntegration-Permission":{"id":"DeactivateAgentIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--deactivate/DeactivateAgentIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DeactivateAgentFunctionFF0DBE38","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/agents/{id}/deactivate"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--agents--{id}--deactivate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"POST /api/agents/{id}/deactivate","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiPOSTapiagentsiddeactivateDeactivateAgentIntegration7F5F13FD"}]]}}}}}},"GET--api--audit-logs":{"id":"GET--api--audit-logs","path":"AlquimistaStack-dev/PlatformApi/GET--api--audit-logs","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"AuditLogIntegration":{"id":"AuditLogIntegration","path":"AlquimistaStack-dev/PlatformApi/GET--api--audit-logs/AuditLogIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--audit-logs/AuditLogIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["AuditLogFunctionBAA696D6","Arn"]},"payloadFormatVersion":"2.0"}}}}},"AuditLogIntegration-Permission":{"id":"AuditLogIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--audit-logs/AuditLogIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuditLogFunctionBAA696D6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/audit-logs"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--audit-logs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/audit-logs","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiauditlogsAuditLogIntegrationC732EEF5"}]]}}}}}},"GET--api--agents--{id}--metrics":{"id":"GET--api--agents--{id}--metrics","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--{id}--metrics","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"AgentMetricsIntegration":{"id":"AgentMetricsIntegration","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--{id}--metrics/AgentMetricsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--{id}--metrics/AgentMetricsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["AgentMetricsFunction336A67E4","Arn"]},"payloadFormatVersion":"2.0"}}}}},"AgentMetricsIntegration-Permission":{"id":"AgentMetricsIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--{id}--metrics/AgentMetricsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AgentMetricsFunction336A67E4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/agents/{id}/metrics"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--{id}--metrics/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/agents/{id}/metrics","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiagentsidmetricsAgentMetricsIntegrationF13FE741"}]]}}}}}},"GET--api--agents--metrics":{"id":"GET--api--agents--metrics","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--metrics","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"AgentMetricsIntegration-Permission":{"id":"AgentMetricsIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--metrics/AgentMetricsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AgentMetricsFunction336A67E4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/agents/metrics"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--agents--metrics/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/agents/metrics","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiagentsidmetricsAgentMetricsIntegrationF13FE741"}]]}}}}}},"POST--api--approvals":{"id":"POST--api--approvals","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"CreateApprovalIntegration":{"id":"CreateApprovalIntegration","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals/CreateApprovalIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals/CreateApprovalIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["CreateApprovalFunction48E86CD3","Arn"]},"payloadFormatVersion":"2.0"}}}}},"CreateApprovalIntegration-Permission":{"id":"CreateApprovalIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals/CreateApprovalIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateApprovalFunction48E86CD3","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/approvals"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"POST /api/approvals","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiPOSTapiapprovalsCreateApprovalIntegrationFCD6CBF6"}]]}}}}}},"GET--api--approvals":{"id":"GET--api--approvals","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"ListApprovalsIntegration":{"id":"ListApprovalsIntegration","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals/ListApprovalsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals/ListApprovalsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ListApprovalsFunction43A2259E","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ListApprovalsIntegration-Permission":{"id":"ListApprovalsIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals/ListApprovalsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListApprovalsFunction43A2259E","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/approvals"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/approvals","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiapprovalsListApprovalsIntegration1A3C83D3"}]]}}}}}},"GET--api--approvals--{id}":{"id":"GET--api--approvals--{id}","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals--{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"GetApprovalIntegration":{"id":"GetApprovalIntegration","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals--{id}/GetApprovalIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals--{id}/GetApprovalIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["GetApprovalFunctionF985B0F2","Arn"]},"payloadFormatVersion":"2.0"}}}}},"GetApprovalIntegration-Permission":{"id":"GetApprovalIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals--{id}/GetApprovalIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetApprovalFunctionF985B0F2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/approvals/{id}"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/GET--api--approvals--{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"GET /api/approvals/{id}","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiGETapiapprovalsidGetApprovalIntegration833A25E8"}]]}}}}}},"POST--api--approvals--{id}--decide":{"id":"POST--api--approvals--{id}--decide","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals--{id}--decide","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"DecideApprovalIntegration":{"id":"DecideApprovalIntegration","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals--{id}--decide/DecideApprovalIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals--{id}--decide/DecideApprovalIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["DecideApprovalFunction570642CF","Arn"]},"payloadFormatVersion":"2.0"}}}}},"DecideApprovalIntegration-Permission":{"id":"DecideApprovalIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals--{id}--decide/DecideApprovalIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["DecideApprovalFunction570642CF","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/approvals/{id}/decide"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/POST--api--approvals--{id}--decide/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"POST /api/approvals/{id}/decide","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiPOSTapiapprovalsiddecideDecideApprovalIntegration38DE62E6"}]]}}}}}},"DELETE--api--approvals--{id}":{"id":"DELETE--api--approvals--{id}","path":"AlquimistaStack-dev/PlatformApi/DELETE--api--approvals--{id}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.223.0","metadata":[]},"children":{"CancelApprovalIntegration":{"id":"CancelApprovalIntegration","path":"AlquimistaStack-dev/PlatformApi/DELETE--api--approvals--{id}/CancelApprovalIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.223.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/DELETE--api--approvals--{id}/CancelApprovalIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["CancelApprovalFunctionCFDDA663","Arn"]},"payloadFormatVersion":"2.0"}}}}},"CancelApprovalIntegration-Permission":{"id":"CancelApprovalIntegration-Permission","path":"AlquimistaStack-dev/PlatformApi/DELETE--api--approvals--{id}/CancelApprovalIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CancelApprovalFunctionCFDDA663","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:207933152643:",{"Ref":"PlatformApi0A9CF539"},"/*/*/api/approvals/{id}"]]}}}},"Resource":{"id":"Resource","path":"AlquimistaStack-dev/PlatformApi/DELETE--api--approvals--{id}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.223.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"PlatformApi0A9CF539"},"authorizationType":"JWT","authorizerId":{"Ref":"PlatformApiCognitoAuthorizerE194F12E"},"routeKey":"DELETE /api/approvals/{id}","target":{"Fn::Join":["",["integrations/",{"Ref":"PlatformApiDELETEapiapprovalsidCancelApprovalIntegration13ECB907"}]]}}}}}}}},"StackName":{"id":"StackName","path":"AlquimistaStack-dev/StackName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"PlatformApiUrl":{"id":"PlatformApiUrl","path":"AlquimistaStack-dev/PlatformApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"PlatformApiId":{"id":"PlatformApiId","path":"AlquimistaStack-dev/PlatformApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ListAgentsFunctionName":{"id":"ListAgentsFunctionName","path":"AlquimistaStack-dev/ListAgentsFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ActivateAgentFunctionName":{"id":"ActivateAgentFunctionName","path":"AlquimistaStack-dev/ActivateAgentFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DeactivateAgentFunctionName":{"id":"DeactivateAgentFunctionName","path":"AlquimistaStack-dev/DeactivateAgentFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AuditLogFunctionName":{"id":"AuditLogFunctionName","path":"AlquimistaStack-dev/AuditLogFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"AgentMetricsFunctionName":{"id":"AgentMetricsFunctionName","path":"AlquimistaStack-dev/AgentMetricsFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CreateApprovalFunctionName":{"id":"CreateApprovalFunctionName","path":"AlquimistaStack-dev/CreateApprovalFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"DecideApprovalFunctionName":{"id":"DecideApprovalFunctionName","path":"AlquimistaStack-dev/DecideApprovalFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"GetApprovalFunctionName":{"id":"GetApprovalFunctionName","path":"AlquimistaStack-dev/GetApprovalFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"ListApprovalsFunctionName":{"id":"ListApprovalsFunctionName","path":"AlquimistaStack-dev/ListApprovalsFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CancelApprovalFunctionName":{"id":"CancelApprovalFunctionName","path":"AlquimistaStack-dev/CancelApprovalFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.223.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"AlquimistaStack-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"AlquimistaStack-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.223.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AlquimistaStack-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.223.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AlquimistaStack-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.223.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}