"use strict";var lj=Object.create;var da=Object.defineProperty;var dj=Object.getOwnPropertyDescriptor;var fj=Object.getOwnPropertyNames;var pj=Object.getPrototypeOf,hj=Object.prototype.hasOwnProperty;var uR=e=>{throw TypeError(e)};var mj=(e,t,r)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var C=(e,t)=>()=>(e&&(t=e(e=0)),t);var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),jt=(e,t)=>{for(var r in t)da(e,r,{get:t[r],enumerable:!0})},lR=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of fj(t))!hj.call(e,s)&&s!==r&&da(e,s,{get:()=>t[s],enumerable:!(n=dj(t,s))||n.enumerable});return e};var T=(e,t,r)=>(r=e!=null?lj(pj(e)):{},lR(t||!e||!e.__esModule?da(r,"default",{value:e,enumerable:!0}):r,e)),se=e=>lR(da({},"__esModule",{value:!0}),e);var f=(e,t,r)=>mj(e,typeof t!="symbol"?t+"":t,r),Gm=(e,t,r)=>t.has(e)||uR("Cannot "+r);var L=(e,t,r)=>(Gm(e,t,"read from private field"),r?r.call(e):t.get(e)),Ce=(e,t,r)=>t.has(e)?uR("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),st=(e,t,r,n)=>(Gm(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),De=(e,t,r)=>(Gm(e,t,"access private method"),r);var nn=S(Ae=>{"use strict";Ae.HttpAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Ae.HttpAuthLocation||(Ae.HttpAuthLocation={}));Ae.HttpApiKeyAuthLocation=void 0;(function(e){e.HEADER="header",e.QUERY="query"})(Ae.HttpApiKeyAuthLocation||(Ae.HttpApiKeyAuthLocation={}));Ae.EndpointURLScheme=void 0;(function(e){e.HTTP="http",e.HTTPS="https"})(Ae.EndpointURLScheme||(Ae.EndpointURLScheme={}));Ae.AlgorithmId=void 0;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Ae.AlgorithmId||(Ae.AlgorithmId={}));var gj=e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>Ae.AlgorithmId.SHA256,checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>Ae.AlgorithmId.MD5,checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},Ej=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},yj=e=>gj(e),Sj=e=>Ej(e);Ae.FieldPosition=void 0;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ae.FieldPosition||(Ae.FieldPosition={}));var _j="__smithy_context";Ae.IniSectionType=void 0;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Ae.IniSectionType||(Ae.IniSectionType={}));Ae.RequestHandlerProtocol=void 0;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(Ae.RequestHandlerProtocol||(Ae.RequestHandlerProtocol={}));Ae.SMITHY_CONTEXT_KEY=_j;Ae.getDefaultClientConfiguration=yj;Ae.resolveDefaultRuntimeConfig=Sj});var we=S(Un=>{"use strict";var vj=nn(),wj=e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),bj=e=>({httpHandler:e.httpHandler()}),Km=class{constructor({name:t,kind:r=vj.FieldPosition.HEADER,values:n=[]}){f(this,"name");f(this,"kind");f(this,"values");this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},Xm=class{constructor({fields:t=[],encoding:r="utf-8"}){f(this,"entries",{});f(this,"encoding");t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},Qm=class e{constructor(t){f(this,"method");f(this,"protocol");f(this,"hostname");f(this,"port");f(this,"path");f(this,"query");f(this,"headers");f(this,"username");f(this,"password");f(this,"fragment");f(this,"body");this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new e({...t,headers:{...t.headers}});return r.query&&(r.query=Rj(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return e.clone(this)}};function Rj(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ym=class{constructor(t){f(this,"statusCode");f(this,"reason");f(this,"headers");f(this,"body");this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Cj(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}Un.Field=Km;Un.Fields=Xm;Un.HttpRequest=Qm;Un.HttpResponse=Ym;Un.getHttpHandlerExtensionConfiguration=wj;Un.isValidHostname=Cj;Un.resolveHttpHandlerRuntimeConfig=bj});var pa=S(fa=>{"use strict";var Aj=we();function Tj(e){return e}var dR=e=>t=>async r=>{if(!Aj.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},fR={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ij=e=>({applyToStack:t=>{t.add(dR(e),fR)}});fa.getHostHeaderPlugin=Ij;fa.hostHeaderMiddleware=dR;fa.hostHeaderMiddlewareOptions=fR;fa.resolveHostHeaderConfig=Tj});var ha=S(Hu=>{"use strict";var pR=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??t.inputFilterSensitiveLog,d=u??t.outputFilterSensitiveLog,{$metadata:m,...g}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(g),metadata:m}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,u=c??t.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},hR={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Pj=e=>({applyToStack:t=>{t.add(pR(),hR)}});Hu.getLoggerPlugin=Pj;Hu.loggerMiddleware=pR;Hu.loggerMiddlewareOptions=hR});var gR={};jt(gR,{InvokeStore:()=>Oj});var mR,Jm,xj,ma,ju,Oj,ER=C(()=>{mR=require("async_hooks"),Jm=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Jm||(globalThis.awslambda=globalThis.awslambda||{});xj={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},ma=class{static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(ma,"storage",new mR.AsyncLocalStorage),f(ma,"PROTECTED_KEYS",xj);!Jm&&globalThis.awslambda?.InvokeStore?ju=globalThis.awslambda.InvokeStore:(ju=ma,!Jm&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=ju));Oj=ju});var yR=S(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.recursionDetectionMiddleware=void 0;var Nj=(ER(),se(gR)),Dj=we(),Zm="X-Amzn-Trace-Id",Lj="AWS_LAMBDA_FUNCTION_NAME",kj="_X_AMZN_TRACE_ID",Mj=()=>e=>async t=>{let{request:r}=t;if(!Dj.HttpRequest.isInstance(r))return e(t);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===Zm.toLowerCase())??Zm;if(r.headers.hasOwnProperty(n))return e(t);let s=process.env[Lj],i=process.env[kj],a=Nj.InvokeStore.getXRayTraceId()??i,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[Zm]=a),e({...t,request:r})};Vu.recursionDetectionMiddleware=Mj});var ga=S(zu=>{"use strict";var eg=yR(),qj={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Fj=e=>({applyToStack:t=>{t.add(eg.recursionDetectionMiddleware(),qj)}});zu.getRecursionDetectionPlugin=Fj;Object.keys(eg).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(zu,e)&&Object.defineProperty(zu,e,{enumerable:!0,get:function(){return eg[e]}})})});var tg,$j,SR=C(()=>{tg=T(nn()),$j=e=>e[tg.SMITHY_CONTEXT_KEY]||(e[tg.SMITHY_CONTEXT_KEY]={})});var Pt=S(rg=>{"use strict";var _R=nn(),Bj=e=>e[_R.SMITHY_CONTEXT_KEY]||(e[_R.SMITHY_CONTEXT_KEY]={}),Uj=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};rg.getSmithyContext=Bj;rg.normalizeProvider=Uj});var vR,wR=C(()=>{vR=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let s of e)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of e)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function Hj(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var bR,Ea,Wu=C(()=>{bR=T(Pt());wR();Ea=(e,t)=>(r,n)=>async s=>{let i=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,s.input)),o=e.authSchemePreference?await e.authSchemePreference():[],a=vR(i,o),c=Hj(e.httpAuthSchemes),u=(0,bR.getSmithyContext)(n),l=[];for(let d of a){let m=c.get(d.schemeId);if(!m){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let g=m.identityProvider(await t.identityProviderConfigProvider(e));if(!g){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:y={},signingProperties:w={}}=d.propertiesExtractor?.(e,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},y),d.signingProperties=Object.assign(d.signingProperties||{},w),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await g(d.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var RR,ya,CR=C(()=>{Wu();RR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},ya=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ea(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),RR)}})});var Sa=S(wi=>{"use strict";var jj=we(),AR=(e,t)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(jj.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:ng(/^x-[\w-]+-request-?id$/,u),extendedRequestId:ng(/^x-[\w-]+-id-2$/,u),cfId:ng(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},ng=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],TR=(e,t)=>(r,n)=>async s=>{let i=e,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await t(s.input,{...e,endpoint:o});return r({...s,request:a})},IR={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},PR={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Vj(e,t,r){return{applyToStack:n=>{n.add(AR(e,r),IR),n.add(TR(e,t),PR)}}}wi.deserializerMiddleware=AR;wi.deserializerMiddlewareOption=IR;wi.getSerdePlugin=Vj;wi.serializerMiddleware=TR;wi.serializerMiddlewareOption=PR});var xR,OR,zj,NR=C(()=>{xR=T(Sa());Wu();OR={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:xR.serializerMiddlewareOption.name},zj=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Ea(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),OR)}})});var DR=C(()=>{Wu();CR();NR()});var LR,kR,Wj,Gj,sg,ig=C(()=>{LR=T(we()),kR=T(Pt()),Wj=e=>t=>{throw t},Gj=(e,t)=>{},sg=e=>(t,r)=>async n=>{if(!LR.HttpRequest.isInstance(n.request))return t(n);let i=(0,kR.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await t({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||Wj)(o));return(c.successHandler||Gj)(u.response,o),u}});var MR,_a,qR=C(()=>{ig();MR={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},_a=e=>({applyToStack:t=>{t.addRelativeTo(sg(e),MR)}})});var FR=C(()=>{ig();qR()});var Hn,$R=C(()=>{Hn=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function BR(e,t,r,n,s){return async function*(o,a,...c){let u=a,l=o.startingToken??u[r],d=!0,m;for(;d;){if(u[r]=l,s&&(u[s]=u[s]??o.pageSize),o.client instanceof e)m=await Kj(t,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield m;let g=l;l=Xj(m,n),d=!!(l&&(!o.stopOnSameToken||l!==g))}return void 0}}var Kj,Xj,UR=C(()=>{Kj=async(e,t,r,n=i=>i,...s)=>{let i=new e(r);return i=n(i)??i,await t.send(i,...s)};Xj=(e,t)=>{let r=e,n=t.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var og=S(HR=>{"use strict";var Qj=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";HR.isArrayBuffer=Qj});var bi=S(cg=>{"use strict";var Yj=og(),ag=require("buffer"),Jj=(e,t=0,r=e.byteLength-t)=>{if(!Yj.isArrayBuffer(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return ag.Buffer.from(e,t,r)},Zj=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?ag.Buffer.from(e,t):ag.Buffer.from(e)};cg.fromArrayBuffer=Jj;cg.fromString=Zj});var jR=S(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.fromBase64=void 0;var e3=bi(),t3=/^[A-Za-z0-9+/]*={0,2}$/,r3=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!t3.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,e3.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Gu.fromBase64=r3});var dt=S(Ku=>{"use strict";var VR=bi(),zR=e=>{let t=VR.fromString(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},n3=e=>typeof e=="string"?zR(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),s3=e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return VR.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength).toString("utf8")};Ku.fromUtf8=zR;Ku.toUint8Array=n3;Ku.toUtf8=s3});var WR=S(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.toBase64=void 0;var i3=bi(),o3=dt(),a3=e=>{let t;if(typeof e=="string"?t=(0,o3.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,i3.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};Xu.toBase64=a3});var ft=S(va=>{"use strict";var GR=jR(),KR=WR();Object.keys(GR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(va,e)&&Object.defineProperty(va,e,{enumerable:!0,get:function(){return GR[e]}})});Object.keys(KR).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(va,e)&&Object.defineProperty(va,e,{enumerable:!0,get:function(){return KR[e]}})})});var lg=S(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.ChecksumStream=void 0;var c3=ft(),u3=require("stream"),ug=class extends u3.Duplex{constructor({expectedChecksum:r,checksum:n,source:s,checksumSourceLocation:i,base64Encoder:o}){super();f(this,"expectedChecksum");f(this,"checksumSourceLocation");f(this,"checksum");f(this,"source");f(this,"base64Encoder");if(typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??c3.toBase64,this.expectedChecksum=r,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(r){}_write(r,n,s){try{this.checksum.update(r),this.push(r)}catch(i){return s(i)}return s()}async _final(r){try{let n=await this.checksum.digest(),s=this.base64Encoder(n);if(this.expectedChecksum!==s)return r(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(n){return r(n)}return this.push(null),r()}};Qu.ChecksumStream=ug});var jn=S(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.isBlob=Ri.isReadableStream=void 0;var l3=e=>typeof ReadableStream=="function"&&(e?.constructor?.name===ReadableStream.name||e instanceof ReadableStream);Ri.isReadableStream=l3;var d3=e=>typeof Blob=="function"&&(e?.constructor?.name===Blob.name||e instanceof Blob);Ri.isBlob=d3});var XR=S(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.ChecksumStream=void 0;var f3=typeof ReadableStream=="function"?ReadableStream:function(){},dg=class extends f3{};Yu.ChecksumStream=dg});var QR=S(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.createChecksumStream=void 0;var p3=ft(),h3=jn(),m3=XR(),g3=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,h3.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??p3.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){t.update(c),u.enqueue(c)},async flush(c){let u=await t.digest(),l=i(u);if(e!==l){let d=new Error(`Checksum mismatch: expected "${e}" but received "${l}" in response header "${n}".`);c.error(d)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,m3.ChecksumStream.prototype),a};Ju.createChecksumStream=g3});var YR=S(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});fg.createChecksumStream=_3;var E3=jn(),y3=lg(),S3=QR();function _3(e){return typeof ReadableStream=="function"&&(0,E3.isReadableStream)(e.source)?(0,S3.createChecksumStream)(e):new y3.ChecksumStream(e)}});var hg=S(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.ByteArrayCollector=void 0;var pg=class{constructor(t){f(this,"allocByteArray");f(this,"byteLength",0);f(this,"byteArrays",[]);this.allocByteArray=t}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];t.set(s,r),r+=s.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Zu.ByteArrayCollector=pg});var t0=S(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.createBufferedReadable=void 0;sn.createBufferedReadableStream=JR;sn.merge=ZR;sn.flush=el;sn.sizeOf=Ci;sn.modeOf=e0;var v3=hg();function JR(e,t,r){let n=e.getReader(),s=!1,i=0,o=["",new v3.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:d}=await n.read(),m=l;if(d){if(a!==-1){let g=el(o,a);Ci(g)>0&&u.enqueue(g)}u.close()}else{let g=e0(m,!1);if(a!==g&&(a>=0&&u.enqueue(el(o,a)),a=g),a===-1){u.enqueue(m);return}let y=Ci(m);i+=y;let w=Ci(o[a]);if(y>=t&&w===0)u.enqueue(m);else{let I=ZR(o,a,m);!s&&i>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${y} is below threshold of ${t}, automatically buffering.`)),I>=t?u.enqueue(el(o,a)):await c(u)}}};return new ReadableStream({pull:c})}sn.createBufferedReadable=JR;function ZR(e,t,r){switch(t){case 0:return e[0]+=r,Ci(e[0]);case 1:case 2:return e[t].push(r),Ci(e[t])}}function el(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function Ci(e){return e?.byteLength??e?.length??0}function e0(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var n0=S(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.createBufferedReadable=R3;var w3=require("stream"),r0=hg(),on=t0(),b3=jn();function R3(e,t,r){if((0,b3.isReadableStream)(e))return(0,on.createBufferedReadableStream)(e,t,r);let n=new w3.Readable({read(){}}),s=!1,i=0,o=["",new r0.ByteArrayCollector(c=>new Uint8Array(c)),new r0.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let u=(0,on.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,on.flush)(o,a)),a=u),a===-1){n.push(c);return}let l=(0,on.sizeOf)(c);i+=l;let d=(0,on.sizeOf)(o[a]);if(l>=t&&d===0)n.push(c);else{let m=(0,on.merge)(o,a,c);!s&&i>t*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${t}, automatically buffering.`)),m>=t&&n.push((0,on.flush)(o,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,on.flush)(o,a);(0,on.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var s0=S(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.getAwsChunkedEncodingStream=void 0;var C3=require("stream"),A3=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,e):void 0,u=new C3.Readable({read:()=>{}});return e.on("data",l=>{let d=n(l)||0;u.push(`${d.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),e.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${i}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};tl.getAwsChunkedEncodingStream=A3});var i0=S(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.headStream=T3;async function T3(e,t){let r=0,n=[],s=e.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=t)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(t,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var o0=S(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.headStream=void 0;var I3=require("stream"),P3=i0(),x3=jn(),O3=(e,t)=>(0,x3.isReadableStream)(e)?(0,P3.headStream)(e,t):new Promise((r,n)=>{let s=new Eg;s.limit=t,e.pipe(s),e.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});rl.headStream=O3;var Eg=class extends I3.Writable{constructor(){super(...arguments);f(this,"buffers",[]);f(this,"limit",1/0);f(this,"bytesBuffered",0)}_write(r,n,s){if(this.buffers.push(r),this.bytesBuffered+=r.byteLength??0,this.bytesBuffered>=this.limit){let i=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-i),this.emit("finish")}s()}}});var Sg=S(yg=>{"use strict";var a0=e=>encodeURIComponent(e).replace(/[!'()*]/g,N3),N3=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,D3=e=>e.split("/").map(a0).join("/");yg.escapeUri=a0;yg.escapeUriPath=D3});var vg=S(c0=>{"use strict";var _g=Sg();function L3(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=_g.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${_g.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${_g.escapeUri(n)}`),t.push(s)}}return t.join("&")}c0.buildQueryString=L3});var Ls=S(wa=>{"use strict";var f0=we(),p0=vg(),nl=require("http"),sl=require("https"),h0=require("stream"),wg=require("http2"),k3=["ECONNRESET","EPIPE","ETIMEDOUT"],m0=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},xt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},u0=1e3,M3=(e,t,r=0)=>{if(!r)return-1;let n=s=>{let i=xt.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{xt.clearTimeout(i)}):xt.clearTimeout(i)};e.socket?o(e.socket):e.on("socket",o)};return r<2e3?(n(0),0):xt.setTimeout(n.bind(null,u0),u0)},q3=(e,t,r=0,n,s)=>r?xt.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});e.destroy(o),t(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,F3=3e3,$3=(e,{keepAlive:t,keepAliveMsecs:r},n=F3)=>{if(t!==!0)return-1;let s=()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",i=>{i.setKeepAlive(t,r||0)})};return n===0?(s(),0):xt.setTimeout(s,n)},l0=3e3,B3=(e,t,r=0)=>{let n=s=>{let i=r-s,o=()=>{e.destroy(),t(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};e.socket?(e.socket.setTimeout(i,o),e.on("close",()=>e.socket?.removeListener("timeout",o))):e.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):xt.setTimeout(n.bind(null,r===0?0:l0),l0)},d0=6e3;async function g0(e,t,r=d0,n=!1){let s=t.headers??{},i=s.Expect||s.expect,o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(xt.setTimeout(()=>c(!0),Math.max(d0,r)))}),new Promise(c=>{e.on("continue",()=>{xt.clearTimeout(o),c(!0)}),e.on("response",()=>{xt.clearTimeout(o),c(!1)}),e.on("error",()=>{xt.clearTimeout(o),c(!1)})})])),a&&U3(e,t.body)}function U3(e,t){if(t instanceof h0.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}var H3=0,bg=class e{constructor(t){f(this,"config");f(this,"configProvider");f(this,"socketWarningTimestamp",0);f(this,"externalAgent",!1);f(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(t))})}static create(t){return typeof t?.handle=="function"?t:new e(t)}static checkSocketUsage(t,r,n=console){let{sockets:s,requests:i,maxSockets:o}=t;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let u=s[c]?.length??0,l=i[c]?.length??0;if(u>=o&&l>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=t||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof nl.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new nl.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof sl.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new sl.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],u=async ie=>{await a,c.forEach(xt.clearTimeout),s(ie)},l=async ie=>{await a,c.forEach(xt.clearTimeout),i(ie)};if(r?.aborted){let ie=new Error("Request aborted");ie.name="AbortError",l(ie);return}let d=t.protocol==="https:",m=t.headers??{},g=(m.Expect??m.expect)==="100-continue",y=d?o.httpsAgent:o.httpAgent;g&&!this.externalAgent&&(y=new(d?sl.Agent:nl.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(xt.setTimeout(()=>{this.socketWarningTimestamp=e.checkSocketUsage(y,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let w=p0.buildQueryString(t.query||{}),I;if(t.username!=null||t.password!=null){let ie=t.username??"",Z=t.password??"";I=`${ie}:${Z}`}let A=t.path;w&&(A+=`?${w}`),t.fragment&&(A+=`#${t.fragment}`);let O=t.hostname??"";O[0]==="["&&O.endsWith("]")?O=t.hostname.slice(1,-1):O=t.hostname;let k={headers:t.headers,host:O,method:t.method,path:A,port:t.port,agent:y,auth:I},U=(d?sl.request:nl.request)(k,ie=>{let Z=new f0.HttpResponse({statusCode:ie.statusCode||-1,reason:ie.statusMessage,headers:m0(ie.headers),body:ie});u({response:Z})});if(U.on("error",ie=>{k3.includes(ie.code)?l(Object.assign(ie,{name:"TimeoutError"})):l(ie)}),r){let ie=()=>{U.destroy();let Z=new Error("Request aborted");Z.name="AbortError",l(Z)};if(typeof r.addEventListener=="function"){let Z=r;Z.addEventListener("abort",ie,{once:!0}),U.once("close",()=>Z.removeEventListener("abort",ie))}else r.onabort=ie}let ce=n??o.requestTimeout;c.push(M3(U,l,o.connectionTimeout)),c.push(q3(U,l,ce,o.throwOnRequestTimeout,o.logger??console)),c.push(B3(U,l,o.socketTimeout));let Je=k.agent;typeof Je=="object"&&"keepAlive"in Je&&c.push($3(U,{keepAlive:Je.keepAlive,keepAliveMsecs:Je.keepAliveMsecs})),a=g0(U,t,ce,this.externalAgent).catch(ie=>(c.forEach(xt.clearTimeout),i(ie)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},Rg=class{constructor(t){f(this,"sessions",[]);this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},Cg=class{constructor(t){f(this,"config");f(this,"sessionCache",new Map);if(this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){let n=this.getUrlString(t),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=wg.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new Rg;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},Ag=class e{constructor(t){f(this,"config");f(this,"configProvider");f(this,"metadata",{handlerProtocol:"h2"});f(this,"connectionManager",new Cg({}));this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(s=>{r(s||{})}).catch(n):r(t||{})})}static create(t){return typeof t?.handle=="function"?t:new e(t)}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let u=!1,l,d=async ve=>{await l,a(ve)},m=async ve=>{await l,c(ve)};if(r?.aborted){u=!0;let ve=new Error("Request aborted");ve.name="AbortError",m(ve);return}let{hostname:g,method:y,port:w,protocol:I,query:A}=t,O="";if(t.username!=null||t.password!=null){let ve=t.username??"",Ge=t.password??"";O=`${ve}:${Ge}@`}let k=`${I}//${O}${g}${w?`:${w}`:""}`,q={destination:new URL(k)},U=this.connectionManager.lease(q,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),ce=ve=>{i&&this.destroySession(U),u=!0,m(ve)},Je=p0.buildQueryString(A||{}),ie=t.path;Je&&(ie+=`?${Je}`),t.fragment&&(ie+=`#${t.fragment}`);let Z=U.request({...t.headers,[wg.constants.HTTP2_HEADER_PATH]:ie,[wg.constants.HTTP2_HEADER_METHOD]:y});if(U.ref(),Z.on("response",ve=>{let Ge=new f0.HttpResponse({statusCode:ve[":status"]||-1,headers:m0(ve),body:Z});u=!0,d({response:Ge}),i&&(U.close(),this.connectionManager.deleteSession(k,U))}),o&&Z.setTimeout(o,()=>{Z.close();let ve=new Error(`Stream timed out because of no activity for ${o} ms`);ve.name="TimeoutError",ce(ve)}),r){let ve=()=>{Z.close();let Ge=new Error("Request aborted");Ge.name="AbortError",ce(Ge)};if(typeof r.addEventListener=="function"){let Ge=r;Ge.addEventListener("abort",ve,{once:!0}),Z.once("close",()=>Ge.removeEventListener("abort",ve))}else r.onabort=ve}Z.on("frameError",(ve,Ge,vi)=>{ce(new Error(`Frame type id ${ve} in stream id ${vi} has failed with code ${Ge}.`))}),Z.on("error",ce),Z.on("aborted",()=>{ce(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${Z.rstCode}.`))}),Z.on("close",()=>{U.unref(),i&&U.destroy(),u||ce(new Error("Unexpected error: http2 request did not get a response"))}),l=g0(Z,t,o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},Tg=class extends h0.Writable{constructor(){super(...arguments);f(this,"bufferedBytes",[])}_write(r,n,s){this.bufferedBytes.push(r),s()}},j3=e=>V3(e)?z3(e):new Promise((t,r)=>{let n=new Tg;e.pipe(n),e.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));t(s)})}),V3=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream;async function z3(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of t)i.set(a,o),o+=a.length;return i}wa.DEFAULT_REQUEST_TIMEOUT=H3;wa.NodeHttp2Handler=Ag;wa.NodeHttpHandler=bg;wa.streamCollector=j3});var S0=S(ol=>{"use strict";var E0=we(),W3=vg(),G3=ft();function y0(e,t){return new Request(e,t)}function K3(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}var il={supported:void 0},Ig=class e{constructor(t){f(this,"config");f(this,"configProvider");typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),il.supported===void 0&&(il.supported=typeof Request<"u"&&"keepalive"in y0("https://[::1]"))}static create(t){return typeof t?.handle=="function"?t:new e(t)}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=t.path,c=W3.buildQueryString(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let u="";if(t.username!=null||t.password!=null){let O=t.username??"",k=t.password??"";u=`${O}:${k}@`}let{port:l,method:d}=t,m=`${t.protocol}//${u}${t.hostname}${l?`:${l}`:""}${a}`,g=d==="GET"||d==="HEAD"?void 0:t.body,y={body:g,headers:new Headers(t.headers),method:d,credentials:o};this.config?.cache&&(y.cache=this.config.cache),g&&(y.duplex="half"),typeof AbortController<"u"&&(y.signal=r),il.supported&&(y.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(y,this.config.requestInit(t));let w=()=>{},I=y0(m,y),A=[fetch(I).then(O=>{let k=O.headers,q={};for(let ce of k.entries())q[ce[0]]=ce[1];return O.body!=null?{response:new E0.HttpResponse({headers:q,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(ce=>({response:new E0.HttpResponse({headers:q,reason:O.statusText,statusCode:O.status,body:ce})}))}),K3(s)];return r&&A.push(new Promise((O,k)=>{let q=()=>{let U=new Error("Request aborted");U.name="AbortError",k(U)};if(typeof r.addEventListener=="function"){let U=r;U.addEventListener("abort",q,{once:!0}),w=()=>U.removeEventListener("abort",q)}else r.onabort=q})),Promise.race(A).finally(w)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},X3=async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):Q3(e):Y3(e);async function Q3(e){let t=await J3(e),r=G3.fromBase64(t);return new Uint8Array(r)}async function Y3(e){let t=[],r=e.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of t)i.set(a,o),o+=a.length;return i}function J3(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}ol.FetchHttpHandler=Ig;ol.keepAliveSupport=il;ol.streamCollector=X3});var Og=S(xg=>{"use strict";var _0={},Pg={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),_0[e]=t,Pg[t]=e}function Z3(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Pg)t[r/2]=Pg[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function e4(e){let t="";for(let r=0;r<e.byteLength;r++)t+=_0[e[r]];return t}xg.fromHex=Z3;xg.toHex=e4});var R0=S(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.sdkStreamMixin=void 0;var t4=S0(),r4=ft(),n4=Og(),s4=dt(),v0=jn(),w0="The stream has already been transformed.",i4=e=>{if(!b0(e)&&!(0,v0.isReadableStream)(e)){let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(w0);return t=!0,await(0,t4.streamCollector)(e)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,r4.toBase64)(i);if(s==="hex")return(0,n4.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,s4.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(t)throw new Error(w0);if(t=!0,b0(e))return n(e);if((0,v0.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};al.sdkStreamMixin=i4;var b0=e=>typeof Blob=="function"&&e instanceof Blob});var A0=S(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.sdkStreamMixin=void 0;var o4=Ls(),a4=bi(),Ng=require("stream"),c4=R0(),C0="The stream has already been transformed.",u4=e=>{if(!(e instanceof Ng.Readable))try{return(0,c4.sdkStreamMixin)(e)}catch{let s=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(C0);return t=!0,await(0,o4.streamCollector)(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,a4.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(t)throw new Error(C0);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Ng.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return t=!0,Ng.Readable.toWeb(e)}})};cl.sdkStreamMixin=u4});var T0=S(Dg=>{"use strict";Object.defineProperty(Dg,"__esModule",{value:!0});Dg.splitStream=l4;async function l4(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var x0=S(Lg=>{"use strict";Object.defineProperty(Lg,"__esModule",{value:!0});Lg.splitStream=f4;var I0=require("stream"),d4=T0(),P0=jn();async function f4(e){if((0,P0.isReadableStream)(e)||(0,P0.isBlob)(e))return(0,d4.splitStream)(e);let t=new I0.PassThrough,r=new I0.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var ba=S(it=>{"use strict";var O0=ft(),N0=dt(),D0=lg(),L0=YR(),k0=n0(),M0=s0(),q0=o0(),F0=A0(),$0=x0(),B0=jn(),kg=class e extends Uint8Array{static fromString(t,r="utf-8"){if(typeof t=="string")return r==="base64"?e.mutate(O0.fromBase64(t)):e.mutate(N0.fromUtf8(t));throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return t==="base64"?O0.toBase64(this):N0.toUtf8(this)}};it.Uint8ArrayBlobAdapter=kg;Object.keys(D0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return D0[e]}})});Object.keys(L0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return L0[e]}})});Object.keys(k0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return k0[e]}})});Object.keys(M0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return M0[e]}})});Object.keys(q0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return q0[e]}})});Object.keys(F0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return F0[e]}})});Object.keys($0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return $0[e]}})});Object.keys(B0).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(it,e)&&Object.defineProperty(it,e,{enumerable:!0,get:function(){return B0[e]}})})});var ul,Rr,ll=C(()=>{ul=T(ba()),Rr=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return ul.Uint8ArrayBlobAdapter.mutate(e);if(!e)return ul.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return ul.Uint8ArrayBlobAdapter.mutate(await r)}});function Ur(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var dl=C(()=>{});var Cr,Mg=C(()=>{Cr=e=>typeof e=="function"?e():e});var Ra,fl=C(()=>{Ra=(e,t,r,n,s)=>({name:t,namespace:e,traits:r,input:n,output:s})});var U0,H0,j0,qg,V0=C(()=>{U0=T(we()),H0=T(Pt());fl();j0=e=>(t,r)=>async n=>{let{response:s}=await t(n),{operationSchema:i}=(0,H0.getSmithyContext)(r),[,o,a,c,u,l]=i??[];try{let d=await e.protocol.deserializeResponse(Ra(o,a,c,u,l),{...e,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s}),!("$metadata"in d)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(U0.HttpResponse.isInstance(s)){let{headers:g={}}=s,y=Object.entries(g);d.$metadata={httpStatusCode:s.statusCode,requestId:qg(/^x-[\w-]+-request-?id$/,y),extendedRequestId:qg(/^x-[\w-]+-id-2$/,y),cfId:qg(/^x-[\w-]+-cf-id$/,y)}}}catch{}}throw d}},qg=(e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1]});var z0,W0,G0=C(()=>{z0=T(Pt());fl();W0=e=>(t,r)=>async n=>{let{operationSchema:s}=(0,z0.getSmithyContext)(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&e.urlParser?async()=>e.urlParser(r.endpointV2.url):e.endpoint,d=await e.protocol.serializeRequest(Ra(i,o,a,c,u),n.input,{...e,...r,endpoint:l});return t({...n,request:d})}});function Fg(e){return{applyToStack:t=>{t.add(W0(e),X0),t.add(j0(e),K0),e.protocol.setSerdeContext(e)}}}var K0,X0,Q0=C(()=>{V0();G0();K0={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},X0={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var Ke,Vn=C(()=>{Ke=class{constructor(){f(this,"name");f(this,"namespace");f(this,"traits")}static assign(t,r){return Object.assign(t,r)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var hl,pl,p4,Y0=C(()=>{Vn();hl=class hl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"valueSchema");f(this,"symbol",hl.symbol)}};f(hl,"symbol",Symbol.for("@smithy/lis"));pl=hl,p4=(e,t,r,n)=>Ke.assign(new pl,{name:t,namespace:e,traits:r,valueSchema:n})});var gl,ml,h4,J0=C(()=>{Vn();gl=class gl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"keySchema");f(this,"valueSchema");f(this,"symbol",gl.symbol)}};f(gl,"symbol",Symbol.for("@smithy/map"));ml=gl,h4=(e,t,r,n,s)=>Ke.assign(new ml,{name:t,namespace:e,traits:r,keySchema:n,valueSchema:s})});var yl,El,m4,Z0=C(()=>{Vn();yl=class yl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"input");f(this,"output");f(this,"symbol",yl.symbol)}};f(yl,"symbol",Symbol.for("@smithy/ope"));El=yl,m4=(e,t,r,n,s)=>Ke.assign(new El,{name:t,namespace:e,traits:r,input:n,output:s})});var Sl,Ai,g4,$g=C(()=>{Vn();Sl=class Sl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"memberNames");f(this,"memberList");f(this,"symbol",Sl.symbol)}};f(Sl,"symbol",Symbol.for("@smithy/str"));Ai=Sl,g4=(e,t,r,n,s)=>Ke.assign(new Ai,{name:t,namespace:e,traits:r,memberNames:n,memberList:s})});var vl,_l,E4,eC=C(()=>{Vn();$g();vl=class vl extends Ai{constructor(){super(...arguments);f(this,"ctor");f(this,"symbol",vl.symbol)}};f(vl,"symbol",Symbol.for("@smithy/err"));_l=vl,E4=(e,t,r,n,s,i)=>Ke.assign(new _l,{name:t,namespace:e,traits:r,memberNames:n,memberList:s,ctor:null})});function Hr(e){if(typeof e=="object")return e;e=e|0;let t={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(e>>r++&1)===1&&(t[n]=1);return t}var Bg=C(()=>{});function Ca(e,t){if(e instanceof V)return Object.assign(e,{memberName:t,_isMemberSchema:!0});let r=V;return new r(e,t)}var zn,V,Ug,tC,rC=C(()=>{Mg();Bg();zn=class zn{constructor(t,r){f(this,"ref");f(this,"memberName");f(this,"symbol",zn.symbol);f(this,"name");f(this,"schema");f(this,"_isMemberSchema");f(this,"traits");f(this,"memberTraits");f(this,"normalizedTraits");this.ref=t,this.memberName=r;let n=[],s=t,i=t;for(this._isMemberSchema=!1;Ug(s);)n.push(s[1]),s=s[0],i=Cr(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,Hr(a))}}else this.memberTraits=0;if(i instanceof zn){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Cr(i),tC(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](t){let r=this.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===this.symbol:r}static of(t){let r=Cr(t);if(r instanceof zn)return r;if(Ug(r)){let[n,s]=r;if(n instanceof zn)return Object.assign(n.getMergedTraits(),Hr(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(t,null,2)}.`)}return new zn(r)}getSchema(){let t=this.schema;return t[0]===0?t[4]:t}getName(t=!1){let{name:r}=this;return!t&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=64&&t<128:t[0]===1}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=128&&t<=255:t[0]===2}isStructSchema(){let t=this.getSchema();return t[0]===3||t[0]===-3}isBlobSchema(){let t=this.getSchema();return t===21||t===42}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=4&&t<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:t}=this.getMergedTraits();return!!t||this.getSchema()===42}isIdempotencyToken(){let t=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return t(r)||t(n)||t(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return Hr(this.memberTraits)}getOwnTraits(){return Hr(this.traits)}getKeySchema(){let[t,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!t&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=t?15:n[4]??0;return Ca([s,0],"key")}getValueSchema(){let t=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof t=="number"?63&t:t&&typeof t=="object"&&(n||s)?t[3+t[0]]:r?15:void 0;if(i!=null)return Ca([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(t){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(t)){let n=r[4].indexOf(t),s=r[5][n];return Ca(Ug(s)?s:[s,0],t)}if(this.isDocumentSchema())return Ca([15,0],t);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${t}.`)}getMemberSchemas(){let t={};try{for(let[r,n]of this.structIterator())t[r]=n}catch{}return t}getEventStreamMember(){if(this.isStructSchema()){for(let[t,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return t}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let t=this.getSchema();for(let r=0;r<t[4].length;++r)yield[t[4][r],Ca([t[5][r],0],t[4][r])]}};f(zn,"symbol",Symbol.for("@smithy/nor"));V=zn;Ug=e=>Array.isArray(e)&&e.length===2,tC=e=>Array.isArray(e)&&e.length>=5});var wl,Aa,y4,S4,nC=C(()=>{Vn();wl=class wl extends Ke{constructor(){super(...arguments);f(this,"name");f(this,"schemaRef");f(this,"traits");f(this,"symbol",wl.symbol)}};f(wl,"symbol",Symbol.for("@smithy/sim"));Aa=wl,y4=(e,t,r,n)=>Ke.assign(new Aa,{name:t,namespace:e,traits:n,schemaRef:r}),S4=(e,t,r,n)=>Ke.assign(new Aa,{name:t,namespace:e,traits:r,schemaRef:n})});var _4,sC=C(()=>{_4={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var jr,le,iC=C(()=>{jr=class jr{constructor(t,r=new Map,n=new Map){f(this,"namespace");f(this,"schemas");f(this,"exceptions");this.namespace=t,this.schemas=r,this.exceptions=n}static for(t){return jr.registries.has(t)||jr.registries.set(t,new jr(t)),jr.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);jr.for(n.split("#")[0]).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(t,r){let n=t,s=jr.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(t){let r=t;return jr.for(r[1]).exceptions.get(r)}getBaseException(){for(let t of this.exceptions.keys())if(Array.isArray(t)){let[,r,n]=t,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return t}}find(t){return[...this.schemas.values()].find(t)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}};f(jr,"registries",new Map);le=jr});var bl={};jt(bl,{ErrorSchema:()=>_l,ListSchema:()=>pl,MapSchema:()=>ml,NormalizedSchema:()=>V,OperationSchema:()=>El,SCHEMA:()=>_4,Schema:()=>Ke,SimpleSchema:()=>Aa,StructureSchema:()=>Ai,TypeRegistry:()=>le,deref:()=>Cr,deserializerMiddlewareOption:()=>K0,error:()=>E4,getSchemaSerdePlugin:()=>Fg,isStaticSchema:()=>tC,list:()=>p4,map:()=>h4,op:()=>m4,operation:()=>Ra,serializerMiddlewareOption:()=>X0,sim:()=>y4,simAdapter:()=>S4,struct:()=>g4,translateTraits:()=>Hr});var Pe=C(()=>{Mg();Q0();Y0();J0();Z0();fl();eC();rC();Vn();nC();$g();sC();Bg();iC()});var v4,oC=C(()=>{v4=(e,t,r=n=>n)=>e});var w4,b4,Ta,R4,Rl,Ia,C4,Hg,jg,Vg,zg,A4,T4,aC,I4,P4,Al,x4,Wg,O4,Ti,Gg,N4,D4,L4,cC,uC,k4,M4,ks,Kg,Cl,Pa,Xg=C(()=>{w4=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},b4=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Pa.warn(Cl(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Pa.warn(Cl(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Ta=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Pa.warn(Cl(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},R4=Math.ceil(34028234663852886e22),Rl=e=>{let t=Ta(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>R4)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Ia=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},C4=Ia,Hg=e=>zg(e,32),jg=e=>zg(e,16),Vg=e=>zg(e,8),zg=(e,t)=>{let r=Ia(e);if(r!==void 0&&A4(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},A4=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},T4=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},aC=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},I4=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Pa.warn(Cl(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},P4=e=>{if(e==null)return;let t=aC(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Al=e=>Ta(typeof e=="string"?Ti(e):e),x4=Al,Wg=e=>Rl(typeof e=="string"?Ti(e):e),O4=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ti=e=>{let t=e.match(O4);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Gg=e=>typeof e=="string"?cC(e):Ta(e),N4=Gg,D4=Gg,L4=e=>typeof e=="string"?cC(e):Rl(e),cC=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},uC=e=>Ia(typeof e=="string"?Ti(e):e),k4=uC,M4=e=>Hg(typeof e=="string"?Ti(e):e),ks=e=>jg(typeof e=="string"?Ti(e):e),Kg=e=>Vg(typeof e=="string"?Ti(e):e),Cl=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Pa={warn:console.warn}});function Oa(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${q4[n]}, ${c} ${Yg[r]} ${t} ${u}:${l}:${d} GMT`}var q4,Yg,F4,$4,B4,Jg,U4,H4,j4,Zg,eE,xa,V4,z4,W4,Qg,G4,K4,X4,Vr,Q4,Y4,Ii,lC=C(()=>{Xg();q4=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Yg=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];F4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),$4=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=F4.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u]=t,l=ks(Ii(n)),d=Vr(s,"month",1,12),m=Vr(i,"day",1,31);return xa(l,d,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},B4=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Jg=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=B4.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u,l]=t,d=ks(Ii(n)),m=Vr(s,"month",1,12),g=Vr(i,"day",1,31),y=xa(d,m,g,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&y.setTime(y.getTime()-Y4(l)),y},U4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),H4=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),j4=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Zg=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=U4.exec(e);if(t){let[r,n,s,i,o,a,c,u]=t;return xa(ks(Ii(i)),Qg(s),Vr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(t=H4.exec(e),t){let[r,n,s,i,o,a,c,u]=t;return W4(xa(V4(i),Qg(s),Vr(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(t=j4.exec(e),t){let[r,n,s,i,o,a,c,u]=t;return xa(ks(Ii(u)),Qg(n),Vr(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},eE=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Al(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},xa=(e,t,r,n)=>{let s=t-1;return K4(e,s,r),new Date(Date.UTC(e,s,r,Vr(n.hours,"hour",0,23),Vr(n.minutes,"minute",0,59),Vr(n.seconds,"seconds",0,60),Q4(n.fractionalMilliseconds)))},V4=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+ks(Ii(e));return r<t?r+100:r},z4=50*365*24*60*60*1e3,W4=e=>e.getTime()-new Date().getTime()>z4?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Qg=e=>{let t=Yg.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},G4=[31,28,31,30,31,30,31,31,30,31,30,31],K4=(e,t,r)=>{let n=G4[t];if(t===1&&X4(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Yg[t]} in ${e}: ${r}`)},X4=e=>e%4===0&&(e%100!==0||e%400===0),Vr=(e,t,r,n)=>{let s=Kg(Ii(e));if(s<r||s>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return s},Q4=e=>e==null?0:Wg("0."+e)*1e3,Y4=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),s=Number(e.substring(4,6));return r*(n*60+s)*60*1e3},Ii=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Na={};jt(Na,{__addDisposableResource:()=>kC,__assign:()=>Tl,__asyncDelegator:()=>TC,__asyncGenerator:()=>AC,__asyncValues:()=>IC,__await:()=>Pi,__awaiter:()=>_C,__classPrivateFieldGet:()=>NC,__classPrivateFieldIn:()=>LC,__classPrivateFieldSet:()=>DC,__createBinding:()=>Pl,__decorate:()=>pC,__disposeResources:()=>MC,__esDecorate:()=>mC,__exportStar:()=>wC,__extends:()=>dC,__generator:()=>vC,__importDefault:()=>OC,__importStar:()=>xC,__makeTemplateObject:()=>PC,__metadata:()=>SC,__param:()=>hC,__propKey:()=>EC,__read:()=>nE,__rest:()=>fC,__rewriteRelativeImportExtension:()=>qC,__runInitializers:()=>gC,__setFunctionName:()=>yC,__spread:()=>bC,__spreadArray:()=>CC,__spreadArrays:()=>RC,__values:()=>Il,default:()=>eV});function dC(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tE(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function fC(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function pC(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function hC(e,t){return function(r,n){t(r,n,e)}}function mC(e,t,r,n,s,i){function o(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,l=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,m=!1,g=r.length-1;g>=0;g--){var y={};for(var w in n)y[w]=w==="access"?{}:n[w];for(var w in n.access)y.access[w]=n.access[w];y.addInitializer=function(A){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(A||null))};var I=(0,r[g])(a==="accessor"?{get:l.get,set:l.set}:l[c],y);if(a==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(d=o(I.get))&&(l.get=d),(d=o(I.set))&&(l.set=d),(d=o(I.init))&&s.unshift(d)}else(d=o(I))&&(a==="field"?s.unshift(d):l[c]=d)}u&&Object.defineProperty(u,n.name,l),m=!0}function gC(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function EC(e){return typeof e=="symbol"?e:"".concat(e)}function yC(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function SC(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function _C(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function vC(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function wC(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pl(t,e,r)}function Il(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function nE(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function bC(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(nE(arguments[t]));return e}function RC(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function CC(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Pi(e){return this instanceof Pi?(this.v=e,this):new Pi(e)}function AC(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(y){return Promise.resolve(y).then(g,d)}}function a(g,y){n[g]&&(s[g]=function(w){return new Promise(function(I,A){i.push([g,w,I,A])>1||c(g,w)})},y&&(s[g]=y(s[g])))}function c(g,y){try{u(n[g](y))}catch(w){m(i[0][3],w)}}function u(g){g.value instanceof Pi?Promise.resolve(g.value.v).then(l,d):m(i[0][2],g)}function l(g){c("next",g)}function d(g){c("throw",g)}function m(g,y){g(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function TC(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:Pi(e[s](o)),done:!1}:i?i(o):o}:i}}function IC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Il=="function"?Il(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function PC(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function xC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=rE(e),n=0;n<r.length;n++)r[n]!=="default"&&Pl(t,e,r[n]);return J4(t,e),t}function OC(e){return e&&e.__esModule?e:{default:e}}function NC(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function DC(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function LC(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function kC(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function MC(e){function t(i){e.error=e.hasError?new Z4(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function qC(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}var tE,Tl,Pl,J4,rE,Z4,eV,Da=C(()=>{tE=function(e,t){return tE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},tE(e,t)};Tl=function(){return Tl=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Tl.apply(this,arguments)};Pl=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};J4=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},rE=function(e){return rE=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},rE(e)};Z4=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};eV={__extends:dC,__assign:Tl,__rest:fC,__decorate:pC,__param:hC,__esDecorate:mC,__runInitializers:gC,__propKey:EC,__setFunctionName:yC,__metadata:SC,__awaiter:_C,__generator:vC,__createBinding:Pl,__exportStar:wC,__values:Il,__read:nE,__spread:bC,__spreadArrays:RC,__spreadArray:CC,__await:Pi,__asyncGenerator:AC,__asyncDelegator:TC,__asyncValues:IC,__makeTemplateObject:PC,__importStar:xC,__importDefault:OC,__classPrivateFieldGet:NC,__classPrivateFieldSet:DC,__classPrivateFieldIn:LC,__addDisposableResource:kC,__disposeResources:MC,__rewriteRelativeImportExtension:qC}});var $C=S(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.randomUUID=void 0;var tV=(Da(),se(Na)),FC=tV.__importDefault(require("crypto"));xl.randomUUID=FC.default.randomUUID.bind(FC.default)});var sE=S(UC=>{"use strict";var BC=$C(),Et=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),rV=()=>{if(BC.randomUUID)return BC.randomUUID();let e=new Uint8Array(16);return crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128,Et[e[0]]+Et[e[1]]+Et[e[2]]+Et[e[3]]+"-"+Et[e[4]]+Et[e[5]]+"-"+Et[e[6]]+Et[e[7]]+"-"+Et[e[8]]+Et[e[9]]+"-"+Et[e[10]]+Et[e[11]]+Et[e[12]]+Et[e[13]]+Et[e[14]]+Et[e[15]]};UC.v4=rV});var zr,HC=C(()=>{zr=T(sE())});var Ot,jC=C(()=>{Ot=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ot.from=e=>e&&typeof e=="object"&&(e instanceof Ot||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ot(String(e)):Ot(JSON.stringify(e));Ot.fromObject=Ot.from});function iE(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var VC=C(()=>{});function an(e,t,r){let n=Number(e);if(n<t||n>r)throw new Error(`Value ${n} out of range [${t}, ${r}]`)}var oE,aE,cE,zC,WC,nV,sV,iV,oV,aV,La,uE,lE,GC=C(()=>{oE="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",aE="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",cE="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",zC="(\\d?\\d)",WC="(\\d{4})",nV=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),sV=new RegExp(`^${oE}, ${zC} ${aE} ${WC} ${cE} GMT$`),iV=new RegExp(`^${oE}, ${zC}-${aE}-(\\d\\d) ${cE} GMT$`),oV=new RegExp(`^${oE} ${aE} ( [1-9]|\\d\\d) ${cE} ${WC}$`),aV=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],La=e=>{if(e==null)return;let t=NaN;if(typeof e=="number")t=e;else if(typeof e=="string"){if(!/^-?\d*\.?\d+$/.test(e))throw new TypeError("parseEpochTimestamp - numeric string invalid.");t=Number.parseFloat(e)}else typeof e=="object"&&e.tag===1&&(t=e.value);if(isNaN(t)||Math.abs(t)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(t*1e3))},uE=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC3339 timestamps must be strings");let t=nV.exec(e);if(!t)throw new TypeError(`Invalid RFC3339 timestamp format ${e}`);let[,r,n,s,i,o,a,,c,u]=t;an(n,1,12),an(s,1,31),an(i,0,23),an(o,0,59),an(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,d,m,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],y=d==="-"?1:-1;l.setTime(l.getTime()+y*(Number(m)*60*60*1e3+Number(g)*60*1e3))}return l},lE=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC7231 timestamps must be strings.");let t,r,n,s,i,o,a,c;if((c=sV.exec(e))?[,t,r,n,s,i,o,a]=c:(c=iV.exec(e))?([,t,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=oV.exec(e))&&([,r,t,s,i,o,a,n]=c),n&&o){let u=Date.UTC(Number(n),aV.indexOf(r),Number(t),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);an(t,1,31),an(s,0,23),an(i,0,59),an(o,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${e}.`)}});function dE(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=t+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var KC=C(()=>{});var ka,XC=C(()=>{ka=e=>{let t=e.length,r=[],n=!1,s,i=0;for(let o=0;o<t;++o){let a=e[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(i,o)),i=o+1);break;default:}s=a}return r.push(e.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function fE(e){return new Be(String(e),"bigDecimal")}var QC,Be,YC=C(()=>{QC=/^-?\d*(\.\d+)?$/,Be=class e{constructor(t,r){f(this,"string");f(this,"type");if(this.string=t,this.type=r,!QC.test(t))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return e.prototype.isPrototypeOf(t)||r.type==="bigDecimal"&&QC.test(r.string)}}});var JC={};jt(JC,{LazyJsonString:()=>Ot,NumericValue:()=>Be,_parseEpochTimestamp:()=>La,_parseRfc3339DateTimeWithOffset:()=>uE,_parseRfc7231DateTime:()=>lE,copyDocumentWithTransform:()=>v4,dateToUtcString:()=>Oa,expectBoolean:()=>b4,expectByte:()=>Vg,expectFloat32:()=>Rl,expectInt:()=>C4,expectInt32:()=>Hg,expectLong:()=>Ia,expectNonNull:()=>T4,expectNumber:()=>Ta,expectObject:()=>aC,expectShort:()=>jg,expectString:()=>I4,expectUnion:()=>P4,generateIdempotencyToken:()=>zr.v4,handleFloat:()=>N4,limitedParseDouble:()=>Gg,limitedParseFloat:()=>D4,limitedParseFloat32:()=>L4,logger:()=>Pa,nv:()=>fE,parseBoolean:()=>w4,parseEpochTimestamp:()=>eE,parseRfc3339DateTime:()=>$4,parseRfc3339DateTimeWithOffset:()=>Jg,parseRfc7231DateTime:()=>Zg,quoteHeader:()=>iE,splitEvery:()=>dE,splitHeader:()=>ka,strictParseByte:()=>Kg,strictParseDouble:()=>Al,strictParseFloat:()=>x4,strictParseFloat32:()=>Wg,strictParseInt:()=>k4,strictParseInt32:()=>M4,strictParseLong:()=>uC,strictParseShort:()=>ks});var Vt=C(()=>{oC();lC();HC();jC();Xg();VC();GC();KC();XC();YC()});var Nt,xi=C(()=>{Nt=class{constructor(){f(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}});var ZC,pE,eA=C(()=>{ZC=T(dt()),pE=class{constructor({marshaller:t,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){f(this,"marshaller");f(this,"serializer");f(this,"deserializer");f(this,"serdeContext");f(this,"defaultContentType");this.marshaller=t,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:t,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let d={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:d,body:m}}for await(let d of t)yield d}};return s.serialize(l,d=>{if(d[u])return{headers:d.headers,body:d.body};let m=Object.keys(d).find(O=>O!=="__type")??"",{additionalHeaders:g,body:y,eventType:w,explicitPayloadContentType:I}=this.writeEventBody(m,o,d);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:I??c},...g},body:y}})}async deserializeEventStream({response:t,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(t.body,async m=>{let g=Object.keys(m).find(y=>y!=="__type")??"";if(g==="initial-response"){let y=await this.deserializer.read(r,m[g].body);return delete y[i],{[c]:!0,...y}}else if(g in a){let y=a[g];return{[g]:await this.deserializer.read(y,m[g].body)}}else return{$unknown:m}}),l=u[Symbol.asyncIterator](),d=await l.next();if(d.done)return u;if(d.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,g]of Object.entries(d.value))n[m]=g}return{async*[Symbol.asyncIterator](){for(d?.value?.[c]||(yield d.value);;){let{done:m,value:g}=await l.next();if(m)break;yield g}}}}writeEventBody(t,r,n){let s=this.serializer,i=t,o=null,a,c=r.getSchema()[4].includes(t),u={};if(c){let m=r.getMemberSchema(t);if(m.isStructSchema()){for(let[g,y]of m.structIterator()){let{eventHeader:w,eventPayload:I}=y.getMergedTraits();if(I){o=g;break}else if(w){let A=n[t][g],O="binary";y.isNumericSchema()?(-2)**31<=A&&A<=2**31-1?O="integer":O="long":y.isTimestampSchema()?O="timestamp":y.isStringSchema()?O="string":y.isBooleanSchema()&&(O="boolean"),A!=null&&(u[g]={type:O,value:A},delete n[t][g])}}if(o!==null){let g=m.getMemberSchema(o);g.isBlobSchema()?a="application/octet-stream":g.isStringSchema()&&(a="text/plain"),s.write(g,n[t][o])}else s.write(m,n[t])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,g]=n[t];i=m,s.write(15,g)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??ZC.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var tA={};jt(tA,{EventStreamSerde:()=>pE});var rA=C(()=>{eA()});var Ol,Ms,Nl=C(()=>{Pe();Ol=T(we());xi();Ms=class extends Nt{constructor(r){super();f(this,"options");this.options=r}getRequestType(){return Ol.HttpRequest}getResponseType(){return Ol.HttpResponse}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(let[s,i]of n.url.searchParams.entries())r.query[s]=i;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,s){let i=V.of(n.input),o=Hr(n.traits??{});if(o.endpoint){let a=o.endpoint?.[0];if(typeof a=="string"){let c=[...i.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of c){let l=s[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);a=a.replace(`{${u}}`,l)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:r}=await Promise.resolve().then(()=>(rA(),tA));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,s,i,o){return[]}getEventStreamMarshaller(){let r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}});var nA,sA,qs,iA=C(()=>{Pe();Vt();nA=T(we()),sA=T(ba());ll();dl();Nl();qs=class extends Ms{async serializeRequest(t,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=V.of(t?.input),l=u.getSchema(),d=!1,m,g=new nA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(g,c),this.setHostPrefix(g,t,s);let y=Hr(t.traits);if(y.http){g.method=y.http[0];let[w,I]=y.http[1].split("?");g.path=="/"?g.path=w:g.path+=w;let A=new URLSearchParams(I??"");Object.assign(o,Object.fromEntries(A))}}for(let[y,w]of u.structIterator()){let I=w.getMergedTraits()??{},A=s[y];if(A!=null)if(I.httpPayload)w.isStreaming()?w.isStructSchema()?s[y]&&(m=await this.serializeEventStream({eventStream:s[y],requestSchema:u})):m=A:(i.write(w,A),m=i.flush()),delete s[y];else if(I.httpLabel){i.write(w,A);let O=i.flush();g.path.includes(`{${y}+}`)?g.path=g.path.replace(`{${y}+}`,O.split("/").map(Ur).join("/")):g.path.includes(`{${y}}`)&&(g.path=g.path.replace(`{${y}}`,Ur(O))),delete s[y]}else if(I.httpHeader)i.write(w,A),a[I.httpHeader.toLowerCase()]=String(i.flush()),delete s[y];else if(typeof I.httpPrefixHeaders=="string"){for(let[O,k]of Object.entries(A)){let q=I.httpPrefixHeaders+O;i.write([w.getValueSchema(),{httpHeader:q}],k),a[q.toLowerCase()]=i.flush()}delete s[y]}else I.httpQuery||I.httpQueryParams?(this.serializeQuery(w,A,o),delete s[y]):d=!0}return d&&s&&(i.write(l,s),m=i.flush()),g.headers=a,g.query=o,g.body=m,g}serializeQuery(t,r,n){let s=this.serializer,i=t.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=t.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(t.isListSchema()){let o=!!t.getMergedTraits().sparse,a=[];for(let c of r){s.write([t.getValueSchema(),i],c);let u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([t,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(t,r,n){let s=this.deserializer,i=V.of(t.output),o={};if(n.statusCode>=300){let c=await Rr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(t,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await Rr(n.body,r);if(c.byteLength>0){let u=await s.read(i,c);for(let l of a)o[l]=u[l]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(t,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=V.of(t),u=[];for(let[l,d]of c.structIterator()){let m=d.getMemberTraits();if(m.httpPayload){if(d.isStreaming())d.isStructSchema()?o[l]=await this.deserializeEventStream({response:n,responseSchema:c}):o[l]=(0,sA.sdkStreamMixin)(n.body);else if(n.body){let y=await Rr(n.body,r);y.byteLength>0&&(o[l]=await a.read(d,y))}}else if(m.httpHeader){let g=String(m.httpHeader).toLowerCase(),y=n.headers[g];if(y!=null)if(d.isListSchema()){let w=d.getValueSchema();w.getMergedTraits().httpHeader=g;let I;w.isTimestampSchema()&&w.getSchema()===4?I=dE(y,",",2):I=ka(y);let A=[];for(let O of I)A.push(await a.read(w,O.trim()));o[l]=A}else o[l]=await a.read(d,y)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[g,y]of Object.entries(n.headers))if(g.startsWith(m.httpPrefixHeaders)){let w=d.getValueSchema();w.getMergedTraits().httpHeader=g,o[l][g.slice(m.httpPrefixHeaders.length)]=await a.read(w,y)}}else m.httpResponseCode?o[l]=n.statusCode:u.push(l)}return u}}});var oA,cn,aA=C(()=>{Pe();oA=T(we());ll();Nl();cn=class extends Ms{async serializeRequest(t,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=V.of(t?.input),u=c.getSchema(),l,d=new oA.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(d,a),this.setHostPrefix(d,t,r));let m={...r};if(r){let g=c.getEventStreamMember();if(g){if(m[g]){let y={};for(let[w,I]of c.structIterator())w!==g&&m[w]&&(s.write(I,m[w]),y[w]=s.flush());l=await this.serializeEventStream({eventStream:m[g],requestSchema:c,initialRequest:y})}}else s.write(u,m),l=s.flush()}return d.headers=o,d.query=i,d.body=l,d.method="POST",d}async deserializeResponse(t,r,n){let s=this.deserializer,i=V.of(t.output),o={};if(n.statusCode>=300){let c=await Rr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(t,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await Rr(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var hE,mE=C(()=>{dl();hE=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>Ur(a)).join("/"):Ur(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function gE(e,t){return new Dl(e,t)}var cA,Dl,uA=C(()=>{cA=T(we());mE();Dl=class{constructor(t,r){f(this,"input");f(this,"context");f(this,"query",{});f(this,"method","");f(this,"headers",{});f(this,"path","");f(this,"body",null);f(this,"hostname","");f(this,"resolvePathStack",[]);this.input=t,this.context=r}async build(){let{hostname:t,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new cA.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,s){return this.resolvePathStack.push(i=>{this.path=hE(i,this.input,t,r,n,s)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function Zt(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===5||e.getSchema()===6||e.getSchema()===7))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??t.timestampFormat.default}var Ll=C(()=>{});var EE,lA,Fs,yE=C(()=>{Pe();Vt();EE=T(ft()),lA=T(dt());xi();Ll();Fs=class extends Nt{constructor(r){super();f(this,"settings");this.settings=r}read(r,n){let s=V.of(r);if(s.isListSchema())return ka(n).map(i=>this.read(s.getValueSchema(),i));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??EE.fromBase64)(n);if(s.isTimestampSchema())switch(Zt(s,this.settings)){case 5:return uE(n);case 6:return lE(n);case 7:return La(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isStringSchema()){let i=s.getMergedTraits().mediaType,o=n;if(i)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(i==="application/json"||i.endsWith("+json"))&&(o=Ot.from(o)),o}return s.isNumericSchema()?Number(n):s.isBigIntegerSchema()?BigInt(n):s.isBigDecimalSchema()?new Be(n,"bigDecimal"):s.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??lA.toUtf8)((this.serdeContext?.base64Decoder??EE.fromBase64)(r))}}});var kl,$s,dA=C(()=>{Pe();kl=T(dt());xi();yE();$s=class extends Nt{constructor(r,n){super();f(this,"codecDeserializer");f(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new Fs(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){let s=V.of(r),i=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??kl.toUtf8;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(n));if(i.httpPayload){if(s.isBlobSchema()){let a=this.serdeContext?.utf8Decoder??kl.fromUtf8;return typeof n=="string"?a(n):n}else if(s.isStringSchema())return"byteLength"in n?o(n):n}return this.codecDeserializer.read(s,n)}}});var SE,Ma,_E=C(()=>{Pe();Vt();SE=T(ft());xi();Ll();Ma=class extends Nt{constructor(r){super();f(this,"settings");f(this,"stringBuffer","");this.settings=r}write(r,n){let s=V.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${s.getName(!0)}`);switch(Zt(s,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Oa(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??SE.toBase64)(n);return}if(s.isListSchema()&&Array.isArray(n)){let a="";for(let c of n){this.write([s.getValueSchema(),s.getMergedTraits()],c);let u=this.flush(),l=s.getValueSchema().isTimestampSchema()?u:iE(u);a!==""&&(a+=", "),a+=l}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":let i=s.getMergedTraits().mediaType,o=n;if(i&&((i==="application/json"||i.endsWith("+json"))&&(o=Ot.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??SE.toBase64)(o.toString());return}this.stringBuffer=n;break;default:this.stringBuffer=String(n)}}flush(){let r=this.stringBuffer;return this.stringBuffer="",r}}});var Bs,fA=C(()=>{Pe();_E();Bs=class{constructor(t,r,n=new Ma(r)){f(this,"codecSerializer");f(this,"stringSerializer");f(this,"buffer");this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=V.of(t),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var pA={};jt(pA,{FromStringShapeDeserializer:()=>Fs,HttpBindingProtocol:()=>qs,HttpInterceptingShapeDeserializer:()=>$s,HttpInterceptingShapeSerializer:()=>Bs,HttpProtocol:()=>Ms,RequestBuilder:()=>Dl,RpcProtocol:()=>cn,SerdeContext:()=>Nt,ToStringShapeSerializer:()=>Ma,collectBody:()=>Rr,determineTimestampFormat:()=>Zt,extendedEncodeURIComponent:()=>Ur,requestBuilder:()=>gE,resolvedPath:()=>hE});var zt=C(()=>{ll();dl();iA();Nl();aA();uA();mE();yE();dA();fA();_E();Ll();xi()});var hA=C(()=>{zt()});function cV(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var mA=C(()=>{});var Us,gA=C(()=>{Us=class{constructor(t){f(this,"authSchemes",new Map);for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var EA,vE,wE,yA=C(()=>{EA=T(we()),vE=T(nn()),wE=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=EA.HttpRequest.clone(t);if(n.in===vE.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===vE.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var SA,bE,_A=C(()=>{SA=T(we()),bE=class{async sign(t,r,n){let s=SA.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var un,vA=C(()=>{un=class{async sign(t,r,n){return t}}});var wA=C(()=>{yA();_A();vA()});var bA,uV,RE,Ml,CE,RA=C(()=>{bA=e=>function(r){return Ml(r)&&r.expiration.getTime()-Date.now()<e},uV=3e5,RE=bA(3e5),Ml=e=>e.expiration!==void 0,CE=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,s,i,o,a=!1,c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return t===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(t(s)&&await c(u),s):(a=!0,s))}});var CA=C(()=>{gA();wA();RA()});var Hs={};jt(Hs,{DefaultIdentityProviderConfig:()=>Us,EXPIRATION_MS:()=>uV,HttpApiKeyAuthSigner:()=>wE,HttpBearerAuthSigner:()=>bE,NoAuthSigner:()=>un,createIsIdentityExpiredFunction:()=>bA,createPaginator:()=>BR,doesIdentityRequireRefresh:()=>Ml,getHttpAuthSchemeEndpointRuleSetPlugin:()=>ya,getHttpAuthSchemePlugin:()=>zj,getHttpSigningPlugin:()=>_a,getSmithyContext:()=>$j,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>RR,httpAuthSchemeMiddleware:()=>Ea,httpAuthSchemeMiddlewareOptions:()=>OR,httpSigningMiddleware:()=>sg,httpSigningMiddlewareOptions:()=>MR,isIdentityExpired:()=>RE,memoizeIdentityProvider:()=>CE,normalizeProvider:()=>Hn,requestBuilder:()=>gE,setFeature:()=>cV});var Wt=C(()=>{SR();DR();FR();$R();UR();hA();mA();CA()});var Vs=S(js=>{"use strict";var TE=nn(),IE=class{constructor({size:t,params:r}){f(this,"capacity");f(this,"data",new Map);f(this,"parameters",[]);this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(t[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},lV=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),AA=e=>lV.test(e)||e.startsWith("[")&&e.endsWith("]"),dV=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),xE=(e,t=!1)=>{if(!t)return dV.test(e);let r=e.split(".");for(let n of r)if(!xE(n))return!1;return!0},PE={},qa="endpoints";function Wn(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Wn(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Wn).join(", ")})`:JSON.stringify(e,null,2)}var yt=class extends Error{constructor(t){super(t),this.name="EndpointError"}},fV=(e,t)=>e===t,pV=e=>{let t=e.split("."),r=[];for(let n of t){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new yt(`Path: '${e}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new yt(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},TA=(e,t)=>pV(t).reduce((r,n)=>{if(typeof r!="object")throw new yt(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),hV=e=>e!=null,mV=e=>!e,AE={[TE.EndpointURLScheme.HTTP]:80,[TE.EndpointURLScheme.HTTPS]:443},gV=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:m,port:g,protocol:y="",path:w="",query:I={}}=e,A=new URL(`${y}//${m}${g?`:${g}`:""}${w}`);return A.search=Object.entries(I).map(([O,k])=>`${O}=${k}`).join("&"),A}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;let c=o.slice(0,-1);if(!Object.values(TE.EndpointURLScheme).includes(c))return null;let u=AA(s),l=r.includes(`${n}:${AE[c]}`)||typeof e=="string"&&e.includes(`${n}:${AE[c]}`),d=`${n}${l?`:${AE[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},EV=(e,t)=>e===t,yV=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),SV=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),_V={booleanEquals:fV,getAttr:TA,isSet:hV,isValidHostLabel:xE,not:mV,parseURL:gV,stringEquals:EV,substring:yV,uriEncode:SV},IA=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},s=0;for(;s<e.length;){let i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));let o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);let a=e.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(TA(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},vV=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],ql=(e,t,r)=>{if(typeof e=="string")return IA(e,r);if(e.fn)return xA.callFunction(e,r);if(e.ref)return vV(e,r);throw new yt(`'${t}': ${String(e)} is not a string, function or reference.`)},PA=({fn:e,argv:t},r)=>{let n=t.map(i=>["boolean","number"].includes(typeof i)?i:xA.evaluateExpression(i,"arg",r)),s=e.split(".");return s[0]in PE&&s[1]!=null?PE[s[0]][s[1]](...n):_V[e](...n)},xA={evaluateExpression:ql,callFunction:PA},wV=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new yt(`'${e}' is already defined in Reference Record.`);let n=PA(t,r);return r.logger?.debug?.(`${qa} evaluateCondition: ${Wn(t)} = ${Wn(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},OE=(e=[],t)=>{let r={};for(let n of e){let{result:s,toAssign:i}=wV(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,t.logger?.debug?.(`${qa} assign: ${i.name} := ${Wn(i.value)}`))}return{result:!0,referenceRecord:r}},bV=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=ql(i,"Header value entry",t);if(typeof o!="string")throw new yt(`Header '${n}' value '${o}' is not a string`);return o})}),{}),OA=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:DA.getEndpointProperty(s,t)}),{}),NA=(e,t)=>{if(Array.isArray(e))return e.map(r=>NA(r,t));switch(typeof e){case"string":return IA(e,t);case"object":if(e===null)throw new yt(`Unexpected endpoint property: ${e}`);return DA.getEndpointProperties(e,t);case"boolean":return e;default:throw new yt(`Unexpected endpoint property type: ${typeof e}`)}},DA={getEndpointProperty:NA,getEndpointProperties:OA},RV=(e,t)=>{let r=ql(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new yt(`Endpoint URL must be a string, got ${typeof r}`)},CV=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:s,referenceRecord:i}=OE(r,t);if(!s)return;let o={...t,referenceRecord:{...t.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return t.logger?.debug?.(`${qa} Resolving endpoint from template: ${Wn(n)}`),{...u!=null&&{headers:bV(u,o)},...c!=null&&{properties:OA(c,o)},url:RV(a,o)}},AV=(e,t)=>{let{conditions:r,error:n}=e,{result:s,referenceRecord:i}=OE(r,t);if(s)throw new yt(ql(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},LA=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=CV(r,t);if(n)return n}else if(r.type==="error")AV(r,t);else if(r.type==="tree"){let n=kA.evaluateTreeRule(r,t);if(n)return n}else throw new yt(`Unknown endpoint rule: ${r}`);throw new yt("Rules evaluation failed")},TV=(e,t)=>{let{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=OE(r,t);if(s)return kA.evaluateRules(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},kA={evaluateRules:LA,evaluateTreeRule:TV},IV=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:s,rules:i}=e;t.logger?.debug?.(`${qa} Initial EndpointParams: ${Wn(r)}`);let o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(let[u,l]of o)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new yt(`Missing required parameter: '${u}'`);let c=LA(i,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${qa} Resolved endpoint: ${Wn(c)}`),c};js.EndpointCache=IE;js.EndpointError=yt;js.customEndpointFunctions=PE;js.isIpAddress=AA;js.isValidHostLabel=xE;js.resolveEndpoint=IV});var qA=S(MA=>{"use strict";function PV(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}MA.parseQueryString=PV});var Gn=S($A=>{"use strict";var xV=qA(),FA=e=>{if(typeof e=="string")return FA(new URL(e));let{hostname:t,pathname:r,port:n,protocol:s,search:i}=e,o;return i&&(o=xV.parseQueryString(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};$A.parseUrl=FA});var Ni=S(Ar=>{"use strict";var Oi=Vs(),OV=Gn(),UA=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!UA(r))return!1;return!0}return!(!Oi.isValidHostLabel(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Oi.isIpAddress(e))},BA=":",NV="/",DV=e=>{let t=e.split(BA);if(t.length<6)return null;let[r,n,s,i,o,...a]=t;if(r!=="arn"||n===""||s===""||a.join(BA)==="")return null;let c=a.map(u=>u.split(NV)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},LV=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],kV="1.1",HA={partitions:LV,version:kV},jA=HA,VA="",zA=e=>{let{partitions:t}=jA;for(let n of t){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(let n of t){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},WA=(e,t="")=>{jA=e,VA=t},MV=()=>{WA(HA,"")},qV=()=>VA,GA={isVirtualHostableS3Bucket:UA,parseArn:DV,partition:zA};Oi.customEndpointFunctions.aws=GA;var FV=e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>KA(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},KA=e=>OV.parseUrl(e.url);Object.defineProperty(Ar,"EndpointError",{enumerable:!0,get:function(){return Oi.EndpointError}});Object.defineProperty(Ar,"isIpAddress",{enumerable:!0,get:function(){return Oi.isIpAddress}});Object.defineProperty(Ar,"resolveEndpoint",{enumerable:!0,get:function(){return Oi.resolveEndpoint}});Ar.awsEndpointFunctions=GA;Ar.getUserAgentPrefix=qV;Ar.partition=zA;Ar.resolveDefaultAwsRegionalEndpointsConfig=FV;Ar.setPartitionInfo=WA;Ar.toEndpointV1=KA;Ar.useDefaultPartitionInfo=MV});var Fl,Di,XA=C(()=>{Fl={warningEmitted:!1},Di=e=>{e&&!Fl.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(Fl.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Kn(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var QA=C(()=>{});function YA(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var JA=C(()=>{});function ZA(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var eT=C(()=>{});var Xn={};jt(Xn,{emitWarningIfUnsupportedVersion:()=>Di,setCredentialFeature:()=>Kn,setFeature:()=>YA,setTokenFeature:()=>ZA,state:()=>Fl});var Tr=C(()=>{XA();QA();JA();eT()});var tT,NE,rT=C(()=>{tT=T(we()),NE=e=>tT.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Li,DE=C(()=>{Li=e=>new Date(Date.now()+e)});var nT,sT=C(()=>{DE();nT=(e,t)=>Math.abs(Li(t).getTime()-e)>=3e5});var LE,iT=C(()=>{sT();LE=(e,t)=>{let r=Date.parse(e);return nT(r,t)?r-Date.now():t}});var kE=C(()=>{rT();DE();iT()});var oT,Fa,ki,Gt,ME,qE=C(()=>{oT=T(we());kE();Fa=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},ki=async e=>{let t=Fa("context",e.context),r=Fa("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],i=await Fa("signer",r.signer)(n),o=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},Gt=class{async sign(t,r,n){if(!oT.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await ki(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[d,m]=u.authSchemes;d?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await o.sign(t,{signingDate:Li(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let n=r.ServerTime??NE(r.$response);if(n){let s=Fa("config",t.config),i=s.systemClockOffset;s.systemClockOffset=LE(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=NE(t);if(n){let s=Fa("config",r.config);s.systemClockOffset=LE(n,s.systemClockOffset)}}},ME=Gt});var aT,$a,cT=C(()=>{aT=T(we());kE();qE();$a=class extends Gt{async sign(t,r,n){if(!aT.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await ki(n),l=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(t,{signingDate:Li(s.systemClockOffset),signingRegion:l,signingService:c})}}});var FE,uT=C(()=>{FE=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var $l,$E=C(()=>{$l=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var lT,dT,Mi,fT=C(()=>{uT();$E();lT="AWS_AUTH_SCHEME_PREFERENCE",dT="auth_scheme_preference",Mi={environmentVariableSelector:(e,t)=>{if(t?.signingName&&$l(t.signingName)in e)return["httpBearerAuth"];if(lT in e)return FE(e[lT])},configFileSelector:e=>{if(dT in e)return FE(e[dT])},default:[]}});var Dt=S(zs=>{"use strict";var qi=class e extends Error{constructor(r,n=!0){let s,i=!0;typeof n=="boolean"?(s=void 0,i=n):n!=null&&typeof n=="object"&&(s=n.logger,i=n.tryNextLink??!0);super(r);f(this,"name","ProviderError");f(this,"tryNextLink");this.tryNextLink=i,Object.setPrototypeOf(this,e.prototype),s?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}},BE=class e extends qi{constructor(r,n=!0){super(r,n);f(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,e.prototype)}},UE=class e extends qi{constructor(r,n=!0){super(r,n);f(this,"name","TokenProviderError");Object.setPrototypeOf(this,e.prototype)}},$V=(...e)=>async()=>{if(e.length===0)throw new qi("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},BV=e=>()=>Promise.resolve(e),UV=(e,t,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return t===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))};zs.CredentialsProviderError=BE;zs.ProviderError=qi;zs.TokenProviderError=UE;zs.chain=$V;zs.fromStatic=BV;zs.memoize=UV});var HE,pT,hT,mT=C(()=>{Wt();HE=T(Dt()),pT=e=>(e.sigv4aSigningRegionSet=Hn(e.sigv4aSigningRegionSet),e),hT={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new HE.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new HE.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Gl=S(ee=>{"use strict";var Qn=Og(),Ws=dt(),HV=og(),ST=we(),gT=Pt(),Bl=Sg(),_T="X-Amz-Algorithm",vT="X-Amz-Credential",KE="X-Amz-Date",wT="X-Amz-SignedHeaders",bT="X-Amz-Expires",XE="X-Amz-Signature",QE="X-Amz-Security-Token",jV="X-Amz-Region-Set",YE="authorization",JE=KE.toLowerCase(),RT="date",CT=[YE,JE,RT],AT=XE.toLowerCase(),zl="x-amz-content-sha256",TT=QE.toLowerCase(),VV="host",IT={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},PT=/^proxy-/,xT=/^sec-/,zV=[/^proxy-/i,/^sec-/i],Ul="AWS4-HMAC-SHA256",WV="AWS4-ECDSA-P256-SHA256",OT="AWS4-HMAC-SHA256-PAYLOAD",NT="UNSIGNED-PAYLOAD",DT=50,ZE="aws4_request",LT=60*60*24*7,Fi={},Hl=[],jl=(e,t,r)=>`${e}/${t}/${r}/${ZE}`,kT=async(e,t,r,n,s)=>{let i=await ET(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${Qn.toHex(i)}:${t.sessionToken}`;if(o in Fi)return Fi[o];for(Hl.push(o);Hl.length>DT;)delete Fi[Hl.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,s,ZE])a=await ET(e,a,c);return Fi[o]=a},GV=()=>{Hl.length=0,Object.keys(Fi).forEach(e=>{delete Fi[e]})},ET=(e,t,r)=>{let n=new e(t);return n.update(Ws.toUint8Array(r)),n.digest()},jE=({headers:e},t,r)=>{let n={};for(let s of Object.keys(e).sort()){if(e[s]==null)continue;let i=s.toLowerCase();(i in IT||t?.has(i)||PT.test(i)||xT.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},Vl=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===zl)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||HV.isArrayBuffer(t)){let n=new r;return n.update(Ws.toUint8Array(t)),Qn.toHex(await n.digest())}return NT},VE=class{format(t){let r=[];for(let i of Object.keys(t)){let o=Ws.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":let a=Ws.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(zE.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!KV.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(Qn.fromHex(t.value.replace(/\-/g,"")),1),d}}},KV=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,zE=class e{constructor(t){f(this,"bytes");if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&yT(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&yT(t),parseInt(Qn.toHex(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function yT(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var MT=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},qT=(e,t={})=>{let{headers:r,query:n={}}=ST.HttpRequest.clone(e);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(i)||t.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}},WE=e=>{e=ST.HttpRequest.clone(e);for(let t of Object.keys(e.headers))CT.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},FT=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===AT)continue;let s=Bl.escapeUri(n);t.push(s);let i=e[n];typeof i=="string"?r[s]=`${s}=${Bl.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${Bl.escapeUri(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},XV=e=>QV(e).toISOString().replace(/\.\d{3}Z$/,"Z"),QV=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,Wl=class{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){f(this,"service");f(this,"regionProvider");f(this,"credentialProvider");f(this,"sha256");f(this,"uriEscapePath");f(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=gT.normalizeProvider(n),this.credentialProvider=gT.normalizeProvider(r)}createCanonicalRequest(t,r,n){let s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${FT(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n,s){let i=new this.sha256;i.update(Ws.toUint8Array(n));let o=await i.digest();return`${s}
${t}
${r}
${Qn.toHex(o)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let i of t.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return Bl.escapeUri(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=XV(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},GE=class extends Wl{constructor({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a});f(this,"headerFormatter",new VE)}async presign(r,n={}){let{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:u,signingRegion:l,signingService:d}=n,m=await this.credentialProvider();this.validateResolvedCredentials(m);let g=l??await this.regionProvider(),{longDate:y,shortDate:w}=this.formatDate(s);if(i>LT)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let I=jl(w,g,d??this.service),A=qT(WE(r),{unhoistableHeaders:a,hoistableHeaders:u});m.sessionToken&&(A.query[QE]=m.sessionToken),A.query[_T]=Ul,A.query[vT]=`${m.accessKeyId}/${I}`,A.query[KE]=y,A.query[bT]=i.toString(10);let O=jE(A,o,c);return A.query[wT]=this.getCanonicalHeaderList(O),A.query[XE]=await this.getSignature(y,I,this.getSigningKey(m,g,w,d),this.createCanonicalRequest(A,O,await Vl(r,this.sha256))),A}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(s),d=jl(u,c,a??this.service),m=await Vl({headers:{},body:n},this.sha256),g=new this.sha256;g.update(r);let y=Qn.toHex(await g.digest()),w=[OT,l,d,i,y,m].join(`
`);return this.signString(w,{signingDate:s,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:s,signingService:i,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:s,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:c}=this.formatDate(n),u=new this.sha256(await this.getSigningKey(o,a,c,i));return u.update(Ws.toUint8Array(r)),Qn.toHex(await u.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=o??await this.regionProvider(),l=WE(r),{longDate:d,shortDate:m}=this.formatDate(n),g=jl(m,u,a??this.service);l.headers[JE]=d,c.sessionToken&&(l.headers[TT]=c.sessionToken);let y=await Vl(l,this.sha256);!MT(zl,l.headers)&&this.applyChecksum&&(l.headers[zl]=y);let w=jE(l,i,s),I=await this.getSignature(d,g,this.getSigningKey(c,u,m,a),this.createCanonicalRequest(l,w,y));return l.headers[YE]=`${Ul} Credential=${c.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(w)}, Signature=${I}`,l}async getSignature(r,n,s,i){let o=await this.createStringToSign(r,n,i,Ul),a=new this.sha256(await s);return a.update(Ws.toUint8Array(o)),Qn.toHex(await a.digest())}getSigningKey(r,n,s,i){return kT(this.sha256,r,s,n,i||this.service)}},YV={SignatureV4a:null};ee.ALGORITHM_IDENTIFIER=Ul;ee.ALGORITHM_IDENTIFIER_V4A=WV;ee.ALGORITHM_QUERY_PARAM=_T;ee.ALWAYS_UNSIGNABLE_HEADERS=IT;ee.AMZ_DATE_HEADER=JE;ee.AMZ_DATE_QUERY_PARAM=KE;ee.AUTH_HEADER=YE;ee.CREDENTIAL_QUERY_PARAM=vT;ee.DATE_HEADER=RT;ee.EVENT_ALGORITHM_IDENTIFIER=OT;ee.EXPIRES_QUERY_PARAM=bT;ee.GENERATED_HEADERS=CT;ee.HOST_HEADER=VV;ee.KEY_TYPE_IDENTIFIER=ZE;ee.MAX_CACHE_SIZE=DT;ee.MAX_PRESIGNED_TTL=LT;ee.PROXY_HEADER_PATTERN=PT;ee.REGION_SET_PARAM=jV;ee.SEC_HEADER_PATTERN=xT;ee.SHA256_HEADER=zl;ee.SIGNATURE_HEADER=AT;ee.SIGNATURE_QUERY_PARAM=XE;ee.SIGNED_HEADERS_QUERY_PARAM=wT;ee.SignatureV4=GE;ee.SignatureV4Base=Wl;ee.TOKEN_HEADER=TT;ee.TOKEN_QUERY_PARAM=QE;ee.UNSIGNABLE_PATTERNS=zV;ee.UNSIGNED_PAYLOAD=NT;ee.clearCredentialCache=GV;ee.createScope=jl;ee.getCanonicalHeaders=jE;ee.getCanonicalQuery=FT;ee.getPayloadHash=Vl;ee.getSigningKey=kT;ee.hasHeader=MT;ee.moveHeadersToQuery=qT;ee.prepareRequest=WE;ee.signatureV4aContainer=YV});function JV(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=CE(t,RE,Ml):r?n=Hn(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function ZV(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var ey,Gs,$T,BT=C(()=>{Tr();Wt();ey=T(Gl()),Gs=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(u){u&&u!==t&&u!==n&&(r=!0),t=u;let l=JV(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),d=ZV(e,l);r&&!d.attributed?(n=async m=>d(m).then(g=>Kn(g,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:s=!0,systemClockOffset:i=e.systemClockOffset||0,sha256:o}=e,a;return e.signer?a=Hn(e.signer):e.regionInfoProvider?a=()=>Hn(e.region)().then(async u=>[await e.regionInfoProvider(u,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:d,signingService:m}=u;e.signingRegion=e.signingRegion||d||l,e.signingName=e.signingName||m||e.serviceId;let g={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},y=e.signerConstructor||ey.SignatureV4;return new y(g)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await Hn(e.region)(),properties:{}},u);let l=u.signingRegion,d=u.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||d||e.serviceId;let m={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:s},g=e.signerConstructor||ey.SignatureV4;return new g(m)},Object.assign(e,{systemClockOffset:i,signingEscapePath:s,signer:a})},$T=Gs});var UT=C(()=>{qE();cT();fT();mT();BT()});var HT={};jt(HT,{AWSSDKSigV4Signer:()=>ME,AwsSdkSigV4ASigner:()=>$a,AwsSdkSigV4Signer:()=>Gt,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mi,NODE_SIGV4A_CONFIG_OPTIONS:()=>hT,getBearerTokenEnvKey:()=>$l,resolveAWSSDKSigV4Config:()=>$T,resolveAwsSdkSigV4AConfig:()=>pT,resolveAwsSdkSigV4Config:()=>Gs,validateSigningProperties:()=>ki});var ty=C(()=>{UT();$E()});function Yn(e){return typeof Buffer<"u"?Buffer.alloc(e):new Uint8Array(e)}function Kl(e){return e[ry]=!0,e}var ry,Xl=C(()=>{ry=Symbol("@smithy/core/cbor::tagSymbol")});function zT(e){be=e,dn=new DataView(be.buffer,be.byteOffset,be.byteLength)}function Wr(e,t){if(e>=t)throw new Error("unexpected end of (decode) payload.");let r=(be[e]&224)>>5,n=be[e]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=GT[n],a=o+1;if(i=a,t-e<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=e+1;o===1?s=be[c]:o===2?s=dn.getUint16(c):o===4?s=dn.getUint32(c):s=dn.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return re=i,ny(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,re=i,ny(o)}else if(n===2||n===3){let o=ja(e+i,t),a=BigInt(0),c=e+i+re;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(be[u]);return re=i+re+o,n===3?-a-BigInt(1):a}else if(n===4){let o=Wr(e+i,t),[a,c]=o,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),d,m=c<0?"-":"";return d=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),d=d.replace(/^0+/g,""),d===""&&(d="0"),d[0]==="."&&(d="0"+d),d=m+d,re=i+re,fE(d)}else{let o=Wr(e+i,t);return re=i+re,Kl({tag:ny(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return oz(e,t);case 5:return dz(e,t);case 4:return uz(e,t);case 2:return az(e,t)}else switch(r){case 3:return iz(e,t);case 5:return lz(e,t);case 4:return cz(e,t);case 2:return uy(e,t)}default:return fz(e,t)}}function WT(e,t,r){return rz&&e.constructor?.name==="Buffer"?e.toString("utf-8",t,r):jT?jT.decode(e.subarray(t,r)):(0,VT.toUtf8)(e.subarray(t,r))}function nz(e){let t=Number(e);return(t<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<t)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${e}) to ${t} with loss of precision.`)),t}function sz(e,t){let r=e>>7,n=(e&124)>>2,s=(e&3)<<8|t,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function ja(e,t){let r=be[e]&31;if(r<24)return re=1,r;if(r===24||r===25||r===26||r===27){let n=GT[r];if(re=n+1,t-e<re)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=e+1;return n===1?be[s]:n===2?dn.getUint16(s):n===4?dn.getUint32(s):nz(dn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function iz(e,t){let r=ja(e,t),n=re;if(e+=n,t-e<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=WT(be,e,e+r);return re=n+r,s}function oz(e,t){e+=1;let r=[];for(let n=e;e<t;){if(be[e]===255){let c=Yn(r.length);return c.set(r,0),re=e-n+2,WT(c,0,c.length)}let s=(be[e]&224)>>5,i=be[e]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=uy(e,t);e+=re;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function uy(e,t){let r=ja(e,t),n=re;if(e+=n,t-e<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=be.subarray(e,e+r);return re=n+r,s}function az(e,t){e+=1;let r=[];for(let n=e;e<t;){if(be[e]===255){let c=Yn(r.length);return c.set(r,0),re=e-n+2,c}let s=(be[e]&224)>>5,i=be[e]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=uy(e,t);e+=re;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function cz(e,t){let r=ja(e,t),n=re;e+=n;let s=e,i=Array(r);for(let o=0;o<r;++o){let a=Wr(e,t),c=re;i[o]=a,e+=c}return re=n+(e-s),i}function uz(e,t){e+=1;let r=[];for(let n=e;e<t;){if(be[e]===255)return re=e-n+2,r;let s=Wr(e,t);e+=re,r.push(s)}throw new Error("expected break marker.")}function lz(e,t){let r=ja(e,t),n=re;e+=n;let s=e,i={};for(let o=0;o<r;++o){if(e>=t)throw new Error("unexpected end of map payload.");let a=(be[e]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${e}.`);let c=Wr(e,t);e+=re;let u=Wr(e,t);e+=re,i[c]=u}return re=n+(e-s),i}function dz(e,t){e+=1;let r=e,n={};for(;e<t;){if(e>=t)throw new Error("unexpected end of map payload.");if(be[e]===255)return re=e-r+2,n;let s=(be[e]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=Wr(e,t);e+=re;let o=Wr(e,t);e+=re,n[i]=o}throw new Error("expected break marker.")}function fz(e,t){let r=be[e]&31;switch(r){case 21:case 20:return re=1,r===21;case 22:return re=1,null;case 23:return re=1,null;case 25:if(t-e<3)throw new Error("incomplete float16 at end of buf.");return re=3,sz(be[e+1],be[e+2]);case 26:if(t-e<5)throw new Error("incomplete float32 at end of buf.");return re=5,dn.getFloat32(e+1);case 27:if(t-e<9)throw new Error("incomplete float64 at end of buf.");return re=9,dn.getFloat64(e+1);default:throw new Error(`unexpected minor value ${r}.`)}}function ny(e){if(typeof e=="number")return e;let t=Number(e);return Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:e}var VT,tz,rz,be,dn,jT,re,GT,KT=C(()=>{Vt();VT=T(dt());Xl();tz=typeof TextDecoder<"u",rz=typeof Buffer<"u",be=Yn(0),dn=new DataView(be.buffer,be.byteOffset,be.byteLength),jT=tz?new TextDecoder:null,re=0;GT={[24]:1,[25]:2,[26]:4,[27]:8}});function dy(e){G.byteLength-z<e&&(z<16e6?Yl(Math.max(G.byteLength*4,G.byteLength+e)):Yl(G.byteLength+e+16e6))}function fy(){let e=Yn(z);return e.set(G.subarray(0,z),0),z=0,e}function Yl(e){let t=G;G=Yn(e),t&&(t.copy?t.copy(G,0,0,t.byteLength):G.set(t,0)),hn=new DataView(G.buffer,G.byteOffset,G.byteLength)}function pn(e,t){t<24?G[z++]=e<<5|t:t<256?(G[z++]=e<<5|24,G[z++]=t):t<65536?(G[z++]=e<<5|25,hn.setUint16(z,t),z+=2):t<2**32?(G[z++]=e<<5|26,hn.setUint32(z,t),z+=4):(G[z++]=e<<5|27,hn.setBigUint64(z,typeof t=="bigint"?t:BigInt(t)),z+=8)}function YT(e){let t=[e];for(;t.length;){let r=t.pop();if(dy(typeof r=="string"?r.length*4:64),typeof r=="string"){if(XT)pn(3,Buffer.byteLength(r)),z+=G.write(r,z);else{let n=(0,QT.fromUtf8)(r);pn(3,n.byteLength),G.set(n,z),z+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?G[z++]=s<<5|i:i<256?(G[z++]=s<<5|24,G[z++]=i):i<65536?(G[z++]=s<<5|25,G[z++]=i>>8,G[z++]=i):i<4294967296?(G[z++]=s<<5|26,hn.setUint32(z,i),z+=4):(G[z++]=s<<5|27,hn.setBigUint64(z,BigInt(i)),z+=8);continue}G[z++]=251,hn.setFloat64(z,r),z+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)G[z++]=s<<5|o;else if(o<256)G[z++]=s<<5|24,G[z++]=o;else if(o<65536)G[z++]=s<<5|25,G[z++]=o>>8,G[z++]=o&255;else if(o<4294967296)G[z++]=s<<5|26,hn.setUint32(z,o),z+=4;else if(i<BigInt("18446744073709551616"))G[z++]=s<<5|27,hn.setBigUint64(z,i),z+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);dy(c.byteLength*2),G[z++]=n?194:195,XT?pn(2,Buffer.byteLength(c)):pn(2,c.byteLength),G.set(c,z),z+=c.byteLength}continue}else if(r===null){G[z++]=246;continue}else if(typeof r=="boolean"){G[z++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)t.push(r[n]);pn(4,r.length);continue}else if(typeof r.byteLength=="number"){dy(r.length*2),pn(2,r.length),G.set(r,z),z+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Be){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));G[z++]=196,t.push(o),t.push(i),pn(4,2);continue}if(r[ry])if("tag"in r&&"value"in r){t.push(r.value),pn(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];t.push(r[i]),t.push(i)}pn(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var QT,XT,pz,G,hn,z,JT=C(()=>{Vt();QT=T(dt());Xl();XT=typeof Buffer<"u",pz=2048,G=Yn(pz),hn=new DataView(G.buffer,G.byteOffset,G.byteLength),z=0});var py,ZT=C(()=>{KT();JT();py={deserialize(e){return zT(e),Wr(0,e.length)},serialize(e){try{return YT(e),fy()}catch(t){throw fy(),t}},resizeEncodingBuffer(e){Yl(e)}}});var Jl,Zl,ed=C(()=>{Xl();Jl=e=>Kl({tag:1,value:e.getTime()/1e3}),Zl=(e,t)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(t.__type!==void 0)return r(t.__type);let n=Object.keys(t).find(s=>s.toLowerCase()==="code");if(n&&t[n]!==void 0)return r(t[n])}});var gy,td,hy,my,Ey=C(()=>{zt();Pe();Vt();gy=T(ft());ZT();ed();td=class extends Nt{createSerializer(){let t=new hy;return t.setSerdeContext(this.serdeContext),t}createDeserializer(){let t=new my;return t.setSerdeContext(this.serdeContext),t}},hy=class extends Nt{constructor(){super(...arguments);f(this,"value")}write(r,n){this.value=this.serialize(r,n)}serialize(r,n){let s=V.of(r);if(n==null)return s.isIdempotencyToken()?(0,zr.v4)():n;if(s.isBlobSchema())return typeof n=="string"?(this.serdeContext?.base64Decoder??gy.fromBase64)(n):n;if(s.isTimestampSchema())return typeof n=="number"||typeof n=="bigint"?Jl(new Date(Number(n)/1e3|0)):Jl(n);if(typeof n=="function"||typeof n=="object"){let i=n;if(s.isListSchema()&&Array.isArray(i)){let a=!!s.getMergedTraits().sparse,c=[],u=0;for(let l of i){let d=this.serialize(s.getValueSchema(),l);(d!=null||a)&&(c[u++]=d)}return c}if(i instanceof Date)return Jl(i);let o={};if(s.isMapSchema()){let a=!!s.getMergedTraits().sparse;for(let c of Object.keys(i)){let u=this.serialize(s.getValueSchema(),i[c]);(u!=null||a)&&(o[c]=u)}}else if(s.isStructSchema())for(let[a,c]of s.structIterator()){let u=this.serialize(c,i[a]);u!=null&&(o[a]=u)}else if(s.isDocumentSchema())for(let a of Object.keys(i))o[a]=this.serialize(s.getValueSchema(),i[a]);return o}return n}flush(){let r=py.serialize(this.value);return this.value=void 0,r}},my=class extends Nt{read(t,r){let n=py.deserialize(r);return this.readValue(t,n)}readValue(t,r){let n=V.of(t);if(n.isTimestampSchema()&&typeof r=="number")return La(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??gy.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator()){let a=this.readValue(o,r[i]);a!=null&&(s[i]=a)}return s}else return r}}});var eI,rd,tI=C(()=>{zt();Pe();eI=T(Pt());Ey();ed();rd=class extends cn{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"codec",new td);f(this,"serializer",this.codec.createSerializer());f(this,"deserializer",this.codec.createDeserializer())}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);if(Object.assign(i.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Cr(r.input)==="unit")delete i.body,delete i.headers["content-type"];else{i.body||(this.serializer.write(15,{}),i.body=this.serializer.flush());try{i.headers["content-length"]=String(i.body.byteLength)}catch{}}let{service:o,operation:a}=(0,eI.getSmithyContext)(s),c=`/service/${o}/operation/${a}`;return i.path.endsWith("/")?i.path+=c.slice(1):i.path+=c,i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=Zl(s,i)??"Unknown",c=this.options.defaultNamespace;a.includes("#")&&([c]=a.split("#"));let u={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},l=le.for(c),d;try{d=l.getSchema(a)}catch{i.Message&&(i.message=i.Message);let O=le.for("smithy.ts.sdk.synthetic."+c),k=O.getBaseException();if(k){let q=O.getErrorCtor(k);throw Object.assign(new q({name:a}),u,i)}throw Object.assign(new Error(a),u,i)}let m=V.of(d),g=l.getErrorCtor(d),y=i.message??i.Message??"Unknown",w=new g(y),I={};for(let[A,O]of m.structIterator())I[A]=this.deserializer.readValue(O,i[A]);throw Object.assign(w,u,{$fault:m.getMergedTraits().error,message:y},I)}getDefaultContentType(){return"application/cbor"}}});var rI=C(()=>{ed();tI();Ey()});var ir,Bi=C(()=>{Pe();ir=class{resolveRestContentType(t,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":t)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return t}async getErrorSchemaOrThrowBaseException(t,r,n,s,i,o){let a=r,c=t;t.includes("#")&&([a,c]=t.split("#"));let u={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},l=le.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(t),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=le.for("smithy.ts.sdk.synthetic."+a),g=m.getBaseException();if(g){let y=m.getErrorCtor(g)??Error;throw Object.assign(new y({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(t,r){let n=r.headers?.["x-amzn-query-error"];if(t!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(t),a={Code:s,Type:i};Object.assign(t,a);for(let[c,u]of o)a[c]=u;delete a.__type,t.Error=a}}queryCompatOutput(t,r){t.Error&&(r.Error=t.Error),t.Type&&(r.Type=t.Type),t.Code&&(r.Code=t.Code)}}});var nd,nI=C(()=>{rI();Pe();Bi();nd=class extends rd{constructor({defaultNamespace:r,awsQueryCompatible:n}){super({defaultNamespace:r});f(this,"awsQueryCompatible");f(this,"mixin",new ir);this.awsQueryCompatible=!!n}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),i}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=Zl(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d),y={};for(let[w,I]of l.structIterator())y[w]=this.deserializer.readValue(I,i[w]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,y),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},y)}}});var sI,iI,oI,aI=C(()=>{sI=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},iI=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},oI=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var St,ts=C(()=>{St=class{constructor(){f(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}});function cI(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new Be(n,"bigDecimal"):BigInt(n)}return t}var uI=C(()=>{Vt()});var pI=S(fI=>{"use strict";var Ks=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},rs=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,yy=()=>{let e=[],t=[],r=!1,n=new Set,s=d=>d.sort((m,g)=>lI[g.step]-lI[m.step]||dI[g.priority||"normal"]-dI[m.priority||"normal"]),i=d=>{let m=!1,g=y=>{let w=Ks(y.name,y.aliases);if(w.includes(d)){m=!0;for(let I of w)n.delete(I);return!1}return!0};return e=e.filter(g),t=t.filter(g),m},o=d=>{let m=!1,g=y=>{if(y.middleware===d){m=!0;for(let w of Ks(y.name,y.aliases))n.delete(w);return!1}return!0};return e=e.filter(g),t=t.filter(g),m},a=d=>(e.forEach(m=>{d.add(m.middleware,{...m})}),t.forEach(m=>{d.addRelativeTo(m.middleware,{...m})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{let m=[];return d.before.forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m.push(d),d.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m},u=(d=!1)=>{let m=[],g=[],y={};return e.forEach(I=>{let A={...I,before:[],after:[]};for(let O of Ks(A.name,A.aliases))y[O]=A;m.push(A)}),t.forEach(I=>{let A={...I,before:[],after:[]};for(let O of Ks(A.name,A.aliases))y[O]=A;g.push(A)}),g.forEach(I=>{if(I.toMiddleware){let A=y[I.toMiddleware];if(A===void 0){if(d)return;throw new Error(`${I.toMiddleware} is not found when adding ${rs(I.name,I.aliases)} middleware ${I.relation} ${I.toMiddleware}`)}I.relation==="after"&&A.after.push(I),I.relation==="before"&&A.before.push(I)}}),s(m).map(c).reduce((I,A)=>(I.push(...A),I),[])},l={add:(d,m={})=>{let{name:g,override:y,aliases:w}=m,I={step:"initialize",priority:"normal",middleware:d,...m},A=Ks(g,w);if(A.length>0){if(A.some(O=>n.has(O))){if(!y)throw new Error(`Duplicate middleware name '${rs(g,w)}'`);for(let O of A){let k=e.findIndex(U=>U.name===O||U.aliases?.some(ce=>ce===O));if(k===-1)continue;let q=e[k];if(q.step!==I.step||I.priority!==q.priority)throw new Error(`"${rs(q.name,q.aliases)}" middleware with ${q.priority} priority in ${q.step} step cannot be overridden by "${rs(g,w)}" middleware with ${I.priority} priority in ${I.step} step.`);e.splice(k,1)}}for(let O of A)n.add(O)}e.push(I)},addRelativeTo:(d,m)=>{let{name:g,override:y,aliases:w}=m,I={middleware:d,...m},A=Ks(g,w);if(A.length>0){if(A.some(O=>n.has(O))){if(!y)throw new Error(`Duplicate middleware name '${rs(g,w)}'`);for(let O of A){let k=t.findIndex(U=>U.name===O||U.aliases?.some(ce=>ce===O));if(k===-1)continue;let q=t[k];if(q.toMiddleware!==I.toMiddleware||q.relation!==I.relation)throw new Error(`"${rs(q.name,q.aliases)}" middleware ${q.relation} "${q.toMiddleware}" middleware cannot be overridden by "${rs(g,w)}" middleware ${I.relation} "${I.toMiddleware}" middleware.`);t.splice(k,1)}}for(let O of A)n.add(O)}t.push(I)},clone:()=>a(yy()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let m=!1,g=y=>{let{tags:w,name:I,aliases:A}=y;if(w&&w.includes(d)){let O=Ks(I,A);for(let k of O)n.delete(k);return m=!0,!1}return!0};return e=e.filter(g),t=t.filter(g),m},concat:d=>{let m=a(yy());return m.use(d),m.identifyOnResolve(r||m.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(d=>{let m=d.step??d.relation+" "+d.toMiddleware;return rs(d.name,d.aliases)+" - "+m}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,m)=>{for(let g of u().map(y=>y.middleware).reverse())d=g(d,m);return r&&console.log(l.identify()),d}};return l},lI={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},dI={high:3,normal:2,low:1};fI.constructStack=yy});var ne=S(Se=>{"use strict";var gI=pI(),Ty=(zt(),se(pA)),_y=nn(),hz=(Pe(),se(bl)),hI=(Vt(),se(JC)),vy=class{constructor(t){f(this,"config");f(this,"middlewareStack",gI.constructStack());f(this,"initConfig");f(this,"handlers");this.config=t}send(t,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,s),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(t).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},Sy="***SensitiveInformation***";function wy(e,t){if(t==null)return t;let r=hz.NormalizedSchema.of(e);if(r.getMergedTraits().sensitive)return Sy;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return Sy}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return Sy}else if(r.isStructSchema()&&typeof t=="object"){let n=t,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=wy(o,n[i]));return s}return t}var sd=class{constructor(){f(this,"middlewareStack",gI.constructStack());f(this,"schema")}static classBuilder(){return new by}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(let I of s.bind(this)(d,t,r,n))this.middlewareStack.use(I);let m=t.concat(this.middlewareStack),{logger:g}=r,y={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[_y.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:w}=r;return m.resolve(I=>w.handle(I.request,n||{}),y)}},by=class{constructor(){f(this,"_init",()=>{});f(this,"_ep",{});f(this,"_middlewareFn",()=>[]);f(this,"_commandName","");f(this,"_clientName","");f(this,"_additionalContext",{});f(this,"_smithyContext",{});f(this,"_inputFilterSensitiveLog");f(this,"_outputFilterSensitiveLog");f(this,"_serializer",null);f(this,"_deserializer",null);f(this,"_operationSchema")}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){let t=this,r;return r=class extends sd{constructor(...[s]){super();f(this,"input");f(this,"serialize",t._serializer);f(this,"deserialize",t._deserializer);this.input=s??{},t._init(this),this.schema=t._operationSchema}static getEndpointParameterInstructions(){return t._ep}resolveMiddleware(s,i,o){let a=t._operationSchema,c=a?.[4]??a?.input,u=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog??(a?wy.bind(null,c):l=>l),outputFilterSensitiveLog:t._outputFilterSensitiveLog??(a?wy.bind(null,u):l=>l),smithyContext:t._smithyContext,additionalContext:t._additionalContext})}}}},mz="***SensitiveInformation***",gz=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],s=async function(o,a,c){let u=new n(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[i]=s}},Ry=class e extends Error{constructor(r){super(r.message);f(this,"$fault");f(this,"$response");f(this,"$retryable");f(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;let n=r;return e.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;let n=r;return this===e?e.isInstance(r):e.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}},EI=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},yI=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let s=yz(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:t?.code||t?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw EI(o,t)},Ez=e=>({output:t,parsedBody:r,errorCode:n})=>{yI({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},yz=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Sz=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},mI=!1,_z=e=>{e&&!mI&&parseInt(e.substring(1,e.indexOf(".")))<16&&(mI=!0)},vz=e=>{let t=[];for(let r in _y.AlgorithmId){let n=_y.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},wz=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},bz=e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),Rz=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},SI=e=>Object.assign(vz(e),bz(e)),Cz=SI,Az=e=>Object.assign(wz(e),Rz(e)),Tz=e=>Array.isArray(e)?e:[e],_I=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=_I(e[r]));return e},Iz=e=>e!=null,Cy=class{trace(){}debug(){}info(){}warn(){}error(){}};function vI(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,Oz(n,s,i);i=t}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}wI(n,null,i,o)}return n}var Pz=e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},xz=(e,t)=>{let r={};for(let n in t)wI(r,e,t,n);return r},Oz=(e,t,r)=>vI(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),wI=(e,t,r,n)=>{if(t!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=Nz,c=Dz,u=n]=o;(typeof a=="function"&&a(t[u])||typeof a!="function"&&a)&&(e[n]=c(t[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:c&&(e[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},Nz=e=>e!=null,Dz=e=>e,Lz=e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},kz=e=>e.toISOString().replace(".000Z","Z"),Ay=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map(Ay);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Ay(e[r]));return t}return e};Object.defineProperty(Se,"collectBody",{enumerable:!0,get:function(){return Ty.collectBody}});Object.defineProperty(Se,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return Ty.extendedEncodeURIComponent}});Object.defineProperty(Se,"resolvedPath",{enumerable:!0,get:function(){return Ty.resolvedPath}});Se.Client=vy;Se.Command=sd;Se.NoOpLogger=Cy;Se.SENSITIVE_STRING=mz;Se.ServiceException=Ry;Se._json=Ay;Se.convertMap=Pz;Se.createAggregatedClient=gz;Se.decorateServiceException=EI;Se.emitWarningIfUnsupportedVersion=_z;Se.getArrayIfSingleItem=Tz;Se.getDefaultClientConfiguration=Cz;Se.getDefaultExtensionConfiguration=SI;Se.getValueFromTextNode=_I;Se.isSerializableHeaderValue=Iz;Se.loadConfigsForDefaultMode=Sz;Se.map=vI;Se.resolveDefaultRuntimeConfig=Az;Se.serializeDateTime=kz;Se.serializeFloat=Lz;Se.take=xz;Se.throwDefaultError=yI;Se.withBaseException=Ez;Object.keys(hI).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Se,e)&&Object.defineProperty(Se,e,{enumerable:!0,get:function(){return hI[e]}})})});var bI,RI,id,Iy=C(()=>{bI=T(ne()),RI=T(dt()),id=(e,t)=>(0,bI.collectBody)(e,t).then(r=>(t?.utf8Encoder??RI.toUtf8)(r))});var Va,CI,Ui,za=C(()=>{Iy();Va=(e,t)=>id(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),CI=async(e,t)=>{let r=await Va(e,t);return r.message=r.message??r.Message,r},Ui=(e,t)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(e.headers,"x-amzn-errortype");if(s!==void 0)return n(e.headers[s]);if(t&&typeof t=="object"){let i=r(t,"code");if(i&&t[i]!==void 0)return n(t[i]);if(t.__type!==void 0)return n(t.__type)}}});var AI,Hi,Py=C(()=>{zt();Pe();Vt();AI=T(ft());ts();uI();za();Hi=class extends St{constructor(r){super();f(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,cI):await Va(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let s=n!==null&&typeof n=="object",i=V.of(r);if(i.isListSchema()&&Array.isArray(n)){let a=i.getValueSchema(),c=[],u=!!i.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._read(a,l));return c}else if(i.isMapSchema()&&s){let a=i.getValueSchema(),c={},u=!!i.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._read(a,d));return c}else if(i.isStructSchema()&&s){let a={};for(let[c,u]of i.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._read(u,n[l]);d!=null&&(a[c]=d)}return a}if(i.isBlobSchema()&&typeof n=="string")return(0,AI.fromBase64)(n);let o=i.getMergedTraits().mediaType;if(i.isStringSchema()&&typeof n=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return Ot.from(n);if(i.isTimestampSchema()&&n!=null)switch(Zt(i,this.settings)){case 5:return Jg(n);case 6:return Zg(n);case 7:return eE(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(i.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(i.isBigDecimalSchema()&&n!=null){if(n instanceof Be)return n;let a=n;return a.type==="bigDecimal"&&"string"in a?new Be(a.string,a.type):new Be(String(n),"bigDecimal")}if(i.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(i.isDocumentSchema())if(s){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Be?a[c]=u:a[c]=this._read(i,u);return a}else return structuredClone(n);return n}}});var TI,od,II=C(()=>{Vt();TI="\u039D",od=class{constructor(){f(this,"values",new Map);f(this,"counter",0);f(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof Be){let n=`${TI+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${TI+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var PI,ji,xy=C(()=>{zt();Pe();Vt();PI=T(ft());ts();II();ji=class extends St{constructor(r){super();f(this,"settings");f(this,"buffer");f(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=V.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=V.of(r).getName(!0))}flush(){let{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){let n=new od;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,s){let i=n!==null&&typeof n=="object",o=V.of(r);if(o.isListSchema()&&Array.isArray(n)){let a=o.getValueSchema(),c=[],u=!!o.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._write(a,l));return c}else if(o.isMapSchema()&&i){let a=o.getValueSchema(),c={},u=!!o.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._write(a,d));return c}else if(o.isStructSchema()&&i){let a={};for(let[c,u]of o.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._write(u,n[c],o);d!==void 0&&(a[l]=d)}return a}if(!(n===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||o.isDocumentSchema()&&n instanceof Uint8Array)return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??PI.toBase64)(n);if((o.isTimestampSchema()||o.isDocumentSchema())&&n instanceof Date)switch(Zt(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return Oa(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(o.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return(0,zr.v4)();let a=o.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return Ot.from(n)}if(o.isDocumentSchema())if(i){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Be?a[c]=u:a[c]=this._write(o,u);return a}else return structuredClone(n);return n}}}});var ns,ad=C(()=>{ts();Py();xy();ns=class extends St{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new ji(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new Hi(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var ss,cd=C(()=>{zt();Pe();Bi();ad();za();ss=class extends cn{constructor({defaultNamespace:r,serviceTarget:n,awsQueryCompatible:s}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"serviceTarget");f(this,"codec");f(this,"mixin",new ir);f(this,"awsQueryCompatible");this.serviceTarget=n,this.codec=new ns({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),(Cr(r.input)==="unit"||!i.body)&&(i.body="{}"),i}getPayloadCodec(){return this.codec}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=Ui(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d),y={};for(let[w,I]of l.structIterator()){let A=I.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(I,i[A])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,y),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},y)}}});var ud,xI=C(()=>{cd();ud=class extends ss{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var ld,OI=C(()=>{cd();ld=class extends ss{constructor({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:t,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var Vi,NI=C(()=>{zt();Pe();Bi();ad();za();Vi=class extends qs{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"codec");f(this,"mixin",new ir);let n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new ns(n),this.serializer=new Bs(this.codec.createSerializer(),n),this.deserializer=new $s(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=V.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]&&!i.body&&(i.body="{}"),i}async handleError(r,n,s,i,o){let a=Ui(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let y={};for(let[w,I]of l.structIterator()){let A=I.getMergedTraits().jsonName??w;y[w]=this.codec.createDeserializer().readObject(I,i[A])}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},y)}getDefaultContentType(){return"application/json"}}});var DI,LI,kI=C(()=>{DI=T(ne()),LI=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,DI.expectUnion)(e)}});var qI=S((A0e,MI)=>{(()=>{"use strict";var e={d:(p,h)=>{for(var _ in h)e.o(h,_)&&!e.o(p,_)&&Object.defineProperty(p,_,{enumerable:!0,get:h[_]})},o:(p,h)=>Object.prototype.hasOwnProperty.call(p,h),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{XMLBuilder:()=>$n,XMLParser:()=>tj,XMLValidator:()=>uj});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(p,h){let _=[],R=h.exec(p);for(;R;){let v=[];v.startIndex=h.lastIndex-R[0].length;let b=R.length;for(let x=0;x<b;x++)v.push(R[x]);_.push(v),R=h.exec(p)}return _}let i=function(p){return n.exec(p)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(p,h){h=Object.assign({},o,h);let _=[],R=!1,v=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let b=0;b<p.length;b++)if(p[b]==="<"&&p[b+1]==="?"){if(b+=2,b=u(p,b),b.err)return b}else{if(p[b]!=="<"){if(c(p[b]))continue;return A("InvalidChar","char '"+p[b]+"' is not expected.",k(p,b))}{let x=b;if(b++,p[b]==="!"){b=l(p,b);continue}{let P=!1;p[b]==="/"&&(P=!0,b++);let N="";for(;b<p.length&&p[b]!==">"&&p[b]!==" "&&p[b]!=="	"&&p[b]!==`
`&&p[b]!=="\r";b++)N+=p[b];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),b--),!i(N)){let W;return W=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",A("InvalidTag",W,k(p,b))}let M=g(p,b);if(M===!1)return A("InvalidAttr","Attributes for '"+N+"' have open quote.",k(p,b));let Q=M.value;if(b=M.index,Q[Q.length-1]==="/"){let W=b-Q.length;Q=Q.substring(0,Q.length-1);let ae=w(Q,h);if(ae!==!0)return A(ae.err.code,ae.err.msg,k(p,W+ae.err.line));R=!0}else if(P){if(!M.tagClosed)return A("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",k(p,b));if(Q.trim().length>0)return A("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",k(p,x));if(_.length===0)return A("InvalidTag","Closing tag '"+N+"' has not been opened.",k(p,x));{let W=_.pop();if(N!==W.tagName){let ae=k(p,W.tagStartPos);return A("InvalidTag","Expected closing tag '"+W.tagName+"' (opened in line "+ae.line+", col "+ae.col+") instead of closing tag '"+N+"'.",k(p,x))}_.length==0&&(v=!0)}}else{let W=w(Q,h);if(W!==!0)return A(W.err.code,W.err.msg,k(p,b-Q.length+W.err.line));if(v===!0)return A("InvalidXml","Multiple possible root nodes found.",k(p,b));h.unpairedTags.indexOf(N)!==-1||_.push({tagName:N,tagStartPos:x}),R=!0}for(b++;b<p.length;b++)if(p[b]==="<"){if(p[b+1]==="!"){b++,b=l(p,b);continue}if(p[b+1]!=="?")break;if(b=u(p,++b),b.err)return b}else if(p[b]==="&"){let W=I(p,b);if(W==-1)return A("InvalidChar","char '&' is not expected.",k(p,b));b=W}else if(v===!0&&!c(p[b]))return A("InvalidXml","Extra text at the end",k(p,b));p[b]==="<"&&b--}}}return R?_.length==1?A("InvalidTag","Unclosed tag '"+_[0].tagName+"'.",k(p,_[0].tagStartPos)):!(_.length>0)||A("InvalidXml","Invalid '"+JSON.stringify(_.map(b=>b.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):A("InvalidXml","Start tag expected.",1)}function c(p){return p===" "||p==="	"||p===`
`||p==="\r"}function u(p,h){let _=h;for(;h<p.length;h++)if(!(p[h]!="?"&&p[h]!=" ")){let R=p.substr(_,h-_);if(h>5&&R==="xml")return A("InvalidXml","XML declaration allowed only at the start of the document.",k(p,h));if(p[h]=="?"&&p[h+1]==">"){h++;break}}return h}function l(p,h){if(p.length>h+5&&p[h+1]==="-"&&p[h+2]==="-"){for(h+=3;h<p.length;h++)if(p[h]==="-"&&p[h+1]==="-"&&p[h+2]===">"){h+=2;break}}else if(p.length>h+8&&p[h+1]==="D"&&p[h+2]==="O"&&p[h+3]==="C"&&p[h+4]==="T"&&p[h+5]==="Y"&&p[h+6]==="P"&&p[h+7]==="E"){let _=1;for(h+=8;h<p.length;h++)if(p[h]==="<")_++;else if(p[h]===">"&&(_--,_===0))break}else if(p.length>h+9&&p[h+1]==="["&&p[h+2]==="C"&&p[h+3]==="D"&&p[h+4]==="A"&&p[h+5]==="T"&&p[h+6]==="A"&&p[h+7]==="["){for(h+=8;h<p.length;h++)if(p[h]==="]"&&p[h+1]==="]"&&p[h+2]===">"){h+=2;break}}return h}let d='"',m="'";function g(p,h){let _="",R="",v=!1;for(;h<p.length;h++){if(p[h]===d||p[h]===m)R===""?R=p[h]:R!==p[h]||(R="");else if(p[h]===">"&&R===""){v=!0;break}_+=p[h]}return R===""&&{value:_,index:h,tagClosed:v}}let y=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(p,h){let _=s(p,y),R={};for(let v=0;v<_.length;v++){if(_[v][1].length===0)return A("InvalidAttr","Attribute '"+_[v][2]+"' has no space in starting.",q(_[v]));if(_[v][3]!==void 0&&_[v][4]===void 0)return A("InvalidAttr","Attribute '"+_[v][2]+"' is without value.",q(_[v]));if(_[v][3]===void 0&&!h.allowBooleanAttributes)return A("InvalidAttr","boolean attribute '"+_[v][2]+"' is not allowed.",q(_[v]));let b=_[v][2];if(!O(b))return A("InvalidAttr","Attribute '"+b+"' is an invalid name.",q(_[v]));if(R.hasOwnProperty(b))return A("InvalidAttr","Attribute '"+b+"' is repeated.",q(_[v]));R[b]=1}return!0}function I(p,h){if(p[++h]===";")return-1;if(p[h]==="#")return function(R,v){let b=/\d/;for(R[v]==="x"&&(v++,b=/[\da-fA-F]/);v<R.length;v++){if(R[v]===";")return v;if(!R[v].match(b))break}return-1}(p,++h);let _=0;for(;h<p.length;h++,_++)if(!(p[h].match(/\w/)&&_<20)){if(p[h]===";")break;return-1}return h}function A(p,h,_){return{err:{code:p,msg:h,line:_.line||_,col:_.col}}}function O(p){return i(p)}function k(p,h){let _=p.substring(0,h).split(/\r?\n/);return{line:_.length,col:_[_.length-1].length+1}}function q(p){return p.startIndex+p[1].length}let U={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,h,_){return p},captureMetaData:!1},ce;ce=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class Je{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,_){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:_})}addChild(h,_){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child}),_!==void 0&&(this.child[this.child.length-1][ce]={startIndex:_})}static getMetaDataSymbol(){return ce}}function ie(p,h){let _={};if(p[h+3]!=="O"||p[h+4]!=="C"||p[h+5]!=="T"||p[h+6]!=="Y"||p[h+7]!=="P"||p[h+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{h+=9;let R=1,v=!1,b=!1,x="";for(;h<p.length;h++)if(p[h]!=="<"||b)if(p[h]===">"){if(b?p[h-1]==="-"&&p[h-2]==="-"&&(b=!1,R--):R--,R===0)break}else p[h]==="["?v=!0:x+=p[h];else{if(v&&Ns(p,"!ENTITY",h)){let P,N;h+=7,[P,N,h]=ve(p,h+1),N.indexOf("&")===-1&&(_[P]={regx:RegExp(`&${P};`,"g"),val:N})}else if(v&&Ns(p,"!ELEMENT",h)){h+=8;let{index:P}=LH(p,h+1);h=P}else if(v&&Ns(p,"!ATTLIST",h))h+=8;else if(v&&Ns(p,"!NOTATION",h)){h+=9;let{index:P}=Ge(p,h+1);h=P}else{if(!Ns(p,"!--",h))throw new Error("Invalid DOCTYPE");b=!0}R++,x=""}if(R!==0)throw new Error("Unclosed DOCTYPE")}return{entities:_,i:h}}let Z=(p,h)=>{for(;h<p.length&&/\s/.test(p[h]);)h++;return h};function ve(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h])&&p[h]!=='"'&&p[h]!=="'";)_+=p[h],h++;if(Vm(_),h=Z(p,h),p.substring(h,h+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(p[h]==="%")throw new Error("Parameter entities are not supported");let R="";return[h,R]=vi(p,h,"entity"),[_,R,--h]}function Ge(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h]);)_+=p[h],h++;Vm(_),h=Z(p,h);let R=p.substring(h,h+6).toUpperCase();if(R!=="SYSTEM"&&R!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${R}"`);h+=R.length,h=Z(p,h);let v=null,b=null;if(R==="PUBLIC")[h,v]=vi(p,h,"publicIdentifier"),p[h=Z(p,h)]!=='"'&&p[h]!=="'"||([h,b]=vi(p,h,"systemIdentifier"));else if(R==="SYSTEM"&&([h,b]=vi(p,h,"systemIdentifier"),!b))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:_,publicIdentifier:v,systemIdentifier:b,index:--h}}function vi(p,h,_){let R="",v=p[h];if(v!=='"'&&v!=="'")throw new Error(`Expected quoted string, found "${v}"`);for(h++;h<p.length&&p[h]!==v;)R+=p[h],h++;if(p[h]!==v)throw new Error(`Unterminated ${_} value`);return[++h,R]}function LH(p,h){h=Z(p,h);let _="";for(;h<p.length&&!/\s/.test(p[h]);)_+=p[h],h++;if(!Vm(_))throw new Error(`Invalid element name: "${_}"`);let R="";if(p[h=Z(p,h)]==="E"&&Ns(p,"MPTY",h))h+=4;else if(p[h]==="A"&&Ns(p,"NY",h))h+=2;else{if(p[h]!=="(")throw new Error(`Invalid Element Expression, found "${p[h]}"`);for(h++;h<p.length&&p[h]!==")";)R+=p[h],h++;if(p[h]!==")")throw new Error("Unterminated content model")}return{elementName:_,contentModel:R.trim(),index:h}}function Ns(p,h,_){for(let R=0;R<h.length;R++)if(h[R]!==p[_+R+1])return!1;return!0}function Vm(p){if(i(p))return p;throw new Error(`Invalid entity name ${p}`)}let kH=/^[-+]?0x[a-fA-F0-9]+$/,MH=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,qH={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},FH=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function nR(p){return typeof p=="function"?p:Array.isArray(p)?h=>{for(let _ of p)if(typeof _=="string"&&h===_||_ instanceof RegExp&&_.test(h))return!0}:()=>!1}class $H{constructor(h){this.options=h,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(_,R)=>String.fromCodePoint(Number.parseInt(R,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(_,R)=>String.fromCodePoint(Number.parseInt(R,16))}},this.addExternalEntities=BH,this.parseXml=zH,this.parseTextData=UH,this.resolveNameSpace=HH,this.buildAttributesMap=VH,this.isItStopNode=XH,this.replaceEntitiesValue=GH,this.readStopNodeData=QH,this.saveTextToParentTag=KH,this.addChild=WH,this.ignoreAttributesFn=nR(this.options.ignoreAttributes)}}function BH(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let R=h[_];this.lastEntities[R]={regex:new RegExp("&"+R+";","g"),val:p[R]}}}function UH(p,h,_,R,v,b,x){if(p!==void 0&&(this.options.trimValues&&!R&&(p=p.trim()),p.length>0)){x||(p=this.replaceEntitiesValue(p));let P=this.options.tagValueProcessor(h,p,_,v,b);return P==null?p:typeof P!=typeof p||P!==p?P:this.options.trimValues||p.trim()===p?sR(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function HH(p){if(this.options.removeNSPrefix){let h=p.split(":"),_=p.charAt(0)==="/"?"/":"";if(h[0]==="xmlns")return"";h.length===2&&(p=_+h[1])}return p}let jH=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function VH(p,h,_){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){let R=s(p,jH),v=R.length,b={};for(let x=0;x<v;x++){let P=this.resolveNameSpace(R[x][1]);if(this.ignoreAttributesFn(P,h))continue;let N=R[x][4],M=this.options.attributeNamePrefix+P;if(P.length)if(this.options.transformAttributeName&&(M=this.options.transformAttributeName(M)),M==="__proto__"&&(M="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let Q=this.options.attributeValueProcessor(P,N,h);b[M]=Q==null?N:typeof Q!=typeof N||Q!==N?Q:sR(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(b[M]=!0)}if(!Object.keys(b).length)return;if(this.options.attributesGroupName){let x={};return x[this.options.attributesGroupName]=b,x}return b}}let zH=function(p){p=p.replace(/\r\n?/g,`
`);let h=new Je("!xml"),_=h,R="",v="";for(let b=0;b<p.length;b++)if(p[b]==="<")if(p[b+1]==="/"){let x=Ds(p,">",b,"Closing Tag is not closed."),P=p.substring(b+2,x).trim();if(this.options.removeNSPrefix){let Q=P.indexOf(":");Q!==-1&&(P=P.substr(Q+1))}this.options.transformTagName&&(P=this.options.transformTagName(P)),_&&(R=this.saveTextToParentTag(R,_,v));let N=v.substring(v.lastIndexOf(".")+1);if(P&&this.options.unpairedTags.indexOf(P)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${P}>`);let M=0;N&&this.options.unpairedTags.indexOf(N)!==-1?(M=v.lastIndexOf(".",v.lastIndexOf(".")-1),this.tagsNodeStack.pop()):M=v.lastIndexOf("."),v=v.substring(0,M),_=this.tagsNodeStack.pop(),R="",b=x}else if(p[b+1]==="?"){let x=zm(p,b,!1,"?>");if(!x)throw new Error("Pi Tag is not closed.");if(R=this.saveTextToParentTag(R,_,v),!(this.options.ignoreDeclaration&&x.tagName==="?xml"||this.options.ignorePiTags)){let P=new Je(x.tagName);P.add(this.options.textNodeName,""),x.tagName!==x.tagExp&&x.attrExpPresent&&(P[":@"]=this.buildAttributesMap(x.tagExp,v,x.tagName)),this.addChild(_,P,v,b)}b=x.closeIndex+1}else if(p.substr(b+1,3)==="!--"){let x=Ds(p,"-->",b+4,"Comment is not closed.");if(this.options.commentPropName){let P=p.substring(b+4,x-2);R=this.saveTextToParentTag(R,_,v),_.add(this.options.commentPropName,[{[this.options.textNodeName]:P}])}b=x}else if(p.substr(b+1,2)==="!D"){let x=ie(p,b);this.docTypeEntities=x.entities,b=x.i}else if(p.substr(b+1,2)==="!["){let x=Ds(p,"]]>",b,"CDATA is not closed.")-2,P=p.substring(b+9,x);R=this.saveTextToParentTag(R,_,v);let N=this.parseTextData(P,_.tagname,v,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?_.add(this.options.cdataPropName,[{[this.options.textNodeName]:P}]):_.add(this.options.textNodeName,N),b=x+2}else{let x=zm(p,b,this.options.removeNSPrefix),P=x.tagName,N=x.rawTagName,M=x.tagExp,Q=x.attrExpPresent,W=x.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),_&&R&&_.tagname!=="!xml"&&(R=this.saveTextToParentTag(R,_,v,!1));let ae=_;ae&&this.options.unpairedTags.indexOf(ae.tagname)!==-1&&(_=this.tagsNodeStack.pop(),v=v.substring(0,v.lastIndexOf("."))),P!==h.tagname&&(v+=v?"."+P:P);let ye=b;if(this.isItStopNode(this.options.stopNodes,v,P)){let ue="";if(M.length>0&&M.lastIndexOf("/")===M.length-1)P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),M=P):M=M.substr(0,M.length-1),b=x.closeIndex;else if(this.options.unpairedTags.indexOf(P)!==-1)b=x.closeIndex;else{let Br=this.readStopNodeData(p,N,W+1);if(!Br)throw new Error(`Unexpected end of ${N}`);b=Br.i,ue=Br.tagContent}let Ze=new Je(P);P!==M&&Q&&(Ze[":@"]=this.buildAttributesMap(M,v,P)),ue&&(ue=this.parseTextData(ue,P,v,!0,Q,!0,!0)),v=v.substr(0,v.lastIndexOf(".")),Ze.add(this.options.textNodeName,ue),this.addChild(_,Ze,v,ye)}else{if(M.length>0&&M.lastIndexOf("/")===M.length-1){P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),M=P):M=M.substr(0,M.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));let ue=new Je(P);P!==M&&Q&&(ue[":@"]=this.buildAttributesMap(M,v,P)),this.addChild(_,ue,v,ye),v=v.substr(0,v.lastIndexOf("."))}else{let ue=new Je(P);this.tagsNodeStack.push(_),P!==M&&Q&&(ue[":@"]=this.buildAttributesMap(M,v,P)),this.addChild(_,ue,v,ye),_=ue}R="",b=W}}else R+=p[b];return h.child};function WH(p,h,_,R){this.options.captureMetaData||(R=void 0);let v=this.options.updateTag(h.tagname,_,h[":@"]);v===!1||(typeof v=="string"&&(h.tagname=v),p.addChild(h,R))}let GH=function(p){if(this.options.processEntities){for(let h in this.docTypeEntities){let _=this.docTypeEntities[h];p=p.replace(_.regx,_.val)}for(let h in this.lastEntities){let _=this.lastEntities[h];p=p.replace(_.regex,_.val)}if(this.options.htmlEntities)for(let h in this.htmlEntities){let _=this.htmlEntities[h];p=p.replace(_.regex,_.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function KH(p,h,_,R){return p&&(R===void 0&&(R=h.child.length===0),(p=this.parseTextData(p,h.tagname,_,!1,!!h[":@"]&&Object.keys(h[":@"]).length!==0,R))!==void 0&&p!==""&&h.add(this.options.textNodeName,p),p=""),p}function XH(p,h,_){let R="*."+_;for(let v in p){let b=p[v];if(R===b||h===b)return!0}return!1}function Ds(p,h,_,R){let v=p.indexOf(h,_);if(v===-1)throw new Error(R);return v+h.length-1}function zm(p,h,_,R=">"){let v=function(W,ae,ye=">"){let ue,Ze="";for(let Br=ae;Br<W.length;Br++){let Bn=W[Br];if(ue)Bn===ue&&(ue="");else if(Bn==='"'||Bn==="'")ue=Bn;else if(Bn===ye[0]){if(!ye[1])return{data:Ze,index:Br};if(W[Br+1]===ye[1])return{data:Ze,index:Br}}else Bn==="	"&&(Bn=" ");Ze+=Bn}}(p,h+1,R);if(!v)return;let b=v.data,x=v.index,P=b.search(/\s/),N=b,M=!0;P!==-1&&(N=b.substring(0,P),b=b.substring(P+1).trimStart());let Q=N;if(_){let W=N.indexOf(":");W!==-1&&(N=N.substr(W+1),M=N!==v.data.substr(W+1))}return{tagName:N,tagExp:b,closeIndex:x,attrExpPresent:M,rawTagName:Q}}function QH(p,h,_){let R=_,v=1;for(;_<p.length;_++)if(p[_]==="<")if(p[_+1]==="/"){let b=Ds(p,">",_,`${h} is not closed`);if(p.substring(_+2,b).trim()===h&&(v--,v===0))return{tagContent:p.substring(R,_),i:b};_=b}else if(p[_+1]==="?")_=Ds(p,"?>",_+1,"StopNode is not closed.");else if(p.substr(_+1,3)==="!--")_=Ds(p,"-->",_+3,"StopNode is not closed.");else if(p.substr(_+1,2)==="![")_=Ds(p,"]]>",_,"StopNode is not closed.")-2;else{let b=zm(p,_,">");b&&((b&&b.tagName)===h&&b.tagExp[b.tagExp.length-1]!=="/"&&v++,_=b.closeIndex)}}function sR(p,h,_){if(h&&typeof p=="string"){let R=p.trim();return R==="true"||R!=="false"&&function(v,b={}){if(b=Object.assign({},qH,b),!v||typeof v!="string")return v;let x=v.trim();if(b.skipLike!==void 0&&b.skipLike.test(x))return v;if(v==="0")return 0;if(b.hex&&kH.test(x))return function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(x);if(x.search(/.+[eE].+/)!==-1)return function(N,M,Q){if(!Q.eNotation)return N;let W=M.match(FH);if(W){let ae=W[1]||"",ye=W[3].indexOf("e")===-1?"E":"e",ue=W[2],Ze=ae?N[ue.length+1]===ye:N[ue.length]===ye;return ue.length>1&&Ze?N:ue.length!==1||!W[3].startsWith(`.${ye}`)&&W[3][0]!==ye?Q.leadingZeros&&!Ze?(M=(W[1]||"")+W[3],Number(M)):N:Number(M)}return N}(v,x,b);{let N=MH.exec(x);if(N){let M=N[1]||"",Q=N[2],W=((P=N[3])&&P.indexOf(".")!==-1&&((P=P.replace(/0+$/,""))==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substring(0,P.length-1))),P),ae=M?v[Q.length+1]===".":v[Q.length]===".";if(!b.leadingZeros&&(Q.length>1||Q.length===1&&!ae))return v;{let ye=Number(x),ue=String(ye);if(ye===0||ye===-0)return ye;if(ue.search(/[eE]/)!==-1)return b.eNotation?ye:v;if(x.indexOf(".")!==-1)return ue==="0"||ue===W||ue===`${M}${W}`?ye:v;let Ze=Q?W:x;return Q?Ze===ue||M+Ze===ue?ye:v:Ze===ue||Ze===M+ue?ye:v}}return v}var P}(p,_)}return p!==void 0?p:""}let Wm=Je.getMetaDataSymbol();function YH(p,h){return iR(p,h)}function iR(p,h,_){let R,v={};for(let b=0;b<p.length;b++){let x=p[b],P=JH(x),N="";if(N=_===void 0?P:_+"."+P,P===h.textNodeName)R===void 0?R=x[P]:R+=""+x[P];else{if(P===void 0)continue;if(x[P]){let M=iR(x[P],h,N),Q=ej(M,h);x[Wm]!==void 0&&(M[Wm]=x[Wm]),x[":@"]?ZH(M,x[":@"],N,h):Object.keys(M).length!==1||M[h.textNodeName]===void 0||h.alwaysCreateTextNode?Object.keys(M).length===0&&(h.alwaysCreateTextNode?M[h.textNodeName]="":M=""):M=M[h.textNodeName],v[P]!==void 0&&v.hasOwnProperty(P)?(Array.isArray(v[P])||(v[P]=[v[P]]),v[P].push(M)):h.isArray(P,N,Q)?v[P]=[M]:v[P]=M}}}return typeof R=="string"?R.length>0&&(v[h.textNodeName]=R):R!==void 0&&(v[h.textNodeName]=R),v}function JH(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let R=h[_];if(R!==":@")return R}}function ZH(p,h,_,R){if(h){let v=Object.keys(h),b=v.length;for(let x=0;x<b;x++){let P=v[x];R.isArray(P,_+"."+P,!0,!0)?p[P]=[h[P]]:p[P]=h[P]}}}function ej(p,h){let{textNodeName:_}=h,R=Object.keys(p).length;return R===0||!(R!==1||!p[_]&&typeof p[_]!="boolean"&&p[_]!==0)}class tj{constructor(h){this.externalEntities={},this.options=function(_){return Object.assign({},U,_)}(h)}parse(h,_){if(typeof h!="string"){if(!h.toString)throw new Error("XML data is accepted in String or Bytes[] form.");h=h.toString()}if(_){_===!0&&(_={});let b=a(h,_);if(b!==!0)throw Error(`${b.err.msg}:${b.err.line}:${b.err.col}`)}let R=new $H(this.options);R.addExternalEntities(this.externalEntities);let v=R.parseXml(h);return this.options.preserveOrder||v===void 0?v:YH(v,this.options)}addEntity(h,_){if(_.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(h.indexOf("&")!==-1||h.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(_==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[h]=_}static getMetaDataSymbol(){return Je.getMetaDataSymbol()}}function rj(p,h){let _="";return h.format&&h.indentBy.length>0&&(_=`
`),oR(p,h,"",_)}function oR(p,h,_,R){let v="",b=!1;for(let x=0;x<p.length;x++){let P=p[x],N=nj(P);if(N===void 0)continue;let M="";if(M=_.length===0?N:`${_}.${N}`,N===h.textNodeName){let ye=P[N];sj(M,h)||(ye=h.tagValueProcessor(N,ye),ye=cR(ye,h)),b&&(v+=R),v+=ye,b=!1;continue}if(N===h.cdataPropName){b&&(v+=R),v+=`<![CDATA[${P[N][0][h.textNodeName]}]]>`,b=!1;continue}if(N===h.commentPropName){v+=R+`<!--${P[N][0][h.textNodeName]}-->`,b=!0;continue}if(N[0]==="?"){let ye=aR(P[":@"],h),ue=N==="?xml"?"":R,Ze=P[N][0][h.textNodeName];Ze=Ze.length!==0?" "+Ze:"",v+=ue+`<${N}${Ze}${ye}?>`,b=!0;continue}let Q=R;Q!==""&&(Q+=h.indentBy);let W=R+`<${N}${aR(P[":@"],h)}`,ae=oR(P[N],h,M,Q);h.unpairedTags.indexOf(N)!==-1?h.suppressUnpairedNode?v+=W+">":v+=W+"/>":ae&&ae.length!==0||!h.suppressEmptyNode?ae&&ae.endsWith(">")?v+=W+`>${ae}${R}</${N}>`:(v+=W+">",ae&&R!==""&&(ae.includes("/>")||ae.includes("</"))?v+=R+h.indentBy+ae+R:v+=ae,v+=`</${N}>`):v+=W+"/>",b=!0}return v}function nj(p){let h=Object.keys(p);for(let _=0;_<h.length;_++){let R=h[_];if(p.hasOwnProperty(R)&&R!==":@")return R}}function aR(p,h){let _="";if(p&&!h.ignoreAttributes)for(let R in p){if(!p.hasOwnProperty(R))continue;let v=h.attributeValueProcessor(R,p[R]);v=cR(v,h),v===!0&&h.suppressBooleanAttributes?_+=` ${R.substr(h.attributeNamePrefix.length)}`:_+=` ${R.substr(h.attributeNamePrefix.length)}="${v}"`}return _}function sj(p,h){let _=(p=p.substr(0,p.length-h.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(let R in h.stopNodes)if(h.stopNodes[R]===p||h.stopNodes[R]==="*."+_)return!0;return!1}function cR(p,h){if(p&&p.length>0&&h.processEntities)for(let _=0;_<h.entities.length;_++){let R=h.entities[_];p=p.replace(R.regex,R.val)}return p}let ij={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function $n(p){this.options=Object.assign({},ij,p),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=nR(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=cj),this.processTextOrObjNode=oj,this.options.format?(this.indentate=aj,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function oj(p,h,_,R){let v=this.j2x(p,_+1,R.concat(h));return p[this.options.textNodeName]!==void 0&&Object.keys(p).length===1?this.buildTextValNode(p[this.options.textNodeName],h,v.attrStr,_):this.buildObjectNode(v.val,h,v.attrStr,_)}function aj(p){return this.options.indentBy.repeat(p)}function cj(p){return!(!p.startsWith(this.options.attributeNamePrefix)||p===this.options.textNodeName)&&p.substr(this.attrPrefixLen)}$n.prototype.build=function(p){return this.options.preserveOrder?rj(p,this.options):(Array.isArray(p)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(p={[this.options.arrayNodeName]:p}),this.j2x(p,0,[]).val)},$n.prototype.j2x=function(p,h,_){let R="",v="",b=_.join(".");for(let x in p)if(Object.prototype.hasOwnProperty.call(p,x))if(p[x]===void 0)this.isAttribute(x)&&(v+="");else if(p[x]===null)this.isAttribute(x)||x===this.options.cdataPropName?v+="":x[0]==="?"?v+=this.indentate(h)+"<"+x+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+x+"/"+this.tagEndChar;else if(p[x]instanceof Date)v+=this.buildTextValNode(p[x],x,"",h);else if(typeof p[x]!="object"){let P=this.isAttribute(x);if(P&&!this.ignoreAttributesFn(P,b))R+=this.buildAttrPairStr(P,""+p[x]);else if(!P)if(x===this.options.textNodeName){let N=this.options.tagValueProcessor(x,""+p[x]);v+=this.replaceEntitiesValue(N)}else v+=this.buildTextValNode(p[x],x,"",h)}else if(Array.isArray(p[x])){let P=p[x].length,N="",M="";for(let Q=0;Q<P;Q++){let W=p[x][Q];if(W!==void 0)if(W===null)x[0]==="?"?v+=this.indentate(h)+"<"+x+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+x+"/"+this.tagEndChar;else if(typeof W=="object")if(this.options.oneListGroup){let ae=this.j2x(W,h+1,_.concat(x));N+=ae.val,this.options.attributesGroupName&&W.hasOwnProperty(this.options.attributesGroupName)&&(M+=ae.attrStr)}else N+=this.processTextOrObjNode(W,x,h,_);else if(this.options.oneListGroup){let ae=this.options.tagValueProcessor(x,W);ae=this.replaceEntitiesValue(ae),N+=ae}else N+=this.buildTextValNode(W,x,"",h)}this.options.oneListGroup&&(N=this.buildObjectNode(N,x,M,h)),v+=N}else if(this.options.attributesGroupName&&x===this.options.attributesGroupName){let P=Object.keys(p[x]),N=P.length;for(let M=0;M<N;M++)R+=this.buildAttrPairStr(P[M],""+p[x][P[M]])}else v+=this.processTextOrObjNode(p[x],x,h,_);return{attrStr:R,val:v}},$n.prototype.buildAttrPairStr=function(p,h){return h=this.options.attributeValueProcessor(p,""+h),h=this.replaceEntitiesValue(h),this.options.suppressBooleanAttributes&&h==="true"?" "+p:" "+p+'="'+h+'"'},$n.prototype.buildObjectNode=function(p,h,_,R){if(p==="")return h[0]==="?"?this.indentate(R)+"<"+h+_+"?"+this.tagEndChar:this.indentate(R)+"<"+h+_+this.closeTag(h)+this.tagEndChar;{let v="</"+h+this.tagEndChar,b="";return h[0]==="?"&&(b="?",v=""),!_&&_!==""||p.indexOf("<")!==-1?this.options.commentPropName!==!1&&h===this.options.commentPropName&&b.length===0?this.indentate(R)+`<!--${p}-->`+this.newLine:this.indentate(R)+"<"+h+_+b+this.tagEndChar+p+this.indentate(R)+v:this.indentate(R)+"<"+h+_+b+">"+p+v}},$n.prototype.closeTag=function(p){let h="";return this.options.unpairedTags.indexOf(p)!==-1?this.options.suppressUnpairedNode||(h="/"):h=this.options.suppressEmptyNode?"/":`></${p}`,h},$n.prototype.buildTextValNode=function(p,h,_,R){if(this.options.cdataPropName!==!1&&h===this.options.cdataPropName)return this.indentate(R)+`<![CDATA[${p}]]>`+this.newLine;if(this.options.commentPropName!==!1&&h===this.options.commentPropName)return this.indentate(R)+`<!--${p}-->`+this.newLine;if(h[0]==="?")return this.indentate(R)+"<"+h+_+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(h,p);return v=this.replaceEntitiesValue(v),v===""?this.indentate(R)+"<"+h+_+this.closeTag(h)+this.tagEndChar:this.indentate(R)+"<"+h+_+">"+v+"</"+h+this.tagEndChar}},$n.prototype.replaceEntitiesValue=function(p){if(p&&p.length>0&&this.options.processEntities)for(let h=0;h<this.options.entities.length;h++){let _=this.options.entities[h];p=p.replace(_.regex,_.val)}return p};let uj={validate:a};MI.exports=t})()});var FI=S(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0});Ny.parseXML=qz;var Mz=qI(),Oy=new Mz.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(e,t)=>t.trim()===""&&t.includes(`
`)?"":void 0});Oy.addEntity("#xD","\r");Oy.addEntity("#10",`
`);function qz(e){return Oy.parse(e,!0)}});var pd=S(fd=>{"use strict";var Fz=FI();function $z(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function Bz(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var dd=class{constructor(t){f(this,"value");this.value=t}toString(){return Bz(""+this.value)}},Dy=class e{constructor(t,r=[]){f(this,"name");f(this,"children");f(this,"attributes",{});this.name=t,this.children=r}static of(t,r,n){let s=new e(t);return r!==void 0&&s.addChildNode(new dd(r)),n!==void 0&&s.withName(n),s}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let s=e.of(r,t[r]).withName(n);this.c(s)}}l(t,r,n,s){t[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(t,r,n,s){if(t[r]!=null){let i=s(),o=new e(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${$z(""+i)}"`)}return r+=t?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(fd,"parseXML",{enumerable:!0,get:function(){return Fz.parseXML}});fd.XmlNode=Dy;fd.XmlText=dd});var $I,BI,UI,is,hd=C(()=>{$I=T(pd());zt();Pe();BI=T(ne()),UI=T(dt());ts();is=class extends St{constructor(r){super();f(this,"settings");f(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new Fs(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,s){let i=V.of(r),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(l=>!!l.getMemberTraits().eventPayload)){let l={},d=Object.keys(o)[0];return o[d].isBlobSchema()?l[d]=n:l[d]=this.read(o[d],n),l}let c=(this.serdeContext?.utf8Encoder??UI.toUtf8)(n),u=this.parseXml(c);return this.readSchema(r,s?u[s]:u)}readSchema(r,n){let s=V.of(r);if(s.isUnitSchema())return;let i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(n))return this.readSchema(s,[n]);if(n==null)return n;if(typeof n=="object"){let o=!!i.sparse,a=!!i.xmlFlattened;if(s.isListSchema()){let u=s.getValueSchema(),l=[],d=u.getMergedTraits().xmlName??"member",m=a?n:(n[0]??n)[d],g=Array.isArray(m)?m:[m];for(let y of g)(y!=null||o)&&l.push(this.readSchema(u,y));return l}let c={};if(s.isMapSchema()){let u=s.getKeySchema(),l=s.getValueSchema(),d;a?d=Array.isArray(n)?n:[n]:d=Array.isArray(n.entry)?n.entry:[n.entry];let m=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let y of d){let w=y[m],I=y[g];(I!=null||o)&&(c[w]=this.readSchema(l,I))}return c}if(s.isStructSchema()){for(let[u,l]of s.structIterator()){let d=l.getMergedTraits(),m=d.httpPayload?d.xmlName??l.getName():l.getMemberTraits().xmlName??u;n[m]!=null&&(c[u]=this.readSchema(l,n[m]))}return c}if(s.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,n)}parseXml(r){if(r.length){let n;try{n=(0,$I.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,BI.getValueFromTextNode)(o)}return{}}}});var HI,jI,md,VI=C(()=>{zt();Pe();Vt();HI=T(ne()),jI=T(ft());ts();md=class extends St{constructor(r){super();f(this,"settings");f(this,"buffer");this.settings=r}write(r,n,s=""){this.buffer===void 0&&(this.buffer="");let i=V.of(r);if(s&&!s.endsWith(".")&&(s+="."),i.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??jI.toBase64)(n)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())n!=null?(this.writeKey(s),this.writeValue(String(n))):i.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,zr.v4)()));else if(i.isBigIntegerSchema())n!=null&&(this.writeKey(s),this.writeValue(String(n)));else if(i.isBigDecimalSchema())n!=null&&(this.writeKey(s),this.writeValue(n instanceof Be?n.string:String(n)));else if(i.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(s),Zt(i,this.settings)){case 5:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,HI.dateToUtcString)(n));break;case 7:this.writeValue(String(n.getTime()/1e3));break}}else{if(i.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${i.getName(!0)}`);if(i.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=i.getValueSchema(),a=this.settings.flattenLists||i.getMergedTraits().xmlFlattened,c=1;for(let u of n){if(u==null)continue;let l=this.getKey("member",o.getMergedTraits().xmlName),d=a?`${s}${c}`:`${s}${l}.${c}`;this.write(o,u,d),++c}}}else if(i.isMapSchema()){if(n&&typeof n=="object"){let o=i.getKeySchema(),a=i.getValueSchema(),c=i.getMergedTraits().xmlFlattened,u=1;for(let[l,d]of Object.entries(n)){if(d==null)continue;let m=this.getKey("key",o.getMergedTraits().xmlName),g=c?`${s}${u}.${m}`:`${s}entry.${u}.${m}`,y=this.getKey("value",a.getMergedTraits().xmlName),w=c?`${s}${u}.${y}`:`${s}entry.${u}.${y}`;this.write(o,l,g),this.write(a,d,w),++u}}}else if(i.isStructSchema()){if(n&&typeof n=="object")for(let[o,a]of i.structIterator()){if(n[o]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(o,a.getMergedTraits().xmlName),u=`${s}${c}`;this.write(a,n[o],u)}}else if(!i.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let s=n??r;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${Ur(r)}=`}writeValue(r){this.buffer+=Ur(r)}}});var zi,Ly=C(()=>{zt();Pe();Bi();hd();VI();zi=class extends cn{constructor(r){super({defaultNamespace:r.defaultNamespace});f(this,"options");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new ir);this.options=r;let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new md(n),this.deserializer=new is(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),(Cr(r.input)==="unit"||!i.body)&&(i.body="");let o=r.name.split("#")[1]??r.name;return i.body=`Action=${o}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(r,n,s){let i=this.deserializer,o=V.of(r.output),a={};if(s.statusCode>=300){let m=await Rr(s.body,n);m.byteLength>0&&Object.assign(a,await i.read(15,m)),await this.handleError(r,n,s,a,this.deserializeMetadata(s))}for(let m in s.headers){let g=s.headers[m];delete s.headers[m],s.headers[m.toLowerCase()]=g}let c=r.name.split("#")[1]??r.name,u=o.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,l=await Rr(s.body,n);return l.byteLength>0&&Object.assign(a,await i.read(o,l,u)),{$metadata:this.deserializeMetadata(s),...a}}useNestedResult(){return!0}async handleError(r,n,s,i,o){let a=this.loadQueryErrorCode(s,i)??"Unknown",c=this.loadQueryError(i),u=this.loadQueryErrorMessage(i);c.message=u,c.Error={Type:c.Type,Code:c.Code,Message:u};let{errorSchema:l,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,c,o,(I,A)=>{try{return I.getSchema(A)}catch{return I.find(k=>V.of(k).getMergedTraits().awsQueryError?.[0]===A)}}),m=V.of(l),g=le.for(l[1]).getErrorCtor(l)??Error,y=new g(u),w={Error:c.Error};for(let[I,A]of m.structIterator()){let O=A.getMergedTraits().xmlName??I,k=c[O]??i[O];w[I]=this.deserializer.readSchema(A,k)}throw Object.assign(y,d,{$fault:m.getMergedTraits().error,message:u},w)}loadQueryErrorCode(r,n){let s=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(s!==void 0)return s;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var gd,zI=C(()=>{Ly();gd=class extends zi{constructor(r){super(r);f(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var WI,GI,Wi,Ed,yd,ky=C(()=>{WI=T(pd()),GI=T(ne());Iy();Wi=(e,t)=>id(e,t).then(r=>{if(r.length){let n;try{n=(0,WI.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,GI.getValueFromTextNode)(o)}return{}}),Ed=async(e,t)=>{let r=await Wi(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},yd=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var or,My,Sd,Gi,qy=C(()=>{or=T(pd());zt();Pe();Vt();My=T(ne()),Sd=T(ft());ts();Gi=class extends St{constructor(r){super();f(this,"settings");f(this,"stringBuffer");f(this,"byteBuffer");f(this,"buffer");this.settings=r}write(r,n){let s=V.of(r);if(s.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(s.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??Sd.fromBase64)(n);else{this.buffer=this.writeStruct(s,n,void 0);let i=s.getMergedTraits();i.httpPayload&&!i.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,s){let i=r.getMergedTraits(),o=r.isMemberSchema()&&!i.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():i.xmlName??r.getName();if(!o||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=or.XmlNode.of(o),[c,u]=this.getXmlnsAttribute(r,s);for(let[l,d]of r.structIterator()){let m=n[l];if(m!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){a.addAttribute(d.getMergedTraits().xmlName??l,this.writeSimple(d,m));continue}if(d.isListSchema())this.writeList(d,m,a,u);else if(d.isMapSchema())this.writeMap(d,m,a,u);else if(d.isStructSchema())a.addChildNode(this.writeStruct(d,m,u));else{let g=or.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,m,g,u),a.addChildNode(g)}}}return u&&a.addAttribute(c,u),a}writeList(r,n,s,i){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let o=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),u=!!c.sparse,l=!!o.xmlFlattened,[d,m]=this.getXmlnsAttribute(r,i),g=(y,w)=>{if(a.isListSchema())this.writeList(a,Array.isArray(w)?w:[w],y,m);else if(a.isMapSchema())this.writeMap(a,w,y,m);else if(a.isStructSchema()){let I=this.writeStruct(a,w,m);y.addChildNode(I.withName(l?o.xmlName??r.getMemberName():c.xmlName??"member"))}else{let I=or.XmlNode.of(l?o.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,w,I,m),y.addChildNode(I)}};if(l)for(let y of n)(u||y!=null)&&g(s,y);else{let y=or.XmlNode.of(o.xmlName??r.getMemberName());m&&y.addAttribute(d,m);for(let w of n)(u||w!=null)&&g(y,w);s.addChildNode(y)}}writeMap(r,n,s,i,o=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),l=c.getMergedTraits().xmlName??"key",d=r.getValueSchema(),m=d.getMergedTraits(),g=m.xmlName??"value",y=!!m.sparse,w=!!a.xmlFlattened,[I,A]=this.getXmlnsAttribute(r,i),O=(k,q,U)=>{let ce=or.XmlNode.of(l,q),[Je,ie]=this.getXmlnsAttribute(c,A);ie&&ce.addAttribute(Je,ie),k.addChildNode(ce);let Z=or.XmlNode.of(g);d.isListSchema()?this.writeList(d,U,Z,A):d.isMapSchema()?this.writeMap(d,U,Z,A,!0):d.isStructSchema()?Z=this.writeStruct(d,U,A):this.writeSimpleInto(d,U,Z,A),k.addChildNode(Z)};if(w){for(let[k,q]of Object.entries(n))if(y||q!=null){let U=or.XmlNode.of(a.xmlName??r.getMemberName());O(U,k,q),s.addChildNode(U)}}else{let k;o||(k=or.XmlNode.of(a.xmlName??r.getMemberName()),A&&k.addAttribute(I,A),s.addChildNode(k));for(let[q,U]of Object.entries(n))if(y||U!=null){let ce=or.XmlNode.of("entry");O(ce,q,U),(o?s:k).addChildNode(ce)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=V.of(r),i=null;if(n&&typeof n=="object")if(s.isBlobSchema())i=(this.serdeContext?.base64Encoder??Sd.toBase64)(n);else if(s.isTimestampSchema()&&n instanceof Date)switch(Zt(s,this.settings)){case 5:i=n.toISOString().replace(".000Z","Z");break;case 6:i=(0,My.dateToUtcString)(n);break;case 7:i=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),i=(0,My.dateToUtcString)(n);break}else{if(s.isBigDecimalSchema()&&n)return n instanceof Be?n.string:String(n);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(n)),s.isStringSchema()&&(n===void 0&&s.isIdempotencyToken()?i=(0,zr.v4)():i=String(n)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${n}`);return i}writeSimpleInto(r,n,s,i){let o=this.writeSimple(r,n),a=V.of(r),c=new or.XmlText(o),[u,l]=this.getXmlnsAttribute(a,i);l&&s.addAttribute(u,l),s.addChildNode(c)}getXmlnsAttribute(r,n){let s=r.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==n?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}});var Ki,Fy=C(()=>{ts();hd();qy();Ki=class extends St{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Gi(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new is(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var _d,KI=C(()=>{zt();Pe();Bi();ky();Fy();_d=class extends qs{constructor(r){super(r);f(this,"codec");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new ir);let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new Ki(n),this.serializer=new Bs(this.codec.createSerializer(),n),this.deserializer=new $s(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=V.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]===this.getDefaultContentType()&&typeof i.body=="string"&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=yd(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=V.of(c),d=i.Error?.message??i.Error?.Message??i.message??i.Message??"Unknown",m=le.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let y={};for(let[w,I]of l.structIterator()){let A=I.getMergedTraits().xmlName??w,O=i.Error?.[A]??i[A];y[w]=this.codec.createDeserializer().readSchema(I,O)}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},y)}getDefaultContentType(){return"application/xml"}}});var $y={};jt($y,{AwsEc2QueryProtocol:()=>gd,AwsJson1_0Protocol:()=>ud,AwsJson1_1Protocol:()=>ld,AwsJsonRpcProtocol:()=>ss,AwsQueryProtocol:()=>zi,AwsRestJsonProtocol:()=>Vi,AwsRestXmlProtocol:()=>_d,AwsSmithyRpcV2CborProtocol:()=>nd,JsonCodec:()=>ns,JsonShapeDeserializer:()=>Hi,JsonShapeSerializer:()=>ji,XmlCodec:()=>Ki,XmlShapeDeserializer:()=>is,XmlShapeSerializer:()=>Gi,_toBool:()=>iI,_toNum:()=>oI,_toStr:()=>sI,awsExpectUnion:()=>LI,loadRestJsonErrorCode:()=>Ui,loadRestXmlErrorCode:()=>yd,parseJsonBody:()=>Va,parseJsonErrorBody:()=>CI,parseXmlBody:()=>Wi,parseXmlErrorBody:()=>Ed});var Wa=C(()=>{nI();aI();xI();OI();cd();NI();ad();Py();xy();kI();za();zI();Ly();KI();Fy();hd();qy();ky()});var mn={};jt(mn,{AWSSDKSigV4Signer:()=>ME,AwsEc2QueryProtocol:()=>gd,AwsJson1_0Protocol:()=>ud,AwsJson1_1Protocol:()=>ld,AwsJsonRpcProtocol:()=>ss,AwsQueryProtocol:()=>zi,AwsRestJsonProtocol:()=>Vi,AwsRestXmlProtocol:()=>_d,AwsSdkSigV4ASigner:()=>$a,AwsSdkSigV4Signer:()=>Gt,AwsSmithyRpcV2CborProtocol:()=>nd,JsonCodec:()=>ns,JsonShapeDeserializer:()=>Hi,JsonShapeSerializer:()=>ji,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>Mi,NODE_SIGV4A_CONFIG_OPTIONS:()=>hT,XmlCodec:()=>Ki,XmlShapeDeserializer:()=>is,XmlShapeSerializer:()=>Gi,_toBool:()=>iI,_toNum:()=>oI,_toStr:()=>sI,awsExpectUnion:()=>LI,emitWarningIfUnsupportedVersion:()=>Di,getBearerTokenEnvKey:()=>$l,loadRestJsonErrorCode:()=>Ui,loadRestXmlErrorCode:()=>yd,parseJsonBody:()=>Va,parseJsonErrorBody:()=>CI,parseXmlBody:()=>Wi,parseXmlErrorBody:()=>Ed,resolveAWSSDKSigV4Config:()=>$T,resolveAwsSdkSigV4AConfig:()=>pT,resolveAwsSdkSigV4Config:()=>Gs,setCredentialFeature:()=>Kn,setFeature:()=>YA,setTokenFeature:()=>ZA,state:()=>Fl,validateSigningProperties:()=>ki});var _t=C(()=>{Tr();ty();Wa()});var Qi=S(Xi=>{"use strict";var Uz=(Wt(),se(Hs)),Hz=Ni(),jz=we(),Gr=(_t(),se(mn)),JI=void 0;function Vz(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}function zz(e){let t=Uz.normalizeProvider(e.userAgentAppId??JI),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await t();if(!Vz(n)){let s=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var Wz=/\d{12}\.ddb/;async function Gz(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&Gr.setFeature(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let i=await t.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?Gr.setFeature(e,"RETRY_MODE_ADAPTIVE","F"):Gr.setFeature(e,"RETRY_MODE_STANDARD","E"):Gr.setFeature(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let i=e.endpointV2;switch(String(i?.url?.hostname).match(Wz)&&Gr.setFeature(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":Gr.setFeature(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":Gr.setFeature(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":Gr.setFeature(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&Gr.setFeature(e,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))Gr.setFeature(e,o,a)}}var XI="user-agent",By="x-amz-user-agent",QI=" ",Uy="/",Kz=/[^!$%&'*+\-.^_`|~\w]/g,Xz=/[^!$%&'*+\-.^_`|~\w#]/g,YI="-",Qz=1024;function Yz(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=Qz){t.length?t+=","+n:t+=n;continue}break}return t}var ZI=e=>(t,r)=>async n=>{let{request:s}=n;if(!jz.HttpRequest.isInstance(s))return t(n);let{headers:i}=s,o=r?.userAgent?.map(vd)||[],a=(await e.defaultUserAgentProvider()).map(vd);await Gz(r,e,n);let c=r;a.push(`m/${Yz(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=e?.customUserAgent?.map(vd)||[],l=await e.userAgentAppId();l&&a.push(vd(["app",`${l}`]));let d=Hz.getUserAgentPrefix(),m=(d?[d]:[]).concat([...a,...o,...u]).join(QI),g=[...a.filter(y=>y.startsWith("aws-sdk-")),...u].join(QI);return e.runtime!=="browser"?(g&&(i[By]=i[By]?`${i[XI]} ${g}`:g),i[XI]=m):i[By]=m,t({...n,request:s})},vd=e=>{let t=e[0].split(Uy).map(o=>o.replace(Kz,YI)).join(Uy),r=e[1]?.replace(Xz,YI),n=t.indexOf(Uy),s=t.substring(0,n),i=t.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},eP={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Jz=e=>({applyToStack:t=>{t.add(ZI(e),eP)}});Xi.DEFAULT_UA_APP_ID=JI;Xi.getUserAgentMiddlewareOptions=eP;Xi.getUserAgentPlugin=Jz;Xi.resolveUserAgentConfig=zz;Xi.userAgentMiddleware=ZI});var Hy=S(Yi=>{"use strict";var Zz=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},eW=(e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n};Yi.SelectorType=void 0;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Yi.SelectorType||(Yi.SelectorType={}));Yi.booleanSelector=Zz;Yi.numberSelector=eW});var ar=S(pt=>{"use strict";var os=Hy(),wd=Pt(),tW=Vs(),nP="AWS_USE_DUALSTACK_ENDPOINT",sP="use_dualstack_endpoint",rW=!1,nW={environmentVariableSelector:e=>os.booleanSelector(e,nP,os.SelectorType.ENV),configFileSelector:e=>os.booleanSelector(e,sP,os.SelectorType.CONFIG),default:!1},iP="AWS_USE_FIPS_ENDPOINT",oP="use_fips_endpoint",sW=!1,iW={environmentVariableSelector:e=>os.booleanSelector(e,iP,os.SelectorType.ENV),configFileSelector:e=>os.booleanSelector(e,oP,os.SelectorType.CONFIG),default:!1},oW=e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:s}=e;return Object.assign(e,{tls:t??!0,endpoint:wd.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:wd.normalizeProvider(s??!1)})},aW=async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await e.useDualstackEndpoint(),i=await e.useFipsEndpoint(),{hostname:o}=await e.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${o}`)},cW=e=>{let t=wd.normalizeProvider(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=e;return Object.assign(e,{tls:i??!0,endpoint:r?wd.normalizeProvider(typeof r=="string"?s(r):r):()=>aW({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},aP="AWS_REGION",cP="region",uW={environmentVariableSelector:e=>e[aP],configFileSelector:e=>e[cP],default:()=>{throw new Error("Region is missing")}},lW={preferredFile:"credentials"},tP=new Set,dW=(e,t=tW.isValidHostLabel)=>{if(!tP.has(e)&&!t(e))if(e==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${e}" is not a valid hostname component.`);else tP.add(e)},uP=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),fW=e=>uP(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,pW=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{let n=typeof t=="function"?await t():t,s=fW(n);return dW(s),s},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return uP(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},rP=(e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,hW=(e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),mW=(e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws",gW=(e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=e.match(s);if(i)return i[0].slice(1,-1)}},EW=(e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=mW(e,{partitionHash:i}),a=e in s?e:i[o]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},u=rP(s[a]?.variants,c),l=rP(i[o]?.variants,c),d=hW(a,{regionHostname:u,partitionHostname:l});if(d===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let m=gW(d,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:t});return{partition:o,signingService:n,hostname:d,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};pt.CONFIG_USE_DUALSTACK_ENDPOINT=sP;pt.CONFIG_USE_FIPS_ENDPOINT=oP;pt.DEFAULT_USE_DUALSTACK_ENDPOINT=rW;pt.DEFAULT_USE_FIPS_ENDPOINT=sW;pt.ENV_USE_DUALSTACK_ENDPOINT=nP;pt.ENV_USE_FIPS_ENDPOINT=iP;pt.NODE_REGION_CONFIG_FILE_OPTIONS=lW;pt.NODE_REGION_CONFIG_OPTIONS=uW;pt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=nW;pt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=iW;pt.REGION_ENV_NAME=aP;pt.REGION_INI_NAME=cP;pt.getRegionInfo=EW;pt.resolveCustomEndpointsConfig=oW;pt.resolveEndpointsConfig=cW;pt.resolveRegionConfig=pW});var Ga=S(bd=>{"use strict";var yW=we(),lP="content-length";function dP(e){return t=>async r=>{let n=r.request;if(yW.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(lP)===-1)try{let o=e(s);n.headers={...n.headers,[lP]:String(o)}}catch{}}return t({...r,request:n})}}var fP={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},SW=e=>({applyToStack:t=>{t.add(dP(e.bodyLengthChecker),fP)}});bd.contentLengthMiddleware=dP;bd.contentLengthMiddlewareOptions=fP;bd.getContentLengthPlugin=SW});var Vy=S(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.getHomeDir=void 0;var _W=require("os"),vW=require("path"),jy={},wW=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",bW=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${vW.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let s=wW();return jy[s]||(jy[s]=(0,_W.homedir)()),jy[s]};Rd.getHomeDir=bW});var zy=S(Cd=>{"use strict";Object.defineProperty(Cd,"__esModule",{value:!0});Cd.getSSOTokenFilepath=void 0;var RW=require("crypto"),CW=require("path"),AW=Vy(),TW=e=>{let r=(0,RW.createHash)("sha1").update(e).digest("hex");return(0,CW.join)((0,AW.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Cd.getSSOTokenFilepath=TW});var pP=S(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.getSSOTokenFromFile=as.tokenIntercept=void 0;var IW=require("fs/promises"),PW=zy();as.tokenIntercept={};var xW=async e=>{if(as.tokenIntercept[e])return as.tokenIntercept[e];let t=(0,PW.getSSOTokenFilepath)(e),r=await(0,IW.readFile)(t,"utf8");return JSON.parse(r)};as.getSSOTokenFromFile=xW});var hP=S(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.readFile=er.fileIntercept=er.filePromises=void 0;var OW=require("fs/promises");er.filePromises={};er.fileIntercept={};var NW=(e,t)=>er.fileIntercept[e]!==void 0?er.fileIntercept[e]:((!er.filePromises[e]||t?.ignoreCache)&&(er.filePromises[e]=(0,OW.readFile)(e,"utf8")),er.filePromises[e]);er.readFile=NW});var gn=S(Lt=>{"use strict";var Ka=Vy(),mP=zy(),Wy=pP(),Ad=require("path"),Td=nn(),Ji=hP(),EP="AWS_PROFILE",yP="default",DW=e=>e.profile||process.env[EP]||yP,Xs=".",LW=e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Xs);return r===-1?!1:Object.values(Td.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let s=r.indexOf(Xs),i=r.substring(0,s)===Td.IniSectionType.PROFILE?r.substring(s+1):r;return t[i]=n,t},{...e.default&&{default:e.default}}),kW="AWS_CONFIG_FILE",SP=()=>process.env[kW]||Ad.join(Ka.getHomeDir(),".aws","config"),MW="AWS_SHARED_CREDENTIALS_FILE",qW=()=>process.env[MW]||Ad.join(Ka.getHomeDir(),".aws","credentials"),FW=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,$W=["__proto__","profile __proto__"],Gy=e=>{let t={},r,n;for(let s of e.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=FW.exec(a);if(c){let[,u,,l]=c;Object.values(Td.IniSectionType).includes(u)&&(r=[u,l].join(Xs))}else r=a;if($W.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),t[r]=t[r]||{};let l=n?[n,c].join(Xs):c;t[r][l]=u}}}}return t},gP=()=>({}),_P=async(e={})=>{let{filepath:t=qW(),configFilepath:r=SP()}=e,n=Ka.getHomeDir(),s="~/",i=t;t.startsWith(s)&&(i=Ad.join(n,t.slice(2)));let o=r;r.startsWith(s)&&(o=Ad.join(n,r.slice(2)));let a=await Promise.all([Ji.readFile(o,{ignoreCache:e.ignoreCache}).then(Gy).then(LW).catch(gP),Ji.readFile(i,{ignoreCache:e.ignoreCache}).then(Gy).catch(gP)]);return{configFile:a[0],credentialsFile:a[1]}},BW=e=>Object.entries(e).filter(([t])=>t.startsWith(Td.IniSectionType.SSO_SESSION+Xs)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Xs)+1)]:n}),{}),UW=()=>({}),HW=async(e={})=>Ji.readFile(e.configFilepath??SP()).then(Gy).then(BW).catch(UW),jW=(...e)=>{let t={};for(let r of e)for(let[n,s]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],s):t[n]=s;return t},VW=async e=>{let t=await _P(e);return jW(t.configFile,t.credentialsFile)},zW={getFileRecord(){return Ji.fileIntercept},interceptFile(e,t){Ji.fileIntercept[e]=Promise.resolve(t)},getTokenRecord(){return Wy.tokenIntercept},interceptToken(e,t){Wy.tokenIntercept[e]=t}};Object.defineProperty(Lt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return Wy.getSSOTokenFromFile}});Object.defineProperty(Lt,"readFile",{enumerable:!0,get:function(){return Ji.readFile}});Lt.CONFIG_PREFIX_SEPARATOR=Xs;Lt.DEFAULT_PROFILE=yP;Lt.ENV_PROFILE=EP;Lt.externalDataInterceptor=zW;Lt.getProfileName=DW;Lt.loadSharedConfigFiles=_P;Lt.loadSsoSessionData=HW;Lt.parseKnownFiles=VW;Object.keys(Ka).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Lt,e)&&Object.defineProperty(Lt,e,{enumerable:!0,get:function(){return Ka[e]}})});Object.keys(mP).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Lt,e)&&Object.defineProperty(Lt,e,{enumerable:!0,get:function(){return mP[e]}})})});var En=S(bP=>{"use strict";var Xa=Dt(),vP=gn();function wP(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}var WW=(e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new Xa.CredentialsProviderError(r.message||`Not found in ENV: ${wP(e.toString())}`,{logger:t?.logger})}},GW=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=vP.getProfileName(r),{configFile:s,credentialsFile:i}=await vP.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=t==="config"?{...o,...a}:{...a,...o};try{let l=e(c,t==="config"?s:i);if(l===void 0)throw new Error;return l}catch(u){throw new Xa.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${wP(e.toString())}`,{logger:r.logger})}},KW=e=>typeof e=="function",XW=e=>KW(e)?async()=>await e():Xa.fromStatic(e),QW=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return Xa.memoize(Xa.chain(WW(e,o),GW(t,n),XW(r)))};bP.loadConfig=QW});var TP=S(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.getEndpointUrlConfig=void 0;var RP=gn(),CP="AWS_ENDPOINT_URL",AP="endpoint_url",YW=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(i=>i.toUpperCase()),n=t[[CP,...r].join("_")];if(n)return n;let s=t[CP];if(s)return s},configFileSelector:(t,r)=>{if(r&&t.services){let s=r[["services",t.services].join(RP.CONFIG_PREFIX_SEPARATOR)];if(s){let i=e.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),AP].join(RP.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=t[AP];if(n)return n},default:void 0});Id.getEndpointUrlConfig=YW});var IP=S(Pd=>{"use strict";Object.defineProperty(Pd,"__esModule",{value:!0});Pd.getEndpointFromConfig=void 0;var JW=En(),ZW=TP(),eG=async e=>(0,JW.loadConfig)((0,ZW.getEndpointUrlConfig)(e??""))();Pd.getEndpointFromConfig=eG});var Sn=S(yn=>{"use strict";var xP=IP(),PP=Gn(),tG=(Wt(),se(Hs)),xd=Pt(),rG=Sa(),nG=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),cG(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!aG(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},sG=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,iG=/(\d+\.){3}\d+/,oG=/\.\./,aG=e=>sG.test(e)&&!iG.test(e)&&!oG.test(e),cG=e=>{let[t,r,n,,,s]=e.split(":"),i=t==="arn"&&e.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o},uG=(e,t,r)=>{let n=async()=>{let s=r[e]??r[t];return typeof s=="function"?s():s};return e==="credentialScope"||t==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},Ky=e=>typeof e=="object"?"url"in e?PP.parseUrl(e.url):e:PP.parseUrl(e),OP=async(e,t,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await xP.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(Ky(o)),r.isCustomEndpoint=!0)}let s=await NP(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},NP=async(e,t,r)=>{let n={},s=t?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=e[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await uG(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await nG(n),n},DP=({config:e,instructions:t})=>(r,n)=>async s=>{e.isCustomEndpoint&&tG.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await OP(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=xd.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},LP={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:rG.serializerMiddlewareOption.name},lG=(e,t)=>({applyToStack:r=>{r.addRelativeTo(DP({config:e,instructions:t}),LP)}}),dG=e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=e,i=r!=null?async()=>Ky(await xd.normalizeProvider(r)()):void 0,a=Object.assign(e,{endpoint:i,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:xd.normalizeProvider(n??!1),useFipsEndpoint:xd.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=xP.getEndpointFromConfig(e.serviceId)),c),a},fG=e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e};yn.endpointMiddleware=DP;yn.endpointMiddlewareOptions=LP;yn.getEndpointFromInstructions=OP;yn.getEndpointPlugin=lG;yn.resolveEndpointConfig=dG;yn.resolveEndpointRequiredConfig=fG;yn.resolveParams=NP;yn.toEndpointV1=Ky});var Qy=S(cs=>{"use strict";var pG=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],hG=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],mG=["TimeoutError","RequestTimeout","RequestTimeoutException"],gG=[500,502,503,504],EG=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],yG=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],kP=e=>e?.$retryable!==void 0,SG=e=>pG.includes(e.name),MP=e=>e.$metadata?.clockSkewCorrected,qP=e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},_G=e=>e.$metadata?.httpStatusCode===429||hG.includes(e.name)||e.$retryable?.throttling==!0,Xy=(e,t=0)=>kP(e)||MP(e)||mG.includes(e.name)||EG.includes(e?.code||"")||yG.includes(e?.code||"")||gG.includes(e.$metadata?.httpStatusCode||0)||qP(e)||e.cause!==void 0&&t<=10&&Xy(e.cause,t+1),vG=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Xy(e)}return!1};cs.isBrowserNetworkError=qP;cs.isClockSkewCorrectedError=MP;cs.isClockSkewError=SG;cs.isRetryableByTrait=kP;cs.isServerError=vG;cs.isThrottlingError=_G;cs.isTransientError=Xy});var Zi=S(ze=>{"use strict";var wG=Qy();ze.RETRY_MODES=void 0;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ze.RETRY_MODES||(ze.RETRY_MODES={}));var Yy=3,bG=ze.RETRY_MODES.STANDARD,Nd=class Nd{constructor(t){f(this,"beta");f(this,"minCapacity");f(this,"minFillRate");f(this,"scaleConstant");f(this,"smooth");f(this,"currentCapacity",0);f(this,"enabled",!1);f(this,"lastMaxRate",0);f(this,"measuredTxRate",0);f(this,"requestCount",0);f(this,"fillRate");f(this,"lastThrottleTime");f(this,"lastTimestamp",0);f(this,"lastTxRateBucket");f(this,"maxCapacity");f(this,"timeWindow",0);this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Nd.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),wG.isThrottlingError(t)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};f(Nd,"setTimeoutFn",setTimeout);var Od=Nd,Qa=100,tS=20*1e3,$P=500,Jy=500,BP=5,UP=10,HP=1,RG="amz-sdk-invocation-id",CG="amz-sdk-request",AG=()=>{let e=Qa;return{computeNextBackoffDelay:n=>Math.floor(Math.min(tS,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}},FP=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(tS,e),getRetryCost:()=>r}),Ya=class{constructor(t){f(this,"maxAttempts");f(this,"mode",ze.RETRY_MODES.STANDARD);f(this,"capacity",Jy);f(this,"retryBackoffStrategy",AG());f(this,"maxAttemptsProvider");this.maxAttempts=t,this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return FP({retryDelay:Qa,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?$P:Qa);let i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,FP({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Jy,this.capacity+(t.getRetryCost()??HP))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Yy}`),Yy}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?UP:BP}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},Zy=class{constructor(t,r){f(this,"maxAttemptsProvider");f(this,"rateLimiter");f(this,"standardRetryStrategy");f(this,"mode",ze.RETRY_MODES.ADAPTIVE);this.maxAttemptsProvider=t;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Od,this.standardRetryStrategy=new Ya(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},eS=class extends Ya{constructor(r,n=Qa){super(typeof r=="function"?r:async()=>r);f(this,"computeNextBackoffDelay");typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(r,n){let s=await super.refreshRetryTokenForRetry(r,n);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};ze.AdaptiveRetryStrategy=Zy;ze.ConfiguredRetryStrategy=eS;ze.DEFAULT_MAX_ATTEMPTS=Yy;ze.DEFAULT_RETRY_DELAY_BASE=Qa;ze.DEFAULT_RETRY_MODE=bG;ze.DefaultRateLimiter=Od;ze.INITIAL_RETRY_TOKENS=Jy;ze.INVOCATION_ID_HEADER=RG;ze.MAXIMUM_RETRY_DELAY=tS;ze.NO_RETRY_INCREMENT=HP;ze.REQUEST_HEADER=CG;ze.RETRY_COST=BP;ze.StandardRetryStrategy=Ya;ze.THROTTLING_RETRY_DELAY_BASE=$P;ze.TIMEOUT_RETRY_COST=UP});var jP=S(Dd=>{"use strict";Object.defineProperty(Dd,"__esModule",{value:!0});Dd.isStreamingPayload=void 0;var TG=require("stream"),IG=e=>e?.body instanceof TG.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;Dd.isStreamingPayload=IG});var _n=S(rt=>{"use strict";var Ue=Zi(),eo=we(),us=Qy(),zP=sE(),VP=Pt(),PG=ne(),xG=jP(),OG=(e,t)=>{let r=e,n=Ue.NO_RETRY_INCREMENT,s=Ue.RETRY_COST,i=Ue.TIMEOUT_RETRY_COST,o=e,a=d=>d.name==="TimeoutError"?i:s,c=d=>a(d)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");let m=a(d);return o-=m,m},releaseRetryTokens:d=>{o+=d??n,o=Math.min(o,r)}})},WP=(e,t)=>Math.floor(Math.min(Ue.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),GP=e=>e?us.isRetryableByTrait(e)||us.isClockSkewError(e)||us.isThrottlingError(e)||us.isTransientError(e):!1,KP=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),Ld=class{constructor(t,r){f(this,"maxAttemptsProvider");f(this,"retryDecider");f(this,"delayDecider");f(this,"retryQuota");f(this,"mode",Ue.RETRY_MODES.STANDARD);this.maxAttemptsProvider=t,this.retryDecider=r?.retryDecider??GP,this.delayDecider=r?.delayDecider??WP,this.retryQuota=r?.retryQuota??OG(Ue.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=Ue.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(eo.HttpRequest.isInstance(c)&&(c.headers[Ue.INVOCATION_ID_HEADER]=zP.v4());;)try{eo.HttpRequest.isInstance(c)&&(c.headers[Ue.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await t(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,{response:u,output:l}}catch(u){let l=KP(u);if(i++,this.shouldRetry(l,i,a)){s=this.retryQuota.retrieveRetryTokens(l);let d=this.delayDecider(us.isThrottlingError(l)?Ue.THROTTLING_RETRY_DELAY_BASE:Ue.DEFAULT_RETRY_DELAY_BASE,i),m=NG(l.$response),g=Math.max(m||0,d);o+=g,await new Promise(y=>setTimeout(y,g));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=i,l.$metadata.totalRetryDelay=o,l}}},NG=e=>{if(!eo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},rS=class extends Ld{constructor(r,n){let{rateLimiter:s,...i}=n??{};super(r,i);f(this,"rateLimiter");this.rateLimiter=s??new Ue.DefaultRateLimiter,this.mode=Ue.RETRY_MODES.ADAPTIVE}async retry(r,n){return super.retry(r,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},nS="AWS_MAX_ATTEMPTS",sS="max_attempts",DG={environmentVariableSelector:e=>{let t=e[nS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${nS} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[sS];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${sS} mast be a number, got "${t}"`);return r},default:Ue.DEFAULT_MAX_ATTEMPTS},LG=e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,s=VP.normalizeProvider(n??Ue.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:s,retryStrategy:async()=>t||(await VP.normalizeProvider(r)()===Ue.RETRY_MODES.ADAPTIVE?new Ue.AdaptiveRetryStrategy(s):new Ue.StandardRetryStrategy(s))})},XP="AWS_RETRY_MODE",QP="retry_mode",kG={environmentVariableSelector:e=>e[XP],configFileSelector:e=>e[QP],default:Ue.DEFAULT_RETRY_MODE},YP=()=>e=>async t=>{let{request:r}=t;return eo.HttpRequest.isInstance(r)&&(delete r.headers[Ue.INVOCATION_ID_HEADER],delete r.headers[Ue.REQUEST_HEADER]),e(t)},JP={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},MG=e=>({applyToStack:t=>{t.addRelativeTo(YP(),JP)}}),ZP=e=>(t,r)=>async n=>{let s=await e.retryStrategy(),i=await e.maxAttempts();if(qG(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,d=eo.HttpRequest.isInstance(l);for(d&&(l.headers[Ue.INVOCATION_ID_HEADER]=zP.v4());;)try{d&&(l.headers[Ue.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:m,output:g}=await t(n);return s.recordSuccess(o),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=u,{response:m,output:g}}catch(m){let g=FG(m);if(a=KP(m),d&&xG.isStreamingPayload(l))throw(r.logger instanceof PG.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let y=o.getRetryDelay();u+=y,await new Promise(w=>setTimeout(w,y))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},qG=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",FG=e=>{let t={error:e,errorType:$G(e)},r=tx(e.$response);return r&&(t.retryAfterHint=r),t},$G=e=>us.isThrottlingError(e)?"THROTTLING":us.isTransientError(e)?"TRANSIENT":us.isServerError(e)?"SERVER_ERROR":"CLIENT_ERROR",ex={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},BG=e=>({applyToStack:t=>{t.add(ZP(e),ex)}}),tx=e=>{if(!eo.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(i=>i.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};rt.AdaptiveRetryStrategy=rS;rt.CONFIG_MAX_ATTEMPTS=sS;rt.CONFIG_RETRY_MODE=QP;rt.ENV_MAX_ATTEMPTS=nS;rt.ENV_RETRY_MODE=XP;rt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=DG;rt.NODE_RETRY_MODE_CONFIG_OPTIONS=kG;rt.StandardRetryStrategy=Ld;rt.defaultDelayDecider=WP;rt.defaultRetryDecider=GP;rt.getOmitRetryHeadersPlugin=MG;rt.getRetryAfterHint=tx;rt.getRetryPlugin=BG;rt.omitRetryHeadersMiddleware=YP;rt.omitRetryHeadersMiddlewareOptions=JP;rt.resolveRetryConfig=LG;rt.retryMiddleware=ZP;rt.retryMiddlewareOptions=ex});var sx=S((nAe,nx)=>{"use strict";var kd=Object.defineProperty,UG=Object.getOwnPropertyDescriptor,HG=Object.getOwnPropertyNames,jG=Object.prototype.hasOwnProperty,iS=(e,t)=>kd(e,"name",{value:t,configurable:!0}),VG=(e,t)=>{for(var r in t)kd(e,r,{get:t[r],enumerable:!0})},zG=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of HG(t))!jG.call(e,s)&&s!==r&&kd(e,s,{get:()=>t[s],enumerable:!(n=UG(t,s))||n.enumerable});return e},WG=e=>zG(kd({},"__esModule",{value:!0}),e),rx={};VG(rx,{build:()=>XG,parse:()=>KG,validate:()=>GG});nx.exports=WG(rx);var GG=iS(e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6,"validate"),KG=iS(e=>{let t=e.split(":");if(t.length<6||t[0]!=="arn")throw new Error("Malformed ARN");let[,r,n,s,i,...o]=t;return{partition:r,service:n,region:s,accountId:i,resource:o.join(":")}},"parse"),XG=iS(e=>{let{partition:t="aws",service:r,region:n,accountId:s,resource:i}=e;if([r,n,s,i].some(o=>typeof o!="string"))throw new Error("Input ARN object is invalid");return`arn:${t}:${r}:${n}:${s}:${i}`},"build")});var Cx=S(ge=>{"use strict";var Ja=we(),cx=ne(),QG=Gl(),Md=Hy(),YG=(_t(),se(mn)),ux=(Wt(),se(Hs));nn();var JG=Pt(),ix=ba(),ZG=sx(),e6="content-length",t6="x-amz-decoded-content-length";function lx(){return(e,t)=>async r=>{let{request:n}=r;if(Ja.HttpRequest.isInstance(n)&&!(e6 in n.headers)&&!(t6 in n.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof t?.logger?.warn=="function"&&!(t.logger instanceof cx.NoOpLogger)?t.logger.warn(s):console.warn(s)}return e({...r})}}var dx={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},r6=e=>({applyToStack:t=>{t.add(lx(),dx)}}),fx=e=>(t,r)=>async n=>{let s=await e.region(),i=e.region,o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(e,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(e,"region",{writable:!0,value:i}));try{let a=await t(n);if(r.__s3RegionRedirect){o();let c=await e.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},px={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function hx(e){return(t,r)=>async n=>{try{return await t(n)}catch(s){if(e.followRegionRedirects){let i=s?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=s?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(s?.name==="IllegalLocationConstraintException"||o))){try{let c=a;r.logger?.debug(`Redirecting from ${await e.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return t(n)}}throw s}}}var mx={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},n6=e=>({applyToStack:t=>{t.add(hx(e),mx),t.addRelativeTo(fx(e),px)}}),gx=e=>(t,r)=>async n=>{let s=await t(n),{response:i}=s;if(Ja.HttpResponse.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{cx.parseRfc7231DateTime(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return s},Ex={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},s6=e=>({applyToStack:t=>{t.addRelativeTo(gx(),Ex)}}),$d=class $d{constructor(t={}){f(this,"data");f(this,"lastPurgeTime",Date.now());this.data=t}get(t){let r=this.data[t];if(r)return r}set(t,r){return this.data[t]=r,r}delete(t){delete this.data[t]}async purgeExpired(){let t=Date.now();if(!(this.lastPurgeTime+$d.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>t))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let s=await n.identity;s.expiration&&s.expiration.getTime()<t&&delete this.data[r]}}}};f($d,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);var qd=$d,to=class{constructor(t,r=!1,n=Date.now()){f(this,"_identity");f(this,"isRefreshing");f(this,"accessed");this._identity=t,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}},Bd=class Bd{constructor(t,r=new qd){f(this,"createSessionFn");f(this,"cache");this.createSessionFn=t,this.cache=r}async getS3ExpressIdentity(t,r){let n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?s.set(n,new to(this.getIdentity(n))).identity:((o.expiration?.getTime()??0)<Date.now()+Bd.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(u=>{s.set(n,new to(Promise.resolve(u)))})),o)):s.set(n,new to(this.getIdentity(n))).identity}async getIdentity(t){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});let r=await this.createSessionFn(t);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};f(Bd,"REFRESH_WINDOW_MS",6e4);var Fd=Bd,i6="Directory",o6="S3Express",a6="sigv4-s3express",oS="X-Amz-S3session-Token",aS=oS.toLowerCase(),c6="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",u6="s3_disable_express_session_auth",l6={environmentVariableSelector:e=>Md.booleanSelector(e,c6,Md.SelectorType.ENV),configFileSelector:e=>Md.booleanSelector(e,u6,Md.SelectorType.CONFIG),default:!1},cS=class extends QG.SignatureV4{async signWithCredentials(t,r,n){let s=ox(r);t.headers[aS]=r.sessionToken;let i=this;return ax(i,s),i.signRequest(t,n??{})}async presignWithCredentials(t,r,n){let s=ox(r);return delete t.headers[aS],t.headers[oS]=r.sessionToken,t.query=t.query??{},t.query[oS]=r.sessionToken,ax(this,s),this.presign(t,n)}};function ox(e){return{accessKeyId:e.accessKeyId,secretAccessKey:e.secretAccessKey,expiration:e.expiration}}function ax(e,t){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=e.credentialProvider,s=()=>(clearTimeout(r),e.credentialProvider=n,Promise.resolve(t));e.credentialProvider=s}var yx=e=>(t,r)=>async n=>{if(r.endpointV2){let s=r.endpointV2,i=s.properties?.authSchemes?.[0]?.name===a6;if((s.properties?.backend===o6||s.properties?.bucketType===i6)&&(YG.setFeature(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let c=await e.s3ExpressIdentityProvider.getS3ExpressIdentity(await e.credentials(),{Bucket:a});r.s3ExpressIdentity=c,Ja.HttpRequest.isInstance(n.request)&&c.sessionToken&&(n.request.headers[aS]=c.sessionToken)}}}return t(n)},Sx={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},d6=e=>({applyToStack:t=>{t.add(yx(e),Sx)}}),f6=async(e,t,r,n)=>{let s=await n.signWithCredentials(r,e,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},p6=e=>t=>{throw t},h6=(e,t)=>{},m6=ux.httpSigningMiddlewareOptions,_x=e=>(t,r)=>async n=>{if(!Ja.HttpRequest.isInstance(n.request))return t(n);let i=JG.getSmithyContext(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u;r.s3ExpressIdentity?u=await f6(r.s3ExpressIdentity,o,n.request,await e.signer()):u=await c.sign(n.request,a,o);let l=await t({...n,request:u}).catch((c.errorHandler||p6)(o));return(c.successHandler||h6)(l.response,o),l},g6=e=>({applyToStack:t=>{t.addRelativeTo(_x(e),ux.httpSigningMiddlewareOptions)}}),E6=(e,{session:t})=>{let[r,n]=t,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:c,bucketEndpoint:u,expectContinueHeader:l}=e;return Object.assign(e,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:c??new Fd(async d=>r().send(new n({Bucket:d}))),bucketEndpoint:u??!1,expectContinueHeader:l??2097152})},y6={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},S6=3e3,vx=e=>(t,r)=>async n=>{let s=await t(n),{response:i}=s;if(!Ja.HttpResponse.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let u=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([u,l]=await ix.splitStream(a)),i.body=l;let d=await _6(u,{streamCollector:async g=>ix.headStream(g,S6)});typeof u?.destroy=="function"&&u.destroy();let m=e.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&y6[r.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return m&&m.endsWith("</Error>")&&(i.statusCode=400),s},_6=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),wx={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},v6=e=>({applyToStack:t=>{t.addRelativeTo(vx(e),wx)}});function w6(e){return(t,r)=>async n=>{if(e.bucketEndpoint){let s=r.endpointV2;if(s){let i=n.input.Bucket;if(typeof i=="string")try{let o=new URL(i);r.endpointV2={...s,url:o}}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return t(n)}}var b6={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function bx({bucketEndpoint:e}){return t=>async r=>{let{input:{Bucket:n}}=r;if(!e&&typeof n=="string"&&!ZG.validate(n)&&n.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return t({...r})}}var Rx={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},R6=e=>({applyToStack:t=>{t.add(bx(e),Rx),t.addRelativeTo(w6(e),b6)}});ge.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS=l6;ge.S3ExpressIdentityCache=qd;ge.S3ExpressIdentityCacheEntry=to;ge.S3ExpressIdentityProviderImpl=Fd;ge.SignatureV4S3Express=cS;ge.checkContentLengthHeader=lx;ge.checkContentLengthHeaderMiddlewareOptions=dx;ge.getCheckContentLengthHeaderPlugin=r6;ge.getRegionRedirectMiddlewarePlugin=n6;ge.getS3ExpiresMiddlewarePlugin=s6;ge.getS3ExpressHttpSigningPlugin=g6;ge.getS3ExpressPlugin=d6;ge.getThrow200ExceptionsPlugin=v6;ge.getValidateBucketNamePlugin=R6;ge.regionRedirectEndpointMiddleware=fx;ge.regionRedirectEndpointMiddlewareOptions=px;ge.regionRedirectMiddleware=hx;ge.regionRedirectMiddlewareOptions=mx;ge.resolveS3Config=E6;ge.s3ExpiresMiddleware=gx;ge.s3ExpiresMiddlewareOptions=Ex;ge.s3ExpressHttpSigningMiddleware=_x;ge.s3ExpressHttpSigningMiddlewareOptions=m6;ge.s3ExpressMiddleware=yx;ge.s3ExpressMiddlewareOptions=Sx;ge.throw200ExceptionsMiddleware=vx;ge.throw200ExceptionsMiddlewareOptions=wx;ge.validateBucketNameMiddleware=bx;ge.validateBucketNameMiddlewareOptions=Rx});var dS=S(lS=>{"use strict";var C6=Cx(),Ax=Gl(),Za={CrtSignerV4:null},uS=class{constructor(t){f(this,"sigv4aSigner");f(this,"sigv4Signer");f(this,"signerOptions");this.sigv4Signer=new C6.SignatureV4S3Express(t),this.signerOptions=t}static sigv4aDependency(){return typeof Za.CrtSignerV4=="function"?"crt":typeof Ax.signatureV4aContainer.SignatureV4a=="function"?"js":"none"}async sign(t,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(t,r):this.sigv4Signer.sign(t,r)}async signWithCredentials(t,r,n={}){if(n.signingRegion==="*"){let s=this.getSigv4aSigner(),i=Za.CrtSignerV4;if(i&&s instanceof i)return s.signWithCredentials(t,r,n);throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(t,r,n)}async presign(t,r={}){if(r.signingRegion==="*"){let n=this.getSigv4aSigner(),s=Za.CrtSignerV4;if(s&&n instanceof s)return n.presign(t,r);throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(t,r)}async presignWithCredentials(t,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(t,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let t=Za.CrtSignerV4,r=Ax.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!t&&!r)throw new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(t&&typeof t=="function")this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r=="function")this.sigv4aSigner=new r({...this.signerOptions});else throw new Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!="function")throw new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}};lS.SignatureV4MultiRegion=uS;lS.signatureV4CrtContainer=Za});var Mx=S(Ud=>{"use strict";Object.defineProperty(Ud,"__esModule",{value:!0});Ud.ruleSet=void 0;var Lx="required",oe="type",ot="fn",at="argv",ls="ref",A6=!1,fS=!0,RS="isSet",pS="stringEquals",CS="getAttr",ro="booleanEquals",Ir="endpoint",Kt="tree",vn="error",hS={[Lx]:!1,[oe]:"string"},Tx={[Lx]:!0,default:!1,[oe]:"boolean"},_S={[ls]:"Endpoint"},mS={[ot]:RS,[at]:[{[ls]:"Region"}]},vS={[ls]:"Region"},gS={[ot]:"aws.partition",[at]:[vS],assign:"PartitionResult"},AS={[ls]:"PartitionResult"},wS={[ot]:ro,[at]:[{[ls]:"UseFIPS"},!0]},T6={[ls]:"UseFIPS"},bS={[ot]:ro,[at]:[{[ls]:"UseDualStack"},!0]},Ix={url:"https://events.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:{},headers:{}},kt={},Px={[ls]:"EndpointId"},ES={authSchemes:[{name:"sigv4a",signingName:"events",signingRegionSet:["*"]}]},kx={[ot]:ro,[at]:[!0,{[ot]:CS,[at]:[AS,"supportsDualStack"]}]},xx={[vn]:"DualStack is enabled but this partition does not support DualStack",[oe]:vn},Ox={[ot]:CS,[at]:[AS,"supportsFIPS"]},yS=[{[ot]:RS,[at]:[_S]}],SS=[bS],Nx=[kx],Dx=[wS],I6={version:"1.0",parameters:{Region:hS,UseDualStack:Tx,UseFIPS:Tx,Endpoint:hS,EndpointId:hS},rules:[{conditions:[{[ot]:"not",[at]:yS},mS,gS,{[ot]:pS,[at]:[{[ot]:CS,[at]:[AS,"name"]},"aws-us-gov"]},wS,bS],endpoint:Ix,[oe]:Ir},{conditions:[{[ot]:RS,[at]:[Px]},mS,gS],rules:[{conditions:[{[ot]:"isValidHostLabel",[at]:[Px,fS]}],rules:[{conditions:[{[ot]:ro,[at]:[T6,A6]}],rules:[{conditions:yS,endpoint:{url:_S,properties:ES,headers:kt},[oe]:Ir},{conditions:SS,rules:[{conditions:Nx,rules:[{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dualStackDnsSuffix}",properties:ES,headers:kt},[oe]:Ir}],[oe]:Kt},xx],[oe]:Kt},{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dnsSuffix}",properties:ES,headers:kt},[oe]:Ir}],[oe]:Kt},{error:"Invalid Configuration: FIPS is not supported with EventBridge multi-region endpoints.",[oe]:vn}],[oe]:Kt},{error:"EndpointId must be a valid host label.",[oe]:vn}],[oe]:Kt},{conditions:yS,rules:[{conditions:Dx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[oe]:vn},{conditions:SS,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[oe]:vn},{endpoint:{url:_S,properties:kt,headers:kt},[oe]:Ir}],[oe]:Kt},{conditions:[mS],rules:[{conditions:[gS],rules:[{conditions:[wS,bS],rules:[{conditions:[{[ot]:ro,[at]:[fS,Ox]},kx],rules:[{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Kt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[oe]:vn}],[oe]:Kt},{conditions:Dx,rules:[{conditions:[{[ot]:ro,[at]:[Ox,fS]}],rules:[{conditions:[{[ot]:pS,[at]:[vS,"us-gov-east-1"]}],endpoint:{url:"https://events.us-gov-east-1.amazonaws.com",properties:kt,headers:kt},[oe]:Ir},{conditions:[{[ot]:pS,[at]:[vS,"us-gov-west-1"]}],endpoint:{url:"https://events.us-gov-west-1.amazonaws.com",properties:kt,headers:kt},[oe]:Ir},{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Kt},{error:"FIPS is enabled but this partition does not support FIPS",[oe]:vn}],[oe]:Kt},{conditions:SS,rules:[{conditions:Nx,rules:[{endpoint:Ix,[oe]:Ir}],[oe]:Kt},xx],[oe]:Kt},{endpoint:{url:"https://events.{Region}.{PartitionResult#dnsSuffix}",properties:kt,headers:kt},[oe]:Ir}],[oe]:Kt}],[oe]:Kt},{error:"Invalid Configuration: Missing Region",[oe]:vn}]};Ud.ruleSet=I6});var IS=S(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.defaultEndpointResolver=void 0;var P6=Ni(),TS=Vs(),x6=Mx(),O6=new TS.EndpointCache({size:50,params:["Endpoint","EndpointId","Region","UseDualStack","UseFIPS"]}),N6=(e,t={})=>O6.get(e,()=>(0,TS.resolveEndpoint)(x6.ruleSet,{endpointParams:e,logger:t.logger}));Hd.defaultEndpointResolver=N6;TS.customEndpointFunctions.aws=P6.awsEndpointFunctions});var PS=S(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.resolveHttpAuthSchemeConfig=ds.defaultEventBridgeHttpAuthSchemeProvider=ds.defaultEventBridgeHttpAuthSchemeParametersProvider=void 0;var qx=(_t(),se(mn)),D6=dS(),L6=Sn(),jd=Pt(),k6=IS(),M6=e=>async(t,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=await e(t,r,n),i=(0,jd.getSmithyContext)(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let o=await(0,L6.resolveParams)(n,{getEndpointParameterInstructions:i},t);return Object.assign(s,o)},q6=async(e,t,r)=>({operation:(0,jd.getSmithyContext)(t).operation,region:await(0,jd.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ds.defaultEventBridgeHttpAuthSchemeParametersProvider=M6(q6);function Fx(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"events",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function $x(e){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"events",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var F6=(e,t,r)=>s=>{let o=e(s).properties?.authSchemes;if(!o)return t(s);let a=[];for(let c of o){let{name:u,properties:l={},...d}=c,m=u.toLowerCase();u!==m&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${u}\` to \`${m}\``);let g;if(m==="sigv4a"){g="aws.auth#sigv4a";let I=o.find(A=>{let O=A.name.toLowerCase();return O!=="sigv4a"&&O.startsWith("sigv4")});if(D6.SignatureV4MultiRegion.sigv4aDependency()==="none"&&I)continue}else if(m.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${m}\``);let y=r[g];if(!y)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);let w=y(s);w.schemeId=g,w.signingProperties={...w.signingProperties||{},...d,...l},a.push(w)}return a},$6=e=>{let t=[];switch(e.operation){default:t.push(Fx(e)),t.push($x(e))}return t};ds.defaultEventBridgeHttpAuthSchemeProvider=F6(k6.defaultEndpointResolver,$6,{"aws.auth#sigv4":Fx,"aws.auth#sigv4a":$x});var B6=e=>{let t=(0,qx.resolveAwsSdkSigV4Config)(e),r=(0,qx.resolveAwsSdkSigV4AConfig)(t);return Object.assign(r,{authSchemePreference:(0,jd.normalizeProvider)(e.authSchemePreference??[])})};ds.resolveHttpAuthSchemeConfig=B6});var Bx=S((dAe,U6)=>{U6.exports={name:"@aws-sdk/client-eventbridge",description:"AWS SDK for JavaScript Eventbridge Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-eventbridge","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo eventbridge",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.929.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/signature-v4-multi-region":"3.928.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.928.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-eventbridge",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-eventbridge"}}});var xS=S(fs=>{"use strict";var H6=(Tr(),se(Xn)),j6=Dt(),Ux="AWS_ACCESS_KEY_ID",Hx="AWS_SECRET_ACCESS_KEY",jx="AWS_SESSION_TOKEN",Vx="AWS_CREDENTIAL_EXPIRATION",zx="AWS_CREDENTIAL_SCOPE",Wx="AWS_ACCOUNT_ID",V6=e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[Ux],r=process.env[Hx],n=process.env[jx],s=process.env[Vx],i=process.env[zx],o=process.env[Wx];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return H6.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new j6.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})};fs.ENV_ACCOUNT_ID=Wx;fs.ENV_CREDENTIAL_SCOPE=zx;fs.ENV_EXPIRATION=Vx;fs.ENV_KEY=Ux;fs.ENV_SECRET=Hx;fs.ENV_SESSION=jx;fs.fromEnv=V6});var tc=S(vt=>{"use strict";var Kr=Dt(),z6=require("url"),W6=require("buffer"),G6=require("http"),kS=En(),K6=Gn();function ec(e){return new Promise((t,r)=>{let n=G6.request({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Kr.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Kr.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Kr.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{t(W6.Buffer.concat(o)),n.destroy()})}),n.end()})}var Qx=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",Yx=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),Jx=1e3,Zx=0,MS=({maxRetries:e=Zx,timeout:t=Jx})=>({maxRetries:e,timeout:t}),NS=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},Vd="AWS_CONTAINER_CREDENTIALS_FULL_URI",zd="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",DS="AWS_CONTAINER_AUTHORIZATION_TOKEN",X6=(e={})=>{let{timeout:t,maxRetries:r}=MS(e);return()=>NS(async()=>{let n=await eK({logger:e.logger}),s=JSON.parse(await Q6(t,n));if(!Qx(s))throw new Kr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return Yx(s)},r)},Q6=async(e,t)=>(process.env[DS]&&(t.headers={...t.headers,Authorization:process.env[DS]}),(await ec({...t,timeout:e})).toString()),Y6="169.254.170.2",J6={localhost:!0,"127.0.0.1":!0},Z6={"http:":!0,"https:":!0},eK=async({logger:e})=>{if(process.env[zd])return{hostname:Y6,path:process.env[zd]};if(process.env[Vd]){let t=z6.parse(process.env[Vd]);if(!t.hostname||!(t.hostname in J6))throw new Kr.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in Z6))throw new Kr.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Kr.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${zd} or ${Vd} environment variable is set`,{tryNextLink:!1,logger:e})},LS=class e extends Kr.CredentialsProviderError{constructor(r,n=!0){super(r,n);f(this,"tryNextLink");f(this,"name","InstanceMetadataV1FallbackError");this.tryNextLink=n,Object.setPrototypeOf(this,e.prototype)}};vt.Endpoint=void 0;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(vt.Endpoint||(vt.Endpoint={}));var tK="AWS_EC2_METADATA_SERVICE_ENDPOINT",rK="ec2_metadata_service_endpoint",nK={environmentVariableSelector:e=>e[tK],configFileSelector:e=>e[rK],default:void 0},no;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(no||(no={}));var sK="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",iK="ec2_metadata_service_endpoint_mode",oK={environmentVariableSelector:e=>e[sK],configFileSelector:e=>e[iK],default:no.IPv4},eO=async()=>K6.parseUrl(await aK()||await cK()),aK=async()=>kS.loadConfig(nK)(),cK=async()=>{let e=await kS.loadConfig(oK)();switch(e){case no.IPv4:return vt.Endpoint.IPv4;case no.IPv6:return vt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(no)}`)}},uK=5*60,lK=5*60,dK="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Gx=(e,t)=>{let r=uK+Math.floor(Math.random()*lK),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+dK);let s=e.originalExpiration??e.expiration;return{...e,...s?{originalExpiration:s}:{},expiration:n}},fK=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let s;try{s=await e(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=Gx(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=Gx(n,r);else throw i}return n=s,s}},tO="/latest/meta-data/iam/security-credentials/",pK="/latest/api/token",OS="AWS_EC2_METADATA_V1_DISABLED",Kx="ec2_metadata_v1_disabled",Xx="x-aws-ec2-metadata-token",hK=(e={})=>fK(mK(e),{logger:e.logger}),mK=(e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:s,maxRetries:i}=MS(e),o=async(a,c)=>{if(t||c.headers?.[Xx]==null){let d=!1,m=!1,g=await kS.loadConfig({environmentVariableSelector:y=>{let w=y[OS];if(m=!!w&&w!=="false",w===void 0)throw new Kr.CredentialsProviderError(`${OS} not set in env, checking config file next.`,{logger:e.logger});return m},configFileSelector:y=>{let w=y[Kx];return d=!!w&&w!=="false",d},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||g){let y=[];throw e.ec2MetadataV1Disabled&&y.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),d&&y.push(`config file profile (${Kx})`),m&&y.push(`process environment variable (${OS})`),new LS(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${y.join(", ")}].`)}}let l=(await NS(async()=>{let d;try{d=await EK(c)}catch(m){throw m.statusCode===401&&(t=!1),m}return d},a)).trim();return NS(async()=>{let d;try{d=await yK(l,c,e)}catch(m){throw m.statusCode===401&&(t=!1),m}return d},a)};return async()=>{let a=await eO();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await gK({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[Xx]:c},timeout:s})}}},gK=async e=>ec({...e,path:pK,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),EK=async e=>(await ec({...e,path:tO})).toString(),yK=async(e,t,r)=>{let n=JSON.parse((await ec({...t,path:tO+e})).toString());if(!Qx(n))throw new Kr.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return Yx(n)};vt.DEFAULT_MAX_RETRIES=Zx;vt.DEFAULT_TIMEOUT=Jx;vt.ENV_CMDS_AUTH_TOKEN=DS;vt.ENV_CMDS_FULL_URI=Vd;vt.ENV_CMDS_RELATIVE_URI=zd;vt.fromContainerMetadata=X6;vt.fromInstanceMetadata=hK;vt.getInstanceMetadataEndpoint=eO;vt.httpRequest=ec;vt.providerConfigFromInit=MS});var rO=S(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.checkUrl=void 0;var SK=Dt(),_K="169.254.170.2",vK="169.254.170.23",wK="[fd00:ec2::23]",bK=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===_K||e.hostname===vK||e.hostname===wK)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new SK.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};Wd.checkUrl=bK});var nO=S(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.createGetRequest=TK;Gd.getCredentials=IK;var qS=Dt(),RK=we(),CK=ne(),AK=ba();function TK(e){return new RK.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function IK(e,t){let n=await(0,AK.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new qS.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,CK.parseRfc3339DateTime)(s.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new qS.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:s.Code,Message:s.Message})}throw new qS.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var sO=S(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.retryWrapper=void 0;var PK=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(i=>setTimeout(i,r))}return await e()};Kd.retryWrapper=PK});var aO=S(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});Xd.fromHttp=void 0;var xK=(Da(),se(Na)),OK=(Tr(),se(Xn)),NK=Ls(),iO=Dt(),DK=xK.__importDefault(require("fs/promises")),LK=rO(),oO=nO(),kK=sO(),MK="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",qK="http://169.254.170.2",FK="AWS_CONTAINER_CREDENTIALS_FULL_URI",$K="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",BK="AWS_CONTAINER_AUTHORIZATION_TOKEN",UK=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[MK],n=e.awsContainerCredentialsFullUri??process.env[FK],s=e.awsContainerAuthorizationToken??process.env[BK],i=e.awsContainerAuthorizationTokenFile??process.env[$K],o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?.warn?console.warn:e.logger.warn.bind(e.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${qK}${r}`;else throw new iO.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,LK.checkUrl)(a,e.logger);let c=NK.NodeHttpHandler.create({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,kK.retryWrapper)(async()=>{let u=(0,oO.createGetRequest)(a);s?u.headers.Authorization=s:i&&(u.headers.Authorization=(await DK.default.readFile(i)).toString());try{let l=await c.handle(u);return(0,oO.getCredentials)(l.response).then(d=>(0,OK.setCredentialFeature)(d,"CREDENTIALS_HTTP","z"))}catch(l){throw new iO.CredentialsProviderError(String(l),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};Xd.fromHttp=UK});var FS=S(Qd=>{"use strict";Object.defineProperty(Qd,"__esModule",{value:!0});Qd.fromHttp=void 0;var HK=aO();Object.defineProperty(Qd,"fromHttp",{enumerable:!0,get:function(){return HK.fromHttp}})});function jK(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function VK(e){return{schemeId:"smithy.api#noAuth"}}var rc,cO,uO,lO,$S=C(()=>{_t();rc=T(Pt()),cO=async(e,t,r)=>({operation:(0,rc.getSmithyContext)(t).operation,region:await(0,rc.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});uO=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(VK(e));break}default:t.push(jK(e))}return t},lO=e=>{let t=Gs(e);return Object.assign(t,{authSchemePreference:(0,rc.normalizeProvider)(e.authSchemePreference??[])})}});var dO,fO,BS=C(()=>{dO=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),fO={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Yd,US=C(()=>{Yd={name:"@aws-sdk/nested-clients",version:"3.929.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var nc=S(Qs=>{"use strict";var pO=require("os"),HS=require("process"),WK=Qi(),hO={isCrtAvailable:!1},GK=()=>hO.isCrtAvailable?["md/crt-avail"]:null,mO=({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${pO.platform()}`,pO.release()],["lang/js"],["md/nodejs",`${HS.versions.node}`]],s=GK();s&&n.push(s),e&&n.push([`api/${e}`,t]),HS.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${HS.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},KK=mO,gO="AWS_SDK_UA_APP_ID",EO="sdk_ua_app_id",XK="sdk-ua-app-id",QK={environmentVariableSelector:e=>e[gO],configFileSelector:e=>e[EO]??e[XK],default:WK.DEFAULT_UA_APP_ID};Qs.NODE_APP_ID_CONFIG_OPTIONS=QK;Qs.UA_APP_ID_ENV_NAME=gO;Qs.UA_APP_ID_INI_NAME=EO;Qs.createDefaultUserAgentProvider=mO;Qs.crtAvailability=hO;Qs.defaultUserAgent=KK});var sc=S(_O=>{"use strict";var jS=bi(),YK=dt(),JK=require("buffer"),yO=require("crypto"),VS=class{constructor(t,r){f(this,"algorithmIdentifier");f(this,"secret");f(this,"hash");this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(YK.toUint8Array(SO(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?yO.createHmac(this.algorithmIdentifier,SO(this.secret)):yO.createHash(this.algorithmIdentifier)}};function SO(e,t){return JK.Buffer.isBuffer(e)?e:typeof e=="string"?jS.fromString(e,t):ArrayBuffer.isView(e)?jS.fromArrayBuffer(e.buffer,e.byteOffset,e.byteLength):jS.fromArrayBuffer(e)}_O.Hash=VS});var ic=S(vO=>{"use strict";var zS=require("fs"),ZK=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(e instanceof zS.ReadStream){if(e.path!=null)return zS.lstatSync(e.path).size;if(typeof e.fd=="number")return zS.fstatSync(e.fd).size}throw new Error(`Body Length computation failed for ${e}`)};vO.calculateBodyLength=ZK});var OO,ur,lr,oo,wO,oc,so,io,wn,WS,GS,bO,RO,CO,NO,DO,cr,AO,LO,TO,IO,PO,xO,e8,kO,MO=C(()=>{OO="required",ur="fn",lr="argv",oo="ref",wO="isSet",oc="booleanEquals",so="error",io="endpoint",wn="tree",WS="PartitionResult",GS="getAttr",bO={[OO]:!1,type:"string"},RO={[OO]:!0,default:!1,type:"boolean"},CO={[oo]:"Endpoint"},NO={[ur]:oc,[lr]:[{[oo]:"UseFIPS"},!0]},DO={[ur]:oc,[lr]:[{[oo]:"UseDualStack"},!0]},cr={},AO={[ur]:GS,[lr]:[{[oo]:WS},"supportsFIPS"]},LO={[oo]:WS},TO={[ur]:oc,[lr]:[!0,{[ur]:GS,[lr]:[LO,"supportsDualStack"]}]},IO=[NO],PO=[DO],xO=[{[oo]:"Region"}],e8={version:"1.0",parameters:{Region:bO,UseDualStack:RO,UseFIPS:RO,Endpoint:bO},rules:[{conditions:[{[ur]:wO,[lr]:[CO]}],rules:[{conditions:IO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:so},{conditions:PO,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:so},{endpoint:{url:CO,properties:cr,headers:cr},type:io}],type:wn},{conditions:[{[ur]:wO,[lr]:xO}],rules:[{conditions:[{[ur]:"aws.partition",[lr]:xO,assign:WS}],rules:[{conditions:[NO,DO],rules:[{conditions:[{[ur]:oc,[lr]:[!0,AO]},TO],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:cr,headers:cr},type:io}],type:wn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:so}],type:wn},{conditions:IO,rules:[{conditions:[{[ur]:oc,[lr]:[AO,!0]}],rules:[{conditions:[{[ur]:"stringEquals",[lr]:[{[ur]:GS,[lr]:[LO,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:cr,headers:cr},type:io},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:cr,headers:cr},type:io}],type:wn},{error:"FIPS is enabled but this partition does not support FIPS",type:so}],type:wn},{conditions:PO,rules:[{conditions:[TO],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:cr,headers:cr},type:io}],type:wn},{error:"DualStack is enabled but this partition does not support DualStack",type:so}],type:wn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:cr,headers:cr},type:io}],type:wn}],type:wn},{error:"Invalid Configuration: Missing Region",type:so}]},kO=e8});var qO,ao,t8,FO,$O=C(()=>{qO=T(Ni()),ao=T(Vs());MO();t8=new ao.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),FO=(e,t={})=>t8.get(e,()=>(0,ao.resolveEndpoint)(kO,{endpointParams:e,logger:t.logger}));ao.customEndpointFunctions.aws=qO.awsEndpointFunctions});var BO,UO,Jd,Zd,HO,jO=C(()=>{_t();Wa();Wt();BO=T(ne()),UO=T(Gn()),Jd=T(ft()),Zd=T(dt());$S();$O();HO=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Jd.fromBase64,base64Encoder:e?.base64Encoder??Jd.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??FO,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??uO,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Gt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new un}],logger:e?.logger??new BO.NoOpLogger,protocol:e?.protocol??new Vi({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??UO.parseUrl,utf8Decoder:e?.utf8Decoder??Zd.fromUtf8,utf8Encoder:e?.utf8Encoder??Zd.toUtf8})});var ac=S(GO=>{"use strict";var r8=ar(),VO=En(),n8=Dt(),s8="AWS_EXECUTION_ENV",zO="AWS_REGION",WO="AWS_DEFAULT_REGION",i8="AWS_EC2_METADATA_DISABLED",o8=["in-region","cross-region","mobile","standard","legacy"],a8="/latest/meta-data/placement/region",c8="AWS_DEFAULTS_MODE",u8="defaults_mode",l8={environmentVariableSelector:e=>e[c8],configFileSelector:e=>e[u8],default:"legacy"},d8=({region:e=VO.loadConfig(r8.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=VO.loadConfig(l8)}={})=>n8.memoize(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return f8(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${o8.join(", ")}, got ${r}`)}}),f8=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await p8();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},p8=async()=>{if(process.env[s8]&&(process.env[zO]||process.env[WO]))return process.env[zO]??process.env[WO];if(!process.env[i8])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>T(tc())),r=await e();return(await t({...r,path:a8})).toString()}catch{}};GO.resolveDefaultsModeConfig=d8});var ef,hs,KO,tf,ps,rf,XO,QO,YO,JO,ZO,eN,tN=C(()=>{US();_t();ef=T(nc()),hs=T(ar()),KO=T(sc()),tf=T(_n()),ps=T(En()),rf=T(Ls()),XO=T(ic()),QO=T(Zi());jO();YO=T(ne()),JO=T(ac()),ZO=T(ne()),eN=e=>{(0,ZO.emitWarningIfUnsupportedVersion)(process.version);let t=(0,JO.resolveDefaultsModeConfig)(e),r=()=>t().then(YO.loadConfigsForDefaultMode),n=HO(e);Di(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ps.loadConfig)(Mi,s),bodyLengthChecker:e?.bodyLengthChecker??XO.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,ef.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Yd.version}),maxAttempts:e?.maxAttempts??(0,ps.loadConfig)(tf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ps.loadConfig)(hs.NODE_REGION_CONFIG_OPTIONS,{...hs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:rf.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ps.loadConfig)({...tf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||QO.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??KO.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??rf.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ps.loadConfig)(hs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,ps.loadConfig)(hs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,ps.loadConfig)(ef.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var nN=S(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.warning=void 0;co.stsRegionDefaultResolver=m8;var rN=ar(),h8=En();function m8(e={}){return(0,h8.loadConfig)({...rN.NODE_REGION_CONFIG_OPTIONS,async default(){return co.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...rN.NODE_REGION_CONFIG_FILE_OPTIONS,...e})}co.warning={silence:!1}});var uo=S(Xr=>{"use strict";var cc=ar(),sN=nN(),g8=e=>({setRegion(t){e.region=t},region(){return e.region}}),E8=e=>({region:e.region()});Object.defineProperty(Xr,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return cc.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(Xr,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return cc.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(Xr,"REGION_ENV_NAME",{enumerable:!0,get:function(){return cc.REGION_ENV_NAME}});Object.defineProperty(Xr,"REGION_INI_NAME",{enumerable:!0,get:function(){return cc.REGION_INI_NAME}});Object.defineProperty(Xr,"resolveRegionConfig",{enumerable:!0,get:function(){return cc.resolveRegionConfig}});Xr.getAwsRegionExtensionConfiguration=g8;Xr.resolveAwsRegionExtensionConfiguration=E8;Object.keys(sN).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Xr,e)&&Object.defineProperty(Xr,e,{enumerable:!0,get:function(){return sN[e]}})})});var iN,oN,aN=C(()=>{iN=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},oN=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var nf,sf,of,cN,uN=C(()=>{nf=T(uo()),sf=T(we()),of=T(ne());aN();cN=(e,t)=>{let r=Object.assign((0,nf.getAwsRegionExtensionConfiguration)(e),(0,of.getDefaultExtensionConfiguration)(e),(0,sf.getHttpHandlerExtensionConfiguration)(e),iN(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,nf.resolveAwsRegionExtensionConfiguration)(r),(0,of.resolveDefaultRuntimeConfig)(r),(0,sf.resolveHttpHandlerRuntimeConfig)(r),oN(r))}});var af,lN,dN,cf,fN,pN,hN,uf,KS,uc,XS=C(()=>{af=T(pa()),lN=T(ha()),dN=T(ga()),cf=T(Qi()),fN=T(ar());Wt();Pe();pN=T(Ga()),hN=T(Sn()),uf=T(_n()),KS=T(ne());$S();BS();tN();uN();uc=class extends KS.Client{constructor(...[r]){let n=eN(r||{});super(n);f(this,"config");this.initConfig=n;let s=dO(n),i=(0,cf.resolveUserAgentConfig)(s),o=(0,uf.resolveRetryConfig)(i),a=(0,fN.resolveRegionConfig)(o),c=(0,af.resolveHostHeaderConfig)(a),u=(0,hN.resolveEndpointConfig)(c),l=lO(u),d=cN(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(Fg(this.config)),this.middlewareStack.use((0,cf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,uf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,pN.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,af.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,lN.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,dN.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ya(this.config,{httpAuthSchemeParametersProvider:cO,identityProviderConfigProvider:async m=>new Us({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(_a(this.config))}destroy(){super.destroy()}}});var mN,ct,lf=C(()=>{mN=T(ne()),ct=class e extends mN.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var y8,lc,dc,fc,pc,hc,mc,S8,gc,Ec,yc,Sc,_c,gN=C(()=>{lf();y8={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},lc=class e extends ct{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},dc=class e extends ct{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});f(this,"name","AuthorizationPendingException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},fc=class e extends ct{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},pc=class e extends ct{constructor(r){super({name:"InternalServerException",$fault:"server",...r});f(this,"name","InternalServerException");f(this,"$fault","server");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},hc=class e extends ct{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});f(this,"name","InvalidClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},mc=class e extends ct{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});f(this,"name","InvalidGrantException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},S8={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},gc=class e extends ct{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},Ec=class e extends ct{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});f(this,"name","InvalidScopeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},yc=class e extends ct{constructor(r){super({name:"SlowDownException",$fault:"client",...r});f(this,"name","SlowDownException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Sc=class e extends ct{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});f(this,"name","UnauthorizedClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},_c=class e extends ct{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});f(this,"name","UnsupportedGrantTypeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}}});var QS=C(()=>{gN()});var _8,v8,w8,b8,R8,C8,A8,T8,I8,P8,x8,O8,N8,D8,L8,k8,M8,q8,F8,$8,Qr,B8,U8,H8,j8,V8,We,z8,Pr,W8,G8,xr,K8,EN,yN,X8,Q8,Y8,SN,J8,Ee,Z8,e5,t5,r5,_N,n5,s5,i5,o5,a5,c5,u5,l5,d5,f5,p5,h5,m5,g5,vN,wN=C(()=>{Pe();QS();lf();_8="AccessDeniedException",v8="AuthorizationPendingException",w8="AccessToken",b8="ClientSecret",R8="CreateToken",C8="CreateTokenRequest",A8="CreateTokenResponse",T8="CodeVerifier",I8="ExpiredTokenException",P8="InvalidClientException",x8="InvalidGrantException",O8="InvalidRequestException",N8="InternalServerException",D8="InvalidScopeException",L8="IdToken",k8="RefreshToken",M8="SlowDownException",q8="UnauthorizedClientException",F8="UnsupportedGrantTypeException",$8="accessToken",Qr="client",B8="clientId",U8="clientSecret",H8="codeVerifier",j8="code",V8="deviceCode",We="error",z8="expiresIn",Pr="error_description",W8="grantType",G8="http",xr="httpError",K8="idToken",EN="reason",yN="refreshToken",X8="redirectUri",Q8="scope",Y8="server",SN="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",J8="tokenType",Ee="com.amazonaws.ssooidc",Z8=[0,Ee,w8,8,0],e5=[0,Ee,b8,8,0],t5=[0,Ee,T8,8,0],r5=[0,Ee,L8,8,0],_N=[0,Ee,k8,8,0],n5=[-3,Ee,_8,{[We]:Qr,[xr]:400},[We,EN,Pr],[0,0,0]];le.for(Ee).registerError(n5,lc);s5=[-3,Ee,v8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(s5,dc);i5=[3,Ee,C8,0,[B8,U8,W8,V8,j8,yN,Q8,X8,H8],[0,[()=>e5,0],0,0,0,[()=>_N,0],64,0,[()=>t5,0]]],o5=[3,Ee,A8,0,[$8,J8,z8,yN,K8],[[()=>Z8,0],0,1,[()=>_N,0],[()=>r5,0]]],a5=[-3,Ee,I8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(a5,fc);c5=[-3,Ee,N8,{[We]:Y8,[xr]:500},[We,Pr],[0,0]];le.for(Ee).registerError(c5,pc);u5=[-3,Ee,P8,{[We]:Qr,[xr]:401},[We,Pr],[0,0]];le.for(Ee).registerError(u5,hc);l5=[-3,Ee,x8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(l5,mc);d5=[-3,Ee,O8,{[We]:Qr,[xr]:400},[We,EN,Pr],[0,0,0]];le.for(Ee).registerError(d5,gc);f5=[-3,Ee,D8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(f5,Ec);p5=[-3,Ee,M8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(p5,yc);h5=[-3,Ee,q8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(h5,Sc);m5=[-3,Ee,F8,{[We]:Qr,[xr]:400},[We,Pr],[0,0]];le.for(Ee).registerError(m5,_c);g5=[-3,SN,"SSOOIDCServiceException",0,[],[]];le.for(SN).registerError(g5,ct);vN=[9,Ee,R8,{[G8]:["POST","/token",200]},()=>i5,()=>o5]});var bN,YS,vc,JS=C(()=>{bN=T(Sn()),YS=T(ne());BS();wN();vc=class extends YS.Command.classBuilder().ep(fO).m(function(t,r,n,s){return[(0,bN.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(vN).build(){}});var RN,E5,df,CN=C(()=>{RN=T(ne());JS();XS();E5={CreateTokenCommand:vc},df=class extends uc{};(0,RN.createAggregatedClient)(E5,df)});var AN=C(()=>{JS()});var ZS={};jt(ZS,{$Command:()=>YS.Command,AccessDeniedException:()=>lc,AccessDeniedExceptionReason:()=>y8,AuthorizationPendingException:()=>dc,CreateTokenCommand:()=>vc,ExpiredTokenException:()=>fc,InternalServerException:()=>pc,InvalidClientException:()=>hc,InvalidGrantException:()=>mc,InvalidRequestException:()=>gc,InvalidRequestExceptionReason:()=>S8,InvalidScopeException:()=>Ec,SSOOIDC:()=>df,SSOOIDCClient:()=>uc,SSOOIDCServiceException:()=>ct,SlowDownException:()=>yc,UnauthorizedClientException:()=>Sc,UnsupportedGrantTypeException:()=>_c,__Client:()=>KS.Client});var e_=C(()=>{XS();CN();AN();QS();lf()});var xN=S(bc=>{"use strict";var y5=(Tr(),se(Xn)),S5=(ty(),se(HT)),tr=Dt(),wc=gn(),_5=require("fs"),v5=({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new tr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=S5.getBearerTokenEnvKey(t);if(!(r in process.env))throw new tr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return y5.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},w5=5*60*1e3,t_="To refresh this SSO session run 'aws sso login' with the corresponding profile.",b5=async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(e_(),ZS)),n=i=>t.clientConfig?.[i]??t.parentClientConfig?.[i];return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},R5=async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(e_(),ZS));return(await b5(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},TN=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new tr.TokenProviderError(`Token is expired. ${t_}`,!1)},Ys=(e,t,r=!1)=>{if(typeof t>"u")throw new tr.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${t_}`,!1)},{writeFile:C5}=_5.promises,A5=(e,t)=>{let r=wc.getSSOTokenFilepath(e),n=JSON.stringify(t,null,2);return C5(r,n)},IN=new Date(0),PN=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await wc.parseKnownFiles(r),s=wc.getProfileName({profile:r.profile??t?.profile}),i=n[s];if(i){if(!i.sso_session)throw new tr.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new tr.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await wc.loadSsoSessionData(r))[o];if(!c)throw new tr.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let y of["sso_start_url","sso_region"])if(!c[y])throw new tr.TokenProviderError(`Sso session '${o}' is missing required property '${y}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await wc.getSSOTokenFromFile(o)}catch{throw new tr.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${t_}`,!1)}Ys("accessToken",l.accessToken),Ys("expiresAt",l.expiresAt);let{accessToken:d,expiresAt:m}=l,g={token:d,expiration:new Date(m)};if(g.expiration.getTime()-Date.now()>w5)return g;if(Date.now()-IN.getTime()<30*1e3)return TN(g),g;Ys("clientId",l.clientId,!0),Ys("clientSecret",l.clientSecret,!0),Ys("refreshToken",l.refreshToken,!0);try{IN.setTime(Date.now());let y=await R5(l,u,r);Ys("accessToken",y.accessToken),Ys("expiresIn",y.expiresIn);let w=new Date(Date.now()+y.expiresIn*1e3);try{await A5(o,{...l,accessToken:y.accessToken,expiresAt:w.toISOString(),refreshToken:y.refreshToken})}catch{}return{token:y.accessToken,expiration:w}}catch{return TN(g),g}},T5=({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new tr.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},I5=(e={})=>tr.memoize(tr.chain(PN(e),async()=>{throw new tr.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);bc.fromEnvSigningName=v5;bc.fromSso=PN;bc.fromStatic=T5;bc.nodeProvider=I5});var n_=S(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});ms.resolveHttpAuthSchemeConfig=ms.defaultSSOHttpAuthSchemeProvider=ms.defaultSSOHttpAuthSchemeParametersProvider=void 0;var P5=(_t(),se(mn)),r_=Pt(),x5=async(e,t,r)=>({operation:(0,r_.getSmithyContext)(t).operation,region:await(0,r_.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ms.defaultSSOHttpAuthSchemeParametersProvider=x5;function O5(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function ff(e){return{schemeId:"smithy.api#noAuth"}}var N5=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(ff(e));break}case"ListAccountRoles":{t.push(ff(e));break}case"ListAccounts":{t.push(ff(e));break}case"Logout":{t.push(ff(e));break}default:t.push(O5(e))}return t};ms.defaultSSOHttpAuthSchemeProvider=N5;var D5=e=>{let t=(0,P5.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,r_.normalizeProvider)(e.authSchemePreference??[])})};ms.resolveHttpAuthSchemeConfig=D5});var ON=S((ATe,L5)=>{L5.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var WN=S(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});pf.ruleSet=void 0;var HN="required",fr="fn",pr="argv",po="ref",NN=!0,DN="isSet",Rc="booleanEquals",lo="error",fo="endpoint",bn="tree",s_="PartitionResult",i_="getAttr",LN={[HN]:!1,type:"string"},kN={[HN]:!0,default:!1,type:"boolean"},MN={[po]:"Endpoint"},jN={[fr]:Rc,[pr]:[{[po]:"UseFIPS"},!0]},VN={[fr]:Rc,[pr]:[{[po]:"UseDualStack"},!0]},dr={},qN={[fr]:i_,[pr]:[{[po]:s_},"supportsFIPS"]},zN={[po]:s_},FN={[fr]:Rc,[pr]:[!0,{[fr]:i_,[pr]:[zN,"supportsDualStack"]}]},$N=[jN],BN=[VN],UN=[{[po]:"Region"}],k5={version:"1.0",parameters:{Region:LN,UseDualStack:kN,UseFIPS:kN,Endpoint:LN},rules:[{conditions:[{[fr]:DN,[pr]:[MN]}],rules:[{conditions:$N,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:lo},{conditions:BN,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:lo},{endpoint:{url:MN,properties:dr,headers:dr},type:fo}],type:bn},{conditions:[{[fr]:DN,[pr]:UN}],rules:[{conditions:[{[fr]:"aws.partition",[pr]:UN,assign:s_}],rules:[{conditions:[jN,VN],rules:[{conditions:[{[fr]:Rc,[pr]:[NN,qN]},FN],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dr,headers:dr},type:fo}],type:bn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:lo}],type:bn},{conditions:$N,rules:[{conditions:[{[fr]:Rc,[pr]:[qN,NN]}],rules:[{conditions:[{[fr]:"stringEquals",[pr]:[{[fr]:i_,[pr]:[zN,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:dr,headers:dr},type:fo},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:dr,headers:dr},type:fo}],type:bn},{error:"FIPS is enabled but this partition does not support FIPS",type:lo}],type:bn},{conditions:BN,rules:[{conditions:[FN],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:dr,headers:dr},type:fo}],type:bn},{error:"DualStack is enabled but this partition does not support DualStack",type:lo}],type:bn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:dr,headers:dr},type:fo}],type:bn}],type:bn},{error:"Invalid Configuration: Missing Region",type:lo}]};pf.ruleSet=k5});var GN=S(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.defaultEndpointResolver=void 0;var M5=Ni(),o_=Vs(),q5=WN(),F5=new o_.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),$5=(e,t={})=>F5.get(e,()=>(0,o_.resolveEndpoint)(q5.ruleSet,{endpointParams:e,logger:t.logger}));hf.defaultEndpointResolver=$5;o_.customEndpointFunctions.aws=M5.awsEndpointFunctions});var QN=S(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.getRuntimeConfig=void 0;var B5=(_t(),se(mn)),U5=(Wa(),se($y)),H5=(Wt(),se(Hs)),j5=ne(),V5=Gn(),KN=ft(),XN=dt(),z5=n_(),W5=GN(),G5=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??KN.fromBase64,base64Encoder:e?.base64Encoder??KN.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??W5.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??z5.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new B5.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new H5.NoAuthSigner}],logger:e?.logger??new j5.NoOpLogger,protocol:e?.protocol??new U5.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??V5.parseUrl,utf8Decoder:e?.utf8Decoder??XN.fromUtf8,utf8Encoder:e?.utf8Encoder??XN.toUtf8});mf.getRuntimeConfig=G5});var tD=S(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.getRuntimeConfig=void 0;var K5=(Da(),se(Na)),X5=K5.__importDefault(ON()),YN=(_t(),se(mn)),JN=nc(),gf=ar(),Q5=sc(),ZN=_n(),Js=En(),eD=Ls(),Y5=ic(),J5=Zi(),Z5=QN(),eX=ne(),tX=ac(),rX=ne(),nX=e=>{(0,rX.emitWarningIfUnsupportedVersion)(process.version);let t=(0,tX.resolveDefaultsModeConfig)(e),r=()=>t().then(eX.loadConfigsForDefaultMode),n=(0,Z5.getRuntimeConfig)(e);(0,YN.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Js.loadConfig)(YN.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??Y5.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,JN.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:X5.default.version}),maxAttempts:e?.maxAttempts??(0,Js.loadConfig)(ZN.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Js.loadConfig)(gf.NODE_REGION_CONFIG_OPTIONS,{...gf.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:eD.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Js.loadConfig)({...ZN.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||J5.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??Q5.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??eD.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Js.loadConfig)(gf.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,Js.loadConfig)(gf.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,Js.loadConfig)(JN.NODE_APP_ID_CONFIG_OPTIONS,s)}};Ef.getRuntimeConfig=nX});var bD=S(wt=>{"use strict";var rD=pa(),sX=ha(),iX=ga(),nD=Qi(),oX=ar(),Cc=(Wt(),se(Hs)),mo=(Pe(),se(bl)),aX=Ga(),Ic=Sn(),sD=_n(),Or=ne(),iD=n_(),cX=tD(),oD=uo(),aD=we(),uX=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),vf={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},lX=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},dX=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),fX=(e,t)=>{let r=Object.assign(oD.getAwsRegionExtensionConfiguration(e),Or.getDefaultExtensionConfiguration(e),aD.getHttpHandlerExtensionConfiguration(e),lX(e));return t.forEach(n=>n.configure(r)),Object.assign(e,oD.resolveAwsRegionExtensionConfiguration(r),Or.resolveDefaultRuntimeConfig(r),aD.resolveHttpHandlerRuntimeConfig(r),dX(r))},ho=class extends Or.Client{constructor(...[r]){let n=cX.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=uX(n),i=nD.resolveUserAgentConfig(s),o=sD.resolveRetryConfig(i),a=oX.resolveRegionConfig(o),c=rD.resolveHostHeaderConfig(a),u=Ic.resolveEndpointConfig(c),l=iD.resolveHttpAuthSchemeConfig(u),d=fX(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(mo.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(nD.getUserAgentPlugin(this.config)),this.middlewareStack.use(sD.getRetryPlugin(this.config)),this.middlewareStack.use(aX.getContentLengthPlugin(this.config)),this.middlewareStack.use(rD.getHostHeaderPlugin(this.config)),this.middlewareStack.use(sX.getLoggerPlugin(this.config)),this.middlewareStack.use(iX.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(Cc.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:iD.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new Cc.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Cc.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},go=class cD extends Or.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,cD.prototype)}},uD=class lD extends go{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");Object.setPrototypeOf(this,lD.prototype)}},dD=class fD extends go{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,fD.prototype)}},pD=class hD extends go{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});f(this,"name","TooManyRequestsException");f(this,"$fault","client");Object.setPrototypeOf(this,hD.prototype)}},mD=class gD extends go{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});f(this,"name","UnauthorizedException");f(this,"$fault","client");Object.setPrototypeOf(this,gD.prototype)}},pX="AccountInfo",hX="AccountListType",mX="AccessTokenType",gX="GetRoleCredentials",EX="GetRoleCredentialsRequest",yX="GetRoleCredentialsResponse",SX="InvalidRequestException",_X="Logout",vX="ListAccounts",wX="ListAccountsRequest",bX="ListAccountRolesRequest",RX="ListAccountRolesResponse",CX="ListAccountsResponse",AX="ListAccountRoles",TX="LogoutRequest",IX="RoleCredentials",PX="RoleInfo",xX="RoleListType",OX="ResourceNotFoundException",NX="SecretAccessKeyType",DX="SessionTokenType",LX="TooManyRequestsException",kX="UnauthorizedException",wf="accountId",MX="accessKeyId",qX="accountList",FX="accountName",bf="accessToken",ED="account_id",Rf="client",Cf="error",$X="emailAddress",BX="expiration",Af="http",Tf="httpError",If="httpHeader",Zs="httpQuery",Pf="message",yD="maxResults",SD="max_result",xf="nextToken",_D="next_token",UX="roleCredentials",HX="roleList",vD="roleName",jX="role_name",wD="smithy.ts.sdk.synthetic.com.amazonaws.sso",VX="secretAccessKey",zX="sessionToken",Of="x-amz-sso_bearer_token",Te="com.amazonaws.sso",Nf=[0,Te,mX,8,0],WX=[0,Te,NX,8,0],GX=[0,Te,DX,8,0],KX=[3,Te,pX,0,[wf,FX,$X],[0,0,0]],XX=[3,Te,EX,0,[vD,wf,bf],[[0,{[Zs]:jX}],[0,{[Zs]:ED}],[()=>Nf,{[If]:Of}]]],QX=[3,Te,yX,0,[UX],[[()=>sQ,0]]],YX=[-3,Te,SX,{[Cf]:Rf,[Tf]:400},[Pf],[0]];mo.TypeRegistry.for(Te).registerError(YX,uD);var JX=[3,Te,bX,0,[xf,yD,bf,wf],[[0,{[Zs]:_D}],[1,{[Zs]:SD}],[()=>Nf,{[If]:Of}],[0,{[Zs]:ED}]]],ZX=[3,Te,RX,0,[xf,HX],[0,()=>dQ]],eQ=[3,Te,wX,0,[xf,yD,bf],[[0,{[Zs]:_D}],[1,{[Zs]:SD}],[()=>Nf,{[If]:Of}]]],tQ=[3,Te,CX,0,[xf,qX],[0,()=>lQ]],rQ=[3,Te,TX,0,[bf],[[()=>Nf,{[If]:Of}]]],nQ=[-3,Te,OX,{[Cf]:Rf,[Tf]:404},[Pf],[0]];mo.TypeRegistry.for(Te).registerError(nQ,dD);var sQ=[3,Te,IX,0,[MX,VX,zX,BX],[0,[()=>WX,0],[()=>GX,0],1]],iQ=[3,Te,PX,0,[vD,wf],[0,0]],oQ=[-3,Te,LX,{[Cf]:Rf,[Tf]:429},[Pf],[0]];mo.TypeRegistry.for(Te).registerError(oQ,pD);var aQ=[-3,Te,kX,{[Cf]:Rf,[Tf]:401},[Pf],[0]];mo.TypeRegistry.for(Te).registerError(aQ,mD);var cQ="unit",uQ=[-3,wD,"SSOServiceException",0,[],[]];mo.TypeRegistry.for(wD).registerError(uQ,go);var lQ=[1,Te,hX,0,()=>KX],dQ=[1,Te,xX,0,()=>iQ],fQ=[9,Te,gX,{[Af]:["GET","/federation/credentials",200]},()=>XX,()=>QX],pQ=[9,Te,AX,{[Af]:["GET","/assignment/roles",200]},()=>JX,()=>ZX],hQ=[9,Te,vX,{[Af]:["GET","/assignment/accounts",200]},()=>eQ,()=>tQ],mQ=[9,Te,_X,{[Af]:["POST","/logout",200]},()=>rQ,()=>cQ],yf=class extends Or.Command.classBuilder().ep(vf).m(function(t,r,n,s){return[Ic.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(fQ).build(){},Ac=class extends Or.Command.classBuilder().ep(vf).m(function(t,r,n,s){return[Ic.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(pQ).build(){},Tc=class extends Or.Command.classBuilder().ep(vf).m(function(t,r,n,s){return[Ic.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(hQ).build(){},Sf=class extends Or.Command.classBuilder().ep(vf).m(function(t,r,n,s){return[Ic.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(mQ).build(){},gQ={GetRoleCredentialsCommand:yf,ListAccountRolesCommand:Ac,ListAccountsCommand:Tc,LogoutCommand:Sf},_f=class extends ho{};Or.createAggregatedClient(gQ,_f);var EQ=Cc.createPaginator(ho,Ac,"nextToken","nextToken","maxResults"),yQ=Cc.createPaginator(ho,Tc,"nextToken","nextToken","maxResults");Object.defineProperty(wt,"$Command",{enumerable:!0,get:function(){return Or.Command}});Object.defineProperty(wt,"__Client",{enumerable:!0,get:function(){return Or.Client}});wt.GetRoleCredentialsCommand=yf;wt.InvalidRequestException=uD;wt.ListAccountRolesCommand=Ac;wt.ListAccountsCommand=Tc;wt.LogoutCommand=Sf;wt.ResourceNotFoundException=dD;wt.SSO=_f;wt.SSOClient=ho;wt.SSOServiceException=go;wt.TooManyRequestsException=pD;wt.UnauthorizedException=mD;wt.paginateListAccountRoles=EQ;wt.paginateListAccounts=yQ});var CD=S(a_=>{"use strict";var RD=bD();Object.defineProperty(a_,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return RD.GetRoleCredentialsCommand}});Object.defineProperty(a_,"SSOClient",{enumerable:!0,get:function(){return RD.SSOClient}})});var c_=S(Lf=>{"use strict";var Nr=Dt(),Df=gn(),AD=(Tr(),se(Xn)),SQ=xN(),ID=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),Pc=!1,TD=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:d,logger:m})=>{let g,y="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let Ge=await SQ.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:d})();g={accessToken:Ge.token,expiresAt:new Date(Ge.expiration).toISOString()}}catch(Ge){throw new Nr.CredentialsProviderError(Ge.message,{tryNextLink:Pc,logger:m})}else try{g=await Df.getSSOTokenFromFile(e)}catch{throw new Nr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${y}`,{tryNextLink:Pc,logger:m})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new Nr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${y}`,{tryNextLink:Pc,logger:m});let{accessToken:w}=g,{SSOClient:I,GetRoleCredentialsCommand:A}=await Promise.resolve().then(function(){return CD()}),O=i||new I(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n,userAgentAppId:o?.userAgentAppId??a?.userAgentAppId})),k;try{k=await O.send(new A({accountId:r,roleName:s,accessToken:w}))}catch(Ge){throw new Nr.CredentialsProviderError(Ge,{tryNextLink:Pc,logger:m})}let{roleCredentials:{accessKeyId:q,secretAccessKey:U,sessionToken:ce,expiration:Je,credentialScope:ie,accountId:Z}={}}=k;if(!q||!U||!ce||!Je)throw new Nr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Pc,logger:m});let ve={accessKeyId:q,secretAccessKey:U,sessionToken:ce,expiration:new Date(Je),...ie&&{credentialScope:ie},...Z&&{accountId:Z}};return t?AD.setCredentialFeature(ve,"CREDENTIALS_SSO","s"):AD.setCredentialFeature(ve,"CREDENTIALS_SSO_LEGACY","u"),ve},PD=(e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=e;if(!r||!n||!s||!i)throw new Nr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},_Q=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=e,{ssoClient:a}=e,c=Df.getProfileName({profile:e.profile??t?.profile});if(!r&&!n&&!s&&!i&&!o){let l=(await Df.parseKnownFiles(e))[c];if(!l)throw new Nr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!ID(l))throw new Nr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(l?.sso_session){let A=(await Df.loadSsoSessionData(e))[l.sso_session],O=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==A.sso_region)throw new Nr.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:e.logger});if(r&&r!==A.sso_start_url)throw new Nr.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:e.logger});l.sso_region=A.sso_region,l.sso_start_url=A.sso_start_url}let{sso_start_url:d,sso_account_id:m,sso_region:g,sso_role_name:y,sso_session:w}=PD(l,e.logger);return TD({ssoStartUrl:d,ssoSession:w,ssoAccountId:m,ssoRegion:g,ssoRoleName:y,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}else{if(!r||!n||!s||!i)throw new Nr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return TD({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c,filepath:e.filepath,configFilepath:e.configFilepath,ignoreCache:e.ignoreCache,logger:e.logger})}};Lf.fromSSO=_Q;Lf.isSsoProfile=ID;Lf.validateSsoProfile=PD});function vQ(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function wQ(e){return{schemeId:"smithy.api#noAuth"}}var xc,xD,OD,bQ,ND,u_=C(()=>{_t();xc=T(Pt());Oc();xD=async(e,t,r)=>({operation:(0,xc.getSmithyContext)(t).operation,region:await(0,xc.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});OD=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(wQ(e));break}default:t.push(vQ(e))}return t},bQ=e=>Object.assign(e,{stsClientCtor:Yr}),ND=e=>{let t=bQ(e),r=Gs(t);return Object.assign(r,{authSchemePreference:(0,xc.normalizeProvider)(e.authSchemePreference??[])})}});var DD,kf,Mf=C(()=>{DD=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),kf={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var VD,J,de,fe,Es,gs,ht,zD,WD,GD,Le,LD,Jr,Eo,d_,kD,l_,KD,MD,mt,qD,XD,QD,bt,rr,FD,YD,JD,$D,ZD,BD,UD,HD,jD,RQ,eL,tL=C(()=>{VD="required",J="type",de="fn",fe="argv",Es="ref",gs="booleanEquals",ht="stringEquals",zD="sigv4",WD="sts",GD="us-east-1",Le="endpoint",LD="https://sts.{Region}.{PartitionResult#dnsSuffix}",Jr="tree",Eo="error",d_="getAttr",kD={[VD]:!1,[J]:"string"},l_={[VD]:!0,default:!1,[J]:"boolean"},KD={[Es]:"Endpoint"},MD={[de]:"isSet",[fe]:[{[Es]:"Region"}]},mt={[Es]:"Region"},qD={[de]:"aws.partition",[fe]:[mt],assign:"PartitionResult"},XD={[Es]:"UseFIPS"},QD={[Es]:"UseDualStack"},bt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:zD,signingName:WD,signingRegion:GD}]},headers:{}},rr={},FD={conditions:[{[de]:ht,[fe]:[mt,"aws-global"]}],[Le]:bt,[J]:Le},YD={[de]:gs,[fe]:[XD,!0]},JD={[de]:gs,[fe]:[QD,!0]},$D={[de]:d_,[fe]:[{[Es]:"PartitionResult"},"supportsFIPS"]},ZD={[Es]:"PartitionResult"},BD={[de]:gs,[fe]:[!0,{[de]:d_,[fe]:[ZD,"supportsDualStack"]}]},UD=[{[de]:"isSet",[fe]:[KD]}],HD=[YD],jD=[JD],RQ={version:"1.0",parameters:{Region:kD,UseDualStack:l_,UseFIPS:l_,Endpoint:kD,UseGlobalEndpoint:l_},rules:[{conditions:[{[de]:gs,[fe]:[{[Es]:"UseGlobalEndpoint"},!0]},{[de]:"not",[fe]:UD},MD,qD,{[de]:gs,[fe]:[XD,!1]},{[de]:gs,[fe]:[QD,!1]}],rules:[{conditions:[{[de]:ht,[fe]:[mt,"ap-northeast-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-south-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-southeast-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"ap-southeast-2"]}],endpoint:bt,[J]:Le},FD,{conditions:[{[de]:ht,[fe]:[mt,"ca-central-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-central-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-north-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-2"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"eu-west-3"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"sa-east-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,GD]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-east-2"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-west-1"]}],endpoint:bt,[J]:Le},{conditions:[{[de]:ht,[fe]:[mt,"us-west-2"]}],endpoint:bt,[J]:Le},{endpoint:{url:LD,properties:{authSchemes:[{name:zD,signingName:WD,signingRegion:"{Region}"}]},headers:rr},[J]:Le}],[J]:Jr},{conditions:UD,rules:[{conditions:HD,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[J]:Eo},{conditions:jD,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[J]:Eo},{endpoint:{url:KD,properties:rr,headers:rr},[J]:Le}],[J]:Jr},{conditions:[MD],rules:[{conditions:[qD],rules:[{conditions:[YD,JD],rules:[{conditions:[{[de]:gs,[fe]:[!0,$D]},BD],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rr,headers:rr},[J]:Le}],[J]:Jr},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[J]:Eo}],[J]:Jr},{conditions:HD,rules:[{conditions:[{[de]:gs,[fe]:[$D,!0]}],rules:[{conditions:[{[de]:ht,[fe]:[{[de]:d_,[fe]:[ZD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:rr,headers:rr},[J]:Le},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:rr,headers:rr},[J]:Le}],[J]:Jr},{error:"FIPS is enabled but this partition does not support FIPS",[J]:Eo}],[J]:Jr},{conditions:jD,rules:[{conditions:[BD],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rr,headers:rr},[J]:Le}],[J]:Jr},{error:"DualStack is enabled but this partition does not support DualStack",[J]:Eo}],[J]:Jr},FD,{endpoint:{url:LD,properties:rr,headers:rr},[J]:Le}],[J]:Jr}],[J]:Jr},{error:"Invalid Configuration: Missing Region",[J]:Eo}]},eL=RQ});var rL,yo,CQ,nL,sL=C(()=>{rL=T(Ni()),yo=T(Vs());tL();CQ=new yo.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),nL=(e,t={})=>CQ.get(e,()=>(0,yo.resolveEndpoint)(eL,{endpointParams:e,logger:t.logger}));yo.customEndpointFunctions.aws=rL.awsEndpointFunctions});var iL,oL,qf,Ff,aL,cL=C(()=>{_t();Wt();iL=T(ne()),oL=T(Gn()),qf=T(ft()),Ff=T(dt());u_();sL();aL=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??qf.fromBase64,base64Encoder:e?.base64Encoder??qf.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??nL,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??OD,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new Gt},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new un}],logger:e?.logger??new iL.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??oL.parseUrl,utf8Decoder:e?.utf8Decoder??Ff.fromUtf8,utf8Encoder:e?.utf8Encoder??Ff.toUtf8})});var $f,Ss,uL,Bf,ys,Uf,lL,dL,fL,pL,hL,mL,gL=C(()=>{US();_t();$f=T(nc()),Ss=T(ar());Wt();uL=T(sc()),Bf=T(_n()),ys=T(En()),Uf=T(Ls()),lL=T(ic()),dL=T(Zi());cL();fL=T(ne()),pL=T(ac()),hL=T(ne()),mL=e=>{(0,hL.emitWarningIfUnsupportedVersion)(process.version);let t=(0,pL.resolveDefaultsModeConfig)(e),r=()=>t().then(fL.loadConfigsForDefaultMode),n=aL(e);Di(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,ys.loadConfig)(Mi,s),bodyLengthChecker:e?.bodyLengthChecker??lL.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,$f.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Yd.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await e.credentialDefaultProvider(o?.__config||{})()),signer:new Gt},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new un}],maxAttempts:e?.maxAttempts??(0,ys.loadConfig)(Bf.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,ys.loadConfig)(Ss.NODE_REGION_CONFIG_OPTIONS,{...Ss.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Uf.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,ys.loadConfig)({...Bf.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||dL.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??uL.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Uf.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,ys.loadConfig)(Ss.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,ys.loadConfig)(Ss.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,ys.loadConfig)($f.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var EL,yL,SL=C(()=>{EL=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},yL=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var Hf,jf,Vf,_L,vL=C(()=>{Hf=T(uo()),jf=T(we()),Vf=T(ne());SL();_L=(e,t)=>{let r=Object.assign((0,Hf.getAwsRegionExtensionConfiguration)(e),(0,Vf.getDefaultExtensionConfiguration)(e),(0,jf.getHttpHandlerExtensionConfiguration)(e),EL(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,Hf.resolveAwsRegionExtensionConfiguration)(r),(0,Vf.resolveDefaultRuntimeConfig)(r),(0,jf.resolveHttpHandlerRuntimeConfig)(r),yL(r))}});var zf,wL,bL,Wf,RL,CL,AL,Gf,f_,Yr,Oc=C(()=>{zf=T(pa()),wL=T(ha()),bL=T(ga()),Wf=T(Qi()),RL=T(ar());Wt();CL=T(Ga()),AL=T(Sn()),Gf=T(_n()),f_=T(ne());u_();Mf();gL();vL();Yr=class extends f_.Client{constructor(...[r]){let n=mL(r||{});super(n);f(this,"config");this.initConfig=n;let s=DD(n),i=(0,Wf.resolveUserAgentConfig)(s),o=(0,Gf.resolveRetryConfig)(i),a=(0,RL.resolveRegionConfig)(o),c=(0,zf.resolveHostHeaderConfig)(a),u=(0,AL.resolveEndpointConfig)(c),l=ND(u),d=_L(l,r?.extensions||[]);this.config=d,this.middlewareStack.use((0,Wf.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Gf.getRetryPlugin)(this.config)),this.middlewareStack.use((0,CL.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,zf.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,wL.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,bL.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(ya(this.config,{httpAuthSchemeParametersProvider:xD,identityProviderConfigProvider:async m=>new Us({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(_a(this.config))}destroy(){super.destroy()}}});var TL,Xt,Kf=C(()=>{TL=T(ne()),Xt=class e extends TL.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var p_,h_,m_,Nc,Dc,Lc,kc,Mc,qc,g_,E_,Fc,$c=C(()=>{p_=T(ne());Kf();h_=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:p_.SENSITIVE_STRING}}),m_=e=>({...e,...e.Credentials&&{Credentials:h_(e.Credentials)}}),Nc=class e extends Xt{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Dc=class e extends Xt{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});f(this,"name","MalformedPolicyDocumentException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Lc=class e extends Xt{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});f(this,"name","PackedPolicyTooLargeException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},kc=class e extends Xt{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});f(this,"name","RegionDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Mc=class e extends Xt{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});f(this,"name","IDPRejectedClaimException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},qc=class e extends Xt{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});f(this,"name","InvalidIdentityTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},g_=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:p_.SENSITIVE_STRING}}),E_=e=>({...e,...e.Credentials&&{Credentials:h_(e.Credentials)}}),Fc=class e extends Xt{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});f(this,"name","IDPCommunicationErrorException");f(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}}});var IL,te,PL,xL,OL,NL,DL,AQ,TQ,IQ,PQ,xQ,OQ,NQ,DQ,LQ,LL,kQ,MQ,qQ,FQ,$Q,BQ,kL,UQ,HQ,ML,jQ,VQ,zQ,WQ,GQ,KQ,XQ,Cn,QQ,qL,FL,$L,BL,y_,YQ,S_,So,JQ,__,v_,_o,w_,vo,b_,R_,C_,wo,bo,A_,T_,I_,Ro,P_,Co,Ao,x_,O_,Rn,N_,D_,L_,k_,M_,UL,q_,F_,$_,Xe,HL,ZQ,B_=C(()=>{_t();IL=T(we()),te=T(ne());$c();Kf();PL=async(e,t)=>{let r=FL,n;return n=HL({...DQ(e,t),[BL]:YQ,[UL]:$L}),qL(t,r,"/",void 0,n)},xL=async(e,t)=>{let r=FL,n;return n=HL({...LQ(e,t),[BL]:JQ,[UL]:$L}),qL(t,r,"/",void 0,n)},OL=async(e,t)=>{if(e.statusCode>=300)return DL(e,t);let r=await Wi(e.body,t),n={};return n=UQ(r.AssumeRoleResult,t),{$metadata:Cn(e),...n}},NL=async(e,t)=>{if(e.statusCode>=300)return DL(e,t);let r=await Wi(e.body,t),n={};return n=HQ(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Cn(e),...n}},DL=async(e,t)=>{let r={...e,body:await Ed(e.body,t)},n=ZQ(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await AQ(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await xQ(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await OQ(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await NQ(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await TQ(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await IQ(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await PQ(r,t);default:let s=r.body;return QQ({output:e,parsedBody:s.Error,errorCode:n})}},AQ=async(e,t)=>{let r=e.body,n=jQ(r.Error,t),s=new Nc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},TQ=async(e,t)=>{let r=e.body,n=VQ(r.Error,t),s=new Fc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},IQ=async(e,t)=>{let r=e.body,n=zQ(r.Error,t),s=new Mc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},PQ=async(e,t)=>{let r=e.body,n=WQ(r.Error,t),s=new qc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},xQ=async(e,t)=>{let r=e.body,n=GQ(r.Error,t),s=new Dc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},OQ=async(e,t)=>{let r=e.body,n=KQ(r.Error,t),s=new Lc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},NQ=async(e,t)=>{let r=e.body,n=XQ(r.Error,t),s=new kc({$metadata:Cn(e),...n});return(0,te.decorateServiceException)(s,r)},DQ=(e,t)=>{let r={};if(e[Co]!=null&&(r[Co]=e[Co]),e[Ao]!=null&&(r[Ao]=e[Ao]),e[bo]!=null){let n=LL(e[bo],t);e[bo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(e[wo]!=null&&(r[wo]=e[wo]),e[vo]!=null&&(r[vo]=e[vo]),e[L_]!=null){let n=BQ(e[L_],t);e[L_]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(e[M_]!=null){let n=$Q(e[M_],t);e[M_]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(e[R_]!=null&&(r[R_]=e[R_]),e[N_]!=null&&(r[N_]=e[N_]),e[k_]!=null&&(r[k_]=e[k_]),e[Rn]!=null&&(r[Rn]=e[Rn]),e[T_]!=null){let n=qQ(e[T_],t);e[T_]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},LQ=(e,t)=>{let r={};if(e[Co]!=null&&(r[Co]=e[Co]),e[Ao]!=null&&(r[Ao]=e[Ao]),e[F_]!=null&&(r[F_]=e[F_]),e[I_]!=null&&(r[I_]=e[I_]),e[bo]!=null){let n=LL(e[bo],t);e[bo]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return e[wo]!=null&&(r[wo]=e[wo]),e[vo]!=null&&(r[vo]=e[vo]),r},LL=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=kQ(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},kQ=(e,t)=>{let r={};return e[$_]!=null&&(r[$_]=e[$_]),r},MQ=(e,t)=>{let r={};return e[A_]!=null&&(r[A_]=e[A_]),e[w_]!=null&&(r[w_]=e[w_]),r},qQ=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=MQ(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},FQ=(e,t)=>{let r={};return e[C_]!=null&&(r[C_]=e[C_]),e[q_]!=null&&(r[q_]=e[q_]),r},$Q=(e,t)=>{let r={},n=1;for(let s of e)s!==null&&(r[`member.${n}`]=s,n++);return r},BQ=(e,t)=>{let r={},n=1;for(let s of e){if(s===null)continue;let i=FQ(s,t);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},kL=(e,t)=>{let r={};return e[S_]!=null&&(r[S_]=(0,te.expectString)(e[S_])),e[__]!=null&&(r[__]=(0,te.expectString)(e[__])),r},UQ=(e,t)=>{let r={};return e[_o]!=null&&(r[_o]=ML(e[_o],t)),e[So]!=null&&(r[So]=kL(e[So],t)),e[Ro]!=null&&(r[Ro]=(0,te.strictParseInt32)(e[Ro])),e[Rn]!=null&&(r[Rn]=(0,te.expectString)(e[Rn])),r},HQ=(e,t)=>{let r={};return e[_o]!=null&&(r[_o]=ML(e[_o],t)),e[O_]!=null&&(r[O_]=(0,te.expectString)(e[O_])),e[So]!=null&&(r[So]=kL(e[So],t)),e[Ro]!=null&&(r[Ro]=(0,te.strictParseInt32)(e[Ro])),e[P_]!=null&&(r[P_]=(0,te.expectString)(e[P_])),e[v_]!=null&&(r[v_]=(0,te.expectString)(e[v_])),e[Rn]!=null&&(r[Rn]=(0,te.expectString)(e[Rn])),r},ML=(e,t)=>{let r={};return e[y_]!=null&&(r[y_]=(0,te.expectString)(e[y_])),e[x_]!=null&&(r[x_]=(0,te.expectString)(e[x_])),e[D_]!=null&&(r[D_]=(0,te.expectString)(e[D_])),e[b_]!=null&&(r[b_]=(0,te.expectNonNull)((0,te.parseRfc3339DateTimeWithOffset)(e[b_]))),r},jQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},VQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},zQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},WQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},GQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},KQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},XQ=(e,t)=>{let r={};return e[Xe]!=null&&(r[Xe]=(0,te.expectString)(e[Xe])),r},Cn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),QQ=(0,te.withBaseException)(Xt),qL=async(e,t,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await e.endpoint(),u={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new IL.HttpRequest(u)},FL={"content-type":"application/x-www-form-urlencoded"},$L="2011-06-15",BL="Action",y_="AccessKeyId",YQ="AssumeRole",S_="AssumedRoleId",So="AssumedRoleUser",JQ="AssumeRoleWithWebIdentity",__="Arn",v_="Audience",_o="Credentials",w_="ContextAssertion",vo="DurationSeconds",b_="Expiration",R_="ExternalId",C_="Key",wo="Policy",bo="PolicyArns",A_="ProviderArn",T_="ProvidedContexts",I_="ProviderId",Ro="PackedPolicySize",P_="Provider",Co="RoleArn",Ao="RoleSessionName",x_="SecretAccessKey",O_="SubjectFromWebIdentityToken",Rn="SourceIdentity",N_="SerialNumber",D_="SessionToken",L_="Tags",k_="TokenCode",M_="TransitiveTagKeys",UL="Version",q_="Value",F_="WebIdentityToken",$_="arn",Xe="message",HL=e=>Object.entries(e).map(([t,r])=>(0,te.extendedEncodeURIComponent)(t)+"="+(0,te.extendedEncodeURIComponent)(r)).join("&"),ZQ=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var jL,VL,zL,ei,Xf=C(()=>{jL=T(Sn()),VL=T(Sa()),zL=T(ne());Mf();$c();B_();ei=class extends zL.Command.classBuilder().ep(kf).m(function(t,r,n,s){return[(0,VL.getSerdePlugin)(n,this.serialize,this.deserialize),(0,jL.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,m_).ser(PL).de(OL).build(){}});var WL,GL,KL,ti,Qf=C(()=>{WL=T(Sn()),GL=T(Sa()),KL=T(ne());Mf();$c();B_();ti=class extends KL.Command.classBuilder().ep(kf).m(function(t,r,n,s){return[(0,GL.getSerdePlugin)(n,this.serialize,this.deserialize),(0,WL.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(g_,E_).ser(xL).de(NL).build(){}});var XL,e9,Yf,QL=C(()=>{XL=T(ne());Xf();Qf();Oc();e9={AssumeRoleCommand:ei,AssumeRoleWithWebIdentityCommand:ti},Yf=class extends Yr{};(0,XL.createAggregatedClient)(e9,Yf)});var YL=C(()=>{Xf();Qf()});var JL=C(()=>{$c()});var ZL,e1,t1,r1,n1,s1,i1=C(()=>{Tr();ZL=T(uo());Xf();Qf();e1=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},t1=async(e,t,r,n={})=>{let s=typeof e=="function"?await e():e,i=typeof t=="function"?await t():t,o=await(0,ZL.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s??i??o},r1=(e,t)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:l=e?.parentClientConfig?.logger,profile:d=e?.parentClientConfig?.profile,region:m,requestHandler:g=e?.parentClientConfig?.requestHandler,credentialProviderLogger:y,userAgentAppId:w=e?.parentClientConfig?.userAgentAppId}=e,I=await t1(m,e?.parentClientConfig?.region,y,{logger:l,profile:d}),A=!s1(g);r=new t({...e,userAgentAppId:w,profile:d,credentialDefaultProvider:()=>async()=>n,region:I,requestHandler:A?g:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new ei(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=e1(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Kn(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},n1=(e,t)=>{let r;return async n=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,profile:u=e?.parentClientConfig?.profile,region:l,requestHandler:d=e?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:g=e?.parentClientConfig?.userAgentAppId}=e,y=await t1(l,e?.parentClientConfig?.region,m,{logger:c,profile:u}),w=!s1(d);r=new t({...e,userAgentAppId:g,profile:u,region:y,requestHandler:w?d:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new ti(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=e1(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&Kn(a,"RESOLVED_ACCOUNT_ID","T"),Kn(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},s1=e=>e?.metadata?.handlerProtocol==="h2"});var o1,a1,c1,t9,u1=C(()=>{i1();Oc();o1=(e,t)=>t?class extends e{constructor(n){super(n);for(let s of t)this.middlewareStack.use(s)}}:e,a1=(e={},t)=>r1(e,o1(Yr,t)),c1=(e={},t)=>n1(e,o1(Yr,t)),t9=e=>t=>e({roleAssumer:a1(t),roleAssumerWithWebIdentity:c1(t),...t})});var U_={};jt(U_,{AssumeRoleCommand:()=>ei,AssumeRoleResponseFilterSensitiveLog:()=>m_,AssumeRoleWithWebIdentityCommand:()=>ti,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>g_,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>E_,CredentialsFilterSensitiveLog:()=>h_,ExpiredTokenException:()=>Nc,IDPCommunicationErrorException:()=>Fc,IDPRejectedClaimException:()=>Mc,InvalidIdentityTokenException:()=>qc,MalformedPolicyDocumentException:()=>Dc,PackedPolicyTooLargeException:()=>Lc,RegionDisabledException:()=>kc,STS:()=>Yf,STSClient:()=>Yr,STSServiceException:()=>Xt,__Client:()=>f_.Client,decorateDefaultCredentialProvider:()=>t9,getDefaultRoleAssumer:()=>a1,getDefaultRoleAssumerWithWebIdentity:()=>c1});var H_=C(()=>{Oc();QL();YL();JL();u1();Kf()});var z_=S(l1=>{"use strict";var V_=gn(),j_=Dt(),r9=require("child_process"),n9=require("util"),s9=(Tr(),se(Xn)),i9=(e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let i=new Date;if(new Date(t.Expiration)<i)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let s={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return s9.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},o9=async(e,t,r)=>{let n=t[e];if(t[e]){let s=n.credential_process;if(s!==void 0){let i=n9.promisify(V_.externalDataInterceptor?.getTokenRecord?.().exec??r9.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return i9(e,a,t)}catch(o){throw new j_.CredentialsProviderError(o.message,{logger:r})}}else throw new j_.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new j_.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},a9=(e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await V_.parseKnownFiles(e);return o9(V_.getProfileName({profile:e.profile??t?.profile}),r,e.logger)};l1.fromProcess=a9});var W_=S(Zr=>{"use strict";var c9=Zr&&Zr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),u9=Zr&&Zr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l9=Zr&&Zr.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),s=0;s<n.length;s++)n[s]!=="default"&&c9(r,t,n[s]);return u9(r,t),r}}();Object.defineProperty(Zr,"__esModule",{value:!0});Zr.fromWebToken=void 0;var d9=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:u}=e;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>l9((H_(),se(U_))));u=l({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};Zr.fromWebToken=d9});var f1=S(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.fromTokenFile=void 0;var f9=(Tr(),se(Xn)),p9=Dt(),h9=gn(),m9=require("fs"),g9=W_(),d1="AWS_WEB_IDENTITY_TOKEN_FILE",E9="AWS_ROLE_ARN",y9="AWS_ROLE_SESSION_NAME",S9=(e={})=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=e?.webIdentityTokenFile??process.env[d1],n=e?.roleArn??process.env[E9],s=e?.roleSessionName??process.env[y9];if(!r||!n)throw new p9.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let i=await(0,g9.fromWebToken)({...e,webIdentityToken:h9.externalDataInterceptor?.getTokenRecord?.()[r]??(0,m9.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(t);return r===process.env[d1]&&(0,f9.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};Jf.fromTokenFile=S9});var G_=S(Bc=>{"use strict";var p1=f1(),h1=W_();Object.keys(p1).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Bc,e)&&Object.defineProperty(Bc,e,{enumerable:!0,get:function(){return p1[e]}})});Object.keys(h1).forEach(function(e){e!=="default"&&!Object.prototype.hasOwnProperty.call(Bc,e)&&Object.defineProperty(Bc,e,{enumerable:!0,get:function(){return h1[e]}})})});var _1=S(S1=>{"use strict";var X_=gn(),Uc=Dt(),_s=(Tr(),se(Xn)),_9=(e,t,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>T(FS())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>T(tc()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Uc.chain(i(s??{}),o(s))().then(K_)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>T(tc()));return async()=>i(s)().then(K_)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>T(xS()));return async()=>i(s)().then(K_)}};if(e in n)return n[e];throw new Uc.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},K_=e=>_s.setCredentialFeature(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),v9=(e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(w9(e,{profile:t,logger:r})||b9(e,{profile:t,logger:r})),w9=(e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},b9=(e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},R9=async(e,t,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=t[e],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(H_(),U_));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Uc.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${X_.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${e}]`}`);let c=o?s(o,t,r,{...n,[o]:!0},m1(t[o]??{})):(await _9(i.credential_source,e,r.logger)(r))();if(m1(i))return c.then(u=>_s.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Uc.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let d=await c;return r.roleAssumer(d,u).then(m=>_s.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},m1=e=>!e.role_arn&&!!e.credential_source,C9=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",A9=async(e,t)=>Promise.resolve().then(()=>T(z_())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>_s.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),T9=async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>T(c_()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>t.sso_session?_s.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):_s.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},I9=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),g1=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,E1=async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return _s.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},P9=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,x9=async(e,t)=>Promise.resolve().then(()=>T(G_())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>_s.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),y1=async(e,t,r,n={},s=!1)=>{let i=t[e];if(Object.keys(n).length>0&&g1(i))return E1(i,r);if(s||v9(i,{profile:e,logger:r.logger}))return R9(e,t,r,n,y1);if(g1(i))return E1(i,r);if(P9(i))return x9(i,r);if(C9(i))return A9(r,e);if(I9(i))return await T9(e,i,r);throw new Uc.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},O9=(e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await X_.parseKnownFiles(r);return y1(X_.getProfileName({profile:e.profile??t?.profile}),n,r)};S1.fromIni=O9});var R1=S(Zf=>{"use strict";var Q_=xS(),Hc=Dt(),N9=gn(),v1="AWS_EC2_METADATA_DISABLED",D9=async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>T(tc()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>T(FS()));return Hc.chain(i(e),n(e))}return process.env[v1]&&process.env[v1]!=="false"?async()=>{throw new Hc.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(e))};function L9(e,t){let r=k9(e),n,s,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),n)await n;else if(!i||t?.(i))if(i)s||(s=r(a).then(c=>{i=c,s=void 0}));else return n=r(a).then(c=>{i=c,n=void 0}),o(a);return i};return o}var k9=e=>async t=>{let r;for(let n of e)try{return await n(t)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},w1=!1,M9=(e={})=>L9([async()=>{if(e.profile??process.env[N9.ENV_PROFILE])throw process.env[Q_.ENV_KEY]&&process.env[Q_.ENV_SECRET]&&(w1||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn.bind(e.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),w1=!0)),new Hc.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),Q_.fromEnv(e)()},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=e;if(!r&&!n&&!s&&!i&&!o)throw new Hc.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:a}=await Promise.resolve().then(()=>T(c_()));return a(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>T(_1()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>T(z_()));return r(e)(t)},async t=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>T(G_()));return r(e)(t)},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await D9(e))()),async()=>{throw new Hc.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}],b1),q9=e=>e?.expiration!==void 0,b1=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;Zf.credentialsTreatedAsExpired=b1;Zf.credentialsWillNeedRefresh=q9;Zf.defaultProvider=M9});var I1=S(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.getRuntimeConfig=void 0;var C1=(_t(),se(mn)),F9=(Wa(),se($y)),$9=dS(),B9=ne(),U9=Gn(),A1=ft(),T1=dt(),H9=PS(),j9=IS(),V9=e=>({apiVersion:"2015-10-07",base64Decoder:e?.base64Decoder??A1.fromBase64,base64Encoder:e?.base64Encoder??A1.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??j9.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??H9.defaultEventBridgeHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new C1.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4a"),signer:new C1.AwsSdkSigV4ASigner}],logger:e?.logger??new B9.NoOpLogger,protocol:e?.protocol??new F9.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.eventbridge",serviceTarget:"AWSEvents",awsQueryCompatible:!1}),serviceId:e?.serviceId??"EventBridge",signerConstructor:e?.signerConstructor??$9.SignatureV4MultiRegion,urlParser:e?.urlParser??U9.parseUrl,utf8Decoder:e?.utf8Decoder??T1.fromUtf8,utf8Encoder:e?.utf8Encoder??T1.toUtf8});ep.getRuntimeConfig=V9});var N1=S(rp=>{"use strict";Object.defineProperty(rp,"__esModule",{value:!0});rp.getRuntimeConfig=void 0;var z9=(Da(),se(Na)),W9=z9.__importDefault(Bx()),Y_=(_t(),se(mn)),G9=R1(),P1=nc(),tp=ar(),K9=sc(),x1=_n(),vs=En(),O1=Ls(),X9=ic(),Q9=Zi(),Y9=I1(),J9=ne(),Z9=ac(),eY=ne(),tY=e=>{(0,eY.emitWarningIfUnsupportedVersion)(process.version);let t=(0,Z9.resolveDefaultsModeConfig)(e),r=()=>t().then(J9.loadConfigsForDefaultMode),n=(0,Y9.getRuntimeConfig)(e);(0,Y_.emitWarningIfUnsupportedVersion)(process.version);let s={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,vs.loadConfig)(Y_.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:e?.bodyLengthChecker??X9.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??G9.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,P1.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:W9.default.version}),maxAttempts:e?.maxAttempts??(0,vs.loadConfig)(x1.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,vs.loadConfig)(tp.NODE_REGION_CONFIG_OPTIONS,{...tp.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:O1.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,vs.loadConfig)({...x1.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||Q9.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??K9.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:e?.sigv4aSigningRegionSet??(0,vs.loadConfig)(Y_.NODE_SIGV4A_CONFIG_OPTIONS,s),streamCollector:e?.streamCollector??O1.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,vs.loadConfig)(tp.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:e?.useFipsEndpoint??(0,vs.loadConfig)(tp.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:e?.userAgentAppId??(0,vs.loadConfig)(P1.NODE_APP_ID_CONFIG_OPTIONS,s)}};rp.getRuntimeConfig=tY});var hM=S(D=>{"use strict";var D1=pa(),rY=ha(),nY=ga(),L1=Qi(),sY=ar(),J_=(Wt(),se(Hs)),Mt=(Pe(),se(bl)),iY=Ga(),H=Sn(),k1=_n(),B=ne(),M1=PS(),oY=N1(),q1=uo(),F1=we(),aY=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"events"}),j={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},cY=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(s){let i=t.findIndex(o=>o.schemeId===s.schemeId);i===-1?t.push(s):t.splice(i,1,s)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},uY=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),lY=(e,t)=>{let r=Object.assign(q1.getAwsRegionExtensionConfiguration(e),B.getDefaultExtensionConfiguration(e),F1.getHttpHandlerExtensionConfiguration(e),cY(e));return t.forEach(n=>n.configure(r)),Object.assign(e,q1.resolveAwsRegionExtensionConfiguration(r),B.resolveDefaultRuntimeConfig(r),F1.resolveHttpHandlerRuntimeConfig(r),uY(r))},np=class extends B.Client{constructor(...[r]){let n=oY.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=aY(n),i=L1.resolveUserAgentConfig(s),o=k1.resolveRetryConfig(i),a=sY.resolveRegionConfig(o),c=D1.resolveHostHeaderConfig(a),u=H.resolveEndpointConfig(c),l=M1.resolveHttpAuthSchemeConfig(u),d=lY(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(Mt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(L1.getUserAgentPlugin(this.config)),this.middlewareStack.use(k1.getRetryPlugin(this.config)),this.middlewareStack.use(iY.getContentLengthPlugin(this.config)),this.middlewareStack.use(D1.getHostHeaderPlugin(this.config)),this.middlewareStack.use(rY.getLoggerPlugin(this.config)),this.middlewareStack.use(nY.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(J_.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:M1.defaultEventBridgeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new J_.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials,"aws.auth#sigv4a":m.credentials})})),this.middlewareStack.use(J_.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},qt=class $1 extends B.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,$1.prototype)}},B1=class U1 extends qt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");Object.setPrototypeOf(this,U1.prototype)}},H1=class j1 extends qt{constructor(r){super({name:"ConcurrentModificationException",$fault:"client",...r});f(this,"name","ConcurrentModificationException");f(this,"$fault","client");Object.setPrototypeOf(this,j1.prototype)}},V1=class z1 extends qt{constructor(r){super({name:"InternalException",$fault:"server",...r});f(this,"name","InternalException");f(this,"$fault","server");Object.setPrototypeOf(this,z1.prototype)}},W1=class G1 extends qt{constructor(r){super({name:"InvalidStateException",$fault:"client",...r});f(this,"name","InvalidStateException");f(this,"$fault","client");Object.setPrototypeOf(this,G1.prototype)}},K1=class X1 extends qt{constructor(r){super({name:"OperationDisabledException",$fault:"client",...r});f(this,"name","OperationDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,X1.prototype)}},Q1=class Y1 extends qt{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,Y1.prototype)}},dY={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},fY={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",OPTIONS:"OPTIONS",PATCH:"PATCH",POST:"POST",PUT:"PUT"},pY={CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DISABLED:"DISABLED",ENABLED:"ENABLED",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},hY={DISABLED:"DISABLED",ENABLED:"ENABLED"},mY={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",RUNNING:"RUNNING",STARTING:"STARTING"},J1=class Z1 extends qt{constructor(r){super({name:"IllegalStatusException",$fault:"client",...r});f(this,"name","IllegalStatusException");f(this,"$fault","client");Object.setPrototypeOf(this,Z1.prototype)}},ek=class tk extends qt{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});f(this,"name","LimitExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,tk.prototype)}},rk=class nk extends qt{constructor(r){super({name:"ResourceAlreadyExistsException",$fault:"client",...r});f(this,"name","ResourceAlreadyExistsException");f(this,"$fault","client");Object.setPrototypeOf(this,nk.prototype)}},sk=class ik extends qt{constructor(r){super({name:"InvalidEventPatternException",$fault:"client",...r});f(this,"name","InvalidEventPatternException");f(this,"$fault","client");Object.setPrototypeOf(this,ik.prototype)}},gY={API_KEY:"API_KEY",BASIC:"BASIC",OAUTH_CLIENT_CREDENTIALS:"OAUTH_CLIENT_CREDENTIALS"},EY={GET:"GET",POST:"POST",PUT:"PUT"},yY={ACTIVE:"ACTIVE",AUTHORIZED:"AUTHORIZED",AUTHORIZING:"AUTHORIZING",CREATING:"CREATING",DEAUTHORIZED:"DEAUTHORIZED",DEAUTHORIZING:"DEAUTHORIZING",DELETING:"DELETING",FAILED_CONNECTIVITY:"FAILED_CONNECTIVITY",UPDATING:"UPDATING"},ok=class ak extends qt{constructor(r){super({name:"ThrottlingException",$fault:"client",...r});f(this,"name","ThrottlingException");f(this,"$fault","client");Object.setPrototypeOf(this,ak.prototype)}},SY={DISABLED:"DISABLED",ENABLED:"ENABLED"},_Y={ACTIVE:"ACTIVE",CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DELETE_FAILED:"DELETE_FAILED",DELETING:"DELETING",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},vY={FULL:"FULL",NONE:"NONE"},wY={ERROR:"ERROR",INFO:"INFO",OFF:"OFF",TRACE:"TRACE"},ck=class uk extends qt{constructor(r){super({name:"ManagedRuleException",$fault:"client",...r});f(this,"name","ManagedRuleException");f(this,"$fault","client");Object.setPrototypeOf(this,uk.prototype)}},bY={ACTIVE:"ACTIVE",DELETED:"DELETED",PENDING:"PENDING"},RY={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS:"ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS"},CY={EC2:"EC2",EXTERNAL:"EXTERNAL",FARGATE:"FARGATE"},AY={DISTINCT_INSTANCE:"distinctInstance",MEMBER_OF:"memberOf"},TY={BINPACK:"binpack",RANDOM:"random",SPREAD:"spread"},IY={TASK_DEFINITION:"TASK_DEFINITION"},lk=class dk extends qt{constructor(r){super({name:"PolicyLengthExceededException",$fault:"client",...r});f(this,"name","PolicyLengthExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,dk.prototype)}},PY="Archive",Z_="ArchiveArn",xY="ApiDestination",ch="ApiDestinationArn",OY="AccessDeniedException",NY="ApiDestinationResponseList",uh="ApiDestinationState",DY="ApiDestinations",ev="AuthorizationEndpoint",LY="ActivateEventSource",kY="ActivateEventSourceRequest",MY="AuthHeaderParametersSensitive",tv="ApiKeyAuthParameters",rv="ApiKeyName",fk="ApiKeyValue",To="ArchiveName",qY="ArrayProperties",FY="AssignPublicIp",nv="AuthParameters",$Y="ArchiveResponseList",pk="AppSyncParameters",lh="AuthorizationType",BY="AwsVpcConfiguration",sv="Account",UY="Action",Rt="Arn",HY="Archives",jY="Attempts",VY="BatchArrayProperties",iv="BasicAuthParameters",hk="BatchParameters",zY="BodyParameters",WY="BatchRetryStrategy",mk="Condition",Dr="ConnectionArn",GY="CreateApiDestination",KY="CreateApiDestinationRequest",XY="CreateApiDestinationResponse",QY="ConnectionApiKeyAuthResponseParameters",YY="CreateArchiveRequest",JY="ConnectionAuthResponseParameters",ZY="CreateArchiveResponse",eJ="CreateArchive",ov="CreatedBy",tJ="ConnectionBasicAuthResponseParameters",rJ="ConnectionBodyParameter",nJ="ConnectionBodyParametersList",sJ="CreateConnection",iJ="CreateConnectionApiKeyAuthRequestParameters",oJ="CreateConnectionAuthRequestParameters",aJ="CreateConnectionBasicAuthRequestParameters",cJ="CreateConnectionOAuthClientRequestParameters",uJ="CreateConnectionOAuthRequestParameters",lJ="CreateConnectionRequest",dJ="CreateConnectionResponse",fJ="CreateEndpoint",pJ="CreateEventBus",hJ="CreateEventBusRequest",mJ="CreateEventBusResponse",gJ="CreateEndpointRequest",EJ="CreateEndpointResponse",yJ="ConnectionHeaderParameter",SJ="ConnectionHeaderParametersList",_J="ConnectionHttpParameters",av="ClientID",vJ="ConcurrentModificationException",wJ="ConnectionOAuthClientResponseParameters",bJ="ConnectionOAuthResponseParameters",cv="ConnectivityParameters",RJ="CreatePartnerEventSource",CJ="CreatePartnerEventSourceRequest",AJ="CreatePartnerEventSourceResponse",gk="CapacityProviderStrategy",TJ="CapacityProviderStrategyItem",uv="ClientParameters",IJ="ConnectionQueryStringParameter",PJ="ConnectionQueryStringParametersList",xJ="CancelReplay",OJ="ConnectivityResourceConfigurationArn",NJ="ConnectionResponseList",DJ="ConnectivityResourceParameters",LJ="CancelReplayRequest",kJ="CancelReplayResponse",ri="ConnectionState",Ek="ClientSecret",Qe="CreationTime",MJ="Connection",qJ="Connections",ke="Description",FJ="DeleteArchive",$J="DeleteApiDestination",BJ="DeleteApiDestinationRequest",UJ="DeleteApiDestinationResponse",HJ="DescribeApiDestinationRequest",jJ="DescribeApiDestinationResponse",VJ="DescribeApiDestination",zJ="DeleteArchiveRequest",WJ="DeleteArchiveResponse",GJ="DescribeArchiveRequest",KJ="DescribeArchiveResponse",XJ="DescribeArchive",QJ="DeauthorizeConnection",YJ="DescribeConnectionConnectivityParameters",JJ="DeauthorizeConnectionRequest",ZJ="DescribeConnectionResourceParameters",e7="DeauthorizeConnectionResponse",t7="DeleteConnectionRequest",r7="DeleteConnectionResponse",n7="DescribeConnectionRequest",s7="DescribeConnectionResponse",i7="DeleteConnection",o7="DescribeConnection",a7="DeleteEndpoint",c7="DeleteEventBus",u7="DeleteEventBusRequest",l7="DescribeEventBusRequest",d7="DescribeEventBusResponse",f7="DescribeEventBus",p7="DeleteEndpointRequest",h7="DeleteEndpointResponse",m7="DescribeEndpointRequest",g7="DescribeEndpointResponse",E7="DeactivateEventSource",y7="DeactivateEventSourceRequest",S7="DescribeEventSourceRequest",_7="DescribeEventSourceResponse",v7="DescribeEventSource",w7="DescribeEndpoint",ni="DeadLetterConfig",b7="DeletePartnerEventSource",R7="DeletePartnerEventSourceRequest",C7="DescribePartnerEventSourceRequest",A7="DescribePartnerEventSourceResponse",T7="DescribePartnerEventSource",I7="DeleteRule",P7="DeleteRuleRequest",x7="DescribeReplayRequest",O7="DescribeReplayResponse",N7="DescribeRuleRequest",D7="DescribeRuleResponse",L7="DisableRuleRequest",k7="DescribeReplay",M7="DescribeRule",q7="DisableRule",yk="DetailType",F7="DbUser",$7="Database",Sk="Destination",_k="Detail",B7="Endpoint",si="EventBuses",vk="EventBusArn",U7="EventBusList",Ft="EventBusName",H7="EventBus",wk="EventCount",dh="ErrorCode",j7="EndpointEventBus",V7="EndpointEventBusList",z7="EnableExecuteCommand",W7="EnableECSManagedTags",lv="EventEndTime",fh="EndpointId",bk="EventId",G7="EndpointList",Rk="EventLastReplayedTime",ph="ErrorMessage",ii="EventPattern",Ck="EcsParameters",K7="EnableRule",X7="EnableRuleRequest",Q7="EventSource",An="EventSourceArn",Y7="EventSourceList",Ak="EventSourceName",dv="EventStartTime",J7="EventSources",fv="ExpirationTime",pv="EndpointUrl",Z7="Endpoints",hh="Entries",eZ="Event",Tk="Force",tZ="FilterArns",Ik="FailoverConfig",Pk="FailedEntries",mh="FailedEntryCount",rZ="Group",xk="GraphQLOperation",nZ="HealthCheck",oi="HttpMethod",Ok="HeaderParameters",Nk="HttpParameters",Dk="HomeRegion",sZ="HeaderValueSensitive",iZ="Ids",hv="InvocationConnectivityParameters",oZ="IncludeDetail",gh="InvocationEndpoint",aZ="InvalidEventPatternException",cZ="InternalException",mv="InvocationHttpParameters",uZ="InputPath",lZ="InputPathsMap",Eh="InvocationRateLimitPerSecond",dZ="IllegalStatusException",fZ="InvalidStateException",Lk="InputTransformer",pZ="InputTemplate",gv="IsValueSecret",hZ="Id",mZ="Input",gZ="JobDefinition",EZ="JobName",Io="Key",Lr="KmsKeyIdentifier",kk="KinesisParameters",kr="Limit",yZ="ListArchives",SZ="ListApiDestinations",_Z="ListApiDestinationsRequest",vZ="ListApiDestinationsResponse",wZ="ListArchivesRequest",bZ="ListArchivesResponse",jc="LastAuthorizedTime",Po="LogConfig",RZ="ListConnectionsRequest",CZ="ListConnectionsResponse",AZ="ListConnections",TZ="ListEndpoints",IZ="ListEventBuses",PZ="ListEventBusesRequest",xZ="ListEventBusesResponse",OZ="LimitExceededException",NZ="ListEndpointsRequest",DZ="ListEndpointsResponse",LZ="ListEventSources",kZ="ListEventSourcesRequest",MZ="ListEventSourcesResponse",Qt="LastModifiedTime",qZ="ListPartnerEventSources",FZ="ListPartnerEventSourceAccounts",$Z="ListPartnerEventSourceAccountsRequest",BZ="ListPartnerEventSourceAccountsResponse",UZ="ListPartnerEventSourcesRequest",HZ="ListPartnerEventSourcesResponse",jZ="ListReplays",VZ="ListRuleNamesByTarget",zZ="ListRuleNamesByTargetRequest",WZ="ListRuleNamesByTargetResponse",GZ="ListReplaysRequest",KZ="ListReplaysResponse",XZ="ListRulesRequest",QZ="ListRulesResponse",YZ="ListRules",JZ="LaunchType",ZZ="ListTargetsByRule",eee="ListTargetsByRuleRequest",tee="ListTargetsByRuleResponse",ree="ListTagsForResource",nee="ListTagsForResourceRequest",see="ListTagsForResourceResponse",iee="Level",Mk="ManagedBy",oee="MaximumEventAgeInSeconds",aee="MessageGroupId",cee="MaxResults",uee="MaximumRetryAttempts",lee="ManagedRuleException",K="Name",qk="NetworkConfiguration",Tn="NamePrefix",Me="NextToken",Ev="OAuthHttpParameters",yv="OAuthParameters",dee="OperationDisabledException",Fk="Password",$k="PlacementConstraints",fee="PlacementConstraint",pee="PutEvents",hee="PutEventsRequest",mee="PutEventsRequestEntry",gee="PutEventsRequestEntryList",Eee="PutEventsResultEntryList",yee="PutEventsResultEntry",See="PutEventsResponse",_ee="PartnerEventSources",vee="PartnerEventSourceAccounts",wee="PartnerEventSourceAccountList",bee="PartnerEventSourceAccount",Ree="PartnerEventSourceList",Cee="PartnerEventSource",Aee="PartitionKeyPath",Tee="PolicyLengthExceededException",Iee="PutPermission",Pee="PutPartnerEvents",xee="PutPartnerEventsRequest",Oee="PutPartnerEventsRequestEntry",Nee="PutPartnerEventsRequestEntryList",Dee="PutPartnerEventsResultEntryList",Lee="PutPartnerEventsResultEntry",kee="PutPartnerEventsResponse",Mee="PipelineParameterList",qee="PutPermissionRequest",Fee="PathParameterValues",$ee="PutRule",Bee="PutRuleRequest",Uee="PutRuleResponse",Bk="PlacementStrategy",Hee="PlacementStrategies",jee="PropagateTags",Vee="PutTargetsRequest",zee="PutTargetsResultEntry",Wee="PutTargetsResultEntryList",Gee="PutTargetsResponse",Kee="PutTargets",Xee="PlatformVersion",Sv="Policy",Uk="Primary",Qee="Principal",Hk="QueryStringParameters",Yee="QueryStringValueSensitive",Jee="Replays",_v="ReplayArn",Zee="ResourceAssociationArn",ete="ResourceAlreadyExistsException",tte="RemoveAllPermissions",vv="ResourceARN",en="RoleArn",rte="RuleArn",ai="RoutingConfig",jk="ResourceConfigurationArn",Vk="RunCommandParameters",zk="RunCommandTargets",nte="RunCommandTarget",ci="ReplicationConfig",yh="RetentionDays",Wk="RedshiftDataParameters",ste="ReplayDestination",Gk="ReplayEndTime",ite="ReferenceId",ote="ReplayList",Vc="ReplayName",ate="ResourceNotFoundException",cte="RuleNames",Kk="ResourceParameters",ute="RemovePermissionRequest",Xk="RetryPolicy",lte="RemovePermission",dte="RuleResponseList",fte="RetryStrategy",wv="ReplayStartTime",pte="RemoveTargets",hte="RemoveTargetsRequest",mte="RemoveTargetsResultEntry",gte="RemoveTargetsResultEntryList",Ete="RemoveTargetsResponse",Qk="Resources",yte="Replay",Ste="Result",_te="Route",vte="Rules",Sh="Rule",Yk="Sql",wte="SecretArn",Jk="SizeBytes",bv="ScheduleExpression",bte="SecurityGroups",Zk="StatementId",Rte="SecretManagerArn",Cte="SageMakerPipelineParameter",Ate="SageMakerPipelineParameterList",eM="SageMakerPipelineParameters",Tte="StatementName",tM="SqsParameters",hr="StateReason",Ite="StartReplayRequest",Pte="StartReplayResponse",xte="StartReplay",Ote="SensitiveString",rM="Secondary",Nte="Size",nM="Source",sM="Sqls",Ye="State",Dte="Subnets",Lte="Type",kte="TargetArn",Mte="TaskCount",qte="TaskDefinitionArn",Fte="ThrottlingException",$te="TestEventPattern",Bte="TestEventPatternRequest",Ute="TestEventPatternResponse",Hte="TraceHeader",iM="TargetId",jte="TagKeys",Vte="TagList",zte="TargetList",Wte="TagResource",Gte="TagResourceRequest",Kte="TagResourceResponse",zc="Tags",Xte="Tag",oM="Targets",Qte="Target",aM="Time",Rv="Username",Yte="UpdateArchive",Jte="UpdateApiDestination",Zte="UpdateApiDestinationRequest",ere="UpdateApiDestinationResponse",tre="UpdateArchiveRequest",rre="UpdateArchiveResponse",nre="UpdateConnection",sre="UpdateConnectionApiKeyAuthRequestParameters",ire="UpdateConnectionAuthRequestParameters",ore="UpdateConnectionBasicAuthRequestParameters",are="UpdateConnectionOAuthClientRequestParameters",cre="UpdateConnectionOAuthRequestParameters",ure="UpdateConnectionRequest",lre="UpdateConnectionResponse",dre="UpdateEndpoint",fre="UpdateEventBus",pre="UpdateEventBusRequest",hre="UpdateEventBusResponse",mre="UpdateEndpointRequest",gre="UpdateEndpointResponse",Ere="UntagResource",yre="UntagResourceRequest",Sre="UntagResourceResponse",xo="Value",_re="Values",vre="WithEvent",wre="awsvpcConfiguration",bre="base",mr="client",Rre="capacityProvider",nr="error",Cre="expression",Are="field",sr="message",Tre="server",cM="smithy.ts.sdk.synthetic.com.amazonaws.eventbridge",uM="type",Ire="weight",E="com.amazonaws.eventbridge",Oo=[0,E,MY,8,0],Pre=[0,E,xk,8,0],xre=[0,E,sZ,8,0],Ore=[0,E,Yee,8,0],Nre=[0,E,Ote,8,0],lM=[0,E,Yk,8,0],Dre=[-3,E,OY,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(Dre,B1);var Lre=[3,E,kY,0,[K],[0]],kre=[3,E,xY,0,[ch,K,uh,Dr,gh,oi,Eh,Qe,Qt],[0,0,0,0,0,0,1,4,4]],Mre=[3,E,pk,0,[xk],[[()=>Pre,0]]],qre=[3,E,PY,0,[To,An,Ye,hr,yh,Jk,wk,Qe],[0,0,0,0,1,1,1,4]],Fre=[3,E,BY,0,[Dte,bte,FY],[64,64,0]],$re=[3,E,VY,0,[Nte],[1]],Bre=[3,E,hk,0,[gZ,EZ,qY,fte],[0,0,()=>$re,()=>Ure]],Ure=[3,E,WY,0,[jY],[1]],Hre=[3,E,LJ,0,[Vc],[0]],jre=[3,E,kJ,0,[_v,Ye,hr],[0,0,0]],Vre=[3,E,TJ,0,[Rre,Ire,bre],[0,1,1]],zre=[-3,E,vJ,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(zre,H1);var Wre=[3,E,mk,0,[Lte,Io,xo],[0,0,0]],Gre=[3,E,MJ,0,[Dr,K,ri,hr,lh,Qe,Qt,jc],[0,0,0,0,0,4,4,4]],Kre=[3,E,QY,0,[rv],[0]],Xre=[3,E,JY,0,[iv,yv,tv,mv,cv],[()=>Qre,[()=>ene,0],()=>Kre,[()=>No,0],()=>dM]],Qre=[3,E,tJ,0,[Rv],[0]],Yre=[3,E,rJ,0,[Io,xo,gv],[0,[()=>Nre,0],2]],Jre=[3,E,yJ,0,[Io,xo,gv],[0,[()=>xre,0],2]],No=[3,E,_J,0,[Ok,Hk,zY],[[()=>noe,0],[()=>soe,0],[()=>roe,0]]],Zre=[3,E,wJ,0,[av],[0]],ene=[3,E,bJ,0,[uv,ev,oi,Ev],[()=>Zre,0,0,[()=>No,0]]],tne=[3,E,IJ,0,[Io,xo,gv],[0,[()=>Ore,0],2]],rne=[3,E,OJ,0,[jk],[0]],_h=[3,E,DJ,0,[Kk],[()=>rne]],nne=[3,E,KY,0,[K,ke,Dr,gh,oi,Eh],[0,0,0,0,0,1]],sne=[3,E,XY,0,[ch,uh,Qe,Qt],[0,0,4,4]],ine=[3,E,YY,0,[To,An,ke,ii,yh,Lr],[0,0,0,0,1,0]],one=[3,E,ZY,0,[Z_,Ye,hr,Qe],[0,0,0,4]],ane=[3,E,iJ,0,[rv,fk],[0,[()=>Oo,0]]],cne=[3,E,oJ,0,[iv,yv,tv,mv,cv],[[()=>une,0],[()=>dne,0],[()=>ane,0],[()=>No,0],()=>_h]],une=[3,E,aJ,0,[Rv,Fk],[0,[()=>Oo,0]]],lne=[3,E,cJ,0,[av,Ek],[0,[()=>Oo,0]]],dne=[3,E,uJ,0,[uv,ev,oi,Ev],[[()=>lne,0],0,0,[()=>No,0]]],fne=[3,E,lJ,0,[K,ke,lh,nv,hv,Lr],[0,0,0,[()=>cne,0],()=>_h,0]],pne=[3,E,dJ,0,[Dr,ri,Qe,Qt],[0,0,4,4]],hne=[3,E,gJ,0,[K,ke,ai,ci,si,en],[0,0,()=>ko,()=>Lo,()=>Mo,0]],mne=[3,E,EJ,0,[K,Rt,ai,ci,si,en,Ye],[0,0,()=>ko,()=>Lo,()=>Mo,0,0]],gne=[3,E,hJ,0,[K,Ak,ke,Lr,ni,Po,zc],[0,0,0,0,()=>Do,()=>Wc,()=>Gc]],Ene=[3,E,mJ,0,[vk,ke,Lr,ni,Po],[0,0,0,()=>Do,()=>Wc]],yne=[3,E,CJ,0,[K,sv],[0,0]],Sne=[3,E,AJ,0,[An],[0]],_ne=[3,E,y7,0,[K],[0]],Do=[3,E,ni,0,[Rt],[0]],vne=[3,E,JJ,0,[K],[0]],wne=[3,E,e7,0,[Dr,ri,Qe,Qt,jc],[0,0,4,4,4]],bne=[3,E,BJ,0,[K],[0]],Rne=[3,E,UJ,0,[],[]],Cne=[3,E,zJ,0,[To],[0]],Ane=[3,E,WJ,0,[],[]],Tne=[3,E,t7,0,[K],[0]],Ine=[3,E,r7,0,[Dr,ri,Qe,Qt,jc],[0,0,4,4,4]],Pne=[3,E,p7,0,[K],[0]],xne=[3,E,h7,0,[],[]],One=[3,E,u7,0,[K],[0]],Nne=[3,E,R7,0,[K,sv],[0,0]],Dne=[3,E,P7,0,[K,Ft,Tk],[0,0,2]],Lne=[3,E,HJ,0,[K],[0]],kne=[3,E,jJ,0,[ch,K,ke,uh,Dr,gh,oi,Eh,Qe,Qt],[0,0,0,0,0,0,0,1,4,4]],Mne=[3,E,GJ,0,[To],[0]],qne=[3,E,KJ,0,[Z_,To,An,ke,ii,Ye,hr,Lr,yh,Jk,wk,Qe],[0,0,0,0,0,0,0,0,1,1,1,4]],dM=[3,E,YJ,0,[Kk],[()=>$ne]],Fne=[3,E,n7,0,[K],[0]],$ne=[3,E,ZJ,0,[jk,Zee],[0,0]],Bne=[3,E,s7,0,[Dr,K,ke,hv,ri,hr,lh,wte,Lr,nv,Qe,Qt,jc],[0,0,0,()=>dM,0,0,0,0,0,[()=>Xre,0],4,4,4]],Une=[3,E,m7,0,[K,Dk],[0,0]],Hne=[3,E,g7,0,[K,ke,Rt,ai,ci,si,en,fh,pv,Ye,hr,Qe,Qt],[0,0,0,()=>ko,()=>Lo,()=>Mo,0,0,0,0,0,4,4]],jne=[3,E,l7,0,[K],[0]],Vne=[3,E,d7,0,[K,Rt,ke,Lr,ni,Sv,Po,Qe,Qt],[0,0,0,0,()=>Do,0,()=>Wc,4,4]],zne=[3,E,S7,0,[K],[0]],Wne=[3,E,_7,0,[Rt,ov,Qe,fv,K,Ye],[0,0,4,4,0,0]],Gne=[3,E,C7,0,[K],[0]],Kne=[3,E,A7,0,[Rt,K],[0,0]],Xne=[3,E,x7,0,[Vc],[0]],Qne=[3,E,O7,0,[Vc,_v,ke,Ye,hr,An,Sk,dv,lv,Rk,wv,Gk],[0,0,0,0,0,0,()=>fM,4,4,4,4,4]],Yne=[3,E,N7,0,[K,Ft],[0,0]],Jne=[3,E,D7,0,[K,Rt,ii,bv,Ye,ke,en,Mk,Ft,ov],[0,0,0,0,0,0,0,0,0,0]],Zne=[3,E,L7,0,[K,Ft],[0,0]],ese=[3,E,Ck,0,[qte,Mte,JZ,qk,Xee,rZ,gk,W7,z7,$k,Bk,jee,ite,zc],[0,1,0,()=>Hse,0,0,()=>toe,2,2,()=>doe,()=>foe,0,0,()=>Gc]],tse=[3,E,X7,0,[K,Ft],[0,0]],rse=[3,E,B7,0,[K,ke,Rt,ai,ci,si,en,fh,pv,Ye,hr,Qe,Qt],[0,0,0,()=>ko,()=>Lo,()=>Mo,0,0,0,0,0,4,4]],nse=[3,E,j7,0,[vk],[0]],sse=[3,E,H7,0,[K,Rt,ke,Sv,Qe,Qt],[0,0,0,0,4,4]],ise=[3,E,Q7,0,[Rt,ov,Qe,fv,K,Ye],[0,0,4,4,0,0]],ose=[3,E,Ik,0,[Uk,rM],[()=>Xse,()=>Rie]],ase=[3,E,Nk,0,[Fee,Ok,Hk],[64,128,128]],cse=[-3,E,dZ,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(cse,J1);var use=[3,E,Lk,0,[lZ,pZ],[128,0]],lse=[-3,E,cZ,{[nr]:Tre},[sr],[0]];Mt.TypeRegistry.for(E).registerError(lse,V1);var dse=[-3,E,aZ,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(dse,sk);var fse=[-3,E,fZ,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(fse,W1);var pse=[3,E,kk,0,[Aee],[0]],hse=[-3,E,OZ,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(hse,ek);var mse=[3,E,_Z,0,[Tn,Dr,Me,kr],[0,0,0,1]],gse=[3,E,vZ,0,[DY,Me],[()=>Zie,0]],Ese=[3,E,wZ,0,[Tn,An,Ye,Me,kr],[0,0,0,0,1]],yse=[3,E,bZ,0,[HY,Me],[()=>eoe,0]],Sse=[3,E,RZ,0,[Tn,ri,Me,kr],[0,0,0,1]],_se=[3,E,CZ,0,[qJ,Me],[()=>ioe,0]],vse=[3,E,NZ,0,[Tn,Dk,Me,cee],[0,0,0,1]],wse=[3,E,DZ,0,[Z7,Me],[()=>ooe,0]],bse=[3,E,PZ,0,[Tn,Me,kr],[0,0,1]],Rse=[3,E,xZ,0,[si,Me],[()=>aoe,0]],Cse=[3,E,kZ,0,[Tn,Me,kr],[0,0,1]],Ase=[3,E,MZ,0,[J7,Me],[()=>coe,0]],Tse=[3,E,$Z,0,[Ak,Me,kr],[0,0,1]],Ise=[3,E,BZ,0,[vee,Me],[()=>uoe,0]],Pse=[3,E,UZ,0,[Tn,Me,kr],[0,0,1]],xse=[3,E,HZ,0,[_ee,Me],[()=>loe,0]],Ose=[3,E,GZ,0,[Tn,Ye,An,Me,kr],[0,0,0,0,1]],Nse=[3,E,KZ,0,[Jee,Me],[()=>Soe,0]],Dse=[3,E,zZ,0,[kte,Ft,Me,kr],[0,0,0,1]],Lse=[3,E,WZ,0,[cte,Me],[64,0]],kse=[3,E,XZ,0,[Tn,Ft,Me,kr],[0,0,0,1]],Mse=[3,E,QZ,0,[vte,Me],[()=>_oe,0]],qse=[3,E,nee,0,[vv],[0]],Fse=[3,E,see,0,[zc],[()=>Gc]],$se=[3,E,eee,0,[Sh,Ft,Me,kr],[0,0,0,1]],Bse=[3,E,tee,0,[oM,Me],[[()=>pM,0],0]],Wc=[3,E,Po,0,[oZ,iee],[0,0]],Use=[-3,E,lee,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(Use,ck);var Hse=[3,E,qk,0,[wre],[()=>Fre]],jse=[-3,E,dee,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(jse,K1);var Vse=[3,E,Cee,0,[Rt,K],[0,0]],zse=[3,E,bee,0,[sv,Qe,fv,Ye],[0,4,4,0]],Wse=[3,E,fee,0,[uM,Cre],[0,0]],Gse=[3,E,Bk,0,[uM,Are],[0,0]],Kse=[-3,E,Tee,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(Kse,lk);var Xse=[3,E,Uk,0,[nZ],[0]],Qse=[3,E,hee,0,[hh,fh],[()=>poe,0]],Yse=[3,E,mee,0,[aM,nM,Qk,yk,_k,Ft,Hte],[4,0,64,0,0,0,0]],Jse=[3,E,See,0,[mh,hh],[1,()=>hoe]],Zse=[3,E,yee,0,[bk,dh,ph],[0,0,0]],eie=[3,E,xee,0,[hh],[()=>moe]],tie=[3,E,Oee,0,[aM,nM,Qk,yk,_k],[4,0,64,0,0]],rie=[3,E,kee,0,[mh,hh],[1,()=>goe]],nie=[3,E,Lee,0,[bk,dh,ph],[0,0,0]],sie=[3,E,qee,0,[Ft,UY,Qee,Zk,mk,Sv],[0,0,0,0,()=>Wre,0]],iie=[3,E,Bee,0,[K,bv,ii,Ye,ke,en,zc,Ft],[0,0,0,0,0,0,()=>Gc,0]],oie=[3,E,Uee,0,[rte],[0]],aie=[3,E,Vee,0,[Sh,Ft,oM],[0,0,[()=>pM,0]]],cie=[3,E,Gee,0,[mh,Pk],[1,()=>Eoe]],uie=[3,E,zee,0,[iM,dh,ph],[0,0,0]],lie=[3,E,Wk,0,[Rte,$7,F7,Yk,Tte,vre,sM],[0,0,0,[()=>lM,0],0,2,[()=>boe,0]]],die=[3,E,ute,0,[Zk,tte,Ft],[0,2,0]],fie=[3,E,hte,0,[Sh,Ft,iZ,Tk],[0,0,64,2]],pie=[3,E,Ete,0,[mh,Pk],[1,()=>yoe]],hie=[3,E,mte,0,[iM,dh,ph],[0,0,0]],mie=[3,E,yte,0,[Vc,An,Ye,hr,dv,lv,Rk,wv,Gk],[0,0,0,0,4,4,4,4,4]],fM=[3,E,ste,0,[Rt,tZ],[0,64]],Lo=[3,E,ci,0,[Ye],[0]],gie=[-3,E,ete,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(gie,rk);var Eie=[-3,E,ate,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(Eie,Q1);var yie=[3,E,Xk,0,[uee,oee],[1,1]],ko=[3,E,ai,0,[Ik],[()=>ose]],Sie=[3,E,Sh,0,[K,Rt,ii,Ye,ke,bv,en,Mk,Ft],[0,0,0,0,0,0,0,0,0]],_ie=[3,E,Vk,0,[zk],[()=>voe]],vie=[3,E,nte,0,[Io,_re],[0,64]],wie=[3,E,Cte,0,[K,xo],[0,0]],bie=[3,E,eM,0,[Mee],[()=>woe]],Rie=[3,E,rM,0,[_te],[0]],Cie=[3,E,tM,0,[aee],[0]],Aie=[3,E,Ite,0,[Vc,ke,An,dv,lv,Sk],[0,0,0,4,4,()=>fM]],Tie=[3,E,Pte,0,[_v,Ye,hr,wv],[0,0,0,4]],Iie=[3,E,Xte,0,[Io,xo],[0,0]],Pie=[3,E,Gte,0,[vv,zc],[0,()=>Gc]],xie=[3,E,Kte,0,[],[]],Oie=[3,E,Qte,0,[hZ,Rt,en,mZ,uZ,Lk,kk,Vk,Ck,hk,tM,Nk,Wk,eM,ni,Xk,pk],[0,0,0,0,0,()=>use,()=>pse,()=>_ie,()=>ese,()=>Bre,()=>Cie,()=>ase,[()=>lie,0],()=>bie,()=>Do,()=>yie,[()=>Mre,0]]],Nie=[3,E,Bte,0,[ii,eZ],[0,0]],Die=[3,E,Ute,0,[Ste],[2]],Lie=[-3,E,Fte,{[nr]:mr},[sr],[0]];Mt.TypeRegistry.for(E).registerError(Lie,ok);var kie=[3,E,yre,0,[vv,jte],[0,64]],Mie=[3,E,Sre,0,[],[]],qie=[3,E,Zte,0,[K,ke,Dr,gh,oi,Eh],[0,0,0,0,0,1]],Fie=[3,E,ere,0,[ch,uh,Qe,Qt],[0,0,4,4]],$ie=[3,E,tre,0,[To,ke,ii,yh,Lr],[0,0,0,1,0]],Bie=[3,E,rre,0,[Z_,Ye,hr,Qe],[0,0,0,4]],Uie=[3,E,sre,0,[rv,fk],[0,[()=>Oo,0]]],Hie=[3,E,ire,0,[iv,yv,tv,mv,cv],[[()=>jie,0],[()=>zie,0],[()=>Uie,0],[()=>No,0],()=>_h]],jie=[3,E,ore,0,[Rv,Fk],[0,[()=>Oo,0]]],Vie=[3,E,are,0,[av,Ek],[0,[()=>Oo,0]]],zie=[3,E,cre,0,[uv,ev,oi,Ev],[[()=>Vie,0],0,0,[()=>No,0]]],Wie=[3,E,ure,0,[K,ke,lh,nv,hv,Lr],[0,0,0,[()=>Hie,0],()=>_h,0]],Gie=[3,E,lre,0,[Dr,ri,Qe,Qt,jc],[0,0,4,4,4]],Kie=[3,E,mre,0,[K,ke,ai,ci,si,en],[0,0,()=>ko,()=>Lo,()=>Mo,0]],Xie=[3,E,gre,0,[K,Rt,ai,ci,si,en,fh,pv,Ye],[0,0,()=>ko,()=>Lo,()=>Mo,0,0,0,0]],Qie=[3,E,pre,0,[K,Lr,ke,ni,Po],[0,0,0,()=>Do,()=>Wc]],Yie=[3,E,hre,0,[Rt,K,Lr,ke,ni,Po],[0,0,0,0,()=>Do,()=>Wc]],In="unit",Jie=[-3,cM,"EventBridgeServiceException",0,[],[]];Mt.TypeRegistry.for(cM).registerError(Jie,qt);var Zie=[1,E,NY,0,()=>kre],eoe=[1,E,$Y,0,()=>qre],toe=[1,E,gk,0,()=>Vre],roe=[1,E,nJ,0,[()=>Yre,0]],noe=[1,E,SJ,0,[()=>Jre,0]],soe=[1,E,PJ,0,[()=>tne,0]],ioe=[1,E,NJ,0,()=>Gre],Mo=[1,E,V7,0,()=>nse],ooe=[1,E,G7,0,()=>rse],aoe=[1,E,U7,0,()=>sse],coe=[1,E,Y7,0,()=>ise],uoe=[1,E,wee,0,()=>zse],loe=[1,E,Ree,0,()=>Vse],doe=[1,E,$k,0,()=>Wse],foe=[1,E,Hee,0,()=>Gse],poe=[1,E,gee,0,()=>Yse],hoe=[1,E,Eee,0,()=>Zse],moe=[1,E,Nee,0,()=>tie],goe=[1,E,Dee,0,()=>nie],Eoe=[1,E,Wee,0,()=>uie],yoe=[1,E,gte,0,()=>hie],Soe=[1,E,ote,0,()=>mie],_oe=[1,E,dte,0,()=>Sie],voe=[1,E,zk,0,()=>vie],woe=[1,E,Ate,0,()=>wie],boe=[1,E,sM,8,[()=>lM,0]],Gc=[1,E,Vte,0,()=>Iie],pM=[1,E,zte,0,[()=>Oie,0]],Roe=[9,E,LY,0,()=>Lre,()=>In],Coe=[9,E,xJ,0,()=>Hre,()=>jre],Aoe=[9,E,GY,0,()=>nne,()=>sne],Toe=[9,E,eJ,0,()=>ine,()=>one],Ioe=[9,E,sJ,0,()=>fne,()=>pne],Poe=[9,E,fJ,0,()=>hne,()=>mne],xoe=[9,E,pJ,0,()=>gne,()=>Ene],Ooe=[9,E,RJ,0,()=>yne,()=>Sne],Noe=[9,E,E7,0,()=>_ne,()=>In],Doe=[9,E,QJ,0,()=>vne,()=>wne],Loe=[9,E,$J,0,()=>bne,()=>Rne],koe=[9,E,FJ,0,()=>Cne,()=>Ane],Moe=[9,E,i7,0,()=>Tne,()=>Ine],qoe=[9,E,a7,0,()=>Pne,()=>xne],Foe=[9,E,c7,0,()=>One,()=>In],$oe=[9,E,b7,0,()=>Nne,()=>In],Boe=[9,E,I7,0,()=>Dne,()=>In],Uoe=[9,E,VJ,0,()=>Lne,()=>kne],Hoe=[9,E,XJ,0,()=>Mne,()=>qne],joe=[9,E,o7,0,()=>Fne,()=>Bne],Voe=[9,E,w7,0,()=>Une,()=>Hne],zoe=[9,E,f7,0,()=>jne,()=>Vne],Woe=[9,E,v7,0,()=>zne,()=>Wne],Goe=[9,E,T7,0,()=>Gne,()=>Kne],Koe=[9,E,k7,0,()=>Xne,()=>Qne],Xoe=[9,E,M7,0,()=>Yne,()=>Jne],Qoe=[9,E,q7,0,()=>Zne,()=>In],Yoe=[9,E,K7,0,()=>tse,()=>In],Joe=[9,E,SZ,0,()=>mse,()=>gse],Zoe=[9,E,yZ,0,()=>Ese,()=>yse],eae=[9,E,AZ,0,()=>Sse,()=>_se],tae=[9,E,TZ,0,()=>vse,()=>wse],rae=[9,E,IZ,0,()=>bse,()=>Rse],nae=[9,E,LZ,0,()=>Cse,()=>Ase],sae=[9,E,FZ,0,()=>Tse,()=>Ise],iae=[9,E,qZ,0,()=>Pse,()=>xse],oae=[9,E,jZ,0,()=>Ose,()=>Nse],aae=[9,E,VZ,0,()=>Dse,()=>Lse],cae=[9,E,YZ,0,()=>kse,()=>Mse],uae=[9,E,ree,0,()=>qse,()=>Fse],lae=[9,E,ZZ,0,()=>$se,()=>Bse],dae=[9,E,pee,0,()=>Qse,()=>Jse],fae=[9,E,Pee,0,()=>eie,()=>rie],pae=[9,E,Iee,0,()=>sie,()=>In],hae=[9,E,$ee,0,()=>iie,()=>oie],mae=[9,E,Kee,0,()=>aie,()=>cie],gae=[9,E,lte,0,()=>die,()=>In],Eae=[9,E,pte,0,()=>fie,()=>pie],yae=[9,E,xte,0,()=>Aie,()=>Tie],Sae=[9,E,Wte,0,()=>Pie,()=>xie],_ae=[9,E,$te,0,()=>Nie,()=>Die],vae=[9,E,Ere,0,()=>kie,()=>Mie],wae=[9,E,Jte,0,()=>qie,()=>Fie],bae=[9,E,Yte,0,()=>$ie,()=>Bie],Rae=[9,E,nre,0,()=>Wie,()=>Gie],Cae=[9,E,dre,0,()=>Kie,()=>Xie],Aae=[9,E,fre,0,()=>Qie,()=>Yie],sp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ActivateEventSource",{}).n("EventBridgeClient","ActivateEventSourceCommand").sc(Roe).build(){},ip=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CancelReplay",{}).n("EventBridgeClient","CancelReplayCommand").sc(Coe).build(){},op=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreateApiDestination",{}).n("EventBridgeClient","CreateApiDestinationCommand").sc(Aoe).build(){},ap=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreateArchive",{}).n("EventBridgeClient","CreateArchiveCommand").sc(Toe).build(){},cp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreateConnection",{}).n("EventBridgeClient","CreateConnectionCommand").sc(Ioe).build(){},up=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEndpoint",{}).n("EventBridgeClient","CreateEndpointCommand").sc(Poe).build(){},lp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEventBus",{}).n("EventBridgeClient","CreateEventBusCommand").sc(xoe).build(){},dp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","CreatePartnerEventSource",{}).n("EventBridgeClient","CreatePartnerEventSourceCommand").sc(Ooe).build(){},fp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeactivateEventSource",{}).n("EventBridgeClient","DeactivateEventSourceCommand").sc(Noe).build(){},pp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeauthorizeConnection",{}).n("EventBridgeClient","DeauthorizeConnectionCommand").sc(Doe).build(){},hp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteApiDestination",{}).n("EventBridgeClient","DeleteApiDestinationCommand").sc(Loe).build(){},mp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteArchive",{}).n("EventBridgeClient","DeleteArchiveCommand").sc(koe).build(){},gp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteConnection",{}).n("EventBridgeClient","DeleteConnectionCommand").sc(Moe).build(){},Ep=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEndpoint",{}).n("EventBridgeClient","DeleteEndpointCommand").sc(qoe).build(){},yp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEventBus",{}).n("EventBridgeClient","DeleteEventBusCommand").sc(Foe).build(){},Sp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeletePartnerEventSource",{}).n("EventBridgeClient","DeletePartnerEventSourceCommand").sc($oe).build(){},_p=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteRule",{}).n("EventBridgeClient","DeleteRuleCommand").sc(Boe).build(){},vp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeApiDestination",{}).n("EventBridgeClient","DescribeApiDestinationCommand").sc(Uoe).build(){},wp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeArchive",{}).n("EventBridgeClient","DescribeArchiveCommand").sc(Hoe).build(){},bp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeConnection",{}).n("EventBridgeClient","DescribeConnectionCommand").sc(joe).build(){},Rp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEndpoint",{}).n("EventBridgeClient","DescribeEndpointCommand").sc(Voe).build(){},Cp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventBus",{}).n("EventBridgeClient","DescribeEventBusCommand").sc(zoe).build(){},Ap=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventSource",{}).n("EventBridgeClient","DescribeEventSourceCommand").sc(Woe).build(){},Tp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribePartnerEventSource",{}).n("EventBridgeClient","DescribePartnerEventSourceCommand").sc(Goe).build(){},Ip=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeReplay",{}).n("EventBridgeClient","DescribeReplayCommand").sc(Koe).build(){},Pp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeRule",{}).n("EventBridgeClient","DescribeRuleCommand").sc(Xoe).build(){},xp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","DisableRule",{}).n("EventBridgeClient","DisableRuleCommand").sc(Qoe).build(){},Op=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","EnableRule",{}).n("EventBridgeClient","EnableRuleCommand").sc(Yoe).build(){},Np=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListApiDestinations",{}).n("EventBridgeClient","ListApiDestinationsCommand").sc(Joe).build(){},Dp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListArchives",{}).n("EventBridgeClient","ListArchivesCommand").sc(Zoe).build(){},Lp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListConnections",{}).n("EventBridgeClient","ListConnectionsCommand").sc(eae).build(){},kp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListEndpoints",{}).n("EventBridgeClient","ListEndpointsCommand").sc(tae).build(){},Mp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventBuses",{}).n("EventBridgeClient","ListEventBusesCommand").sc(rae).build(){},qp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventSources",{}).n("EventBridgeClient","ListEventSourcesCommand").sc(nae).build(){},Fp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSourceAccounts",{}).n("EventBridgeClient","ListPartnerEventSourceAccountsCommand").sc(sae).build(){},$p=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSources",{}).n("EventBridgeClient","ListPartnerEventSourcesCommand").sc(iae).build(){},Bp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListReplays",{}).n("EventBridgeClient","ListReplaysCommand").sc(oae).build(){},Up=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListRuleNamesByTarget",{}).n("EventBridgeClient","ListRuleNamesByTargetCommand").sc(aae).build(){},Hp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListRules",{}).n("EventBridgeClient","ListRulesCommand").sc(cae).build(){},jp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListTagsForResource",{}).n("EventBridgeClient","ListTagsForResourceCommand").sc(uae).build(){},Vp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","ListTargetsByRule",{}).n("EventBridgeClient","ListTargetsByRuleCommand").sc(lae).build(){},zp=class extends B.Command.classBuilder().ep({...j,EndpointId:{type:"contextParams",name:"EndpointId"}}).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","PutEvents",{}).n("EventBridgeClient","PutEventsCommand").sc(dae).build(){},Wp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","PutPartnerEvents",{}).n("EventBridgeClient","PutPartnerEventsCommand").sc(fae).build(){},Gp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","PutPermission",{}).n("EventBridgeClient","PutPermissionCommand").sc(pae).build(){},Kp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","PutRule",{}).n("EventBridgeClient","PutRuleCommand").sc(hae).build(){},Xp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","PutTargets",{}).n("EventBridgeClient","PutTargetsCommand").sc(mae).build(){},Qp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","RemovePermission",{}).n("EventBridgeClient","RemovePermissionCommand").sc(gae).build(){},Yp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","RemoveTargets",{}).n("EventBridgeClient","RemoveTargetsCommand").sc(Eae).build(){},Jp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","StartReplay",{}).n("EventBridgeClient","StartReplayCommand").sc(yae).build(){},Zp=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","TagResource",{}).n("EventBridgeClient","TagResourceCommand").sc(Sae).build(){},eh=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","TestEventPattern",{}).n("EventBridgeClient","TestEventPatternCommand").sc(_ae).build(){},th=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UntagResource",{}).n("EventBridgeClient","UntagResourceCommand").sc(vae).build(){},rh=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateApiDestination",{}).n("EventBridgeClient","UpdateApiDestinationCommand").sc(wae).build(){},nh=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateArchive",{}).n("EventBridgeClient","UpdateArchiveCommand").sc(bae).build(){},sh=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateConnection",{}).n("EventBridgeClient","UpdateConnectionCommand").sc(Rae).build(){},ih=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEndpoint",{}).n("EventBridgeClient","UpdateEndpointCommand").sc(Cae).build(){},oh=class extends B.Command.classBuilder().ep(j).m(function(t,r,n,s){return[H.getEndpointPlugin(n,t.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEventBus",{}).n("EventBridgeClient","UpdateEventBusCommand").sc(Aae).build(){},Tae={ActivateEventSourceCommand:sp,CancelReplayCommand:ip,CreateApiDestinationCommand:op,CreateArchiveCommand:ap,CreateConnectionCommand:cp,CreateEndpointCommand:up,CreateEventBusCommand:lp,CreatePartnerEventSourceCommand:dp,DeactivateEventSourceCommand:fp,DeauthorizeConnectionCommand:pp,DeleteApiDestinationCommand:hp,DeleteArchiveCommand:mp,DeleteConnectionCommand:gp,DeleteEndpointCommand:Ep,DeleteEventBusCommand:yp,DeletePartnerEventSourceCommand:Sp,DeleteRuleCommand:_p,DescribeApiDestinationCommand:vp,DescribeArchiveCommand:wp,DescribeConnectionCommand:bp,DescribeEndpointCommand:Rp,DescribeEventBusCommand:Cp,DescribeEventSourceCommand:Ap,DescribePartnerEventSourceCommand:Tp,DescribeReplayCommand:Ip,DescribeRuleCommand:Pp,DisableRuleCommand:xp,EnableRuleCommand:Op,ListApiDestinationsCommand:Np,ListArchivesCommand:Dp,ListConnectionsCommand:Lp,ListEndpointsCommand:kp,ListEventBusesCommand:Mp,ListEventSourcesCommand:qp,ListPartnerEventSourceAccountsCommand:Fp,ListPartnerEventSourcesCommand:$p,ListReplaysCommand:Bp,ListRuleNamesByTargetCommand:Up,ListRulesCommand:Hp,ListTagsForResourceCommand:jp,ListTargetsByRuleCommand:Vp,PutEventsCommand:zp,PutPartnerEventsCommand:Wp,PutPermissionCommand:Gp,PutRuleCommand:Kp,PutTargetsCommand:Xp,RemovePermissionCommand:Qp,RemoveTargetsCommand:Yp,StartReplayCommand:Jp,TagResourceCommand:Zp,TestEventPatternCommand:eh,UntagResourceCommand:th,UpdateApiDestinationCommand:rh,UpdateArchiveCommand:nh,UpdateConnectionCommand:sh,UpdateEndpointCommand:ih,UpdateEventBusCommand:oh},ah=class extends np{};B.createAggregatedClient(Tae,ah);Object.defineProperty(D,"$Command",{enumerable:!0,get:function(){return B.Command}});Object.defineProperty(D,"__Client",{enumerable:!0,get:function(){return B.Client}});D.AccessDeniedException=B1;D.ActivateEventSourceCommand=sp;D.ApiDestinationHttpMethod=fY;D.ApiDestinationState=dY;D.ArchiveState=pY;D.AssignPublicIp=hY;D.CancelReplayCommand=ip;D.ConcurrentModificationException=H1;D.ConnectionAuthorizationType=gY;D.ConnectionOAuthHttpMethod=EY;D.ConnectionState=yY;D.CreateApiDestinationCommand=op;D.CreateArchiveCommand=ap;D.CreateConnectionCommand=cp;D.CreateEndpointCommand=up;D.CreateEventBusCommand=lp;D.CreatePartnerEventSourceCommand=dp;D.DeactivateEventSourceCommand=fp;D.DeauthorizeConnectionCommand=pp;D.DeleteApiDestinationCommand=hp;D.DeleteArchiveCommand=mp;D.DeleteConnectionCommand=gp;D.DeleteEndpointCommand=Ep;D.DeleteEventBusCommand=yp;D.DeletePartnerEventSourceCommand=Sp;D.DeleteRuleCommand=_p;D.DescribeApiDestinationCommand=vp;D.DescribeArchiveCommand=wp;D.DescribeConnectionCommand=bp;D.DescribeEndpointCommand=Rp;D.DescribeEventBusCommand=Cp;D.DescribeEventSourceCommand=Ap;D.DescribePartnerEventSourceCommand=Tp;D.DescribeReplayCommand=Ip;D.DescribeRuleCommand=Pp;D.DisableRuleCommand=xp;D.EnableRuleCommand=Op;D.EndpointState=_Y;D.EventBridge=ah;D.EventBridgeClient=np;D.EventBridgeServiceException=qt;D.EventSourceState=bY;D.IllegalStatusException=J1;D.IncludeDetail=vY;D.InternalException=V1;D.InvalidEventPatternException=sk;D.InvalidStateException=W1;D.LaunchType=CY;D.Level=wY;D.LimitExceededException=ek;D.ListApiDestinationsCommand=Np;D.ListArchivesCommand=Dp;D.ListConnectionsCommand=Lp;D.ListEndpointsCommand=kp;D.ListEventBusesCommand=Mp;D.ListEventSourcesCommand=qp;D.ListPartnerEventSourceAccountsCommand=Fp;D.ListPartnerEventSourcesCommand=$p;D.ListReplaysCommand=Bp;D.ListRuleNamesByTargetCommand=Up;D.ListRulesCommand=Hp;D.ListTagsForResourceCommand=jp;D.ListTargetsByRuleCommand=Vp;D.ManagedRuleException=ck;D.OperationDisabledException=K1;D.PlacementConstraintType=AY;D.PlacementStrategyType=TY;D.PolicyLengthExceededException=lk;D.PropagateTags=IY;D.PutEventsCommand=zp;D.PutPartnerEventsCommand=Wp;D.PutPermissionCommand=Gp;D.PutRuleCommand=Kp;D.PutTargetsCommand=Xp;D.RemovePermissionCommand=Qp;D.RemoveTargetsCommand=Yp;D.ReplayState=mY;D.ReplicationState=SY;D.ResourceAlreadyExistsException=rk;D.ResourceNotFoundException=Q1;D.RuleState=RY;D.StartReplayCommand=Jp;D.TagResourceCommand=Zp;D.TestEventPatternCommand=eh;D.ThrottlingException=ok;D.UntagResourceCommand=th;D.UpdateApiDestinationCommand=rh;D.UpdateArchiveCommand=nh;D.UpdateConnectionCommand=sh;D.UpdateEndpointCommand=ih;D.UpdateEventBusCommand=oh});var qv=S((Qc,qo)=>{var xae=200,LM="__lodash_hash_undefined__",Oae=800,Nae=16,kM=9007199254740991,MM="[object Arguments]",Dae="[object Array]",Lae="[object AsyncFunction]",kae="[object Boolean]",Mae="[object Date]",qae="[object Error]",qM="[object Function]",Fae="[object GeneratorFunction]",$ae="[object Map]",Bae="[object Number]",Uae="[object Null]",FM="[object Object]",Hae="[object Proxy]",jae="[object RegExp]",Vae="[object Set]",zae="[object String]",Wae="[object Undefined]",Gae="[object WeakMap]",Kae="[object ArrayBuffer]",Xae="[object DataView]",Qae="[object Float32Array]",Yae="[object Float64Array]",Jae="[object Int8Array]",Zae="[object Int16Array]",ece="[object Int32Array]",tce="[object Uint8Array]",rce="[object Uint8ClampedArray]",nce="[object Uint16Array]",sce="[object Uint32Array]",ice=/[\\^$.*+?()[\]{}|]/g,oce=/^\[object .+?Constructor\]$/,ace=/^(?:0|[1-9]\d*)$/,xe={};xe[Qae]=xe[Yae]=xe[Jae]=xe[Zae]=xe[ece]=xe[tce]=xe[rce]=xe[nce]=xe[sce]=!0;xe[MM]=xe[Dae]=xe[Kae]=xe[kae]=xe[Xae]=xe[Mae]=xe[qae]=xe[qM]=xe[$ae]=xe[Bae]=xe[FM]=xe[jae]=xe[Vae]=xe[zae]=xe[Gae]=!1;var $M=typeof global=="object"&&global&&global.Object===Object&&global,cce=typeof self=="object"&&self&&self.Object===Object&&self,Zc=$M||cce||Function("return this")(),BM=typeof Qc=="object"&&Qc&&!Qc.nodeType&&Qc,Yc=BM&&typeof qo=="object"&&qo&&!qo.nodeType&&qo,UM=Yc&&Yc.exports===BM,Tv=UM&&$M.process,CM=function(){try{var e=Yc&&Yc.require&&Yc.require("util").types;return e||Tv&&Tv.binding&&Tv.binding("util")}catch{}}(),AM=CM&&CM.isTypedArray;function uce(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function lce(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function dce(e){return function(t){return e(t)}}function fce(e,t){return e?.[t]}function pce(e,t){return function(r){return e(t(r))}}var hce=Array.prototype,mce=Function.prototype,Ch=Object.prototype,Iv=Zc["__core-js_shared__"],Ah=mce.toString,xn=Ch.hasOwnProperty,TM=function(){var e=/[^.]+$/.exec(Iv&&Iv.keys&&Iv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),HM=Ch.toString,gce=Ah.call(Object),Ece=RegExp("^"+Ah.call(xn).replace(ice,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bh=UM?Zc.Buffer:void 0,IM=Zc.Symbol,PM=Zc.Uint8Array,xM=bh?bh.allocUnsafe:void 0,jM=pce(Object.getPrototypeOf,Object),OM=Object.create,yce=Ch.propertyIsEnumerable,Sce=hce.splice,ui=IM?IM.toStringTag:void 0,Rh=function(){try{var e=Lv(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_ce=bh?bh.isBuffer:void 0,NM=Math.max,vce=Date.now,VM=Lv(Zc,"Map"),Jc=Lv(Object,"create"),wce=function(){function e(){}return function(t){if(!di(t))return{};if(OM)return OM(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function li(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function bce(){this.__data__=Jc?Jc(null):{},this.size=0}function Rce(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Cce(e){var t=this.__data__;if(Jc){var r=t[e];return r===LM?void 0:r}return xn.call(t,e)?t[e]:void 0}function Ace(e){var t=this.__data__;return Jc?t[e]!==void 0:xn.call(t,e)}function Tce(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Jc&&t===void 0?LM:t,this}li.prototype.clear=bce;li.prototype.delete=Rce;li.prototype.get=Cce;li.prototype.has=Ace;li.prototype.set=Tce;function On(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ice(){this.__data__=[],this.size=0}function Pce(e){var t=this.__data__,r=Th(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Sce.call(t,r,1),--this.size,!0}function xce(e){var t=this.__data__,r=Th(t,e);return r<0?void 0:t[r][1]}function Oce(e){return Th(this.__data__,e)>-1}function Nce(e,t){var r=this.__data__,n=Th(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}On.prototype.clear=Ice;On.prototype.delete=Pce;On.prototype.get=xce;On.prototype.has=Oce;On.prototype.set=Nce;function Fo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Dce(){this.size=0,this.__data__={hash:new li,map:new(VM||On),string:new li}}function Lce(e){var t=Ph(this,e).delete(e);return this.size-=t?1:0,t}function kce(e){return Ph(this,e).get(e)}function Mce(e){return Ph(this,e).has(e)}function qce(e,t){var r=Ph(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}Fo.prototype.clear=Dce;Fo.prototype.delete=Lce;Fo.prototype.get=kce;Fo.prototype.has=Mce;Fo.prototype.set=qce;function $o(e){var t=this.__data__=new On(e);this.size=t.size}function Fce(){this.__data__=new On,this.size=0}function $ce(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Bce(e){return this.__data__.get(e)}function Uce(e){return this.__data__.has(e)}function Hce(e,t){var r=this.__data__;if(r instanceof On){var n=r.__data__;if(!VM||n.length<xae-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fo(n)}return r.set(e,t),this.size=r.size,this}$o.prototype.clear=Fce;$o.prototype.delete=$ce;$o.prototype.get=Bce;$o.prototype.has=Uce;$o.prototype.set=Hce;function jce(e,t){var r=Nv(e),n=!r&&Ov(e),s=!r&&!n&&KM(e),i=!r&&!n&&!s&&QM(e),o=r||n||s||i,a=o?lce(e.length,String):[],c=a.length;for(var u in e)(t||xn.call(e,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||WM(u,c)))&&a.push(u);return a}function Pv(e,t,r){(r!==void 0&&!xh(e[t],r)||r===void 0&&!(t in e))&&Dv(e,t,r)}function Vce(e,t,r){var n=e[t];(!(xn.call(e,t)&&xh(n,r))||r===void 0&&!(t in e))&&Dv(e,t,r)}function Th(e,t){for(var r=e.length;r--;)if(xh(e[r][0],t))return r;return-1}function Dv(e,t,r){t=="__proto__"&&Rh?Rh(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var zce=sue();function Ih(e){return e==null?e===void 0?Wae:Uae:ui&&ui in Object(e)?iue(e):due(e)}function DM(e){return eu(e)&&Ih(e)==MM}function Wce(e){if(!di(e)||uue(e))return!1;var t=Mv(e)?Ece:oce;return t.test(mue(e))}function Gce(e){return eu(e)&&XM(e.length)&&!!xe[Ih(e)]}function Kce(e){if(!di(e))return lue(e);var t=GM(e),r=[];for(var n in e)n=="constructor"&&(t||!xn.call(e,n))||r.push(n);return r}function zM(e,t,r,n,s){e!==t&&zce(t,function(i,o){if(s||(s=new $o),di(i))Xce(e,t,o,r,zM,n,s);else{var a=n?n(xv(e,o),i,o+"",e,t,s):void 0;a===void 0&&(a=i),Pv(e,o,a)}},YM)}function Xce(e,t,r,n,s,i,o){var a=xv(e,r),c=xv(t,r),u=o.get(c);if(u){Pv(e,r,u);return}var l=i?i(a,c,r+"",e,t,o):void 0,d=l===void 0;if(d){var m=Nv(c),g=!m&&KM(c),y=!m&&!g&&QM(c);l=c,m||g||y?Nv(a)?l=a:gue(a)?l=tue(a):g?(d=!1,l=Jce(c,!0)):y?(d=!1,l=eue(c,!0)):l=[]:Eue(c)||Ov(c)?(l=a,Ov(a)?l=yue(a):(!di(a)||Mv(a))&&(l=oue(c))):d=!1}d&&(o.set(c,l),s(l,c,n,i,o),o.delete(c)),Pv(e,r,l)}function Qce(e,t){return pue(fue(e,t,JM),e+"")}var Yce=Rh?function(e,t){return Rh(e,"toString",{configurable:!0,enumerable:!1,value:_ue(t),writable:!0})}:JM;function Jce(e,t){if(t)return e.slice();var r=e.length,n=xM?xM(r):new e.constructor(r);return e.copy(n),n}function Zce(e){var t=new e.constructor(e.byteLength);return new PM(t).set(new PM(e)),t}function eue(e,t){var r=t?Zce(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function tue(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function rue(e,t,r,n){var s=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var a=t[i],c=n?n(r[a],e[a],a,r,e):void 0;c===void 0&&(c=e[a]),s?Dv(r,a,c):Vce(r,a,c)}return r}function nue(e){return Qce(function(t,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=e.length>3&&typeof i=="function"?(s--,i):void 0,o&&aue(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var a=r[n];a&&e(t,a,n,i)}return t})}function sue(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),a=o.length;a--;){var c=o[e?a:++s];if(r(i[c],c,i)===!1)break}return t}}function Ph(e,t){var r=e.__data__;return cue(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Lv(e,t){var r=fce(e,t);return Wce(r)?r:void 0}function iue(e){var t=xn.call(e,ui),r=e[ui];try{e[ui]=void 0;var n=!0}catch{}var s=HM.call(e);return n&&(t?e[ui]=r:delete e[ui]),s}function oue(e){return typeof e.constructor=="function"&&!GM(e)?wce(jM(e)):{}}function WM(e,t){var r=typeof e;return t=t??kM,!!t&&(r=="number"||r!="symbol"&&ace.test(e))&&e>-1&&e%1==0&&e<t}function aue(e,t,r){if(!di(r))return!1;var n=typeof t;return(n=="number"?kv(r)&&WM(t,r.length):n=="string"&&t in r)?xh(r[t],e):!1}function cue(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function uue(e){return!!TM&&TM in e}function GM(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Ch;return e===r}function lue(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function due(e){return HM.call(e)}function fue(e,t,r){return t=NM(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=NM(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var a=Array(t+1);++s<t;)a[s]=n[s];return a[t]=r(o),uce(e,this,a)}}function xv(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var pue=hue(Yce);function hue(e){var t=0,r=0;return function(){var n=vce(),s=Nae-(n-r);if(r=n,s>0){if(++t>=Oae)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function mue(e){if(e!=null){try{return Ah.call(e)}catch{}try{return e+""}catch{}}return""}function xh(e,t){return e===t||e!==e&&t!==t}var Ov=DM(function(){return arguments}())?DM:function(e){return eu(e)&&xn.call(e,"callee")&&!yce.call(e,"callee")},Nv=Array.isArray;function kv(e){return e!=null&&XM(e.length)&&!Mv(e)}function gue(e){return eu(e)&&kv(e)}var KM=_ce||vue;function Mv(e){if(!di(e))return!1;var t=Ih(e);return t==qM||t==Fae||t==Lae||t==Hae}function XM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kM}function di(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function eu(e){return e!=null&&typeof e=="object"}function Eue(e){if(!eu(e)||Ih(e)!=FM)return!1;var t=jM(e);if(t===null)return!0;var r=xn.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Ah.call(r)==gce}var QM=AM?dce(AM):Gce;function yue(e){return rue(e,YM(e))}function YM(e){return kv(e)?jce(e,!0):Kce(e)}var Sue=nue(function(e,t,r){zM(e,t,r)});function _ue(e){return function(){return e}}function JM(e){return e}function vue(){return!1}qo.exports=Sue});var wq=S((Exe,vq)=>{"use strict";function Xv(e){return typeof e=="function"}var $t=console.error.bind(console);function au(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function cu(e){e&&e.logger&&(Xv(e.logger)?$t=e.logger:$t("new logger isn't a function, not replacing"))}function Sq(e,t,r){if(!e||!e[t]){$t("no original function "+t+" to wrap");return}if(!r){$t("no wrapper function"),$t(new Error().stack);return}if(!Xv(e[t])||!Xv(r)){$t("original object and wrapper must be functions");return}var n=e[t],s=r(n,t);return au(s,"__original",n),au(s,"__unwrap",function(){e[t]===s&&au(e,t,n)}),au(s,"__wrapped",!0),au(e,t,s),s}function Aue(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{$t("must provide one or more modules to patch"),$t(new Error().stack);return}if(!(t&&Array.isArray(t))){$t("must provide one or more functions to wrap on modules");return}e.forEach(function(n){t.forEach(function(s){Sq(n,s,r)})})}function _q(e,t){if(!e||!e[t]){$t("no function to unwrap."),$t(new Error().stack);return}if(!e[t].__unwrap)$t("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function Tue(e,t){if(e)Array.isArray(e)||(e=[e]);else{$t("must provide one or more modules to patch"),$t(new Error().stack);return}if(!(t&&Array.isArray(t))){$t("must provide one or more functions to unwrap on modules");return}e.forEach(function(r){t.forEach(function(n){_q(r,n)})})}cu.wrap=Sq;cu.massWrap=Aue;cu.unwrap=_q;cu.massUnwrap=Tue;vq.exports=cu});var Tq=S((yxe,Aq)=>{"use strict";var Rq=wq(),Wo=Rq.wrap,qh=Rq.unwrap,Dn="wrap@before";function Fh(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function Iue(e,t){for(var r=t.length,n=0;n<r;n++){var s=t[n],i=e[Dn];if(typeof i=="function")i(s);else if(Array.isArray(i))for(var o=i.length,a=0;a<o;a++)i[a](s)}}function Cq(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r}function Pue(e,t,r){var n=Cq(e,t),s=n.filter(function(i){return r.indexOf(i)===-1});s.length>0&&Iue(e,s)}function bq(e,t){if(e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}Aq.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function s(o){return function(c,u){var l=Cq(this,c).slice();try{var d=o.call(this,c,u);return Pue(this,c,l),d}finally{this.on.__wrapped||Wo(this,"on",s),this.addListener.__wrapped||Wo(this,"addListener",s)}}}function i(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=bq(u,n)}}}Wo(this,"removeListener",l);try{return this._events[c]=bq(u,n),o.apply(this,arguments)}finally{qh(this,"removeListener"),this._events[c]=u}}}t[Dn]?typeof t[Dn]=="function"?Fh(t,Dn,[t[Dn],r]):Array.isArray(t[Dn])&&t[Dn].push(r):Fh(t,Dn,r),t.__wrapped||(Wo(t,"addListener",s),Wo(t,"on",s),Wo(t,"emit",i),Fh(t,"__unwrap",function(){qh(t,"addListener"),qh(t,"on"),qh(t,"emit"),delete t[Dn],delete t.__wrapped}),Fh(t,"__wrapped",!0))}});var Oq=S((Sxe,xq)=>{"use strict";var he=require("util"),Ln=require("assert"),xue=Tq(),Oe=require("async_hooks"),uu="cls@contexts",lu="error@context",He=process.env.DEBUG_CLS_HOOKED,pe=-1;xq.exports={getNamespace:Iq,createNamespace:Oue,destroyNamespace:Pq,reset:Nue,ERROR_SYMBOL:lu};function gr(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}gr.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,He){let n=" ".repeat(this._indent<0?0:this._indent);qe(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};gr.prototype.get=function(t){if(!this.active){if(He){let r=Oe.currentId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(s+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+pe+" active:"+he.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),qe(`${s}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${he.inspect(this.active)}`)}return this.active[t]};gr.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=pe,He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-CREATED Context: (${this.name}) currentUid:${pe} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${he.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};gr.prototype.run=function(t){let r=this.createContext();this.enter(r);try{if(He){let n=Oe.triggerAsyncId(),s=Oe.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} context:${he.inspect(r)}`)}return t(r),r}catch(n){throw n&&(n[lu]=r),n}finally{if(He){let n=Oe.triggerAsyncId(),s=Oe.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-RUN END: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} ${he.inspect(r)}`)}this.exit(r)}};gr.prototype.runAndReturn=function(t){let r;return this.run(function(n){r=t(n)}),r};gr.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return He&&qe("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),n.then(s=>(He&&qe("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),s)).catch(s=>{throw s[lu]=r,He&&qe("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+pe+" len:"+this._set.length+" "+he.inspect(r)),this.exit(r),s})};gr.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(i){throw i&&(i[lu]=r),i}finally{n.exit(r)}}};gr.prototype.enter=function(t){if(Ln.ok(t,"context must be provided for entering"),He){let r=Oe.executionAsyncId(),n=Oe.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);qe(`${s}CONTEXT-ENTER: (${this.name}) currentUid:${pe} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${he.inspect(t)}`)}this._set.push(this.active),this.active=t};gr.prototype.exit=function(t){if(Ln.ok(t,"context must be provided for exiting"),He){let n=Oe.executionAsyncId(),s=Oe.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);qe(`${i}CONTEXT-EXIT: (${this.name}) currentUid:${pe} triggerId:${s} asyncHooksCurrentId:${n} len:${this._set.length} ${he.inspect(t)}`)}if(this.active===t){Ln.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(He&&qe("??ERROR?? context exiting but not entered - ignoring: "+he.inspect(t)),Ln.ok(r>=0,`context not currently entered; can't exit. 
`+he.inspect(this)+`
`+he.inspect(t))):(Ln.ok(r,"can't remove top context"),this._set.splice(r,1))};gr.prototype.bindEmitter=function(t){Ln.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function s(o){o&&(o[uu]||(o[uu]=Object.create(null)),o[uu][n]={namespace:r,context:r.active})}function i(o){if(!(o&&o[uu]))return o;let a=o,c=o[uu];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}xue(t,s,i)};gr.prototype.fromException=function(t){return t[lu]};function Iq(e){return process.namespaces[e]}function Oue(e){Ln.ok(e,"namespace must be given a name."),He&&qe(`NS-CREATING NAMESPACE (${e})`);let t=new gr(e);return t.id=pe,Oe.createHook({init(n,s,i,o){if(pe=Oe.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),He){let a=" ".repeat(t._indent<0?0:t._indent);qe(`${a}INIT [${s}] (${e}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(pe===0){let a=Oe.triggerAsyncId(),c=t._contexts.get(a);if(c){if(t._contexts.set(n,c),He){let u=" ".repeat(t._indent<0?0:t._indent);qe(`${u}INIT USING CONTEXT FROM TRIGGERID [${s}] (${e}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(He){let u=" ".repeat(t._indent<0?0:t._indent);qe(`${u}INIT MISSING CONTEXT [${s}] (${e}) asyncId:${n} currentUid:${pe} triggerId:${a} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(He&&s==="PROMISE"){qe(he.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(t._indent<0?0:t._indent);qe(`${c}INIT RESOURCE-PROMISE [${s}] (${e}) parentId:${a} asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){pe=Oe.executionAsyncId();let s;if(s=t._contexts.get(n)||t._contexts.get(pe),s){if(He){let i=Oe.triggerAsyncId(),o=" ".repeat(t._indent<0?0:t._indent);qe(`${o}BEFORE (${e}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`),t._indent+=2}t.enter(s)}else if(He){let i=Oe.triggerAsyncId(),o=" ".repeat(t._indent<0?0:t._indent);qe(`${o}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${he.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){pe=Oe.executionAsyncId();let s;if(s=t._contexts.get(n)||t._contexts.get(pe),s){if(He){let i=Oe.triggerAsyncId();t._indent-=2;let o=" ".repeat(t._indent<0?0:t._indent);qe(`${o}AFTER (${e}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`)}t.exit(s)}else if(He){let i=Oe.triggerAsyncId();t._indent-=2;let o=" ".repeat(t._indent<0?0:t._indent);qe(`${o}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${pe} triggerId:${i} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(s)}`)}},destroy(n){if(pe=Oe.executionAsyncId(),He){let s=Oe.triggerAsyncId(),i=" ".repeat(t._indent<0?0:t._indent);qe(`${i}DESTROY (${e}) currentUid:${pe} asyncId:${n} triggerId:${s} active:${he.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${he.inspect(t._contexts.get(pe))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t}function Pq(e){let t=Iq(e);Ln.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Ln.ok(t.id,"don't assign to process.namespaces directly! "+he.inspect(t)),process.namespaces[e]=null}function Nue(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Pq(e)}),process.namespaces=Object.create(null)}process.namespaces={};function qe(...e){He&&process._rawDebug(`${he.format(...e)}`)}});var Fe=S((_xe,Lq)=>{"use strict";var Qv=["debug","info","warn","error","silent"],Nq=Qv.indexOf("error"),Due=Lue(process.env.AWS_XRAY_DEBUG_MODE?"debug":process.env.AWS_XRAY_LOG_LEVEL),Dq={error:$h("error"),info:$h("info"),warn:$h("warn"),debug:$h("debug")};function $h(e){var t=Qv.indexOf(e),r=console[e]||console.log||(()=>{});return t>=Due?(n,s)=>{(n||s)&&r(que(e,n,s))}:()=>{}}function Lue(e){if(e){var t=e.toLowerCase(),r=Qv.indexOf(t);return r>=0?r:Nq}return Nq}function kue(e){var t=-e.getTimezoneOffset(),r=t>=0?"+":"-",n=function(s){var i=Math.floor(Math.abs(s));return(i<10?"0":"")+i};return new Date(e.getTime()+t*60*1e3).toISOString().replace(/T/," ").replace(/Z/," ")+r+n(t/60)+":"+n(t%60)}function Mue(){return process.env.LAMBDA_TASK_ROOT!==void 0}function que(e,t,r){var n=[];Mue()||(n.push(kue(new Date)),n.push(`[${e.toUpperCase()}]`)),t&&n.push(t);var s=n.join(" "),i=Fue(r);return[s,i].filter(o=>o.length>0).join(`
  `)}function Fue(e){return e?typeof e=="string"?e:JSON.stringify(e):""}var $ue={setLogger:function(t){Dq=t},getLogger:function(){return Dq}};Lq.exports=$ue});var Yv=S((vxe,Mq)=>{"use strict";var Bue=require("crypto");function kq(e,t){this.init(e,t)}kq.prototype.init=function(t,r){var n=typeof t=="string"||t instanceof String?{message:t,name:""}:t;if(this.message=n.message,this.type=n.name,this.stack=[],this.remote=!!r,this.id=Bue.randomBytes(8).toString("hex"),n.stack){var s=n.stack.split(`
`);s.shift(),s.forEach(i=>{var o=i.trim().replace(/\(|\)/g,"");o=o.substring(o.indexOf(" ")+1);var a=o.lastIndexOf(" ")>=0?o.slice(0,o.lastIndexOf(" ")):null,c=Array.isArray(a)&&!a.length?o:o.slice(o.lastIndexOf(" ")+1);c=c.split(":");var u={path:c[0],line:parseInt(c[1]),label:a||"anonymous"};this.stack.push(u)},this)}};Mq.exports=kq});var Fq=S((wxe,qq)=>{qq.exports=Uue;function Uue(e){var t=!1,r=null,n=null,s=null;return o;function i(a){s&&Vue(s,a),t=!1,s=n;var c=r;if(r=null,n=null,!c||!c.length){if(!s||!s.length){s=null;return}c||(c=[])}t=!0,e(c,i)}function o(a,c){t?(r||(r=[],n=[]),Hue(r,a),c&&n.push(c)):(c&&(s=[c]),t=!0,e(Array.isArray(a)?a:[a],i))}}function Hue(e,t){Array.isArray(t)?jue(e,t):e.push(t)}function jue(e,t){for(var r=0;r<t.length;r++)e.push(t[r])}function Vue(e,t){for(var r=0;r<e.length;r++)e[r](t)}});var Bh=S((bxe,Uq)=>{"use strict";var $q=Fe(),Fr={udp_ip:"127.0.0.1",udp_port:2e3,tcp_ip:"127.0.0.1",tcp_port:2e3,setDaemonAddress:function(t){process.env.AWS_XRAY_DAEMON_ADDRESS?$q.getLogger().warn("Ignoring call to setDaemonAddress as AWS_XRAY_DAEMON_ADDRESS is set. The current daemon address will not be changed."):(Bq(t),$q.getLogger().info("Configured daemon address to "+t+"."))}},Bq=function(t){if(t.indexOf(":")===-1)throw new Error("Invalid Daemon Address. You must specify an ip and port.");var r=t.split(" ");if(r.length===1){if(t.indexOf("udp")>-1||t.indexOf("tcp")>-1)throw new Error("Invalid Daemon Address. You must specify both tcp and udp addresses.");var n=t.split(":");if(!n[0])throw new Error("Invalid Daemon Address. You must specify an ip.");Fr.udp_ip=n[0],Fr.tcp_ip=n[0],Fr.udp_port=n[1],Fr.tcp_port=n[1]}else if(r.length===2){var s=r[0].split(":"),i=r[1].split(":"),o={};if(o[s[0]]=s,o[i[0]]=i,Fr.udp_ip=o.udp[1],Fr.udp_port=parseInt(o.udp[2]),Fr.tcp_ip=o.tcp[1],Fr.tcp_port=parseInt(o.tcp[2]),!Fr.udp_port||!Fr.tcp_port)throw new Error("Invalid Daemon Address. You must specify port number.")}};process.env.AWS_XRAY_DAEMON_ADDRESS&&Bq(process.env.AWS_XRAY_DAEMON_ADDRESS);Uq.exports=Fr});var Hh=S((Rxe,Gq)=>{"use strict";var Vq=require("dgram"),zue=Fq(),Uh=Fe(),Hq='{"format":"json","version":1}',jq=`
`;function Wue(e,t){var r=Vq.createSocket("udp4");zq(r,e,0,function(){try{r.close()}finally{t()}})}function zq(e,t,r,n){if(r>=t.length){n();return}Gue(e,t[r],function(){zq(e,t,r+1,n)})}function Gue(e,t,r){var n=t.msg,s=t.offset,i=t.length,o=t.port,a=t.address,c=t.callback;e.send(n,s,i,o,a,function(u){try{c(u)}finally{r()}})}function Wq(){this.batchSend=zue(Wue)}Wq.prototype.send=function(e,t,r,n,s,i){var o={msg:e,offset:t,length:r,port:n,address:s,callback:i};this.batchSend(o)};var Kue={daemonConfig:Bh(),format:function(t){return Hq+jq+t.toString()},send:function(t){this.socket||(this.useBatchingTemporarySocket?this.socket=new Wq:this.socket=Vq.createSocket("udp4").unref());var r=this.socket,n=t.format(),s=Hq+jq+n,i=Buffer.from(s),o='{"trace_id:"'+t.trace_id+'","id":"'+t.id+'"}',a=t.type==="subsegment"?"Subsegment":"Segment";r.send(i,0,i.length,this.daemonConfig.udp_port,this.daemonConfig.udp_ip,function(c){c?c.code==="EMSGSIZE"?Uh.getLogger().error(a+" too large to send: "+o+" ("+i.length+" bytes)."):Uh.getLogger().error("Error occured sending segment: ",c):(Uh.getLogger().debug(a+' sent: {"trace_id:"'+t.trace_id+'","id":"'+t.id+'"}'),Uh.getLogger().debug("UDP message sent: "+t))})},setDaemonAddress:function(t){this.daemonConfig.setDaemonAddress(t)},getIp:function(){return this.daemonConfig.udp_ip},getPort:function(){return this.daemonConfig.udp_port},disableReusableSocket:function(){this.useBatchingTemporarySocket=!0}};Gq.exports=Kue});var Vh=S((Cxe,Kq)=>{"use strict";var Xue=require("crypto"),jh=Fe(),Jv=class e{constructor(t,r){this.version=1,this.timestamp=t||Math.round(new Date().getTime()/1e3).toString(16),this.id=r||Xue.randomBytes(12).toString("hex")}static Invalid(){return new e("00000000","000000000000000000000000")}static FromString(t){let r="-";var n=new e,s,i;if(!t||typeof t!="string")return jh.getLogger().error("Empty or non-string trace ID provided"),n;let o=t.trim().split(r);return o.length!==3?(jh.getLogger().error("Unrecognized trace ID format"),n):(s=parseInt(o[0]),isNaN(s)||s<1?(jh.getLogger().error("Trace ID version must be positive integer"),n):(i=parseInt(o[1],16).toString(16),i==="NaN"?(jh.getLogger().error("Trace ID timestamp must be a hex-encoded value"),n):(i=i.padStart(8,"0"),n.version=s,n.timestamp=i,n.id=o[2],n)))}toString(){return`${this.version.toString()}-${this.timestamp}-${this.id}`}};Kq.exports=Jv});var Ct=S((Axe,Xq)=>{"use strict";var Que=require("crypto"),du=Fe(),Yue=Vh(),Zv={getCauseTypeFromHttpStatus:function(t){var r=t.toString();if(r.match(/^[4][0-9]{2}$/)!==null)return"error";if(r.match(/^[5][0-9]{2}$/)!==null)return"fault"},stripQueryStringFromPath:function(t){return t?t.split("?")[0]:""},wildcardMatch:function(t,r){if(t===void 0||r===void 0)return!1;if(t.length===1&&t.charAt(0)==="*")return!0;var n=t.length,s=r.length,i=t.indexOf("*");if(t=t.toLowerCase(),r=r.toLowerCase(),i===-1||i===n-1){var o=function(){for(var m=0,g=0;g<n;g++){var y=t.charAt(g);if(y==="*")return!0;if(y==="?"){if(m===s)return!1;m++}else{if(m>=s||y!=r.charAt(m))return!1;m++}}return m===s};return o()}var a=[];a[0]=!0;for(var c=0;c<n;c++){var u,l=t.charAt(c);if(l!="*")for(u=s-1;u>=0;u--)a[u+1]=!!a[u]&&(l==="?"||l===r.charAt(u));else{for(u=0;u<=s&&!a[u];)u++;for(u;u<=s;u++)a[u]=!0}a[0]=a[0]&&l==="*"}return a[s]},LambdaUtils:{validTraceData:function(e){var t=!1;if(e){var r=Zv.processTraceData(e);t=!!(r&&r.root&&r.parent&&r.sampled)}return t},populateTraceData:function(e,t){du.getLogger().debug("Lambda trace data found: "+t);let r=Zv.processTraceData(t);var n=!1;return r?r.root&&!r.parent&&!r.sampled?(e.noOp=!0,n=!0):!r.root||!r.parent||!r.sampled?du.getLogger().error("_X_AMZN_TRACE_ID is missing required information"):n=!0:(r={},du.getLogger().error("_X_AMZN_TRACE_ID is empty or has an invalid format")),e.trace_id=Yue.FromString(r.root).toString(),e.id=r.parent||Que.randomBytes(8).toString("hex"),r.root&&e.trace_id!==r.root&&(du.getLogger().error("_X_AMZN_TRACE_ID contains invalid trace ID"),n=!1),parseInt(r.sampled)?delete e.notTraced:e.notTraced=!0,r.data&&(e.additionalTraceData=r.data),du.getLogger().debug("Segment started: "+JSON.stringify(r)),n}},processTraceData:function(t){var r={},n={},s=["root","parent","sampled","self"],i=256;return typeof t=="string"&&t&&(t.split(";").forEach(function(o){if(o){var a=o.split("=");if(a[0]&&a[1]){let c=a[0].trim(),u=a[1].trim(),l=c.toLowerCase(),d=s.indexOf(l)!==-1;d?r[l]=u:!d&&i-(l.length+u.length)>=0&&(n[c]=u,i-=c.length+u.length)}}}),r.data=n),r},objectWithoutProperties:function(t,r,n){r=Array.isArray(r)?r:[],n=typeof n=="boolean"?n:!1;var s=n?Object.create(Object.getPrototypeOf(t)):{};for(var i in t)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i]);return s},safeParseInt:e=>!e||isNaN(e)?0:parseInt(e)};Xq.exports=Zv});var Cs=S((Txe,Jq)=>{"use strict";var{safeParseInt:Qq}=Ct(),Yq=Fe(),Jue=100,ew={streamingThreshold:Jue,getCurrentTime:function(){return Date.now()/1e3},setOrigin:function(t){this.origin=t},setPluginData:function(t){this.pluginData=t},setSDKData:function(t){this.sdkData=t},setServiceData:function(t){this.serviceData=t},setStreamingThreshold:function(t){isFinite(t)&&t>=0?(ew.streamingThreshold=t,Yq.getLogger().debug("Subsegment streaming threshold set to: "+t)):Yq.getLogger().error("Invalid threshold: "+t+". Must be a whole number >= 0.")},getStreamingThreshold:function(){return ew.streamingThreshold},getHttpResponseData:e=>{let t={};if(!e)return t;let r=Qq(e.statusCode);return r!==0&&(t.status=r),e.headers&&e.headers["content-length"]&&(t.content_length=Qq(e.headers["content-length"])),t},getJsonStringifyReplacer:()=>(e,t)=>typeof t=="bigint"?t.toString():t};Jq.exports=ew});var tF=S((Ixe,eF)=>{"use strict";var{getHttpResponseData:Zue}=Cs(),{stripQueryStringFromPath:ele}=Ct();function Zq(e,t,r){this.init(e,t,r)}Zq.prototype.init=function(t,r,n){this.request={url:t.agent&&t.agent.protocol?t.agent.protocol+"//"+(t.host||t.getHeader("host"))+ele(t.path):"",method:t.method||""},n&&(this.request.traced=!0),r&&(this.response=Zue(r))};eF.exports=Zq});var fu=S((Pxe,rF)=>{"use strict";var tle=require("crypto"),rle=Yv(),nle=tF(),sle=Hh(),zh=Cs(),ile=Ct(),kn=Fe();function me(e){this.init(e)}me.prototype.init=function(t){if(typeof t!="string")throw new Error("Subsegment name must be of type string.");this.id=tle.randomBytes(8).toString("hex"),this.name=t,this.start_time=zh.getCurrentTime(),this.in_progress=!0,this.counter=0,this.notTraced=!1};me.prototype.addNewSubsegment=function(t){let r=new me(t);return this.addSubsegment(r),r};me.prototype.addSubsegmentWithoutSampling=function(t){this.addSubsegment(t),t.notTraced=!0};me.prototype.addNewSubsegmentWithoutSampling=function(t){let r=new me(t);return this.addSubsegment(r),r.notTraced=!0,r};me.prototype.addSubsegment=function(e){if(!(e instanceof me))throw new Error("Failed to add subsegment:"+e+' to subsegment "'+this.name+'".  Not a subsegment.');this.subsegments===void 0&&(this.subsegments=[]),e.segment=this.segment,e.parent=this,e.notTraced=e.parent.notTraced,e.noOp=e.parent.noOp,e.end_time===void 0&&this.incrementCounter(e.counter),this.subsegments.push(e)};me.prototype.removeSubsegment=function(t){if(!(t instanceof me))throw new Error("Failed to remove subsegment:"+t+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(t);r>=0&&this.subsegments.splice(r,1)}};me.prototype.addAttribute=function(t,r){this[t]=r};me.prototype.addPrecursorId=function(e){typeof e!="string"&&kn.getLogger().error("Failed to add id:"+e+" to subsegment "+this.name+".  Precursor Ids must be of type string."),this.precursor_ids===void 0&&(this.precursor_ids=[]),this.precursor_ids.push(e)};me.prototype.addAnnotation=function(e,t){if(typeof t!="boolean"&&typeof t!="string"&&!isFinite(t)){kn.getLogger().error("Failed to add annotation key: "+e+" value: "+t+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof e!="string"){kn.getLogger().error("Failed to add annotation key: "+e+" value: "+t+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[e]=t};me.prototype.addMetadata=function(e,t,r){if(typeof e!="string"){kn.getLogger().error("Failed to add metadata key: "+e+" value: "+t+" to subsegment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){kn.getLogger().error("Failed to add metadata key: "+e+" value: "+t+" to subsegment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][e]=t??"")};me.prototype.addSqlData=function(t){this.sql=t};me.prototype.addError=function(t,r){if(t==null||typeof t!="object"&&typeof t!="string"){kn.getLogger().error("Failed to add error:"+t+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.segment&&this.segment.exception){if(t===this.segment.exception.ex){this.fault=!0,this.cause={id:this.segment.exception.cause,exceptions:[]};return}delete this.segment.exception}this.segment&&(this.segment.exception={ex:t,cause:this.id}),this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.unshift(new rle(t,r))};me.prototype.addRemoteRequestData=function(t,r,n){this.http=new nle(t,r,n),"traced"in this.http.request&&(this.traced=this.http.request.traced,delete this.http.request.traced)};me.prototype.addFaultFlag=function(){this.fault=!0};me.prototype.addErrorFlag=function(){this.error=!0};me.prototype.addThrottleFlag=function(){this.throttle=!0};me.prototype.close=function(t,r){var n=this.segment;this.end_time=zh.getCurrentTime(),delete this.in_progress,t&&this.addError(t,r),this.parent&&this.parent.decrementCounter(),n&&n.counter>zh.getStreamingThreshold()&&this.streamSubsegments()&&this.parent&&this.parent.removeSubsegment(this)};me.prototype.incrementCounter=function(t){this.counter=t?this.counter+t+1:this.counter+1,this.parent&&this.parent.incrementCounter(t)};me.prototype.decrementCounter=function(){this.counter--,this.parent&&this.parent.decrementCounter()};me.prototype.isClosed=function(){return!this.in_progress};me.prototype.flush=function(){if(!this.parent||!this.segment){kn.getLogger().error("Failed to flush subsegment: "+this.name+". Subsegment must be added to a segment chain to flush.");return}this.segment.trace_id?this.segment.notTraced!==!0&&!this.notTraced?sle.send(this):kn.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is marked as not sampled."):kn.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is missing a trace ID.")};me.prototype.streamSubsegments=function(){if(this.isClosed()&&this.counter<=0)return this.flush(),!0;if(this.subsegments&&this.subsegments.length>0){var t=[];this.subsegments.forEach(function(r){r.streamSubsegments()||t.push(r)}),this.subsegments=t}};me.prototype.format=function(){return this.type="subsegment",this.parent&&(this.parent_id=this.parent.id),this.segment&&(this.trace_id=this.segment.trace_id),this.serialize()};me.prototype.toString=function(){return this.serialize()};me.prototype.toJSON=function(){var t=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&t.push("subsegments");var r=ile.objectWithoutProperties(this,t,!1);return r};me.prototype.serialize=function(t){return JSON.stringify(t??this,zh.getJsonStringifyReplacer())};rF.exports=me});var pu=S((xxe,iF)=>{"use strict";var ole=require("crypto"),ale=Yv(),cle=Hh(),Er=Cs(),Wh=fu(),nF=Vh(),sF=Ct(),As=Fe();function Ie(e,t,r){this.init(e,t,r)}Ie.prototype.init=function(t,r,n){if(typeof t!="string")throw new Error("Segment name must be of type string.");var s;r&&typeof r=="string"?s=nF.FromString(r):s=new nF;var i=ole.randomBytes(8).toString("hex"),o=Er.getCurrentTime();this.trace_id=s.toString(),this.id=i,this.start_time=o,this.name=t||"",this.in_progress=!0,this.counter=0,n&&(this.parent_id=n),Er.serviceData&&this.setServiceData(Er.serviceData),Er.pluginData&&this.addPluginData(Er.pluginData),Er.origin&&(this.origin=Er.origin),Er.sdkData&&this.setSDKData(Er.sdkData)};Ie.prototype.addIncomingRequestData=function(t){this.http=t};Ie.prototype.addAnnotation=function(t,r){if(typeof r!="boolean"&&typeof r!="string"&&!isFinite(r)){As.getLogger().error("Failed to add annotation key: "+t+" value: "+r+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof t!="string"){As.getLogger().error("Failed to add annotation key: "+t+" value: "+r+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[t]=r};Ie.prototype.setUser=function(e){typeof e!="string"&&As.getLogger().error("Set user: "+e+" failed. User IDs must be of type string."),this.user=e};Ie.prototype.addMetadata=function(e,t,r){if(typeof e!="string"){As.getLogger().error("Failed to add metadata key: "+e+" value: "+t+" to segment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){As.getLogger().error("Failed to add metadata key: "+e+" value: "+t+" to segment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][e]=t??"")};Ie.prototype.setSDKData=function(t){if(!t){As.getLogger().error("Add SDK data: "+t+" failed.Must not be empty.");return}this.aws||(this.aws={}),this.aws.xray=t};Ie.prototype.setMatchedSamplingRule=function(t){this.aws&&(this.aws=JSON.parse(JSON.stringify(this.aws))),this.aws&&this.aws.xray?this.aws.xray.rule_name=t:this.aws={xray:{rule_name:t}}};Ie.prototype.setServiceData=function(t){if(!t){As.getLogger().error("Add service data: "+t+" failed.Must not be empty.");return}this.service=t};Ie.prototype.addPluginData=function(t){this.aws===void 0&&(this.aws={}),Object.assign(this.aws,t)};Ie.prototype.addNewSubsegment=function(t){var r=new Wh(t);return this.addSubsegment(r),r};Ie.prototype.addSubsegmentWithoutSampling=function(t){this.addSubsegment(t),t.notTraced=!0};Ie.prototype.addNewSubsegmentWithoutSampling=function(t){let r=new Wh(t);return this.addSubsegment(r),r.notTraced=!0,r};Ie.prototype.addSubsegment=function(t){if(!(t instanceof Wh))throw new Error("Cannot add subsegment: "+t+". Not a subsegment.");this.subsegments===void 0&&(this.subsegments=[]),t.segment=this,t.parent=this,t.notTraced=t.parent.notTraced,t.noOp=t.parent.noOp,this.subsegments.push(t),t.end_time||this.incrementCounter(t.counter)};Ie.prototype.removeSubsegment=function(t){if(!(t instanceof Wh))throw new Error("Failed to remove subsegment:"+t+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(t);r>=0&&this.subsegments.splice(r,1)}};Ie.prototype.addError=function(t,r){if(t==null||typeof t!="object"&&typeof t!="string"){As.getLogger().error("Failed to add error:"+t+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.exception){if(t===this.exception.ex){this.cause={id:this.exception.cause},delete this.exception;return}delete this.exception}this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.push(new ale(t,r))};Ie.prototype.addFaultFlag=function(){this.fault=!0};Ie.prototype.addErrorFlag=function(){this.error=!0};Ie.prototype.addThrottleFlag=function(){this.throttle=!0};Ie.prototype.isClosed=function(){return!this.in_progress};Ie.prototype.incrementCounter=function(t){if(this.counter=t?this.counter+t+1:this.counter+1,this.counter>Er.streamingThreshold&&this.subsegments&&this.subsegments.length>0){var r=[];this.subsegments.forEach(function(n){n.streamSubsegments()||r.push(n)}),this.subsegments=r}};Ie.prototype.decrementCounter=function(){this.counter--,this.counter<=0&&this.isClosed()&&this.flush()};Ie.prototype.close=function(e,t){this.end_time||(this.end_time=Er.getCurrentTime()),e!==void 0&&this.addError(e,t),delete this.in_progress,delete this.exception,this.counter<=0&&this.flush()};Ie.prototype.flush=function(){if(this.notTraced!==!0){delete this.exception;var t=sF.objectWithoutProperties(this,["counter","notTraced"],!0);cle.send(t)}};Ie.prototype.format=function(){var t=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&t.push("subsegments");var r=sF.objectWithoutProperties(this,t,!1);return this.serialize(r)};Ie.prototype.toString=function(){return this.serialize()};Ie.prototype.serialize=function(t){return JSON.stringify(t??this,Er.getJsonStringifyReplacer())};iF.exports=Ie});var Is=S((Oxe,uF)=>{"use strict";var hu=Oq(),$r=Fe(),tw=pu(),oF=fu(),Mn=!0,Ts="AWSXRay",aF="segment",cF=!1,At={CONTEXT_MISSING_STRATEGY:{RUNTIME_ERROR:{contextMissing:function(t){throw new Error(t)}},LOG_ERROR:{contextMissing:function(t){var r=new Error(t);$r.getLogger().error(r.stack)}},IGNORE_ERROR:{contextMissing:function(){}}},contextMissingStrategy:{},resolveManualSegmentParams:function(t){if(t&&!At.isAutomaticMode()){var r=t.XRaySegment||t.XraySegment,n=t.Segment,s=null;return r&&(r instanceof tw||r instanceof oF)?(s=r,delete t.XRaySegment,delete t.XraySegment):n&&(n instanceof tw||n instanceof oF)&&(s=n,delete t.Segment),s}},getNamespace:function(){return hu.getNamespace(Ts)||hu.createNamespace(Ts)},resolveSegment:function(t){if(Mn)return this.getSegment();if(t&&!Mn)return t;!t&&!Mn&&At.contextMissingStrategy.contextMissing("No sub/segment specified. A sub/segment must be provided for manual mode.")},getSegment:function(){if(Mn){var t=At.getNamespace(Ts).get(aF);return t?t instanceof tw&&process.env.LAMBDA_TASK_ROOT&&t.facade==!0&&t.resolveLambdaTraceData():At.contextMissingStrategy.contextMissing("Failed to get the current sub/segment from the context."),t}else At.contextMissingStrategy.contextMissing("Cannot get sub/segment from context. Not supported in manual mode.")},setSegment:function(t){Mn?At.getNamespace(Ts).set(aF,t)||$r.getLogger().warn("Failed to set the current sub/segment on the context."):At.contextMissingStrategy.contextMissing("Cannot set sub/segment on context. Not supported in manual mode.")},isAutomaticMode:function(){return Mn},enableAutomaticMode:function(){Mn=!0,At.getNamespace(Ts),$r.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to automatic mode.")},enableManualMode:function(){Mn=!1,hu.getNamespace(Ts)&&hu.destroyNamespace(Ts),$r.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to manual mode.")},setContextMissingStrategy:function(t){if(cF)$r.getLogger().warn("Ignoring call to setContextMissingStrategy as AWS_XRAY_CONTEXT_MISSING is set. The current context missing strategy will not be changed.");else if(typeof t=="string"){var r=At.CONTEXT_MISSING_STRATEGY[t.toUpperCase()];if(r)At.contextMissingStrategy.contextMissing=r.contextMissing,process.env.AWS_XRAY_CONTEXT_MISSING?$r.getLogger().debug("AWS_XRAY_CONTEXT_MISSING is set. Configured context missing strategy to "+process.env.AWS_XRAY_CONTEXT_MISSING+"."):$r.getLogger().debug("Configured context missing strategy to: "+t);else throw new Error("Invalid context missing strategy: "+t+". Valid values are "+Object.keys(At.CONTEXT_MISSING_STRATEGY)+".")}else if(typeof t=="function")At.contextMissingStrategy.contextMissing=t,$r.getLogger().info("Configured custom context missing strategy to function: "+t.name);else throw new Error("Context missing strategy must be either a string or a custom function.")}};process.env.AWS_XRAY_MANUAL_MODE?(Mn=!1,$r.getLogger().debug("Starting the AWS X-Ray SDK in manual mode.")):(hu.createNamespace(Ts),$r.getLogger().debug("Starting the AWS X-Ray SDK in automatic mode (default)."));process.env.AWS_XRAY_CONTEXT_MISSING?(At.setContextMissingStrategy(process.env.AWS_XRAY_CONTEXT_MISSING),cF=!0):(At.contextMissingStrategy.contextMissing=At.CONTEXT_MISSING_STRATEGY.LOG_ERROR.contextMissing,$r.getLogger().debug("Using default context missing strategy: LOG_ERROR"));uF.exports=At});var nw=S((Nxe,lF)=>{"use strict";var{getHttpResponseData:ule}=Cs();function rw(e){this.init(e)}rw.prototype.init=function(t){var r=!!t.headers["x-forwarded-for"],n;t.connection&&(n=(t.connection.secure||t.connection.encrypted?"https://":"http://")+((t.headers.host||"")+(t.url||""))),this.request={method:t.method||"",user_agent:t.headers["user-agent"]||"",client_ip:lle(t)||"",url:n||""},r&&(this.request.x_forwarded_for=r)};var lle=function(t){var r;return t.headers["x-forwarded-for"]?r=(t.headers["x-forwarded-for"]||"").split(",")[0]:t.connection&&t.connection.remoteAddress?r=t.connection.remoteAddress:t.socket&&t.socket.remoteAddress?r=t.socket.remoteAddress:t.connection&&t.connection.socket&&t.connection.socket.remoteAddress&&(r=t.connection.socket.remoteAddress),r};rw.prototype.close=function(t){this.response=ule(t)};lF.exports=rw});var fF=S((Dxe,dF)=>{"use strict";function sw(e,t){this.init(e,t)}sw.prototype.init=function(t,r){if(this.usedThisSecond=0,typeof t=="number"&&t%1===0&&t>=0)this.fixedTarget=t;else throw new Error('Error in sampling file. Rule attribute "fixed_target" must be a non-negative integer.');if(typeof r=="number"&&r>=0&&r<=1)this.fallbackRate=r;else throw new Error('Error in sampling file. Rule attribute "rate" must be a number between 0 and 1 inclusive.')};sw.prototype.isSampled=function(){var t=Math.round(new Date().getTime()/1e3);return t!==this.thisSecond&&(this.usedThisSecond=0,this.thisSecond=t),this.usedThisSecond>=this.fixedTarget?Math.random()<this.fallbackRate:(this.usedThisSecond++,!0)};dF.exports=sw});var pF=S((Lxe,dle)=>{dle.exports={default:{fixed_target:1,rate:.05},version:2}});var ow=S((kxe,yF)=>{"use strict";var fle=require("fs"),hF=fF(),iw=Ct(),ple=pF(),Gh=Fe(),gF={shouldSample:function(t){var r=t.host,n=t.httpMethod,s=t.urlPath,i="{ http_method: "+n+", host: "+r+", url_path: "+s+" }",o;return this.rules.some(function(a){if(a.default||r==null||iw.wildcardMatch(a.host,r)&&(n==null||iw.wildcardMatch(a.http_method,n))&&(s==null||iw.wildcardMatch(a.url_path,s)))return o=a.reservoir,Gh.getLogger().debug("Local sampling rule match found for "+i+". Matched "+(a.default?"default":"{ http_method: "+a.http_method+", host: "+a.host+", url_path: "+a.url_path+" }")+". Using fixed_target: "+o.fixedTarget+" and rate: "+o.fallbackRate+"."),!0}),o?o.isSampled():(Gh.getLogger().debug("No sampling rule matched for "+i),!1)},setLocalRules:function(t){t?typeof t=="string"?(Gh.getLogger().info("Using custom sampling rules file: "+t),this.rules=mF(JSON.parse(fle.readFileSync(t,"utf8")))):(Gh.getLogger().info("Using custom sampling rules source."),this.rules=mF(t)):this.rules=EF(ple)}},mF=function(t){if(!t.version)throw new Error('Error in sampling file. Missing "version" attribute.');if(t.version===1||t.version===2)return EF(t);throw new Error('Error in sampling file. Unknown version "'+t.version+'".')},EF=function(t){var r,n=[];if(t.default){var s=[];for(var i in t.default){if(i!=="fixed_target"&&i!=="rate")throw new Error("Error in sampling file. Invalid attribute for default: "+i+'. Valid attributes for default are "fixed_target" and "rate".');if(typeof t.default[i]!="number")throw new Error("Error in sampling file. Default "+i+" must be a number.")}if(typeof t.default.fixed_target>"u"&&s.push("fixed_target"),typeof t.default.rate>"u"&&s.push("rate"),s.length!==0)throw new Error("Error in sampling file. Missing required attributes for default: "+s+".");r={default:!0,reservoir:new hF(t.default.fixed_target,t.default.rate)}}else throw new Error('Error in sampling file. Expecting "default" object to be defined with attributes "fixed_target" and "rate".');return Array.isArray(t.rules)&&t.rules.forEach(function(o){var a={},c;t.version===2&&(c={host:1,http_method:1,url_path:1,fixed_target:1,rate:1}),t.version===1&&(c={service_name:1,http_method:1,url_path:1,fixed_target:1,rate:1});for(var u in o){var l=o[u];if(!c[u]&&u!="description")throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" has invalid attribute: "+u+".");if(u!="description"&&!l&&l!==0)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+' attribute "'+u+'" has invalid value: '+l+".");t.version===2&&(a[u]=l),t.version===1&&u==="service_name"?a.host=l:a[u]=l,delete c[u]}if(Object.keys(c).length!==0&&c.constructor===Object)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" is missing required attributes: "+Object.keys(c)+".");var d=a;d.reservoir=new hF(o.fixed_target,o.rate),n.push(d)}),n.push(r),n};gF.setLocalRules();yF.exports=gF});var _F=S((Mxe,SF)=>{"use strict";function Go(){this.init()}Go.prototype.init=function(){this.quota=null,this.TTL=null,this.takenThisSec=0,this.borrowedThisSec=0,this.reportInterval=1,this.reportElapsed=0};Go.prototype.borrowOrTake=function(t,r){if(this.adjustThisSec(t),this.quota>=0&&this.TTL>=t)return this.takenThisSec>=this.quota?!1:(this.takenThisSec++,"take");if(r)return this.borrowedThisSec>=1?!1:(this.borrowedThisSec++,"borrow")};Go.prototype.adjustThisSec=function(t){t!==this.thisSec&&(this.takenThisSec=0,this.borrowedThisSec=0,this.thisSec=t)};Go.prototype.loadNewQuota=function(t,r,n){t&&(this.quota=t),r&&(this.TTL=r),n&&(this.reportInterval=n/10)};Go.prototype.timeToReport=function(){return this.reportElapsed+1>=this.reportInterval?(this.reportElapsed=0,!0):(this.reportElapsed+=1,!1)};SF.exports=Go});var wF=S((qxe,vF)=>{"use strict";var mu=Ct(),hle=_F();function ut(e,t,r,n,s,i,o,a,c){this.init(e,t,r,n,s,i,o,a,c)}ut.prototype.init=function(t,r,n,s,i,o,a,c,u){this.name=t,this.priority=r,this.rate=n,this.host=i,this.httpMethod=o,this.urlPath=a,this.serviceName=c,this.serviceType=u,this.reservoir=new hle,this.borrow=!!s,this.resetStatistics()};ut.prototype.match=function(t){var r=t.host,n=t.httpMethod,s=t.serviceName,i=t.urlPath,o=t.serviceType;return this.isDefault()||(!r||mu.wildcardMatch(this.host,r))&&(!n||mu.wildcardMatch(this.httpMethod,n))&&(!s||mu.wildcardMatch(this.serviceName,s))&&(!i||mu.wildcardMatch(this.urlPath,i))&&(!o||mu.wildcardMatch(this.serviceType,o))};ut.prototype.snapshotStatistics=function(){var t={requestCount:this.requestCount,borrowCount:this.borrowCount,sampledCount:this.sampledCount};return this.resetStatistics(),t};ut.prototype.merge=function(t){this.reservoir=t.reservoir,this.requestCount=t.requestCount,this.borrowCount=t.borrowCount,this.sampledCount=t.sampledCount,t=null};ut.prototype.isDefault=function(){return this.name==="Default"};ut.prototype.incrementRequestCount=function(){this.requestCount++};ut.prototype.incrementBorrowCount=function(){this.borrowCount++};ut.prototype.incrementSampledCount=function(){this.sampledCount++};ut.prototype.setRate=function(t){this.rate=t};ut.prototype.getRate=function(){return this.rate};ut.prototype.getName=function(){return this.name};ut.prototype.getPriority=function(){return this.priority};ut.prototype.getReservoir=function(){return this.reservoir};ut.prototype.resetStatistics=function(){this.requestCount=0,this.borrowCount=0,this.sampledCount=0};ut.prototype.canBorrow=function(){return this.borrow};ut.prototype.everMatched=function(){return this.requestCount>0};ut.prototype.timeToReport=function(){return this.reservoir.timeToReport()};vF.exports=ut});var aw=S((Fxe,AF)=>{"use strict";var mle=require("crypto"),gle=Fe(),Ele=wF(),Kh=Bh(),yle=require("util"),Sle=require("http"),RF={clientId:mle.randomBytes(12).toString("hex"),samplingRulesPath:"/GetSamplingRules",samplingTargetsPath:"/SamplingTargets",logger:gle,httpClient:Sle,fetchSamplingRules:function(t){let r="{}",n=bF(this.samplingRulesPath,r.length),i=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(n,o=>{var a="";o.on("data",c=>{a+=c}),o.on("error",c=>{t(c)}),o.on("end",()=>{var c;try{c=JSON.parse(a)}catch(l){t(l);return}if(!c){t(new Error("AWS X-Ray GetSamplingRules API returned empty response"));return}var u=vle(c);t(null,u)})});i.on("error",()=>{t(new Error(`Failed to connect to X-Ray daemon at ${n.hostname}:${n.port} to get sampling rules.`))}),i.write(r),i.end()},fetchTargets:function(t,r){let n=JSON.stringify(_le(t)),s=bF(this.samplingTargetsPath,n.length),o=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(s,a=>{var c="";a.on("data",u=>{c+=u}),a.on("error",u=>{r(u)}),a.on("end",()=>{var u;try{u=JSON.parse(c)}catch(m){r(m);return}if(!u||typeof u.LastRuleModification!="number"){r(new Error("AWS X-Ray SamplingTargets API returned invalid response"));return}var l=wle(u),d=CF(u.LastRuleModification);r(null,l,d)})});o.on("error",()=>{r(new Error(`Failed to connect to X-Ray daemon at ${s.hostname}:${s.port} to get sampling targets.`))}),o.write(n),o.end()}},_le=function(t){var r=[],n=Math.floor(new Date().getTime()/1e3);return t.forEach(function(s){var i=s.snapshotStatistics(),o={RuleName:s.getName(),ClientID:RF.clientId,RequestCount:i.requestCount,BorrowCount:i.borrowCount,SampledCount:i.sampledCount,Timestamp:n};r.push(o)}),{SamplingStatisticsDocuments:r}},vle=function(t){var r=[],n=t.SamplingRuleRecords||[];return n.forEach(function(s){if(s=s.SamplingRule,ble(s)){var i=new Ele(s.RuleName,s.Priority,s.FixedRate,s.ReservoirSize,s.Host,s.HTTPMethod,s.URLPath,s.ServiceName,s.ServiceType);r.push(i)}}),r},wle=function(t){var r=t.SamplingTargetDocuments||[],n={};return r.forEach(function(s){var i={rate:s.FixedRate,quota:s.ReservoirQuota,TTL:CF(s.ReservoirQuotaTTL),interval:s.Interval};n[s.RuleName]=i}),n},ble=function(t){return t.Version===1&&t.ResourceARN==="*"&&t.Attributes&&Object.keys(t.Attributes).length===0&&t.ServiceType&&t.RuleName&&t.Priority&&typeof t.FixedRate=="number"},CF=function(t){return new Date(t).getTime()/1e3},bF=function(t,r){return{hostname:Kh.tcp_ip,port:Kh.tcp_port,method:"POST",path:t,headers:{"Content-Type":"application/json","Content-Length":r,Host:yle.format("%s:%d",Kh.tcp_ip,Kh.tcp_port)}}};AF.exports=RF});var Xh=S(($xe,TF)=>{"use strict";var Rle=3600,cw={rules:[],lastUpdated:null,getMatchedRule:function(t,r){if(Cle(r))return null;var n;return this.rules.forEach(function(s){!n&&s.match(t)&&(n=s),s.isDefault()&&!n&&(n=s)}),n},loadRules:function(t){var r={};this.rules.forEach(function(n){r[n.getName()]=n}),this.rules=t,this.rules.forEach(function(n){var s=r[n.getName()];s&&n.merge(s)}),this.rules.sort(function(n,s){var i=n.getPriority()-s.getPriority();return i!==0?i:n.getName()>s.getName()?1:-1})},loadTargets:function(t){this.rules.forEach(function(r){var n=t[r.getName()];n&&(r.getReservoir().loadNewQuota(n.quota,n.TTL,n.interval),r.setRate(n.rate))})},getRules:function(){return this.rules},timestamp:function(t){this.lastUpdated=t},getLastUpdated:function(){return this.lastUpdated}},Cle=function(t){return cw.getLastUpdated()?t>cw.getLastUpdated()+Rle:!0};TF.exports=cw});var lw=S((Bxe,OF)=>{"use strict";var uw=Fe(),Ale=aw(),IF=Xh(),Tle=5*60*1e3,Ile={start:function(){this.poller&&clearInterval(this.poller),PF(!1),this.poller=setInterval(PF,Tle),this.poller.unref()}},PF=function(t){if(t=typeof t>"u"?!0:t,t){var r=xle();setTimeout(xF,r)}else xF()},xF=function(){try{Ple()}catch(t){uw.getLogger().warn("Encountered unexpected exception when fetching sampling rules: "+t)}},Ple=function(){var t=Math.floor(new Date().getTime()/1e3);Ale.fetchSamplingRules(function(r,n){r?uw.getLogger().warn("Failed to retrieve sampling rules from X-Ray service:",r):n.length!==0&&(IF.loadRules(n),IF.timestamp(t),uw.getLogger().info("Successfully refreshed centralized sampling rule cache."))})},xle=function(){return Math.random()*5};OF.exports=Ile});var kF=S((Uxe,LF)=>{"use strict";var Ole=lw(),Nle=aw(),dw=Xh(),Qh=Fe(),NF=10*1e3,DF={interval:NF,start:function(){this.poller=setInterval(Dle,NF+Mle()),this.poller.unref()}},Dle=function(){try{Lle()}catch(t){Qh.getLogger().warn("Encountered unexpected exception when fetching sampling targets: "+t)}},Lle=function(){var t=kle();t&&t.length>0&&Nle.fetchTargets(t,function(r,n,s){if(r){Qh.getLogger().warn("Failed to retrieve sampling targets from X-Ray service:",r);return}dw.loadTargets(n),s>dw.getLastUpdated()&&(Qh.getLogger().info("Performing out-of-band sampling rule polling to fetch updated rules."),Ole.start()),Qh.getLogger().info("Successfully reported rule statistics to get new sampling quota.")})},kle=function(){var t=dw.getRules(),r=[];return t.forEach(function(n){n.everMatched()&&n.timeToReport()&&r.push(n)}),r},Mle=function(){return Math.random()/DF.interval};LF.exports=DF});var qF=S((Hxe,MF)=>{"use strict";var fw=Fe(),qle=require("util"),Fle=Cs(),$le={localSampler:ow(),rulePoller:lw(),targetPoller:kF(),ruleCache:Xh(),started:!1,shouldSample:function(t){try{this.started||this.start(),t.serviceType||(t.serviceType=Fle.origin);var r=Math.floor(new Date().getTime()/1e3),n=this.ruleCache.getMatchedRule(t,r);return n?(fw.getLogger().debug(qle.format("Rule %s is matched.",n.getName())),Ble(n,r)):(fw.getLogger().info("No effective centralized sampling rule match. Fallback to local rules."),this.localSampler.shouldSample(t))}catch(s){fw.getLogger().error("Unhandled exception by the SDK during making sampling decisions: "+s)}},setLocalRules:function(t){this.localSampler.setLocalRules(t)},start:function(){this.started||(this.rulePoller.start(),this.targetPoller.start(),this.started=!0)}},Ble=function(t,r){t.incrementRequestCount();var n=t.getReservoir(),s=!0,i=n.borrowOrTake(r,t.canBorrow());return i==="borrow"?t.incrementBorrowCount():i==="take"||Math.random()<=t.getRate()?t.incrementSampledCount():s=!1,s?t.getName():!1};MF.exports=$le});var hw=S((jxe,FF)=>{"use strict";var Ule=pu(),Hle=nw(),jle=Fe(),Vle=Ct(),zle=Ct().wildcardMatch,Wle=Ct().processTraceData,pw="x-amzn-trace-id",Gle=!!process.env.AWS_XRAY_TRACING_NAME,Kle={defaultName:process.env.AWS_XRAY_TRACING_NAME,dynamicNaming:!1,hostPattern:null,sampler:qF(),enableDynamicNaming:function(e){if(this.dynamicNaming=!0,e&&typeof e!="string")throw new Error("Host pattern must be a string.");this.hostPattern=e||null},processHeaders:function(t){var r={};return t&&t.headers&&t.headers[pw]&&(r=Wle(t.headers[pw])),r},resolveName:function(t){var r;return this.dynamicNaming&&t?r=this.hostPattern?zle(this.hostPattern,t)?t:this.defaultName:t:r=this.defaultName,r},resolveSampling:function(t,r,n){var s;if(t.sampled==="1")s=!0;else if(t.sampled==="0")s=!1;else{var i={host:n.req.headers.host,httpMethod:n.req.method,urlPath:n.req.url,serviceName:r.name};s=this.sampler.shouldSample(i),(s instanceof String||typeof s=="string")&&(r.setMatchedSamplingRule(s),s=!0)}t.sampled==="?"&&n.header&&n.header(pw,"Root="+t.root+";Sampled="+(s?"1":"0")),s||(r.notTraced=!0)},setDefaultName:function(t){Gle||(this.defaultName=t)},disableCentralizedSampling:function(){this.sampler=ow()},setSamplingRules:function(t){if(!t||t instanceof String||!(typeof t=="string"||t instanceof Object))throw new Error("Please specify a path to the local sampling rules file, or supply an object containing the rules.");this.sampler.setLocalRules(t)},middlewareLog:function(t,r,n){jle.getLogger().debug(t+": { url: "+r+", name: "+n.name+", trace_id: "+n.trace_id+", id: "+n.id+", sampled: "+!n.notTraced+" }")},traceRequestResponseCycle:function(t,r){var n=this.processHeaders(t),s=this.resolveName(t.headers.host),i=new Ule(s,n.root,n.parent);r.req||(r.req=t),this.resolveSampling(n,i,r),i.addIncomingRequestData(new Hle(t)),this.middlewareLog("Starting middleware segment",t.url,i);var o=this.middlewareLog,a=!1,c=function(){if(a)return;a=!0,r.statusCode===429&&i.addThrottleFlag();let u=Vle.getCauseTypeFromHttpStatus(r.statusCode);u&&(i[u]=!0),i.http.close(r),i.close(),o("Closed middleware segment successfully",t.url,i)};return r.on("finish",c),r.on("close",c),i}};FF.exports=Kle});var $F=S(Jh=>{"use strict";Object.defineProperty(Jh,"__esModule",{value:!0});Jh.InvokeStore=void 0;var Xle=require("async_hooks"),mw=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";mw||(globalThis.awslambda=globalThis.awslambda||{});var Qle={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},gu=class{static run(t,r){return this.storage.run({...t},r)}static getContext(){return this.storage.getStore()}static get(t){return this.storage.getStore()?.[t]}static set(t,r){if(this.isProtectedKey(t))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[t]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(t){return t===this.PROTECTED_KEYS.REQUEST_ID||t===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(gu,"storage",new Xle.AsyncLocalStorage),f(gu,"PROTECTED_KEYS",Qle);var Yh;!mw&&globalThis.awslambda?.InvokeStore?Yh=globalThis.awslambda.InvokeStore:(Yh=gu,!mw&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=Yh));Jh.InvokeStore=Yh});var HF=S((Wxe,UF)=>{"use strict";var Zh=Is(),Yle=hw(),gw=Ct().LambdaUtils,Jle=pu(),Zle=Hh(),ede=Cs(),yw=Fe(),BF=Vh(),{InvokeStore:tde}=$F(),Ew=null;UF.exports.init=function(){Zh.enableManualMode=function(){yw.getLogger().warn("AWS Lambda does not support AWS X-Ray manual mode.")},Zle.disableReusableSocket(),ede.setStreamingThreshold(0),yw.getLogger().info("Disabling centralized sampling in Lambda environment."),Yle.disableCentralizedSampling();var t=Zh.getNamespace();t.enter(t.createContext()),Zh.setSegment(rde())};var rde=function(){var t=new Jle("facade"),r=["addNewSubsegment","addSubsegment","removeSubsegment","toString","addSubsegmentWithoutSampling","addNewSubsegmentWithoutSampling"],n=["incrementCounter","decrementCounter","isClosed","close","format","flush"],s=process.env._X_AMZN_TRACE_ID;for(var i in t)typeof t[i]=="function"&&r.indexOf(i)===-1&&(n.indexOf(i)===-1?t[i]=function(){var o=i;return function(){yw.getLogger().warn('Function "'+o+'" cannot be called on an AWS Lambda segment. Please use a subsegment to record data.')}}():t[i]=function(){});return t.trace_id=BF.Invalid().toString(),t.isClosed=function(){return!0},t.in_progress=!1,t.counter=1,t.notTraced=!0,t.facade=!0,t.reset=function(){this.trace_id=BF.Invalid().toString(),this.id="00000000",delete this.subsegments,this.notTraced=!0},t.resolveLambdaTraceData=function(){let a=tde.getXRayTraceId(),c=process.env._X_AMZN_TRACE_ID;var u=a??c;u?u!=Ew&&(this.reset(),gw.populateTraceData(t,u)&&(Ew=u)):(this.reset(),Zh.contextMissingStrategy.contextMissing("Missing AWS Lambda trace data for X-Ray. Ensure Active Tracing is enabled and no subsegments are created outside the function handler."))},gw.validTraceData(s)&&gw.populateTraceData(t,s)&&(Ew=s),t}});var jF=S((Gxe,nde)=>{nde.exports={name:"aws-xray-sdk-core",version:"3.11.0",description:"AWS X-Ray SDK for Javascript",author:"Amazon Web Services",contributors:["Sandra McMullen <mcmuls@amazon.com>","William Armiros <armiros@amazon.com>","Moritz Onken <onken@netcubed.de>"],files:["dist/lib/**/*","LICENSE","README.md"],main:"dist/lib/index.js",types:"dist/lib/index.d.ts",engines:{node:">= 14.x"},directories:{test:"test"},"//":"@types/cls-hooked is exposed in API so must be in dependencies, not devDependencies",dependencies:{"@aws-sdk/types":"^3.4.1","@aws/lambda-invoke-store":"^0.0.1","@smithy/service-error-classification":"^2.0.4","@types/cls-hooked":"^4.3.3","atomic-batcher":"^1.0.2","cls-hooked":"^4.2.2",semver:"^7.5.3"},scripts:{prepare:"npm run compile",compile:"tsc && npm run copy-lib && npm run copy-test","copy-lib":"find lib -type f \\( -name '*.d.ts' -o -name '*.json' \\) | xargs -I % ../../scripts/cp-with-structure.sh % dist","copy-test":"find test -name '*.json' | xargs -I % ../../scripts/cp-with-structure.sh % dist",lint:"eslint .","lint:fix":"eslint . --fix",test:"npm run compile && mocha --recursive ./dist/test/ -R spec && tsd && mocha --recursive ./dist/test_async/ -R spec","test-d":"tsd","test-async":"npm run compile && mocha --recursive ./dist/test_async/ -R spec",clean:"rm -rf dist && rm -rf node_modules",testcov:"nyc npm run test",reportcov:"nyc report --reporter=text-lcov > coverage.lcov"},keywords:["amazon","api","aws","core","xray","x-ray","x ray"],license:"Apache-2.0",repository:"https://github.com/aws/aws-xray-sdk-node/tree/master/packages/core",gitHead:"4e6f43ed3c4686418c2139d4b86ab5513e0ca8ed"}});var WF=S((Kxe,zF)=>{"use strict";var Sw=require("http"),VF={METADATA_TIMEOUT:1e3,getPluginMetadata:function(e,t){var s=5,i=function(){var o=Sw.__request?Sw.__request:Sw.request,a=o(e,function(c){var u="";c.on("data",function(l){u+=l}),c.on("end",function(){if(this.statusCode===200||this.statusCode===300){try{u=JSON.parse(u)}catch(l){t(l);return}t(null,u)}else s>0&&Math.floor(this.statusCode/100)===5?(s--,setTimeout(i,250)):t(new Error(`Failed to retrieve metadata with options: ${e}`))})});a.on("error",function(c){t(c)}),a.on("timeout",function(){a.abort()}),a.setTimeout(VF.METADATA_TIMEOUT),a.end()};i()}};zF.exports=VF});var YF=S((Xxe,QF)=>{"use strict";var KF=WF(),GF=Fe(),_w=require("http"),sde={getData:function(e){let t="/latest/dynamic/instance-identity/document";function r(n){let s=XF(t,"GET",n?{"X-aws-ec2-metadata-token":n}:{});KF.getPluginMetadata(s,function(i,o){if(i||!o){GF.getLogger().error("Error loading EC2 plugin metadata: ",i?i.toString():"Could not retrieve data from IMDS."),e();return}let a={ec2:{instance_id:o.instanceId,availability_zone:o.availabilityZone,instance_size:o.instanceType,ami_id:o.imageId}};e(a)})}ide(function(n){n===null&&GF.getLogger().debug("EC2Plugin failed to get token from IMDSv2. Falling back to IMDSv1."),r(n)})},originName:"AWS::EC2::Instance"};function ide(e){let t=_w.__request?_w.__request:_w.request,s=XF("/latest/api/token","PUT",{"X-aws-ec2-metadata-token-ttl-seconds":60}),i=t(s,function(o){let a="";o.on("data",function(c){a+=c}),o.on("end",function(){this.statusCode===200||this.statusCode===300?e(a):e(null)})});i.on("error",function(){e(null)}),i.on("timeout",function(){i.abort(),e(null)}),i.setTimeout(KF.METADATA_TIMEOUT),i.end()}function XF(e,t,r){return t||(t="GET"),r||(r={}),{host:"169.254.169.254",path:e,method:t,headers:r}}QF.exports=sde});var ZF=S((Qxe,JF)=>{"use strict";var ode=require("os"),ade={getData:function(e){e({ecs:{container:ode.hostname()}})},originName:"AWS::ECS::Container"};JF.exports=ade});var t$=S((Yxe,e$)=>{"use strict";var cde=require("fs"),ude=Fe(),lde="/var/elasticbeanstalk/xray/environment.conf",dde={getData:function(e){cde.readFile(lde,"utf8",function(t,r){if(t)ude.getLogger().error("Error loading Elastic Beanstalk plugin:",t.stack),e();else{var n=JSON.parse(r),s={elastic_beanstalk:{environment:n.environment_name,version_label:n.version_label,deployment_id:n.deployment_id}};e(s)}})},originName:"AWS::ElasticBeanstalk::Environment"};e$.exports=dde});var r$=S((Jxe,fde)=>{fde.exports={services:{dynamodb:{operations:{batchGetItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity"]},batchWriteItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},createTable:{request_parameters:["GlobalSecondaryIndexes","LocalSecondaryIndexes","ProvisionedThroughput","TableName"]},deleteItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},deleteTable:{request_parameters:["TableName"]},describeTable:{request_parameters:["TableName"]},getItem:{request_parameters:["ConsistentRead","ProjectionExpression","TableName"],response_parameters:["ConsumedCapacity"]},listTables:{request_parameters:["ExclusiveStartTableName","Limit"],response_descriptors:{TableNames:{list:!0,get_count:!0,rename_to:"table_count"}}},putItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},query:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","ScanIndexForward","Select","TableName"],response_parameters:["ConsumedCapacity"]},scan:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","Segment","Select","TableName","TotalSegments"],response_parameters:["ConsumedCapacity","Count","ScannedCount"]},updateItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},updateTable:{request_parameters:["AttributeDefinitions","GlobalSecondaryIndexUpdates","ProvisionedThroughput","TableName"]}}},sqs:{operations:{addPermission:{request_parameters:["Label","QueueUrl"]},changeMessageVisibility:{request_parameters:["QueueUrl","VisibilityTimeout"]},changeMessageVisibilityBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},createQueue:{request_parameters:["Attributes","QueueName"]},deleteMessage:{request_parameters:["QueueUrl"]},deleteMessageBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},deleteQueue:{request_parameters:["QueueUrl"]},getQueueAttributes:{request_parameters:["QueueUrl"],response_parameters:["Attributes"]},getQueueUrl:{request_parameters:["QueueName","QueueOwnerAWSAccountId"],response_parameters:["QueueUrl"]},listDeadLetterSourceQueues:{request_parameters:["QueueUrl"],response_parameters:["QueueUrls"]},listQueues:{request_parameters:["QueueNamePrefix"],response_descriptors:{QueueUrls:{list:!0,get_count:!0,rename_to:"queue_count"}}},purgeQueue:{request_parameters:["QueueUrl"]},receiveMessage:{request_parameters:["AttributeNames","MaxNumberOfMessages","MessageAttributeNames","QueueUrl","VisibilityTimeout","WaitTimeSeconds"],response_descriptors:{Messages:{list:!0,get_count:!0,rename_to:"message_count"}}},removePermission:{request_parameters:["QueueUrl"]},sendMessage:{request_parameters:["DelaySeconds","QueueUrl"],request_descriptors:{MessageAttributes:{get_keys:!0,rename_to:"message_attribute_names"}},response_parameters:["MessageId"]},sendMessageBatch:{request_parameters:["QueueUrl"],request_descriptors:{Entries:{list:!0,get_count:!0,rename_to:"message_count"}},response_descriptors:{Failed:{list:!0,get_count:!0,rename_to:"failed_count"},Successful:{list:!0,get_count:!0,rename_to:"successful_count"}}},setQueueAttributes:{request_parameters:["QueueUrl"],request_descriptors:{Attributes:{get_keys:!0,rename_to:"attribute_names"}}}}},sns:{operations:{publish:{request_parameters:["TopicArn"]},publishBatch:{request_parameters:["TopicArn"]}}},lambda:{operations:{invoke:{request_parameters:["FunctionName","InvocationType","LogType","Qualifier"],response_parameters:["FunctionError","StatusCode"]},invokeAsync:{request_parameters:["FunctionName"],response_parameters:["Status"]}}},s3:{operations:{abortMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},completeMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},copyObject:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjects:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLocation:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTorrent:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketAnalyticsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketInventoryConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketMetricsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listMultipartUploads:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectVersions:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjects:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectsV2:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listParts:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObject:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},restoreObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPart:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPartCopy:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}}}},sagemakerruntime:{operations:{invokeEndpoint:{request_parameters:["EndpointName"]}}}}}});var c$=S((Zxe,a$)=>{"use strict";var i$=require("fs"),Ko=Fe(),pde=r$(),em={REQ_DESC:"request_descriptors",REQ_PARAMS:"request_parameters",RES_DESC:"response_descriptors",RES_PARAMS:"response_parameters"};function rm(e){this.init(e)}rm.prototype.init=function(t){t?typeof t=="string"?(Ko.getLogger().info("Using custom AWS whitelist file: "+t),this.services=tm(JSON.parse(i$.readFileSync(t,"utf8")))):(Ko.getLogger().info("Using custom AWS whitelist source."),this.services=tm(t)):this.services=pde.services};rm.prototype.append=function(t){var r={};typeof t=="string"?(Ko.getLogger().info("Appending AWS whitelist with custom file: "+t),r=tm(JSON.parse(i$.readFileSync(t,"utf8")))):(Ko.getLogger().info("Appending AWS whitelist with a custom source."),r=tm(t));for(var n in r)this.services[n]=r[n]};rm.prototype.capture=function(t,r){var n=r.request.operation,s=this.services[t]!==void 0?this.services[t].operations[n]:null;if(s===null){Ko.getLogger().debug('Call "'+t+"."+n+'" is not whitelisted for additional data capturing. Ignoring.');return}var i={};for(var o in s){var a=s[o];o===em.REQ_PARAMS?n$(a,r.request.params,i):o===em.REQ_DESC?s$(a,r.request.params,i):o===em.RES_PARAMS?r.data&&n$(a,r.data,i):o===em.RES_DESC?r.data&&s$(a,r.data,i):Ko.getLogger().error('Unknown parameter type "'+o+'". Must be "request_descriptors", "response_descriptors", "request_parameters" or "response_parameters".')}return i};function n$(e,t,r){e.forEach(function(n){if(typeof t[n]<"u"){var s=o$(n);this[s]=t[n]}},r)}function s$(e,t,r){for(var n in e){var s=e[n];if(typeof t[n]<"u"){var i;if(s.list&&s.get_count?i=t[n]?t[n].length:0:i=s.get_keys===!0?Object.keys(t[n]):t[n],typeof s.rename_to=="string")r[s.rename_to]=i;else{var o=o$(n);r[o]=i}}}}function o$(e){return e==="IPAddress"?"ip_address":e.split(/(?=[A-Z])/).join("_").toLowerCase()}function tm(e){var t=e;if(t.services===void 0)throw new Error('Document formatting is incorrect. Expecting "services" param.');return t.services}a$.exports=rm});var Eu=S((eOe,nm)=>{"use strict";var u$=c$(),vw=new u$;function ww(e,t){this.init(e,t)}ww.prototype.init=function(t,r){this.operation=gde(t.request.operation)||"",t&&t.request&&t.request.httpRequest&&t.request.httpRequest.region&&(this.region=t.request.httpRequest.region),t&&t.requestId&&(this.request_id=t.requestId),this.retries=t.retryCount||0,t.extendedRequestId&&r&&r.toLowerCase()==="s3"&&(this.id_2=t.extendedRequestId),r&&this.addData(vw.capture(r.toLowerCase(),t))};ww.prototype.addData=function(t){for(var r in t)this[r]=t[r]};var hde=function(t){if(!t||t instanceof String||!(typeof t=="string"||t instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");vw=new u$(t)},mde=function(t){if(!t||t instanceof String||!(typeof t=="string"||t instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");vw.append(t)};function gde(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}nm.exports=ww;nm.exports.appendAWSWhitelist=mde;nm.exports.setAWSWhitelist=hde});var im=S((tOe,sm)=>{"use strict";var gi=Is(),yu=Fe(),l$=function(t,r,n){bw(t,r);var s,i,o=gi.resolveSegment(n);if(!o)return yu.getLogger().warn("Failed to capture function."),r();s=o.addNewSubsegment(t),i=d$(r,s);try{let a=i(s);return s.close(),a}catch(a){throw s.close(a),a}},Ede=function(t,r,n){bw(t,r);var s,i,o=gi.resolveSegment(n);if(!o)return yu.getLogger().warn("Failed to capture async function."),r();s=o.addNewSubsegment(t),i=d$(r,s);try{return i(s)}catch(a){throw s.close(a),a}},yde=function(t,r,n){bw(t,r);var s=gi.resolveSegment(n);return s?(s.incrementCounter(),function(){var i=gi.resolveSegment(n),o=Array.prototype.slice.call(arguments);l$(t,r.bind.apply(r,[null].concat(o)),i),s.decrementCounter()}.bind(this)):(yu.getLogger().warn("Failed to capture callback function."),r)};function d$(e,t){var r;if(gi.isAutomaticMode()){var n=gi.getNamespace(),s=function(){var i;return n.run(function(){gi.setSegment(t),i=e(t)}),i};r=s}else r=e;return r}function bw(e,t){var r;if(!e||typeof e!="string")throw r='Param "name" must be a non-empty string.',yu.getLogger().error(r),new Error(r);if(typeof t!="function")throw r='Param "fcn" must be a function.',yu.getLogger().error(r),new Error(r)}sm.exports.captureFunc=l$;sm.exports.captureAsyncFunc=Ede;sm.exports.captureCallbackFunc=yde});var Su=S((rOe,f$)=>{"use strict";var Sde="2.0.0",_de=Number.MAX_SAFE_INTEGER||9007199254740991,vde=16,wde=250,bde=["major","premajor","minor","preminor","patch","prepatch","prerelease"];f$.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:vde,MAX_SAFE_BUILD_LENGTH:wde,MAX_SAFE_INTEGER:_de,RELEASE_TYPES:bde,SEMVER_SPEC_VERSION:Sde,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var _u=S((nOe,p$)=>{"use strict";var Rde=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};p$.exports=Rde});var Xo=S((rn,h$)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Rw,MAX_SAFE_BUILD_LENGTH:Cde,MAX_LENGTH:Ade}=Su(),Tde=_u();rn=h$.exports={};var Ide=rn.re=[],Pde=rn.safeRe=[],F=rn.src=[],xde=rn.safeSrc=[],$=rn.t={},Ode=0,Cw="[a-zA-Z0-9-]",Nde=[["\\s",1],["\\d",Ade],[Cw,Cde]],Dde=e=>{for(let[t,r]of Nde)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},Y=(e,t,r)=>{let n=Dde(t),s=Ode++;Tde(e,s,t),$[e]=s,F[s]=t,xde[s]=n,Ide[s]=new RegExp(t,r?"g":void 0),Pde[s]=new RegExp(n,r?"g":void 0)};Y("NUMERICIDENTIFIER","0|[1-9]\\d*");Y("NUMERICIDENTIFIERLOOSE","\\d+");Y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Cw}*`);Y("MAINVERSION",`(${F[$.NUMERICIDENTIFIER]})\\.(${F[$.NUMERICIDENTIFIER]})\\.(${F[$.NUMERICIDENTIFIER]})`);Y("MAINVERSIONLOOSE",`(${F[$.NUMERICIDENTIFIERLOOSE]})\\.(${F[$.NUMERICIDENTIFIERLOOSE]})\\.(${F[$.NUMERICIDENTIFIERLOOSE]})`);Y("PRERELEASEIDENTIFIER",`(?:${F[$.NONNUMERICIDENTIFIER]}|${F[$.NUMERICIDENTIFIER]})`);Y("PRERELEASEIDENTIFIERLOOSE",`(?:${F[$.NONNUMERICIDENTIFIER]}|${F[$.NUMERICIDENTIFIERLOOSE]})`);Y("PRERELEASE",`(?:-(${F[$.PRERELEASEIDENTIFIER]}(?:\\.${F[$.PRERELEASEIDENTIFIER]})*))`);Y("PRERELEASELOOSE",`(?:-?(${F[$.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${F[$.PRERELEASEIDENTIFIERLOOSE]})*))`);Y("BUILDIDENTIFIER",`${Cw}+`);Y("BUILD",`(?:\\+(${F[$.BUILDIDENTIFIER]}(?:\\.${F[$.BUILDIDENTIFIER]})*))`);Y("FULLPLAIN",`v?${F[$.MAINVERSION]}${F[$.PRERELEASE]}?${F[$.BUILD]}?`);Y("FULL",`^${F[$.FULLPLAIN]}$`);Y("LOOSEPLAIN",`[v=\\s]*${F[$.MAINVERSIONLOOSE]}${F[$.PRERELEASELOOSE]}?${F[$.BUILD]}?`);Y("LOOSE",`^${F[$.LOOSEPLAIN]}$`);Y("GTLT","((?:<|>)?=?)");Y("XRANGEIDENTIFIERLOOSE",`${F[$.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Y("XRANGEIDENTIFIER",`${F[$.NUMERICIDENTIFIER]}|x|X|\\*`);Y("XRANGEPLAIN",`[v=\\s]*(${F[$.XRANGEIDENTIFIER]})(?:\\.(${F[$.XRANGEIDENTIFIER]})(?:\\.(${F[$.XRANGEIDENTIFIER]})(?:${F[$.PRERELEASE]})?${F[$.BUILD]}?)?)?`);Y("XRANGEPLAINLOOSE",`[v=\\s]*(${F[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${F[$.XRANGEIDENTIFIERLOOSE]})(?:\\.(${F[$.XRANGEIDENTIFIERLOOSE]})(?:${F[$.PRERELEASELOOSE]})?${F[$.BUILD]}?)?)?`);Y("XRANGE",`^${F[$.GTLT]}\\s*${F[$.XRANGEPLAIN]}$`);Y("XRANGELOOSE",`^${F[$.GTLT]}\\s*${F[$.XRANGEPLAINLOOSE]}$`);Y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Rw}})(?:\\.(\\d{1,${Rw}}))?(?:\\.(\\d{1,${Rw}}))?`);Y("COERCE",`${F[$.COERCEPLAIN]}(?:$|[^\\d])`);Y("COERCEFULL",F[$.COERCEPLAIN]+`(?:${F[$.PRERELEASE]})?(?:${F[$.BUILD]})?(?:$|[^\\d])`);Y("COERCERTL",F[$.COERCE],!0);Y("COERCERTLFULL",F[$.COERCEFULL],!0);Y("LONETILDE","(?:~>?)");Y("TILDETRIM",`(\\s*)${F[$.LONETILDE]}\\s+`,!0);rn.tildeTrimReplace="$1~";Y("TILDE",`^${F[$.LONETILDE]}${F[$.XRANGEPLAIN]}$`);Y("TILDELOOSE",`^${F[$.LONETILDE]}${F[$.XRANGEPLAINLOOSE]}$`);Y("LONECARET","(?:\\^)");Y("CARETTRIM",`(\\s*)${F[$.LONECARET]}\\s+`,!0);rn.caretTrimReplace="$1^";Y("CARET",`^${F[$.LONECARET]}${F[$.XRANGEPLAIN]}$`);Y("CARETLOOSE",`^${F[$.LONECARET]}${F[$.XRANGEPLAINLOOSE]}$`);Y("COMPARATORLOOSE",`^${F[$.GTLT]}\\s*(${F[$.LOOSEPLAIN]})$|^$`);Y("COMPARATOR",`^${F[$.GTLT]}\\s*(${F[$.FULLPLAIN]})$|^$`);Y("COMPARATORTRIM",`(\\s*)${F[$.GTLT]}\\s*(${F[$.LOOSEPLAIN]}|${F[$.XRANGEPLAIN]})`,!0);rn.comparatorTrimReplace="$1$2$3";Y("HYPHENRANGE",`^\\s*(${F[$.XRANGEPLAIN]})\\s+-\\s+(${F[$.XRANGEPLAIN]})\\s*$`);Y("HYPHENRANGELOOSE",`^\\s*(${F[$.XRANGEPLAINLOOSE]})\\s+-\\s+(${F[$.XRANGEPLAINLOOSE]})\\s*$`);Y("STAR","(<|>)?=?\\s*\\*");Y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var om=S((sOe,m$)=>{"use strict";var Lde=Object.freeze({loose:!0}),kde=Object.freeze({}),Mde=e=>e?typeof e!="object"?Lde:e:kde;m$.exports=Mde});var Aw=S((iOe,y$)=>{"use strict";var g$=/^[0-9]+$/,E$=(e,t)=>{if(typeof e=="number"&&typeof t=="number")return e===t?0:e<t?-1:1;let r=g$.test(e),n=g$.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},qde=(e,t)=>E$(t,e);y$.exports={compareIdentifiers:E$,rcompareIdentifiers:qde}});var Tt=S((oOe,_$)=>{"use strict";var am=_u(),{MAX_LENGTH:S$,MAX_SAFE_INTEGER:cm}=Su(),{safeRe:um,t:lm}=Xo(),Fde=om(),{compareIdentifiers:Tw}=Aw(),Iw=class e{constructor(t,r){if(r=Fde(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>S$)throw new TypeError(`version is longer than ${S$} characters`);am("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?um[lm.LOOSE]:um[lm.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>cm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>cm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>cm||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<cm)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(am("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),this.major<t.major?-1:this.major>t.major?1:this.minor<t.minor?-1:this.minor>t.minor?1:this.patch<t.patch?-1:this.patch>t.patch?1:0}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(am("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Tw(n,s)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(am("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Tw(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?um[lm.PRERELEASELOOSE]:um[lm.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),Tw(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};_$.exports=Iw});var Ei=S((aOe,w$)=>{"use strict";var v$=Tt(),$de=(e,t,r=!1)=>{if(e instanceof v$)return e;try{return new v$(e,t)}catch(n){if(!r)return null;throw n}};w$.exports=$de});var R$=S((cOe,b$)=>{"use strict";var Bde=Ei(),Ude=(e,t)=>{let r=Bde(e,t);return r?r.version:null};b$.exports=Ude});var A$=S((uOe,C$)=>{"use strict";var Hde=Ei(),jde=(e,t)=>{let r=Hde(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};C$.exports=jde});var P$=S((lOe,I$)=>{"use strict";var T$=Tt(),Vde=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new T$(e instanceof T$?e.version:e,r).inc(t,n,s).version}catch{return null}};I$.exports=Vde});var N$=S((dOe,O$)=>{"use strict";var x$=Ei(),zde=(e,t)=>{let r=x$(e,null,!0),n=x$(t,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};O$.exports=zde});var L$=S((fOe,D$)=>{"use strict";var Wde=Tt(),Gde=(e,t)=>new Wde(e,t).major;D$.exports=Gde});var M$=S((pOe,k$)=>{"use strict";var Kde=Tt(),Xde=(e,t)=>new Kde(e,t).minor;k$.exports=Xde});var F$=S((hOe,q$)=>{"use strict";var Qde=Tt(),Yde=(e,t)=>new Qde(e,t).patch;q$.exports=Yde});var B$=S((mOe,$$)=>{"use strict";var Jde=Ei(),Zde=(e,t)=>{let r=Jde(e,t);return r&&r.prerelease.length?r.prerelease:null};$$.exports=Zde});var yr=S((gOe,H$)=>{"use strict";var U$=Tt(),efe=(e,t,r)=>new U$(e,r).compare(new U$(t,r));H$.exports=efe});var V$=S((EOe,j$)=>{"use strict";var tfe=yr(),rfe=(e,t,r)=>tfe(t,e,r);j$.exports=rfe});var W$=S((yOe,z$)=>{"use strict";var nfe=yr(),sfe=(e,t)=>nfe(e,t,!0);z$.exports=sfe});var dm=S((SOe,K$)=>{"use strict";var G$=Tt(),ife=(e,t,r)=>{let n=new G$(e,r),s=new G$(t,r);return n.compare(s)||n.compareBuild(s)};K$.exports=ife});var Q$=S((_Oe,X$)=>{"use strict";var ofe=dm(),afe=(e,t)=>e.sort((r,n)=>ofe(r,n,t));X$.exports=afe});var J$=S((vOe,Y$)=>{"use strict";var cfe=dm(),ufe=(e,t)=>e.sort((r,n)=>cfe(n,r,t));Y$.exports=ufe});var vu=S((wOe,Z$)=>{"use strict";var lfe=yr(),dfe=(e,t,r)=>lfe(e,t,r)>0;Z$.exports=dfe});var fm=S((bOe,eB)=>{"use strict";var ffe=yr(),pfe=(e,t,r)=>ffe(e,t,r)<0;eB.exports=pfe});var Pw=S((ROe,tB)=>{"use strict";var hfe=yr(),mfe=(e,t,r)=>hfe(e,t,r)===0;tB.exports=mfe});var xw=S((COe,rB)=>{"use strict";var gfe=yr(),Efe=(e,t,r)=>gfe(e,t,r)!==0;rB.exports=Efe});var pm=S((AOe,nB)=>{"use strict";var yfe=yr(),Sfe=(e,t,r)=>yfe(e,t,r)>=0;nB.exports=Sfe});var hm=S((TOe,sB)=>{"use strict";var _fe=yr(),vfe=(e,t,r)=>_fe(e,t,r)<=0;sB.exports=vfe});var Ow=S((IOe,iB)=>{"use strict";var wfe=Pw(),bfe=xw(),Rfe=vu(),Cfe=pm(),Afe=fm(),Tfe=hm(),Ife=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return wfe(e,r,n);case"!=":return bfe(e,r,n);case">":return Rfe(e,r,n);case">=":return Cfe(e,r,n);case"<":return Afe(e,r,n);case"<=":return Tfe(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};iB.exports=Ife});var aB=S((POe,oB)=>{"use strict";var Pfe=Tt(),xfe=Ei(),{safeRe:mm,t:gm}=Xo(),Ofe=(e,t)=>{if(e instanceof Pfe)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?mm[gm.COERCEFULL]:mm[gm.COERCE]);else{let c=t.includePrerelease?mm[gm.COERCERTLFULL]:mm[gm.COERCERTL],u;for(;(u=c.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return xfe(`${n}.${s}.${i}${o}${a}`,t)};oB.exports=Ofe});var uB=S((xOe,cB)=>{"use strict";var Nw=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}};cB.exports=Nw});var Sr=S((OOe,pB)=>{"use strict";var Nfe=/\s+/g,Dw=class e{constructor(t,r){if(r=Lfe(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Lw)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(Nfe," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!dB(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Ufe(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&$fe)|(this.options.loose&&Bfe))+":"+t,s=lB.get(n);if(s)return s;let i=this.options.loose,o=i?Bt[It.HYPHENRANGELOOSE]:Bt[It.HYPHENRANGE];t=t.replace(o,Yfe(this.options.includePrerelease)),Ne("hyphen replace",t),t=t.replace(Bt[It.COMPARATORTRIM],Mfe),Ne("comparator trim",t),t=t.replace(Bt[It.TILDETRIM],qfe),Ne("tilde trim",t),t=t.replace(Bt[It.CARETTRIM],Ffe),Ne("caret trim",t);let a=t.split(" ").map(d=>Hfe(d,this.options)).join(" ").split(/\s+/).map(d=>Qfe(d,this.options));i&&(a=a.filter(d=>(Ne("loose invalid filter",d,this.options),!!d.match(Bt[It.COMPARATORLOOSE])))),Ne("range list",a);let c=new Map,u=a.map(d=>new Lw(d,this.options));for(let d of u){if(dB(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return lB.set(n,l),l}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>fB(n,r)&&t.set.some(s=>fB(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new kfe(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Jfe(this.set[r],t,this.options))return!0;return!1}};pB.exports=Dw;var Dfe=uB(),lB=new Dfe,Lfe=om(),Lw=wu(),Ne=_u(),kfe=Tt(),{safeRe:Bt,t:It,comparatorTrimReplace:Mfe,tildeTrimReplace:qfe,caretTrimReplace:Ffe}=Xo(),{FLAG_INCLUDE_PRERELEASE:$fe,FLAG_LOOSE:Bfe}=Su(),dB=e=>e.value==="<0.0.0-0",Ufe=e=>e.value==="",fB=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,t)),s=n.pop();return r},Hfe=(e,t)=>(e=e.replace(Bt[It.BUILD],""),Ne("comp",e,t),e=zfe(e,t),Ne("caret",e),e=jfe(e,t),Ne("tildes",e),e=Gfe(e,t),Ne("xrange",e),e=Xfe(e,t),Ne("stars",e),e),Ut=e=>!e||e.toLowerCase()==="x"||e==="*",jfe=(e,t)=>e.trim().split(/\s+/).map(r=>Vfe(r,t)).join(" "),Vfe=(e,t)=>{let r=t.loose?Bt[It.TILDELOOSE]:Bt[It.TILDE];return e.replace(r,(n,s,i,o,a)=>{Ne("tilde",e,n,s,i,o,a);let c;return Ut(s)?c="":Ut(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:Ut(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Ne("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Ne("tilde return",c),c})},zfe=(e,t)=>e.trim().split(/\s+/).map(r=>Wfe(r,t)).join(" "),Wfe=(e,t)=>{Ne("caret",e,t);let r=t.loose?Bt[It.CARETLOOSE]:Bt[It.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,i,o,a,c)=>{Ne("caret",e,s,i,o,a,c);let u;return Ut(i)?u="":Ut(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:Ut(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(Ne("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(Ne("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Ne("caret return",u),u})},Gfe=(e,t)=>(Ne("replaceXRanges",e,t),e.split(/\s+/).map(r=>Kfe(r,t)).join(" ")),Kfe=(e,t)=>{e=e.trim();let r=t.loose?Bt[It.XRANGELOOSE]:Bt[It.XRANGE];return e.replace(r,(n,s,i,o,a,c)=>{Ne("xRange",e,n,s,i,o,a,c);let u=Ut(i),l=u||Ut(o),d=l||Ut(a),m=d;return s==="="&&m&&(s=""),c=t.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&m?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),Ne("xRange return",n),n})},Xfe=(e,t)=>(Ne("replaceStars",e,t),e.trim().replace(Bt[It.STAR],"")),Qfe=(e,t)=>(Ne("replaceGTE0",e,t),e.trim().replace(Bt[t.includePrerelease?It.GTE0PRE:It.GTE0],"")),Yfe=e=>(t,r,n,s,i,o,a,c,u,l,d,m)=>(Ut(n)?r="":Ut(s)?r=`>=${n}.0.0${e?"-0":""}`:Ut(i)?r=`>=${n}.${s}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,Ut(u)?c="":Ut(l)?c=`<${+u+1}.0.0-0`:Ut(d)?c=`<${u}.${+l+1}.0-0`:m?c=`<=${u}.${l}.${d}-${m}`:e?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Jfe=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Ne(e[n].semver),e[n].semver!==Lw.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var wu=S((NOe,SB)=>{"use strict";var bu=Symbol("SemVer ANY"),qw=class e{static get ANY(){return bu}constructor(t,r){if(r=hB(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),Mw("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===bu?this.value="":this.value=this.operator+this.semver.version,Mw("comp",this)}parse(t){let r=this.options.loose?mB[gB.COMPARATORLOOSE]:mB[gB.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new EB(n[2],this.options.loose):this.semver=bu}toString(){return this.value}test(t){if(Mw("Comparator.test",t,this.options.loose),this.semver===bu||t===bu)return!0;if(typeof t=="string")try{t=new EB(t,this.options)}catch{return!1}return kw(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new yB(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new yB(this.value,r).test(t.semver):(r=hB(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||kw(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||kw(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};SB.exports=qw;var hB=om(),{safeRe:mB,t:gB}=Xo(),kw=Ow(),Mw=_u(),EB=Tt(),yB=Sr()});var Ru=S((DOe,_B)=>{"use strict";var Zfe=Sr(),epe=(e,t,r)=>{try{t=new Zfe(t,r)}catch{return!1}return t.test(e)};_B.exports=epe});var wB=S((LOe,vB)=>{"use strict";var tpe=Sr(),rpe=(e,t)=>new tpe(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));vB.exports=rpe});var RB=S((kOe,bB)=>{"use strict";var npe=Tt(),spe=Sr(),ipe=(e,t,r)=>{let n=null,s=null,i=null;try{i=new spe(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new npe(n,r))}),n};bB.exports=ipe});var AB=S((MOe,CB)=>{"use strict";var ope=Tt(),ape=Sr(),cpe=(e,t,r)=>{let n=null,s=null,i=null;try{i=new ape(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new ope(n,r))}),n};CB.exports=cpe});var PB=S((qOe,IB)=>{"use strict";var Fw=Tt(),upe=Sr(),TB=vu(),lpe=(e,t)=>{e=new upe(e,t);let r=new Fw("0.0.0");if(e.test(r)||(r=new Fw("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new Fw(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||TB(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||TB(r,i))&&(r=i)}return r&&e.test(r)?r:null};IB.exports=lpe});var OB=S((FOe,xB)=>{"use strict";var dpe=Sr(),fpe=(e,t)=>{try{return new dpe(e,t).range||"*"}catch{return null}};xB.exports=fpe});var Em=S(($Oe,kB)=>{"use strict";var ppe=Tt(),LB=wu(),{ANY:hpe}=LB,mpe=Sr(),gpe=Ru(),NB=vu(),DB=fm(),Epe=hm(),ype=pm(),Spe=(e,t,r,n)=>{e=new ppe(e,n),t=new mpe(t,n);let s,i,o,a,c;switch(r){case">":s=NB,i=Epe,o=DB,a=">",c=">=";break;case"<":s=DB,i=ype,o=NB,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(gpe(e,t,n))return!1;for(let u=0;u<t.set.length;++u){let l=t.set[u],d=null,m=null;if(l.forEach(g=>{g.semver===hpe&&(g=new LB(">=0.0.0")),d=d||g,m=m||g,s(g.semver,d.semver,n)?d=g:o(g.semver,m.semver,n)&&(m=g)}),d.operator===a||d.operator===c||(!m.operator||m.operator===a)&&i(e,m.semver))return!1;if(m.operator===c&&o(e,m.semver))return!1}return!0};kB.exports=Spe});var qB=S((BOe,MB)=>{"use strict";var _pe=Em(),vpe=(e,t,r)=>_pe(e,t,">",r);MB.exports=vpe});var $B=S((UOe,FB)=>{"use strict";var wpe=Em(),bpe=(e,t,r)=>wpe(e,t,"<",r);FB.exports=bpe});var HB=S((HOe,UB)=>{"use strict";var BB=Sr(),Rpe=(e,t,r)=>(e=new BB(e,r),t=new BB(t,r),e.intersects(t,r));UB.exports=Rpe});var VB=S((jOe,jB)=>{"use strict";var Cpe=Ru(),Ape=yr();jB.exports=(e,t,r)=>{let n=[],s=null,i=null,o=e.sort((l,d)=>Ape(l,d,r));for(let l of o)Cpe(l,t,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof t.raw=="string"?t.raw:String(t);return c.length<u.length?c:t}});var QB=S((VOe,XB)=>{"use strict";var zB=Sr(),Bw=wu(),{ANY:$w}=Bw,Cu=Ru(),Uw=yr(),Tpe=(e,t,r={})=>{if(e===t)return!0;e=new zB(e,r),t=new zB(t,r);let n=!1;e:for(let s of e.set){for(let i of t.set){let o=Ppe(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Ipe=[new Bw(">=0.0.0-0")],WB=[new Bw(">=0.0.0")],Ppe=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===$w){if(t.length===1&&t[0].semver===$w)return!0;r.includePrerelease?e=Ipe:e=WB}if(t.length===1&&t[0].semver===$w){if(r.includePrerelease)return!0;t=WB}let n=new Set,s,i;for(let g of e)g.operator===">"||g.operator===">="?s=GB(s,g,r):g.operator==="<"||g.operator==="<="?i=KB(i,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Uw(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let g of n){if(s&&!Cu(g,String(s),r)||i&&!Cu(g,String(i),r))return null;for(let y of t)if(!Cu(g,String(y),r))return!1;return!0}let a,c,u,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let g of t){if(l=l||g.operator===">"||g.operator===">=",u=u||g.operator==="<"||g.operator==="<=",s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator===">"||g.operator===">="){if(a=GB(s,g,r),a===g&&a!==s)return!1}else if(s.operator===">="&&!Cu(s.semver,String(g),r))return!1}if(i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(c=KB(i,g,r),c===g&&c!==i)return!1}else if(i.operator==="<="&&!Cu(i.semver,String(g),r))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||m||d)},GB=(e,t,r)=>{if(!e)return t;let n=Uw(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},KB=(e,t,r)=>{if(!e)return t;let n=Uw(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};XB.exports=Tpe});var eU=S((zOe,ZB)=>{"use strict";var Hw=Xo(),YB=Su(),xpe=Tt(),JB=Aw(),Ope=Ei(),Npe=R$(),Dpe=A$(),Lpe=P$(),kpe=N$(),Mpe=L$(),qpe=M$(),Fpe=F$(),$pe=B$(),Bpe=yr(),Upe=V$(),Hpe=W$(),jpe=dm(),Vpe=Q$(),zpe=J$(),Wpe=vu(),Gpe=fm(),Kpe=Pw(),Xpe=xw(),Qpe=pm(),Ype=hm(),Jpe=Ow(),Zpe=aB(),ehe=wu(),the=Sr(),rhe=Ru(),nhe=wB(),she=RB(),ihe=AB(),ohe=PB(),ahe=OB(),che=Em(),uhe=qB(),lhe=$B(),dhe=HB(),fhe=VB(),phe=QB();ZB.exports={parse:Ope,valid:Npe,clean:Dpe,inc:Lpe,diff:kpe,major:Mpe,minor:qpe,patch:Fpe,prerelease:$pe,compare:Bpe,rcompare:Upe,compareLoose:Hpe,compareBuild:jpe,sort:Vpe,rsort:zpe,gt:Wpe,lt:Gpe,eq:Kpe,neq:Xpe,gte:Qpe,lte:Ype,cmp:Jpe,coerce:Zpe,Comparator:ehe,Range:the,satisfies:rhe,toComparators:nhe,maxSatisfying:she,minSatisfying:ihe,minVersion:ohe,validRange:ahe,outside:che,gtr:uhe,ltr:lhe,intersects:dhe,simplifyRange:fhe,subset:phe,SemVer:xpe,re:Hw.re,src:Hw.src,tokens:Hw.t,SEMVER_SPEC_VERSION:YB.SEMVER_SPEC_VERSION,RELEASE_TYPES:YB.RELEASE_TYPES,compareIdentifiers:JB.compareIdentifiers,rcompareIdentifiers:JB.rcompareIdentifiers}});var Vw=S((WOe,jw)=>{"use strict";var hhe=eU(),mhe=Eu(),Qo=Is(),tU=Ct(),rU=Fe(),nU="2.7.15",ghe=function(){return!1},Ehe=function(t){if(!hhe.gte(t.VERSION,nU))throw new Error("AWS SDK version "+nU+" or greater required.");for(var r in t)if(t[r].serviceIdentifier){var n=t[r];n.prototype.customizeRequests(sU)}return t},yhe=function(t){return t.customizeRequests(sU),t};function sU(e){var t=Qo.resolveSegment(Qo.resolveManualSegmentParams(e.params));if(!t){var r=this.serviceIdentifier+"."+e.operation;return Qo.isAutomaticMode()?rU.getLogger().info("Call "+r+" is missing the sub/segment context for automatic mode. Ignoring."):rU.getLogger().info("Call "+r+' requires a segment object on the request params as "XRaySegment" for tracing in manual mode. Ignoring.'),e}var n=this.throttledError||ghe,s=new Error().stack;let i;t.notTraced?i=t.addNewSubsegmentWithoutSampling(this.serviceIdentifier):i=t.addNewSubsegment(this.serviceIdentifier);var o=t.segment?t.segment.trace_id:t.trace_id;let a=t.segment?t.segment.additionalTraceData:t.additionalTraceData;var c=function(l){if(t.noOp)return;let d="Root="+o+";Parent="+i.id+";Sampled="+(i.notTraced?"0":"1");if(a!=null)for(let[m,g]of Object.entries(a))d+=";"+m+"="+g;l.httpRequest.headers["X-Amzn-Trace-Id"]=d},u=function(l){i.addAttribute("namespace","aws"),i.addAttribute("aws",new mhe(l,i.name));var d=l.httpResponse;if(d&&(i.addAttribute("http",new iU(d)),(d.statusCode===429||l.error&&n(l.error))&&i.addThrottleFlag()),l.error){var m={message:l.error.message,name:l.error.code,stack:s};d&&d.statusCode?(tU.getCauseTypeFromHttpStatus(d.statusCode)=="error"&&i.addErrorFlag(),i.close(m,!0)):i.close(m)}else{if(d&&d.statusCode){var g=tU.getCauseTypeFromHttpStatus(d.statusCode);g&&(i[g]=!0)}i.close()}};e.on("beforePresign",function(l){t.removeSubsegment(i),t.decrementCounter(),l.removeListener("build",c),l.removeListener("complete",u)}),e.on("build",c).on("complete",u),e.__send||(e.__send=e.send,e.send=function(l){if(Qo.isAutomaticMode()){var d=Qo.getNamespace();d.run(function(){Qo.setSegment(i),e.__send(l)})}else e.__send(l)})}function iU(e){this.init(e)}iU.prototype.init=function(t){this.response={status:t.statusCode||""},t.headers&&t.headers["content-length"]&&(this.response.content_length=t.headers["content-length"])};jw.exports.captureAWSClient=yhe;jw.exports.captureAWS=Ehe});var lU=S((GOe,uU)=>{var ym=Object.defineProperty,She=Object.getOwnPropertyDescriptor,_he=Object.getOwnPropertyNames,vhe=Object.prototype.hasOwnProperty,Yo=(e,t)=>ym(e,"name",{value:t,configurable:!0}),whe=(e,t)=>{for(var r in t)ym(e,r,{get:t[r],enumerable:!0})},bhe=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of _he(t))!vhe.call(e,s)&&s!==r&&ym(e,s,{get:()=>t[s],enumerable:!(n=She(t,s))||n.enumerable});return e},Rhe=e=>bhe(ym({},"__esModule",{value:!0}),e),oU={};whe(oU,{isClockSkewCorrectedError:()=>aU,isClockSkewError:()=>Ohe,isRetryableByTrait:()=>xhe,isServerError:()=>Dhe,isThrottlingError:()=>Nhe,isTransientError:()=>cU});uU.exports=Rhe(oU);var Che=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Ahe=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],The=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ihe=[500,502,503,504],Phe=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],xhe=Yo(e=>e.$retryable!==void 0,"isRetryableByTrait"),Ohe=Yo(e=>Che.includes(e.name),"isClockSkewError"),aU=Yo(e=>{var t;return(t=e.$metadata)==null?void 0:t.clockSkewCorrected},"isClockSkewCorrectedError"),Nhe=Yo(e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Ahe.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),cU=Yo(e=>{var t;return aU(e)||The.includes(e.name)||Phe.includes(e?.code||"")||Ihe.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},"isTransientError"),Dhe=Yo(e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!cU(e)}return!1},"isServerError")});var gU=S(Jo=>{"use strict";var hU=Jo&&Jo.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Jo,"__esModule",{value:!0});Jo.captureAWSClient=void 0;var Lhe=lU(),khe=hU(Eu()),Mhe=require("querystring"),qhe=hU(fu()),zw=Is(),dU=Fe(),{safeParseInt:Sm}=Ct(),Fhe=Ct(),mU="XRaySDKInstrumentation",fU=async(e,t,r,n,s,i)=>{var o,a,c;let{extendedRequestId:u,requestId:l,httpStatusCode:d,attempts:m}=((o=s?.output)===null||o===void 0?void 0:o.$metadata)||i?.$metadata,g=new khe.default({extendedRequestId:u,requestId:l,retryCount:m,data:s?.output,request:{operation:t,params:n,httpRequest:{region:r,statusCode:d}}},e),y={};return d&&(y.response={},y.response.status=d),!((a=s?.response)===null||a===void 0)&&a.headers&&((c=s?.response)===null||c===void 0?void 0:c.headers["content-length"])!==void 0&&(y.response||(y.response={}),y.response.content_length=Sm(s.response.headers["content-length"])),[g,y]};function pU(e,t,r){var n,s,i;(r&&(0,Lhe.isThrottlingError)(r)||Sm((n=e.response)===null||n===void 0?void 0:n.status)===429||Sm((s=r?.$metadata)===null||s===void 0?void 0:s.httpStatusCode)===429)&&t.addThrottleFlag();let o=(0,Fhe.getCauseTypeFromHttpStatus)(Sm((i=e.response)===null||i===void 0?void 0:i.status));o==="fault"?t.addFaultFlag():o==="error"&&t.addErrorFlag()}var $he=(e,t)=>(r,n)=>async s=>{var i;let o=zw.isAutomaticMode()?zw.resolveSegment():t,{clientName:a,commandName:c}=n,u=(i=s?.input)!==null&&i!==void 0?i:{},l=c.slice(0,-7),d=l.charAt(0).toLowerCase()+l.slice(1),m=a.slice(0,-6);if(!o){let O=m+"."+d;return zw.isAutomaticMode()?dU.getLogger().info("Call "+O+" is missing the sub/segment context for automatic mode. Ignoring."):dU.getLogger().info("Call "+O+" requires a segment object passed to captureAWSv3Client for tracing in manual mode. Ignoring."),r(s)}let g;o.notTraced?g=o.addNewSubsegmentWithoutSampling(m):g=o.addNewSubsegment(m),g.addAttribute("namespace","aws");let y=o instanceof qhe.default?o.segment:o,w=y.segment?y.segment.additionalTraceData:y.additionalTraceData,I=(0,Mhe.stringify)({Root:y.trace_id,Parent:g.id,Sampled:g.notTraced?"0":"1"},";");if(w!=null)for(let[O,k]of Object.entries(w))I+=";"+O+"="+k;o.noOp||(s.request.headers["X-Amzn-Trace-Id"]=I);let A;try{if(A=await r(s),!A)throw new Error("Failed to get response from instrumented AWS Client.");let[O,k]=await fU(m,d,await e.region(),u,A,null);return g.addAttribute("aws",O),g.addAttribute("http",k),pU(k,g),g.close(),A}catch(O){if(O.$metadata){let[q,U]=await fU(m,d,await e.region(),u,null,O);g.addAttribute("aws",q),g.addAttribute("http",U),pU(U,g,O)}let k={message:O.message,name:O.name,stack:O.stack||new Error().stack};throw g.close(k,!0),O}},Bhe={name:mU,step:"build"},Uhe=(e,t)=>({applyToStack:r=>{r.add($he(e,t),Bhe)}});function Hhe(e,t){return e.middlewareStack.remove(mU),e.middlewareStack.use(Uhe(e.config,t)),e}Jo.captureAWSClient=Hhe});var Gw=S((XOe,Ww)=>{"use strict";var EU=require("url"),Zo=Is(),_m=Ct(),yU=Fe(),jhe=require("events"),Vhe=function(t,r,n){t.__request||SU(t,r,n)},zhe=function(t,r,n){if(t.__request)return t;var s={};return Object.keys(t).forEach(function(i){s[i]=t[i]}),SU(s,r,n),s};function SU(e,t,r){function n(o,...a){let c,u,l,d,m=a[0];if(typeof a[1]=="object"?(l=!0,d=typeof m=="string"?new EU.URL(m):m,c=a[1],u=a[2]):(l=!1,c=m,u=a[1]),!c||c.headers&&c.headers["X-Amzn-Trace-Id"])return o(...a);typeof c=="string"&&(c=new EU.URL(c)),l||(d=c);let g=Zo.resolveSegment(Zo.resolveManualSegmentParams(c)),y=c.hostname||c.host||d.hostname||d.host||"Unknown host";if(!g){let q="[ host: "+y;return q=c.method?q+", method: "+c.method:q,q+=", path: "+(d.pathname||_m.stripQueryStringFromPath(c.path))+" ]",Zo.isAutomaticMode()?yU.getLogger().info("Options for request "+q+" is missing the sub/segment context for automatic mode. Ignoring."):yU.getLogger().info("Options for request "+q+' requires a segment object on the options params as "XRaySegment" for tracing in manual mode. Ignoring.'),o(...a)}let w;g.notTraced?w=g.addNewSubsegmentWithoutSampling(y):w=g.addNewSubsegment(y);let I=g.segment?g.segment:g;w.namespace="remote",c.headers||(c.headers={}),g.noOp||(c.headers["X-Amzn-Trace-Id"]="Root="+I.trace_id+";Parent="+w.id+";Sampled="+(w.notTraced?"0":"1"));let A=function(U){if(r&&r(w,this,null,U),w.http&&w.http.response)_m.getCauseTypeFromHttpStatus(w.http.response.status)==="error"&&w.addErrorFlag(),w.close(U,!0);else{let ce=U.code!=="ECONNREFUSED";w.addRemoteRequestData(this,null,ce&&t),w.close(U)}},O=_m.objectWithoutProperties(c,["Segment"],!0),k=o(...l?[m,O]:[c],function(q){q.on("end",function(){r&&r(w,this.req,q),q.statusCode===429&&w.addThrottleFlag();let U=_m.getCauseTypeFromHttpStatus(q.statusCode);U&&(w[U]=!0),w.addRemoteRequestData(q.req,q,!!t),w.close()}),typeof u=="function"?Zo.isAutomaticMode()?Zo.getNamespace().run(function(){Zo.setSegment(w),u(q)}):u(q):q.req&&q.req.listenerCount("response")===0&&q.resume()});return k.on(jhe.errorMonitor||"error",A),k}e.__request=e.request;function s(...o){return n(e.__request,...o)}e.__get=e.get;function i(...o){return n(e.__get,...o)}Object.defineProperties(e,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:i,configurable:!0,enumerable:!0,writable:!0}})}Ww.exports.captureHTTPsGlobal=Vhe;Ww.exports.captureHTTPs=zhe});var bU=S((QOe,Kw)=>{"use strict";var Au=Is(),vm=Symbol("original then"),wm=Symbol("original catch");function vU(e){let t=e.prototype.then;t[vm]||(e.prototype.then=function(n,s){if(Au.isAutomaticMode()&&_U()){let i=Au.getNamespace();n=n&&i.bind(n),s=s&&i.bind(s)}return t.call(this,n,s)},e.prototype.then[vm]=t);let r=e.prototype.catch;r&&!r[wm]&&(e.prototype.catch=function(n){if(Au.isAutomaticMode()&&_U()){let s=Au.getNamespace();n=n&&s.bind(n)}return r.call(this,n)},e.prototype.catch[wm]=r)}function Whe(e){let t=e.prototype.then;t[vm]&&(e.prototype.then=t[vm]);let r=e.prototype.catch;r&&r[wm]&&(e.prototype.catch=r[wm])}function _U(){try{return Au.getSegment()}catch{return}}function wU(){vU(Promise)}function Ghe(){Whe(Promise)}wU.patchThirdPartyPromise=vU;Kw.exports.capturePromise=wU;Kw.exports.uncapturePromise=Ghe});var AU=S((YOe,CU)=>{"use strict";function RU(e,t,r,n,s){this.init(e,t,r,n,s)}RU.prototype.init=function(t,r,n,s,i){t&&(this.database_version=t),r&&(this.driver_version=r),i&&(this.preparation=i),this.url=s,this.user=n};CU.exports=RU});var PU=S((JOe,IU)=>{"use strict";var qn=Is(),Xw=Fe(),ea=Cs(),Khe=Ct(),Xhe=HF(),Iu={};try{Iu=jF()}catch(e){Xw.getLogger().debug("Failed to load SDK data:",e)}var Tu="unknown",TU={plugins:{EC2Plugin:YF(),ECSPlugin:ZF(),ElasticBeanstalkPlugin:t$()},config:function(e){var t={};e.forEach(function(r){r.getData(function(n){if(n)for(var s in n)t[s]=n[s]}),ea.setOrigin(r.originName),ea.setPluginData(t)})},setAWSWhitelist:Eu().setAWSWhitelist,appendAWSWhitelist:Eu().appendAWSWhitelist,setStreamingThreshold:ea.setStreamingThreshold,setLogger:Xw.setLogger,getLogger:Xw.getLogger,setDaemonAddress:Bh().setDaemonAddress,captureFunc:im().captureFunc,captureAsyncFunc:im().captureAsyncFunc,captureCallbackFunc:im().captureCallbackFunc,captureAWS:Vw().captureAWS,captureAWSClient:Vw().captureAWSClient,captureAWSv3Client:gU().captureAWSClient,captureHTTPs:Gw().captureHTTPs,captureHTTPsGlobal:Gw().captureHTTPsGlobal,capturePromise:bU().capturePromise,utils:Khe,database:{SqlData:AU()},middleware:hw(),getNamespace:qn.getNamespace,resolveSegment:qn.resolveSegment,resolveManualSegmentParams:qn.resolveManualSegmentParams,getSegment:qn.getSegment,setSegment:qn.setSegment,isAutomaticMode:qn.isAutomaticMode,enableAutomaticMode:qn.enableAutomaticMode,enableManualMode:qn.enableManualMode,setContextMissingStrategy:qn.setContextMissingStrategy,Segment:pu(),Subsegment:fu(),SegmentUtils:ea};TU.middleware.IncomingRequestData=nw(),function(){var e={runtime:process.release&&process.release.name?process.release.name:Tu,runtime_version:process.version,version:process.env.npm_package_version||Tu,name:process.env.npm_package_name||Tu},t={sdk:"X-Ray for Node.js",sdk_version:Iu.version?Iu.version:Tu,package:Iu.name?Iu.name:Tu};ea.setSDKData(t),ea.setServiceData(e),process.env.LAMBDA_TASK_ROOT&&Xhe.init()}();IU.exports=TU});var Qw=S((ZOe,xU)=>{"use strict";xU.exports=PU()});var eb=S(VU=>{"use strict";VU.parse=function(e,t){return new Zw(e,t).parse()};var Zw=class e{constructor(t,r){this.source=t,this.transform=r||gme,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var t=this.source[this.position++];return t==="\\"?{value:this.source[this.position++],escaped:!0}:{value:t,escaped:!1}}record(t){this.recorded.push(t)}newEntry(t){var r;(this.recorded.length>0||t)&&(r=this.recorded.join(""),r==="NULL"&&!t&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var t=this.nextCharacter();if(t.value==="=")break}}parse(t){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new e(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function gme(e){return e}});var tb=S((_Ne,zU)=>{var Eme=eb();zU.exports={create:function(e,t){return{parse:function(){return Eme.parse(e,t)}}}}});var KU=S((vNe,GU)=>{"use strict";var yme=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,Sme=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,_me=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,vme=/^-?infinity$/;GU.exports=function(t){if(vme.test(t))return Number(t.replace("i","I"));var r=yme.exec(t);if(!r)return wme(t)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=WU(s));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var d,m=bme(t);return m!=null?(d=new Date(Date.UTC(s,i,o,a,c,u,l)),rb(s)&&d.setUTCFullYear(s),m!==0&&d.setTime(d.getTime()-m)):(d=new Date(s,i,o,a,c,u,l),rb(s)&&d.setFullYear(s)),d};function wme(e){var t=Sme.exec(e);if(t){var r=parseInt(t[1],10),n=!!t[4];n&&(r=WU(r));var s=parseInt(t[2],10)-1,i=t[3],o=new Date(r,s,i);return rb(r)&&o.setFullYear(r),o}}function bme(e){if(e.endsWith("+00"))return 0;var t=_me.exec(e.split(" ")[1]);if(t){var r=t[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(t[2],10)*3600+parseInt(t[3]||0,10)*60+parseInt(t[4]||0,10);return s*n*1e3}}function WU(e){return-(e-1)}function rb(e){return e>=0&&e<100}});var QU=S((wNe,XU)=>{XU.exports=Cme;var Rme=Object.prototype.hasOwnProperty;function Cme(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Rme.call(r,n)&&(e[n]=r[n])}return e}});var ZU=S((bNe,JU)=>{"use strict";var Ame=QU();JU.exports=ta;function ta(e){if(!(this instanceof ta))return new ta(e);Ame(this,Fme(e))}var Tme=["seconds","minutes","hours","days","months","years"];ta.prototype.toPostgres=function(){var e=Tme.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),e.length===0?"0":e.map(function(t){var r=this[t]||0;return t==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+t},this).join(" ")};var Ime={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},Pme=["years","months","days"],xme=["hours","minutes","seconds"];ta.prototype.toISOString=ta.prototype.toISO=function(){var e=Pme.map(r,this).join(""),t=xme.map(r,this).join("");return"P"+e+"T"+t;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+Ime[n]}};var nb="([+-]?\\d+)",Ome=nb+"\\s+years?",Nme=nb+"\\s+mons?",Dme=nb+"\\s+days?",Lme="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",kme=new RegExp([Ome,Nme,Dme,Lme].map(function(e){return"("+e+")?"}).join("\\s*")),YU={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},Mme=["hours","minutes","seconds","milliseconds"];function qme(e){var t=e+"000000".slice(e.length);return parseInt(t,10)/1e3}function Fme(e){if(!e)return{};var t=kme.exec(e),r=t[8]==="-";return Object.keys(YU).reduce(function(n,s){var i=YU[s],o=t[i];return!o||(o=s==="milliseconds"?qme(o):parseInt(o,10),!o)||(r&&~Mme.indexOf(s)&&(o*=-1),n[s]=o),n},{})}});var t2=S((RNe,e2)=>{"use strict";e2.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),"hex");for(var r="",n=0;n<t.length;)if(t[n]!=="\\")r+=t[n],++n;else if(/[0-7]{3}/.test(t.substr(n+1,3)))r+=String.fromCharCode(parseInt(t.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<t.length&&t[n+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var c2=S((CNe,a2)=>{var Ou=eb(),Nu=tb(),Im=KU(),n2=ZU(),s2=t2();function Pm(e){return function(r){return r===null?r:e(r)}}function i2(e){return e===null?e:e==="TRUE"||e==="t"||e==="true"||e==="y"||e==="yes"||e==="on"||e==="1"}function $me(e){return e?Ou.parse(e,i2):null}function Bme(e){return parseInt(e,10)}function sb(e){return e?Ou.parse(e,Pm(Bme)):null}function Ume(e){return e?Ou.parse(e,Pm(function(t){return o2(t).trim()})):null}var Hme=function(e){if(!e)return null;var t=Nu.create(e,function(r){return r!==null&&(r=cb(r)),r});return t.parse()},ib=function(e){if(!e)return null;var t=Nu.create(e,function(r){return r!==null&&(r=parseFloat(r)),r});return t.parse()},_r=function(e){if(!e)return null;var t=Nu.create(e);return t.parse()},ob=function(e){if(!e)return null;var t=Nu.create(e,function(r){return r!==null&&(r=Im(r)),r});return t.parse()},jme=function(e){if(!e)return null;var t=Nu.create(e,function(r){return r!==null&&(r=n2(r)),r});return t.parse()},Vme=function(e){return e?Ou.parse(e,Pm(s2)):null},ab=function(e){return parseInt(e,10)},o2=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},r2=function(e){return e?Ou.parse(e,Pm(JSON.parse)):null},cb=function(e){return e[0]!=="("?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},zme=function(e){if(e[0]!=="<"&&e[1]!=="(")return null;for(var t="(",r="",n=!1,s=2;s<e.length-1;s++){if(n||(t+=e[s]),e[s]===")"){n=!0;continue}else if(!n)continue;e[s]!==","&&(r+=e[s])}var i=cb(t);return i.radius=parseFloat(r),i},Wme=function(e){e(20,o2),e(21,ab),e(23,ab),e(26,ab),e(700,parseFloat),e(701,parseFloat),e(16,i2),e(1082,Im),e(1114,Im),e(1184,Im),e(600,cb),e(651,_r),e(718,zme),e(1e3,$me),e(1001,Vme),e(1005,sb),e(1007,sb),e(1028,sb),e(1016,Ume),e(1017,Hme),e(1021,ib),e(1022,ib),e(1231,ib),e(1014,_r),e(1015,_r),e(1008,_r),e(1009,_r),e(1040,_r),e(1041,_r),e(1115,ob),e(1182,ob),e(1185,ob),e(1186,n2),e(1187,jme),e(17,s2),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,r2),e(3807,r2),e(3907,_r),e(2951,_r),e(791,_r),e(1183,_r),e(1270,_r)};a2.exports={init:Wme}});var l2=S((ANe,u2)=>{"use strict";var Yt=1e6;function Gme(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),n="";t<0&&(t=~t+(r===0),r=~r+1>>>0,n="-");var s="",i,o,a,c,u,l;{if(i=t%Yt,t=t/Yt>>>0,o=4294967296*i+r,r=o/Yt>>>0,a=""+(o-Yt*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=t%Yt,t=t/Yt>>>0,o=4294967296*i+r,r=o/Yt>>>0,a=""+(o-Yt*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=t%Yt,t=t/Yt>>>0,o=4294967296*i+r,r=o/Yt>>>0,a=""+(o-Yt*r),r===0&&t===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return i=t%Yt,o=4294967296*i+r,a=""+o%Yt,n+a+s}u2.exports=Gme});var m2=S((TNe,h2)=>{var Kme=l2(),je=function(e,t,r,n,s){r=r||0,n=n||!1,s=s||function(g,y,w){return g*Math.pow(2,w)+y};var i=r>>3,o=function(g){return n?~g&255:g},a=255,c=8-r%8;t<c&&(a=255<<8-t&255,c=t),r&&(a=a>>r%8);var u=0;r%8+t>=8&&(u=s(0,o(e[i])&a,c));for(var l=t+r>>3,d=i+1;d<l;d++)u=s(u,o(e[d]),8);var m=(t+r)%8;return m>0&&(u=s(u,o(e[l])>>8-m,m)),u},p2=function(e,t,r){var n=Math.pow(2,r-1)-1,s=je(e,1),i=je(e,r,1);if(i===0)return 0;var o=1,a=function(u,l,d){u===0&&(u=1);for(var m=1;m<=d;m++)o/=2,(l&1<<d-m)>0&&(u+=o);return u},c=je(e,t,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,i-n)*c},Xme=function(e){return je(e,1)==1?-1*(je(e,15,1,!0)+1):je(e,15,1)},d2=function(e){return je(e,1)==1?-1*(je(e,31,1,!0)+1):je(e,31,1)},Qme=function(e){return p2(e,23,8)},Yme=function(e){return p2(e,52,11)},Jme=function(e){var t=je(e,16,32);if(t==49152)return NaN;for(var r=Math.pow(1e4,je(e,16,16)),n=0,s=[],i=je(e,16),o=0;o<i;o++)n+=je(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,je(e,16,48));return(t===0?1:-1)*Math.round(n*a)/a},f2=function(e,t){var r=je(t,1),n=je(t,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return e||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(i){this.usec=i},s.getUTCMicroSeconds=function(){return this.usec},s},Du=function(e){for(var t=je(e,32),r=je(e,32,32),n=je(e,32,64),s=96,i=[],o=0;o<t;o++)i[o]=je(e,32,s),s+=32,s+=32;var a=function(u){var l=je(e,32,s);if(s+=32,l==4294967295)return null;var d;if(u==23||u==20)return d=je(e,l*8,s),s+=l*8,d;if(u==25)return d=e.toString(this.encoding,s>>3,(s+=l<<3)>>3),d;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var d=[],m;if(u.length>1){var g=u.shift();for(m=0;m<g;m++)d[m]=c(u,l);u.unshift(g)}else for(m=0;m<u[0];m++)d[m]=a(l);return d};return c(i,n)},Zme=function(e){return e.toString("utf8")},ege=function(e){return e===null?null:je(e,8)>0},tge=function(e){e(20,Kme),e(21,Xme),e(23,d2),e(26,d2),e(1700,Jme),e(700,Qme),e(701,Yme),e(16,ege),e(1114,f2.bind(null,!1)),e(1184,f2.bind(null,!0)),e(1e3,Du),e(1007,Du),e(1016,Du),e(1008,Du),e(1009,Du),e(25,Zme)};h2.exports={init:tge}});var E2=S((INe,g2)=>{g2.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Mu=S(ku=>{var rge=c2(),nge=m2(),sge=tb(),ige=E2();ku.getTypeParser=oge;ku.setTypeParser=age;ku.arrayParser=sge;ku.builtins=ige;var Lu={text:{},binary:{}};function y2(e){return String(e)}function oge(e,t){return t=t||"text",Lu[t]&&Lu[t][e]||y2}function age(e,t,r){typeof t=="function"&&(r=t,t="text"),Lu[t][e]=r}rge.init(function(e,t){Lu.text[e]=t});nge.init(function(e,t){Lu.binary[e]=t})});var qu=S((xNe,ub)=>{"use strict";ub.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var ra=Mu(),cge=ra.getTypeParser(20,"text"),uge=ra.getTypeParser(1016,"text");ub.exports.__defineSetter__("parseInt8",function(e){ra.setTypeParser(20,"text",e?ra.getTypeParser(23,"text"):cge),ra.setTypeParser(1016,"text",e?ra.getTypeParser(1007,"text"):uge)})});var na=S((ONe,v2)=>{"use strict";var lge=qu(),S2=require("util"),{isDate:dge}=S2.types||S2;function fge(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function _2(e){let t="{";for(let r=0;r<e.length;r++)if(r>0&&(t=t+","),e[r]===null||typeof e[r]>"u")t=t+"NULL";else if(Array.isArray(e[r]))t=t+_2(e[r]);else if(ArrayBuffer.isView(e[r])){let n=e[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}t+="\\\\x"+n.toString("hex")}else t+=fge(xm(e[r]));return t=t+"}",t}var xm=function(e,t){if(e==null)return null;if(typeof e=="object"){if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){let r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return dge(e)?lge.parseInputDatesAsUTC?mge(e):hge(e):Array.isArray(e)?_2(e):pge(e,t)}return e.toString()};function pge(e,t){if(e&&typeof e.toPostgres=="function"){if(t=t||[],t.indexOf(e)!==-1)throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),xm(e.toPostgres(xm),t)}return JSON.stringify(e)}function hge(e){let t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+String(e.getMilliseconds()).padStart(3,"0");return t<0?(s+="-",t*=-1):s+="+",s+=String(Math.floor(t/60)).padStart(2,"0")+":"+String(t%60).padStart(2,"0"),n&&(s+=" BC"),s}function mge(e){let t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);let n=String(t).padStart(4,"0")+"-"+String(e.getUTCMonth()+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")+"T"+String(e.getUTCHours()).padStart(2,"0")+":"+String(e.getUTCMinutes()).padStart(2,"0")+":"+String(e.getUTCSeconds()).padStart(2,"0")+"."+String(e.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function gge(e,t,r){return e=typeof e=="string"?{text:e}:e,t&&(typeof t=="function"?e.callback=t:e.values=t),r&&(e.callback=r),e}var Ege=function(e){return'"'+e.replace(/"/g,'""')+'"'},yge=function(e){let t=!1,r="'";if(e==null||typeof e!="string")return"''";for(let n=0;n<e.length;n++){let s=e[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,t=!0):r+=s}return r+="'",t===!0&&(r=" E"+r),r};v2.exports={prepareValue:function(t){return xm(t)},normalizeQueryConfig:gge,escapeIdentifier:Ege,escapeLiteral:yge}});var b2=S((NNe,w2)=>{"use strict";var sa=require("crypto");function lb(e){return sa.createHash("md5").update(e,"utf-8").digest("hex")}function Sge(e,t,r){let n=lb(t+e);return"md5"+lb(Buffer.concat([Buffer.from(n),r]))}function _ge(e){return sa.createHash("sha256").update(e).digest()}function vge(e,t){return e=e.replace(/(\D)-/,"$1"),sa.createHash(e).update(t).digest()}function wge(e,t){return sa.createHmac("sha256",e).update(t).digest()}async function bge(e,t,r){return sa.pbkdf2Sync(e,t,r,32,"sha256")}w2.exports={postgresMd5PasswordHash:Sge,randomBytes:sa.randomBytes,deriveKey:bge,sha256:_ge,hashByName:vge,hmacSha256:wge,md5:lb}});var T2=S((DNe,A2)=>{var R2=require("crypto");A2.exports={postgresMd5PasswordHash:Cge,randomBytes:Rge,deriveKey:Pge,sha256:Age,hashByName:Tge,hmacSha256:Ige,md5:db};var C2=R2.webcrypto||globalThis.crypto,Si=C2.subtle,fb=new TextEncoder;function Rge(e){return C2.getRandomValues(Buffer.alloc(e))}async function db(e){try{return R2.createHash("md5").update(e,"utf-8").digest("hex")}catch{let r=typeof e=="string"?fb.encode(e):e,n=await Si.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function Cge(e,t,r){let n=await db(t+e);return"md5"+await db(Buffer.concat([Buffer.from(n),r]))}async function Age(e){return await Si.digest("SHA-256",e)}async function Tge(e,t){return await Si.digest(e,t)}async function Ige(e,t){let r=await Si.importKey("raw",e,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await Si.sign("HMAC",r,fb.encode(t))}async function Pge(e,t,r){let n=await Si.importKey("raw",fb.encode(e),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:t,iterations:r};return await Si.deriveBits(s,n,32*8,["deriveBits"])}});var hb=S((LNe,pb)=>{"use strict";var xge=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;xge?pb.exports=b2():pb.exports=T2()});var x2=S((kNe,P2)=>{function _i(e,t){return new Error("SASL channel binding: "+e+" when parsing public certificate "+t.toString("base64"))}function mb(e,t){let r=e[t++];if(r<128)return{length:r,index:t};let n=r&127;if(n>4)throw _i("bad length",e);r=0;for(let s=0;s<n;s++)r=r<<8|e[t++];return{length:r,index:t}}function I2(e,t){if(e[t++]!==6)throw _i("non-OID data",e);let{length:r,index:n}=mb(e,t);t=n;let s=t+r,i=e[t++],o=(i/40>>0)+"."+i%40;for(;t<s;){let a=0;for(;t<s;){let c=e[t++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:t}}function Fu(e,t){if(e[t++]!==48)throw _i("non-sequence data",e);return mb(e,t)}function Oge(e,t){t===void 0&&(t=0),t=Fu(e,t).index;let{length:r,index:n}=Fu(e,t);t=n+r,t=Fu(e,t).index;let{oid:s,index:i}=I2(e,t);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(t=i,t=Fu(e,t).index,e[t++]!==160)throw _i("non-tag data",e);t=mb(e,t).index,t=Fu(e,t).index;let{oid:o}=I2(e,t);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw _i("unknown hash OID "+o,e)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw _i("Ed448 certificate channel binding is not currently supported by Postgres")}throw _i("unknown OID "+s,e)}P2.exports={signatureAlgorithmHashFromCertificate:Oge}});var L2=S((MNe,D2)=>{"use strict";var Ps=hb(),{signatureAlgorithmHashFromCertificate:Nge}=x2();function Dge(e,t){let r=["SCRAM-SHA-256"];t&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>e.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof t.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=Ps.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":t?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function Lge(e,t,r,n){if(e.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(t==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=qge(r);if(s.nonce.startsWith(e.clientNonce)){if(s.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+e.clientNonce,o="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(e.mechanism==="SCRAM-SHA-256-PLUS"){let O=n.getPeerCertificate().raw,k=Nge(O);(k==="MD5"||k==="SHA-1")&&(k="SHA-256");let q=await Ps.hashByName(k,O);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(q)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=i+","+o+","+c,l=Buffer.from(s.salt,"base64"),d=await Ps.deriveKey(t,l,s.iteration),m=await Ps.hmacSha256(d,"Client Key"),g=await Ps.sha256(m),y=await Ps.hmacSha256(g,u),w=$ge(Buffer.from(m),Buffer.from(y)).toString("base64"),I=await Ps.hmacSha256(d,"Server Key"),A=await Ps.hmacSha256(I,u);e.message="SASLResponse",e.serverSignature=Buffer.from(A).toString("base64"),e.response=c+",p="+w}function kge(e,t){if(e.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof t!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=Fge(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function Mge(e){if(typeof e!="string")throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(t=>t>=33&&t<=43||t>=45&&t<=126)}function O2(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function N2(e){if(typeof e!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(t=>{if(!/^.=/.test(t))throw new Error("SASL: Invalid attribute pair entry");let r=t[0],n=t.substring(2);return[r,n]}))}function qge(e){let t=N2(e),r=t.get("r");if(r){if(!Mge(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=t.get("s");if(n){if(!O2(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=t.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(s,10);return{nonce:r,salt:n,iteration:i}}function Fge(e){let r=N2(e).get("v");if(r){if(!O2(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function $ge(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(e.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,n)=>e[n]^t[n]))}D2.exports={startSession:Dge,continueSession:Lge,finalizeSession:kge}});var Nm=S((qNe,k2)=>{"use strict";var Bge=Mu();function Om(e){this._types=e||Bge,this.text={},this.binary={}}Om.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}};Om.prototype.setTypeParser=function(e,t,r){typeof t=="function"&&(r=t,t="text"),this.getOverrides(t)[e]=r};Om.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)};k2.exports=Om});var F2=S((FNe,q2)=>{"use strict";function ia(e,t={}){if(e.charAt(0)==="/"){let c=e.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)&&(e=encodeURI(e).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(e,"postgres://base")}catch{n=new URL(e.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let i=s?"":n.hostname;r.host?i&&/^%2f/i.test(i)&&(n.pathname=i+n.pathname):r.host=decodeURIComponent(i),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),t.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||t.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function Uge(e){return Object.entries(e).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function M2(e){return Object.entries(e).reduce((r,[n,s])=>{if(n==="ssl"){let i=s;typeof i=="boolean"&&(r[n]=i),typeof i=="object"&&(r[n]=Uge(i))}else if(s!=null)if(n==="port"){if(s!==""){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid ${n}: ${s}`);r[n]=i}}else r[n]=s;return r},{})}function Hge(e){return M2(ia(e))}q2.exports=ia;ia.parse=ia;ia.toClientConfig=M2;ia.parseIntoClientConfig=Hge});var Eb=S(($Ne,U2)=>{"use strict";var jge=require("dns"),B2=qu(),$2=F2().parse,Ht=function(e,t,r){return r===void 0?r=process.env["PG"+e.toUpperCase()]:r===!1||(r=process.env[r]),t[e]||r||B2[e]},Vge=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return B2.ssl},oa=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},vr=function(e,t,r){let n=t[r];n!=null&&e.push(r+"="+oa(n))},gb=class{constructor(t){t=typeof t=="string"?$2(t):t||{},t.connectionString&&(t=Object.assign({},t,$2(t.connectionString))),this.user=Ht("user",t),this.database=Ht("database",t),this.database===void 0&&(this.database=this.user),this.port=parseInt(Ht("port",t),10),this.host=Ht("host",t),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:Ht("password",t)}),this.binary=Ht("binary",t),this.options=Ht("options",t),this.ssl=typeof t.ssl>"u"?Vge():t.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=Ht("client_encoding",t),this.replication=Ht("replication",t),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=Ht("application_name",t,"PGAPPNAME"),this.fallback_application_name=Ht("fallback_application_name",t,!1),this.statement_timeout=Ht("statement_timeout",t,!1),this.lock_timeout=Ht("lock_timeout",t,!1),this.idle_in_transaction_session_timeout=Ht("idle_in_transaction_session_timeout",t,!1),this.query_timeout=Ht("query_timeout",t,!1),t.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),t.keepAlive===!1?this.keepalives=0:t.keepAlive===!0&&(this.keepalives=1),typeof t.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(t){let r=[];vr(r,this,"user"),vr(r,this,"password"),vr(r,this,"port"),vr(r,this,"application_name"),vr(r,this,"fallback_application_name"),vr(r,this,"connect_timeout"),vr(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(vr(r,n,"sslmode"),vr(r,n,"sslca"),vr(r,n,"sslkey"),vr(r,n,"sslcert"),vr(r,n,"sslrootcert"),this.database&&r.push("dbname="+oa(this.database)),this.replication&&r.push("replication="+oa(this.replication)),this.host&&r.push("host="+oa(this.host)),this.isDomainSocket)return t(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+oa(this.client_encoding)),jge.lookup(this.host,function(s,i){return s?t(s,null):(r.push("hostaddr="+oa(i)),t(null,r.join(" ")))})}};U2.exports=gb});var Sb=S((BNe,j2)=>{"use strict";var zge=Mu(),H2=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,yb=class{constructor(t,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=t==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){let r;t.text?r=H2.exec(t.text):r=H2.exec(t.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(t){let r=new Array(t.length);for(let n=0,s=t.length;n<s;n++){let i=t[n];i!==null?r[n]=this._parsers[n](i):r[n]=null}return r}parseRow(t){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=t.length;n<s;n++){let i=t[n],o=this.fields[n].name;if(i!==null){let a=this.fields[n].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(t){this.rows.push(t)}addFields(t){this.fields=t,this.fields.length&&(this._parsers=new Array(t.length));let r={};for(let n=0;n<t.length;n++){let s=t[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=zge.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};j2.exports=yb});var G2=S((UNe,W2)=>{"use strict";var{EventEmitter:Wge}=require("events"),V2=Sb(),z2=na(),_b=class extends Wge{constructor(t,r,n){super(),t=z2.normalizeQueryConfig(t,r,n),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||"",this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new V2(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new V2(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(t){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(t.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(t,r){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&r.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,r){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit("error",t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(t){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=t.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,r){t.execute({portal:this.portal,rows:r}),r?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:z2.prepareValue})}catch(r){this.handleError(r,t);return}t.describe({type:"P",name:this.portal||""}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail("No source stream defined")}handleCopyData(t,r){}};W2.exports=_b});var kb=S(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.NoticeMessage=X.DataRowMessage=X.CommandCompleteMessage=X.ReadyForQueryMessage=X.NotificationResponseMessage=X.BackendKeyDataMessage=X.AuthenticationMD5Password=X.ParameterStatusMessage=X.ParameterDescriptionMessage=X.RowDescriptionMessage=X.Field=X.CopyResponse=X.CopyDataMessage=X.DatabaseError=X.copyDone=X.emptyQuery=X.replicationStart=X.portalSuspended=X.noData=X.closeComplete=X.bindComplete=X.parseComplete=void 0;X.parseComplete={name:"parseComplete",length:5};X.bindComplete={name:"bindComplete",length:5};X.closeComplete={name:"closeComplete",length:5};X.noData={name:"noData",length:5};X.portalSuspended={name:"portalSuspended",length:5};X.replicationStart={name:"replicationStart",length:4};X.emptyQuery={name:"emptyQuery",length:4};X.copyDone={name:"copyDone",length:4};var vb=class extends Error{constructor(t,r,n){super(t),this.length=r,this.name=n}};X.DatabaseError=vb;var wb=class{constructor(t,r){this.length=t,this.chunk=r,this.name="copyData"}};X.CopyDataMessage=wb;var bb=class{constructor(t,r,n,s){this.length=t,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};X.CopyResponse=bb;var Rb=class{constructor(t,r,n,s,i,o,a){this.name=t,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};X.Field=Rb;var Cb=class{constructor(t,r){this.length=t,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};X.RowDescriptionMessage=Cb;var Ab=class{constructor(t,r){this.length=t,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};X.ParameterDescriptionMessage=Ab;var Tb=class{constructor(t,r,n){this.length=t,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};X.ParameterStatusMessage=Tb;var Ib=class{constructor(t,r){this.length=t,this.salt=r,this.name="authenticationMD5Password"}};X.AuthenticationMD5Password=Ib;var Pb=class{constructor(t,r,n){this.length=t,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};X.BackendKeyDataMessage=Pb;var xb=class{constructor(t,r,n,s){this.length=t,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};X.NotificationResponseMessage=xb;var Ob=class{constructor(t,r){this.length=t,this.status=r,this.name="readyForQuery"}};X.ReadyForQueryMessage=Ob;var Nb=class{constructor(t,r){this.length=t,this.text=r,this.name="commandComplete"}};X.CommandCompleteMessage=Nb;var Db=class{constructor(t,r){this.length=t,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};X.DataRowMessage=Db;var Lb=class{constructor(t,r){this.length=t,this.message=r,this.name="notice"}};X.NoticeMessage=Lb});var K2=S(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.Writer=void 0;var Mb=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){let n=this.buffer,s=n.length+(n.length>>1)+t;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(!t)this.ensure(1);else{let r=Buffer.byteLength(t);this.ensure(r+1),this.buffer.write(t,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(t=""){let r=Buffer.byteLength(t);return this.ensure(r),this.buffer.write(t,this.offset),this.offset+=r,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){let r=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Dm.Writer=Mb});var Q2=S(km=>{"use strict";Object.defineProperty(km,"__esModule",{value:!0});km.serialize=void 0;var qb=K2(),$e=new qb.Writer,Gge=e=>{$e.addInt16(3).addInt16(0);for(let n of Object.keys(e))$e.addCString(n).addCString(e[n]);$e.addCString("client_encoding").addCString("UTF8");let t=$e.addCString("").flush(),r=t.length+4;return new qb.Writer().addInt32(r).add(t).flush()},Kge=()=>{let e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},Xge=e=>$e.addCString(e).flush(112),Qge=function(e,t){return $e.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),$e.flush(112)},Yge=function(e){return $e.addString(e).flush(112)},Jge=e=>$e.addCString(e).flush(81),X2=[],Zge=e=>{let t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));let r=e.types||X2,n=r.length,s=$e.addCString(t).addCString(e.text).addInt16(n);for(let i=0;i<n;i++)s.addInt32(r[i]);return $e.flush(80)},aa=new qb.Writer,eEe=function(e,t){for(let r=0;r<e.length;r++){let n=t?t(e[r],r):e[r];n==null?($e.addInt16(0),aa.addInt32(-1)):n instanceof Buffer?($e.addInt16(1),aa.addInt32(n.length),aa.add(n)):($e.addInt16(0),aa.addInt32(Buffer.byteLength(n)),aa.addString(n))}},tEe=(e={})=>{let t=e.portal||"",r=e.statement||"",n=e.binary||!1,s=e.values||X2,i=s.length;return $e.addCString(t).addCString(r),$e.addInt16(i),eEe(s,e.valueMapper),$e.addInt16(i),$e.add(aa.flush()),$e.addInt16(1),$e.addInt16(n?1:0),$e.flush(66)},rEe=Buffer.from([69,0,0,0,9,0,0,0,0,0]),nEe=e=>{if(!e||!e.portal&&!e.rows)return rEe;let t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(t,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},sEe=(e,t)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r},Fb=(e,t)=>{let n=4+Buffer.byteLength(t)+1,s=Buffer.allocUnsafe(1+n);return s[0]=e,s.writeInt32BE(n,1),s.write(t,5,"utf-8"),s[n]=0,s},iEe=$e.addCString("P").flush(68),oEe=$e.addCString("S").flush(68),aEe=e=>e.name?Fb(68,`${e.type}${e.name||""}`):e.type==="P"?iEe:oEe,cEe=e=>{let t=`${e.type}${e.name||""}`;return Fb(67,t)},uEe=e=>$e.add(e).flush(100),lEe=e=>Fb(102,e),Lm=e=>Buffer.from([e,0,0,0,4]),dEe=Lm(72),fEe=Lm(83),pEe=Lm(88),hEe=Lm(99),mEe={startup:Gge,password:Xge,requestSsl:Kge,sendSASLInitialResponseMessage:Qge,sendSCRAMClientFinalMessage:Yge,query:Jge,parse:Zge,bind:tEe,execute:nEe,describe:aEe,close:cEe,flush:()=>dEe,sync:()=>fEe,end:()=>pEe,copyData:uEe,copyDone:()=>hEe,copyFail:lEe,cancel:sEe};km.serialize=mEe});var Y2=S(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.BufferReader=void 0;var gEe=Buffer.allocUnsafe(0),$b=class{constructor(t=0){this.offset=t,this.buffer=gEe,this.encoding="utf-8"}setBuffer(t,r){this.offset=t,this.buffer=r}int16(){let t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){let t=this.buffer[this.offset];return this.offset++,t}int32(){let t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){let t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){let r=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,r}cstring(){let t=this.offset,r=t;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,t,r-1)}bytes(t){let r=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}};Mm.BufferReader=$b});var eH=S(qm=>{"use strict";Object.defineProperty(qm,"__esModule",{value:!0});qm.Parser=void 0;var Ve=kb(),EEe=Y2(),Bb=1,yEe=4,J2=Bb+yEe,Z2=Buffer.allocUnsafe(0),Ub=class{constructor(t){if(this.buffer=Z2,this.bufferLength=0,this.bufferOffset=0,this.reader=new EEe.BufferReader,t?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=t?.mode||"text"}parse(t,r){this.mergeBuffer(t);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+J2<=n;){let i=this.buffer[s],o=this.buffer.readUInt32BE(s+Bb),a=Bb+o;if(a+s<=n){let c=this.handlePacket(s+J2,i,o,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=Z2,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(t){if(this.bufferLength>0){let r=this.bufferLength+t.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;s=Buffer.allocUnsafe(i)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(t,r,n,s){switch(r){case 50:return Ve.bindComplete;case 49:return Ve.parseComplete;case 51:return Ve.closeComplete;case 110:return Ve.noData;case 115:return Ve.portalSuspended;case 99:return Ve.copyDone;case 87:return Ve.replicationStart;case 73:return Ve.emptyQuery;case 68:return this.parseDataRowMessage(t,n,s);case 67:return this.parseCommandCompleteMessage(t,n,s);case 90:return this.parseReadyForQueryMessage(t,n,s);case 65:return this.parseNotificationMessage(t,n,s);case 82:return this.parseAuthenticationResponse(t,n,s);case 83:return this.parseParameterStatusMessage(t,n,s);case 75:return this.parseBackendKeyData(t,n,s);case 69:return this.parseErrorMessage(t,n,s,"error");case 78:return this.parseErrorMessage(t,n,s,"notice");case 84:return this.parseRowDescriptionMessage(t,n,s);case 116:return this.parseParameterDescriptionMessage(t,n,s);case 71:return this.parseCopyInMessage(t,n,s);case 72:return this.parseCopyOutMessage(t,n,s);case 100:return this.parseCopyData(t,n,s);default:return new Ve.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.string(1);return new Ve.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.cstring();return new Ve.CommandCompleteMessage(r,s)}parseCopyData(t,r,n){let s=n.slice(t,t+(r-4));return new Ve.CopyDataMessage(r,s)}parseCopyInMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyInResponse")}parseCopyOutMessage(t,r,n){return this.parseCopyMessage(t,r,n,"copyOutResponse")}parseCopyMessage(t,r,n,s){this.reader.setBuffer(t,n);let i=this.reader.byte()!==0,o=this.reader.int16(),a=new Ve.CopyResponse(r,s,i,o);for(let c=0;c<o;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new Ve.NotificationResponseMessage(r,s,i,o)}parseRowDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),i=new Ve.RowDescriptionMessage(r,s);for(let o=0;o<s;o++)i.fields[o]=this.parseField();return i}parseField(){let t=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),i=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ve.Field(t,r,n,s,i,o,a)}parseParameterDescriptionMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),i=new Ve.ParameterDescriptionMessage(r,s);for(let o=0;o<s;o++)i.dataTypeIDs[o]=this.reader.int32();return i}parseDataRowMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int16(),i=new Array(s);for(let o=0;o<s;o++){let a=this.reader.int32();i[o]=a===-1?null:this.reader.string(a)}return new Ve.DataRowMessage(r,i)}parseParameterStatusMessage(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.cstring(),i=this.reader.cstring();return new Ve.ParameterStatusMessage(r,s,i)}parseBackendKeyData(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),i=this.reader.int32();return new Ve.BackendKeyDataMessage(r,s,i)}parseAuthenticationResponse(t,r,n){this.reader.setBuffer(t,n);let s=this.reader.int32(),i={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new Ve.AuthenticationMD5Password(r,o)}break;case 10:{i.name="authenticationSASL",i.mechanisms=[];let o;do o=this.reader.cstring(),o&&i.mechanisms.push(o);while(o)}break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return i}parseErrorMessage(t,r,n,s){this.reader.setBuffer(t,n);let i={},o=this.reader.string(1);for(;o!=="\0";)i[o]=this.reader.cstring(),o=this.reader.string(1);let a=i.M,c=s==="notice"?new Ve.NoticeMessage(r,a):new Ve.DatabaseError(a,r,s);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};qm.Parser=Ub});var Hb=S(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.DatabaseError=xs.serialize=xs.parse=void 0;var SEe=kb();Object.defineProperty(xs,"DatabaseError",{enumerable:!0,get:function(){return SEe.DatabaseError}});var _Ee=Q2();Object.defineProperty(xs,"serialize",{enumerable:!0,get:function(){return _Ee.serialize}});var vEe=eH();function wEe(e,t){let r=new vEe.Parser;return e.on("data",n=>r.parse(n,t)),new Promise(n=>e.on("end",()=>n()))}xs.parse=wEe});var tH=S(jb=>{"use strict";Object.defineProperty(jb,"__esModule",{value:!0});jb.default={}});var nH=S((XNe,rH)=>{var{getStream:bEe,getSecureStream:REe}=IEe();rH.exports={getStream:bEe,getSecureStream:REe};function CEe(){function e(r){let n=require("net");return new n.Socket}function t(r){return require("tls").connect(r)}return{getStream:e,getSecureStream:t}}function AEe(){function e(r){let{CloudflareSocket:n}=tH();return new n(r)}function t(r){return r.socket.startTls(r),r.socket}return{getStream:e,getSecureStream:t}}function TEe(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let e=new Response(null,{cf:{thing:!0}});if(typeof e.cf=="object"&&e.cf!==null&&e.cf.thing)return!0}return!1}function IEe(){return TEe()?AEe():CEe()}});var zb=S((QNe,sH)=>{"use strict";var PEe=require("events").EventEmitter,{parse:xEe,serialize:lt}=Hb(),{getStream:OEe,getSecureStream:NEe}=nH(),DEe=lt.flush(),LEe=lt.sync(),kEe=lt.end(),Vb=class extends PEe{constructor(t){super(),t=t||{},this.stream=t.stream||OEe(t.ssl),typeof this.stream=="function"&&(this.stream=this.stream(t)),this._keepAlive=t.keepAlive,this._keepAliveInitialDelayMillis=t.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=t.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(t,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(t,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(i){n._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||n.emit("error",i)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=NEe(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(t){xEe(t,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(lt.requestSsl())}startup(t){this.stream.write(lt.startup(t))}cancel(t,r){this._send(lt.cancel(t,r))}password(t){this._send(lt.password(t))}sendSASLInitialResponseMessage(t,r){this._send(lt.sendSASLInitialResponseMessage(t,r))}sendSCRAMClientFinalMessage(t){this._send(lt.sendSCRAMClientFinalMessage(t))}_send(t){return this.stream.writable?this.stream.write(t):!1}query(t){this._send(lt.query(t))}parse(t){this._send(lt.parse(t))}bind(t){this._send(lt.bind(t))}execute(t){this._send(lt.execute(t))}flush(){this.stream.writable&&this.stream.write(DEe)}sync(){this._ending=!0,this._send(LEe)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(kEe,()=>{this.stream.end()})}close(t){this._send(lt.close(t))}describe(t){this._send(lt.describe(t))}sendCopyFromChunk(t){this._send(lt.copyData(t))}endCopyFrom(){this._send(lt.copyDone())}sendCopyFail(t){this._send(lt.copyFail(t))}};sH.exports=Vb});var cH=S((YNe,aH)=>{"use strict";var{Transform:MEe}=require("stream"),{StringDecoder:qEe}=require("string_decoder"),Os=Symbol("last"),Fm=Symbol("decoder");function FEe(e,t,r){let n;if(this.overflow){if(n=this[Fm].write(e).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[Os]+=this[Fm].write(e),n=this[Os].split(this.matcher);this[Os]=n.pop();for(let s=0;s<n.length;s++)try{oH(this,this.mapper(n[s]))}catch(i){return r(i)}if(this.overflow=this[Os].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function $Ee(e){if(this[Os]+=this[Fm].end(),this[Os])try{oH(this,this.mapper(this[Os]))}catch(t){return e(t)}e()}function oH(e,t){t!==void 0&&e.push(t)}function iH(e){return e}function BEe(e,t,r){switch(e=e||/\r?\n/,t=t||iH,r=r||{},arguments.length){case 1:typeof e=="function"?(t=e,e=/\r?\n/):typeof e=="object"&&!(e instanceof RegExp)&&!e[Symbol.split]&&(r=e,e=/\r?\n/);break;case 2:typeof e=="function"?(r=t,t=e,e=/\r?\n/):typeof t=="object"&&(r=t,t=iH)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=FEe,r.flush=$Ee,r.readableObjectMode=!0;let n=new MEe(r);return n[Os]="",n[Fm]=new qEe("utf8"),n.matcher=e,n.mapper=t,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,i){this._writableState.errorEmitted=!1,i(s)},n}aH.exports=BEe});var dH=S((JNe,Fn)=>{"use strict";var uH=require("path"),UEe=require("stream").Stream,HEe=cH(),lH=require("util"),jEe=5432,$m=process.platform==="win32",$u=process.stderr,VEe=56,zEe=7,WEe=61440,GEe=32768;function KEe(e){return(e&WEe)==GEe}var ca=["host","port","database","user","password"],Wb=ca.length,XEe=ca[Wb-1];function Gb(){var e=$u instanceof UEe&&$u.writable===!0;if(e){var t=Array.prototype.slice.call(arguments).concat(`
`);$u.write(lH.format.apply(lH,t))}}Object.defineProperty(Fn.exports,"isWin",{get:function(){return $m},set:function(e){$m=e}});Fn.exports.warnTo=function(e){var t=$u;return $u=e,t};Fn.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||($m?uH.join(t.APPDATA||"./","postgresql","pgpass.conf"):uH.join(t.HOME||"./",".pgpass"));return r};Fn.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:$m?!0:(t=t||"<unkn>",KEe(e.mode)?e.mode&(VEe|zEe)?(Gb('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(Gb('WARNING: password file "%s" is not a plain file',t),!1))};var QEe=Fn.exports.match=function(e,t){return ca.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(e[n]||jEe)===Number(t[n])?r&&!0:r&&(t[n]==="*"||t[n]===e[n])},!0)};Fn.exports.getPassword=function(e,t,r){var n,s=t.pipe(HEe());function i(c){var u=YEe(c);u&&JEe(u)&&QEe(e,u)&&(n=u[XEe],s.end())}var o=function(){t.destroy(),r(n)},a=function(c){t.destroy(),Gb("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",a),s.on("data",i).on("end",o).on("error",a)};var YEe=Fn.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,s=0,i=0,o={},a=!1,c=function(l,d,m){var g=e.substring(d,m);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),o[ca[l]]=g},u=0;u<e.length-1;u+=1){if(t=e.charAt(u+1),r=e.charAt(u),a=n==Wb-1,a){c(n,s);break}u>=0&&t==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return o=Object.keys(o).length===Wb?o:null,o},JEe=Fn.exports.isValidEntry=function(e){for(var t={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<ca.length;r+=1){var n=t[r],s=e[ca[r]]||"",i=n(s);if(!i)return!1}return!0}});var pH=S((eDe,Kb)=>{"use strict";var ZNe=require("path"),fH=require("fs"),Bm=dH();Kb.exports=function(e,t){var r=Bm.getFileName();fH.stat(r,function(n,s){if(n||!Bm.usePgPass(s,r))return t(void 0);var i=fH.createReadStream(r);Bm.getPassword(e,i,t)})};Kb.exports.warnTo=Bm.warnTo});var EH=S((tDe,gH)=>{"use strict";var ZEe=require("events").EventEmitter,hH=na(),Xb=L2(),eye=Nm(),tye=Eb(),mH=G2(),rye=qu(),nye=zb(),sye=hb(),Um=class extends ZEe{constructor(t){super(),this.connectionParameters=new tye(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new eye(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new nye({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||rye.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=n=>{process.nextTick(()=>{n.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,n=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;t()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)t();else try{pH()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),t()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await sye.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=Xb.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await Xb.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{Xb.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},n=t.application_name||t.fallback_application_name;return n&&(r.application_name=n),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,n){return this._types.setTypeParser(t,r,n)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return hH.escapeIdentifier(t)}escapeLiteral(t){return hH.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,n){let s,i,o,a,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(o=t.query_timeout||this.connectionParameters.query_timeout,i=s=t,typeof r=="function"&&(s.callback=s.callback||r)):(o=t.query_timeout||this.connectionParameters.query_timeout,s=new mH(t,r,n),s.callback||(i=new this._Promise((u,l)=>{s.callback=(d,m)=>d?l(d):u(m)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},o),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(s),this._pulseQueryQueue(),i):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};Um.Query=mH;gH.exports=Um});var vH=S((rDe,_H)=>{"use strict";var iye=require("events").EventEmitter,yH=function(){},SH=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},Qb=class{constructor(t,r,n){this.client=t,this.idleListener=r,this.timeoutId=n}},ua=class{constructor(t){this.callback=t}};function oye(){throw new Error("Release called on client which has already been released to the pool.")}function Hm(e,t){if(t)return{callback:t,result:void 0};let r,n,s=function(o,a){o?r(o):n(a)},i=new e(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:s,result:i}}function aye(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}var Yb=class extends iye{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Jb().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,t,s,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let n=SH(this._idle,i=>i.client===t);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(i=>i!==t);let s=this;t.end(()=>{s.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return t?t(s):this.Promise.reject(s)}let r=Hm(this.Promise,t),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new ua(r.callback)),n;let s=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new ua(s),o=setTimeout(()=>{SH(this._pendingQueue,a=>a.callback===s),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),n}return this.newClient(new ua(r.callback)),n}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let n=aye(this,r);this.log("checking client timeout");let s,i=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(s&&clearTimeout(s),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),t.timedOut||t.callback(o,void 0,yH);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new ua((u,l,d)=>d()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,t,n,!0)}})}_acquireClient(t,r,n,s){s&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,n),t.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(t,t.release):t.release():s&&this.options.verify?this.options.verify(t,i=>{if(i)return t.release(i),r.callback(i,void 0,yH);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let n=!1;return s=>{n&&oye(),n=!0,this._release(t,r,s)}}_release(t,r,n){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",n,t),n||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new Qb(t,r,i)),this._pulseQueue()}query(t,r,n){if(typeof t=="function"){let i=Hm(this.Promise,t);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(n=r,r=void 0);let s=Hm(this.Promise,n);return n=s.callback,this.connect((i,o)=>{if(i)return n(i);let a=!1,c=u=>{a||(a=!0,o.release(u),n(u))};o.once("error",c),this.log("dispatching query");try{o.query(t,r,(u,l)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?n(u):n(void 0,l)})}catch(u){return o.release(u),n(u)}}),s.result}end(t){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return t?t(n):this.Promise.reject(n)}this.ending=!0;let r=Hm(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};_H.exports=Yb});var RH=S((nDe,bH)=>{"use strict";var wH=require("events").EventEmitter,cye=require("util"),Zb=na(),la=bH.exports=function(e,t,r){wH.call(this),e=Zb.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};cye.inherits(la,wH);var uye={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};la.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let n=uye[r]||r;e[n]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};la.prototype.then=function(e,t){return this._getPromise().then(e,t)};la.prototype.catch=function(e){return this._getPromise().catch(e)};la.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};la.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(n,s,i){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),n)return t.handleError(n);t._emitRowEvents&&(i.length>1?s.forEach((o,a)=>{o.forEach(c=>{t.emit("row",c,i[a])})}):s.forEach(function(o){t.emit("row",o,i)})),t.state="end",t.emit("end",i),t.callback&&t.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(Zb.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(Zb.prepareValue);e.native.query(this.text,n,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var PH=S((sDe,IH)=>{"use strict";var CH;try{CH=require("pg-native")}catch(e){throw e}var lye=Nm(),AH=require("events").EventEmitter,dye=require("util"),fye=Eb(),TH=RH(),Jt=IH.exports=function(e){AH.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new lye(e.types),this.native=new CH({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new fye(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};Jt.Query=TH;dye.inherits(Jt,AH);Jt.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};Jt.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(t.connectionParameters.nativeConnectionString&&(n=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(n,function(s){if(s)return t.native.end(),e(s);t._connected=!0,t.native.on("error",function(i){t._queryable=!1,t._errorAllQueries(i),t.emit("error",i)}),t.native.on("notification",function(i){t.emit("notification",{channel:i.relname,payload:i.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};Jt.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(n=>{n?r(n):t()})})};Jt.prototype.query=function(e,t,r){let n,s,i,o,a;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")i=e.query_timeout||this.connectionParameters.query_timeout,s=n=e,typeof t=="function"&&(e.callback=t);else if(i=e.query_timeout||this.connectionParameters.query_timeout,n=new TH(e,t,r),!n.callback){let c,u;s=new this._Promise((l,d)=>{c=l,u=d}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,d)=>l?u(l):c(d)}return i&&(a=n.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};Jt.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(n,s){e=i=>i?s(i):n()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};Jt.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};Jt.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};Jt.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};Jt.prototype.ref=function(){};Jt.prototype.unref=function(){};Jt.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};Jt.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var eR=S((iDe,xH)=>{"use strict";xH.exports=PH()});var Jb=S((aDe,Bu)=>{"use strict";var pye=EH(),hye=qu(),mye=zb(),gye=Sb(),Eye=na(),yye=vH(),Sye=Nm(),{DatabaseError:_ye}=Hb(),{escapeIdentifier:vye,escapeLiteral:wye}=na(),bye=e=>class extends yye{constructor(r){super(r,e)}},tR=function(e){this.defaults=hye,this.Client=e,this.Query=this.Client.Query,this.Pool=bye(this.Client),this._pools=[],this.Connection=mye,this.types=Mu(),this.DatabaseError=_ye,this.TypeOverrides=Sye,this.escapeIdentifier=vye,this.escapeLiteral=wye,this.Result=gye,this.utils=Eye};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Bu.exports=new tR(eR()):(Bu.exports=new tR(pye),Object.defineProperty(Bu.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new tR(eR())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(Bu.exports,"native",{value:e}),e}}))});var Fye={};jt(Fye,{handler:()=>Pye});module.exports=se(Fye);var jm=T(hM());var Tm=require("aws-sdk");var Cv={PRETTY:4,COMPACT:0};var _e={TRACE:6,DEBUG:8,INFO:12,WARN:16,ERROR:20,CRITICAL:24,SILENT:28},mM=["level","message","sampling_rate","service","timestamp"],gM="Uncaught error detected, flushing log buffer before exit";var EM="POWERTOOLS_DEV",yM="POWERTOOLS_SERVICE_NAME",SM="_X_AMZN_TRACE_ID";var et=({key:e,defaultValue:t,errorMessage:r})=>{let n=process.env[e];if(n===void 0){if(t!==void 0)return t;throw r?new Error(r):new Error(`Environment variable ${e} is required`)}return n.trim()},_M=({key:e,defaultValue:t,errorMessage:r})=>{let n=et({key:e,defaultValue:String(t),errorMessage:r}),s=Number(n);if(Number.isNaN(s))throw new TypeError(`Environment variable ${e} must be a number`);return s},Iae=new Set(["1","y","yes","t","true","on"]),Pae=new Set(["0","n","no","f","false","off"]),Av=({key:e,defaultValue:t,errorMessage:r,extendedParsing:n})=>{let i=et({key:e,defaultValue:String(t),errorMessage:r}).toLowerCase();if(n){if(Iae.has(i))return!0;if(Pae.has(i))return!1}if(i!=="true"&&i!=="false")throw new Error(`Environment variable ${e} must be a boolean`);return i==="true"},Kc=()=>{try{return Av({key:EM,extendedParsing:!0})}catch{return!1}},vM=()=>et({key:yM,defaultValue:""}),wM=()=>{let e=et({key:SM,defaultValue:""});if(e==="")return;if(!e.includes("="))return{Root:e};let t={};for(let r of e.split(";")){let[n,s]=r.split("=");t[n]=s}return t},bM=()=>wM()?.Sampled==="1",Pn=()=>wM()?.Root;var vh,wh,RM,Xc=class{constructor(){Ce(this,wh);Ce(this,vh,t=>{let r="2-digit",n=Intl.supportedValuesOf("timeZone").includes(t)?t:"UTC";return new Intl.DateTimeFormat("en",{hourCycle:"h23",year:"numeric",month:r,day:r,hour:r,minute:r,second:r,timeZone:n})})}formatError(t){let{name:r,message:n,stack:s,cause:i,...o}=t,a={name:r,location:this.getCodeLocation(t.stack),message:n,stack:Kc()&&typeof s=="string"?s?.split(`
`):s,cause:i instanceof Error?this.formatError(i):i};for(let c in t)typeof c=="string"&&!["name","message","stack","cause"].includes(c)&&(a[c]=o[c]);return a}formatTimestamp(t){let r="UTC",n=et({key:"TZ",defaultValue:""});return n&&!n.includes(r)?De(this,wh,RM).call(this,t,n):t.toISOString()}getCodeLocation(t){if(!t)return"";let r=t.split(`
`),n=/\(([^()]*?):(\d+?):(\d+?)\)\\?$/;for(let s of r){let i=n.exec(s);if(Array.isArray(i))return`${i[1]}:${Number(i[2])}`}return""}};vh=new WeakMap,wh=new WeakSet,RM=function(t,r){let{year:n,month:s,day:i,hour:o,minute:a,second:c}=L(this,vh).call(this,r).formatToParts(t).reduce((I,A)=>(I[A.type]=A.value,I),{}),u=`${n}-${s}-${i}T${o}:${a}:${c}`,l=-t.getTimezoneOffset(),d=l>=0?"+":"-",m=Math.abs(Math.floor(l/60)).toString().padStart(2,"0"),g=Math.abs(l%60).toString().padStart(2,"0"),y=t.getMilliseconds().toString().padStart(3,"0"),w=`${d}${m}:${g}`;return`${u}.${y}${w}`};var ZM=T(qv(),1);var Bo=class{constructor(t){f(this,"attributes",{});this.setAttributes(t.attributes)}addAttributes(t){return(0,ZM.default)(this.attributes,t),this}getAttributes(){return this.attributes}prepareForPrint(){this.attributes=this.removeEmptyKeys(this.getAttributes())}removeEmptyKeys(t){let r={};for(let n in t)t[n]!==void 0&&t[n]!==""&&t[n]!==null&&(r[n]=t[n]);return r}setAttributes(t){this.attributes=t}};var cq=require("console"),uq=require("crypto");var ws="2.28.1";var Fv=process.env.AWS_EXECUTION_ENV||"NA",wue={relation:"after",toMiddleware:"getUserAgentMiddleware",name:"addPowertoolsToUserAgent",tags:["POWERTOOLS","USER_AGENT"]},eq=e=>typeof e=="object"&&e!==null&&"send"in e&&typeof e.send=="function"&&"config"in e&&e.config!==void 0&&typeof e.config=="object"&&e.config!==null&&"middlewareStack"in e&&e.middlewareStack!==void 0&&typeof e.middlewareStack=="object"&&e.middlewareStack!==null&&"identify"in e.middlewareStack&&typeof e.middlewareStack.identify=="function"&&"addRelativeTo"in e.middlewareStack&&typeof e.middlewareStack.addRelativeTo=="function",bue=e=>t=>async r=>{let n=r.request.headers["user-agent"]||"";if(n.includes("PT/NO-OP")){let s=n.replace("PT/NO-OP",`PT/${e}/${ws} PTEnv/${Fv}`);return r.request.headers["user-agent"]=s,await t(r)}return n.includes("PT/")?await t(r):(r.request.headers["user-agent"]=n===""?`PT/${e}/${ws} PTEnv/${Fv}`:`${n} PT/${e}/${ws} PTEnv/${Fv}`,await t(r))},Rue=e=>{let t=!1;for(let r of e)r.includes("addPowertoolsToUserAgent")&&(t=!0);return t},$v=(e,t)=>{try{if(eq(e)){if(Rue(e.middlewareStack.identify()))return;e.middlewareStack.addRelativeTo(bue(t),wue)}else throw new Error("The client provided does not match the expected interface")}catch(r){console.warn("Failed to add user agent middleware",r)}};var Oh="powertools-for-aws",tq=`${Oh}.tracer`,rq=`${Oh}.metrics`,nq=`${Oh}.logger`,sq=`${Oh}.idempotency`;var Bv=e=>typeof e=="string";var iq=e=>Object.is(e,null),Uv=e=>iq(e)||Object.is(e,void 0);var Uo,fi=class{constructor(){Ce(this,Uo);f(this,"coldStart",!0);f(this,"defaultServiceName","service_undefined");st(this,Uo,this.getInitializationType()),L(this,Uo)!=="on-demand"&&(this.coldStart=!1)}getInitializationType(){let t=process.env.AWS_LAMBDA_INITIALIZATION_TYPE?.trim();return t==="on-demand"?"on-demand":t==="provisioned-concurrency"?"provisioned-concurrency":"unknown"}getColdStart(){return L(this,Uo)!=="on-demand"?!1:this.coldStart?(this.coldStart=!1,!0):!1}isValidServiceName(t){return typeof t=="string"&&t.trim().length>0}};Uo=new WeakMap;var oq=process.env.AWS_EXECUTION_ENV||"NA";process.env.AWS_SDK_UA_APP_ID?process.env.AWS_SDK_UA_APP_ID=`${process.env.AWS_SDK_UA_APP_ID}/PT/NO-OP/${ws}/PTEnv/${oq}`:process.env.AWS_SDK_UA_APP_ID=`PT/NO-OP/${ws}/PTEnv/${oq}`;var tu=T(qv(),1);var Ho,Nh=class extends Xc{constructor(r){super();Ce(this,Ho);st(this,Ho,r?.logRecordOrder)}formatAttributes(r,n){let s={level:r.logLevel,message:r.message,timestamp:this.formatTimestamp(r.timestamp),service:r.serviceName,cold_start:r.lambdaContext?.coldStart,function_arn:r.lambdaContext?.invokedFunctionArn,function_memory_size:r.lambdaContext?.memoryLimitInMB,function_name:r.lambdaContext?.functionName,function_request_id:r.lambdaContext?.awsRequestId,sampling_rate:r.sampleRateValue,xray_trace_id:r.xRayTraceId};if(L(this,Ho)===void 0)return new Bo({attributes:s}).addAttributes(n);let i={};for(let a of L(this,Ho))a in s&&!(a in i)?i[a]=s[a]:a in n&&!(a in i)&&(i[a]=n[a]);for(let a in s)a in i||(i[a]=s[a]);for(let a in n)a in i||(i[a]=n[a]);return new Bo({attributes:i})}};Ho=new WeakMap;var Hv=class{constructor(t,r){f(this,"value");f(this,"logLevel");f(this,"byteSize");if(!Bv(t))throw new Error("Value should be a string");this.value=t,this.logLevel=r,this.byteSize=Buffer.byteLength(t)}},jv=class extends Set{constructor(){super(...arguments);f(this,"currentBytesSize",0);f(this,"hasEvictedLog",!1)}add(r){return this.currentBytesSize+=r.byteSize,super.add(r),this}delete(r){let n=super.delete(r);return n&&(this.currentBytesSize-=r.byteSize),n}clear(){super.clear(),this.currentBytesSize=0}shift(){let r=this.values().next().value;return r&&this.delete(r),r}},pi,jo,Lh,aq,Dh=class extends Map{constructor({maxBytesSize:r,onBufferOverflow:n}){super();Ce(this,Lh);Ce(this,pi);Ce(this,jo);st(this,pi,r),st(this,jo,n)}setItem(r,n,s){let i=new Hv(n,s);if(i.byteSize>L(this,pi))throw new Error("Item too big");let o=this.get(r)||new jv;return o.currentBytesSize+i.byteSize>=L(this,pi)&&(De(this,Lh,aq).call(this,o,i),L(this,jo)&&L(this,jo).call(this)),o.add(i),super.set(r,o),this}};pi=new WeakMap,jo=new WeakMap,Lh=new WeakSet,aq=function(r,n){for(;r.currentBytesSize+n.byteSize>=L(this,pi);)r.shift(),r.hasEvictedLog=!0};var Mr,Vo,iu,qr,bs,hi,nt,tn,mi,Nn,ou,Re,ru,Vv,lq,dq,fq,pq,zv,nu,hq,Wv=class Wv extends fi{constructor(r={}){super();Ce(this,Re);f(this,"console");f(this,"customConfigService");f(this,"logEvent",!1);f(this,"logFormatter");f(this,"logIndentation",Cv.COMPACT);f(this,"logLevel",_e.INFO);Ce(this,Mr);f(this,"persistentLogAttributes",{});f(this,"powertoolsLogData",{sampleRateValue:0});f(this,"temporaryLogAttributes",{});Ce(this,Vo,[]);Ce(this,iu,!1);Ce(this,qr,new Map);Ce(this,bs,_e.INFO);Ce(this,hi);Ce(this,nt,{enabled:!1,flushOnErrorLog:!0,maxBytes:20480,bufferAtVerbosity:_e.DEBUG});Ce(this,tn);Ce(this,mi);Ce(this,Nn,{sampleRateValue:0,refreshedTimes:0});Ce(this,ou,new Map);let{customConfigService:n,...s}=r;this.customConfigService=n||void 0,this.setOptions(s),st(this,iu,!0);for(let[i,o]of L(this,Vo))this.printLog(i,this.createAndPopulateLogItem(...o));st(this,Vo,[])}get level(){return this.logLevel}addContext(r){this.addToPowertoolsLogData({lambdaContext:{invokedFunctionArn:r.invokedFunctionArn,coldStart:this.getColdStart(),awsRequestId:r.awsRequestId,memoryLimitInMB:r.memoryLimitInMB,functionName:r.functionName,functionVersion:r.functionVersion}})}addPersistentLogAttributes(r){this.appendPersistentKeys(r)}appendKeys(r){De(this,Re,Vv).call(this,r,"temp")}appendPersistentKeys(r){De(this,Re,Vv).call(this,r,"persistent")}createChild(r={}){let n=this.createLogger((0,tu.default)({},{logLevel:this.getLevelName(),serviceName:this.powertoolsLogData.serviceName,sampleRateValue:L(this,Nn).sampleRateValue,logFormatter:this.getLogFormatter(),customConfigService:this.getCustomConfigService(),environment:this.powertoolsLogData.environment,persistentLogAttributes:this.persistentLogAttributes,jsonReplacerFn:L(this,hi),correlationIdSearchFn:L(this,mi),...L(this,nt).enabled&&{logBufferOptions:{maxBytes:L(this,nt).maxBytes,bufferAtVerbosity:this.getLogLevelNameFromNumber(L(this,nt).bufferAtVerbosity),flushOnErrorLog:L(this,nt).flushOnErrorLog}}},r));return this.powertoolsLogData.lambdaContext&&n.addContext(this.powertoolsLogData.lambdaContext),this.temporaryLogAttributes&&n.appendKeys(this.temporaryLogAttributes),n}critical(r,...n){this.processLogItem(_e.CRITICAL,r,n)}debug(r,...n){this.processLogItem(_e.DEBUG,r,n)}error(r,...n){L(this,nt).enabled&&L(this,nt).flushOnErrorLog&&this.flushBuffer(),this.processLogItem(_e.ERROR,r,n)}getLevelName(){return this.getLogLevelNameFromNumber(this.logLevel)}getLogEvent(){return this.logEvent}getPersistentLogAttributes(){return this.persistentLogAttributes}info(r,...n){this.processLogItem(_e.INFO,r,n)}injectLambdaContext(r){return(n,s,i)=>{let o=i.value,a=this;i.value=async function(...c){a.refreshSampleRateCalculation(),a.addContext(c[1]),a.logEventIfEnabled(c[0],r?.logEvent),r?.correlationIdPath&&a.setCorrelationId(c[0],r?.correlationIdPath);try{return await o.apply(this,c)}catch(u){throw r?.flushBufferOnUncaughtError&&(a.flushBuffer(),a.error({message:gM,error:u})),u}finally{(r?.clearState||r?.resetKeys)&&a.resetKeys(),a.clearBuffer()}}}}static injectLambdaContextAfterOrOnError(r,n,s){s&&(s.clearState||s?.resetKeys)&&r.resetKeys()}static injectLambdaContextBefore(r,n,s,i){r.addContext(s),r.logEventIfEnabled(n,i?.logEvent)}logEventIfEnabled(r,n){this.shouldLogEvent(n)&&this.info("Lambda invocation event",{event:r})}refreshSampleRateCalculation(){if(L(this,Nn).refreshedTimes===0){L(this,Nn).refreshedTimes++;return}De(this,Re,zv).call(this)&&this.logLevel>_e.TRACE?(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate")):this.setLogLevel(this.getLogLevelNameFromNumber(L(this,bs)))}removeKeys(r){for(let n of r)this.temporaryLogAttributes[n]=void 0,this.persistentLogAttributes[n]?L(this,qr).set(n,"persistent"):L(this,qr).delete(n)}removePersistentKeys(r){for(let n of r)this.persistentLogAttributes[n]=void 0,this.temporaryLogAttributes[n]?L(this,qr).set(n,"temp"):L(this,qr).delete(n)}removePersistentLogAttributes(r){this.removePersistentKeys(r)}resetKeys(){for(let r of Object.keys(this.temporaryLogAttributes))this.persistentLogAttributes[r]?L(this,qr).set(r,"persistent"):L(this,qr).delete(r);this.temporaryLogAttributes={}}setLogLevel(r){if(!this.awsLogLevelShortCircuit(r))if(this.isValidLogLevel(r))this.logLevel=_e[r];else throw new Error(`Invalid log level: ${r}`)}setPersistentLogAttributes(r){this.persistentLogAttributes=r}shouldLogEvent(r){return typeof r=="boolean"?r:this.getLogEvent()}trace(r,...n){this.processLogItem(_e.TRACE,r,n)}warn(r,...n){this.processLogItem(_e.WARN,r,n)}createLogger(r){return new Wv(r)}getJsonReplacer(){let r=new WeakSet;return(n,s)=>{var o;let i=s;if(L(this,hi)&&(i=(o=L(this,hi))==null?void 0:o.call(this,n,i)),i instanceof Error&&(i=this.getLogFormatter().formatError(i)),typeof i=="bigint")return i.toString();if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return i}}addToPowertoolsLogData(r){(0,tu.default)(this.powertoolsLogData,r)}awsLogLevelShortCircuit(r){return L(this,Mr)!==void 0?(this.logLevel=_e[L(this,Mr)],this.isValidLogLevel(r)&&this.logLevel>_e[r]&&De(this,Re,ru).call(this,`Current log level (${r}) does not match AWS Lambda Advanced Logging Controls minimum log level (${L(this,Mr)}). This can lead to data loss, consider adjusting them.`),!0):!1}createAndPopulateLogItem(r,n,s){let i={logLevel:this.getLogLevelNameFromNumber(r),timestamp:new Date,xRayTraceId:Pn(),...this.getPowertoolsLogData(),message:""},o=De(this,Re,lq).call(this);return De(this,Re,dq).call(this,n,i,o),De(this,Re,fq).call(this,s,o),this.getLogFormatter().formatAttributes(i,o)}getCustomConfigService(){return this.customConfigService}getLogFormatter(){return this.logFormatter}getLogLevelNameFromNumber(r){let n;for(let[s,i]of Object.entries(_e))if(i===r){n=s;break}return n}getPowertoolsLogData(){return this.powertoolsLogData}isValidLogLevel(r){return typeof r=="string"&&r in _e}isValidSampleRate(r){return typeof r=="number"&&0<=r&&r<=1}printLog(r,n){n.prepareForPrint();let s=r===_e.CRITICAL?"error":this.getLogLevelNameFromNumber(r).toLowerCase();this.console[s](JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation))}processLogItem(r,n,s){let i=Pn();if(i!==void 0&&this.shouldBufferLog(i,r)){try{this.bufferLogItem(i,this.createAndPopulateLogItem(r,n,s),r)}catch(o){this.printLog(_e.WARN,this.createAndPopulateLogItem(_e.WARN,`Unable to buffer log: ${o.message}`,[o])),this.printLog(r,this.createAndPopulateLogItem(r,n,s))}return}r>=this.logLevel&&(L(this,iu)?this.printLog(r,this.createAndPopulateLogItem(r,n,s)):L(this,Vo).push([r,[r,n,s]]))}setConsole(){Kc()?this.console=console:this.console=new cq.Console({stdout:process.stdout,stderr:process.stderr}),this.console.trace=(r,...n)=>{this.console.log(r,...n)}}setInitialLogLevel(r){let n=r?.toUpperCase();if(this.awsLogLevelShortCircuit(n)){st(this,bs,this.logLevel);return}if(this.isValidLogLevel(n)){this.logLevel=_e[n],st(this,bs,this.logLevel);return}let s=this.getCustomConfigService()?.getLogLevel()?.toUpperCase();if(this.isValidLogLevel(s)){this.logLevel=_e[s],st(this,bs,this.logLevel);return}let i=et({key:"POWERTOOLS_LOG_LEVEL",defaultValue:""}),o=et({key:"LOG_LEVEL",defaultValue:""}),a=i!==""?i:o;this.isValidLogLevel(a)&&(this.logLevel=_e[a],st(this,bs,this.logLevel))}setInitialSampleRate(r){let n=r,s=this.getCustomConfigService()?.getSampleRateValue(),i=_M({key:"POWERTOOLS_LOGGER_SAMPLE_RATE",defaultValue:0});for(let o of[n,s,i])if(this.isValidSampleRate(o)){L(this,Nn).sampleRateValue=o,this.powertoolsLogData.sampleRateValue=o,De(this,Re,zv).call(this)&&this.logLevel>_e.TRACE&&(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate"));break}}setLogEvent(){this.logEvent=Av({key:"POWERTOOLS_LOGGER_LOG_EVENT",defaultValue:!1})}setLogFormatter(r,n){this.logFormatter=r??new Nh({logRecordOrder:n})}setLogIndentation(){Kc()&&(this.logIndentation=Cv.PRETTY)}setOptions(r){let{logLevel:n,serviceName:s,sampleRateValue:i,logFormatter:o,persistentKeys:a,persistentLogAttributes:c,environment:u,jsonReplacerFn:l,logRecordOrder:d,logBufferOptions:m,correlationIdSearchFn:g}=r;c&&Object.keys(c).length>0&&a&&Object.keys(a).length>0&&this.warn("Both persistentLogAttributes and persistentKeys options were provided. Using persistentKeys as persistentLogAttributes is deprecated and will be removed in future releases"),this.setPowertoolsLogData(s,u,a||c);let y=et({key:"AWS_LAMBDA_LOG_LEVEL",defaultValue:""}),w=y==="FATAL"?"CRITICAL":y;return this.isValidLogLevel(w)&&st(this,Mr,w),this.setLogEvent(),this.setInitialLogLevel(n),this.setInitialSampleRate(i),this.setLogFormatter(o,d),this.setConsole(),this.setLogIndentation(),st(this,hi,l),De(this,Re,hq).call(this,m),st(this,mi,g),this}setPowertoolsLogData(r,n,s){this.addToPowertoolsLogData({awsRegion:et({key:"AWS_REGION",defaultValue:""}),environment:n||this.getCustomConfigService()?.getCurrentEnvironment()||et({key:"ENVIRONMENT",defaultValue:""}),serviceName:r||this.getCustomConfigService()?.getServiceName()||et({key:"POWERTOOLS_SERVICE_NAME",defaultValue:""})||this.defaultServiceName}),s&&this.appendPersistentKeys(s)}bufferLogItem(r,n,s){n.prepareForPrint(),L(this,tn)?.has(r)===!1&&L(this,tn)?.clear(),L(this,tn)?.setItem(r,JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation),s)}flushBuffer(){let r=Pn();if(r===void 0)return;let n=L(this,tn)?.get(r);if(n!==void 0){for(let s of n){let i=this.getLogLevelNameFromNumber(s.logLevel).toLowerCase();this.console[i](s.value)}n.hasEvictedLog&&this.printLog(_e.WARN,this.createAndPopulateLogItem(_e.WARN,"Some logs are not displayed because they were evicted from the buffer. Increase buffer size to store more logs in the buffer",[])),L(this,Mr)!==void 0&&_e[L(this,Mr)]>L(this,nt).bufferAtVerbosity&&De(this,Re,ru).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Some logs might be missing."),L(this,tn)?.delete(r)}}clearBuffer(){let r=Pn();r!==void 0&&L(this,tn)?.delete(r)}shouldBufferLog(r,n){return L(this,nt).enabled&&r!==void 0&&n<=L(this,nt).bufferAtVerbosity}setCorrelationId(r,n){if(typeof n=="string"){if(!L(this,mi)){De(this,Re,ru).call(this,"correlationIdPath is set but no search function was provided. The correlation ID will not be added to the log attributes.");return}let s=L(this,mi).call(this,n,r);s&&this.appendKeys({correlation_id:s});return}this.appendKeys({correlation_id:r})}getCorrelationId(){return this.temporaryLogAttributes.correlation_id}};Mr=new WeakMap,Vo=new WeakMap,iu=new WeakMap,qr=new WeakMap,bs=new WeakMap,hi=new WeakMap,nt=new WeakMap,tn=new WeakMap,mi=new WeakMap,Nn=new WeakMap,ou=new WeakMap,Re=new WeakSet,ru=function(r){L(this,ou).has(r)||(L(this,ou).set(r,!0),this.warn(r))},Vv=function(r,n){for(let s of Object.keys(r))De(this,Re,nu).call(this,s)===!1&&L(this,qr).set(s,n);n==="temp"?(0,tu.default)(this.temporaryLogAttributes,r):(0,tu.default)(this.persistentLogAttributes,r)},lq=function(){let r={};for(let[n,s]of L(this,qr))De(this,Re,nu).call(this,n)||(r[n]=s==="persistent"?this.persistentLogAttributes[n]:this.temporaryLogAttributes[n]);return r},dq=function(r,n,s){if(typeof r=="string"){n.message=r;return}let{message:i,...o}=r;n.message=i;for(let[a,c]of Object.entries(o))De(this,Re,nu).call(this,a)||(s[a]=c)},fq=function(r,n){for(let s of r)Uv(s)||(s instanceof Error?n.error=s:typeof s=="string"?n.extra=s:De(this,Re,pq).call(this,s,n))},pq=function(r,n){for(let[s,i]of Object.entries(r))De(this,Re,nu).call(this,s)||(n[s]=i)},zv=function(){return L(this,Nn).sampleRateValue&&(0,uq.randomInt)(0,100)/100<=L(this,Nn).sampleRateValue},nu=function(r){return mM.includes(r)?(this.warn(`The key "${r}" is a reserved key and will be dropped.`),!0):!1},hq=function(r){if(r===void 0||(L(this,nt).enabled=r?.enabled!==!1,L(this,nt).enabled===!1))return;r?.maxBytes!==void 0&&(L(this,nt).maxBytes=r.maxBytes),st(this,tn,new Dh({maxBytesSize:L(this,nt).maxBytes})),r?.flushOnErrorLog===!1&&(L(this,nt).flushOnErrorLog=!1);let n=r?.bufferAtVerbosity?.toUpperCase();this.isValidLogLevel(n)&&(L(this,nt).bufferAtVerbosity=_e[n]),L(this,Mr)!==void 0&&_e[L(this,Mr)]>L(this,nt).bufferAtVerbosity&&De(this,Re,ru).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Buffered logs will be filtered by ALC")};var su=Wv;var gt=[];for(let e=0;e<256;++e)gt.push((e+256).toString(16).slice(1));function mq(e,t=0){return(gt[e[t+0]]+gt[e[t+1]]+gt[e[t+2]]+gt[e[t+3]]+"-"+gt[e[t+4]]+gt[e[t+5]]+"-"+gt[e[t+6]]+gt[e[t+7]]+"-"+gt[e[t+8]]+gt[e[t+9]]+"-"+gt[e[t+10]]+gt[e[t+11]]+gt[e[t+12]]+gt[e[t+13]]+gt[e[t+14]]+gt[e[t+15]]).toLowerCase()}var gq=T(require("crypto")),Mh=new Uint8Array(256),kh=Mh.length;function Gv(){return kh>Mh.length-16&&(gq.default.randomFillSync(Mh),kh=0),Mh.slice(kh,kh+=16)}var Eq=T(require("crypto")),Kv={randomUUID:Eq.default.randomUUID};function Cue(e,t,r){if(Kv.randomUUID&&!t&&!e)return Kv.randomUUID();e=e||{};let n=e.random||(e.rng||Gv)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let s=0;s<16;++s)t[r+s]=n[s];return t}return mq(n)}var Rs=Cue;var zo=class e{constructor(t,r){this.logger=new su({serviceName:t||process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",logLevel:process.env.LOG_LEVEL||"INFO",sampleRateValue:.1}),this.context={traceId:r?.traceId||Rs(),...r},this.context.agent&&this.logger.appendKeys({agent:this.context.agent}),this.context.leadId&&this.logger.appendKeys({leadId:this.context.leadId}),this.context.tenantId&&this.logger.appendKeys({tenantId:this.context.tenantId})}getTraceId(){return this.context.traceId||""}setTraceId(t){this.context.traceId=t}getContext(){return{...this.context}}updateContext(t){this.context={...this.context,...t};let r={};t.agent&&(r.agent=t.agent),t.leadId&&(r.leadId=t.leadId),t.tenantId&&(r.tenantId=t.tenantId),t.campaignId&&(r.campaignId=t.campaignId),Object.keys(r).length>0&&this.logger.appendKeys(r)}info(t,r){this.logger.info(t,{trace_id:this.context.traceId,...r})}warn(t,r){this.logger.warn(t,{trace_id:this.context.traceId,...r})}error(t,r,n){let s=r?{error:{name:r.name,message:r.message,stack:r.stack}}:{};this.logger.error(t,{trace_id:this.context.traceId,...s,...n})}debug(t,r){this.logger.debug(t,{trace_id:this.context.traceId,...r})}appendKeys(t){this.logger.appendKeys(t)}removeKeys(t){this.logger.removeKeys(t)}createChild(t){return new e(process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",{...this.context,...t})}logCustomMetric(t,r,n){this.info(`Custom metric: ${t}`,{metric:t,value:r,...n})}logApiRequest(t,r,n){this.info(`API Request: ${t} ${r}`,{method:t,path:r,...n})}finishOperation(t,r){t?this.info("Operation completed successfully",r):this.error("Operation failed",void 0,r)}};function yq(e,t){return new zo(e,t)}var mxe=new zo;var $U=T(Qw(),1);var MU=T(Qw(),1),bm=require("diagnostics_channel"),qU=T(require("http"),1),FU=T(require("https"),1);var Yw=require("url"),OU=new TextDecoder,NU=(e,t)=>{let r=-1;for(let n=0;n<e.length;n+=2)if(OU.decode(e[n]).toLowerCase()===t){r=n;break}return r===-1?null:OU.decode(e[r+1])},Jw=e=>e!==void 0&&"http"in e&&"parent"in e&&"namespace"in e&&e.namespace==="remote",DU=e=>{if(typeof e.origin=="string")return new Yw.URL(`${e.origin}${e.path||""}`);if(e.origin instanceof Yw.URL)return e.origin.pathname=e.path||"",e.origin};var{captureAWS:Qhe,captureAWSClient:Yhe,captureAWSv3Client:Jhe,captureAsyncFunc:Zhe,captureFunc:eme,captureHTTPsGlobal:LU,getNamespace:tme,getSegment:rme,setSegment:nme,Segment:kU,setContextMissingStrategy:sme,setDaemonAddress:ime,setLogger:ome}=MU.default,Rm=class{captureAWS(t){return Qhe(t)}captureAWSClient(t){return Yhe(t)}captureAWSv3Client(t){return $v(t,"tracer"),Jhe(t)}captureAsyncFunc(t,r,n){return Zhe(t,r)}captureFunc(t,r,n){return eme(t,r)}captureHTTPsGlobal(){LU(qU.default),LU(FU.default)}getNamespace(){return tme()}getSegment(){return rme()}instrumentFetch(){let t=s=>{let{request:i}=s,o=i.method;if(o==="CONNECT")return;let a=this.getSegment(),c=DU(i);if(a&&c){let u=a.addNewSubsegment(c.hostname);u.addAttribute("namespace","remote"),i.addHeader("X-Amzn-Trace-Id",`Root=${Pn()};Parent=${u.id};Sampled=${u.notTraced?"0":"1"}`),u.http={request:{url:`${c.protocol}//${c.hostname}${c.pathname}`,method:o}},this.setSegment(u)}},r=s=>{let{response:i}=s,o=this.getSegment();if(Jw(o)){let a=i.statusCode,c=NU(i.headers,"content-length");o.http={...o.http,response:{status:a,...c&&{content_length:Number.parseInt(c,10)}}},a===429&&o.addThrottleFlag(),a>=400&&a<500?o.addErrorFlag():a>=500&&a<600&&o.addFaultFlag(),o.close(),this.setSegment(o.parent)}},n=s=>{let{error:i}=s,o=this.getSegment();Jw(o)&&(o.addErrorFlag(),i instanceof Error&&o.addError(i,!0),o.close(),this.setSegment(o.parent))};(0,bm.subscribe)("undici:request:create",t),(0,bm.subscribe)("undici:request:headers",r),(0,bm.subscribe)("undici:request:error",n)}putAnnotation(t,r){let n=this.getSegment();if(n===void 0){console.warn("No active segment or subsegment found, skipping annotation");return}if(n instanceof kU){console.warn("You cannot annotate the main segment in a Lambda execution environment");return}n.addAnnotation(t,r)}putMetadata(t,r,n){let s=this.getSegment();if(s===void 0){console.warn("No active segment or subsegment found, skipping metadata addition");return}if(s instanceof kU){console.warn("You cannot add metadata to the main segment in a Lambda execution environment");return}s.addMetadata(t,r,n)}setContextMissingStrategy(t){sme(t)}setDaemonAddress(t){ime(t)}setLogger(t){ome(t)}setSegment(t){nme(t)}};(process.env.AWS_XRAY_CONTEXT_MISSING===""||process.env.AWS_XRAY_CONTEXT_MISSING===void 0)&&(process.env.AWS_XRAY_CONTEXT_MISSING="IGNORE_ERROR");var{Subsegment:ame}=$U.default,tt,Cm,BU,Pu=class extends fi{constructor(r={}){super();Ce(this,Cm);f(this,"provider");f(this,"captureError",!0);f(this,"captureHTTPsRequests",!0);f(this,"captureResponse",!0);f(this,"customConfigService");Ce(this,tt,{awsExecutionEnv:"",samLocal:"",captureError:"",captureHTTPsRequests:"",captureResponse:"",tracingEnabled:"",serviceName:""});f(this,"serviceName");f(this,"tracingEnabled",!0);De(this,Cm,BU).call(this),this.setOptions(r),this.provider=new Rm,this.isTracingEnabled()&&this.captureHTTPsRequests&&(this.provider.captureHTTPsGlobal(),this.provider.instrumentFetch()),this.isTracingEnabled()||this.provider.setContextMissingStrategy(()=>({}))}addErrorAsMetadata(r,n){if(!this.isTracingEnabled())return;let s=this.getSegment();if(s!==void 0){if(!this.captureError){s.addErrorFlag();return}s.addError(r,n||!1)}}addResponseAsMetadata(r,n){r===void 0||!this.captureResponse||!this.isTracingEnabled()||this.putMetadata(`${n} response`,r)}addServiceNameAnnotation(){this.isTracingEnabled()&&this.putAnnotation("Service",this.serviceName)}annotateColdStart(){this.isTracingEnabled()&&this.putAnnotation("ColdStart",this.getColdStart())}captureAWS(r){return this.isTracingEnabled()?this.provider.captureAWS(r):r}captureAWSClient(r){if(!this.isTracingEnabled())return r;try{return this.provider.captureAWSClient(r)}catch(n){try{return this.provider.captureAWSClient(r.service),r}catch{throw n}}}captureAWSv3Client(r){return this.isTracingEnabled()?this.provider.captureAWSv3Client(r):r}captureLambdaHandler(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){return a.isTracingEnabled()?a.provider.captureAsyncFunc(`## ${process.env._HANDLER}`,async u=>{a.annotateColdStart(),a.addServiceNameAnnotation();let l;try{l=await o.apply(this,c),(r?.captureResponse??!0)&&a.addResponseAsMetadata(l,process.env._HANDLER)}catch(d){throw a.addErrorAsMetadata(d),d}finally{try{u?.close()}catch(d){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",u?.name,d)}}return l}):o.apply(this,c)},i}}captureMethod(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){if(!a.isTracingEnabled())return o.apply(this,[...c]);let u=String(s),l=r?.subSegmentName?r.subSegmentName:`### ${u}`;return a.provider.captureAsyncFunc(l,async d=>{let m;try{m=await o.apply(this,[...c]),(r?.captureResponse??!0)&&a.addResponseAsMetadata(m,u)}catch(g){throw a.addErrorAsMetadata(g),g}finally{try{d?.close()}catch(g){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",d?.name,g)}}return m})},i}}getRootXrayTraceId(){return Pn()}getSegment(){if(!this.isTracingEnabled())return new ame("## Dummy segment");let r=this.provider.getSegment();return r===void 0&&console.warn("Failed to get the current sub/segment from the context, this is likely because you are not using the Tracer in a Lambda function."),r}isTraceSampled(){return this.isTracingEnabled()?bM():!1}isTracingEnabled(){return this.tracingEnabled}putAnnotation(r,n){this.isTracingEnabled()&&this.provider.putAnnotation(r,n)}putMetadata(r,n,s){this.isTracingEnabled()&&this.provider.putMetadata(r,n,s||this.serviceName)}setSegment(r){this.isTracingEnabled()&&this.provider.setSegment(r)}getCustomConfigService(){return this.customConfigService}isAmplifyCli(){return L(this,tt).awsExecutionEnv==="AWS_Lambda_amplify-mock"}isLambdaExecutionEnv(){return L(this,tt).awsExecutionEnv!==""}isLambdaSamCli(){return L(this,tt).samLocal!==""}setCaptureError(){let r=this.getCustomConfigService()?.getTracingCaptureError();if(r!==void 0&&r.toLowerCase()==="false"){this.captureError=!1;return}if(L(this,tt).captureError.toLowerCase()==="false"){this.captureError=!1;return}}setCaptureHTTPsRequests(r){if(r!==void 0&&!r){this.captureHTTPsRequests=!1;return}let n=this.getCustomConfigService()?.getCaptureHTTPsRequests();if(n!==void 0&&n.toLowerCase()==="false"){this.captureHTTPsRequests=!1;return}L(this,tt).captureHTTPsRequests.toLowerCase()==="false"&&(this.captureHTTPsRequests=!1)}setCaptureResponse(){let r=this.getCustomConfigService()?.getTracingCaptureResponse();if(r!==void 0&&r.toLowerCase()==="false"){this.captureResponse=!1;return}if(L(this,tt).captureResponse.toLowerCase()==="false"){this.captureResponse=!1;return}}setCustomConfigService(r){this.customConfigService=r||void 0}setOptions(r){let{enabled:n,serviceName:s,captureHTTPsRequests:i,customConfigService:o}=r;return this.setCustomConfigService(o),this.setTracingEnabled(n),this.setCaptureResponse(),this.setCaptureError(),this.setServiceName(s),this.setCaptureHTTPsRequests(i),this}setServiceName(r){if(r!==void 0&&this.isValidServiceName(r)){this.serviceName=r;return}let n=this.getCustomConfigService()?.getServiceName();if(n!==void 0&&this.isValidServiceName(n)){this.serviceName=n;return}if(L(this,tt).serviceName!==void 0&&this.isValidServiceName(L(this,tt).serviceName)){this.serviceName=L(this,tt).serviceName;return}this.serviceName=this.defaultServiceName}setTracingEnabled(r){if(r!==void 0&&!r){this.tracingEnabled=r;return}let n=this.getCustomConfigService()?.getTracingEnabled();if(n!==void 0&&n.toLowerCase()==="false"){this.tracingEnabled=!1;return}if(L(this,tt).tracingEnabled.toLowerCase()==="false"){this.tracingEnabled=!1;return}(this.isAmplifyCli()||this.isLambdaSamCli()||!this.isLambdaExecutionEnv())&&(this.tracingEnabled=!1)}};tt=new WeakMap,Cm=new WeakSet,BU=function(){L(this,tt).awsExecutionEnv=et({key:"AWS_EXECUTION_ENV",defaultValue:""}),L(this,tt).samLocal=et({key:"AWS_SAM_LOCAL",defaultValue:""}),L(this,tt).captureError=et({key:"POWERTOOLS_TRACER_CAPTURE_ERROR",defaultValue:""}),L(this,tt).captureHTTPsRequests=et({key:"POWERTOOLS_TRACER_CAPTURE_HTTPS_REQUESTS",defaultValue:""}),L(this,tt).captureResponse=et({key:"POWERTOOLS_TRACER_CAPTURE_RESPONSE",defaultValue:""}),L(this,tt).tracingEnabled=et({key:"POWERTOOLS_TRACE_ENABLED",defaultValue:""}),L(this,tt).serviceName=vM()};var cme=new Pu({serviceName:process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service"});function xu(){try{return cme.getSegment()}catch(e){console.warn("Failed to get X-Ray segment:",e);return}}function ume(e,t,r){try{let n=xu();if(!n)return;let s=n.addNewSubsegment(e);if(t)for(let[i,o]of Object.entries(t))o!==void 0&&s.addAnnotation(i,o);if(r)for(let[i,o]of Object.entries(r))s.addMetadata(i,o);return s}catch(n){console.warn("Failed to create X-Ray subsegment:",n);return}}function UU(e,t="success",r){if(e)try{e.addAnnotation("status",t),r&&(e.addError(r),e.addMetadata("error",{name:r.name,message:r.message,stack:r.stack})),e.close()}catch(n){console.warn("Failed to close X-Ray subsegment:",n)}}async function lme(e,t,r,n){let s=ume(e,r,n);try{let i=await t();return UU(s,"success"),i}catch(i){throw UU(s,"error",i),i}}function yi(e){try{let t=xu();if(!t)return;for(let[r,n]of Object.entries(e))n!==void 0&&t.addAnnotation(r,n)}catch(t){console.warn("Failed to add X-Ray annotations:",t)}}function Am(e,t){try{let r=xu();if(!r)return;if(t)r.addMetadata(t,e);else for(let[n,s]of Object.entries(e))r.addMetadata(n,s)}catch(r){console.warn("Failed to add X-Ray metadata:",r)}}async function HU(e,t,r){return lme(`DB:${e}`,t,{operation:"database"},{queryParams:r})}var dme=new Tm.SQS,fme=new Tm.SNS;function pme(e){let t=e.message.toLowerCase(),r=e.name.toLowerCase(),n=e.code,s=["timeout","econnrefused","econnreset","etimedout","enotfound","network","connection","throttl","rate limit","429","503","504","too many requests","service unavailable","gateway timeout"];for(let a of s)if(t.includes(a)||r.includes(a)||n===a)return{type:"transient",shouldRetry:!0,shouldAlert:!1};let i=["unauthorized","forbidden","access denied","authentication","security","corruption","integrity","out of memory","disk full","database corruption"];for(let a of i)if(t.includes(a)||r.includes(a))return{type:"critical",shouldRetry:!1,shouldAlert:!0};let o=["validation","invalid","not found","404","400","bad request","malformed","schema","parse error"];for(let a of o)if(t.includes(a)||r.includes(a)||n===a)return{type:"permanent",shouldRetry:!1,shouldAlert:!1};return{type:"permanent",shouldRetry:!1,shouldAlert:!1}}async function hme(e,t,r,n){let s=process.env.DLQ_URL;if(!s){console.warn("DLQ_URL not configured, skipping DLQ send");return}try{let i={originalEvent:e,error:{name:t.name,message:t.message,stack:t.stack},traceId:r,context:{functionName:n.functionName,functionVersion:n.functionVersion,requestId:n.awsRequestId,timestamp:new Date().toISOString()}};await dme.sendMessage({QueueUrl:s,MessageBody:JSON.stringify(i),MessageAttributes:{traceId:{DataType:"String",StringValue:r},errorType:{DataType:"String",StringValue:t.name}}}).promise(),console.log("Message sent to DLQ",{traceId:r,dlqUrl:s})}catch(i){console.error("Failed to send message to DLQ",i)}}async function mme(e,t,r,n){let s=process.env.ALERT_TOPIC_ARN;if(!s){console.warn("ALERT_TOPIC_ARN not configured, skipping alert");return}try{let i={severity:"CRITICAL",service:r.functionName,error:{name:e.name,message:e.message,stack:e.stack},traceId:t,timestamp:new Date().toISOString(),requestId:r.awsRequestId,event:JSON.stringify(n).substring(0,500)};await fme.publish({TopicArn:s,Subject:`\u{1F6A8} CRITICAL ERROR: ${r.functionName}`,Message:JSON.stringify(i,null,2),MessageAttributes:{severity:{DataType:"String",StringValue:"CRITICAL"},service:{DataType:"String",StringValue:r.functionName}}}).promise(),console.log("Critical alert sent",{traceId:t,alertTopicArn:s})}catch(i){console.error("Failed to send alert",i)}}function jU(e){return async(t,r)=>{let n=Rs(),s=yq(r.functionName,{traceId:n}),i=xu();yi({traceId:n,functionName:r.functionName,requestId:r.awsRequestId});try{s.info("Processing event",{functionName:r.functionName});let o=await e(t,r,s);return yi({status:"success"}),s.info("Event processed successfully"),o}catch(o){let a=o,c=pme(a);throw yi({status:"error",errorType:c.type,errorName:a.name}),Am({error:{name:a.name,message:a.message,stack:a.stack,classification:c.type}},"error"),i&&i.addError(a),s.error("Event processing failed",a,{errorType:c.type}),c.shouldRetry||await hme(t,a,n,r),c.shouldAlert&&await mme(a,n,r,t),a}}}var wr=T(Jb(),1),cDe=wr.default.Client,OH=wr.default.Pool,uDe=wr.default.Connection,lDe=wr.default.types,dDe=wr.default.Query,fDe=wr.default.DatabaseError,pDe=wr.default.escapeIdentifier,hDe=wr.default.escapeLiteral,mDe=wr.default.Result,gDe=wr.default.TypeOverrides,EDe=wr.default.defaults;var NH=require("aws-sdk");var br=new zo("database"),Rye=new NH.SecretsManager,rR=class{constructor(t){this.pool=null;this.credentials=null;this.secretArn=t||process.env.DB_SECRET_ARN||""}async getCredentials(){if(this.credentials)return this.credentials;try{br.info("Fetching database credentials from Secrets Manager",{secretArn:this.secretArn});let t=await Rye.getSecretValue({SecretId:this.secretArn}).promise();if(!t.SecretString)throw new Error("Secret string is empty");let r=JSON.parse(t.SecretString);return this.credentials={username:r.username,password:r.password,host:r.host,port:r.port||5432,dbname:r.dbname||"fibonacci"},br.info("Database credentials fetched successfully"),this.credentials}catch(t){throw br.error("Failed to fetch database credentials",t),t}}async initializePool(){if(this.pool)return this.pool;let t=await this.getCredentials();return br.info("Initializing database connection pool",{host:t.host,port:t.port,database:t.dbname}),this.pool=new OH({user:t.username,password:t.password,host:t.host,port:t.port,database:t.dbname,max:10,idleTimeoutMillis:3e4,connectionTimeoutMillis:1e4,ssl:{rejectUnauthorized:!1}}),this.pool.on("error",r=>{br.error("Unexpected error on idle database client",r)}),br.info("Database connection pool initialized"),this.pool}async getPool(){return await this.initializePool()}async close(){this.pool&&(br.info("Closing database connection pool"),await this.pool.end(),this.pool=null,this.credentials=null)}},Cye=new rR;async function Uu(e,t,r=3){let n=e.trim().split(" ")[0].toUpperCase();return HU(n,async()=>{let s=await Cye.getPool(),i=null;for(let o=1;o<=r;o++)try{br.debug("Executing database query",{attempt:o,query:e.substring(0,100),paramCount:t?.length||0}),Am({query:e.substring(0,200),paramCount:t?.length||0,attempt:o},"database");let a=Date.now(),c=await s.query(e,t),u=Date.now()-a;return yi({dbOperation:n,dbRowCount:c.rowCount||0,dbDuration:u}),br.debug("Query executed successfully",{rowCount:c.rowCount,duration:u}),c}catch(a){if(i=a,br.warn(`Query failed on attempt ${o}`,{attempt:o,maxRetries:r,error:i.message}),!Aye(i)||o===r)throw yi({dbOperation:n,dbError:i.name}),br.error("Query failed permanently",i,{query:e.substring(0,100),attempts:o}),i;let u=Math.pow(2,o)*100;br.debug(`Retrying query after ${u}ms`),await Tye(u)}throw i||new Error("Query failed after retries")},{operation:n,paramCount:t?.length||0})}function Aye(e){let t=["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","57P03","53300","08006","08003"],r=e.message.toLowerCase(),n=e.code;return t.includes(n)||r.includes("connection")||r.includes("timeout")||r.includes("econnrefused")}function Tye(e){return new Promise(t=>setTimeout(t,e))}var Iye=new jm.EventBridgeClient({}),DH=process.env.EVENT_BUS_NAME||"fibonacci-bus-dev",Pye=jU(async(e,t,r)=>{r.info("Agente de Relat\xF3rios iniciado",{time:e.time,functionName:t.functionName});let n=Rs();r.setTraceId(n);let s=new Date,i=new Date(s);i.setDate(i.getDate()-1),r.info("Gerando relat\xF3rio",{inicio:i.toISOString(),fim:s.toISOString(),traceId:n});let o=await xye(r);r.info("Tenants encontrados",{count:o.length,traceId:n});let a=[];for(let c of o)try{let u=await Oye(c.id,i,s,r);a.push(u)}catch(u){r.error("Erro ao gerar relat\xF3rio para tenant",u,{tenantId:c.id,traceId:n})}return r.info("Agente de Relat\xF3rios conclu\xEDdo",{relatoriosGerados:a.length,traceId:n}),{statusCode:200,body:JSON.stringify({relatoriosGerados:a.length,traceId:n})}});async function xye(e){try{return(await Uu(`SELECT DISTINCT tenant_id as id, 
        COALESCE(
          (SELECT company_name FROM alquimista_platform.tenants WHERE id = tenant_id LIMIT 1),
          'Tenant ' || tenant_id
        ) as nome
      FROM nigredo_leads.leads
      WHERE created_at >= NOW() - INTERVAL '30 days'
      ORDER BY tenant_id`)).rows}catch(t){return e.error("Erro ao buscar tenants ativos",t),[{id:"default",nome:"Default Tenant"}]}}async function Oye(e,t,r,n){let s=n.getTraceId();n.info("Gerando relat\xF3rio para tenant",{tenantId:e,inicio:t.toISOString(),fim:r.toISOString(),traceId:s});let i=await Nye(e,t,r,n),o=await Dye(e,t,r,n);i.objecoesRecorrentes=o;let a=await Lye(i,n);i.insights=a;let c={id:Rs(),tenantId:e,periodo:{inicio:t.toISOString(),fim:r.toISOString()},metricas:i,geradoEm:new Date().toISOString()};return await Mye(c,n),await qye(c,s,n),n.info("Relat\xF3rio gerado com sucesso",{tenantId:e,relatorioId:c.id,traceId:s}),c}async function Nye(e,t,r,n){n.info("Calculando m\xE9tricas do funil",{tenantId:e});let i=(await Uu(`SELECT 
      COUNT(*) FILTER (WHERE status = 'novo') as novos,
      COUNT(*) FILTER (WHERE status = 'enriquecido') as enriquecidos,
      COUNT(*) FILTER (WHERE status = 'contatado') as contatados,
      COUNT(*) FILTER (WHERE status = 'respondeu') as responderam,
      COUNT(*) FILTER (WHERE status = 'interessado') as interessados,
      COUNT(*) FILTER (WHERE status = 'agendado') as agendados,
      COUNT(*) FILTER (WHERE status = 'convertido') as convertidos,
      COUNT(*) as total
    FROM nigredo_leads.leads
    WHERE tenant_id = $1
      AND created_at >= $2
      AND created_at < $3`,[e,t,r])).rows[0],o=parseInt(i.total)||0,a=parseInt(i.enriquecidos)||0,c=parseInt(i.contatados)||0,u=parseInt(i.responderam)||0,l=parseInt(i.interessados)||0,d=parseInt(i.agendados)||0,m=parseInt(i.convertidos)||0,g=o>0?a/o*100:0,y=c>0?u/c*100:0,w=u>0?l/u*100:0,I=l>0?d/l*100:0,A=o>0?m/o*100:0,O={periodo:{inicio:t,fim:r},leadsRecebidos:o,leadsEnriquecidos:a,leadsContatados:c,leadsResponderam:u,leadsInteressados:l,leadsAgendados:d,leadsConvertidos:m,taxaEnriquecimento:Math.round(g*100)/100,taxaResposta:Math.round(y*100)/100,taxaInteresse:Math.round(w*100)/100,taxaAgendamento:Math.round(I*100)/100,taxaConversao:Math.round(A*100)/100,objecoesRecorrentes:[],insights:[]};return n.info("M\xE9tricas calculadas",{tenantId:e,leadsRecebidos:o,taxaConversao:O.taxaConversao}),O}async function Dye(e,t,r,n){n.info("Identificando obje\xE7\xF5es recorrentes",{tenantId:e});try{let s=await Uu(`SELECT mensagem, sentimento, COUNT(*) as frequencia
      FROM nigredo_leads.interacoes i
      JOIN nigredo_leads.leads l ON i.lead_id = l.id
      WHERE l.tenant_id = $1
        AND i.created_at >= $2
        AND i.created_at < $3
        AND i.tipo = 'recebido'
        AND (i.sentimento IN ('negativo', 'irritado') OR i.mensagem ILIKE '%n\xE3o%' OR i.mensagem ILIKE '%mas%')
      GROUP BY mensagem, sentimento
      ORDER BY frequencia DESC
      LIMIT 10`,[e,t,r]),i=[],o=new Map;for(let a of s.rows){let c=a.mensagem.toLowerCase(),u=parseInt(a.frequencia);c.includes("pre\xE7o")||c.includes("caro")||c.includes("custo")?o.set("Pre\xE7o alto",(o.get("Pre\xE7o alto")||0)+u):c.includes("tempo")||c.includes("ocupado")||c.includes("agenda")?o.set("Falta de tempo",(o.get("Falta de tempo")||0)+u):c.includes("n\xE3o preciso")||c.includes("n\xE3o precisa")?o.set("N\xE3o v\xEA necessidade",(o.get("N\xE3o v\xEA necessidade")||0)+u):c.includes("j\xE1 tenho")||c.includes("j\xE1 uso")?o.set("J\xE1 tem solu\xE7\xE3o",(o.get("J\xE1 tem solu\xE7\xE3o")||0)+u):c.includes("n\xE3o autorizado")||c.includes("n\xE3o decido")?o.set("N\xE3o \xE9 decisor",(o.get("N\xE3o \xE9 decisor")||0)+u):o.set("Outras obje\xE7\xF5es",(o.get("Outras obje\xE7\xF5es")||0)+u)}for(let[a,c]of o.entries())i.push({objecao:a,frequencia:c});return i.sort((a,c)=>c.frequencia-a.frequencia),n.info("Obje\xE7\xF5es identificadas",{tenantId:e,count:i.length}),i}catch(s){return n.error("Erro ao identificar obje\xE7\xF5es",s,{tenantId:e}),[]}}async function Lye(e,t){t.info("Gerando insights estrat\xE9gicos");let r=[];if(e.taxaConversao>10?r.push(`\u2705 Excelente taxa de convers\xE3o de ${e.taxaConversao}%! O funil est\xE1 performando acima da m\xE9dia do mercado (5-8%).`):e.taxaConversao>5?r.push(`\u2713 Taxa de convers\xE3o de ${e.taxaConversao}% est\xE1 dentro da m\xE9dia do mercado. H\xE1 oportunidades de otimiza\xE7\xE3o.`):e.taxaConversao>0?r.push(`\u26A0\uFE0F Taxa de convers\xE3o de ${e.taxaConversao}% est\xE1 abaixo da m\xE9dia. Recomenda-se revisar estrat\xE9gia de abordagem.`):r.push("\u274C Nenhuma convers\xE3o no per\xEDodo. \xC9 cr\xEDtico revisar todo o processo de prospec\xE7\xE3o."),e.taxaEnriquecimento<70?r.push(`\u26A0\uFE0F Apenas ${e.taxaEnriquecimento}% dos leads foram enriquecidos. Considere melhorar a qualidade dos dados de entrada ou revisar integra\xE7\xF5es MCP.`):e.taxaEnriquecimento>90&&r.push(`\u2705 Alta taxa de enriquecimento (${e.taxaEnriquecimento}%). Os dados de entrada est\xE3o de boa qualidade.`),e.taxaResposta<20?r.push(`\u26A0\uFE0F Taxa de resposta de ${e.taxaResposta}% est\xE1 baixa. Considere:
      \u2022 Revisar hor\xE1rios de disparo
      \u2022 Testar novas varia\xE7\xF5es de mensagens
      \u2022 Verificar se os leads est\xE3o bem segmentados`):e.taxaResposta>40&&r.push(`\u2705 Excelente taxa de resposta de ${e.taxaResposta}%! As mensagens est\xE3o ressoando bem com o p\xFAblico.`),e.taxaInteresse<30&&e.leadsResponderam>0?r.push(`\u26A0\uFE0F Apenas ${e.taxaInteresse}% dos leads que responderam demonstraram interesse. Poss\xEDveis causas:
      \u2022 Leads n\xE3o qualificados
      \u2022 Proposta de valor n\xE3o clara
      \u2022 Timing inadequado`):e.taxaInteresse>60&&r.push(`\u2705 Alta taxa de interesse (${e.taxaInteresse}%). Os leads est\xE3o bem qualificados e a abordagem est\xE1 efetiva.`),e.taxaAgendamento<50&&e.leadsInteressados>0?r.push(`\u26A0\uFE0F Taxa de agendamento de ${e.taxaAgendamento}% pode ser melhorada. Sugest\xF5es:
      \u2022 Facilitar o processo de agendamento
      \u2022 Oferecer mais op\xE7\xF5es de hor\xE1rios
      \u2022 Reduzir fric\xE7\xE3o no processo`):e.taxaAgendamento>70&&r.push(`\u2705 Excelente taxa de agendamento (${e.taxaAgendamento}%). O processo est\xE1 fluido e eficiente.`),e.objecoesRecorrentes.length>0){let s=e.objecoesRecorrentes[0];r.push(`\u{1F4CA} Obje\xE7\xE3o mais comum: "${s.objecao}" (${s.frequencia} ocorr\xEAncias). Considere criar conte\xFAdo espec\xEDfico para endere\xE7ar esta obje\xE7\xE3o.`)}e.leadsRecebidos<10?r.push(`\u26A0\uFE0F Volume baixo de leads (${e.leadsRecebidos}). Considere:
      \u2022 Aumentar investimento em gera\xE7\xE3o de leads
      \u2022 Diversificar fontes de leads
      \u2022 Revisar crit\xE9rios de qualifica\xE7\xE3o`):e.leadsRecebidos>100&&r.push(`\u2705 Alto volume de leads (${e.leadsRecebidos}). Certifique-se de que a equipe tem capacidade para processar todos adequadamente.`);let n=kye(e);return n.length>0&&r.push(`\u{1F50D} Gargalos identificados no funil: ${n.join(", ")}. Foque esfor\xE7os nestas etapas para melhorar convers\xE3o geral.`),t.info("Insights gerados",{count:r.length}),r}function kye(e){let t=[],r=e.leadsRecebidos>0?(e.leadsRecebidos-e.leadsEnriquecidos)/e.leadsRecebidos*100:0,n=e.leadsContatados>0?(e.leadsContatados-e.leadsResponderam)/e.leadsContatados*100:0,s=e.leadsResponderam>0?(e.leadsResponderam-e.leadsInteressados)/e.leadsResponderam*100:0,i=e.leadsInteressados>0?(e.leadsInteressados-e.leadsAgendados)/e.leadsInteressados*100:0;return r>50&&t.push("Enriquecimento de dados"),n>50&&t.push("Taxa de resposta"),s>50&&t.push("Convers\xE3o para interesse"),i>50&&t.push("Agendamento de reuni\xF5es"),t}async function Mye(e,t){t.info("Salvando relat\xF3rio no banco de dados",{relatorioId:e.id,tenantId:e.tenantId});try{let r=new Date(e.periodo.inicio).toISOString().split("T")[0];await Uu(`INSERT INTO nigredo_leads.metricas_diarias (
        id, tenant_id, data, metricas, created_at
      ) VALUES ($1, $2, $3, $4, NOW())
      ON CONFLICT (tenant_id, data) DO UPDATE SET
        metricas = EXCLUDED.metricas,
        updated_at = NOW()`,[e.id,e.tenantId,r,JSON.stringify(e.metricas)]),t.info("Relat\xF3rio salvo com sucesso",{relatorioId:e.id,tenantId:e.tenantId})}catch(r){throw t.error("Erro ao salvar relat\xF3rio",r,{relatorioId:e.id,tenantId:e.tenantId}),r}}async function qye(e,t,r){try{let n=new jm.PutEventsCommand({Entries:[{Source:"nigredo.relatorios",DetailType:"relatorios.generated",Detail:JSON.stringify({relatorioId:e.id,tenantId:e.tenantId,periodo:e.periodo,metricas:{leadsRecebidos:e.metricas.leadsRecebidos,leadsConvertidos:e.metricas.leadsConvertidos,taxaConversao:e.metricas.taxaConversao,taxaResposta:e.metricas.taxaResposta,taxaAgendamento:e.metricas.taxaAgendamento},insightsCount:e.metricas.insights.length,objecoesCount:e.metricas.objecoesRecorrentes.length,traceId:t,timestamp:new Date().toISOString()}),EventBusName:DH}]}),s=await Iye.send(n);r.info("Evento de relat\xF3rio publicado",{eventBusName:DH,relatorioId:e.id,tenantId:e.tenantId,failedEntryCount:s.FailedEntryCount||0,traceId:t}),s.FailedEntryCount&&s.FailedEntryCount>0&&r.error("Falha ao publicar evento",new Error("EventBridge failed"),{failedEntries:s.Entries,traceId:t})}catch(n){throw r.error("Erro ao publicar evento no EventBridge",n,{relatorioId:e.id,traceId:t}),n}}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
