"use strict";var W3=Object.create;var vc=Object.defineProperty;var z3=Object.getOwnPropertyDescriptor;var G3=Object.getOwnPropertyNames;var K3=Object.getPrototypeOf,X3=Object.prototype.hasOwnProperty;var ZR=t=>{throw TypeError(t)};var Q3=(t,e,r)=>e in t?vc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var b=(t,e)=>()=>(t&&(e=t(t=0)),e);var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Tt=(t,e)=>{for(var r in e)vc(t,r,{get:e[r],enumerable:!0})},eA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of G3(e))!X3.call(t,s)&&s!==r&&vc(t,s,{get:()=>e[s],enumerable:!(n=z3(e,s))||n.enumerable});return t};var C=(t,e,r)=>(r=t!=null?W3(K3(t)):{},eA(e||!t||!t.__esModule?vc(r,"default",{value:t,enumerable:!0}):r,t)),le=t=>eA(vc({},"__esModule",{value:!0}),t);var f=(t,e,r)=>Q3(t,typeof e!="symbol"?e+"":e,r),Ey=(t,e,r)=>e.has(t)||ZR("Cannot "+r);var k=(t,e,r)=>(Ey(t,e,"read from private field"),r?r.call(t):e.get(t)),Le=(t,e,r)=>e.has(t)?ZR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),pt=(t,e,r,n)=>(Ey(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),je=(t,e,r)=>(Ey(t,e,"access private method"),r);var Pn=_(ke=>{"use strict";ke.HttpAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ke.HttpAuthLocation||(ke.HttpAuthLocation={}));ke.HttpApiKeyAuthLocation=void 0;(function(t){t.HEADER="header",t.QUERY="query"})(ke.HttpApiKeyAuthLocation||(ke.HttpApiKeyAuthLocation={}));ke.EndpointURLScheme=void 0;(function(t){t.HTTP="http",t.HTTPS="https"})(ke.EndpointURLScheme||(ke.EndpointURLScheme={}));ke.AlgorithmId=void 0;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ke.AlgorithmId||(ke.AlgorithmId={}));var Y3=t=>{let e=[];return t.sha256!==void 0&&e.push({algorithmId:()=>ke.AlgorithmId.SHA256,checksumConstructor:()=>t.sha256}),t.md5!=null&&e.push({algorithmId:()=>ke.AlgorithmId.MD5,checksumConstructor:()=>t.md5}),{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},J3=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Z3=t=>Y3(t),eV=t=>J3(t);ke.FieldPosition=void 0;(function(t){t[t.HEADER=0]="HEADER",t[t.TRAILER=1]="TRAILER"})(ke.FieldPosition||(ke.FieldPosition={}));var tV="__smithy_context";ke.IniSectionType=void 0;(function(t){t.PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services"})(ke.IniSectionType||(ke.IniSectionType={}));ke.RequestHandlerProtocol=void 0;(function(t){t.HTTP_0_9="http/0.9",t.HTTP_1_0="http/1.0",t.TDS_8_0="tds/8.0"})(ke.RequestHandlerProtocol||(ke.RequestHandlerProtocol={}));ke.SMITHY_CONTEXT_KEY=tV;ke.getDefaultClientConfiguration=Z3;ke.resolveDefaultRuntimeConfig=eV});var Oe=_(_s=>{"use strict";var rV=Pn(),nV=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),sV=t=>({httpHandler:t.httpHandler()}),_y=class{constructor({name:e,kind:r=rV.FieldPosition.HEADER,values:n=[]}){f(this,"name");f(this,"kind");f(this,"values");this.name=e,this.kind=r,this.values=n}add(e){this.values.push(e)}set(e){this.values=e}remove(e){this.values=this.values.filter(r=>r!==e)}toString(){return this.values.map(e=>e.includes(",")||e.includes(" ")?`"${e}"`:e).join(", ")}get(){return this.values}},Sy=class{constructor({fields:e=[],encoding:r="utf-8"}){f(this,"entries",{});f(this,"encoding");e.forEach(this.setField.bind(this)),this.encoding=r}setField(e){this.entries[e.name.toLowerCase()]=e}getField(e){return this.entries[e.toLowerCase()]}removeField(e){delete this.entries[e.toLowerCase()]}getByType(e){return Object.values(this.entries).filter(r=>r.kind===e)}},vy=class t{constructor(e){f(this,"method");f(this,"protocol");f(this,"hostname");f(this,"port");f(this,"path");f(this,"query");f(this,"headers");f(this,"username");f(this,"password");f(this,"fragment");f(this,"body");this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){let r=new t({...e,headers:{...e.headers}});return r.query&&(r.query=iV(r.query)),r}static isInstance(e){if(!e)return!1;let r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return t.clone(this)}};function iV(t){return Object.keys(t).reduce((e,r)=>{let n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}var wy=class{constructor(e){f(this,"statusCode");f(this,"reason");f(this,"headers");f(this,"body");this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;let r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function oV(t){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(t)}_s.Field=_y;_s.Fields=Sy;_s.HttpRequest=vy;_s.HttpResponse=wy;_s.getHttpHandlerExtensionConfiguration=nV;_s.isValidHostname=oV;_s.resolveHttpHandlerRuntimeConfig=sV});var bc=_(wc=>{"use strict";var aV=Oe();function cV(t){return t}var tA=t=>e=>async r=>{if(!aV.HttpRequest.isInstance(r.request))return e(r);let{request:n}=r,{handlerProtocol:s=""}=t.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return e(r)},rA={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},uV=t=>({applyToStack:e=>{e.add(tA(t),rA)}});wc.getHostHeaderPlugin=uV;wc.hostHeaderMiddleware=tA;wc.hostHeaderMiddlewareOptions=rA;wc.resolveHostHeaderConfig=cV});var Rc=_(id=>{"use strict";var nA=()=>(t,e)=>async r=>{try{let n=await t(r),{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:u}=a,l=c??e.inputFilterSensitiveLog,d=u??e.outputFilterSensitiveLog,{$metadata:m,...g}=n.output;return o?.info?.({clientName:s,commandName:i,input:l(r.input),output:d(g),metadata:m}),n}catch(n){let{clientName:s,commandName:i,logger:o,dynamoDbDocumentClientOptions:a={}}=e,{overrideInputFilterSensitiveLog:c}=a,u=c??e.inputFilterSensitiveLog;throw o?.error?.({clientName:s,commandName:i,input:u(r.input),error:n,metadata:n.$metadata}),n}},sA={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},lV=t=>({applyToStack:e=>{e.add(nA(),sA)}});id.getLoggerPlugin=lV;id.loggerMiddleware=nA;id.loggerMiddlewareOptions=sA});var oA={};Tt(oA,{InvokeStore:()=>fV});var iA,by,dV,Ac,od,fV,aA=b(()=>{iA=require("async_hooks"),by=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";by||(globalThis.awslambda=globalThis.awslambda||{});dV={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID"),TENANT_ID:Symbol("_AWS_LAMBDA_TENANT_ID")},Ac=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static getTenantId(){return this.get(this.PROTECTED_KEYS.TENANT_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(Ac,"storage",new iA.AsyncLocalStorage),f(Ac,"PROTECTED_KEYS",dV);!by&&globalThis.awslambda?.InvokeStore?od=globalThis.awslambda.InvokeStore:(od=Ac,!by&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=od));fV=od});var cA=_(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.recursionDetectionMiddleware=void 0;var pV=(aA(),le(oA)),hV=Oe(),Ry="X-Amzn-Trace-Id",mV="AWS_LAMBDA_FUNCTION_NAME",gV="_X_AMZN_TRACE_ID",yV=()=>t=>async e=>{let{request:r}=e;if(!hV.HttpRequest.isInstance(r))return t(e);let n=Object.keys(r.headers??{}).find(u=>u.toLowerCase()===Ry.toLowerCase())??Ry;if(r.headers.hasOwnProperty(n))return t(e);let s=process.env[mV],i=process.env[gV],a=pV.InvokeStore.getXRayTraceId()??i,c=u=>typeof u=="string"&&u.length>0;return c(s)&&c(a)&&(r.headers[Ry]=a),t({...e,request:r})};ad.recursionDetectionMiddleware=yV});var Cc=_(cd=>{"use strict";var Ay=cA(),EV={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},_V=t=>({applyToStack:e=>{e.add(Ay.recursionDetectionMiddleware(),EV)}});cd.getRecursionDetectionPlugin=_V;Object.keys(Ay).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(cd,t)&&Object.defineProperty(cd,t,{enumerable:!0,get:function(){return Ay[t]}})})});var Cy,SV,uA=b(()=>{Cy=C(Pn()),SV=t=>t[Cy.SMITHY_CONTEXT_KEY]||(t[Cy.SMITHY_CONTEXT_KEY]={})});var Bt=_(Ty=>{"use strict";var lA=Pn(),vV=t=>t[lA.SMITHY_CONTEXT_KEY]||(t[lA.SMITHY_CONTEXT_KEY]={}),wV=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e};Ty.getSmithyContext=vV;Ty.normalizeProvider=wV});var dA,fA=b(()=>{dA=(t,e)=>{if(!e||e.length===0)return t;let r=[];for(let n of e)for(let s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(let n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r}});function bV(t){let e=new Map;for(let r of t)e.set(r.schemeId,r);return e}var pA,Tc,ud=b(()=>{pA=C(Bt());fA();Tc=(t,e)=>(r,n)=>async s=>{let i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),o=t.authSchemePreference?await t.authSchemePreference():[],a=dA(i,o),c=bV(t.httpAuthSchemes),u=(0,pA.getSmithyContext)(n),l=[];for(let d of a){let m=c.get(d.schemeId);if(!m){l.push(`HttpAuthScheme \`${d.schemeId}\` was not enabled for this service.`);continue}let g=m.identityProvider(await e.identityProviderConfigProvider(t));if(!g){l.push(`HttpAuthScheme \`${d.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:E={},signingProperties:w={}}=d.propertiesExtractor?.(t,n)||{};d.identityProperties=Object.assign(d.identityProperties||{},E),d.signingProperties=Object.assign(d.signingProperties||{},w),u.selectedHttpAuthScheme={httpAuthOption:d,identity:await g(d.identityProperties),signer:m.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(s)}});var hA,xc,mA=b(()=>{ud();hA={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},xc=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Tc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),hA)}})});var Pc=_(Ro=>{"use strict";var RV=Oe(),gA=(t,e)=>(r,n)=>async s=>{let{response:i}=await r(s);try{let o=await e(i,t);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{o.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof o.$responseBodyText<"u"&&o.$response&&(o.$response.body=o.$responseBodyText);try{if(RV.HttpResponse.isInstance(i)){let{headers:c={}}=i,u=Object.entries(c);o.$metadata={httpStatusCode:i.statusCode,requestId:xy(/^x-[\w-]+-request-?id$/,u),extendedRequestId:xy(/^x-[\w-]+-id-2$/,u),cfId:xy(/^x-[\w-]+-cf-id$/,u)}}}catch{}}throw o}},xy=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],yA=(t,e)=>(r,n)=>async s=>{let i=t,o=n.endpointV2?.url&&i.urlParser?async()=>i.urlParser(n.endpointV2.url):i.endpoint;if(!o)throw new Error("No valid endpoint provider available.");let a=await e(s.input,{...t,endpoint:o});return r({...s,request:a})},EA={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},_A={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function AV(t,e,r){return{applyToStack:n=>{n.add(gA(t,r),EA),n.add(yA(t,e),_A)}}}Ro.deserializerMiddleware=gA;Ro.deserializerMiddlewareOption=EA;Ro.getSerdePlugin=AV;Ro.serializerMiddleware=yA;Ro.serializerMiddlewareOption=_A});var SA,vA,CV,wA=b(()=>{SA=C(Pc());ud();vA={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:SA.serializerMiddlewareOption.name},CV=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Tc(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),vA)}})});var bA=b(()=>{ud();mA();wA()});var RA,AA,TV,xV,Py,Iy=b(()=>{RA=C(Oe()),AA=C(Bt()),TV=t=>e=>{throw e},xV=(t,e)=>{},Py=t=>(e,r)=>async n=>{if(!RA.HttpRequest.isInstance(n.request))return e(n);let i=(0,AA.getSmithyContext)(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u=await e({...n,request:await c.sign(n.request,a,o)}).catch((c.errorHandler||TV)(o));return(c.successHandler||xV)(u.response,o),u}});var CA,Ic,TA=b(()=>{Iy();CA={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Ic=t=>({applyToStack:e=>{e.addRelativeTo(Py(t),CA)}})});var xA=b(()=>{Iy();TA()});var Ss,PA=b(()=>{Ss=t=>{if(typeof t=="function")return t;let e=Promise.resolve(t);return()=>e}});function IA(t,e,r,n,s){return async function*(o,a,...c){let u=a,l=o.startingToken??u[r],d=!0,m;for(;d;){if(u[r]=l,s&&(u[s]=u[s]??o.pageSize),o.client instanceof t)m=await PV(e,o.client,a,o.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${t.name}`);yield m;let g=l;l=IV(m,n),d=!!(l&&(!o.stopOnSameToken||l!==g))}return void 0}}var PV,IV,OA=b(()=>{PV=async(t,e,r,n=i=>i,...s)=>{let i=new t(r);return i=n(i)??i,await e.send(i,...s)};IV=(t,e)=>{let r=t,n=e.split(".");for(let s of n){if(!r||typeof r!="object")return;r=r[s]}return r}});var Oy=_(NA=>{"use strict";var OV=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]";NA.isArrayBuffer=OV});var Ao=_(Dy=>{"use strict";var NV=Oy(),Ny=require("buffer"),DV=(t,e=0,r=t.byteLength-e)=>{if(!NV.isArrayBuffer(t))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof t} (${t})`);return Ny.Buffer.from(t,e,r)},LV=(t,e)=>{if(typeof t!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof t} (${t})`);return e?Ny.Buffer.from(t,e):Ny.Buffer.from(t)};Dy.fromArrayBuffer=DV;Dy.fromString=LV});var DA=_(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.fromBase64=void 0;var kV=Ao(),MV=/^[A-Za-z0-9+/]*={0,2}$/,qV=t=>{if(t.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!MV.exec(t))throw new TypeError("Invalid base64 string.");let e=(0,kV.fromString)(t,"base64");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)};ld.fromBase64=qV});var St=_(dd=>{"use strict";var LA=Ao(),kA=t=>{let e=LA.fromString(t,"utf8");return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT)},$V=t=>typeof t=="string"?kA(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),FV=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return LA.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength).toString("utf8")};dd.fromUtf8=kA;dd.toUint8Array=$V;dd.toUtf8=FV});var MA=_(fd=>{"use strict";Object.defineProperty(fd,"__esModule",{value:!0});fd.toBase64=void 0;var UV=Ao(),BV=St(),jV=t=>{let e;if(typeof t=="string"?e=(0,BV.fromUtf8)(t):e=t,typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,UV.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("base64")};fd.toBase64=jV});var vt=_(Oc=>{"use strict";var qA=DA(),$A=MA();Object.keys(qA).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Oc,t)&&Object.defineProperty(Oc,t,{enumerable:!0,get:function(){return qA[t]}})});Object.keys($A).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Oc,t)&&Object.defineProperty(Oc,t,{enumerable:!0,get:function(){return $A[t]}})})});var ky=_(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.ChecksumStream=void 0;var HV=vt(),VV=require("stream"),Ly=class extends VV.Duplex{constructor({expectedChecksum:r,checksum:n,source:s,checksumSourceLocation:i,base64Encoder:o}){super();f(this,"expectedChecksum");f(this,"checksumSourceLocation");f(this,"checksum");f(this,"source");f(this,"base64Encoder");if(typeof s.pipe=="function")this.source=s;else throw new Error(`@smithy/util-stream: unsupported source type ${s?.constructor?.name??s} in ChecksumStream.`);this.base64Encoder=o??HV.toBase64,this.expectedChecksum=r,this.checksum=n,this.checksumSourceLocation=i,this.source.pipe(this)}_read(r){}_write(r,n,s){try{this.checksum.update(r),this.push(r)}catch(i){return s(i)}return s()}async _final(r){try{let n=await this.checksum.digest(),s=this.base64Encoder(n);if(this.expectedChecksum!==s)return r(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${s}" in response header "${this.checksumSourceLocation}".`))}catch(n){return r(n)}return this.push(null),r()}};pd.ChecksumStream=Ly});var vs=_(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.isBlob=Co.isReadableStream=void 0;var WV=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream);Co.isReadableStream=WV;var zV=t=>typeof Blob=="function"&&(t?.constructor?.name===Blob.name||t instanceof Blob);Co.isBlob=zV});var FA=_(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});hd.ChecksumStream=void 0;var GV=typeof ReadableStream=="function"?ReadableStream:function(){},My=class extends GV{};hd.ChecksumStream=My});var UA=_(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.createChecksumStream=void 0;var KV=vt(),XV=vs(),QV=FA(),YV=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!(0,XV.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);let i=s??KV.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let o=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){let u=await e.digest(),l=i(u);if(t!==l){let d=new Error(`Checksum mismatch: expected "${t}" but received "${l}" in response header "${n}".`);c.error(d)}else c.terminate()}});r.pipeThrough(o);let a=o.readable;return Object.setPrototypeOf(a,QV.ChecksumStream.prototype),a};md.createChecksumStream=YV});var BA=_(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.createChecksumStream=tW;var JV=vs(),ZV=ky(),eW=UA();function tW(t){return typeof ReadableStream=="function"&&(0,JV.isReadableStream)(t.source)?(0,eW.createChecksumStream)(t):new ZV.ChecksumStream(t)}});var Fy=_(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});gd.ByteArrayCollector=void 0;var $y=class{constructor(e){f(this,"allocByteArray");f(this,"byteLength",0);f(this,"byteArrays",[]);this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let e=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}};gd.ByteArrayCollector=$y});var WA=_(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.createBufferedReadable=void 0;In.createBufferedReadableStream=jA;In.merge=HA;In.flush=yd;In.sizeOf=To;In.modeOf=VA;var rW=Fy();function jA(t,e,r){let n=t.getReader(),s=!1,i=0,o=["",new rW.ByteArrayCollector(u=>new Uint8Array(u))],a=-1,c=async u=>{let{value:l,done:d}=await n.read(),m=l;if(d){if(a!==-1){let g=yd(o,a);To(g)>0&&u.enqueue(g)}u.close()}else{let g=VA(m,!1);if(a!==g&&(a>=0&&u.enqueue(yd(o,a)),a=g),a===-1){u.enqueue(m);return}let E=To(m);i+=E;let w=To(o[a]);if(E>=e&&w===0)u.enqueue(m);else{let x=HA(o,a,m);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${E} is below threshold of ${e}, automatically buffering.`)),x>=e?u.enqueue(yd(o,a)):await c(u)}}};return new ReadableStream({pull:c})}In.createBufferedReadable=jA;function HA(t,e,r){switch(e){case 0:return t[0]+=r,To(t[0]);case 1:case 2:return t[e].push(r),To(t[e])}}function yd(t,e){switch(e){case 0:let r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function To(t){return t?.byteLength??t?.length??0}function VA(t,e=!0){return e&&typeof Buffer<"u"&&t instanceof Buffer?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}});var GA=_(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.createBufferedReadable=iW;var nW=require("stream"),zA=Fy(),On=WA(),sW=vs();function iW(t,e,r){if((0,sW.isReadableStream)(t))return(0,On.createBufferedReadableStream)(t,e,r);let n=new nW.Readable({read(){}}),s=!1,i=0,o=["",new zA.ByteArrayCollector(c=>new Uint8Array(c)),new zA.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return t.on("data",c=>{let u=(0,On.modeOf)(c,!0);if(a!==u&&(a>=0&&n.push((0,On.flush)(o,a)),a=u),a===-1){n.push(c);return}let l=(0,On.sizeOf)(c);i+=l;let d=(0,On.sizeOf)(o[a]);if(l>=e&&d===0)n.push(c);else{let m=(0,On.merge)(o,a,c);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${e}, automatically buffering.`)),m>=e&&n.push((0,On.flush)(o,a))}}),t.on("end",()=>{if(a!==-1){let c=(0,On.flush)(o,a);(0,On.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var KA=_(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.getAwsChunkedEncodingStream=void 0;var oW=require("stream"),aW=(t,e)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=e,a=r!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,t):void 0,u=new oW.Readable({read:()=>{}});return t.on("data",l=>{let d=n(l)||0;u.push(`${d.toString(16)}\r
`),u.push(l),u.push(`\r
`)}),t.on("end",async()=>{if(u.push(`0\r
`),a){let l=r(await c);u.push(`${i}:${l}\r
`),u.push(`\r
`)}u.push(null)}),u};Ed.getAwsChunkedEncodingStream=aW});var XA=_(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});By.headStream=cW;async function cW(t,e){let r=0,n=[],s=t.getReader(),i=!1;for(;!i;){let{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;i=c}s.releaseLock();let o=new Uint8Array(Math.min(e,r)),a=0;for(let c of n){if(c.byteLength>o.byteLength-a){o.set(c.subarray(0,o.byteLength-a),a);break}else o.set(c,a);a+=c.length}return o}});var QA=_(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});_d.headStream=void 0;var uW=require("stream"),lW=XA(),dW=vs(),fW=(t,e)=>(0,dW.isReadableStream)(t)?(0,lW.headStream)(t,e):new Promise((r,n)=>{let s=new jy;s.limit=e,t.pipe(s),t.on("error",i=>{s.end(),n(i)}),s.on("error",n),s.on("finish",function(){let i=new Uint8Array(Buffer.concat(this.buffers));r(i)})});_d.headStream=fW;var jy=class extends uW.Writable{constructor(){super(...arguments);f(this,"buffers",[]);f(this,"limit",1/0);f(this,"bytesBuffered",0)}_write(r,n,s){if(this.buffers.push(r),this.bytesBuffered+=r.byteLength??0,this.bytesBuffered>=this.limit){let i=this.bytesBuffered-this.limit,o=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=o.subarray(0,o.byteLength-i),this.emit("finish")}s()}}});var Vy=_(Hy=>{"use strict";var YA=t=>encodeURIComponent(t).replace(/[!'()*]/g,pW),pW=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`,hW=t=>t.split("/").map(YA).join("/");Hy.escapeUri=YA;Hy.escapeUriPath=hW});var zy=_(JA=>{"use strict";var Wy=Vy();function mW(t){let e=[];for(let r of Object.keys(t).sort()){let n=t[r];if(r=Wy.escapeUri(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${Wy.escapeUri(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Wy.escapeUri(n)}`),e.push(s)}}return e.join("&")}JA.buildQueryString=mW});var yi=_(Nc=>{"use strict";var rC=Oe(),nC=zy(),Sd=require("http"),vd=require("https"),sC=require("stream"),Gy=require("http2"),gW=["ECONNRESET","EPIPE","ETIMEDOUT"],iC=t=>{let e={};for(let r of Object.keys(t)){let n=t[r];e[r]=Array.isArray(n)?n.join(","):n}return e},jt={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},ZA=1e3,yW=(t,e,r=0)=>{if(!r)return-1;let n=s=>{let i=jt.setTimeout(()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket did not establish a connection with the server within the configured timeout of ${r} ms.`),{name:"TimeoutError"}))},r-s),o=a=>{a?.connecting?a.on("connect",()=>{jt.clearTimeout(i)}):jt.clearTimeout(i)};t.socket?o(t.socket):t.on("socket",o)};return r<2e3?(n(0),0):jt.setTimeout(n.bind(null,ZA),ZA)},EW=(t,e,r=0,n,s)=>r?jt.setTimeout(()=>{let i=`@smithy/node-http-handler - [${n?"ERROR":"WARN"}] a request has exceeded the configured ${r} ms requestTimeout.`;if(n){let o=Object.assign(new Error(i),{name:"TimeoutError",code:"ETIMEDOUT"});t.destroy(o),e(o)}else i+=" Init client requestHandler with throwOnRequestTimeout=true to turn this into an error.",s?.warn?.(i)},r):-1,_W=3e3,SW=(t,{keepAlive:e,keepAliveMsecs:r},n=_W)=>{if(e!==!0)return-1;let s=()=>{t.socket?t.socket.setKeepAlive(e,r||0):t.on("socket",i=>{i.setKeepAlive(e,r||0)})};return n===0?(s(),0):jt.setTimeout(s,n)},eC=3e3,vW=(t,e,r=0)=>{let n=s=>{let i=r-s,o=()=>{t.destroy(),e(Object.assign(new Error(`@smithy/node-http-handler - the request socket timed out after ${r} ms of inactivity (configured by client requestHandler).`),{name:"TimeoutError"}))};t.socket?(t.socket.setTimeout(i,o),t.on("close",()=>t.socket?.removeListener("timeout",o))):t.setTimeout(i,o)};return 0<r&&r<6e3?(n(0),0):jt.setTimeout(n.bind(null,r===0?0:eC),eC)},tC=6e3;async function oC(t,e,r=tC,n=!1){let s=e.headers??{},i=s.Expect||s.expect,o=-1,a=!0;!n&&i==="100-continue"&&(a=await Promise.race([new Promise(c=>{o=Number(jt.setTimeout(()=>c(!0),Math.max(tC,r)))}),new Promise(c=>{t.on("continue",()=>{jt.clearTimeout(o),c(!0)}),t.on("response",()=>{jt.clearTimeout(o),c(!1)}),t.on("error",()=>{jt.clearTimeout(o),c(!1)})})])),a&&wW(t,e.body)}function wW(t,e){if(e instanceof sC.Readable){e.pipe(t);return}if(e){if(Buffer.isBuffer(e)||typeof e=="string"){t.end(e);return}let r=e;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){t.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}t.end(Buffer.from(e));return}t.end()}var bW=0,Ky=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"socketWarningTimestamp",0);f(this,"externalAgent",!1);f(this,"metadata",{handlerProtocol:"http/1.1"});this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(this.resolveDefaultConfig(s))}).catch(n):r(this.resolveDefaultConfig(e))})}static create(e){return typeof e?.handle=="function"?e:new t(e)}static checkSocketUsage(e,r,n=console){let{sockets:s,requests:i,maxSockets:o}=e;if(typeof o!="number"||o===1/0||Date.now()-15e3<r)return r;if(s&&i)for(let c in s){let u=s[c]?.length??0,l=i[c]?.length??0;if(u>=o&&l>=2*o)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${u} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(e){let{requestTimeout:r,connectionTimeout:n,socketTimeout:s,socketAcquisitionWarningTimeout:i,httpAgent:o,httpsAgent:a,throwOnRequestTimeout:c}=e||{},u=!0,l=50;return{connectionTimeout:n,requestTimeout:r,socketTimeout:s,socketAcquisitionWarningTimeout:i,throwOnRequestTimeout:c,httpAgent:o instanceof Sd.Agent||typeof o?.destroy=="function"?(this.externalAgent=!0,o):new Sd.Agent({keepAlive:u,maxSockets:l,...o}),httpsAgent:a instanceof vd.Agent||typeof a?.destroy=="function"?(this.externalAgent=!0,a):new vd.Agent({keepAlive:u,maxSockets:l,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((s,i)=>{let o=this.config,a,c=[],u=async he=>{await a,c.forEach(jt.clearTimeout),s(he)},l=async he=>{await a,c.forEach(jt.clearTimeout),i(he)};if(r?.aborted){let he=new Error("Request aborted");he.name="AbortError",l(he);return}let d=e.protocol==="https:",m=e.headers??{},g=(m.Expect??m.expect)==="100-continue",E=d?o.httpsAgent:o.httpAgent;g&&!this.externalAgent&&(E=new(d?vd.Agent:Sd.Agent)({keepAlive:!1,maxSockets:1/0})),c.push(jt.setTimeout(()=>{this.socketWarningTimestamp=t.checkSocketUsage(E,this.socketWarningTimestamp,o.logger)},o.socketAcquisitionWarningTimeout??(o.requestTimeout??2e3)+(o.connectionTimeout??1e3)));let w=nC.buildQueryString(e.query||{}),x;if(e.username!=null||e.password!=null){let he=e.username??"",oe=e.password??"";x=`${he}:${oe}`}let T=e.path;w&&(T+=`?${w}`),e.fragment&&(T+=`#${e.fragment}`);let O=e.hostname??"";O[0]==="["&&O.endsWith("]")?O=e.hostname.slice(1,-1):O=e.hostname;let M={headers:e.headers,host:O,method:e.method,path:T,port:e.port,agent:E,auth:x},W=(d?vd.request:Sd.request)(M,he=>{let oe=new rC.HttpResponse({statusCode:he.statusCode||-1,reason:he.statusMessage,headers:iC(he.headers),body:he});u({response:oe})});if(W.on("error",he=>{gW.includes(he.code)?l(Object.assign(he,{name:"TimeoutError"})):l(he)}),r){let he=()=>{W.destroy();let oe=new Error("Request aborted");oe.name="AbortError",l(oe)};if(typeof r.addEventListener=="function"){let oe=r;oe.addEventListener("abort",he,{once:!0}),W.once("close",()=>oe.removeEventListener("abort",he))}else r.onabort=he}let ye=n??o.requestTimeout;c.push(yW(W,l,o.connectionTimeout)),c.push(EW(W,l,ye,o.throwOnRequestTimeout,o.logger??console)),c.push(vW(W,l,o.socketTimeout));let at=M.agent;typeof at=="object"&&"keepAlive"in at&&c.push(SW(W,{keepAlive:at.keepAlive,keepAliveMsecs:at.keepAliveMsecs})),a=oC(W,e,ye,this.externalAgent).catch(he=>(c.forEach(jt.clearTimeout),i(he)))})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}},Xy=class{constructor(e){f(this,"sessions",[]);this.sessions=e??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(e){this.sessions.push(e)}contains(e){return this.sessions.includes(e)}remove(e){this.sessions=this.sessions.filter(r=>r!==e)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(e){for(let r of this.sessions)r===e&&(r.destroyed||r.destroy())}},Qy=class{constructor(e){f(this,"config");f(this,"sessionCache",new Map);if(this.config=e,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(e,r){let n=this.getUrlString(e),s=this.sessionCache.get(n);if(s){let c=s.poll();if(c&&!this.config.disableConcurrency)return c}let i=Gy.connect(n);this.config.maxConcurrency&&i.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+e.destination.toString())}),i.unref();let o=()=>{i.destroy(),this.deleteSession(n,i)};i.on("goaway",o),i.on("error",o),i.on("frameError",o),i.on("close",()=>this.deleteSession(n,i)),r.requestTimeout&&i.setTimeout(r.requestTimeout,o);let a=this.sessionCache.get(n)||new Xy;return a.offerLast(i),this.sessionCache.set(n,a),i}deleteSession(e,r){let n=this.sessionCache.get(e);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(e,n))}release(e,r){let n=this.getUrlString(e);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[e,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(e)}}setMaxConcurrentStreams(e){if(e&&e<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=e}setDisableConcurrentStreams(e){this.config.disableConcurrency=e}getUrlString(e){return e.destination.toString()}},Yy=class t{constructor(e){f(this,"config");f(this,"configProvider");f(this,"metadata",{handlerProtocol:"h2"});f(this,"connectionManager",new Qy({}));this.configProvider=new Promise((r,n)=>{typeof e=="function"?e().then(s=>{r(s||{})}).catch(n):r(e||{})})}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){this.connectionManager.destroy()}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:s,disableConcurrentStreams:i}=this.config,o=n??s;return new Promise((a,c)=>{let u=!1,l,d=async Ie=>{await l,a(Ie)},m=async Ie=>{await l,c(Ie)};if(r?.aborted){u=!0;let Ie=new Error("Request aborted");Ie.name="AbortError",m(Ie);return}let{hostname:g,method:E,port:w,protocol:x,query:T}=e,O="";if(e.username!=null||e.password!=null){let Ie=e.username??"",rt=e.password??"";O=`${Ie}:${rt}@`}let M=`${x}//${O}${g}${w?`:${w}`:""}`,U={destination:new URL(M)},W=this.connectionManager.lease(U,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:i||!1}),ye=Ie=>{i&&this.destroySession(W),u=!0,m(Ie)},at=nC.buildQueryString(T||{}),he=e.path;at&&(he+=`?${at}`),e.fragment&&(he+=`#${e.fragment}`);let oe=W.request({...e.headers,[Gy.constants.HTTP2_HEADER_PATH]:he,[Gy.constants.HTTP2_HEADER_METHOD]:E});if(W.ref(),oe.on("response",Ie=>{let rt=new rC.HttpResponse({statusCode:Ie[":status"]||-1,headers:iC(Ie),body:oe});u=!0,d({response:rt}),i&&(W.close(),this.connectionManager.deleteSession(M,W))}),o&&oe.setTimeout(o,()=>{oe.close();let Ie=new Error(`Stream timed out because of no activity for ${o} ms`);Ie.name="TimeoutError",ye(Ie)}),r){let Ie=()=>{oe.close();let rt=new Error("Request aborted");rt.name="AbortError",ye(rt)};if(typeof r.addEventListener=="function"){let rt=r;rt.addEventListener("abort",Ie,{once:!0}),oe.once("close",()=>rt.removeEventListener("abort",Ie))}else r.onabort=Ie}oe.on("frameError",(Ie,rt,bo)=>{ye(new Error(`Frame type id ${Ie} in stream id ${bo} has failed with code ${rt}.`))}),oe.on("error",ye),oe.on("aborted",()=>{ye(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${oe.rstCode}.`))}),oe.on("close",()=>{W.unref(),i&&W.destroy(),u||ye(new Error("Unexpected error: http2 request did not get a response"))}),l=oC(oe,e,o)})}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[e]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(e){e.destroyed||e.destroy()}},Jy=class extends sC.Writable{constructor(){super(...arguments);f(this,"bufferedBytes",[])}_write(r,n,s){this.bufferedBytes.push(r),s()}},RW=t=>AW(t)?CW(t):new Promise((e,r)=>{let n=new Jy;t.pipe(n),t.on("error",s=>{n.end(),r(s)}),n.on("error",r),n.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.bufferedBytes));e(s)})}),AW=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream;async function CW(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}Nc.DEFAULT_REQUEST_TIMEOUT=bW;Nc.NodeHttp2Handler=Yy;Nc.NodeHttpHandler=Ky;Nc.streamCollector=RW});var uC=_(bd=>{"use strict";var aC=Oe(),TW=zy(),xW=vt();function cC(t,e){return new Request(t,e)}function PW(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{let n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}var wd={supported:void 0},Zy=class t{constructor(e){f(this,"config");f(this,"configProvider");typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),wd.supported===void 0&&(wd.supported=typeof Request<"u"&&"keepalive"in cC("https://[::1]"))}static create(e){return typeof e?.handle=="function"?e:new t(e)}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,o=this.config.credentials;if(r?.aborted){let O=new Error("Request aborted");return O.name="AbortError",Promise.reject(O)}let a=e.path,c=TW.buildQueryString(e.query||{});c&&(a+=`?${c}`),e.fragment&&(a+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){let O=e.username??"",M=e.password??"";u=`${O}:${M}@`}let{port:l,method:d}=e,m=`${e.protocol}//${u}${e.hostname}${l?`:${l}`:""}${a}`,g=d==="GET"||d==="HEAD"?void 0:e.body,E={body:g,headers:new Headers(e.headers),method:d,credentials:o};this.config?.cache&&(E.cache=this.config.cache),g&&(E.duplex="half"),typeof AbortController<"u"&&(E.signal=r),wd.supported&&(E.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(E,this.config.requestInit(e));let w=()=>{},x=cC(m,E),T=[fetch(x).then(O=>{let M=O.headers,U={};for(let ye of M.entries())U[ye[0]]=ye[1];return O.body!=null?{response:new aC.HttpResponse({headers:U,reason:O.statusText,statusCode:O.status,body:O.body})}:O.blob().then(ye=>({response:new aC.HttpResponse({headers:U,reason:O.statusText,statusCode:O.status,body:ye})}))}),PW(s)];return r&&T.push(new Promise((O,M)=>{let U=()=>{let W=new Error("Request aborted");W.name="AbortError",M(W)};if(typeof r.addEventListener=="function"){let W=r;W.addEventListener("abort",U,{once:!0}),w=()=>W.removeEventListener("abort",U)}else r.onabort=U})),Promise.race(T).finally(w)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}},IW=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):OW(t):NW(t);async function OW(t){let e=await DW(t),r=xW.fromBase64(e);return new Uint8Array(r)}async function NW(t){let e=[],r=t.getReader(),n=!1,s=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=a}let i=new Uint8Array(s),o=0;for(let a of e)i.set(a,o),o+=a.length;return i}function DW(t){return new Promise((e,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;e(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}bd.FetchHttpHandler=Zy;bd.keepAliveSupport=wd;bd.streamCollector=IW});var rE=_(tE=>{"use strict";var lC={},eE={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),lC[t]=e,eE[e]=t}function LW(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){let n=t.slice(r,r+2).toLowerCase();if(n in eE)e[r/2]=eE[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function kW(t){let e="";for(let r=0;r<t.byteLength;r++)e+=lC[t[r]];return e}tE.fromHex=LW;tE.toHex=kW});var hC=_(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});Rd.sdkStreamMixin=void 0;var MW=uC(),qW=vt(),$W=rE(),FW=St(),dC=vs(),fC="The stream has already been transformed.",UW=t=>{if(!pC(t)&&!(0,dC.isReadableStream)(t)){let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(fC);return e=!0,await(0,MW.streamCollector)(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{let i=await r();if(s==="base64")return(0,qW.toBase64)(i);if(s==="hex")return(0,$W.toHex)(i);if(s===void 0||s==="utf8"||s==="utf-8")return(0,FW.toUtf8)(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(fC);if(e=!0,pC(t))return n(t);if((0,dC.isReadableStream)(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})};Rd.sdkStreamMixin=UW;var pC=t=>typeof Blob=="function"&&t instanceof Blob});var gC=_(Ad=>{"use strict";Object.defineProperty(Ad,"__esModule",{value:!0});Ad.sdkStreamMixin=void 0;var BW=yi(),jW=Ao(),nE=require("stream"),HW=hC(),mC="The stream has already been transformed.",VW=t=>{if(!(t instanceof nE.Readable))try{return(0,HW.sdkStreamMixin)(t)}catch{let s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let e=!1,r=async()=>{if(e)throw new Error(mC);return e=!0,await(0,BW.streamCollector)(t)};return Object.assign(t,{transformToByteArray:r,transformToString:async n=>{let s=await r();return n===void 0||Buffer.isEncoding(n)?(0,jW.fromArrayBuffer)(s.buffer,s.byteOffset,s.byteLength).toString(n):new TextDecoder(n).decode(s)},transformToWebStream:()=>{if(e)throw new Error(mC);if(t.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof nE.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return e=!0,nE.Readable.toWeb(t)}})};Ad.sdkStreamMixin=VW});var yC=_(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});sE.splitStream=WW;async function WW(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}});var SC=_(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});iE.splitStream=GW;var EC=require("stream"),zW=yC(),_C=vs();async function GW(t){if((0,_C.isReadableStream)(t)||(0,_C.isBlob)(t))return(0,zW.splitStream)(t);let e=new EC.PassThrough,r=new EC.PassThrough;return t.pipe(e),t.pipe(r),[e,r]}});var Dc=_(ht=>{"use strict";var vC=vt(),wC=St(),bC=ky(),RC=BA(),AC=GA(),CC=KA(),TC=QA(),xC=gC(),PC=SC(),IC=vs(),oE=class t extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?t.mutate(vC.fromBase64(e)):t.mutate(wC.fromUtf8(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,t.prototype),e}transformToString(e="utf-8"){return e==="base64"?vC.toBase64(this):wC.toUtf8(this)}};ht.Uint8ArrayBlobAdapter=oE;Object.keys(bC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return bC[t]}})});Object.keys(RC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return RC[t]}})});Object.keys(AC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return AC[t]}})});Object.keys(CC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return CC[t]}})});Object.keys(TC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return TC[t]}})});Object.keys(xC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return xC[t]}})});Object.keys(PC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return PC[t]}})});Object.keys(IC).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(ht,t)&&Object.defineProperty(ht,t,{enumerable:!0,get:function(){return IC[t]}})})});var Cd,Hr,Td=b(()=>{Cd=C(Dc()),Hr=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return Cd.Uint8ArrayBlobAdapter.mutate(t);if(!t)return Cd.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=e.streamCollector(t);return Cd.Uint8ArrayBlobAdapter.mutate(await r)}});function ln(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}var xd=b(()=>{});var Vr,aE=b(()=>{Vr=t=>typeof t=="function"?t():t});var Lc,Pd=b(()=>{Lc=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s})});var OC,NC,DC,cE,LC=b(()=>{OC=C(Oe()),NC=C(Bt());Pd();DC=t=>(e,r)=>async n=>{let{response:s}=await e(n),{operationSchema:i}=(0,NC.getSmithyContext)(r),[,o,a,c,u,l]=i??[];try{let d=await t.protocol.deserializeResponse(Lc(o,a,c,u,l),{...t,...r},s);return{response:s,output:d}}catch(d){if(Object.defineProperty(d,"$response",{value:s}),!("$metadata"in d)){let m="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{d.message+=`
  `+m}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(m):r.logger?.warn?.(m)}typeof d.$responseBodyText<"u"&&d.$response&&(d.$response.body=d.$responseBodyText);try{if(OC.HttpResponse.isInstance(s)){let{headers:g={}}=s,E=Object.entries(g);d.$metadata={httpStatusCode:s.statusCode,requestId:cE(/^x-[\w-]+-request-?id$/,E),extendedRequestId:cE(/^x-[\w-]+-id-2$/,E),cfId:cE(/^x-[\w-]+-cf-id$/,E)}}}catch{}}throw d}},cE=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1]});var kC,MC,qC=b(()=>{kC=C(Bt());Pd();MC=t=>(e,r)=>async n=>{let{operationSchema:s}=(0,kC.getSmithyContext)(r),[,i,o,a,c,u]=s??[],l=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,d=await t.protocol.serializeRequest(Lc(i,o,a,c,u),n.input,{...t,...r,endpoint:l});return e({...n,request:d})}});function uE(t){return{applyToStack:e=>{e.add(MC(t),FC),e.add(DC(t),$C),t.protocol.setSerdeContext(t)}}}var $C,FC,UC=b(()=>{LC();qC();$C={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},FC={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0}});var nt,ws=b(()=>{nt=class{constructor(){f(this,"name");f(this,"namespace");f(this,"traits")}static assign(e,r){return Object.assign(e,r)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}getName(){return this.namespace+"#"+this.name}}});var Od,Id,KW,BC=b(()=>{ws();Od=class Od extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"valueSchema");f(this,"symbol",Od.symbol)}};f(Od,"symbol",Symbol.for("@smithy/lis"));Id=Od,KW=(t,e,r,n)=>nt.assign(new Id,{name:e,namespace:t,traits:r,valueSchema:n})});var Dd,Nd,XW,jC=b(()=>{ws();Dd=class Dd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"keySchema");f(this,"valueSchema");f(this,"symbol",Dd.symbol)}};f(Dd,"symbol",Symbol.for("@smithy/map"));Nd=Dd,XW=(t,e,r,n,s)=>nt.assign(new Nd,{name:e,namespace:t,traits:r,keySchema:n,valueSchema:s})});var kd,Ld,QW,HC=b(()=>{ws();kd=class kd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"input");f(this,"output");f(this,"symbol",kd.symbol)}};f(kd,"symbol",Symbol.for("@smithy/ope"));Ld=kd,QW=(t,e,r,n,s)=>nt.assign(new Ld,{name:e,namespace:t,traits:r,input:n,output:s})});var Md,xo,YW,lE=b(()=>{ws();Md=class Md extends nt{constructor(){super(...arguments);f(this,"name");f(this,"traits");f(this,"memberNames");f(this,"memberList");f(this,"symbol",Md.symbol)}};f(Md,"symbol",Symbol.for("@smithy/str"));xo=Md,YW=(t,e,r,n,s)=>nt.assign(new xo,{name:e,namespace:t,traits:r,memberNames:n,memberList:s})});var $d,qd,JW,VC=b(()=>{ws();lE();$d=class $d extends xo{constructor(){super(...arguments);f(this,"ctor");f(this,"symbol",$d.symbol)}};f($d,"symbol",Symbol.for("@smithy/err"));qd=$d,JW=(t,e,r,n,s,i)=>nt.assign(new qd,{name:e,namespace:t,traits:r,memberNames:n,memberList:s,ctor:null})});function dn(t){if(typeof t=="object")return t;t=t|0;let e={},r=0;for(let n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}var dE=b(()=>{});function kc(t,e){if(t instanceof K)return Object.assign(t,{memberName:e,_isMemberSchema:!0});let r=K;return new r(t,e)}var bs,K,fE,WC,zC=b(()=>{aE();dE();bs=class bs{constructor(e,r){f(this,"ref");f(this,"memberName");f(this,"symbol",bs.symbol);f(this,"name");f(this,"schema");f(this,"_isMemberSchema");f(this,"traits");f(this,"memberTraits");f(this,"normalizedTraits");this.ref=e,this.memberName=r;let n=[],s=e,i=e;for(this._isMemberSchema=!1;fE(s);)n.push(s[1]),s=s[0],i=Vr(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let o=n.length-1;o>=0;--o){let a=n[o];Object.assign(this.memberTraits,dn(a))}}else this.memberTraits=0;if(i instanceof bs){let o=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},o,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=Vr(i),WC(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){let r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){let r=Vr(e);if(r instanceof bs)return r;if(fE(r)){let[n,s]=r;if(n instanceof bs)return Object.assign(n.getMergedTraits(),dn(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new bs(r)}getSchema(){let e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){let{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){let e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){let e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){let e=this.getSchema();return e[0]===3||e[0]===-3}isBlobSchema(){let e=this.getSchema();return e===21||e===42}isTimestampSchema(){let e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){let{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){let e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:n,memberTraits:s}=this;return e(r)||e(n)||e(s)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return dn(this.memberTraits)}getOwnTraits(){return dn(this.traits)}getKeySchema(){let[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);let n=this.getSchema(),s=e?15:n[4]??0;return kc([s,0],"key")}getValueSchema(){let e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return kc([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){let r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){let n=r[4].indexOf(e),s=r[5][n];return kc(fE(s)?s:[s,0],e)}if(this.isDocumentSchema())return kc([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){let e={};try{for(let[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(let[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");let e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],kc([e[5][r],0],e[4][r])]}};f(bs,"symbol",Symbol.for("@smithy/nor"));K=bs;fE=t=>Array.isArray(t)&&t.length===2,WC=t=>Array.isArray(t)&&t.length>=5});var Fd,Mc,ZW,ez,GC=b(()=>{ws();Fd=class Fd extends nt{constructor(){super(...arguments);f(this,"name");f(this,"schemaRef");f(this,"traits");f(this,"symbol",Fd.symbol)}};f(Fd,"symbol",Symbol.for("@smithy/sim"));Mc=Fd,ZW=(t,e,r,n)=>nt.assign(new Mc,{name:e,namespace:t,traits:n,schemaRef:r}),ez=(t,e,r,n)=>nt.assign(new Mc,{name:e,namespace:t,traits:r,schemaRef:n})});var tz,KC=b(()=>{tz={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var fn,_e,XC=b(()=>{fn=class fn{constructor(e,r=new Map,n=new Map){f(this,"namespace");f(this,"schemas");f(this,"exceptions");this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return fn.registries.has(e)||fn.registries.set(e,new fn(e)),fn.registries.get(e)}register(e,r){let n=this.normalizeShapeId(e);fn.for(n.split("#")[0]).schemas.set(n,r)}getSchema(e){let r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){let n=e,s=fn.for(n[1]);s.schemas.set(n[1]+"#"+n[2],n),s.exceptions.set(n,r)}getErrorCtor(e){let r=e;return fn.for(r[1]).exceptions.get(r)}getBaseException(){for(let e of this.exceptions.keys())if(Array.isArray(e)){let[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}};f(fn,"registries",new Map);_e=fn});var Ud={};Tt(Ud,{ErrorSchema:()=>qd,ListSchema:()=>Id,MapSchema:()=>Nd,NormalizedSchema:()=>K,OperationSchema:()=>Ld,SCHEMA:()=>tz,Schema:()=>nt,SimpleSchema:()=>Mc,StructureSchema:()=>xo,TypeRegistry:()=>_e,deref:()=>Vr,deserializerMiddlewareOption:()=>$C,error:()=>JW,getSchemaSerdePlugin:()=>uE,isStaticSchema:()=>WC,list:()=>KW,map:()=>XW,op:()=>QW,operation:()=>Lc,serializerMiddlewareOption:()=>FC,sim:()=>ZW,simAdapter:()=>ez,struct:()=>YW,translateTraits:()=>dn});var $e=b(()=>{aE();UC();BC();jC();HC();Pd();VC();zC();ws();GC();lE();KC();dE();XC()});var rz,QC=b(()=>{rz=(t,e,r=n=>n)=>t});var nz,sz,qc,iz,Bd,$c,oz,pE,hE,mE,gE,az,cz,YC,uz,lz,Hd,dz,yE,fz,Po,EE,pz,hz,mz,JC,ZC,gz,yz,Ei,_E,jd,Fc,SE=b(()=>{nz=t=>{switch(t){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${t}"`)}},sz=t=>{if(t!=null){if(typeof t=="number"){if((t===0||t===1)&&Fc.warn(jd(`Expected boolean, got ${typeof t}: ${t}`)),t===0)return!1;if(t===1)return!0}if(typeof t=="string"){let e=t.toLowerCase();if((e==="false"||e==="true")&&Fc.warn(jd(`Expected boolean, got ${typeof t}: ${t}`)),e==="false")return!1;if(e==="true")return!0}if(typeof t=="boolean")return t;throw new TypeError(`Expected boolean, got ${typeof t}: ${t}`)}},qc=t=>{if(t!=null){if(typeof t=="string"){let e=parseFloat(t);if(!Number.isNaN(e))return String(e)!==String(t)&&Fc.warn(jd(`Expected number but observed string: ${t}`)),e}if(typeof t=="number")return t;throw new TypeError(`Expected number, got ${typeof t}: ${t}`)}},iz=Math.ceil(34028234663852886e22),Bd=t=>{let e=qc(t);if(e!==void 0&&!Number.isNaN(e)&&e!==1/0&&e!==-1/0&&Math.abs(e)>iz)throw new TypeError(`Expected 32-bit float, got ${t}`);return e},$c=t=>{if(t!=null){if(Number.isInteger(t)&&!Number.isNaN(t))return t;throw new TypeError(`Expected integer, got ${typeof t}: ${t}`)}},oz=$c,pE=t=>gE(t,32),hE=t=>gE(t,16),mE=t=>gE(t,8),gE=(t,e)=>{let r=$c(t);if(r!==void 0&&az(r,e)!==r)throw new TypeError(`Expected ${e}-bit integer, got ${t}`);return r},az=(t,e)=>{switch(e){case 32:return Int32Array.of(t)[0];case 16:return Int16Array.of(t)[0];case 8:return Int8Array.of(t)[0]}},cz=(t,e)=>{if(t==null)throw e?new TypeError(`Expected a non-null value for ${e}`):new TypeError("Expected a non-null value");return t},YC=t=>{if(t==null)return;if(typeof t=="object"&&!Array.isArray(t))return t;let e=Array.isArray(t)?"array":typeof t;throw new TypeError(`Expected object, got ${e}: ${t}`)},uz=t=>{if(t!=null){if(typeof t=="string")return t;if(["boolean","number","bigint"].includes(typeof t))return Fc.warn(jd(`Expected string, got ${typeof t}: ${t}`)),String(t);throw new TypeError(`Expected string, got ${typeof t}: ${t}`)}},lz=t=>{if(t==null)return;let e=YC(t),r=Object.entries(e).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return e},Hd=t=>qc(typeof t=="string"?Po(t):t),dz=Hd,yE=t=>Bd(typeof t=="string"?Po(t):t),fz=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Po=t=>{let e=t.match(fz);if(e===null||e[0].length!==t.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(t)},EE=t=>typeof t=="string"?JC(t):qc(t),pz=EE,hz=EE,mz=t=>typeof t=="string"?JC(t):Bd(t),JC=t=>{switch(t){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${t}`)}},ZC=t=>$c(typeof t=="string"?Po(t):t),gz=ZC,yz=t=>pE(typeof t=="string"?Po(t):t),Ei=t=>hE(typeof t=="string"?Po(t):t),_E=t=>mE(typeof t=="string"?Po(t):t),jd=t=>String(new TypeError(t).stack||t).split(`
`).slice(0,5).filter(e=>!e.includes("stackTraceWarning")).join(`
`),Fc={warn:console.warn}});function Bc(t){let e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),o=t.getUTCMinutes(),a=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,l=o<10?`0${o}`:`${o}`,d=a<10?`0${a}`:`${a}`;return`${Ez[n]}, ${c} ${wE[r]} ${e} ${u}:${l}:${d} GMT`}var Ez,wE,_z,Sz,vz,bE,wz,bz,Rz,RE,AE,Uc,Az,Cz,Tz,vE,xz,Pz,Iz,pn,Oz,Nz,Io,eT=b(()=>{SE();Ez=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];_z=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),Sz=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=_z.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u]=e,l=Ei(Io(n)),d=pn(s,"month",1,12),m=pn(i,"day",1,31);return Uc(l,d,m,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})},vz=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),bE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let e=vz.exec(t);if(!e)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,s,i,o,a,c,u,l]=e,d=Ei(Io(n)),m=pn(s,"month",1,12),g=pn(i,"day",1,31),E=Uc(d,m,g,{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u});return l.toUpperCase()!="Z"&&E.setTime(E.getTime()-Nz(l)),E},wz=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),bz=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Rz=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),RE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let e=wz.exec(t);if(e){let[r,n,s,i,o,a,c,u]=e;return Uc(Ei(Io(i)),vE(s),pn(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u})}if(e=bz.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return Tz(Uc(Az(i),vE(s),pn(n,"day",1,31),{hours:o,minutes:a,seconds:c,fractionalMilliseconds:u}))}if(e=Rz.exec(t),e){let[r,n,s,i,o,a,c,u]=e;return Uc(Ei(Io(u)),vE(n),pn(s.trimLeft(),"day",1,31),{hours:i,minutes:o,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},AE=t=>{if(t==null)return;let e;if(typeof t=="number")e=t;else if(typeof t=="string")e=Hd(t);else if(typeof t=="object"&&t.tag===1)e=t.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(e)||e===1/0||e===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(e*1e3))},Uc=(t,e,r,n)=>{let s=e-1;return Pz(t,s,r),new Date(Date.UTC(t,s,r,pn(n.hours,"hour",0,23),pn(n.minutes,"minute",0,59),pn(n.seconds,"seconds",0,60),Oz(n.fractionalMilliseconds)))},Az=t=>{let e=new Date().getUTCFullYear(),r=Math.floor(e/100)*100+Ei(Io(t));return r<e?r+100:r},Cz=50*365*24*60*60*1e3,Tz=t=>t.getTime()-new Date().getTime()>Cz?new Date(Date.UTC(t.getUTCFullYear()-100,t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())):t,vE=t=>{let e=wE.indexOf(t);if(e<0)throw new TypeError(`Invalid month: ${t}`);return e+1},xz=[31,28,31,30,31,30,31,31,30,31,30,31],Pz=(t,e,r)=>{let n=xz[e];if(e===1&&Iz(t)&&(n=29),r>n)throw new TypeError(`Invalid day for ${wE[e]} in ${t}: ${r}`)},Iz=t=>t%4===0&&(t%100!==0||t%400===0),pn=(t,e,r,n)=>{let s=_E(Io(t));if(s<r||s>n)throw new TypeError(`${e} must be between ${r} and ${n}, inclusive`);return s},Oz=t=>t==null?0:yE("0."+t)*1e3,Nz=t=>{let e=t[0],r=1;if(e=="+")r=1;else if(e=="-")r=-1;else throw new TypeError(`Offset direction, ${e}, must be "+" or "-"`);let n=Number(t.substring(1,3)),s=Number(t.substring(4,6));return r*(n*60+s)*60*1e3},Io=t=>{let e=0;for(;e<t.length-1&&t.charAt(e)==="0";)e++;return e===0?t:t.slice(e)}});var jc={};Tt(jc,{__addDisposableResource:()=>AT,__assign:()=>Vd,__asyncDelegator:()=>yT,__asyncGenerator:()=>gT,__asyncValues:()=>ET,__await:()=>Oo,__awaiter:()=>lT,__classPrivateFieldGet:()=>wT,__classPrivateFieldIn:()=>RT,__classPrivateFieldSet:()=>bT,__createBinding:()=>zd,__decorate:()=>nT,__disposeResources:()=>CT,__esDecorate:()=>iT,__exportStar:()=>fT,__extends:()=>tT,__generator:()=>dT,__importDefault:()=>vT,__importStar:()=>ST,__makeTemplateObject:()=>_T,__metadata:()=>uT,__param:()=>sT,__propKey:()=>aT,__read:()=>xE,__rest:()=>rT,__rewriteRelativeImportExtension:()=>TT,__runInitializers:()=>oT,__setFunctionName:()=>cT,__spread:()=>pT,__spreadArray:()=>mT,__spreadArrays:()=>hT,__values:()=>Wd,default:()=>kz});function tT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");CE(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function rT(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function nT(t,e,r,n){var s=arguments.length,i=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,r,i):o(e,r))||i);return s>3&&i&&Object.defineProperty(e,r,i),i}function sT(t,e){return function(r,n){e(r,n,t)}}function iT(t,e,r,n,s,i){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",u=!e&&t?n.static?t:t.prototype:null,l=e||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,m=!1,g=r.length-1;g>=0;g--){var E={};for(var w in n)E[w]=w==="access"?{}:n[w];for(var w in n.access)E.access[w]=n.access[w];E.addInitializer=function(T){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(T||null))};var x=(0,r[g])(a==="accessor"?{get:l.get,set:l.set}:l[c],E);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(d=o(x.get))&&(l.get=d),(d=o(x.set))&&(l.set=d),(d=o(x.init))&&s.unshift(d)}else(d=o(x))&&(a==="field"?s.unshift(d):l[c]=d)}u&&Object.defineProperty(u,n.name,l),m=!0}function oT(t,e,r){for(var n=arguments.length>2,s=0;s<e.length;s++)r=n?e[s].call(t,r):e[s].call(t);return n?r:void 0}function aT(t){return typeof t=="symbol"?t:"".concat(t)}function cT(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function uT(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function lT(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(l){try{u(n.next(l))}catch(d){o(d)}}function c(l){try{u(n.throw(l))}catch(d){o(d)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((n=n.apply(t,e||[])).next())})}function dT(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(l){u=[6,l],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fT(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&zd(e,t,r)}function Wd(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xE(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function pT(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xE(arguments[e]));return t}function hT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),s=0,e=0;e<r;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function mT(t,e,r){if(r||arguments.length===2)for(var n=0,s=e.length,i;n<s;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}function Oo(t){return this instanceof Oo?(this.v=t,this):new Oo(t)}function gT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(g){return function(E){return Promise.resolve(E).then(g,d)}}function a(g,E){n[g]&&(s[g]=function(w){return new Promise(function(x,T){i.push([g,w,x,T])>1||c(g,w)})},E&&(s[g]=E(s[g])))}function c(g,E){try{u(n[g](E))}catch(w){m(i[0][3],w)}}function u(g){g.value instanceof Oo?Promise.resolve(g.value.v).then(l,d):m(i[0][2],g)}function l(g){c("next",g)}function d(g){c("throw",g)}function m(g,E){g(E),i.shift(),i.length&&c(i[0][0],i[0][1])}}function yT(t){var e,r;return e={},n("next"),n("throw",function(s){throw s}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(s,i){e[s]=t[s]?function(o){return(r=!r)?{value:Oo(t[s](o)),done:!1}:i?i(o):o}:i}}function ET(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Wd=="function"?Wd(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function _T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function ST(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=TE(t),n=0;n<r.length;n++)r[n]!=="default"&&zd(e,t,r[n]);return Dz(e,t),e}function vT(t){return t&&t.__esModule?t:{default:t}}function wT(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function bT(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r}function RT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function AT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}function CT(t){function e(i){t.error=t.hasError?new Lz(i,t.error,"An error was suppressed during disposal."):i,t.hasError=!0}var r,n=0;function s(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return e(o),s()})}else n|=1}catch(o){e(o)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function TT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?e?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):t}var CE,Vd,zd,Dz,TE,Lz,kz,Hc=b(()=>{CE=function(t,e){return CE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},CE(t,e)};Vd=function(){return Vd=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vd.apply(this,arguments)};zd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};Dz=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},TE=function(t){return TE=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},TE(t)};Lz=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};kz={__extends:tT,__assign:Vd,__rest:rT,__decorate:nT,__param:sT,__esDecorate:iT,__runInitializers:oT,__propKey:aT,__setFunctionName:cT,__metadata:uT,__awaiter:lT,__generator:dT,__createBinding:zd,__exportStar:fT,__values:Wd,__read:xE,__spread:pT,__spreadArrays:hT,__spreadArray:mT,__await:Oo,__asyncGenerator:gT,__asyncDelegator:yT,__asyncValues:ET,__makeTemplateObject:_T,__importStar:ST,__importDefault:vT,__classPrivateFieldGet:wT,__classPrivateFieldSet:bT,__classPrivateFieldIn:RT,__addDisposableResource:AT,__disposeResources:CT,__rewriteRelativeImportExtension:TT}});var PT=_(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.randomUUID=void 0;var Mz=(Hc(),le(jc)),xT=Mz.__importDefault(require("crypto"));Gd.randomUUID=xT.default.randomUUID.bind(xT.default)});var PE=_(OT=>{"use strict";var IT=PT(),xt=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),qz=()=>{if(IT.randomUUID)return IT.randomUUID();let t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,xt[t[0]]+xt[t[1]]+xt[t[2]]+xt[t[3]]+"-"+xt[t[4]]+xt[t[5]]+"-"+xt[t[6]]+xt[t[7]]+"-"+xt[t[8]]+xt[t[9]]+"-"+xt[t[10]]+xt[t[11]]+xt[t[12]]+xt[t[13]]+xt[t[14]]+xt[t[15]]};OT.v4=qz});var hn,NT=b(()=>{hn=C(PE())});var Ht,DT=b(()=>{Ht=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};Ht.from=t=>t&&typeof t=="object"&&(t instanceof Ht||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?Ht(String(t)):Ht(JSON.stringify(t));Ht.fromObject=Ht.from});function IE(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}var LT=b(()=>{});function Nn(t,e,r){let n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}var OE,NE,DE,kT,MT,$z,Fz,Uz,Bz,jz,Vc,LE,kE,qT=b(()=>{OE="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",NE="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",DE="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",kT="(\\d?\\d)",MT="(\\d{4})",$z=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),Fz=new RegExp(`^${OE}, ${kT} ${NE} ${MT} ${DE} GMT$`),Uz=new RegExp(`^${OE}, ${kT}-${NE}-(\\d\\d) ${DE} GMT$`),Bz=new RegExp(`^${OE} ${NE} ( [1-9]|\\d\\d) ${DE} ${MT}$`),jz=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vc=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},LE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");let e=$z.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);let[,r,n,s,i,o,a,,c,u]=e;Nn(n,1,12),Nn(s,1,31),Nn(i,0,23),Nn(o,0,59),Nn(a,0,60);let l=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(o),Number(a),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(l.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){let[,d,m,g]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],E=d==="-"?1:-1;l.setTime(l.getTime()+E*(Number(m)*60*60*1e3+Number(g)*60*1e3))}return l},kE=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,o,a,c;if((c=Fz.exec(t))?[,e,r,n,s,i,o,a]=c:(c=Uz.exec(t))?([,e,r,n,s,i,o,a]=c,n=(Number(n)+1900).toString()):(c=Bz.exec(t))&&([,r,e,s,i,o,a,n]=c),n&&o){let u=Date.UTC(Number(n),jz.indexOf(r),Number(e),Number(s),Number(i),Number(o),a?Math.round(parseFloat(`0.${a}`)*1e3):0);Nn(e,1,31),Nn(s,0,23),Nn(i,0,59),Nn(o,0,60);let l=new Date(u);return l.setUTCFullYear(Number(n)),l}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)}});function ME(t,e,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=t.split(e);if(r===1)return n;let s=[],i="";for(let o=0;o<n.length;o++)i===""?i=n[o]:i+=e+n[o],(o+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}var $T=b(()=>{});var Wc,FT=b(()=>{Wc=t=>{let e=t.length,r=[],n=!1,s,i=0;for(let o=0;o<e;++o){let a=t[o];switch(a){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,o)),i=o+1);break;default:}s=a}return r.push(t.slice(i)),r.map(o=>{o=o.trim();let a=o.length;return a<2?o:(o[0]==='"'&&o[a-1]==='"'&&(o=o.slice(1,a-1)),o.replace(/\\"/g,'"'))})}});function qE(t){return new Xe(String(t),"bigDecimal")}var UT,Xe,BT=b(()=>{UT=/^-?\d*(\.\d+)?$/,Xe=class t{constructor(e,r){f(this,"string");f(this,"type");if(this.string=e,this.type=r,!UT.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;let r=e;return t.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&UT.test(r.string)}}});var jT={};Tt(jT,{LazyJsonString:()=>Ht,NumericValue:()=>Xe,_parseEpochTimestamp:()=>Vc,_parseRfc3339DateTimeWithOffset:()=>LE,_parseRfc7231DateTime:()=>kE,copyDocumentWithTransform:()=>rz,dateToUtcString:()=>Bc,expectBoolean:()=>sz,expectByte:()=>mE,expectFloat32:()=>Bd,expectInt:()=>oz,expectInt32:()=>pE,expectLong:()=>$c,expectNonNull:()=>cz,expectNumber:()=>qc,expectObject:()=>YC,expectShort:()=>hE,expectString:()=>uz,expectUnion:()=>lz,generateIdempotencyToken:()=>hn.v4,handleFloat:()=>pz,limitedParseDouble:()=>EE,limitedParseFloat:()=>hz,limitedParseFloat32:()=>mz,logger:()=>Fc,nv:()=>qE,parseBoolean:()=>nz,parseEpochTimestamp:()=>AE,parseRfc3339DateTime:()=>Sz,parseRfc3339DateTimeWithOffset:()=>bE,parseRfc7231DateTime:()=>RE,quoteHeader:()=>IE,splitEvery:()=>ME,splitHeader:()=>Wc,strictParseByte:()=>_E,strictParseDouble:()=>Hd,strictParseFloat:()=>dz,strictParseFloat32:()=>yE,strictParseInt:()=>gz,strictParseInt32:()=>yz,strictParseLong:()=>ZC,strictParseShort:()=>Ei});var rr=b(()=>{QC();eT();NT();DT();SE();LT();qT();$T();FT();BT()});var Vt,No=b(()=>{Vt=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});var HT,$E,VT=b(()=>{HT=C(St()),$E=class{constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){f(this,"marshaller");f(this,"serializer");f(this,"deserializer");f(this,"serdeContext");f(this,"defaultContentType");this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){let s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i),a=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),l={async*[Symbol.asyncIterator](){if(n){let d={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};a.write(r,n);let m=a.flush();yield{[u]:!0,headers:d,body:m}}for await(let d of e)yield d}};return s.serialize(l,d=>{if(d[u])return{headers:d.headers,body:d.body};let m=Object.keys(d).find(O=>O!=="__type")??"",{additionalHeaders:g,body:E,eventType:w,explicitPayloadContentType:x}=this.writeEventBody(m,o,d);return{headers:{":event-type":{type:"string",value:w},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:x??c},...g},body:E}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){let s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async m=>{let g=Object.keys(m).find(E=>E!=="__type")??"";if(g==="initial-response"){let E=await this.deserializer.read(r,m[g].body);return delete E[i],{[c]:!0,...E}}else if(g in a){let E=a[g];return{[g]:await this.deserializer.read(E,m[g].body)}}else return{$unknown:m}}),l=u[Symbol.asyncIterator](),d=await l.next();if(d.done)return u;if(d.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(let[m,g]of Object.entries(d.value))n[m]=g}return{async*[Symbol.asyncIterator](){for(d?.value?.[c]||(yield d.value);;){let{done:m,value:g}=await l.next();if(m)break;yield g}}}}writeEventBody(e,r,n){let s=this.serializer,i=e,o=null,a,c=r.getSchema()[4].includes(e),u={};if(c){let m=r.getMemberSchema(e);if(m.isStructSchema()){for(let[g,E]of m.structIterator()){let{eventHeader:w,eventPayload:x}=E.getMergedTraits();if(x){o=g;break}else if(w){let T=n[e][g],O="binary";E.isNumericSchema()?(-2)**31<=T&&T<=2**31-1?O="integer":O="long":E.isTimestampSchema()?O="timestamp":E.isStringSchema()?O="string":E.isBooleanSchema()&&(O="boolean"),T!=null&&(u[g]={type:O,value:T},delete n[e][g])}}if(o!==null){let g=m.getMemberSchema(o);g.isBlobSchema()?a="application/octet-stream":g.isStringSchema()&&(a="text/plain"),s.write(g,n[e][o])}else s.write(m,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{let[m,g]=n[e];i=m,s.write(15,g)}let l=s.flush();return{body:typeof l=="string"?(this.serdeContext?.utf8Decoder??HT.fromUtf8)(l):l,eventType:i,explicitPayloadContentType:a,additionalHeaders:u}}}});var WT={};Tt(WT,{EventStreamSerde:()=>$E});var zT=b(()=>{VT()});var Kd,_i,Xd=b(()=>{$e();Kd=C(Oe());No();_i=class extends Vt{constructor(r){super();f(this,"options");this.options=r}getRequestType(){return Kd.HttpRequest}getResponseType(){return Kd.HttpResponse}setSerdeContext(r){this.serdeContext=r,this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(r)}updateServiceEndpoint(r,n){if("url"in n){r.protocol=n.url.protocol,r.hostname=n.url.hostname,r.port=n.url.port?Number(n.url.port):void 0,r.path=n.url.pathname,r.fragment=n.url.hash||void 0,r.username=n.url.username||void 0,r.password=n.url.password||void 0,r.query||(r.query={});for(let[s,i]of n.url.searchParams.entries())r.query[s]=i;return r}else return r.protocol=n.protocol,r.hostname=n.hostname,r.port=n.port?Number(n.port):void 0,r.path=n.path,r.query={...n.query},r}setHostPrefix(r,n,s){let i=K.of(n.input),o=dn(n.traits??{});if(o.endpoint){let a=o.endpoint?.[0];if(typeof a=="string"){let c=[...i.structIterator()].filter(([,u])=>u.getMergedTraits().hostLabel);for(let[u]of c){let l=s[u];if(typeof l!="string")throw new Error(`@smithy/core/schema - ${u} in input must be a string as hostLabel.`);a=a.replace(`{${u}}`,l)}r.hostname=a+r.hostname}}}deserializeMetadata(r){return{httpStatusCode:r.statusCode,requestId:r.headers["x-amzn-requestid"]??r.headers["x-amzn-request-id"]??r.headers["x-amz-request-id"],extendedRequestId:r.headers["x-amz-id-2"],cfId:r.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:r,requestSchema:n,initialRequest:s})}async deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:r,responseSchema:n,initialResponseContainer:s})}async loadEventStreamCapability(){let{EventStreamSerde:r}=await Promise.resolve().then(()=>(zT(),WT));return new r({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(r,n,s,i,o){return[]}getEventStreamMarshaller(){let r=this.serdeContext;if(!r.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return r.eventStreamMarshaller}}});var GT,KT,Si,XT=b(()=>{$e();rr();GT=C(Oe()),KT=C(Dc());Td();xd();Xd();Si=class extends _i{async serializeRequest(e,r,n){let s={...r??{}},i=this.serializer,o={},a={},c=await n.endpoint(),u=K.of(e?.input),l=u.getSchema(),d=!1,m,g=new GT.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:o,headers:a,body:void 0});if(c){this.updateServiceEndpoint(g,c),this.setHostPrefix(g,e,s);let E=dn(e.traits);if(E.http){g.method=E.http[0];let[w,x]=E.http[1].split("?");g.path=="/"?g.path=w:g.path+=w;let T=new URLSearchParams(x??"");Object.assign(o,Object.fromEntries(T))}}for(let[E,w]of u.structIterator()){let x=w.getMergedTraits()??{},T=s[E];if(T!=null)if(x.httpPayload)w.isStreaming()?w.isStructSchema()?s[E]&&(m=await this.serializeEventStream({eventStream:s[E],requestSchema:u})):m=T:(i.write(w,T),m=i.flush()),delete s[E];else if(x.httpLabel){i.write(w,T);let O=i.flush();g.path.includes(`{${E}+}`)?g.path=g.path.replace(`{${E}+}`,O.split("/").map(ln).join("/")):g.path.includes(`{${E}}`)&&(g.path=g.path.replace(`{${E}}`,ln(O))),delete s[E]}else if(x.httpHeader)i.write(w,T),a[x.httpHeader.toLowerCase()]=String(i.flush()),delete s[E];else if(typeof x.httpPrefixHeaders=="string"){for(let[O,M]of Object.entries(T)){let U=x.httpPrefixHeaders+O;i.write([w.getValueSchema(),{httpHeader:U}],M),a[U.toLowerCase()]=i.flush()}delete s[E]}else x.httpQuery||x.httpQueryParams?(this.serializeQuery(w,T,o),delete s[E]):d=!0}return d&&s&&(i.write(l,s),m=i.flush()),g.headers=a,g.query=o,g.body=m,g}serializeQuery(e,r,n){let s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(let[o,a]of Object.entries(r))if(!(o in n)){let c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:o,httpQueryParams:void 0}),this.serializeQuery(c,a,n)}return}if(e.isListSchema()){let o=!!e.getMergedTraits().sparse,a=[];for(let c of r){s.write([e.getValueSchema(),i],c);let u=s.flush();(o||u!==void 0)&&a.push(u)}n[i.httpQuery]=a}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){let s=this.deserializer,i=K.of(e.output),o={};if(n.statusCode>=300){let c=await Hr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=await this.deserializeHttpMessage(i,r,n,o);if(a.length){let c=await Hr(n.body,r);if(c.byteLength>0){let u=await s.read(i,c);for(let l of a)o[l]=u[l]}}return o.$metadata=this.deserializeMetadata(n),o}async deserializeHttpMessage(e,r,n,s,i){let o;s instanceof Set?o=i:o=s;let a=this.deserializer,c=K.of(e),u=[];for(let[l,d]of c.structIterator()){let m=d.getMemberTraits();if(m.httpPayload){if(d.isStreaming())d.isStructSchema()?o[l]=await this.deserializeEventStream({response:n,responseSchema:c}):o[l]=(0,KT.sdkStreamMixin)(n.body);else if(n.body){let E=await Hr(n.body,r);E.byteLength>0&&(o[l]=await a.read(d,E))}}else if(m.httpHeader){let g=String(m.httpHeader).toLowerCase(),E=n.headers[g];if(E!=null)if(d.isListSchema()){let w=d.getValueSchema();w.getMergedTraits().httpHeader=g;let x;w.isTimestampSchema()&&w.getSchema()===4?x=ME(E,",",2):x=Wc(E);let T=[];for(let O of x)T.push(await a.read(w,O.trim()));o[l]=T}else o[l]=await a.read(d,E)}else if(m.httpPrefixHeaders!==void 0){o[l]={};for(let[g,E]of Object.entries(n.headers))if(g.startsWith(m.httpPrefixHeaders)){let w=d.getValueSchema();w.getMergedTraits().httpHeader=g,o[l][g.slice(m.httpPrefixHeaders.length)]=await a.read(w,E)}}else m.httpResponseCode?o[l]=n.statusCode:u.push(l)}return u}}});var QT,Dn,YT=b(()=>{$e();QT=C(Oe());Td();Xd();Dn=class extends _i{async serializeRequest(e,r,n){let s=this.serializer,i={},o={},a=await n.endpoint(),c=K.of(e?.input),u=c.getSchema(),l,d=new QT.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:o,body:void 0});a&&(this.updateServiceEndpoint(d,a),this.setHostPrefix(d,e,r));let m={...r};if(r){let g=c.getEventStreamMember();if(g){if(m[g]){let E={};for(let[w,x]of c.structIterator())w!==g&&m[w]&&(s.write(x,m[w]),E[w]=s.flush());l=await this.serializeEventStream({eventStream:m[g],requestSchema:c,initialRequest:E})}}else s.write(u,m),l=s.flush()}return d.headers=o,d.query=i,d.body=l,d.method="POST",d}async deserializeResponse(e,r,n){let s=this.deserializer,i=K.of(e.output),o={};if(n.statusCode>=300){let c=await Hr(n.body,r);throw c.byteLength>0&&Object.assign(o,await s.read(15,c)),await this.handleError(e,r,n,o,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let c in n.headers){let u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}let a=i.getEventStreamMember();if(a)o[a]=await this.deserializeEventStream({response:n,responseSchema:i,initialResponseContainer:o});else{let c=await Hr(n.body,r);c.byteLength>0&&Object.assign(o,await s.read(i,c))}return o.$metadata=this.deserializeMetadata(n),o}}});var FE,UE=b(()=>{xd();FE=(t,e,r,n,s,i)=>{if(e!=null&&e[r]!==void 0){let o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");t=t.replace(s,i?o.split("/").map(a=>ln(a)).join("/"):ln(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return t}});function BE(t,e){return new Qd(t,e)}var JT,Qd,ZT=b(()=>{JT=C(Oe());UE();Qd=class{constructor(e,r){f(this,"input");f(this,"context");f(this,"query",{});f(this,"method","");f(this,"headers",{});f(this,"path","");f(this,"body",null);f(this,"hostname","");f(this,"resolvePathStack",[]);this.input=e,this.context=r}async build(){let{hostname:e,protocol:r="https",port:n,path:s}=await this.context.endpoint();this.path=s;for(let i of this.resolvePathStack)i(this.path);return new JT.HttpRequest({protocol:r,hostname:this.hostname||e,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(e){return this.hostname=e,this}bp(e){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+e}),this}p(e,r,n,s){return this.resolvePathStack.push(i=>{this.path=FE(i,this.input,e,r,n,s)}),this}h(e){return this.headers=e,this}q(e){return this.query=e,this}b(e){return this.body=e,this}m(e){return this.method=e,this}}});function hr(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}var Yd=b(()=>{});var jE,ex,vi,HE=b(()=>{$e();rr();jE=C(vt()),ex=C(St());No();Yd();vi=class extends Vt{constructor(r){super();f(this,"settings");this.settings=r}read(r,n){let s=K.of(r);if(s.isListSchema())return Wc(n).map(i=>this.read(s.getValueSchema(),i));if(s.isBlobSchema())return(this.serdeContext?.base64Decoder??jE.fromBase64)(n);if(s.isTimestampSchema())switch(hr(s,this.settings)){case 5:return LE(n);case 6:return kE(n);case 7:return Vc(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(s.isStringSchema()){let i=s.getMergedTraits().mediaType,o=n;if(i)return s.getMergedTraits().httpHeader&&(o=this.base64ToUtf8(o)),(i==="application/json"||i.endsWith("+json"))&&(o=Ht.from(o)),o}return s.isNumericSchema()?Number(n):s.isBigIntegerSchema()?BigInt(n):s.isBigDecimalSchema()?new Xe(n,"bigDecimal"):s.isBooleanSchema()?String(n).toLowerCase()==="true":n}base64ToUtf8(r){return(this.serdeContext?.utf8Encoder??ex.toUtf8)((this.serdeContext?.base64Decoder??jE.fromBase64)(r))}}});var Jd,wi,tx=b(()=>{$e();Jd=C(St());No();HE();wi=class extends Vt{constructor(r,n){super();f(this,"codecDeserializer");f(this,"stringDeserializer");this.codecDeserializer=r,this.stringDeserializer=new vi(n)}setSerdeContext(r){this.stringDeserializer.setSerdeContext(r),this.codecDeserializer.setSerdeContext(r),this.serdeContext=r}read(r,n){let s=K.of(r),i=s.getMergedTraits(),o=this.serdeContext?.utf8Encoder??Jd.toUtf8;if(i.httpHeader||i.httpResponseCode)return this.stringDeserializer.read(s,o(n));if(i.httpPayload){if(s.isBlobSchema()){let a=this.serdeContext?.utf8Decoder??Jd.fromUtf8;return typeof n=="string"?a(n):n}else if(s.isStringSchema())return"byteLength"in n?o(n):n}return this.codecDeserializer.read(s,n)}}});var VE,zc,WE=b(()=>{$e();rr();VE=C(vt());No();Yd();zc=class extends Vt{constructor(r){super();f(this,"settings");f(this,"stringBuffer","");this.settings=r}write(r,n){let s=K.of(r);switch(typeof n){case"object":if(n===null){this.stringBuffer="null";return}if(s.isTimestampSchema()){if(!(n instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${n} when schema expected Date in ${s.getName(!0)}`);switch(hr(s,this.settings)){case 5:this.stringBuffer=n.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=Bc(n);break;case 7:this.stringBuffer=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",n),this.stringBuffer=String(n.getTime()/1e3)}return}if(s.isBlobSchema()&&"byteLength"in n){this.stringBuffer=(this.serdeContext?.base64Encoder??VE.toBase64)(n);return}if(s.isListSchema()&&Array.isArray(n)){let a="";for(let c of n){this.write([s.getValueSchema(),s.getMergedTraits()],c);let u=this.flush(),l=s.getValueSchema().isTimestampSchema()?u:IE(u);a!==""&&(a+=", "),a+=l}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(n,null,2);break;case"string":let i=s.getMergedTraits().mediaType,o=n;if(i&&((i==="application/json"||i.endsWith("+json"))&&(o=Ht.from(o)),s.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??VE.toBase64)(o.toString());return}this.stringBuffer=n;break;default:this.stringBuffer=String(n)}}flush(){let r=this.stringBuffer;return this.stringBuffer="",r}}});var bi,rx=b(()=>{$e();WE();bi=class{constructor(e,r,n=new zc(r)){f(this,"codecSerializer");f(this,"stringSerializer");f(this,"buffer");this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){let n=K.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}});var nx={};Tt(nx,{FromStringShapeDeserializer:()=>vi,HttpBindingProtocol:()=>Si,HttpInterceptingShapeDeserializer:()=>wi,HttpInterceptingShapeSerializer:()=>bi,HttpProtocol:()=>_i,RequestBuilder:()=>Qd,RpcProtocol:()=>Dn,SerdeContext:()=>Vt,ToStringShapeSerializer:()=>zc,collectBody:()=>Hr,determineTimestampFormat:()=>hr,extendedEncodeURIComponent:()=>ln,requestBuilder:()=>BE,resolvedPath:()=>FE});var nr=b(()=>{Td();xd();XT();Xd();YT();ZT();UE();HE();tx();rx();WE();Yd();No()});var sx=b(()=>{nr()});function Hz(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}var ix=b(()=>{});var Ri,ox=b(()=>{Ri=class{constructor(e){f(this,"authSchemes",new Map);for(let[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}});var ax,zE,GE,cx=b(()=>{ax=C(Oe()),zE=C(Pn()),GE=class{async sign(e,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let s=ax.HttpRequest.clone(e);if(n.in===zE.HttpApiKeyAuthLocation.QUERY)s.query[n.name]=r.apiKey;else if(n.in===zE.HttpApiKeyAuthLocation.HEADER)s.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return s}}});var ux,KE,lx=b(()=>{ux=C(Oe()),KE=class{async sign(e,r,n){let s=ux.HttpRequest.clone(e);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return s.headers.Authorization=`Bearer ${r.token}`,s}}});var Ln,dx=b(()=>{Ln=class{async sign(e,r,n){return e}}});var fx=b(()=>{cx();lx();dx()});var px,Vz,XE,Zd,QE,hx=b(()=>{px=t=>function(r){return Zd(r)&&r.expiration.getTime()-Date.now()<t},Vz=3e5,XE=px(3e5),Zd=t=>t.expiration!==void 0,QE=(t,e,r)=>{if(t===void 0)return;let n=typeof t!="function"?async()=>Promise.resolve(t):t,s,i,o,a=!1,c=async u=>{i||(i=n(u));try{s=await i,o=!0,a=!1}finally{i=void 0}return s};return e===void 0?async u=>((!o||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!o||u?.forceRefresh)&&(s=await c(u)),a?s:r(s)?(e(s)&&await c(u),s):(a=!0,s))}});var mx=b(()=>{ox();fx();hx()});var Ai={};Tt(Ai,{DefaultIdentityProviderConfig:()=>Ri,EXPIRATION_MS:()=>Vz,HttpApiKeyAuthSigner:()=>GE,HttpBearerAuthSigner:()=>KE,NoAuthSigner:()=>Ln,createIsIdentityExpiredFunction:()=>px,createPaginator:()=>IA,doesIdentityRequireRefresh:()=>Zd,getHttpAuthSchemeEndpointRuleSetPlugin:()=>xc,getHttpAuthSchemePlugin:()=>CV,getHttpSigningPlugin:()=>Ic,getSmithyContext:()=>SV,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>hA,httpAuthSchemeMiddleware:()=>Tc,httpAuthSchemeMiddlewareOptions:()=>vA,httpSigningMiddleware:()=>Py,httpSigningMiddlewareOptions:()=>CA,isIdentityExpired:()=>XE,memoizeIdentityProvider:()=>QE,normalizeProvider:()=>Ss,requestBuilder:()=>BE,setFeature:()=>Hz});var sr=b(()=>{uA();bA();xA();PA();OA();sx();ix();mx()});var Ti=_(Ci=>{"use strict";var JE=Pn(),ZE=class{constructor({size:e,params:r}){f(this,"capacity");f(this,"data",new Map);f(this,"parameters",[]);this.capacity=e??50,r&&(this.parameters=r)}get(e,r){let n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let s=this.data.keys(),i=0;for(;;){let{value:o,done:a}=s.next();if(this.data.delete(o),a||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let s of n){let i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}},Wz=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),gx=t=>Wz.test(t)||t.startsWith("[")&&t.endsWith("]"),zz=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),t_=(t,e=!1)=>{if(!e)return zz.test(t);let r=t.split(".");for(let n of r)if(!t_(n))return!1;return!0},e_={},Gc="endpoints";function Rs(t){return typeof t!="object"||t==null?t:"ref"in t?`$${Rs(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(Rs).join(", ")})`:JSON.stringify(t,null,2)}var Pt=class extends Error{constructor(e){super(e),this.name="EndpointError"}},Gz=(t,e)=>t===e,Kz=t=>{let e=t.split("."),r=[];for(let n of e){let s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new Pt(`Path: '${t}' does not end with ']'`);let i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new Pt(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},yx=(t,e)=>Kz(e).reduce((r,n)=>{if(typeof r!="object")throw new Pt(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),Xz=t=>t!=null,Qz=t=>!t,YE={[JE.EndpointURLScheme.HTTP]:80,[JE.EndpointURLScheme.HTTPS]:443},Yz=t=>{let e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){let{hostname:m,port:g,protocol:E="",path:w="",query:x={}}=t,T=new URL(`${E}//${m}${g?`:${g}`:""}${w}`);return T.search=Object.entries(x).map(([O,M])=>`${O}=${M}`).join("&"),T}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;let r=e.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=e;if(a)return null;let c=o.slice(0,-1);if(!Object.values(JE.EndpointURLScheme).includes(c))return null;let u=gx(s),l=r.includes(`${n}:${YE[c]}`)||typeof t=="string"&&t.includes(`${n}:${YE[c]}`),d=`${n}${l?`:${YE[c]}`:""}`;return{scheme:c,authority:d,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},Jz=(t,e)=>t===e,Zz=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),eG=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),tG={booleanEquals:Gz,getAttr:yx,isSet:Xz,isValidHostLabel:t_,not:Qz,parseURL:Yz,stringEquals:Jz,substring:Zz,uriEncode:eG},Ex=(t,e)=>{let r=[],n={...e.endpointParams,...e.referenceRecord},s=0;for(;s<t.length;){let i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));let o=t.indexOf("}",i);if(o===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[o+1]==="}"&&(r.push(t.slice(i+1,o)),s=o+2);let a=t.substring(i+1,o);if(a.includes("#")){let[c,u]=a.split("#");r.push(yx(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},rG=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],ef=(t,e,r)=>{if(typeof t=="string")return Ex(t,r);if(t.fn)return Sx.callFunction(t,r);if(t.ref)return rG(t,r);throw new Pt(`'${e}': ${String(t)} is not a string, function or reference.`)},_x=({fn:t,argv:e},r)=>{let n=e.map(i=>["boolean","number"].includes(typeof i)?i:Sx.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in e_&&s[1]!=null?e_[s[0]][s[1]](...n):tG[t](...n)},Sx={evaluateExpression:ef,callFunction:_x},nG=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new Pt(`'${t}' is already defined in Reference Record.`);let n=_x(e,r);return r.logger?.debug?.(`${Gc} evaluateCondition: ${Rs(e)} = ${Rs(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},r_=(t=[],e)=>{let r={};for(let n of t){let{result:s,toAssign:i}=nG(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${Gc} assign: ${i.name} := ${Rs(i.value)}`))}return{result:!0,referenceRecord:r}},sG=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{let o=ef(i,"Header value entry",e);if(typeof o!="string")throw new Pt(`Header '${n}' value '${o}' is not a string`);return o})}),{}),vx=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:bx.getEndpointProperty(s,e)}),{}),wx=(t,e)=>{if(Array.isArray(t))return t.map(r=>wx(r,e));switch(typeof t){case"string":return Ex(t,e);case"object":if(t===null)throw new Pt(`Unexpected endpoint property: ${t}`);return bx.getEndpointProperties(t,e);case"boolean":return t;default:throw new Pt(`Unexpected endpoint property type: ${typeof t}`)}},bx={getEndpointProperty:wx,getEndpointProperties:vx},iG=(t,e)=>{let r=ef(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Pt(`Endpoint URL must be a string, got ${typeof r}`)},oG=(t,e)=>{let{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=r_(r,e);if(!s)return;let o={...e,referenceRecord:{...e.referenceRecord,...i}},{url:a,properties:c,headers:u}=n;return e.logger?.debug?.(`${Gc} Resolving endpoint from template: ${Rs(n)}`),{...u!=null&&{headers:sG(u,o)},...c!=null&&{properties:vx(c,o)},url:iG(a,o)}},aG=(t,e)=>{let{conditions:r,error:n}=t,{result:s,referenceRecord:i}=r_(r,e);if(s)throw new Pt(ef(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Rx=(t,e)=>{for(let r of t)if(r.type==="endpoint"){let n=oG(r,e);if(n)return n}else if(r.type==="error")aG(r,e);else if(r.type==="tree"){let n=Ax.evaluateTreeRule(r,e);if(n)return n}else throw new Pt(`Unknown endpoint rule: ${r}`);throw new Pt("Rules evaluation failed")},cG=(t,e)=>{let{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=r_(r,e);if(s)return Ax.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},Ax={evaluateRules:Rx,evaluateTreeRule:cG},uG=(t,e)=>{let{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${Gc} Initial EndpointParams: ${Rs(r)}`);let o=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,l])=>[u,l.default]);if(o.length>0)for(let[u,l]of o)r[u]=r[u]??l;let a=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(let u of a)if(r[u]==null)throw new Pt(`Missing required parameter: '${u}'`);let c=Rx(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${Gc} Resolved endpoint: ${Rs(c)}`),c};Ci.EndpointCache=ZE;Ci.EndpointError=Pt;Ci.customEndpointFunctions=e_;Ci.isIpAddress=gx;Ci.isValidHostLabel=t_;Ci.resolveEndpoint=uG});var Tx=_(Cx=>{"use strict";function lG(t){let e={};if(t=t.replace(/^\?/,""),t)for(let r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}Cx.parseQueryString=lG});var As=_(Px=>{"use strict";var dG=Tx(),xx=t=>{if(typeof t=="string")return xx(new URL(t));let{hostname:e,pathname:r,port:n,protocol:s,search:i}=t,o;return i&&(o=dG.parseQueryString(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}};Px.parseUrl=xx});var Lo=_(Wr=>{"use strict";var Do=Ti(),fG=As(),Ox=(t,e=!1)=>{if(e){for(let r of t.split("."))if(!Ox(r))return!1;return!0}return!(!Do.isValidHostLabel(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Do.isIpAddress(t))},Ix=":",pG="/",hG=t=>{let e=t.split(Ix);if(e.length<6)return null;let[r,n,s,i,o,...a]=e;if(r!=="arn"||n===""||s===""||a.join(Ix)==="")return null;let c=a.map(u=>u.split(pG)).flat();return{partition:n,service:s,region:i,accountId:o,resourceId:c}},mG=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],gG="1.1",Nx={partitions:mG,version:gG},Dx=Nx,Lx="",kx=t=>{let{partitions:e}=Dx;for(let n of e){let{regions:s,outputs:i}=n;for(let[o,a]of Object.entries(s))if(o===t)return{...i,...a}}for(let n of e){let{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(t))return{...i}}let r=e.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Mx=(t,e="")=>{Dx=t,Lx=e},yG=()=>{Mx(Nx,"")},EG=()=>Lx,qx={isVirtualHostableS3Bucket:Ox,parseArn:hG,partition:kx};Do.customEndpointFunctions.aws=qx;var _G=t=>{if(typeof t.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>$x(t.endpointProvider({Region:typeof t.region=="function"?await t.region():t.region,UseDualStack:typeof t.useDualstackEndpoint=="function"?await t.useDualstackEndpoint():t.useDualstackEndpoint,UseFIPS:typeof t.useFipsEndpoint=="function"?await t.useFipsEndpoint():t.useFipsEndpoint,Endpoint:void 0},{logger:t.logger}))),t},$x=t=>fG.parseUrl(t.url);Object.defineProperty(Wr,"EndpointError",{enumerable:!0,get:function(){return Do.EndpointError}});Object.defineProperty(Wr,"isIpAddress",{enumerable:!0,get:function(){return Do.isIpAddress}});Object.defineProperty(Wr,"resolveEndpoint",{enumerable:!0,get:function(){return Do.resolveEndpoint}});Wr.awsEndpointFunctions=qx;Wr.getUserAgentPrefix=EG;Wr.partition=kx;Wr.resolveDefaultAwsRegionalEndpointsConfig=_G;Wr.setPartitionInfo=Mx;Wr.toEndpointV1=$x;Wr.useDefaultPartitionInfo=yG});var tf,ko,Fx=b(()=>{tf={warningEmitted:!1},ko=t=>{t&&!tf.warningEmitted&&parseInt(t.substring(1,t.indexOf(".")))<18&&(tf.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function Cs(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Ux=b(()=>{});function Bx(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}var jx=b(()=>{});function Hx(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}var Vx=b(()=>{});var Ts={};Tt(Ts,{emitWarningIfUnsupportedVersion:()=>ko,setCredentialFeature:()=>Cs,setFeature:()=>Bx,setTokenFeature:()=>Hx,state:()=>tf});var zr=b(()=>{Fx();Ux();jx();Vx()});var Wx,n_,zx=b(()=>{Wx=C(Oe()),n_=t=>Wx.HttpResponse.isInstance(t)?t.headers?.date??t.headers?.Date:void 0});var Mo,s_=b(()=>{Mo=t=>new Date(Date.now()+t)});var Gx,Kx=b(()=>{s_();Gx=(t,e)=>Math.abs(Mo(e).getTime()-t)>=3e5});var i_,Xx=b(()=>{Kx();i_=(t,e)=>{let r=Date.parse(t);return Gx(r,e)?r-Date.now():e}});var o_=b(()=>{zx();s_();Xx()});var Qx,Kc,qo,ir,a_,c_=b(()=>{Qx=C(Oe());o_();Kc=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},qo=async t=>{let e=Kc("context",t.context),r=Kc("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],i=await Kc("signer",r.signer)(n),o=t?.signingRegion,a=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}},ir=class{async sign(e,r,n){if(!Qx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let s=await qo(n),{config:i,signer:o}=s,{signingRegion:a,signingName:c}=s,u=n.context;if(u?.authSchemes?.length??!1){let[d,m]=u.authSchemes;d?.name==="sigv4a"&&m?.name==="sigv4"&&(a=m?.signingRegion??a,c=m?.signingName??c)}return await o.sign(e,{signingDate:Mo(i.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(e){return r=>{let n=r.ServerTime??n_(r.$response);if(n){let s=Kc("config",e.config),i=s.systemClockOffset;s.systemClockOffset=i_(n,s.systemClockOffset),s.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){let n=n_(e);if(n){let s=Kc("config",r.config);s.systemClockOffset=i_(n,s.systemClockOffset)}}},a_=ir});var Yx,Xc,Jx=b(()=>{Yx=C(Oe());o_();c_();Xc=class extends ir{async sign(e,r,n){if(!Yx.HttpRequest.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:s,signer:i,signingRegion:o,signingRegionSet:a,signingName:c}=await qo(n),l=(await s.sigv4aSigningRegionSet?.()??a??[o]).join(",");return await i.sign(e,{signingDate:Mo(s.systemClockOffset),signingRegion:l,signingService:c})}}});var u_,Zx=b(()=>{u_=t=>typeof t=="string"&&t.length>0?t.split(",").map(e=>e.trim()):[]});var rf,l_=b(()=>{rf=t=>`AWS_BEARER_TOKEN_${t.replace(/[\s-]/g,"_").toUpperCase()}`});var eP,tP,$o,rP=b(()=>{Zx();l_();eP="AWS_AUTH_SCHEME_PREFERENCE",tP="auth_scheme_preference",$o={environmentVariableSelector:(t,e)=>{if(e?.signingName&&rf(e.signingName)in t)return["httpBearerAuth"];if(eP in t)return u_(t[eP])},configFileSelector:t=>{if(tP in t)return u_(t[tP])},default:[]}});var Wt=_(xi=>{"use strict";var Fo=class t extends Error{constructor(r,n=!0){let s,i=!0;typeof n=="boolean"?(s=void 0,i=n):n!=null&&typeof n=="object"&&(s=n.logger,i=n.tryNextLink??!0);super(r);f(this,"name","ProviderError");f(this,"tryNextLink");this.tryNextLink=i,Object.setPrototypeOf(this,t.prototype),s?.debug?.(`@smithy/property-provider ${i?"->":"(!)"} ${r}`)}static from(r,n=!0){return Object.assign(new this(r.message,n),r)}},d_=class t extends Fo{constructor(r,n=!0){super(r,n);f(this,"name","CredentialsProviderError");Object.setPrototypeOf(this,t.prototype)}},f_=class t extends Fo{constructor(r,n=!0){super(r,n);f(this,"name","TokenProviderError");Object.setPrototypeOf(this,t.prototype)}},SG=(...t)=>async()=>{if(t.length===0)throw new Fo("No providers in chain");let e;for(let r of t)try{return await r()}catch(n){if(e=n,n?.tryNextLink)continue;throw n}throw e},vG=t=>()=>Promise.resolve(t),wG=(t,e,r)=>{let n,s,i,o=!1,a=async()=>{s||(s=t());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return e===void 0?async c=>((!i||c?.forceRefresh)&&(n=await a()),n):async c=>((!i||c?.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(e(n)&&await a(),n))};xi.CredentialsProviderError=d_;xi.ProviderError=Fo;xi.TokenProviderError=f_;xi.chain=SG;xi.fromStatic=vG;xi.memoize=wG});var p_,nP,sP,iP=b(()=>{sr();p_=C(Wt()),nP=t=>(t.sigv4aSigningRegionSet=Ss(t.sigv4aSigningRegionSet),t),sP={environmentVariableSelector(t){if(t.AWS_SIGV4A_SIGNING_REGION_SET)return t.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(e=>e.trim());throw new p_.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(t){if(t.sigv4a_signing_region_set)return(t.sigv4a_signing_region_set??"").split(",").map(e=>e.trim());throw new p_.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var df=_(ae=>{"use strict";var xs=rE(),Pi=St(),bG=Oy(),uP=Oe(),oP=Bt(),nf=Vy(),lP="X-Amz-Algorithm",dP="X-Amz-Credential",__="X-Amz-Date",fP="X-Amz-SignedHeaders",pP="X-Amz-Expires",S_="X-Amz-Signature",v_="X-Amz-Security-Token",RG="X-Amz-Region-Set",w_="authorization",b_=__.toLowerCase(),hP="date",mP=[w_,b_,hP],gP=S_.toLowerCase(),uf="x-amz-content-sha256",yP=v_.toLowerCase(),AG="host",EP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_P=/^proxy-/,SP=/^sec-/,CG=[/^proxy-/i,/^sec-/i],sf="AWS4-HMAC-SHA256",TG="AWS4-ECDSA-P256-SHA256",vP="AWS4-HMAC-SHA256-PAYLOAD",wP="UNSIGNED-PAYLOAD",bP=50,R_="aws4_request",RP=60*60*24*7,Uo={},of=[],af=(t,e,r)=>`${t}/${e}/${r}/${R_}`,AP=async(t,e,r,n,s)=>{let i=await aP(t,e.secretAccessKey,e.accessKeyId),o=`${r}:${n}:${s}:${xs.toHex(i)}:${e.sessionToken}`;if(o in Uo)return Uo[o];for(of.push(o);of.length>bP;)delete Uo[of.shift()];let a=`AWS4${e.secretAccessKey}`;for(let c of[r,n,s,R_])a=await aP(t,a,c);return Uo[o]=a},xG=()=>{of.length=0,Object.keys(Uo).forEach(t=>{delete Uo[t]})},aP=(t,e,r)=>{let n=new t(e);return n.update(Pi.toUint8Array(r)),n.digest()},h_=({headers:t},e,r)=>{let n={};for(let s of Object.keys(t).sort()){if(t[s]==null)continue;let i=s.toLowerCase();(i in EP||e?.has(i)||_P.test(i)||SP.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},cf=async({headers:t,body:e},r)=>{for(let n of Object.keys(t))if(n.toLowerCase()===uf)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||bG.isArrayBuffer(e)){let n=new r;return n.update(Pi.toUint8Array(e)),xs.toHex(await n.digest())}return wP},m_=class{format(e){let r=[];for(let i of Object.keys(e)){let o=Pi.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(e[i]))}let n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0)),s=0;for(let i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":let s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":let i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);let o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":let a=Pi.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(g_.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!PG.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);let d=new Uint8Array(17);return d[0]=9,d.set(xs.fromHex(e.value.replace(/\-/g,"")),1),d}}},PG=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,g_=class t{constructor(e){f(this,"bytes");if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&cP(r),new t(r)}valueOf(){let e=this.bytes.slice(0),r=e[0]&128;return r&&cP(e),parseInt(xs.toHex(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function cP(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}var CP=(t,e)=>{t=t.toLowerCase();for(let r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},TP=(t,e={})=>{let{headers:r,query:n={}}=uP.HttpRequest.clone(t);for(let s of Object.keys(r)){let i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},y_=t=>{t=uP.HttpRequest.clone(t);for(let e of Object.keys(t.headers))mP.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},xP=({query:t={}})=>{let e=[],r={};for(let n of Object.keys(t)){if(n.toLowerCase()===gP)continue;let s=nf.escapeUri(n);e.push(s);let i=t[n];typeof i=="string"?r[s]=`${s}=${nf.escapeUri(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((o,a)=>o.concat([`${s}=${nf.escapeUri(a)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},IG=t=>OG(t).toISOString().replace(/\.\d{3}Z$/,"Z"),OG=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t,lf=class{constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){f(this,"service");f(this,"regionProvider");f(this,"credentialProvider");f(this,"sha256");f(this,"uriEscapePath");f(this,"applyChecksum");this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=oP.normalizeProvider(n),this.credentialProvider=oP.normalizeProvider(r)}createCanonicalRequest(e,r,n){let s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${xP(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){let i=new this.sha256;i.update(Pi.toUint8Array(n));let o=await i.digest();return`${s}
${e}
${r}
${xs.toHex(o)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){let r=[];for(let i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));let n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return nf.escapeUri(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){let r=IG(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}},E_=class extends lf{constructor({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a=!0}){super({applyChecksum:r,credentials:n,region:s,service:i,sha256:o,uriEscapePath:a});f(this,"headerFormatter",new m_)}async presign(r,n={}){let{signingDate:s=new Date,expiresIn:i=3600,unsignableHeaders:o,unhoistableHeaders:a,signableHeaders:c,hoistableHeaders:u,signingRegion:l,signingService:d}=n,m=await this.credentialProvider();this.validateResolvedCredentials(m);let g=l??await this.regionProvider(),{longDate:E,shortDate:w}=this.formatDate(s);if(i>RP)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let x=af(w,g,d??this.service),T=TP(y_(r),{unhoistableHeaders:a,hoistableHeaders:u});m.sessionToken&&(T.query[v_]=m.sessionToken),T.query[lP]=sf,T.query[dP]=`${m.accessKeyId}/${x}`,T.query[__]=E,T.query[pP]=i.toString(10);let O=h_(T,o,c);return T.query[fP]=this.getCanonicalHeaderList(O),T.query[S_]=await this.getSignature(E,x,this.getSigningKey(m,g,w,d),this.createCanonicalRequest(T,O,await cf(r,this.sha256))),T}async sign(r,n){return typeof r=="string"?this.signString(r,n):r.headers&&r.payload?this.signEvent(r,n):r.message?this.signMessage(r,n):this.signRequest(r,n)}async signEvent({headers:r,payload:n},{signingDate:s=new Date,priorSignature:i,signingRegion:o,signingService:a}){let c=o??await this.regionProvider(),{shortDate:u,longDate:l}=this.formatDate(s),d=af(u,c,a??this.service),m=await cf({headers:{},body:n},this.sha256),g=new this.sha256;g.update(r);let E=xs.toHex(await g.digest()),w=[vP,l,d,i,E,m].join(`
`);return this.signString(w,{signingDate:s,signingRegion:c,signingService:a})}async signMessage(r,{signingDate:n=new Date,signingRegion:s,signingService:i}){return this.signEvent({headers:this.headerFormatter.format(r.message.headers),payload:r.message.body},{signingDate:n,signingRegion:s,signingService:i,priorSignature:r.priorSignature}).then(a=>({message:r.message,signature:a}))}async signString(r,{signingDate:n=new Date,signingRegion:s,signingService:i}={}){let o=await this.credentialProvider();this.validateResolvedCredentials(o);let a=s??await this.regionProvider(),{shortDate:c}=this.formatDate(n),u=new this.sha256(await this.getSigningKey(o,a,c,i));return u.update(Pi.toUint8Array(r)),xs.toHex(await u.digest())}async signRequest(r,{signingDate:n=new Date,signableHeaders:s,unsignableHeaders:i,signingRegion:o,signingService:a}={}){let c=await this.credentialProvider();this.validateResolvedCredentials(c);let u=o??await this.regionProvider(),l=y_(r),{longDate:d,shortDate:m}=this.formatDate(n),g=af(m,u,a??this.service);l.headers[b_]=d,c.sessionToken&&(l.headers[yP]=c.sessionToken);let E=await cf(l,this.sha256);!CP(uf,l.headers)&&this.applyChecksum&&(l.headers[uf]=E);let w=h_(l,i,s),x=await this.getSignature(d,g,this.getSigningKey(c,u,m,a),this.createCanonicalRequest(l,w,E));return l.headers[w_]=`${sf} Credential=${c.accessKeyId}/${g}, SignedHeaders=${this.getCanonicalHeaderList(w)}, Signature=${x}`,l}async getSignature(r,n,s,i){let o=await this.createStringToSign(r,n,i,sf),a=new this.sha256(await s);return a.update(Pi.toUint8Array(o)),xs.toHex(await a.digest())}getSigningKey(r,n,s,i){return AP(this.sha256,r,s,n,i||this.service)}},NG={SignatureV4a:null};ae.ALGORITHM_IDENTIFIER=sf;ae.ALGORITHM_IDENTIFIER_V4A=TG;ae.ALGORITHM_QUERY_PARAM=lP;ae.ALWAYS_UNSIGNABLE_HEADERS=EP;ae.AMZ_DATE_HEADER=b_;ae.AMZ_DATE_QUERY_PARAM=__;ae.AUTH_HEADER=w_;ae.CREDENTIAL_QUERY_PARAM=dP;ae.DATE_HEADER=hP;ae.EVENT_ALGORITHM_IDENTIFIER=vP;ae.EXPIRES_QUERY_PARAM=pP;ae.GENERATED_HEADERS=mP;ae.HOST_HEADER=AG;ae.KEY_TYPE_IDENTIFIER=R_;ae.MAX_CACHE_SIZE=bP;ae.MAX_PRESIGNED_TTL=RP;ae.PROXY_HEADER_PATTERN=_P;ae.REGION_SET_PARAM=RG;ae.SEC_HEADER_PATTERN=SP;ae.SHA256_HEADER=uf;ae.SIGNATURE_HEADER=gP;ae.SIGNATURE_QUERY_PARAM=S_;ae.SIGNED_HEADERS_QUERY_PARAM=fP;ae.SignatureV4=E_;ae.SignatureV4Base=lf;ae.TOKEN_HEADER=yP;ae.TOKEN_QUERY_PARAM=v_;ae.UNSIGNABLE_PATTERNS=CG;ae.UNSIGNED_PAYLOAD=wP;ae.clearCredentialCache=xG;ae.createScope=af;ae.getCanonicalHeaders=h_;ae.getCanonicalQuery=xP;ae.getPayloadHash=cf;ae.getSigningKey=AP;ae.hasHeader=CP;ae.moveHeadersToQuery=TP;ae.prepareRequest=y_;ae.signatureV4aContainer=NG});function DG(t,{credentials:e,credentialDefaultProvider:r}){let n;return e?e?.memoized?n=e:n=QE(e,XE,Zd):r?n=Ss(r(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function LG(t,e){if(e.configBound)return e;let r=async n=>e({...n,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}var A_,Ii,PP,IP=b(()=>{zr();sr();A_=C(df()),Ii=t=>{let e=t.credentials,r=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(u){u&&u!==e&&u!==n&&(r=!0),e=u;let l=DG(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),d=LG(t,l);r&&!d.attributed?(n=async m=>d(m).then(g=>Cs(g,"CREDENTIALS_CODE","e")),n.memoized=d.memoized,n.configBound=d.configBound,n.attributed=!0):n=d},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;let{signingEscapePath:s=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:o}=t,a;return t.signer?a=Ss(t.signer):t.regionInfoProvider?a=()=>Ss(t.region)().then(async u=>[await t.regionInfoProvider(u,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},u]).then(([u,l])=>{let{signingRegion:d,signingService:m}=u;t.signingRegion=t.signingRegion||d||l,t.signingName=t.signingName||m||t.serviceId;let g={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},E=t.signerConstructor||A_.SignatureV4;return new E(g)}):a=async u=>{u=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Ss(t.region)(),properties:{}},u);let l=u.signingRegion,d=u.signingName;t.signingRegion=t.signingRegion||l,t.signingName=t.signingName||d||t.serviceId;let m={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:o,uriEscapePath:s},g=t.signerConstructor||A_.SignatureV4;return new g(m)},Object.assign(t,{systemClockOffset:i,signingEscapePath:s,signer:a})},PP=Ii});var OP=b(()=>{c_();Jx();rP();iP();IP()});var NP={};Tt(NP,{AWSSDKSigV4Signer:()=>a_,AwsSdkSigV4ASigner:()=>Xc,AwsSdkSigV4Signer:()=>ir,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>$o,NODE_SIGV4A_CONFIG_OPTIONS:()=>sP,getBearerTokenEnvKey:()=>rf,resolveAWSSDKSigV4Config:()=>PP,resolveAwsSdkSigV4AConfig:()=>nP,resolveAwsSdkSigV4Config:()=>Ii,validateSigningProperties:()=>qo});var C_=b(()=>{OP();l_()});function Ps(t){return typeof Buffer<"u"?Buffer.alloc(t):new Uint8Array(t)}function ff(t){return t[T_]=!0,t}var T_,pf=b(()=>{T_=Symbol("@smithy/core/cbor::tagSymbol")});function kP(t){Ne=t,Mn=new DataView(Ne.buffer,Ne.byteOffset,Ne.byteLength)}function mn(t,e){if(t>=e)throw new Error("unexpected end of (decode) payload.");let r=(Ne[t]&224)>>5,n=Ne[t]&31;switch(r){case 0:case 1:case 6:let s,i;if(n<24)s=n,i=1;else switch(n){case 24:case 25:case 26:case 27:let o=qP[n],a=o+1;if(i=a,e-t<a)throw new Error(`countLength ${o} greater than remaining buf len.`);let c=t+1;o===1?s=Ne[c]:o===2?s=Mn.getUint16(c):o===4?s=Mn.getUint32(c):s=Mn.getBigUint64(c);break;default:throw new Error(`unexpected minor value ${n}.`)}if(r===0)return de=i,x_(s);if(r===1){let o;return typeof s=="bigint"?o=BigInt(-1)-s:o=-1-s,de=i,x_(o)}else if(n===2||n===3){let o=Zc(t+i,e),a=BigInt(0),c=t+i+de;for(let u=c;u<c+o;++u)a=a<<BigInt(8)|BigInt(Ne[u]);return de=i+de+o,n===3?-a-BigInt(1):a}else if(n===4){let o=mn(t+i,e),[a,c]=o,u=c<0?-1:1,l="0".repeat(Math.abs(a)+1)+String(BigInt(u)*BigInt(c)),d,m=c<0?"-":"";return d=a===0?l:l.slice(0,l.length+a)+"."+l.slice(a),d=d.replace(/^0+/g,""),d===""&&(d="0"),d[0]==="."&&(d="0"+d),d=m+d,de=i+de,qE(d)}else{let o=mn(t+i,e);return de=i+de,ff({tag:x_(s),value:o})}case 3:case 5:case 4:case 2:if(n===31)switch(r){case 3:return BG(t,e);case 5:return zG(t,e);case 4:return VG(t,e);case 2:return jG(t,e)}else switch(r){case 3:return UG(t,e);case 5:return WG(t,e);case 4:return HG(t,e);case 2:return L_(t,e)}default:return GG(t,e)}}function MP(t,e,r){return qG&&t.constructor?.name==="Buffer"?t.toString("utf-8",e,r):DP?DP.decode(t.subarray(e,r)):(0,LP.toUtf8)(t.subarray(e,r))}function $G(t){let e=Number(t);return(e<Number.MIN_SAFE_INTEGER||Number.MAX_SAFE_INTEGER<e)&&console.warn(new Error(`@smithy/core/cbor - truncating BigInt(${t}) to ${e} with loss of precision.`)),e}function FG(t,e){let r=t>>7,n=(t&124)>>2,s=(t&3)<<8|e,i=r===0?1:-1,o,a;if(n===0){if(s===0)return 0;o=Math.pow(2,-14),a=0}else{if(n===31)return s===0?i*(1/0):NaN;o=Math.pow(2,n-15),a=1}return a+=s/1024,i*(o*a)}function Zc(t,e){let r=Ne[t]&31;if(r<24)return de=1,r;if(r===24||r===25||r===26||r===27){let n=qP[r];if(de=n+1,e-t<de)throw new Error(`countLength ${n} greater than remaining buf len.`);let s=t+1;return n===1?Ne[s]:n===2?Mn.getUint16(s):n===4?Mn.getUint32(s):$G(Mn.getBigUint64(s))}throw new Error(`unexpected minor value ${r}.`)}function UG(t,e){let r=Zc(t,e),n=de;if(t+=n,e-t<r)throw new Error(`string len ${r} greater than remaining buf len.`);let s=MP(Ne,t,t+r);return de=n+r,s}function BG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ne[t]===255){let c=Ps(r.length);return c.set(r,0),de=t-n+2,MP(c,0,c.length)}let s=(Ne[t]&224)>>5,i=Ne[t]&31;if(s!==3)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=L_(t,e);t+=de;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function L_(t,e){let r=Zc(t,e),n=de;if(t+=n,e-t<r)throw new Error(`unstructured byte string len ${r} greater than remaining buf len.`);let s=Ne.subarray(t,t+r);return de=n+r,s}function jG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ne[t]===255){let c=Ps(r.length);return c.set(r,0),de=t-n+2,c}let s=(Ne[t]&224)>>5,i=Ne[t]&31;if(s!==2)throw new Error(`unexpected major type ${s} in indefinite string.`);if(i===31)throw new Error("nested indefinite string.");let o=L_(t,e);t+=de;for(let c=0;c<o.length;++c)r.push(o[c])}throw new Error("expected break marker.")}function HG(t,e){let r=Zc(t,e),n=de;t+=n;let s=t,i=Array(r);for(let o=0;o<r;++o){let a=mn(t,e),c=de;i[o]=a,t+=c}return de=n+(t-s),i}function VG(t,e){t+=1;let r=[];for(let n=t;t<e;){if(Ne[t]===255)return de=t-n+2,r;let s=mn(t,e);t+=de,r.push(s)}throw new Error("expected break marker.")}function WG(t,e){let r=Zc(t,e),n=de;t+=n;let s=t,i={};for(let o=0;o<r;++o){if(t>=e)throw new Error("unexpected end of map payload.");let a=(Ne[t]&224)>>5;if(a!==3)throw new Error(`unexpected major type ${a} for map key at index ${t}.`);let c=mn(t,e);t+=de;let u=mn(t,e);t+=de,i[c]=u}return de=n+(t-s),i}function zG(t,e){t+=1;let r=t,n={};for(;t<e;){if(t>=e)throw new Error("unexpected end of map payload.");if(Ne[t]===255)return de=t-r+2,n;let s=(Ne[t]&224)>>5;if(s!==3)throw new Error(`unexpected major type ${s} for map key.`);let i=mn(t,e);t+=de;let o=mn(t,e);t+=de,n[i]=o}throw new Error("expected break marker.")}function GG(t,e){let r=Ne[t]&31;switch(r){case 21:case 20:return de=1,r===21;case 22:return de=1,null;case 23:return de=1,null;case 25:if(e-t<3)throw new Error("incomplete float16 at end of buf.");return de=3,FG(Ne[t+1],Ne[t+2]);case 26:if(e-t<5)throw new Error("incomplete float32 at end of buf.");return de=5,Mn.getFloat32(t+1);case 27:if(e-t<9)throw new Error("incomplete float64 at end of buf.");return de=9,Mn.getFloat64(t+1);default:throw new Error(`unexpected minor value ${r}.`)}}function x_(t){if(typeof t=="number")return t;let e=Number(t);return Number.MIN_SAFE_INTEGER<=e&&e<=Number.MAX_SAFE_INTEGER?e:t}var LP,MG,qG,Ne,Mn,DP,de,qP,$P=b(()=>{rr();LP=C(St());pf();MG=typeof TextDecoder<"u",qG=typeof Buffer<"u",Ne=Ps(0),Mn=new DataView(Ne.buffer,Ne.byteOffset,Ne.byteLength),DP=MG?new TextDecoder:null,de=0;qP={[24]:1,[25]:2,[26]:4,[27]:8}});function M_(t){Z.byteLength-X<t&&(X<16e6?mf(Math.max(Z.byteLength*4,Z.byteLength+t)):mf(Z.byteLength+t+16e6))}function q_(){let t=Ps(X);return t.set(Z.subarray(0,X),0),X=0,t}function mf(t){let e=Z;Z=Ps(t),e&&(e.copy?e.copy(Z,0,0,e.byteLength):Z.set(e,0)),Fn=new DataView(Z.buffer,Z.byteOffset,Z.byteLength)}function $n(t,e){e<24?Z[X++]=t<<5|e:e<256?(Z[X++]=t<<5|24,Z[X++]=e):e<65536?(Z[X++]=t<<5|25,Fn.setUint16(X,e),X+=2):e<2**32?(Z[X++]=t<<5|26,Fn.setUint32(X,e),X+=4):(Z[X++]=t<<5|27,Fn.setBigUint64(X,typeof e=="bigint"?e:BigInt(e)),X+=8)}function BP(t){let e=[t];for(;e.length;){let r=e.pop();if(M_(typeof r=="string"?r.length*4:64),typeof r=="string"){if(FP)$n(3,Buffer.byteLength(r)),X+=Z.write(r,X);else{let n=(0,UP.fromUtf8)(r);$n(3,n.byteLength),Z.set(n,X),X+=n.byteLength}continue}else if(typeof r=="number"){if(Number.isInteger(r)){let n=r>=0,s=n?0:1,i=n?r:-r-1;i<24?Z[X++]=s<<5|i:i<256?(Z[X++]=s<<5|24,Z[X++]=i):i<65536?(Z[X++]=s<<5|25,Z[X++]=i>>8,Z[X++]=i):i<4294967296?(Z[X++]=s<<5|26,Fn.setUint32(X,i),X+=4):(Z[X++]=s<<5|27,Fn.setBigUint64(X,BigInt(i)),X+=8);continue}Z[X++]=251,Fn.setFloat64(X,r),X+=8;continue}else if(typeof r=="bigint"){let n=r>=0,s=n?0:1,i=n?r:-r-BigInt(1),o=Number(i);if(o<24)Z[X++]=s<<5|o;else if(o<256)Z[X++]=s<<5|24,Z[X++]=o;else if(o<65536)Z[X++]=s<<5|25,Z[X++]=o>>8,Z[X++]=o&255;else if(o<4294967296)Z[X++]=s<<5|26,Fn.setUint32(X,o),X+=4;else if(i<BigInt("18446744073709551616"))Z[X++]=s<<5|27,Fn.setBigUint64(X,i),X+=8;else{let a=i.toString(2),c=new Uint8Array(Math.ceil(a.length/8)),u=i,l=0;for(;c.byteLength-++l>=0;)c[c.byteLength-l]=Number(u&BigInt(255)),u>>=BigInt(8);M_(c.byteLength*2),Z[X++]=n?194:195,FP?$n(2,Buffer.byteLength(c)):$n(2,c.byteLength),Z.set(c,X),X+=c.byteLength}continue}else if(r===null){Z[X++]=246;continue}else if(typeof r=="boolean"){Z[X++]=224|(r?21:20);continue}else{if(typeof r>"u")throw new Error("@smithy/core/cbor: client may not serialize undefined value.");if(Array.isArray(r)){for(let n=r.length-1;n>=0;--n)e.push(r[n]);$n(4,r.length);continue}else if(typeof r.byteLength=="number"){M_(r.length*2),$n(2,r.length),Z.set(r,X),X+=r.byteLength;continue}else if(typeof r=="object"){if(r instanceof Xe){let s=r.string.indexOf("."),i=s===-1?0:s-r.string.length+1,o=BigInt(r.string.replace(".",""));Z[X++]=196,e.push(o),e.push(i),$n(4,2);continue}if(r[T_])if("tag"in r&&"value"in r){e.push(r.value),$n(6,r.tag);continue}else throw new Error("tag encountered with missing fields, need 'tag' and 'value', found: "+JSON.stringify(r));let n=Object.keys(r);for(let s=n.length-1;s>=0;--s){let i=n[s];e.push(r[i]),e.push(i)}$n(5,n.length);continue}}throw new Error(`data type ${r?.constructor?.name??typeof r} not compatible for encoding.`)}}var UP,FP,KG,Z,Fn,X,jP=b(()=>{rr();UP=C(St());pf();FP=typeof Buffer<"u",KG=2048,Z=Ps(KG),Fn=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),X=0});var $_,HP=b(()=>{$P();jP();$_={deserialize(t){return kP(t),mn(0,t.length)},serialize(t){try{return BP(t),q_()}catch(e){throw q_(),e}},resizeEncodingBuffer(t){mf(t)}}});var gf,yf,Ef=b(()=>{pf();gf=t=>ff({tag:1,value:t.getTime()/1e3}),yf=(t,e)=>{let r=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i};if(e.__type!==void 0)return r(e.__type);let n=Object.keys(e).find(s=>s.toLowerCase()==="code");if(n&&e[n]!==void 0)return r(e[n])}});var B_,_f,F_,U_,j_=b(()=>{nr();$e();rr();B_=C(vt());HP();Ef();_f=class extends Vt{createSerializer(){let e=new F_;return e.setSerdeContext(this.serdeContext),e}createDeserializer(){let e=new U_;return e.setSerdeContext(this.serdeContext),e}},F_=class extends Vt{constructor(){super(...arguments);f(this,"value")}write(r,n){this.value=this.serialize(r,n)}serialize(r,n){let s=K.of(r);if(n==null)return s.isIdempotencyToken()?(0,hn.v4)():n;if(s.isBlobSchema())return typeof n=="string"?(this.serdeContext?.base64Decoder??B_.fromBase64)(n):n;if(s.isTimestampSchema())return typeof n=="number"||typeof n=="bigint"?gf(new Date(Number(n)/1e3|0)):gf(n);if(typeof n=="function"||typeof n=="object"){let i=n;if(s.isListSchema()&&Array.isArray(i)){let a=!!s.getMergedTraits().sparse,c=[],u=0;for(let l of i){let d=this.serialize(s.getValueSchema(),l);(d!=null||a)&&(c[u++]=d)}return c}if(i instanceof Date)return gf(i);let o={};if(s.isMapSchema()){let a=!!s.getMergedTraits().sparse;for(let c of Object.keys(i)){let u=this.serialize(s.getValueSchema(),i[c]);(u!=null||a)&&(o[c]=u)}}else if(s.isStructSchema())for(let[a,c]of s.structIterator()){let u=this.serialize(c,i[a]);u!=null&&(o[a]=u)}else if(s.isDocumentSchema())for(let a of Object.keys(i))o[a]=this.serialize(s.getValueSchema(),i[a]);return o}return n}flush(){let r=$_.serialize(this.value);return this.value=void 0,r}},U_=class extends Vt{read(e,r){let n=$_.deserialize(r);return this.readValue(e,n)}readValue(e,r){let n=K.of(e);if(n.isTimestampSchema()&&typeof r=="number")return Vc(r);if(n.isBlobSchema())return typeof r=="string"?(this.serdeContext?.base64Decoder??B_.fromBase64)(r):r;if(typeof r>"u"||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||typeof r=="bigint"||typeof r=="symbol")return r;if(typeof r=="function"||typeof r=="object"){if(r===null)return null;if("byteLength"in r||r instanceof Date||n.isDocumentSchema())return r;if(n.isListSchema()){let i=[],o=n.getValueSchema(),a=!!n.getMergedTraits().sparse;for(let c of r){let u=this.readValue(o,c);(u!=null||a)&&i.push(u)}return i}let s={};if(n.isMapSchema()){let i=!!n.getMergedTraits().sparse,o=n.getValueSchema();for(let a of Object.keys(r)){let c=this.readValue(o,r[a]);(c!=null||i)&&(s[a]=c)}}else if(n.isStructSchema())for(let[i,o]of n.structIterator()){let a=this.readValue(o,r[i]);a!=null&&(s[i]=a)}return s}else return r}}});var VP,Sf,WP=b(()=>{nr();$e();VP=C(Bt());j_();Ef();Sf=class extends Dn{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"codec",new _f);f(this,"serializer",this.codec.createSerializer());f(this,"deserializer",this.codec.createDeserializer())}getShapeId(){return"smithy.protocols#rpcv2Cbor"}getPayloadCodec(){return this.codec}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);if(Object.assign(i.headers,{"content-type":this.getDefaultContentType(),"smithy-protocol":"rpc-v2-cbor",accept:this.getDefaultContentType()}),Vr(r.input)==="unit")delete i.body,delete i.headers["content-type"];else{i.body||(this.serializer.write(15,{}),i.body=this.serializer.flush());try{i.headers["content-length"]=String(i.body.byteLength)}catch{}}let{service:o,operation:a}=(0,VP.getSmithyContext)(s),c=`/service/${o}/operation/${a}`;return i.path.endsWith("/")?i.path+=c.slice(1):i.path+=c,i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=yf(s,i)??"Unknown",c=this.options.defaultNamespace;a.includes("#")&&([c]=a.split("#"));let u={$metadata:o,$response:s,$fault:s.statusCode<=500?"client":"server"},l=_e.for(c),d;try{d=l.getSchema(a)}catch{i.Message&&(i.message=i.Message);let O=_e.for("smithy.ts.sdk.synthetic."+c),M=O.getBaseException();if(M){let U=O.getErrorCtor(M);throw Object.assign(new U({name:a}),u,i)}throw Object.assign(new Error(a),u,i)}let m=K.of(d),g=l.getErrorCtor(d),E=i.message??i.Message??"Unknown",w=new g(E),x={};for(let[T,O]of m.structIterator())x[T]=this.deserializer.readValue(O,i[T]);throw Object.assign(w,u,{$fault:m.getMergedTraits().error,message:E},x)}getDefaultContentType(){return"application/cbor"}}});var zP=b(()=>{Ef();WP();j_()});var Sr,jo=b(()=>{$e();Sr=class{resolveRestContentType(e,r){let n=r.getMemberSchemas(),s=Object.values(n).find(i=>!!i.getMergedTraits().httpPayload);if(s){let i=s.getMergedTraits().mediaType;return i||(s.isStringSchema()?"text/plain":s.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(n).find(o=>{let{httpQuery:a,httpQueryParams:c,httpHeader:u,httpLabel:l,httpPrefixHeaders:d}=o.getMergedTraits();return!a&&!c&&!u&&!l&&d===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,n,s,i,o){let a=r,c=e;e.includes("#")&&([a,c]=e.split("#"));let u={$metadata:i,$response:n,$fault:n.statusCode<500?"client":"server"},l=_e.for(a);try{return{errorSchema:o?.(l,c)??l.getSchema(e),errorMetadata:u}}catch{s.message=s.message??s.Message??"UnknownError";let m=_e.for("smithy.ts.sdk.synthetic."+a),g=m.getBaseException();if(g){let E=m.getErrorCtor(g)??Error;throw Object.assign(new E({name:c}),u,s)}throw Object.assign(new Error(c),u,s)}}setQueryCompatError(e,r){let n=r.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){let[s,i]=n.split(";"),o=Object.entries(e),a={Code:s,Type:i};Object.assign(e,a);for(let[c,u]of o)a[c]=u;delete a.__type,e.Error=a}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}}});var vf,GP=b(()=>{zP();$e();jo();vf=class extends Sf{constructor({defaultNamespace:r,awsQueryCompatible:n}){super({defaultNamespace:r});f(this,"awsQueryCompatible");f(this,"mixin",new Sr);this.awsQueryCompatible=!!n}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),i}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=yf(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[w,x]of l.structIterator())E[w]=this.deserializer.readValue(x,i[w]);throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var KP,XP,QP,YP=b(()=>{KP=t=>{if(t==null)return t;if(typeof t=="number"||typeof t=="bigint"){let e=new Error(`Received number ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}if(typeof t=="boolean"){let e=new Error(`Received boolean ${t} where a string was expected.`);return e.name="Warning",console.warn(e),String(t)}return t},XP=t=>{if(t==null)return t;if(typeof t=="string"){let e=t.toLowerCase();if(t!==""&&e!=="false"&&e!=="true"){let r=new Error(`Received string "${t}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return t!==""&&e!=="false"}return t},QP=t=>{if(t==null)return t;if(typeof t=="string"){let e=Number(t);if(e.toString()!==t){let r=new Error(`Received string "${t}" where a number was expected.`);return r.name="Warning",console.warn(r),t}return e}return t}});var It,Ds=b(()=>{It=class{constructor(){f(this,"serdeContext")}setSerdeContext(e){this.serdeContext=e}}});function JP(t,e,r){if(r?.source){let n=r.source;if(typeof e=="number"&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER||n!==String(e)))return n.includes(".")?new Xe(n,"bigDecimal"):BigInt(n)}return e}var ZP=b(()=>{rr()});var nI=_(rI=>{"use strict";var Oi=(t,e)=>{let r=[];if(t&&r.push(t),e)for(let n of e)r.push(n);return r},Ls=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,H_=()=>{let t=[],e=[],r=!1,n=new Set,s=d=>d.sort((m,g)=>eI[g.step]-eI[m.step]||tI[g.priority||"normal"]-tI[m.priority||"normal"]),i=d=>{let m=!1,g=E=>{let w=Oi(E.name,E.aliases);if(w.includes(d)){m=!0;for(let x of w)n.delete(x);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},o=d=>{let m=!1,g=E=>{if(E.middleware===d){m=!0;for(let w of Oi(E.name,E.aliases))n.delete(w);return!1}return!0};return t=t.filter(g),e=e.filter(g),m},a=d=>(t.forEach(m=>{d.add(m.middleware,{...m})}),e.forEach(m=>{d.addRelativeTo(m.middleware,{...m})}),d.identifyOnResolve?.(l.identifyOnResolve()),d),c=d=>{let m=[];return d.before.forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m.push(d),d.after.reverse().forEach(g=>{g.before.length===0&&g.after.length===0?m.push(g):m.push(...c(g))}),m},u=(d=!1)=>{let m=[],g=[],E={};return t.forEach(x=>{let T={...x,before:[],after:[]};for(let O of Oi(T.name,T.aliases))E[O]=T;m.push(T)}),e.forEach(x=>{let T={...x,before:[],after:[]};for(let O of Oi(T.name,T.aliases))E[O]=T;g.push(T)}),g.forEach(x=>{if(x.toMiddleware){let T=E[x.toMiddleware];if(T===void 0){if(d)return;throw new Error(`${x.toMiddleware} is not found when adding ${Ls(x.name,x.aliases)} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&T.after.push(x),x.relation==="before"&&T.before.push(x)}}),s(m).map(c).reduce((x,T)=>(x.push(...T),x),[])},l={add:(d,m={})=>{let{name:g,override:E,aliases:w}=m,x={step:"initialize",priority:"normal",middleware:d,...m},T=Oi(g,w);if(T.length>0){if(T.some(O=>n.has(O))){if(!E)throw new Error(`Duplicate middleware name '${Ls(g,w)}'`);for(let O of T){let M=t.findIndex(W=>W.name===O||W.aliases?.some(ye=>ye===O));if(M===-1)continue;let U=t[M];if(U.step!==x.step||x.priority!==U.priority)throw new Error(`"${Ls(U.name,U.aliases)}" middleware with ${U.priority} priority in ${U.step} step cannot be overridden by "${Ls(g,w)}" middleware with ${x.priority} priority in ${x.step} step.`);t.splice(M,1)}}for(let O of T)n.add(O)}t.push(x)},addRelativeTo:(d,m)=>{let{name:g,override:E,aliases:w}=m,x={middleware:d,...m},T=Oi(g,w);if(T.length>0){if(T.some(O=>n.has(O))){if(!E)throw new Error(`Duplicate middleware name '${Ls(g,w)}'`);for(let O of T){let M=e.findIndex(W=>W.name===O||W.aliases?.some(ye=>ye===O));if(M===-1)continue;let U=e[M];if(U.toMiddleware!==x.toMiddleware||U.relation!==x.relation)throw new Error(`"${Ls(U.name,U.aliases)}" middleware ${U.relation} "${U.toMiddleware}" middleware cannot be overridden by "${Ls(g,w)}" middleware ${x.relation} "${x.toMiddleware}" middleware.`);e.splice(M,1)}}for(let O of T)n.add(O)}e.push(x)},clone:()=>a(H_()),use:d=>{d.applyToStack(l)},remove:d=>typeof d=="string"?i(d):o(d),removeByTag:d=>{let m=!1,g=E=>{let{tags:w,name:x,aliases:T}=E;if(w&&w.includes(d)){let O=Oi(x,T);for(let M of O)n.delete(M);return m=!0,!1}return!0};return t=t.filter(g),e=e.filter(g),m},concat:d=>{let m=a(H_());return m.use(d),m.identifyOnResolve(r||m.identifyOnResolve()||(d.identifyOnResolve?.()??!1)),m},applyToStack:a,identify:()=>u(!0).map(d=>{let m=d.step??d.relation+" "+d.toMiddleware;return Ls(d.name,d.aliases)+" - "+m}),identifyOnResolve(d){return typeof d=="boolean"&&(r=d),r},resolve:(d,m)=>{for(let g of u().map(E=>E.middleware).reverse())d=g(d,m);return r&&console.log(l.identify()),d}};return l},eI={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},tI={high:3,normal:2,low:1};rI.constructStack=H_});var fe=_(xe=>{"use strict";var oI=nI(),J_=(nr(),le(nx)),W_=Pn(),XG=($e(),le(Ud)),sI=(rr(),le(jT)),z_=class{constructor(e){f(this,"config");f(this,"middlewareStack",oI.constructStack());f(this,"initConfig");f(this,"handlers");this.config=e}send(e,r,n){let s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=s===void 0&&this.config.cacheMiddleware===!0,a;if(o){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(e.constructor)?a=c.get(e.constructor):(a=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,a))}else delete this.handlers,a=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)a(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return a(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},V_="***SensitiveInformation***";function G_(t,e){if(e==null)return e;let r=XG.NormalizedSchema.of(t);if(r.getMergedTraits().sensitive)return V_;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return V_}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return V_}else if(r.isStructSchema()&&typeof e=="object"){let n=e,s={};for(let[i,o]of r.structIterator())n[i]!=null&&(s[i]=G_(o,n[i]));return s}return e}var wf=class{constructor(){f(this,"middlewareStack",oI.constructStack());f(this,"schema")}static classBuilder(){return new K_}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:l,CommandCtor:d}){for(let x of s.bind(this)(d,e,r,n))this.middlewareStack.use(x);let m=e.concat(this.middlewareStack),{logger:g}=r,E={logger:g,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[W_.SMITHY_CONTEXT_KEY]:{commandInstance:this,...u},...l},{requestHandler:w}=r;return m.resolve(x=>w.handle(x.request,n||{}),E)}},K_=class{constructor(){f(this,"_init",()=>{});f(this,"_ep",{});f(this,"_middlewareFn",()=>[]);f(this,"_commandName","");f(this,"_clientName","");f(this,"_additionalContext",{});f(this,"_smithyContext",{});f(this,"_inputFilterSensitiveLog");f(this,"_outputFilterSensitiveLog");f(this,"_serializer",null);f(this,"_deserializer",null);f(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){let e=this,r;return r=class extends wf{constructor(...[s]){super();f(this,"input");f(this,"serialize",e._serializer);f(this,"deserialize",e._deserializer);this.input=s??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(s,i,o){let a=e._operationSchema,c=a?.[4]??a?.input,u=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,i,o,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?G_.bind(null,c):l=>l),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?G_.bind(null,u):l=>l),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}},QG="***SensitiveInformation***",YG=(t,e)=>{for(let r of Object.keys(t)){let n=t[r],s=async function(o,a,c){let u=new n(o);if(typeof a=="function")this.send(u,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(u,a||{},c)}else return this.send(u,a)},i=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");e.prototype[i]=s}},X_=class t extends Error{constructor(r){super(r.message);f(this,"$fault");f(this,"$response");f(this,"$retryable");f(this,"$metadata");Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=r.name,this.$fault=r.$fault,this.$metadata=r.$metadata}static isInstance(r){if(!r)return!1;let n=r;return t.prototype.isPrototypeOf(n)||!!n.$fault&&!!n.$metadata&&(n.$fault==="client"||n.$fault==="server")}static[Symbol.hasInstance](r){if(!r)return!1;let n=r;return this===t?t.isInstance(r):t.isInstance(r)?n.name&&this.name?this.prototype.isPrototypeOf(r)||n.name===this.name:this.prototype.isPrototypeOf(r):!1}},aI=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});let r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},cI=({output:t,parsedBody:e,exceptionCtor:r,errorCode:n})=>{let s=ZG(t),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:e?.code||e?.Code||n||i||"UnknownError",$fault:"client",$metadata:s});throw aI(o,e)},JG=t=>({output:e,parsedBody:r,errorCode:n})=>{cI({output:e,parsedBody:r,exceptionCtor:t,errorCode:n})},ZG=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),e6=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},iI=!1,t6=t=>{t&&!iI&&parseInt(t.substring(1,t.indexOf(".")))<16&&(iI=!0)},r6=t=>{let e=[];for(let r in W_.AlgorithmId){let n=W_.AlgorithmId[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},n6=t=>{let e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},s6=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),i6=t=>{let e={};return e.retryStrategy=t.retryStrategy(),e},uI=t=>Object.assign(r6(t),s6(t)),o6=uI,a6=t=>Object.assign(n6(t),i6(t)),c6=t=>Array.isArray(t)?t:[t],lI=t=>{let e="#text";for(let r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=lI(t[r]));return t},u6=t=>t!=null,Q_=class{trace(){}debug(){}info(){}warn(){}error(){}};function dI(t,e,r){let n,s,i;if(typeof e>"u"&&typeof r>"u")n={},i=t;else{if(n=t,typeof e=="function")return s=e,i=r,f6(n,s,i);i=e}for(let o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}fI(n,null,i,o)}return n}var l6=t=>{let e={};for(let[r,n]of Object.entries(t||{}))e[r]=[,n];return e},d6=(t,e)=>{let r={};for(let n in e)fI(r,t,e,n);return r},f6=(t,e,r)=>dI(t,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[e,i()]:n[s]=[e,i],n),{})),fI=(t,e,r,n)=>{if(e!==null){let o=r[n];typeof o=="function"&&(o=[,o]);let[a=p6,c=h6,u=n]=o;(typeof a=="function"&&a(e[u])||typeof a!="function"&&a)&&(t[n]=c(e[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o,a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?t[n]=o:c&&(t[n]=i())}else{let o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(t[n]=i)}},p6=t=>t!=null,h6=t=>t,m6=t=>{if(t!==t)return"NaN";switch(t){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return t}},g6=t=>t.toISOString().replace(".000Z","Z"),Y_=t=>{if(t==null)return{};if(Array.isArray(t))return t.filter(e=>e!=null).map(Y_);if(typeof t=="object"){let e={};for(let r of Object.keys(t))t[r]!=null&&(e[r]=Y_(t[r]));return e}return t};Object.defineProperty(xe,"collectBody",{enumerable:!0,get:function(){return J_.collectBody}});Object.defineProperty(xe,"extendedEncodeURIComponent",{enumerable:!0,get:function(){return J_.extendedEncodeURIComponent}});Object.defineProperty(xe,"resolvedPath",{enumerable:!0,get:function(){return J_.resolvedPath}});xe.Client=z_;xe.Command=wf;xe.NoOpLogger=Q_;xe.SENSITIVE_STRING=QG;xe.ServiceException=X_;xe._json=Y_;xe.convertMap=l6;xe.createAggregatedClient=YG;xe.decorateServiceException=aI;xe.emitWarningIfUnsupportedVersion=t6;xe.getArrayIfSingleItem=c6;xe.getDefaultClientConfiguration=o6;xe.getDefaultExtensionConfiguration=uI;xe.getValueFromTextNode=lI;xe.isSerializableHeaderValue=u6;xe.loadConfigsForDefaultMode=e6;xe.map=dI;xe.resolveDefaultRuntimeConfig=a6;xe.serializeDateTime=g6;xe.serializeFloat=m6;xe.take=d6;xe.throwDefaultError=cI;xe.withBaseException=JG;Object.keys(sI).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(xe,t)&&Object.defineProperty(xe,t,{enumerable:!0,get:function(){return sI[t]}})})});var pI,hI,bf,Z_=b(()=>{pI=C(fe()),hI=C(St()),bf=(t,e)=>(0,pI.collectBody)(t,e).then(r=>(e?.utf8Encoder??hI.toUtf8)(r))});var eu,mI,Ho,tu=b(()=>{Z_();eu=(t,e)=>bf(t,e).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),mI=async(t,e)=>{let r=await eu(t,e);return r.message=r.message??r.Message,r},Ho=(t,e)=>{let r=(i,o)=>Object.keys(i).find(a=>a.toLowerCase()===o.toLowerCase()),n=i=>{let o=i;return typeof o=="number"&&(o=o.toString()),o.indexOf(",")>=0&&(o=o.split(",")[0]),o.indexOf(":")>=0&&(o=o.split(":")[0]),o.indexOf("#")>=0&&(o=o.split("#")[1]),o},s=r(t.headers,"x-amzn-errortype");if(s!==void 0)return n(t.headers[s]);if(e&&typeof e=="object"){let i=r(e,"code");if(i&&e[i]!==void 0)return n(e[i]);if(e.__type!==void 0)return n(e.__type)}}});var gI,Vo,eS=b(()=>{nr();$e();rr();gI=C(vt());Ds();ZP();tu();Vo=class extends It{constructor(r){super();f(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,JP):await eu(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let s=n!==null&&typeof n=="object",i=K.of(r);if(i.isListSchema()&&Array.isArray(n)){let a=i.getValueSchema(),c=[],u=!!i.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._read(a,l));return c}else if(i.isMapSchema()&&s){let a=i.getValueSchema(),c={},u=!!i.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._read(a,d));return c}else if(i.isStructSchema()&&s){let a={};for(let[c,u]of i.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._read(u,n[l]);d!=null&&(a[c]=d)}return a}if(i.isBlobSchema()&&typeof n=="string")return(0,gI.fromBase64)(n);let o=i.getMergedTraits().mediaType;if(i.isStringSchema()&&typeof n=="string"&&o&&(o==="application/json"||o.endsWith("+json")))return Ht.from(n);if(i.isTimestampSchema()&&n!=null)switch(hr(i,this.settings)){case 5:return bE(n);case 6:return RE(n);case 7:return AE(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}if(i.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(i.isBigDecimalSchema()&&n!=null){if(n instanceof Xe)return n;let a=n;return a.type==="bigDecimal"&&"string"in a?new Xe(a.string,a.type):new Xe(String(n),"bigDecimal")}if(i.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}if(i.isDocumentSchema())if(s){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Xe?a[c]=u:a[c]=this._read(i,u);return a}else return structuredClone(n);return n}}});var yI,Rf,EI=b(()=>{rr();yI="\u039D",Rf=class{constructor(){f(this,"values",new Map);f(this,"counter",0);f(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(e,r)=>{if(r instanceof Xe){let n=`${yI+"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),s=`${yI+"b"+this.counter++}_`+n;return this.values.set(`"${s}"`,n),s}return r}}replaceInJson(e){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return e;for(let[r,n]of this.values)e=e.replace(r,n);return e}}});var _I,Wo,tS=b(()=>{nr();$e();rr();_I=C(vt());Ds();EI();Wo=class extends It{constructor(r){super();f(this,"settings");f(this,"buffer");f(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=K.of(r),this.buffer=this._write(this.rootSchema,n)}writeDiscriminatedDocument(r,n){this.write(r,n),typeof this.buffer=="object"&&(this.buffer.__type=K.of(r).getName(!0))}flush(){let{rootSchema:r}=this;if(this.rootSchema=void 0,r?.isStructSchema()||r?.isDocumentSchema()){let n=new Rf;return n.replaceInJson(JSON.stringify(this.buffer,n.createReplacer(),0))}return this.buffer}_write(r,n,s){let i=n!==null&&typeof n=="object",o=K.of(r);if(o.isListSchema()&&Array.isArray(n)){let a=o.getValueSchema(),c=[],u=!!o.getMergedTraits().sparse;for(let l of n)(u||l!=null)&&c.push(this._write(a,l));return c}else if(o.isMapSchema()&&i){let a=o.getValueSchema(),c={},u=!!o.getMergedTraits().sparse;for(let[l,d]of Object.entries(n))(u||d!=null)&&(c[l]=this._write(a,d));return c}else if(o.isStructSchema()&&i){let a={};for(let[c,u]of o.structIterator()){let l=this.settings.jsonName?u.getMergedTraits().jsonName??c:c,d=this._write(u,n[c],o);d!==void 0&&(a[l]=d)}return a}if(!(n===null&&s?.isStructSchema())){if(o.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")||o.isDocumentSchema()&&n instanceof Uint8Array)return o===this.rootSchema?n:(this.serdeContext?.base64Encoder??_I.toBase64)(n);if((o.isTimestampSchema()||o.isDocumentSchema())&&n instanceof Date)switch(hr(o,this.settings)){case 5:return n.toISOString().replace(".000Z","Z");case 6:return Bc(n);case 7:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}if(o.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);if(o.isStringSchema()){if(typeof n>"u"&&o.isIdempotencyToken())return(0,hn.v4)();let a=o.getMergedTraits().mediaType;if(n!=null&&a&&(a==="application/json"||a.endsWith("+json")))return Ht.from(n)}if(o.isDocumentSchema())if(i){let a=Array.isArray(n)?[]:{};for(let[c,u]of Object.entries(n))u instanceof Xe?a[c]=u:a[c]=this._write(o,u);return a}else return structuredClone(n);return n}}}});var ks,Af=b(()=>{Ds();eS();tS();ks=class extends It{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Wo(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new Vo(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Ms,Cf=b(()=>{nr();$e();jo();Af();tu();Ms=class extends Dn{constructor({defaultNamespace:r,serviceTarget:n,awsQueryCompatible:s}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"serviceTarget");f(this,"codec");f(this,"mixin",new Sr);f(this,"awsQueryCompatible");this.serviceTarget=n,this.codec=new ks({timestampFormat:{useTrait:!0,default:7},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer(),this.awsQueryCompatible=!!s}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);return i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":`${this.serviceTarget}.${r.name}`}),this.awsQueryCompatible&&(i.headers["x-amzn-query-mode"]="true"),(Vr(r.input)==="unit"||!i.body)&&(i.body="{}"),i}getPayloadCodec(){return this.codec}async handleError(r,n,s,i,o){this.awsQueryCompatible&&this.mixin.setQueryCompatError(i,s);let a=Ho(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d),E={};for(let[w,x]of l.structIterator()){let T=x.getMergedTraits().jsonName??w;E[w]=this.codec.createDeserializer().readObject(x,i[T])}throw this.awsQueryCompatible&&this.mixin.queryCompatOutput(i,E),Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}}});var Tf,SI=b(()=>{Cf();Tf=class extends Ms{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}getDefaultContentType(){return"application/x-amz-json-1.0"}}});var xf,vI=b(()=>{Cf();xf=class extends Ms{constructor({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n}){super({defaultNamespace:e,serviceTarget:r,awsQueryCompatible:n})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}getDefaultContentType(){return"application/x-amz-json-1.1"}}});var zo,wI=b(()=>{nr();$e();jo();Af();tu();zo=class extends Si{constructor({defaultNamespace:r}){super({defaultNamespace:r});f(this,"serializer");f(this,"deserializer");f(this,"codec");f(this,"mixin",new Sr);let n={timestampFormat:{useTrait:!0,default:7},httpBindings:!0,jsonName:!0};this.codec=new ks(n),this.serializer=new bi(this.codec.createSerializer(),n),this.deserializer=new wi(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=K.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]&&!i.body&&(i.body="{}"),i}async handleError(r,n,s,i,o){let a=Ho(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[w,x]of l.structIterator()){let T=x.getMergedTraits().jsonName??w;E[w]=this.codec.createDeserializer().readObject(x,i[T])}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/json"}}});var bI,RI,AI=b(()=>{bI=C(fe()),RI=t=>{if(t!=null)return typeof t=="object"&&"__type"in t&&delete t.__type,(0,bI.expectUnion)(t)}});var TI=_((Bxe,CI)=>{(()=>{"use strict";var t={d:(p,h)=>{for(var S in h)t.o(h,S)&&!t.o(p,S)&&Object.defineProperty(p,S,{enumerable:!0,get:h[S]})},o:(p,h)=>Object.prototype.hasOwnProperty.call(p,h),r:p=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{XMLBuilder:()=>ys,XMLParser:()=>M3,XMLValidator:()=>V3});let r=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n=new RegExp("^["+r+"]["+r+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function s(p,h){let S=[],A=h.exec(p);for(;A;){let v=[];v.startIndex=h.lastIndex-A[0].length;let R=A.length;for(let I=0;I<R;I++)v.push(A[I]);S.push(v),A=h.exec(p)}return S}let i=function(p){return n.exec(p)!=null},o={allowBooleanAttributes:!1,unpairedTags:[]};function a(p,h){h=Object.assign({},o,h);let S=[],A=!1,v=!1;p[0]==="\uFEFF"&&(p=p.substr(1));for(let R=0;R<p.length;R++)if(p[R]==="<"&&p[R+1]==="?"){if(R+=2,R=u(p,R),R.err)return R}else{if(p[R]!=="<"){if(c(p[R]))continue;return T("InvalidChar","char '"+p[R]+"' is not expected.",M(p,R))}{let I=R;if(R++,p[R]==="!"){R=l(p,R);continue}{let P=!1;p[R]==="/"&&(P=!0,R++);let N="";for(;R<p.length&&p[R]!==">"&&p[R]!==" "&&p[R]!=="	"&&p[R]!==`
`&&p[R]!=="\r";R++)N+=p[R];if(N=N.trim(),N[N.length-1]==="/"&&(N=N.substring(0,N.length-1),R--),!i(N)){let Q;return Q=N.trim().length===0?"Invalid space after '<'.":"Tag '"+N+"' is an invalid name.",T("InvalidTag",Q,M(p,R))}let $=g(p,R);if($===!1)return T("InvalidAttr","Attributes for '"+N+"' have open quote.",M(p,R));let re=$.value;if(R=$.index,re[re.length-1]==="/"){let Q=R-re.length;re=re.substring(0,re.length-1);let ge=w(re,h);if(ge!==!0)return T(ge.err.code,ge.err.msg,M(p,Q+ge.err.line));A=!0}else if(P){if(!$.tagClosed)return T("InvalidTag","Closing tag '"+N+"' doesn't have proper closing.",M(p,R));if(re.trim().length>0)return T("InvalidTag","Closing tag '"+N+"' can't have attributes or invalid starting.",M(p,I));if(S.length===0)return T("InvalidTag","Closing tag '"+N+"' has not been opened.",M(p,I));{let Q=S.pop();if(N!==Q.tagName){let ge=M(p,Q.tagStartPos);return T("InvalidTag","Expected closing tag '"+Q.tagName+"' (opened in line "+ge.line+", col "+ge.col+") instead of closing tag '"+N+"'.",M(p,I))}S.length==0&&(v=!0)}}else{let Q=w(re,h);if(Q!==!0)return T(Q.err.code,Q.err.msg,M(p,R-re.length+Q.err.line));if(v===!0)return T("InvalidXml","Multiple possible root nodes found.",M(p,R));h.unpairedTags.indexOf(N)!==-1||S.push({tagName:N,tagStartPos:I}),A=!0}for(R++;R<p.length;R++)if(p[R]==="<"){if(p[R+1]==="!"){R++,R=l(p,R);continue}if(p[R+1]!=="?")break;if(R=u(p,++R),R.err)return R}else if(p[R]==="&"){let Q=x(p,R);if(Q==-1)return T("InvalidChar","char '&' is not expected.",M(p,R));R=Q}else if(v===!0&&!c(p[R]))return T("InvalidXml","Extra text at the end",M(p,R));p[R]==="<"&&R--}}}return A?S.length==1?T("InvalidTag","Unclosed tag '"+S[0].tagName+"'.",M(p,S[0].tagStartPos)):!(S.length>0)||T("InvalidXml","Invalid '"+JSON.stringify(S.map(R=>R.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):T("InvalidXml","Start tag expected.",1)}function c(p){return p===" "||p==="	"||p===`
`||p==="\r"}function u(p,h){let S=h;for(;h<p.length;h++)if(!(p[h]!="?"&&p[h]!=" ")){let A=p.substr(S,h-S);if(h>5&&A==="xml")return T("InvalidXml","XML declaration allowed only at the start of the document.",M(p,h));if(p[h]=="?"&&p[h+1]==">"){h++;break}}return h}function l(p,h){if(p.length>h+5&&p[h+1]==="-"&&p[h+2]==="-"){for(h+=3;h<p.length;h++)if(p[h]==="-"&&p[h+1]==="-"&&p[h+2]===">"){h+=2;break}}else if(p.length>h+8&&p[h+1]==="D"&&p[h+2]==="O"&&p[h+3]==="C"&&p[h+4]==="T"&&p[h+5]==="Y"&&p[h+6]==="P"&&p[h+7]==="E"){let S=1;for(h+=8;h<p.length;h++)if(p[h]==="<")S++;else if(p[h]===">"&&(S--,S===0))break}else if(p.length>h+9&&p[h+1]==="["&&p[h+2]==="C"&&p[h+3]==="D"&&p[h+4]==="A"&&p[h+5]==="T"&&p[h+6]==="A"&&p[h+7]==="["){for(h+=8;h<p.length;h++)if(p[h]==="]"&&p[h+1]==="]"&&p[h+2]===">"){h+=2;break}}return h}let d='"',m="'";function g(p,h){let S="",A="",v=!1;for(;h<p.length;h++){if(p[h]===d||p[h]===m)A===""?A=p[h]:A!==p[h]||(A="");else if(p[h]===">"&&A===""){v=!0;break}S+=p[h]}return A===""&&{value:S,index:h,tagClosed:v}}let E=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function w(p,h){let S=s(p,E),A={};for(let v=0;v<S.length;v++){if(S[v][1].length===0)return T("InvalidAttr","Attribute '"+S[v][2]+"' has no space in starting.",U(S[v]));if(S[v][3]!==void 0&&S[v][4]===void 0)return T("InvalidAttr","Attribute '"+S[v][2]+"' is without value.",U(S[v]));if(S[v][3]===void 0&&!h.allowBooleanAttributes)return T("InvalidAttr","boolean attribute '"+S[v][2]+"' is not allowed.",U(S[v]));let R=S[v][2];if(!O(R))return T("InvalidAttr","Attribute '"+R+"' is an invalid name.",U(S[v]));if(A.hasOwnProperty(R))return T("InvalidAttr","Attribute '"+R+"' is repeated.",U(S[v]));A[R]=1}return!0}function x(p,h){if(p[++h]===";")return-1;if(p[h]==="#")return function(A,v){let R=/\d/;for(A[v]==="x"&&(v++,R=/[\da-fA-F]/);v<A.length;v++){if(A[v]===";")return v;if(!A[v].match(R))break}return-1}(p,++h);let S=0;for(;h<p.length;h++,S++)if(!(p[h].match(/\w/)&&S<20)){if(p[h]===";")break;return-1}return h}function T(p,h,S){return{err:{code:p,msg:h,line:S.line||S,col:S.col}}}function O(p){return i(p)}function M(p,h){let S=p.substring(0,h).split(/\r?\n/);return{line:S.length,col:S[S.length-1].length+1}}function U(p){return p.startIndex+p[1].length}let W={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(p,h,S){return p},captureMetaData:!1},ye;ye=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class at{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,S){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:S})}addChild(h,S){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child}),S!==void 0&&(this.child[this.child.length-1][ye]={startIndex:S})}static getMetaDataSymbol(){return ye}}function he(p,h){let S={};if(p[h+3]!=="O"||p[h+4]!=="C"||p[h+5]!=="T"||p[h+6]!=="Y"||p[h+7]!=="P"||p[h+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{h+=9;let A=1,v=!1,R=!1,I="";for(;h<p.length;h++)if(p[h]!=="<"||R)if(p[h]===">"){if(R?p[h-1]==="-"&&p[h-2]==="-"&&(R=!1,A--):A--,A===0)break}else p[h]==="["?v=!0:I+=p[h];else{if(v&&mi(p,"!ENTITY",h)){let P,N;h+=7,[P,N,h]=Ie(p,h+1),N.indexOf("&")===-1&&(S[P]={regx:RegExp(`&${P};`,"g"),val:N})}else if(v&&mi(p,"!ELEMENT",h)){h+=8;let{index:P}=m3(p,h+1);h=P}else if(v&&mi(p,"!ATTLIST",h))h+=8;else if(v&&mi(p,"!NOTATION",h)){h+=9;let{index:P}=rt(p,h+1);h=P}else{if(!mi(p,"!--",h))throw new Error("Invalid DOCTYPE");R=!0}A++,I=""}if(A!==0)throw new Error("Unclosed DOCTYPE")}return{entities:S,i:h}}let oe=(p,h)=>{for(;h<p.length&&/\s/.test(p[h]);)h++;return h};function Ie(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h])&&p[h]!=='"'&&p[h]!=="'";)S+=p[h],h++;if(my(S),h=oe(p,h),p.substring(h,h+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(p[h]==="%")throw new Error("Parameter entities are not supported");let A="";return[h,A]=bo(p,h,"entity"),[S,A,--h]}function rt(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h]);)S+=p[h],h++;my(S),h=oe(p,h);let A=p.substring(h,h+6).toUpperCase();if(A!=="SYSTEM"&&A!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${A}"`);h+=A.length,h=oe(p,h);let v=null,R=null;if(A==="PUBLIC")[h,v]=bo(p,h,"publicIdentifier"),p[h=oe(p,h)]!=='"'&&p[h]!=="'"||([h,R]=bo(p,h,"systemIdentifier"));else if(A==="SYSTEM"&&([h,R]=bo(p,h,"systemIdentifier"),!R))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:S,publicIdentifier:v,systemIdentifier:R,index:--h}}function bo(p,h,S){let A="",v=p[h];if(v!=='"'&&v!=="'")throw new Error(`Expected quoted string, found "${v}"`);for(h++;h<p.length&&p[h]!==v;)A+=p[h],h++;if(p[h]!==v)throw new Error(`Unterminated ${S} value`);return[++h,A]}function m3(p,h){h=oe(p,h);let S="";for(;h<p.length&&!/\s/.test(p[h]);)S+=p[h],h++;if(!my(S))throw new Error(`Invalid element name: "${S}"`);let A="";if(p[h=oe(p,h)]==="E"&&mi(p,"MPTY",h))h+=4;else if(p[h]==="A"&&mi(p,"NY",h))h+=2;else{if(p[h]!=="(")throw new Error(`Invalid Element Expression, found "${p[h]}"`);for(h++;h<p.length&&p[h]!==")";)A+=p[h],h++;if(p[h]!==")")throw new Error("Unterminated content model")}return{elementName:S,contentModel:A.trim(),index:h}}function mi(p,h,S){for(let A=0;A<h.length;A++)if(h[A]!==p[S+A+1])return!1;return!0}function my(p){if(i(p))return p;throw new Error(`Invalid entity name ${p}`)}let g3=/^[-+]?0x[a-fA-F0-9]+$/,y3=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,E3={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},_3=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function GR(p){return typeof p=="function"?p:Array.isArray(p)?h=>{for(let S of p)if(typeof S=="string"&&h===S||S instanceof RegExp&&S.test(h))return!0}:()=>!1}class S3{constructor(h){this.options=h,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(S,A)=>String.fromCodePoint(Number.parseInt(A,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(S,A)=>String.fromCodePoint(Number.parseInt(A,16))}},this.addExternalEntities=v3,this.parseXml=C3,this.parseTextData=w3,this.resolveNameSpace=b3,this.buildAttributesMap=A3,this.isItStopNode=I3,this.replaceEntitiesValue=x3,this.readStopNodeData=O3,this.saveTextToParentTag=P3,this.addChild=T3,this.ignoreAttributesFn=GR(this.options.ignoreAttributes)}}function v3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let A=h[S];this.lastEntities[A]={regex:new RegExp("&"+A+";","g"),val:p[A]}}}function w3(p,h,S,A,v,R,I){if(p!==void 0&&(this.options.trimValues&&!A&&(p=p.trim()),p.length>0)){I||(p=this.replaceEntitiesValue(p));let P=this.options.tagValueProcessor(h,p,S,v,R);return P==null?p:typeof P!=typeof p||P!==p?P:this.options.trimValues||p.trim()===p?KR(p,this.options.parseTagValue,this.options.numberParseOptions):p}}function b3(p){if(this.options.removeNSPrefix){let h=p.split(":"),S=p.charAt(0)==="/"?"/":"";if(h[0]==="xmlns")return"";h.length===2&&(p=S+h[1])}return p}let R3=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function A3(p,h,S){if(this.options.ignoreAttributes!==!0&&typeof p=="string"){let A=s(p,R3),v=A.length,R={};for(let I=0;I<v;I++){let P=this.resolveNameSpace(A[I][1]);if(this.ignoreAttributesFn(P,h))continue;let N=A[I][4],$=this.options.attributeNamePrefix+P;if(P.length)if(this.options.transformAttributeName&&($=this.options.transformAttributeName($)),$==="__proto__"&&($="#__proto__"),N!==void 0){this.options.trimValues&&(N=N.trim()),N=this.replaceEntitiesValue(N);let re=this.options.attributeValueProcessor(P,N,h);R[$]=re==null?N:typeof re!=typeof N||re!==N?re:KR(N,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(R[$]=!0)}if(!Object.keys(R).length)return;if(this.options.attributesGroupName){let I={};return I[this.options.attributesGroupName]=R,I}return R}}let C3=function(p){p=p.replace(/\r\n?/g,`
`);let h=new at("!xml"),S=h,A="",v="";for(let R=0;R<p.length;R++)if(p[R]==="<")if(p[R+1]==="/"){let I=gi(p,">",R,"Closing Tag is not closed."),P=p.substring(R+2,I).trim();if(this.options.removeNSPrefix){let re=P.indexOf(":");re!==-1&&(P=P.substr(re+1))}this.options.transformTagName&&(P=this.options.transformTagName(P)),S&&(A=this.saveTextToParentTag(A,S,v));let N=v.substring(v.lastIndexOf(".")+1);if(P&&this.options.unpairedTags.indexOf(P)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${P}>`);let $=0;N&&this.options.unpairedTags.indexOf(N)!==-1?($=v.lastIndexOf(".",v.lastIndexOf(".")-1),this.tagsNodeStack.pop()):$=v.lastIndexOf("."),v=v.substring(0,$),S=this.tagsNodeStack.pop(),A="",R=I}else if(p[R+1]==="?"){let I=gy(p,R,!1,"?>");if(!I)throw new Error("Pi Tag is not closed.");if(A=this.saveTextToParentTag(A,S,v),!(this.options.ignoreDeclaration&&I.tagName==="?xml"||this.options.ignorePiTags)){let P=new at(I.tagName);P.add(this.options.textNodeName,""),I.tagName!==I.tagExp&&I.attrExpPresent&&(P[":@"]=this.buildAttributesMap(I.tagExp,v,I.tagName)),this.addChild(S,P,v,R)}R=I.closeIndex+1}else if(p.substr(R+1,3)==="!--"){let I=gi(p,"-->",R+4,"Comment is not closed.");if(this.options.commentPropName){let P=p.substring(R+4,I-2);A=this.saveTextToParentTag(A,S,v),S.add(this.options.commentPropName,[{[this.options.textNodeName]:P}])}R=I}else if(p.substr(R+1,2)==="!D"){let I=he(p,R);this.docTypeEntities=I.entities,R=I.i}else if(p.substr(R+1,2)==="!["){let I=gi(p,"]]>",R,"CDATA is not closed.")-2,P=p.substring(R+9,I);A=this.saveTextToParentTag(A,S,v);let N=this.parseTextData(P,S.tagname,v,!0,!1,!0,!0);N==null&&(N=""),this.options.cdataPropName?S.add(this.options.cdataPropName,[{[this.options.textNodeName]:P}]):S.add(this.options.textNodeName,N),R=I+2}else{let I=gy(p,R,this.options.removeNSPrefix),P=I.tagName,N=I.rawTagName,$=I.tagExp,re=I.attrExpPresent,Q=I.closeIndex;this.options.transformTagName&&(P=this.options.transformTagName(P)),S&&A&&S.tagname!=="!xml"&&(A=this.saveTextToParentTag(A,S,v,!1));let ge=S;ge&&this.options.unpairedTags.indexOf(ge.tagname)!==-1&&(S=this.tagsNodeStack.pop(),v=v.substring(0,v.lastIndexOf("."))),P!==h.tagname&&(v+=v?"."+P:P);let Te=R;if(this.isItStopNode(this.options.stopNodes,v,P)){let Ee="";if($.length>0&&$.lastIndexOf("/")===$.length-1)P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),$=P):$=$.substr(0,$.length-1),R=I.closeIndex;else if(this.options.unpairedTags.indexOf(P)!==-1)R=I.closeIndex;else{let un=this.readStopNodeData(p,N,Q+1);if(!un)throw new Error(`Unexpected end of ${N}`);R=un.i,Ee=un.tagContent}let ct=new at(P);P!==$&&re&&(ct[":@"]=this.buildAttributesMap($,v,P)),Ee&&(Ee=this.parseTextData(Ee,P,v,!0,re,!0,!0)),v=v.substr(0,v.lastIndexOf(".")),ct.add(this.options.textNodeName,Ee),this.addChild(S,ct,v,Te)}else{if($.length>0&&$.lastIndexOf("/")===$.length-1){P[P.length-1]==="/"?(P=P.substr(0,P.length-1),v=v.substr(0,v.length-1),$=P):$=$.substr(0,$.length-1),this.options.transformTagName&&(P=this.options.transformTagName(P));let Ee=new at(P);P!==$&&re&&(Ee[":@"]=this.buildAttributesMap($,v,P)),this.addChild(S,Ee,v,Te),v=v.substr(0,v.lastIndexOf("."))}else{let Ee=new at(P);this.tagsNodeStack.push(S),P!==$&&re&&(Ee[":@"]=this.buildAttributesMap($,v,P)),this.addChild(S,Ee,v,Te),S=Ee}A="",R=Q}}else A+=p[R];return h.child};function T3(p,h,S,A){this.options.captureMetaData||(A=void 0);let v=this.options.updateTag(h.tagname,S,h[":@"]);v===!1||(typeof v=="string"&&(h.tagname=v),p.addChild(h,A))}let x3=function(p){if(this.options.processEntities){for(let h in this.docTypeEntities){let S=this.docTypeEntities[h];p=p.replace(S.regx,S.val)}for(let h in this.lastEntities){let S=this.lastEntities[h];p=p.replace(S.regex,S.val)}if(this.options.htmlEntities)for(let h in this.htmlEntities){let S=this.htmlEntities[h];p=p.replace(S.regex,S.val)}p=p.replace(this.ampEntity.regex,this.ampEntity.val)}return p};function P3(p,h,S,A){return p&&(A===void 0&&(A=h.child.length===0),(p=this.parseTextData(p,h.tagname,S,!1,!!h[":@"]&&Object.keys(h[":@"]).length!==0,A))!==void 0&&p!==""&&h.add(this.options.textNodeName,p),p=""),p}function I3(p,h,S){let A="*."+S;for(let v in p){let R=p[v];if(A===R||h===R)return!0}return!1}function gi(p,h,S,A){let v=p.indexOf(h,S);if(v===-1)throw new Error(A);return v+h.length-1}function gy(p,h,S,A=">"){let v=function(Q,ge,Te=">"){let Ee,ct="";for(let un=ge;un<Q.length;un++){let Es=Q[un];if(Ee)Es===Ee&&(Ee="");else if(Es==='"'||Es==="'")Ee=Es;else if(Es===Te[0]){if(!Te[1])return{data:ct,index:un};if(Q[un+1]===Te[1])return{data:ct,index:un}}else Es==="	"&&(Es=" ");ct+=Es}}(p,h+1,A);if(!v)return;let R=v.data,I=v.index,P=R.search(/\s/),N=R,$=!0;P!==-1&&(N=R.substring(0,P),R=R.substring(P+1).trimStart());let re=N;if(S){let Q=N.indexOf(":");Q!==-1&&(N=N.substr(Q+1),$=N!==v.data.substr(Q+1))}return{tagName:N,tagExp:R,closeIndex:I,attrExpPresent:$,rawTagName:re}}function O3(p,h,S){let A=S,v=1;for(;S<p.length;S++)if(p[S]==="<")if(p[S+1]==="/"){let R=gi(p,">",S,`${h} is not closed`);if(p.substring(S+2,R).trim()===h&&(v--,v===0))return{tagContent:p.substring(A,S),i:R};S=R}else if(p[S+1]==="?")S=gi(p,"?>",S+1,"StopNode is not closed.");else if(p.substr(S+1,3)==="!--")S=gi(p,"-->",S+3,"StopNode is not closed.");else if(p.substr(S+1,2)==="![")S=gi(p,"]]>",S,"StopNode is not closed.")-2;else{let R=gy(p,S,">");R&&((R&&R.tagName)===h&&R.tagExp[R.tagExp.length-1]!=="/"&&v++,S=R.closeIndex)}}function KR(p,h,S){if(h&&typeof p=="string"){let A=p.trim();return A==="true"||A!=="false"&&function(v,R={}){if(R=Object.assign({},E3,R),!v||typeof v!="string")return v;let I=v.trim();if(R.skipLike!==void 0&&R.skipLike.test(I))return v;if(v==="0")return 0;if(R.hex&&g3.test(I))return function(N){if(parseInt)return parseInt(N,16);if(Number.parseInt)return Number.parseInt(N,16);if(window&&window.parseInt)return window.parseInt(N,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(I);if(I.search(/.+[eE].+/)!==-1)return function(N,$,re){if(!re.eNotation)return N;let Q=$.match(_3);if(Q){let ge=Q[1]||"",Te=Q[3].indexOf("e")===-1?"E":"e",Ee=Q[2],ct=ge?N[Ee.length+1]===Te:N[Ee.length]===Te;return Ee.length>1&&ct?N:Ee.length!==1||!Q[3].startsWith(`.${Te}`)&&Q[3][0]!==Te?re.leadingZeros&&!ct?($=(Q[1]||"")+Q[3],Number($)):N:Number($)}return N}(v,I,R);{let N=y3.exec(I);if(N){let $=N[1]||"",re=N[2],Q=((P=N[3])&&P.indexOf(".")!==-1&&((P=P.replace(/0+$/,""))==="."?P="0":P[0]==="."?P="0"+P:P[P.length-1]==="."&&(P=P.substring(0,P.length-1))),P),ge=$?v[re.length+1]===".":v[re.length]===".";if(!R.leadingZeros&&(re.length>1||re.length===1&&!ge))return v;{let Te=Number(I),Ee=String(Te);if(Te===0||Te===-0)return Te;if(Ee.search(/[eE]/)!==-1)return R.eNotation?Te:v;if(I.indexOf(".")!==-1)return Ee==="0"||Ee===Q||Ee===`${$}${Q}`?Te:v;let ct=re?Q:I;return re?ct===Ee||$+ct===Ee?Te:v:ct===Ee||ct===$+Ee?Te:v}}return v}var P}(p,S)}return p!==void 0?p:""}let yy=at.getMetaDataSymbol();function N3(p,h){return XR(p,h)}function XR(p,h,S){let A,v={};for(let R=0;R<p.length;R++){let I=p[R],P=D3(I),N="";if(N=S===void 0?P:S+"."+P,P===h.textNodeName)A===void 0?A=I[P]:A+=""+I[P];else{if(P===void 0)continue;if(I[P]){let $=XR(I[P],h,N),re=k3($,h);I[yy]!==void 0&&($[yy]=I[yy]),I[":@"]?L3($,I[":@"],N,h):Object.keys($).length!==1||$[h.textNodeName]===void 0||h.alwaysCreateTextNode?Object.keys($).length===0&&(h.alwaysCreateTextNode?$[h.textNodeName]="":$=""):$=$[h.textNodeName],v[P]!==void 0&&v.hasOwnProperty(P)?(Array.isArray(v[P])||(v[P]=[v[P]]),v[P].push($)):h.isArray(P,N,re)?v[P]=[$]:v[P]=$}}}return typeof A=="string"?A.length>0&&(v[h.textNodeName]=A):A!==void 0&&(v[h.textNodeName]=A),v}function D3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let A=h[S];if(A!==":@")return A}}function L3(p,h,S,A){if(h){let v=Object.keys(h),R=v.length;for(let I=0;I<R;I++){let P=v[I];A.isArray(P,S+"."+P,!0,!0)?p[P]=[h[P]]:p[P]=h[P]}}}function k3(p,h){let{textNodeName:S}=h,A=Object.keys(p).length;return A===0||!(A!==1||!p[S]&&typeof p[S]!="boolean"&&p[S]!==0)}class M3{constructor(h){this.externalEntities={},this.options=function(S){return Object.assign({},W,S)}(h)}parse(h,S){if(typeof h!="string"){if(!h.toString)throw new Error("XML data is accepted in String or Bytes[] form.");h=h.toString()}if(S){S===!0&&(S={});let R=a(h,S);if(R!==!0)throw Error(`${R.err.msg}:${R.err.line}:${R.err.col}`)}let A=new S3(this.options);A.addExternalEntities(this.externalEntities);let v=A.parseXml(h);return this.options.preserveOrder||v===void 0?v:N3(v,this.options)}addEntity(h,S){if(S.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(h.indexOf("&")!==-1||h.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(S==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[h]=S}static getMetaDataSymbol(){return at.getMetaDataSymbol()}}function q3(p,h){let S="";return h.format&&h.indentBy.length>0&&(S=`
`),QR(p,h,"",S)}function QR(p,h,S,A){let v="",R=!1;for(let I=0;I<p.length;I++){let P=p[I],N=$3(P);if(N===void 0)continue;let $="";if($=S.length===0?N:`${S}.${N}`,N===h.textNodeName){let Te=P[N];F3($,h)||(Te=h.tagValueProcessor(N,Te),Te=JR(Te,h)),R&&(v+=A),v+=Te,R=!1;continue}if(N===h.cdataPropName){R&&(v+=A),v+=`<![CDATA[${P[N][0][h.textNodeName]}]]>`,R=!1;continue}if(N===h.commentPropName){v+=A+`<!--${P[N][0][h.textNodeName]}-->`,R=!0;continue}if(N[0]==="?"){let Te=YR(P[":@"],h),Ee=N==="?xml"?"":A,ct=P[N][0][h.textNodeName];ct=ct.length!==0?" "+ct:"",v+=Ee+`<${N}${ct}${Te}?>`,R=!0;continue}let re=A;re!==""&&(re+=h.indentBy);let Q=A+`<${N}${YR(P[":@"],h)}`,ge=QR(P[N],h,$,re);h.unpairedTags.indexOf(N)!==-1?h.suppressUnpairedNode?v+=Q+">":v+=Q+"/>":ge&&ge.length!==0||!h.suppressEmptyNode?ge&&ge.endsWith(">")?v+=Q+`>${ge}${A}</${N}>`:(v+=Q+">",ge&&A!==""&&(ge.includes("/>")||ge.includes("</"))?v+=A+h.indentBy+ge+A:v+=ge,v+=`</${N}>`):v+=Q+"/>",R=!0}return v}function $3(p){let h=Object.keys(p);for(let S=0;S<h.length;S++){let A=h[S];if(p.hasOwnProperty(A)&&A!==":@")return A}}function YR(p,h){let S="";if(p&&!h.ignoreAttributes)for(let A in p){if(!p.hasOwnProperty(A))continue;let v=h.attributeValueProcessor(A,p[A]);v=JR(v,h),v===!0&&h.suppressBooleanAttributes?S+=` ${A.substr(h.attributeNamePrefix.length)}`:S+=` ${A.substr(h.attributeNamePrefix.length)}="${v}"`}return S}function F3(p,h){let S=(p=p.substr(0,p.length-h.textNodeName.length-1)).substr(p.lastIndexOf(".")+1);for(let A in h.stopNodes)if(h.stopNodes[A]===p||h.stopNodes[A]==="*."+S)return!0;return!1}function JR(p,h){if(p&&p.length>0&&h.processEntities)for(let S=0;S<h.entities.length;S++){let A=h.entities[S];p=p.replace(A.regex,A.val)}return p}let U3={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(p,h){return h},attributeValueProcessor:function(p,h){return h},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ys(p){this.options=Object.assign({},U3,p),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=GR(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=H3),this.processTextOrObjNode=B3,this.options.format?(this.indentate=j3,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function B3(p,h,S,A){let v=this.j2x(p,S+1,A.concat(h));return p[this.options.textNodeName]!==void 0&&Object.keys(p).length===1?this.buildTextValNode(p[this.options.textNodeName],h,v.attrStr,S):this.buildObjectNode(v.val,h,v.attrStr,S)}function j3(p){return this.options.indentBy.repeat(p)}function H3(p){return!(!p.startsWith(this.options.attributeNamePrefix)||p===this.options.textNodeName)&&p.substr(this.attrPrefixLen)}ys.prototype.build=function(p){return this.options.preserveOrder?q3(p,this.options):(Array.isArray(p)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(p={[this.options.arrayNodeName]:p}),this.j2x(p,0,[]).val)},ys.prototype.j2x=function(p,h,S){let A="",v="",R=S.join(".");for(let I in p)if(Object.prototype.hasOwnProperty.call(p,I))if(p[I]===void 0)this.isAttribute(I)&&(v+="");else if(p[I]===null)this.isAttribute(I)||I===this.options.cdataPropName?v+="":I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(p[I]instanceof Date)v+=this.buildTextValNode(p[I],I,"",h);else if(typeof p[I]!="object"){let P=this.isAttribute(I);if(P&&!this.ignoreAttributesFn(P,R))A+=this.buildAttrPairStr(P,""+p[I]);else if(!P)if(I===this.options.textNodeName){let N=this.options.tagValueProcessor(I,""+p[I]);v+=this.replaceEntitiesValue(N)}else v+=this.buildTextValNode(p[I],I,"",h)}else if(Array.isArray(p[I])){let P=p[I].length,N="",$="";for(let re=0;re<P;re++){let Q=p[I][re];if(Q!==void 0)if(Q===null)I[0]==="?"?v+=this.indentate(h)+"<"+I+"?"+this.tagEndChar:v+=this.indentate(h)+"<"+I+"/"+this.tagEndChar;else if(typeof Q=="object")if(this.options.oneListGroup){let ge=this.j2x(Q,h+1,S.concat(I));N+=ge.val,this.options.attributesGroupName&&Q.hasOwnProperty(this.options.attributesGroupName)&&($+=ge.attrStr)}else N+=this.processTextOrObjNode(Q,I,h,S);else if(this.options.oneListGroup){let ge=this.options.tagValueProcessor(I,Q);ge=this.replaceEntitiesValue(ge),N+=ge}else N+=this.buildTextValNode(Q,I,"",h)}this.options.oneListGroup&&(N=this.buildObjectNode(N,I,$,h)),v+=N}else if(this.options.attributesGroupName&&I===this.options.attributesGroupName){let P=Object.keys(p[I]),N=P.length;for(let $=0;$<N;$++)A+=this.buildAttrPairStr(P[$],""+p[I][P[$]])}else v+=this.processTextOrObjNode(p[I],I,h,S);return{attrStr:A,val:v}},ys.prototype.buildAttrPairStr=function(p,h){return h=this.options.attributeValueProcessor(p,""+h),h=this.replaceEntitiesValue(h),this.options.suppressBooleanAttributes&&h==="true"?" "+p:" "+p+'="'+h+'"'},ys.prototype.buildObjectNode=function(p,h,S,A){if(p==="")return h[0]==="?"?this.indentate(A)+"<"+h+S+"?"+this.tagEndChar:this.indentate(A)+"<"+h+S+this.closeTag(h)+this.tagEndChar;{let v="</"+h+this.tagEndChar,R="";return h[0]==="?"&&(R="?",v=""),!S&&S!==""||p.indexOf("<")!==-1?this.options.commentPropName!==!1&&h===this.options.commentPropName&&R.length===0?this.indentate(A)+`<!--${p}-->`+this.newLine:this.indentate(A)+"<"+h+S+R+this.tagEndChar+p+this.indentate(A)+v:this.indentate(A)+"<"+h+S+R+">"+p+v}},ys.prototype.closeTag=function(p){let h="";return this.options.unpairedTags.indexOf(p)!==-1?this.options.suppressUnpairedNode||(h="/"):h=this.options.suppressEmptyNode?"/":`></${p}`,h},ys.prototype.buildTextValNode=function(p,h,S,A){if(this.options.cdataPropName!==!1&&h===this.options.cdataPropName)return this.indentate(A)+`<![CDATA[${p}]]>`+this.newLine;if(this.options.commentPropName!==!1&&h===this.options.commentPropName)return this.indentate(A)+`<!--${p}-->`+this.newLine;if(h[0]==="?")return this.indentate(A)+"<"+h+S+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(h,p);return v=this.replaceEntitiesValue(v),v===""?this.indentate(A)+"<"+h+S+this.closeTag(h)+this.tagEndChar:this.indentate(A)+"<"+h+S+">"+v+"</"+h+this.tagEndChar}},ys.prototype.replaceEntitiesValue=function(p){if(p&&p.length>0&&this.options.processEntities)for(let h=0;h<this.options.entities.length;h++){let S=this.options.entities[h];p=p.replace(S.regex,S.val)}return p};let V3={validate:a};CI.exports=e})()});var xI=_(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.parseXML=E6;var y6=TI(),rS=new y6.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(t,e)=>e.trim()===""&&e.includes(`
`)?"":void 0});rS.addEntity("#xD","\r");rS.addEntity("#10",`
`);function E6(t){return rS.parse(t,!0)}});var Of=_(If=>{"use strict";var _6=xI();function S6(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function v6(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}var Pf=class{constructor(e){f(this,"value");this.value=e}toString(){return v6(""+this.value)}},sS=class t{constructor(e,r=[]){f(this,"name");f(this,"children");f(this,"attributes",{});this.name=e,this.children=r}static of(e,r,n){let s=new t(e);return r!==void 0&&s.addChildNode(new Pf(r)),n!==void 0&&s.withName(n),s}withName(e){return this.name=e,this}addAttribute(e,r){return this.attributes[e]=r,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,r){return r!=null&&(this.attributes[e]=r),this}cc(e,r,n=r){if(e[r]!=null){let s=t.of(r,e[r]).withName(n);this.c(s)}}l(e,r,n,s){e[r]!=null&&s().map(o=>{o.withName(n),this.c(o)})}lc(e,r,n,s){if(e[r]!=null){let i=s(),o=new t(n);i.map(a=>{o.c(a)}),this.c(o)}}toString(){let e=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let s of Object.keys(n)){let i=n[s];i!=null&&(r+=` ${s}="${S6(""+i)}"`)}return r+=e?`>${this.children.map(s=>s.toString()).join("")}</${this.name}>`:"/>"}};Object.defineProperty(If,"parseXML",{enumerable:!0,get:function(){return _6.parseXML}});If.XmlNode=sS;If.XmlText=Pf});var PI,II,OI,qs,Nf=b(()=>{PI=C(Of());nr();$e();II=C(fe()),OI=C(St());Ds();qs=class extends It{constructor(r){super();f(this,"settings");f(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new vi(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,s){let i=K.of(r),o=i.getMemberSchemas();if(i.isStructSchema()&&i.isMemberSchema()&&!!Object.values(o).find(l=>!!l.getMemberTraits().eventPayload)){let l={},d=Object.keys(o)[0];return o[d].isBlobSchema()?l[d]=n:l[d]=this.read(o[d],n),l}let c=(this.serdeContext?.utf8Encoder??OI.toUtf8)(n),u=this.parseXml(c);return this.readSchema(r,s?u[s]:u)}readSchema(r,n){let s=K.of(r);if(s.isUnitSchema())return;let i=s.getMergedTraits();if(s.isListSchema()&&!Array.isArray(n))return this.readSchema(s,[n]);if(n==null)return n;if(typeof n=="object"){let o=!!i.sparse,a=!!i.xmlFlattened;if(s.isListSchema()){let u=s.getValueSchema(),l=[],d=u.getMergedTraits().xmlName??"member",m=a?n:(n[0]??n)[d],g=Array.isArray(m)?m:[m];for(let E of g)(E!=null||o)&&l.push(this.readSchema(u,E));return l}let c={};if(s.isMapSchema()){let u=s.getKeySchema(),l=s.getValueSchema(),d;a?d=Array.isArray(n)?n:[n]:d=Array.isArray(n.entry)?n.entry:[n.entry];let m=u.getMergedTraits().xmlName??"key",g=l.getMergedTraits().xmlName??"value";for(let E of d){let w=E[m],x=E[g];(x!=null||o)&&(c[w]=this.readSchema(l,x))}return c}if(s.isStructSchema()){for(let[u,l]of s.structIterator()){let d=l.getMergedTraits(),m=d.httpPayload?d.xmlName??l.getName():l.getMemberTraits().xmlName??u;n[m]!=null&&(c[u]=this.readSchema(l,n[m]))}return c}if(s.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${s.getName(!0)}`)}return s.isListSchema()?[]:s.isMapSchema()||s.isStructSchema()?{}:this.stringDeserializer.read(s,n)}parseXml(r){if(r.length){let n;try{n=(0,PI.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,II.getValueFromTextNode)(o)}return{}}}});var NI,DI,Df,LI=b(()=>{nr();$e();rr();NI=C(fe()),DI=C(vt());Ds();Df=class extends It{constructor(r){super();f(this,"settings");f(this,"buffer");this.settings=r}write(r,n,s=""){this.buffer===void 0&&(this.buffer="");let i=K.of(r);if(s&&!s.endsWith(".")&&(s+="."),i.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(s),this.writeValue((this.serdeContext?.base64Encoder??DI.toBase64)(n)));else if(i.isBooleanSchema()||i.isNumericSchema()||i.isStringSchema())n!=null?(this.writeKey(s),this.writeValue(String(n))):i.isIdempotencyToken()&&(this.writeKey(s),this.writeValue((0,hn.v4)()));else if(i.isBigIntegerSchema())n!=null&&(this.writeKey(s),this.writeValue(String(n)));else if(i.isBigDecimalSchema())n!=null&&(this.writeKey(s),this.writeValue(n instanceof Xe?n.string:String(n)));else if(i.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(s),hr(i,this.settings)){case 5:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case 6:this.writeValue((0,NI.dateToUtcString)(n));break;case 7:this.writeValue(String(n.getTime()/1e3));break}}else{if(i.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${i.getName(!0)}`);if(i.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(s),this.writeValue(""));else{let o=i.getValueSchema(),a=this.settings.flattenLists||i.getMergedTraits().xmlFlattened,c=1;for(let u of n){if(u==null)continue;let l=this.getKey("member",o.getMergedTraits().xmlName),d=a?`${s}${c}`:`${s}${l}.${c}`;this.write(o,u,d),++c}}}else if(i.isMapSchema()){if(n&&typeof n=="object"){let o=i.getKeySchema(),a=i.getValueSchema(),c=i.getMergedTraits().xmlFlattened,u=1;for(let[l,d]of Object.entries(n)){if(d==null)continue;let m=this.getKey("key",o.getMergedTraits().xmlName),g=c?`${s}${u}.${m}`:`${s}entry.${u}.${m}`,E=this.getKey("value",a.getMergedTraits().xmlName),w=c?`${s}${u}.${E}`:`${s}entry.${u}.${E}`;this.write(o,l,g),this.write(a,d,w),++u}}}else if(i.isStructSchema()){if(n&&typeof n=="object")for(let[o,a]of i.structIterator()){if(n[o]==null&&!a.isIdempotencyToken())continue;let c=this.getKey(o,a.getMergedTraits().xmlName),u=`${s}${c}`;this.write(a,n[o],u)}}else if(!i.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${i.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let s=n??r;return this.settings.capitalizeKeys?s[0].toUpperCase()+s.slice(1):s}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${ln(r)}=`}writeValue(r){this.buffer+=ln(r)}}});var Go,iS=b(()=>{nr();$e();jo();Nf();LI();Go=class extends Dn{constructor(r){super({defaultNamespace:r.defaultNamespace});f(this,"options");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new Sr);this.options=r;let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Df(n),this.deserializer=new qs(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s);i.path.endsWith("/")||(i.path+="/"),Object.assign(i.headers,{"content-type":"application/x-www-form-urlencoded"}),(Vr(r.input)==="unit"||!i.body)&&(i.body="");let o=r.name.split("#")[1]??r.name;return i.body=`Action=${o}&Version=${this.options.version}`+i.body,i.body.endsWith("&")&&(i.body=i.body.slice(-1)),i}async deserializeResponse(r,n,s){let i=this.deserializer,o=K.of(r.output),a={};if(s.statusCode>=300){let m=await Hr(s.body,n);m.byteLength>0&&Object.assign(a,await i.read(15,m)),await this.handleError(r,n,s,a,this.deserializeMetadata(s))}for(let m in s.headers){let g=s.headers[m];delete s.headers[m],s.headers[m.toLowerCase()]=g}let c=r.name.split("#")[1]??r.name,u=o.isStructSchema()&&this.useNestedResult()?c+"Result":void 0,l=await Hr(s.body,n);return l.byteLength>0&&Object.assign(a,await i.read(o,l,u)),{$metadata:this.deserializeMetadata(s),...a}}useNestedResult(){return!0}async handleError(r,n,s,i,o){let a=this.loadQueryErrorCode(s,i)??"Unknown",c=this.loadQueryError(i),u=this.loadQueryErrorMessage(i);c.message=u,c.Error={Type:c.Type,Code:c.Code,Message:u};let{errorSchema:l,errorMetadata:d}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,c,o,(x,T)=>{try{return x.getSchema(T)}catch{return x.find(M=>K.of(M).getMergedTraits().awsQueryError?.[0]===T)}}),m=K.of(l),g=_e.for(l[1]).getErrorCtor(l)??Error,E=new g(u),w={Error:c.Error};for(let[x,T]of m.structIterator()){let O=T.getMergedTraits().xmlName??x,M=c[O]??i[O];w[x]=this.deserializer.readSchema(T,M)}throw Object.assign(E,d,{$fault:m.getMergedTraits().error,message:u},w)}loadQueryErrorCode(r,n){let s=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(s!==void 0)return s;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}getDefaultContentType(){return"application/x-www-form-urlencoded"}}});var Lf,kI=b(()=>{iS();Lf=class extends Go{constructor(r){super(r);f(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var MI,qI,Ko,kf,Mf,oS=b(()=>{MI=C(Of()),qI=C(fe());Z_();Ko=(t,e)=>bf(t,e).then(r=>{if(r.length){let n;try{n=(0,MI.parseXML)(r)}catch(a){throw a&&typeof a=="object"&&Object.defineProperty(a,"$responseBodyText",{value:r}),a}let s="#text",i=Object.keys(n)[0],o=n[i];return o[s]&&(o[i]=o[s],delete o[s]),(0,qI.getValueFromTextNode)(o)}return{}}),kf=async(t,e)=>{let r=await Ko(t,e);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Mf=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"}});var vr,aS,qf,Xo,cS=b(()=>{vr=C(Of());nr();$e();rr();aS=C(fe()),qf=C(vt());Ds();Xo=class extends It{constructor(r){super();f(this,"settings");f(this,"stringBuffer");f(this,"byteBuffer");f(this,"buffer");this.settings=r}write(r,n){let s=K.of(r);if(s.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(s.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??qf.fromBase64)(n);else{this.buffer=this.writeStruct(s,n,void 0);let i=s.getMergedTraits();i.httpPayload&&!i.xmlName&&this.buffer.withName(s.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,s){let i=r.getMergedTraits(),o=r.isMemberSchema()&&!i.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():i.xmlName??r.getName();if(!o||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=vr.XmlNode.of(o),[c,u]=this.getXmlnsAttribute(r,s);for(let[l,d]of r.structIterator()){let m=n[l];if(m!=null||d.isIdempotencyToken()){if(d.getMergedTraits().xmlAttribute){a.addAttribute(d.getMergedTraits().xmlName??l,this.writeSimple(d,m));continue}if(d.isListSchema())this.writeList(d,m,a,u);else if(d.isMapSchema())this.writeMap(d,m,a,u);else if(d.isStructSchema())a.addChildNode(this.writeStruct(d,m,u));else{let g=vr.XmlNode.of(d.getMergedTraits().xmlName??d.getMemberName());this.writeSimpleInto(d,m,g,u),a.addChildNode(g)}}}return u&&a.addAttribute(c,u),a}writeList(r,n,s,i){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let o=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),u=!!c.sparse,l=!!o.xmlFlattened,[d,m]=this.getXmlnsAttribute(r,i),g=(E,w)=>{if(a.isListSchema())this.writeList(a,Array.isArray(w)?w:[w],E,m);else if(a.isMapSchema())this.writeMap(a,w,E,m);else if(a.isStructSchema()){let x=this.writeStruct(a,w,m);E.addChildNode(x.withName(l?o.xmlName??r.getMemberName():c.xmlName??"member"))}else{let x=vr.XmlNode.of(l?o.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,w,x,m),E.addChildNode(x)}};if(l)for(let E of n)(u||E!=null)&&g(s,E);else{let E=vr.XmlNode.of(o.xmlName??r.getMemberName());m&&E.addAttribute(d,m);for(let w of n)(u||w!=null)&&g(E,w);s.addChildNode(E)}}writeMap(r,n,s,i,o=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),l=c.getMergedTraits().xmlName??"key",d=r.getValueSchema(),m=d.getMergedTraits(),g=m.xmlName??"value",E=!!m.sparse,w=!!a.xmlFlattened,[x,T]=this.getXmlnsAttribute(r,i),O=(M,U,W)=>{let ye=vr.XmlNode.of(l,U),[at,he]=this.getXmlnsAttribute(c,T);he&&ye.addAttribute(at,he),M.addChildNode(ye);let oe=vr.XmlNode.of(g);d.isListSchema()?this.writeList(d,W,oe,T):d.isMapSchema()?this.writeMap(d,W,oe,T,!0):d.isStructSchema()?oe=this.writeStruct(d,W,T):this.writeSimpleInto(d,W,oe,T),M.addChildNode(oe)};if(w){for(let[M,U]of Object.entries(n))if(E||U!=null){let W=vr.XmlNode.of(a.xmlName??r.getMemberName());O(W,M,U),s.addChildNode(W)}}else{let M;o||(M=vr.XmlNode.of(a.xmlName??r.getMemberName()),T&&M.addAttribute(x,T),s.addChildNode(M));for(let[U,W]of Object.entries(n))if(E||W!=null){let ye=vr.XmlNode.of("entry");O(ye,U,W),(o?s:M).addChildNode(ye)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let s=K.of(r),i=null;if(n&&typeof n=="object")if(s.isBlobSchema())i=(this.serdeContext?.base64Encoder??qf.toBase64)(n);else if(s.isTimestampSchema()&&n instanceof Date)switch(hr(s,this.settings)){case 5:i=n.toISOString().replace(".000Z","Z");break;case 6:i=(0,aS.dateToUtcString)(n);break;case 7:i=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),i=(0,aS.dateToUtcString)(n);break}else{if(s.isBigDecimalSchema()&&n)return n instanceof Xe?n.string:String(n);throw s.isMapSchema()||s.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${s.getName(!0)}`)}if((s.isBooleanSchema()||s.isNumericSchema()||s.isBigIntegerSchema()||s.isBigDecimalSchema())&&(i=String(n)),s.isStringSchema()&&(n===void 0&&s.isIdempotencyToken()?i=(0,hn.v4)():i=String(n)),i===null)throw new Error(`Unhandled schema-value pair ${s.getName(!0)}=${n}`);return i}writeSimpleInto(r,n,s,i){let o=this.writeSimple(r,n),a=K.of(r),c=new vr.XmlText(o),[u,l]=this.getXmlnsAttribute(a,i);l&&s.addAttribute(u,l),s.addChildNode(c)}getXmlnsAttribute(r,n){let s=r.getMergedTraits(),[i,o]=s.xmlNamespace??[];return o&&o!==n?[i?`xmlns:${i}`:"xmlns",o]:[void 0,void 0]}}});var Qo,uS=b(()=>{Ds();Nf();cS();Qo=class extends It{constructor(r){super();f(this,"settings");this.settings=r}createSerializer(){let r=new Xo(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new qs(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var $f,$I=b(()=>{nr();$e();jo();oS();uS();$f=class extends Si{constructor(r){super(r);f(this,"codec");f(this,"serializer");f(this,"deserializer");f(this,"mixin",new Sr);let n={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new Qo(n),this.serializer=new bi(this.codec.createSerializer(),n),this.deserializer=new wi(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,s){let i=await super.serializeRequest(r,n,s),o=K.of(r.input);if(!i.headers["content-type"]){let a=this.mixin.resolveRestContentType(this.getDefaultContentType(),o);a&&(i.headers["content-type"]=a)}return i.headers["content-type"]===this.getDefaultContentType()&&typeof i.body=="string"&&(i.body='<?xml version="1.0" encoding="UTF-8"?>'+i.body),i}async deserializeResponse(r,n,s){return super.deserializeResponse(r,n,s)}async handleError(r,n,s,i,o){let a=Mf(s,i)??"Unknown",{errorSchema:c,errorMetadata:u}=await this.mixin.getErrorSchemaOrThrowBaseException(a,this.options.defaultNamespace,s,i,o),l=K.of(c),d=i.Error?.message??i.Error?.Message??i.message??i.Message??"Unknown",m=_e.for(c[1]).getErrorCtor(c)??Error,g=new m(d);await this.deserializeHttpMessage(c,n,s,i);let E={};for(let[w,x]of l.structIterator()){let T=x.getMergedTraits().xmlName??w,O=i.Error?.[T]??i[T];E[w]=this.codec.createDeserializer().readSchema(x,O)}throw Object.assign(g,u,{$fault:l.getMergedTraits().error,message:d},E)}getDefaultContentType(){return"application/xml"}}});var lS={};Tt(lS,{AwsEc2QueryProtocol:()=>Lf,AwsJson1_0Protocol:()=>Tf,AwsJson1_1Protocol:()=>xf,AwsJsonRpcProtocol:()=>Ms,AwsQueryProtocol:()=>Go,AwsRestJsonProtocol:()=>zo,AwsRestXmlProtocol:()=>$f,AwsSmithyRpcV2CborProtocol:()=>vf,JsonCodec:()=>ks,JsonShapeDeserializer:()=>Vo,JsonShapeSerializer:()=>Wo,XmlCodec:()=>Qo,XmlShapeDeserializer:()=>qs,XmlShapeSerializer:()=>Xo,_toBool:()=>XP,_toNum:()=>QP,_toStr:()=>KP,awsExpectUnion:()=>RI,loadRestJsonErrorCode:()=>Ho,loadRestXmlErrorCode:()=>Mf,parseJsonBody:()=>eu,parseJsonErrorBody:()=>mI,parseXmlBody:()=>Ko,parseXmlErrorBody:()=>kf});var ru=b(()=>{GP();YP();SI();vI();Cf();wI();Af();eS();tS();AI();tu();kI();iS();$I();uS();Nf();cS();oS()});var Un={};Tt(Un,{AWSSDKSigV4Signer:()=>a_,AwsEc2QueryProtocol:()=>Lf,AwsJson1_0Protocol:()=>Tf,AwsJson1_1Protocol:()=>xf,AwsJsonRpcProtocol:()=>Ms,AwsQueryProtocol:()=>Go,AwsRestJsonProtocol:()=>zo,AwsRestXmlProtocol:()=>$f,AwsSdkSigV4ASigner:()=>Xc,AwsSdkSigV4Signer:()=>ir,AwsSmithyRpcV2CborProtocol:()=>vf,JsonCodec:()=>ks,JsonShapeDeserializer:()=>Vo,JsonShapeSerializer:()=>Wo,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>$o,NODE_SIGV4A_CONFIG_OPTIONS:()=>sP,XmlCodec:()=>Qo,XmlShapeDeserializer:()=>qs,XmlShapeSerializer:()=>Xo,_toBool:()=>XP,_toNum:()=>QP,_toStr:()=>KP,awsExpectUnion:()=>RI,emitWarningIfUnsupportedVersion:()=>ko,getBearerTokenEnvKey:()=>rf,loadRestJsonErrorCode:()=>Ho,loadRestXmlErrorCode:()=>Mf,parseJsonBody:()=>eu,parseJsonErrorBody:()=>mI,parseXmlBody:()=>Ko,parseXmlErrorBody:()=>kf,resolveAWSSDKSigV4Config:()=>PP,resolveAwsSdkSigV4AConfig:()=>nP,resolveAwsSdkSigV4Config:()=>Ii,setCredentialFeature:()=>Cs,setFeature:()=>Bx,setTokenFeature:()=>Hx,state:()=>tf,validateSigningProperties:()=>qo});var Ot=b(()=>{zr();C_();ru()});var Jo=_(Yo=>{"use strict";var w6=(sr(),le(Ai)),b6=Lo(),R6=Oe(),gn=(Ot(),le(Un)),jI=void 0;function A6(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function C6(t){let e=w6.normalizeProvider(t.userAgentAppId??jI),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{let n=await e();if(!A6(n)){let s=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?s?.warn("userAgentAppId must be a string or undefined."):n.length>50&&s?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}var T6=/\d{12}\.ddb/;async function x6(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&gn.setFeature(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){let i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?gn.setFeature(t,"RETRY_MODE_ADAPTIVE","F"):gn.setFeature(t,"RETRY_MODE_STANDARD","E"):gn.setFeature(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){let i=t.endpointV2;switch(String(i?.url?.hostname).match(T6)&&gn.setFeature(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":gn.setFeature(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":gn.setFeature(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":gn.setFeature(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let s=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(s?.$source){let i=s;i.accountId&&gn.setFeature(t,"RESOLVED_ACCOUNT_ID","T");for(let[o,a]of Object.entries(i.$source??{}))gn.setFeature(t,o,a)}}var FI="user-agent",dS="x-amz-user-agent",UI=" ",fS="/",P6=/[^!$%&'*+\-.^_`|~\w]/g,I6=/[^!$%&'*+\-.^_`|~\w#]/g,BI="-",O6=1024;function N6(t){let e="";for(let r in t){let n=t[r];if(e.length+n.length+1<=O6){e.length?e+=","+n:e+=n;continue}break}return e}var HI=t=>(e,r)=>async n=>{let{request:s}=n;if(!R6.HttpRequest.isInstance(s))return e(n);let{headers:i}=s,o=r?.userAgent?.map(Ff)||[],a=(await t.defaultUserAgentProvider()).map(Ff);await x6(r,t,n);let c=r;a.push(`m/${N6(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let u=t?.customUserAgent?.map(Ff)||[],l=await t.userAgentAppId();l&&a.push(Ff(["app",`${l}`]));let d=b6.getUserAgentPrefix(),m=(d?[d]:[]).concat([...a,...o,...u]).join(UI),g=[...a.filter(E=>E.startsWith("aws-sdk-")),...u].join(UI);return t.runtime!=="browser"?(g&&(i[dS]=i[dS]?`${i[FI]} ${g}`:g),i[FI]=m):i[dS]=m,e({...n,request:s})},Ff=t=>{let e=t[0].split(fS).map(o=>o.replace(P6,BI)).join(fS),r=t[1]?.replace(I6,BI),n=e.indexOf(fS),s=e.substring(0,n),i=e.substring(n+1);return s==="api"&&(i=i.toLowerCase()),[s,i,r].filter(o=>o&&o.length>0).reduce((o,a,c)=>{switch(c){case 0:return a;case 1:return`${o}/${a}`;default:return`${o}#${a}`}},"")},VI={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},D6=t=>({applyToStack:e=>{e.add(HI(t),VI)}});Yo.DEFAULT_UA_APP_ID=jI;Yo.getUserAgentMiddlewareOptions=VI;Yo.getUserAgentPlugin=D6;Yo.resolveUserAgentConfig=C6;Yo.userAgentMiddleware=HI});var pS=_(Zo=>{"use strict";var L6=(t,e,r)=>{if(e in t){if(t[e]==="true")return!0;if(t[e]==="false")return!1;throw new Error(`Cannot load ${r} "${e}". Expected "true" or "false", got ${t[e]}.`)}},k6=(t,e,r)=>{if(!(e in t))return;let n=parseInt(t[e],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${e}'. Expected number, got '${t[e]}'.`);return n};Zo.SelectorType=void 0;(function(t){t.ENV="env",t.CONFIG="shared config entry"})(Zo.SelectorType||(Zo.SelectorType={}));Zo.booleanSelector=L6;Zo.numberSelector=k6});var wr=_(wt=>{"use strict";var $s=pS(),Uf=Bt(),M6=Ti(),GI="AWS_USE_DUALSTACK_ENDPOINT",KI="use_dualstack_endpoint",q6=!1,$6={environmentVariableSelector:t=>$s.booleanSelector(t,GI,$s.SelectorType.ENV),configFileSelector:t=>$s.booleanSelector(t,KI,$s.SelectorType.CONFIG),default:!1},XI="AWS_USE_FIPS_ENDPOINT",QI="use_fips_endpoint",F6=!1,U6={environmentVariableSelector:t=>$s.booleanSelector(t,XI,$s.SelectorType.ENV),configFileSelector:t=>$s.booleanSelector(t,QI,$s.SelectorType.CONFIG),default:!1},B6=t=>{let{tls:e,endpoint:r,urlParser:n,useDualstackEndpoint:s}=t;return Object.assign(t,{tls:e??!0,endpoint:Uf.normalizeProvider(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:Uf.normalizeProvider(s??!1)})},j6=async t=>{let{tls:e=!0}=t,r=await t.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let s=await t.useDualstackEndpoint(),i=await t.useFipsEndpoint(),{hostname:o}=await t.regionInfoProvider(r,{useDualstackEndpoint:s,useFipsEndpoint:i})??{};if(!o)throw new Error("Cannot resolve hostname from client config");return t.urlParser(`${e?"https:":"http:"}//${o}`)},H6=t=>{let e=Uf.normalizeProvider(t.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:s,tls:i}=t;return Object.assign(t,{tls:i??!0,endpoint:r?Uf.normalizeProvider(typeof r=="string"?s(r):r):()=>j6({...t,useDualstackEndpoint:e,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:e})},YI="AWS_REGION",JI="region",V6={environmentVariableSelector:t=>t[YI],configFileSelector:t=>t[JI],default:()=>{throw new Error("Region is missing")}},W6={preferredFile:"credentials"},WI=new Set,z6=(t,e=M6.isValidHostLabel)=>{if(!WI.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else WI.add(t)},ZI=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),G6=t=>ZI(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,K6=t=>{let{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{let n=typeof e=="function"?await e():e,s=G6(n);return z6(s),s},useFipsEndpoint:async()=>{let n=typeof e=="string"?e:await e();return ZI(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},zI=(t=[],{useFipsEndpoint:e,useDualstackEndpoint:r})=>t.find(({tags:n})=>e===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,X6=(t,{regionHostname:e,partitionHostname:r})=>e||(r?r.replace("{region}",t):void 0),Q6=(t,{partitionHash:e})=>Object.keys(e||{}).find(r=>e[r].regions.includes(t))??"aws",Y6=(t,{signingRegion:e,regionRegex:r,useFipsEndpoint:n})=>{if(e)return e;if(n){let s=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),i=t.match(s);if(i)return i[0].slice(1,-1)}},J6=(t,{useFipsEndpoint:e=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:s,partitionHash:i})=>{let o=Q6(t,{partitionHash:i}),a=t in s?t:i[o]?.endpoint??t,c={useFipsEndpoint:e,useDualstackEndpoint:r},u=zI(s[a]?.variants,c),l=zI(i[o]?.variants,c),d=X6(a,{regionHostname:u,partitionHostname:l});if(d===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:e,useDualstackEndpoint:r}}`);let m=Y6(d,{signingRegion:s[a]?.signingRegion,regionRegex:i[o].regionRegex,useFipsEndpoint:e});return{partition:o,signingService:n,hostname:d,...m&&{signingRegion:m},...s[a]?.signingService&&{signingService:s[a].signingService}}};wt.CONFIG_USE_DUALSTACK_ENDPOINT=KI;wt.CONFIG_USE_FIPS_ENDPOINT=QI;wt.DEFAULT_USE_DUALSTACK_ENDPOINT=q6;wt.DEFAULT_USE_FIPS_ENDPOINT=F6;wt.ENV_USE_DUALSTACK_ENDPOINT=GI;wt.ENV_USE_FIPS_ENDPOINT=XI;wt.NODE_REGION_CONFIG_FILE_OPTIONS=W6;wt.NODE_REGION_CONFIG_OPTIONS=V6;wt.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS=$6;wt.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS=U6;wt.REGION_ENV_NAME=YI;wt.REGION_INI_NAME=JI;wt.getRegionInfo=J6;wt.resolveCustomEndpointsConfig=B6;wt.resolveEndpointsConfig=H6;wt.resolveRegionConfig=K6});var nu=_(Bf=>{"use strict";var Z6=Oe(),eO="content-length";function tO(t){return e=>async r=>{let n=r.request;if(Z6.HttpRequest.isInstance(n)){let{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(eO)===-1)try{let o=t(s);n.headers={...n.headers,[eO]:String(o)}}catch{}}return e({...r,request:n})}}var rO={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},eK=t=>({applyToStack:e=>{e.add(tO(t.bodyLengthChecker),rO)}});Bf.contentLengthMiddleware=tO;Bf.contentLengthMiddlewareOptions=rO;Bf.getContentLengthPlugin=eK});var mS=_(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.getHomeDir=void 0;var tK=require("os"),rK=require("path"),hS={},nK=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",sK=()=>{let{HOME:t,USERPROFILE:e,HOMEPATH:r,HOMEDRIVE:n=`C:${rK.sep}`}=process.env;if(t)return t;if(e)return e;if(r)return`${n}${r}`;let s=nK();return hS[s]||(hS[s]=(0,tK.homedir)()),hS[s]};jf.getHomeDir=sK});var gS=_(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.getSSOTokenFilepath=void 0;var iK=require("crypto"),oK=require("path"),aK=mS(),cK=t=>{let r=(0,iK.createHash)("sha1").update(t).digest("hex");return(0,oK.join)((0,aK.getHomeDir)(),".aws","sso","cache",`${r}.json`)};Hf.getSSOTokenFilepath=cK});var nO=_(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.getSSOTokenFromFile=Fs.tokenIntercept=void 0;var uK=require("fs/promises"),lK=gS();Fs.tokenIntercept={};var dK=async t=>{if(Fs.tokenIntercept[t])return Fs.tokenIntercept[t];let e=(0,lK.getSSOTokenFilepath)(t),r=await(0,uK.readFile)(e,"utf8");return JSON.parse(r)};Fs.getSSOTokenFromFile=dK});var sO=_(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.readFile=mr.fileIntercept=mr.filePromises=void 0;var fK=require("fs/promises");mr.filePromises={};mr.fileIntercept={};var pK=(t,e)=>mr.fileIntercept[t]!==void 0?mr.fileIntercept[t]:((!mr.filePromises[t]||e?.ignoreCache)&&(mr.filePromises[t]=(0,fK.readFile)(t,"utf8")),mr.filePromises[t]);mr.readFile=pK});var Bn=_(zt=>{"use strict";var su=mS(),iO=gS(),yS=nO(),Vf=require("path"),Wf=Pn(),ea=sO(),aO="AWS_PROFILE",cO="default",hK=t=>t.profile||process.env[aO]||cO,Ni=".",mK=t=>Object.entries(t).filter(([e])=>{let r=e.indexOf(Ni);return r===-1?!1:Object.values(Wf.IniSectionType).includes(e.substring(0,r))}).reduce((e,[r,n])=>{let s=r.indexOf(Ni),i=r.substring(0,s)===Wf.IniSectionType.PROFILE?r.substring(s+1):r;return e[i]=n,e},{...t.default&&{default:t.default}}),gK="AWS_CONFIG_FILE",uO=()=>process.env[gK]||Vf.join(su.getHomeDir(),".aws","config"),yK="AWS_SHARED_CREDENTIALS_FILE",EK=()=>process.env[yK]||Vf.join(su.getHomeDir(),".aws","credentials"),_K=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,SK=["__proto__","profile __proto__"],ES=t=>{let e={},r,n;for(let s of t.split(/\r?\n/)){let i=s.split(/(^|\s)[;#]/)[0].trim();if(i[0]==="["&&i[i.length-1]==="]"){r=void 0,n=void 0;let a=i.substring(1,i.length-1),c=_K.exec(a);if(c){let[,u,,l]=c;Object.values(Wf.IniSectionType).includes(u)&&(r=[u,l].join(Ni))}else r=a;if(SK.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=i.indexOf("=");if(![0,-1].includes(a)){let[c,u]=[i.substring(0,a).trim(),i.substring(a+1).trim()];if(u==="")n=c;else{n&&s.trimStart()===s&&(n=void 0),e[r]=e[r]||{};let l=n?[n,c].join(Ni):c;e[r][l]=u}}}}return e},oO=()=>({}),lO=async(t={})=>{let{filepath:e=EK(),configFilepath:r=uO()}=t,n=su.getHomeDir(),s="~/",i=e;e.startsWith(s)&&(i=Vf.join(n,e.slice(2)));let o=r;r.startsWith(s)&&(o=Vf.join(n,r.slice(2)));let a=await Promise.all([ea.readFile(o,{ignoreCache:t.ignoreCache}).then(ES).then(mK).catch(oO),ea.readFile(i,{ignoreCache:t.ignoreCache}).then(ES).catch(oO)]);return{configFile:a[0],credentialsFile:a[1]}},vK=t=>Object.entries(t).filter(([e])=>e.startsWith(Wf.IniSectionType.SSO_SESSION+Ni)).reduce((e,[r,n])=>({...e,[r.substring(r.indexOf(Ni)+1)]:n}),{}),wK=()=>({}),bK=async(t={})=>ea.readFile(t.configFilepath??uO()).then(ES).then(vK).catch(wK),RK=(...t)=>{let e={};for(let r of t)for(let[n,s]of Object.entries(r))e[n]!==void 0?Object.assign(e[n],s):e[n]=s;return e},AK=async t=>{let e=await lO(t);return RK(e.configFile,e.credentialsFile)},CK={getFileRecord(){return ea.fileIntercept},interceptFile(t,e){ea.fileIntercept[t]=Promise.resolve(e)},getTokenRecord(){return yS.tokenIntercept},interceptToken(t,e){yS.tokenIntercept[t]=e}};Object.defineProperty(zt,"getSSOTokenFromFile",{enumerable:!0,get:function(){return yS.getSSOTokenFromFile}});Object.defineProperty(zt,"readFile",{enumerable:!0,get:function(){return ea.readFile}});zt.CONFIG_PREFIX_SEPARATOR=Ni;zt.DEFAULT_PROFILE=cO;zt.ENV_PROFILE=aO;zt.externalDataInterceptor=CK;zt.getProfileName=hK;zt.loadSharedConfigFiles=lO;zt.loadSsoSessionData=bK;zt.parseKnownFiles=AK;Object.keys(su).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(zt,t)&&Object.defineProperty(zt,t,{enumerable:!0,get:function(){return su[t]}})});Object.keys(iO).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(zt,t)&&Object.defineProperty(zt,t,{enumerable:!0,get:function(){return iO[t]}})})});var jn=_(pO=>{"use strict";var iu=Wt(),dO=Bn();function fO(t){try{let e=new Set(Array.from(t.match(/([A-Z_]){3,}/g)??[]));return e.delete("CONFIG"),e.delete("CONFIG_PREFIX_SEPARATOR"),e.delete("ENV"),[...e].join(", ")}catch{return t}}var TK=(t,e)=>async()=>{try{let r=t(process.env,e);if(r===void 0)throw new Error;return r}catch(r){throw new iu.CredentialsProviderError(r.message||`Not found in ENV: ${fO(t.toString())}`,{logger:e?.logger})}},xK=(t,{preferredFile:e="config",...r}={})=>async()=>{let n=dO.getProfileName(r),{configFile:s,credentialsFile:i}=await dO.loadSharedConfigFiles(r),o=i[n]||{},a=s[n]||{},c=e==="config"?{...o,...a}:{...a,...o};try{let l=t(c,e==="config"?s:i);if(l===void 0)throw new Error;return l}catch(u){throw new iu.CredentialsProviderError(u.message||`Not found in config files w/ profile [${n}]: ${fO(t.toString())}`,{logger:r.logger})}},PK=t=>typeof t=="function",IK=t=>PK(t)?async()=>await t():iu.fromStatic(t),OK=({environmentVariableSelector:t,configFileSelector:e,default:r},n={})=>{let{signingName:s,logger:i}=n,o={signingName:s,logger:i};return iu.memoize(iu.chain(TK(t,o),xK(e,n),IK(r)))};pO.loadConfig=OK});var yO=_(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.getEndpointUrlConfig=void 0;var hO=Bn(),mO="AWS_ENDPOINT_URL",gO="endpoint_url",NK=t=>({environmentVariableSelector:e=>{let r=t.split(" ").map(i=>i.toUpperCase()),n=e[[mO,...r].join("_")];if(n)return n;let s=e[mO];if(s)return s},configFileSelector:(e,r)=>{if(r&&e.services){let s=r[["services",e.services].join(hO.CONFIG_PREFIX_SEPARATOR)];if(s){let i=t.split(" ").map(a=>a.toLowerCase()),o=s[[i.join("_"),gO].join(hO.CONFIG_PREFIX_SEPARATOR)];if(o)return o}}let n=e[gO];if(n)return n},default:void 0});zf.getEndpointUrlConfig=NK});var EO=_(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.getEndpointFromConfig=void 0;var DK=jn(),LK=yO(),kK=async t=>(0,DK.loadConfig)((0,LK.getEndpointUrlConfig)(t??""))();Gf.getEndpointFromConfig=kK});var Vn=_(Hn=>{"use strict";var SO=EO(),_O=As(),MK=(sr(),le(Ai)),Kf=Bt(),qK=Pc(),$K=async t=>{let e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),HK(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!jK(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},FK=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,UK=/(\d+\.){3}\d+/,BK=/\.\./,jK=t=>FK.test(t)&&!UK.test(t)&&!BK.test(t),HK=t=>{let[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,o=!!(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return o},VK=(t,e,r)=>{let n=async()=>{let s=r[t]??r[e];return typeof s=="function"?s():s};return t==="credentialScope"||e==="CredentialScope"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.credentialScope??s?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{let s=typeof r.credentials=="function"?await r.credentials():r.credentials;return s?.accountId??s?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){let{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},_S=t=>typeof t=="object"?"url"in t?_O.parseUrl(t.url):t:_O.parseUrl(t),vO=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let o;r.serviceConfiguredEndpoint?o=await r.serviceConfiguredEndpoint():o=await SO.getEndpointFromConfig(r.serviceId),o&&(r.endpoint=()=>Promise.resolve(_S(o)),r.isCustomEndpoint=!0)}let s=await wO(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},wO=async(t,e,r)=>{let n={},s=e?.getEndpointParameterInstructions?.()||{};for(let[i,o]of Object.entries(s))switch(o.type){case"staticContextParams":n[i]=o.value;break;case"contextParams":n[i]=t[o.name];break;case"clientContextParams":case"builtInParams":n[i]=await VK(o.name,i,r)();break;case"operationContextParams":n[i]=o.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(o))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await $K(n),n},bO=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&MK.setFeature(n,"ENDPOINT_OVERRIDE","N");let i=await vO(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;let o=n.authSchemes?.[0];if(o){n.signing_region=o.signingRegion,n.signing_service=o.signingName;let c=Kf.getSmithyContext(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:o.signingRegion,signingRegion:o.signingRegion,signing_service:o.signingName,signingName:o.signingName,signingRegionSet:o.signingRegionSet},o.properties))}return r({...s})},RO={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:qK.serializerMiddlewareOption.name},WK=(t,e)=>({applyToStack:r=>{r.addRelativeTo(bO({config:t,instructions:e}),RO)}}),zK=t=>{let e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>_S(await Kf.normalizeProvider(r)()):void 0,a=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:Kf.normalizeProvider(n??!1),useFipsEndpoint:Kf.normalizeProvider(s??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=SO.getEndpointFromConfig(t.serviceId)),c),a},GK=t=>{let{endpoint:e}=t;return e===void 0&&(t.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),t};Hn.endpointMiddleware=bO;Hn.endpointMiddlewareOptions=RO;Hn.getEndpointFromInstructions=vO;Hn.getEndpointPlugin=WK;Hn.resolveEndpointConfig=zK;Hn.resolveEndpointRequiredConfig=GK;Hn.resolveParams=wO;Hn.toEndpointV1=_S});var vS=_(Us=>{"use strict";var KK=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],XK=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],QK=["TimeoutError","RequestTimeout","RequestTimeoutException"],YK=[500,502,503,504],JK=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],ZK=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],AO=t=>t?.$retryable!==void 0,e8=t=>KK.includes(t.name),CO=t=>t.$metadata?.clockSkewCorrected,TO=t=>{let e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},t8=t=>t.$metadata?.httpStatusCode===429||XK.includes(t.name)||t.$retryable?.throttling==!0,SS=(t,e=0)=>AO(t)||CO(t)||QK.includes(t.name)||JK.includes(t?.code||"")||ZK.includes(t?.code||"")||YK.includes(t.$metadata?.httpStatusCode||0)||TO(t)||t.cause!==void 0&&e<=10&&SS(t.cause,e+1),r8=t=>{if(t.$metadata?.httpStatusCode!==void 0){let e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!SS(t)}return!1};Us.isBrowserNetworkError=TO;Us.isClockSkewCorrectedError=CO;Us.isClockSkewError=e8;Us.isRetryableByTrait=AO;Us.isServerError=r8;Us.isThrottlingError=t8;Us.isTransientError=SS});var ta=_(et=>{"use strict";var n8=vS();et.RETRY_MODES=void 0;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(et.RETRY_MODES||(et.RETRY_MODES={}));var wS=3,s8=et.RETRY_MODES.STANDARD,Qf=class Qf{constructor(e){f(this,"beta");f(this,"minCapacity");f(this,"minFillRate");f(this,"scaleConstant");f(this,"smooth");f(this,"currentCapacity",0);f(this,"enabled",!1);f(this,"lastMaxRate",0);f(this,"measuredTxRate",0);f(this,"requestCount",0);f(this,"fillRate");f(this,"lastThrottleTime");f(this,"lastTimestamp",0);f(this,"lastTxRateBucket");f(this,"maxCapacity");f(this,"timeWindow",0);this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){let r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Qf.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){let e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}let r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),n8.isThrottlingError(e)){let s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}};f(Qf,"setTimeoutFn",setTimeout);var Xf=Qf,ou=100,CS=20*1e3,PO=500,bS=500,IO=5,OO=10,NO=1,i8="amz-sdk-invocation-id",o8="amz-sdk-request",a8=()=>{let t=ou;return{computeNextBackoffDelay:n=>Math.floor(Math.min(CS,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},xO=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(CS,t),getRetryCost:()=>r}),au=class{constructor(e){f(this,"maxAttempts");f(this,"mode",et.RETRY_MODES.STANDARD);f(this,"capacity",bS);f(this,"retryBackoffStrategy",a8());f(this,"maxAttemptsProvider");this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return xO({retryDelay:ou,retryCount:0})}async refreshRetryTokenForRetry(e,r){let n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){let s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?PO:ou);let i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,xO({retryDelay:o,retryCount:e.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(bS,this.capacity+(e.getRetryCost()??NO))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${wS}`),wS}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?OO:IO}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}},RS=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"rateLimiter");f(this,"standardRetryStrategy");f(this,"mode",et.RETRY_MODES.ADAPTIVE);this.maxAttemptsProvider=e;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Xf,this.standardRetryStrategy=new au(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}},AS=class extends au{constructor(r,n=ou){super(typeof r=="function"?r:async()=>r);f(this,"computeNextBackoffDelay");typeof n=="number"?this.computeNextBackoffDelay=()=>n:this.computeNextBackoffDelay=n}async refreshRetryTokenForRetry(r,n){let s=await super.refreshRetryTokenForRetry(r,n);return s.getRetryDelay=()=>this.computeNextBackoffDelay(s.getRetryCount()),s}};et.AdaptiveRetryStrategy=RS;et.ConfiguredRetryStrategy=AS;et.DEFAULT_MAX_ATTEMPTS=wS;et.DEFAULT_RETRY_DELAY_BASE=ou;et.DEFAULT_RETRY_MODE=s8;et.DefaultRateLimiter=Xf;et.INITIAL_RETRY_TOKENS=bS;et.INVOCATION_ID_HEADER=i8;et.MAXIMUM_RETRY_DELAY=CS;et.NO_RETRY_INCREMENT=NO;et.REQUEST_HEADER=o8;et.RETRY_COST=IO;et.StandardRetryStrategy=au;et.THROTTLING_RETRY_DELAY_BASE=PO;et.TIMEOUT_RETRY_COST=OO});var DO=_(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.isStreamingPayload=void 0;var c8=require("stream"),u8=t=>t?.body instanceof c8.Readable||typeof ReadableStream<"u"&&t?.body instanceof ReadableStream;Yf.isStreamingPayload=u8});var Wn=_(dt=>{"use strict";var Qe=ta(),ra=Oe(),Bs=vS(),kO=PE(),LO=Bt(),l8=fe(),d8=DO(),f8=(t,e)=>{let r=t,n=Qe.NO_RETRY_INCREMENT,s=Qe.RETRY_COST,i=Qe.TIMEOUT_RETRY_COST,o=t,a=d=>d.name==="TimeoutError"?i:s,c=d=>a(d)<=o;return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:d=>{if(!c(d))throw new Error("No retry token available");let m=a(d);return o-=m,m},releaseRetryTokens:d=>{o+=d??n,o=Math.min(o,r)}})},MO=(t,e)=>Math.floor(Math.min(Qe.MAXIMUM_RETRY_DELAY,Math.random()*2**e*t)),qO=t=>t?Bs.isRetryableByTrait(t)||Bs.isClockSkewError(t)||Bs.isThrottlingError(t)||Bs.isTransientError(t):!1,$O=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Jf=class{constructor(e,r){f(this,"maxAttemptsProvider");f(this,"retryDecider");f(this,"delayDecider");f(this,"retryQuota");f(this,"mode",Qe.RETRY_MODES.STANDARD);this.maxAttemptsProvider=e,this.retryDecider=r?.retryDecider??qO,this.delayDecider=r?.delayDecider??MO,this.retryQuota=r?.retryQuota??f8(Qe.INITIAL_RETRY_TOKENS)}shouldRetry(e,r,n){return r<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)}async getMaxAttempts(){let e;try{e=await this.maxAttemptsProvider()}catch{e=Qe.DEFAULT_MAX_ATTEMPTS}return e}async retry(e,r,n){let s,i=0,o=0,a=await this.getMaxAttempts(),{request:c}=r;for(ra.HttpRequest.isInstance(c)&&(c.headers[Qe.INVOCATION_ID_HEADER]=kO.v4());;)try{ra.HttpRequest.isInstance(c)&&(c.headers[Qe.REQUEST_HEADER]=`attempt=${i+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:u,output:l}=await e(r);return n?.afterRequest&&n.afterRequest(u),this.retryQuota.releaseRetryTokens(s),l.$metadata.attempts=i+1,l.$metadata.totalRetryDelay=o,{response:u,output:l}}catch(u){let l=$O(u);if(i++,this.shouldRetry(l,i,a)){s=this.retryQuota.retrieveRetryTokens(l);let d=this.delayDecider(Bs.isThrottlingError(l)?Qe.THROTTLING_RETRY_DELAY_BASE:Qe.DEFAULT_RETRY_DELAY_BASE,i),m=p8(l.$response),g=Math.max(m||0,d);o+=g,await new Promise(E=>setTimeout(E,g));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=i,l.$metadata.totalRetryDelay=o,l}}},p8=t=>{if(!ra.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},TS=class extends Jf{constructor(r,n){let{rateLimiter:s,...i}=n??{};super(r,i);f(this,"rateLimiter");this.rateLimiter=s??new Qe.DefaultRateLimiter,this.mode=Qe.RETRY_MODES.ADAPTIVE}async retry(r,n){return super.retry(r,n,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:s=>{this.rateLimiter.updateClientSendingRate(s)}})}},xS="AWS_MAX_ATTEMPTS",PS="max_attempts",h8={environmentVariableSelector:t=>{let e=t[xS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Environment variable ${xS} mast be a number, got "${e}"`);return r},configFileSelector:t=>{let e=t[PS];if(!e)return;let r=parseInt(e);if(Number.isNaN(r))throw new Error(`Shared config file entry ${PS} mast be a number, got "${e}"`);return r},default:Qe.DEFAULT_MAX_ATTEMPTS},m8=t=>{let{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=LO.normalizeProvider(n??Qe.DEFAULT_MAX_ATTEMPTS);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await LO.normalizeProvider(r)()===Qe.RETRY_MODES.ADAPTIVE?new Qe.AdaptiveRetryStrategy(s):new Qe.StandardRetryStrategy(s))})},FO="AWS_RETRY_MODE",UO="retry_mode",g8={environmentVariableSelector:t=>t[FO],configFileSelector:t=>t[UO],default:Qe.DEFAULT_RETRY_MODE},BO=()=>t=>async e=>{let{request:r}=e;return ra.HttpRequest.isInstance(r)&&(delete r.headers[Qe.INVOCATION_ID_HEADER],delete r.headers[Qe.REQUEST_HEADER]),t(e)},jO={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},y8=t=>({applyToStack:e=>{e.addRelativeTo(BO(),jO)}}),HO=t=>(e,r)=>async n=>{let s=await t.retryStrategy(),i=await t.maxAttempts();if(E8(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0,{request:l}=n,d=ra.HttpRequest.isInstance(l);for(d&&(l.headers[Qe.INVOCATION_ID_HEADER]=kO.v4());;)try{d&&(l.headers[Qe.REQUEST_HEADER]=`attempt=${c+1}; max=${i}`);let{response:m,output:g}=await e(n);return s.recordSuccess(o),g.$metadata.attempts=c+1,g.$metadata.totalRetryDelay=u,{response:m,output:g}}catch(m){let g=_8(m);if(a=$O(m),d&&d8.isStreamingPayload(l))throw(r.logger instanceof l8.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{o=await s.refreshRetryTokenForRetry(o,g)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();let E=o.getRetryDelay();u+=E,await new Promise(w=>setTimeout(w,E))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},E8=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",_8=t=>{let e={error:t,errorType:S8(t)},r=WO(t.$response);return r&&(e.retryAfterHint=r),e},S8=t=>Bs.isThrottlingError(t)?"THROTTLING":Bs.isTransientError(t)?"TRANSIENT":Bs.isServerError(t)?"SERVER_ERROR":"CLIENT_ERROR",VO={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},v8=t=>({applyToStack:e=>{e.add(HO(t),VO)}}),WO=t=>{if(!ra.HttpResponse.isInstance(t))return;let e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;let r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};dt.AdaptiveRetryStrategy=TS;dt.CONFIG_MAX_ATTEMPTS=PS;dt.CONFIG_RETRY_MODE=UO;dt.ENV_MAX_ATTEMPTS=xS;dt.ENV_RETRY_MODE=FO;dt.NODE_MAX_ATTEMPT_CONFIG_OPTIONS=h8;dt.NODE_RETRY_MODE_CONFIG_OPTIONS=g8;dt.StandardRetryStrategy=Jf;dt.defaultDelayDecider=MO;dt.defaultRetryDecider=qO;dt.getOmitRetryHeadersPlugin=y8;dt.getRetryAfterHint=WO;dt.getRetryPlugin=v8;dt.omitRetryHeadersMiddleware=BO;dt.omitRetryHeadersMiddlewareOptions=jO;dt.resolveRetryConfig=m8;dt.retryMiddleware=HO;dt.retryMiddlewareOptions=VO});var KO=_((EIe,GO)=>{"use strict";var Zf=Object.defineProperty,w8=Object.getOwnPropertyDescriptor,b8=Object.getOwnPropertyNames,R8=Object.prototype.hasOwnProperty,IS=(t,e)=>Zf(t,"name",{value:e,configurable:!0}),A8=(t,e)=>{for(var r in e)Zf(t,r,{get:e[r],enumerable:!0})},C8=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of b8(e))!R8.call(t,s)&&s!==r&&Zf(t,s,{get:()=>e[s],enumerable:!(n=w8(e,s))||n.enumerable});return t},T8=t=>C8(Zf({},"__esModule",{value:!0}),t),zO={};A8(zO,{build:()=>I8,parse:()=>P8,validate:()=>x8});GO.exports=T8(zO);var x8=IS(t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6,"validate"),P8=IS(t=>{let e=t.split(":");if(e.length<6||e[0]!=="arn")throw new Error("Malformed ARN");let[,r,n,s,i,...o]=e;return{partition:r,service:n,region:s,accountId:i,resource:o.join(":")}},"parse"),I8=IS(t=>{let{partition:e="aws",service:r,region:n,accountId:s,resource:i}=t;if([r,n,s,i].some(o=>typeof o!="string"))throw new Error("Input ARN object is invalid");return`arn:${e}:${r}:${n}:${s}:${i}`},"build")});var mN=_(Ae=>{"use strict";var cu=Oe(),JO=fe(),O8=df(),ep=pS(),N8=(Ot(),le(Un)),ZO=(sr(),le(Ai));Pn();var D8=Bt(),XO=Dc(),L8=KO(),k8="content-length",M8="x-amz-decoded-content-length";function eN(){return(t,e)=>async r=>{let{request:n}=r;if(cu.HttpRequest.isInstance(n)&&!(k8 in n.headers)&&!(M8 in n.headers)){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof JO.NoOpLogger)?e.logger.warn(s):console.warn(s)}return t({...r})}}var tN={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},q8=t=>({applyToStack:e=>{e.add(eN(),tN)}}),rN=t=>(e,r)=>async n=>{let s=await t.region(),i=t.region,o=()=>{};r.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>r.__s3RegionRedirect}),o=()=>Object.defineProperty(t,"region",{writable:!0,value:i}));try{let a=await e(n);if(r.__s3RegionRedirect){o();let c=await t.region();if(s!==c)throw new Error("Region was not restored following S3 region redirect.")}return a}catch(a){throw o(),a}},nN={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function sN(t){return(e,r)=>async n=>{try{return await e(n)}catch(s){if(t.followRegionRedirects){let i=s?.$metadata?.httpStatusCode,o=r.commandName==="HeadBucketCommand",a=s?.$response?.headers?.["x-amz-bucket-region"];if(a&&(i===301||i===400&&(s?.name==="IllegalLocationConstraintException"||o))){try{let c=a;r.logger?.debug(`Redirecting from ${await t.region()} to ${c}`),r.__s3RegionRedirect=c}catch(c){throw new Error("Region redirect failed: "+c)}return e(n)}}throw s}}}var iN={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},$8=t=>({applyToStack:e=>{e.add(sN(t),iN),e.addRelativeTo(rN(t),nN)}}),oN=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(cu.HttpResponse.isInstance(i)&&i.headers.expires){i.headers.expiresstring=i.headers.expires;try{JO.parseRfc7231DateTime(i.headers.expires)}catch(o){r.logger?.warn(`AWS SDK Warning for ${r.clientName}::${r.commandName} response parsing (${i.headers.expires}): ${o}`),delete i.headers.expires}}return s},aN={tags:["S3"],name:"s3ExpiresMiddleware",override:!0,relation:"after",toMiddleware:"deserializerMiddleware"},F8=t=>({applyToStack:e=>{e.addRelativeTo(oN(),aN)}}),np=class np{constructor(e={}){f(this,"data");f(this,"lastPurgeTime",Date.now());this.data=e}get(e){let r=this.data[e];if(r)return r}set(e,r){return this.data[e]=r,r}delete(e){delete this.data[e]}async purgeExpired(){let e=Date.now();if(!(this.lastPurgeTime+np.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(let r in this.data){let n=this.data[r];if(!n.isRefreshing){let s=await n.identity;s.expiration&&s.expiration.getTime()<e&&delete this.data[r]}}}};f(np,"EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS",3e4);var tp=np,na=class{constructor(e,r=!1,n=Date.now()){f(this,"_identity");f(this,"isRefreshing");f(this,"accessed");this._identity=e,this.isRefreshing=r,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}},sp=class sp{constructor(e,r=new tp){f(this,"createSessionFn");f(this,"cache");this.createSessionFn=e,this.cache=r}async getS3ExpressIdentity(e,r){let n=r.Bucket,{cache:s}=this,i=s.get(n);return i?i.identity.then(o=>(o.expiration?.getTime()??0)<Date.now()?s.set(n,new na(this.getIdentity(n))).identity:((o.expiration?.getTime()??0)<Date.now()+sp.REFRESH_WINDOW_MS&&!i.isRefreshing&&(i.isRefreshing=!0,this.getIdentity(n).then(u=>{s.set(n,new na(Promise.resolve(u)))})),o)):s.set(n,new na(this.getIdentity(n))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(s=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+s)});let r=await this.createSessionFn(e);if(!r.Credentials?.AccessKeyId||!r.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretAccessKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration?new Date(r.Credentials.Expiration):void 0}}};f(sp,"REFRESH_WINDOW_MS",6e4);var rp=sp,U8="Directory",B8="S3Express",j8="sigv4-s3express",OS="X-Amz-S3session-Token",NS=OS.toLowerCase(),H8="AWS_S3_DISABLE_EXPRESS_SESSION_AUTH",V8="s3_disable_express_session_auth",W8={environmentVariableSelector:t=>ep.booleanSelector(t,H8,ep.SelectorType.ENV),configFileSelector:t=>ep.booleanSelector(t,V8,ep.SelectorType.CONFIG),default:!1},DS=class extends O8.SignatureV4{async signWithCredentials(e,r,n){let s=QO(r);e.headers[NS]=r.sessionToken;let i=this;return YO(i,s),i.signRequest(e,n??{})}async presignWithCredentials(e,r,n){let s=QO(r);return delete e.headers[NS],e.headers[OS]=r.sessionToken,e.query=e.query??{},e.query[OS]=r.sessionToken,YO(this,s),this.presign(e,n)}};function QO(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function YO(t,e){let r=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=t.credentialProvider,s=()=>(clearTimeout(r),t.credentialProvider=n,Promise.resolve(e));t.credentialProvider=s}var cN=t=>(e,r)=>async n=>{if(r.endpointV2){let s=r.endpointV2,i=s.properties?.authSchemes?.[0]?.name===j8;if((s.properties?.backend===B8||s.properties?.bucketType===U8)&&(N8.setFeature(r,"S3_EXPRESS_BUCKET","J"),r.isS3ExpressBucket=!0),i){let a=n.input.Bucket;if(a){let c=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:a});r.s3ExpressIdentity=c,cu.HttpRequest.isInstance(n.request)&&c.sessionToken&&(n.request.headers[NS]=c.sessionToken)}}}return e(n)},uN={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},z8=t=>({applyToStack:e=>{e.add(cN(t),uN)}}),G8=async(t,e,r,n)=>{let s=await n.signWithCredentials(r,t,{});if(s.headers["X-Amz-Security-Token"]||s.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return s},K8=t=>e=>{throw e},X8=(t,e)=>{},Q8=ZO.httpSigningMiddlewareOptions,lN=t=>(e,r)=>async n=>{if(!cu.HttpRequest.isInstance(n.request))return e(n);let i=D8.getSmithyContext(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:o={}},identity:a,signer:c}=i,u;r.s3ExpressIdentity?u=await G8(r.s3ExpressIdentity,o,n.request,await t.signer()):u=await c.sign(n.request,a,o);let l=await e({...n,request:u}).catch((c.errorHandler||K8)(o));return(c.successHandler||X8)(l.response,o),l},Y8=t=>({applyToStack:e=>{e.addRelativeTo(lN(t),ZO.httpSigningMiddlewareOptions)}}),J8=(t,{session:e})=>{let[r,n]=e,{forcePathStyle:s,useAccelerateEndpoint:i,disableMultiregionAccessPoints:o,followRegionRedirects:a,s3ExpressIdentityProvider:c,bucketEndpoint:u,expectContinueHeader:l}=t;return Object.assign(t,{forcePathStyle:s??!1,useAccelerateEndpoint:i??!1,disableMultiregionAccessPoints:o??!1,followRegionRedirects:a??!1,s3ExpressIdentityProvider:c??new rp(async d=>r().send(new n({Bucket:d}))),bucketEndpoint:u??!1,expectContinueHeader:l??2097152})},Z8={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},e5=3e3,dN=t=>(e,r)=>async n=>{let s=await e(n),{response:i}=s;if(!cu.HttpResponse.isInstance(i))return s;let{statusCode:o,body:a}=i;if(o<200||o>=300||!(typeof a?.stream=="function"||typeof a?.pipe=="function"||typeof a?.tee=="function"))return s;let u=a,l=a;a&&typeof a=="object"&&!(a instanceof Uint8Array)&&([u,l]=await XO.splitStream(a)),i.body=l;let d=await t5(u,{streamCollector:async g=>XO.headStream(g,e5)});typeof u?.destroy=="function"&&u.destroy();let m=t.utf8Encoder(d.subarray(d.length-16));if(d.length===0&&Z8[r.commandName]){let g=new Error("S3 aborted request");throw g.name="InternalError",g}return m&&m.endsWith("</Error>")&&(i.statusCode=400),s},t5=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),fN={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},r5=t=>({applyToStack:e=>{e.addRelativeTo(dN(t),fN)}});function n5(t){return(e,r)=>async n=>{if(t.bucketEndpoint){let s=r.endpointV2;if(s){let i=n.input.Bucket;if(typeof i=="string")try{let o=new URL(i);r.endpointV2={...s,url:o}}catch(o){let a=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${i} could not be parsed as URL.`;throw r.logger?.constructor?.name==="NoOpLogger"?console.warn(a):r.logger?.warn?.(a),o}}}return e(n)}}var s5={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function pN({bucketEndpoint:t}){return e=>async r=>{let{input:{Bucket:n}}=r;if(!t&&typeof n=="string"&&!L8.validate(n)&&n.indexOf("/")>=0){let s=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw s.name="InvalidBucketName",s}return e({...r})}}var hN={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},i5=t=>({applyToStack:e=>{e.add(pN(t),hN),e.addRelativeTo(n5(t),s5)}});Ae.NODE_DISABLE_S3_EXPRESS_SESSION_AUTH_OPTIONS=W8;Ae.S3ExpressIdentityCache=tp;Ae.S3ExpressIdentityCacheEntry=na;Ae.S3ExpressIdentityProviderImpl=rp;Ae.SignatureV4S3Express=DS;Ae.checkContentLengthHeader=eN;Ae.checkContentLengthHeaderMiddlewareOptions=tN;Ae.getCheckContentLengthHeaderPlugin=q8;Ae.getRegionRedirectMiddlewarePlugin=$8;Ae.getS3ExpiresMiddlewarePlugin=F8;Ae.getS3ExpressHttpSigningPlugin=Y8;Ae.getS3ExpressPlugin=z8;Ae.getThrow200ExceptionsPlugin=r5;Ae.getValidateBucketNamePlugin=i5;Ae.regionRedirectEndpointMiddleware=rN;Ae.regionRedirectEndpointMiddlewareOptions=nN;Ae.regionRedirectMiddleware=sN;Ae.regionRedirectMiddlewareOptions=iN;Ae.resolveS3Config=J8;Ae.s3ExpiresMiddleware=oN;Ae.s3ExpiresMiddlewareOptions=aN;Ae.s3ExpressHttpSigningMiddleware=lN;Ae.s3ExpressHttpSigningMiddlewareOptions=Q8;Ae.s3ExpressMiddleware=cN;Ae.s3ExpressMiddlewareOptions=uN;Ae.throw200ExceptionsMiddleware=dN;Ae.throw200ExceptionsMiddlewareOptions=fN;Ae.validateBucketNameMiddleware=pN;Ae.validateBucketNameMiddlewareOptions=hN});var MS=_(kS=>{"use strict";var o5=mN(),gN=df(),uu={CrtSignerV4:null},LS=class{constructor(e){f(this,"sigv4aSigner");f(this,"sigv4Signer");f(this,"signerOptions");this.sigv4Signer=new o5.SignatureV4S3Express(e),this.signerOptions=e}static sigv4aDependency(){return typeof uu.CrtSignerV4=="function"?"crt":typeof gN.signatureV4aContainer.SignatureV4a=="function"?"js":"none"}async sign(e,r={}){return r.signingRegion==="*"?this.getSigv4aSigner().sign(e,r):this.sigv4Signer.sign(e,r)}async signWithCredentials(e,r,n={}){if(n.signingRegion==="*"){let s=this.getSigv4aSigner(),i=uu.CrtSignerV4;if(i&&s instanceof i)return s.signWithCredentials(e,r,n);throw new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.signWithCredentials(e,r,n)}async presign(e,r={}){if(r.signingRegion==="*"){let n=this.getSigv4aSigner(),s=uu.CrtSignerV4;if(s&&n instanceof s)return n.presign(e,r);throw new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`)}return this.sigv4Signer.presign(e,r)}async presignWithCredentials(e,r,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,r,n)}getSigv4aSigner(){if(!this.sigv4aSigner){let e=uu.CrtSignerV4,r=gN.signatureV4aContainer.SignatureV4a;if(this.signerOptions.runtime==="node"){if(!e&&!r)throw new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt");if(e&&typeof e=="function")this.sigv4aSigner=new e({...this.signerOptions,signingAlgorithm:1});else if(r&&typeof r=="function")this.sigv4aSigner=new r({...this.signerOptions});else throw new Error("Available SigV4a implementation is not a valid constructor. Please ensure you've properly imported @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a.For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt")}else{if(!r||typeof r!="function")throw new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");this.sigv4aSigner=new r({...this.signerOptions})}}return this.sigv4aSigner}};kS.SignatureV4MultiRegion=LS;kS.signatureV4CrtContainer=uu});var CN=_(ip=>{"use strict";Object.defineProperty(ip,"__esModule",{value:!0});ip.ruleSet=void 0;var RN="required",me="type",mt="fn",gt="argv",js="ref",a5=!1,qS=!0,XS="isSet",$S="stringEquals",QS="getAttr",sa="booleanEquals",Gr="endpoint",or="tree",zn="error",FS={[RN]:!1,[me]:"string"},yN={[RN]:!0,default:!1,[me]:"boolean"},WS={[js]:"Endpoint"},US={[mt]:XS,[gt]:[{[js]:"Region"}]},zS={[js]:"Region"},BS={[mt]:"aws.partition",[gt]:[zS],assign:"PartitionResult"},YS={[js]:"PartitionResult"},GS={[mt]:sa,[gt]:[{[js]:"UseFIPS"},!0]},c5={[js]:"UseFIPS"},KS={[mt]:sa,[gt]:[{[js]:"UseDualStack"},!0]},EN={url:"https://events.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:{},headers:{}},Gt={},_N={[js]:"EndpointId"},jS={authSchemes:[{name:"sigv4a",signingName:"events",signingRegionSet:["*"]}]},AN={[mt]:sa,[gt]:[!0,{[mt]:QS,[gt]:[YS,"supportsDualStack"]}]},SN={[zn]:"DualStack is enabled but this partition does not support DualStack",[me]:zn},vN={[mt]:QS,[gt]:[YS,"supportsFIPS"]},HS=[{[mt]:XS,[gt]:[WS]}],VS=[KS],wN=[AN],bN=[GS],u5={version:"1.0",parameters:{Region:FS,UseDualStack:yN,UseFIPS:yN,Endpoint:FS,EndpointId:FS},rules:[{conditions:[{[mt]:"not",[gt]:HS},US,BS,{[mt]:$S,[gt]:[{[mt]:QS,[gt]:[YS,"name"]},"aws-us-gov"]},GS,KS],endpoint:EN,[me]:Gr},{conditions:[{[mt]:XS,[gt]:[_N]},US,BS],rules:[{conditions:[{[mt]:"isValidHostLabel",[gt]:[_N,qS]}],rules:[{conditions:[{[mt]:sa,[gt]:[c5,a5]}],rules:[{conditions:HS,endpoint:{url:WS,properties:jS,headers:Gt},[me]:Gr},{conditions:VS,rules:[{conditions:wN,rules:[{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dualStackDnsSuffix}",properties:jS,headers:Gt},[me]:Gr}],[me]:or},SN],[me]:or},{endpoint:{url:"https://{EndpointId}.endpoint.events.{PartitionResult#dnsSuffix}",properties:jS,headers:Gt},[me]:Gr}],[me]:or},{error:"Invalid Configuration: FIPS is not supported with EventBridge multi-region endpoints.",[me]:zn}],[me]:or},{error:"EndpointId must be a valid host label.",[me]:zn}],[me]:or},{conditions:HS,rules:[{conditions:bN,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[me]:zn},{conditions:VS,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[me]:zn},{endpoint:{url:WS,properties:Gt,headers:Gt},[me]:Gr}],[me]:or},{conditions:[US],rules:[{conditions:[BS],rules:[{conditions:[GS,KS],rules:[{conditions:[{[mt]:sa,[gt]:[qS,vN]},AN],rules:[{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Gt,headers:Gt},[me]:Gr}],[me]:or},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[me]:zn}],[me]:or},{conditions:bN,rules:[{conditions:[{[mt]:sa,[gt]:[vN,qS]}],rules:[{conditions:[{[mt]:$S,[gt]:[zS,"us-gov-east-1"]}],endpoint:{url:"https://events.us-gov-east-1.amazonaws.com",properties:Gt,headers:Gt},[me]:Gr},{conditions:[{[mt]:$S,[gt]:[zS,"us-gov-west-1"]}],endpoint:{url:"https://events.us-gov-west-1.amazonaws.com",properties:Gt,headers:Gt},[me]:Gr},{endpoint:{url:"https://events-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},[me]:Gr}],[me]:or},{error:"FIPS is enabled but this partition does not support FIPS",[me]:zn}],[me]:or},{conditions:VS,rules:[{conditions:wN,rules:[{endpoint:EN,[me]:Gr}],[me]:or},SN],[me]:or},{endpoint:{url:"https://events.{Region}.{PartitionResult#dnsSuffix}",properties:Gt,headers:Gt},[me]:Gr}],[me]:or}],[me]:or},{error:"Invalid Configuration: Missing Region",[me]:zn}]};ip.ruleSet=u5});var ZS=_(op=>{"use strict";Object.defineProperty(op,"__esModule",{value:!0});op.defaultEndpointResolver=void 0;var l5=Lo(),JS=Ti(),d5=CN(),f5=new JS.EndpointCache({size:50,params:["Endpoint","EndpointId","Region","UseDualStack","UseFIPS"]}),p5=(t,e={})=>f5.get(t,()=>(0,JS.resolveEndpoint)(d5.ruleSet,{endpointParams:t,logger:e.logger}));op.defaultEndpointResolver=p5;JS.customEndpointFunctions.aws=l5.awsEndpointFunctions});var ev=_(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.resolveHttpAuthSchemeConfig=Hs.defaultEventBridgeHttpAuthSchemeProvider=Hs.defaultEventBridgeHttpAuthSchemeParametersProvider=void 0;var TN=(Ot(),le(Un)),h5=MS(),m5=Vn(),ap=Bt(),g5=ZS(),y5=t=>async(e,r,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");let s=await t(e,r,n),i=(0,ap.getSmithyContext)(r)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!i)throw new Error(`getEndpointParameterInstructions() is not defined on \`${r.commandName}\``);let o=await(0,m5.resolveParams)(n,{getEndpointParameterInstructions:i},e);return Object.assign(s,o)},E5=async(t,e,r)=>({operation:(0,ap.getSmithyContext)(e).operation,region:await(0,ap.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Hs.defaultEventBridgeHttpAuthSchemeParametersProvider=y5(E5);function xN(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function PN(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"events",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}var _5=(t,e,r)=>s=>{let o=t(s).properties?.authSchemes;if(!o)return e(s);let a=[];for(let c of o){let{name:u,properties:l={},...d}=c,m=u.toLowerCase();u!==m&&console.warn(`HttpAuthScheme has been normalized with lowercasing: \`${u}\` to \`${m}\``);let g;if(m==="sigv4a"){g="aws.auth#sigv4a";let x=o.find(T=>{let O=T.name.toLowerCase();return O!=="sigv4a"&&O.startsWith("sigv4")});if(h5.SignatureV4MultiRegion.sigv4aDependency()==="none"&&x)continue}else if(m.startsWith("sigv4"))g="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in \`@smithy.rules#endpointRuleSet\`: \`${m}\``);let E=r[g];if(!E)throw new Error(`Could not find HttpAuthOption create function for \`${g}\``);let w=E(s);w.schemeId=g,w.signingProperties={...w.signingProperties||{},...d,...l},a.push(w)}return a},S5=t=>{let e=[];switch(t.operation){default:e.push(xN(t)),e.push(PN(t))}return e};Hs.defaultEventBridgeHttpAuthSchemeProvider=_5(g5.defaultEndpointResolver,S5,{"aws.auth#sigv4":xN,"aws.auth#sigv4a":PN});var v5=t=>{let e=(0,TN.resolveAwsSdkSigV4Config)(t),r=(0,TN.resolveAwsSdkSigV4AConfig)(e);return Object.assign(r,{authSchemePreference:(0,ap.normalizeProvider)(t.authSchemePreference??[])})};Hs.resolveHttpAuthSchemeConfig=v5});var IN=_((CIe,w5)=>{w5.exports={name:"@aws-sdk/client-eventbridge",description:"AWS SDK for JavaScript Eventbridge Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-eventbridge","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo eventbridge",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/credential-provider-node":"3.929.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/signature-v4-multi-region":"3.928.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@aws-sdk/signature-v4-crt":"3.928.0","@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-eventbridge",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-eventbridge"}}});var tv=_(Vs=>{"use strict";var b5=(zr(),le(Ts)),R5=Wt(),ON="AWS_ACCESS_KEY_ID",NN="AWS_SECRET_ACCESS_KEY",DN="AWS_SESSION_TOKEN",LN="AWS_CREDENTIAL_EXPIRATION",kN="AWS_CREDENTIAL_SCOPE",MN="AWS_ACCOUNT_ID",A5=t=>async()=>{t?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let e=process.env[ON],r=process.env[NN],n=process.env[DN],s=process.env[LN],i=process.env[kN],o=process.env[MN];if(e&&r){let a={accessKeyId:e,secretAccessKey:r,...n&&{sessionToken:n},...s&&{expiration:new Date(s)},...i&&{credentialScope:i},...o&&{accountId:o}};return b5.setCredentialFeature(a,"CREDENTIALS_ENV_VARS","g"),a}throw new R5.CredentialsProviderError("Unable to find environment variable credentials.",{logger:t?.logger})};Vs.ENV_ACCOUNT_ID=MN;Vs.ENV_CREDENTIAL_SCOPE=kN;Vs.ENV_EXPIRATION=LN;Vs.ENV_KEY=ON;Vs.ENV_SECRET=NN;Vs.ENV_SESSION=DN;Vs.fromEnv=A5});var du=_(Nt=>{"use strict";var yn=Wt(),C5=require("url"),T5=require("buffer"),x5=require("http"),ov=jn(),P5=As();function lu(t){return new Promise((e,r)=>{let n=x5.request({method:"GET",...t,hostname:t.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new yn.ProviderError("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new yn.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new yn.ProviderError("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let o=[];s.on("data",a=>{o.push(a)}),s.on("end",()=>{e(T5.Buffer.concat(o)),n.destroy()})}),n.end()})}var UN=t=>!!t&&typeof t=="object"&&typeof t.AccessKeyId=="string"&&typeof t.SecretAccessKey=="string"&&typeof t.Token=="string"&&typeof t.Expiration=="string",BN=t=>({accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.Token,expiration:new Date(t.Expiration),...t.AccountId&&{accountId:t.AccountId}}),jN=1e3,HN=0,av=({maxRetries:t=HN,timeout:e=jN})=>({maxRetries:t,timeout:e}),nv=(t,e)=>{let r=t();for(let n=0;n<e;n++)r=r.catch(t);return r},cp="AWS_CONTAINER_CREDENTIALS_FULL_URI",up="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",sv="AWS_CONTAINER_AUTHORIZATION_TOKEN",I5=(t={})=>{let{timeout:e,maxRetries:r}=av(t);return()=>nv(async()=>{let n=await k5({logger:t.logger}),s=JSON.parse(await O5(e,n));if(!UN(s))throw new yn.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:t.logger});return BN(s)},r)},O5=async(t,e)=>(process.env[sv]&&(e.headers={...e.headers,Authorization:process.env[sv]}),(await lu({...e,timeout:t})).toString()),N5="169.254.170.2",D5={localhost:!0,"127.0.0.1":!0},L5={"http:":!0,"https:":!0},k5=async({logger:t})=>{if(process.env[up])return{hostname:N5,path:process.env[up]};if(process.env[cp]){let e=C5.parse(process.env[cp]);if(!e.hostname||!(e.hostname in D5))throw new yn.CredentialsProviderError(`${e.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:t});if(!e.protocol||!(e.protocol in L5))throw new yn.CredentialsProviderError(`${e.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:t});return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new yn.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${up} or ${cp} environment variable is set`,{tryNextLink:!1,logger:t})},iv=class t extends yn.CredentialsProviderError{constructor(r,n=!0){super(r,n);f(this,"tryNextLink");f(this,"name","InstanceMetadataV1FallbackError");this.tryNextLink=n,Object.setPrototypeOf(this,t.prototype)}};Nt.Endpoint=void 0;(function(t){t.IPv4="http://169.254.169.254",t.IPv6="http://[fd00:ec2::254]"})(Nt.Endpoint||(Nt.Endpoint={}));var M5="AWS_EC2_METADATA_SERVICE_ENDPOINT",q5="ec2_metadata_service_endpoint",$5={environmentVariableSelector:t=>t[M5],configFileSelector:t=>t[q5],default:void 0},ia;(function(t){t.IPv4="IPv4",t.IPv6="IPv6"})(ia||(ia={}));var F5="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",U5="ec2_metadata_service_endpoint_mode",B5={environmentVariableSelector:t=>t[F5],configFileSelector:t=>t[U5],default:ia.IPv4},VN=async()=>P5.parseUrl(await j5()||await H5()),j5=async()=>ov.loadConfig($5)(),H5=async()=>{let t=await ov.loadConfig(B5)();switch(t){case ia.IPv4:return Nt.Endpoint.IPv4;case ia.IPv6:return Nt.Endpoint.IPv6;default:throw new Error(`Unsupported endpoint mode: ${t}. Select from ${Object.values(ia)}`)}},V5=5*60,W5=5*60,z5="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",qN=(t,e)=>{let r=V5+Math.floor(Math.random()*W5),n=new Date(Date.now()+r*1e3);e.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+z5);let s=t.originalExpiration??t.expiration;return{...t,...s?{originalExpiration:s}:{},expiration:n}},G5=(t,e={})=>{let r=e?.logger||console,n;return async()=>{let s;try{s=await t(),s.expiration&&s.expiration.getTime()<Date.now()&&(s=qN(s,r))}catch(i){if(n)r.warn("Credential renew failed: ",i),s=qN(n,r);else throw i}return n=s,s}},WN="/latest/meta-data/iam/security-credentials/",K5="/latest/api/token",rv="AWS_EC2_METADATA_V1_DISABLED",$N="ec2_metadata_v1_disabled",FN="x-aws-ec2-metadata-token",X5=(t={})=>G5(Q5(t),{logger:t.logger}),Q5=(t={})=>{let e=!1,{logger:r,profile:n}=t,{timeout:s,maxRetries:i}=av(t),o=async(a,c)=>{if(e||c.headers?.[FN]==null){let d=!1,m=!1,g=await ov.loadConfig({environmentVariableSelector:E=>{let w=E[rv];if(m=!!w&&w!=="false",w===void 0)throw new yn.CredentialsProviderError(`${rv} not set in env, checking config file next.`,{logger:t.logger});return m},configFileSelector:E=>{let w=E[$N];return d=!!w&&w!=="false",d},default:!1},{profile:n})();if(t.ec2MetadataV1Disabled||g){let E=[];throw t.ec2MetadataV1Disabled&&E.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),d&&E.push(`config file profile (${$N})`),m&&E.push(`process environment variable (${rv})`),new iv(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${E.join(", ")}].`)}}let l=(await nv(async()=>{let d;try{d=await J5(c)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)).trim();return nv(async()=>{let d;try{d=await Z5(l,c,t)}catch(m){throw m.statusCode===401&&(e=!1),m}return d},a)};return async()=>{let a=await VN();if(e)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),o(i,{...a,timeout:s});{let c;try{c=(await Y5({...a,timeout:s})).toString()}catch(u){if(u?.statusCode===400)throw Object.assign(u,{message:"EC2 Metadata token request returned error"});return(u.message==="TimeoutError"||[403,404,405].includes(u.statusCode))&&(e=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),o(i,{...a,timeout:s})}return o(i,{...a,headers:{[FN]:c},timeout:s})}}},Y5=async t=>lu({...t,path:K5,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),J5=async t=>(await lu({...t,path:WN})).toString(),Z5=async(t,e,r)=>{let n=JSON.parse((await lu({...e,path:WN+t})).toString());if(!UN(n))throw new yn.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return BN(n)};Nt.DEFAULT_MAX_RETRIES=HN;Nt.DEFAULT_TIMEOUT=jN;Nt.ENV_CMDS_AUTH_TOKEN=sv;Nt.ENV_CMDS_FULL_URI=cp;Nt.ENV_CMDS_RELATIVE_URI=up;Nt.fromContainerMetadata=I5;Nt.fromInstanceMetadata=X5;Nt.getInstanceMetadataEndpoint=VN;Nt.httpRequest=lu;Nt.providerConfigFromInit=av});var zN=_(lp=>{"use strict";Object.defineProperty(lp,"__esModule",{value:!0});lp.checkUrl=void 0;var e9=Wt(),t9="169.254.170.2",r9="169.254.170.23",n9="[fd00:ec2::23]",s9=(t,e)=>{if(t.protocol!=="https:"&&!(t.hostname===t9||t.hostname===r9||t.hostname===n9)){if(t.hostname.includes("[")){if(t.hostname==="[::1]"||t.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(t.hostname==="localhost")return;let r=t.hostname.split("."),n=s=>{let i=parseInt(s,10);return 0<=i&&i<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new e9.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:e})}};lp.checkUrl=s9});var GN=_(dp=>{"use strict";Object.defineProperty(dp,"__esModule",{value:!0});dp.createGetRequest=c9;dp.getCredentials=u9;var cv=Wt(),i9=Oe(),o9=fe(),a9=Dc();function c9(t){return new i9.HttpRequest({protocol:t.protocol,hostname:t.hostname,port:Number(t.port),path:t.pathname,query:Array.from(t.searchParams.entries()).reduce((e,[r,n])=>(e[r]=n,e),{}),fragment:t.hash})}async function u9(t,e){let n=await(0,a9.sdkStreamMixin)(t.body).transformToString();if(t.statusCode===200){let s=JSON.parse(n);if(typeof s.AccessKeyId!="string"||typeof s.SecretAccessKey!="string"||typeof s.Token!="string"||typeof s.Expiration!="string")throw new cv.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:e});return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.Token,expiration:(0,o9.parseRfc3339DateTime)(s.Expiration)}}if(t.statusCode>=400&&t.statusCode<500){let s={};try{s=JSON.parse(n)}catch{}throw Object.assign(new cv.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e}),{Code:s.Code,Message:s.Message})}throw new cv.CredentialsProviderError(`Server responded with status: ${t.statusCode}`,{logger:e})}});var KN=_(fp=>{"use strict";Object.defineProperty(fp,"__esModule",{value:!0});fp.retryWrapper=void 0;var l9=(t,e,r)=>async()=>{for(let n=0;n<e;++n)try{return await t()}catch{await new Promise(i=>setTimeout(i,r))}return await t()};fp.retryWrapper=l9});var YN=_(pp=>{"use strict";Object.defineProperty(pp,"__esModule",{value:!0});pp.fromHttp=void 0;var d9=(Hc(),le(jc)),f9=(zr(),le(Ts)),p9=yi(),XN=Wt(),h9=d9.__importDefault(require("fs/promises")),m9=zN(),QN=GN(),g9=KN(),y9="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",E9="http://169.254.170.2",_9="AWS_CONTAINER_CREDENTIALS_FULL_URI",S9="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",v9="AWS_CONTAINER_AUTHORIZATION_TOKEN",w9=(t={})=>{t.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let e,r=t.awsContainerCredentialsRelativeUri??process.env[y9],n=t.awsContainerCredentialsFullUri??process.env[_9],s=t.awsContainerAuthorizationToken??process.env[v9],i=t.awsContainerAuthorizationTokenFile??process.env[S9],o=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?.warn?console.warn:t.logger.warn.bind(t.logger);if(r&&n&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),o("awsContainerCredentialsFullUri will take precedence.")),s&&i&&(o("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),o("awsContainerAuthorizationToken will take precedence.")),n)e=n;else if(r)e=`${E9}${r}`;else throw new XN.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:t.logger});let a=new URL(e);(0,m9.checkUrl)(a,t.logger);let c=p9.NodeHttpHandler.create({requestTimeout:t.timeout??1e3,connectionTimeout:t.timeout??1e3});return(0,g9.retryWrapper)(async()=>{let u=(0,QN.createGetRequest)(a);s?u.headers.Authorization=s:i&&(u.headers.Authorization=(await h9.default.readFile(i)).toString());try{let l=await c.handle(u);return(0,QN.getCredentials)(l.response).then(d=>(0,f9.setCredentialFeature)(d,"CREDENTIALS_HTTP","z"))}catch(l){throw new XN.CredentialsProviderError(String(l),{logger:t.logger})}},t.maxRetries??3,t.timeout??1e3)};pp.fromHttp=w9});var uv=_(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.fromHttp=void 0;var b9=YN();Object.defineProperty(hp,"fromHttp",{enumerable:!0,get:function(){return b9.fromHttp}})});function R9(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function A9(t){return{schemeId:"smithy.api#noAuth"}}var fu,JN,ZN,eD,lv=b(()=>{Ot();fu=C(Bt()),JN=async(t,e,r)=>({operation:(0,fu.getSmithyContext)(e).operation,region:await(0,fu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});ZN=t=>{let e=[];switch(t.operation){case"CreateToken":{e.push(A9(t));break}default:e.push(R9(t))}return e},eD=t=>{let e=Ii(t);return Object.assign(e,{authSchemePreference:(0,fu.normalizeProvider)(t.authSchemePreference??[])})}});var tD,rD,dv=b(()=>{tD=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),rD={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var mp,fv=b(()=>{mp={name:"@aws-sdk/nested-clients",version:"3.929.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},sideEffects:!1,author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var pu=_(Di=>{"use strict";var nD=require("os"),pv=require("process"),T9=Jo(),sD={isCrtAvailable:!1},x9=()=>sD.isCrtAvailable?["md/crt-avail"]:null,iD=({serviceId:t,clientVersion:e})=>async r=>{let n=[["aws-sdk-js",e],["ua","2.1"],[`os/${nD.platform()}`,nD.release()],["lang/js"],["md/nodejs",`${pv.versions.node}`]],s=x9();s&&n.push(s),t&&n.push([`api/${t}`,e]),pv.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${pv.env.AWS_EXECUTION_ENV}`]);let i=await r?.userAgentAppId?.();return i?[...n,[`app/${i}`]]:[...n]},P9=iD,oD="AWS_SDK_UA_APP_ID",aD="sdk_ua_app_id",I9="sdk-ua-app-id",O9={environmentVariableSelector:t=>t[oD],configFileSelector:t=>t[aD]??t[I9],default:T9.DEFAULT_UA_APP_ID};Di.NODE_APP_ID_CONFIG_OPTIONS=O9;Di.UA_APP_ID_ENV_NAME=oD;Di.UA_APP_ID_INI_NAME=aD;Di.createDefaultUserAgentProvider=iD;Di.crtAvailability=sD;Di.defaultUserAgent=P9});var hu=_(lD=>{"use strict";var hv=Ao(),N9=St(),D9=require("buffer"),cD=require("crypto"),mv=class{constructor(e,r){f(this,"algorithmIdentifier");f(this,"secret");f(this,"hash");this.algorithmIdentifier=e,this.secret=r,this.reset()}update(e,r){this.hash.update(N9.toUint8Array(uD(e,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?cD.createHmac(this.algorithmIdentifier,uD(this.secret)):cD.createHash(this.algorithmIdentifier)}};function uD(t,e){return D9.Buffer.isBuffer(t)?t:typeof t=="string"?hv.fromString(t,e):ArrayBuffer.isView(t)?hv.fromArrayBuffer(t.buffer,t.byteOffset,t.byteLength):hv.fromArrayBuffer(t)}lD.Hash=mv});var mu=_(dD=>{"use strict";var gv=require("fs"),L9=t=>{if(!t)return 0;if(typeof t=="string")return Buffer.byteLength(t);if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size;if(typeof t.start=="number"&&typeof t.end=="number")return t.end+1-t.start;if(t instanceof gv.ReadStream){if(t.path!=null)return gv.lstatSync(t.path).size;if(typeof t.fd=="number")return gv.fstatSync(t.fd).size}throw new Error(`Body Length computation failed for ${t}`)};dD.calculateBodyLength=L9});var vD,Rr,Ar,ca,fD,gu,oa,aa,Gn,yv,Ev,pD,hD,mD,wD,bD,br,gD,RD,yD,ED,_D,SD,k9,AD,CD=b(()=>{vD="required",Rr="fn",Ar="argv",ca="ref",fD="isSet",gu="booleanEquals",oa="error",aa="endpoint",Gn="tree",yv="PartitionResult",Ev="getAttr",pD={[vD]:!1,type:"string"},hD={[vD]:!0,default:!1,type:"boolean"},mD={[ca]:"Endpoint"},wD={[Rr]:gu,[Ar]:[{[ca]:"UseFIPS"},!0]},bD={[Rr]:gu,[Ar]:[{[ca]:"UseDualStack"},!0]},br={},gD={[Rr]:Ev,[Ar]:[{[ca]:yv},"supportsFIPS"]},RD={[ca]:yv},yD={[Rr]:gu,[Ar]:[!0,{[Rr]:Ev,[Ar]:[RD,"supportsDualStack"]}]},ED=[wD],_D=[bD],SD=[{[ca]:"Region"}],k9={version:"1.0",parameters:{Region:pD,UseDualStack:hD,UseFIPS:hD,Endpoint:pD},rules:[{conditions:[{[Rr]:fD,[Ar]:[mD]}],rules:[{conditions:ED,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:oa},{conditions:_D,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:oa},{endpoint:{url:mD,properties:br,headers:br},type:aa}],type:Gn},{conditions:[{[Rr]:fD,[Ar]:SD}],rules:[{conditions:[{[Rr]:"aws.partition",[Ar]:SD,assign:yv}],rules:[{conditions:[wD,bD],rules:[{conditions:[{[Rr]:gu,[Ar]:[!0,gD]},yD],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:aa}],type:Gn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:oa}],type:Gn},{conditions:ED,rules:[{conditions:[{[Rr]:gu,[Ar]:[gD,!0]}],rules:[{conditions:[{[Rr]:"stringEquals",[Ar]:[{[Rr]:Ev,[Ar]:[RD,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:br,headers:br},type:aa},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:aa}],type:Gn},{error:"FIPS is enabled but this partition does not support FIPS",type:oa}],type:Gn},{conditions:_D,rules:[{conditions:[yD],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:br,headers:br},type:aa}],type:Gn},{error:"DualStack is enabled but this partition does not support DualStack",type:oa}],type:Gn},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:br,headers:br},type:aa}],type:Gn}],type:Gn},{error:"Invalid Configuration: Missing Region",type:oa}]},AD=k9});var TD,ua,M9,xD,PD=b(()=>{TD=C(Lo()),ua=C(Ti());CD();M9=new ua.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),xD=(t,e={})=>M9.get(t,()=>(0,ua.resolveEndpoint)(AD,{endpointParams:t,logger:e.logger}));ua.customEndpointFunctions.aws=TD.awsEndpointFunctions});var ID,OD,gp,yp,ND,DD=b(()=>{Ot();ru();sr();ID=C(fe()),OD=C(As()),gp=C(vt()),yp=C(St());lv();PD();ND=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??gp.fromBase64,base64Encoder:t?.base64Encoder??gp.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??xD,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??ZN,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ir},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ln}],logger:t?.logger??new ID.NoOpLogger,protocol:t?.protocol??new zo({defaultNamespace:"com.amazonaws.ssooidc"}),serviceId:t?.serviceId??"SSO OIDC",urlParser:t?.urlParser??OD.parseUrl,utf8Decoder:t?.utf8Decoder??yp.fromUtf8,utf8Encoder:t?.utf8Encoder??yp.toUtf8})});var yu=_(qD=>{"use strict";var q9=wr(),LD=jn(),$9=Wt(),F9="AWS_EXECUTION_ENV",kD="AWS_REGION",MD="AWS_DEFAULT_REGION",U9="AWS_EC2_METADATA_DISABLED",B9=["in-region","cross-region","mobile","standard","legacy"],j9="/latest/meta-data/placement/region",H9="AWS_DEFAULTS_MODE",V9="defaults_mode",W9={environmentVariableSelector:t=>t[H9],configFileSelector:t=>t[V9],default:"legacy"},z9=({region:t=LD.loadConfig(q9.NODE_REGION_CONFIG_OPTIONS),defaultsMode:e=LD.loadConfig(W9)}={})=>$9.memoize(async()=>{let r=typeof e=="function"?await e():e;switch(r?.toLowerCase()){case"auto":return G9(t);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${B9.join(", ")}, got ${r}`)}}),G9=async t=>{if(t){let e=typeof t=="function"?await t():t,r=await K9();return r?e===r?"in-region":"cross-region":"standard"}return"standard"},K9=async()=>{if(process.env[F9]&&(process.env[kD]||process.env[MD]))return process.env[kD]??process.env[MD];if(!process.env[U9])try{let{getInstanceMetadataEndpoint:t,httpRequest:e}=await Promise.resolve().then(()=>C(du())),r=await t();return(await e({...r,path:j9})).toString()}catch{}};qD.resolveDefaultsModeConfig=z9});var Ep,zs,$D,_p,Ws,Sp,FD,UD,BD,jD,HD,VD,WD=b(()=>{fv();Ot();Ep=C(pu()),zs=C(wr()),$D=C(hu()),_p=C(Wn()),Ws=C(jn()),Sp=C(yi()),FD=C(mu()),UD=C(ta());DD();BD=C(fe()),jD=C(yu()),HD=C(fe()),VD=t=>{(0,HD.emitWarningIfUnsupportedVersion)(process.version);let e=(0,jD.resolveDefaultsModeConfig)(t),r=()=>e().then(BD.loadConfigsForDefaultMode),n=ND(t);ko(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Ws.loadConfig)($o,s),bodyLengthChecker:t?.bodyLengthChecker??FD.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,Ep.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:mp.version}),maxAttempts:t?.maxAttempts??(0,Ws.loadConfig)(_p.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Ws.loadConfig)(zs.NODE_REGION_CONFIG_OPTIONS,{...zs.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:Sp.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Ws.loadConfig)({..._p.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||UD.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??$D.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??Sp.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Ws.loadConfig)(zs.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Ws.loadConfig)(zs.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Ws.loadConfig)(Ep.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var GD=_(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.warning=void 0;la.stsRegionDefaultResolver=Q9;var zD=wr(),X9=jn();function Q9(t={}){return(0,X9.loadConfig)({...zD.NODE_REGION_CONFIG_OPTIONS,async default(){return la.warning.silence||console.warn("@aws-sdk - WARN - default STS region of us-east-1 used. See @aws-sdk/credential-providers README and set a region explicitly."),"us-east-1"}},{...zD.NODE_REGION_CONFIG_FILE_OPTIONS,...t})}la.warning={silence:!1}});var da=_(En=>{"use strict";var Eu=wr(),KD=GD(),Y9=t=>({setRegion(e){t.region=e},region(){return t.region}}),J9=t=>({region:t.region()});Object.defineProperty(En,"NODE_REGION_CONFIG_FILE_OPTIONS",{enumerable:!0,get:function(){return Eu.NODE_REGION_CONFIG_FILE_OPTIONS}});Object.defineProperty(En,"NODE_REGION_CONFIG_OPTIONS",{enumerable:!0,get:function(){return Eu.NODE_REGION_CONFIG_OPTIONS}});Object.defineProperty(En,"REGION_ENV_NAME",{enumerable:!0,get:function(){return Eu.REGION_ENV_NAME}});Object.defineProperty(En,"REGION_INI_NAME",{enumerable:!0,get:function(){return Eu.REGION_INI_NAME}});Object.defineProperty(En,"resolveRegionConfig",{enumerable:!0,get:function(){return Eu.resolveRegionConfig}});En.getAwsRegionExtensionConfiguration=Y9;En.resolveAwsRegionExtensionConfiguration=J9;Object.keys(KD).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(En,t)&&Object.defineProperty(En,t,{enumerable:!0,get:function(){return KD[t]}})})});var XD,QD,YD=b(()=>{XD=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},QD=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var vp,wp,bp,JD,ZD=b(()=>{vp=C(da()),wp=C(Oe()),bp=C(fe());YD();JD=(t,e)=>{let r=Object.assign((0,vp.getAwsRegionExtensionConfiguration)(t),(0,bp.getDefaultExtensionConfiguration)(t),(0,wp.getHttpHandlerExtensionConfiguration)(t),XD(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,vp.resolveAwsRegionExtensionConfiguration)(r),(0,bp.resolveDefaultRuntimeConfig)(r),(0,wp.resolveHttpHandlerRuntimeConfig)(r),QD(r))}});var Rp,eL,tL,Ap,rL,nL,sL,Cp,_v,_u,Sv=b(()=>{Rp=C(bc()),eL=C(Rc()),tL=C(Cc()),Ap=C(Jo()),rL=C(wr());sr();$e();nL=C(nu()),sL=C(Vn()),Cp=C(Wn()),_v=C(fe());lv();dv();WD();ZD();_u=class extends _v.Client{constructor(...[r]){let n=VD(r||{});super(n);f(this,"config");this.initConfig=n;let s=tD(n),i=(0,Ap.resolveUserAgentConfig)(s),o=(0,Cp.resolveRetryConfig)(i),a=(0,rL.resolveRegionConfig)(o),c=(0,Rp.resolveHostHeaderConfig)(a),u=(0,sL.resolveEndpointConfig)(c),l=eD(u),d=JD(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(uE(this.config)),this.middlewareStack.use((0,Ap.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,Cp.getRetryPlugin)(this.config)),this.middlewareStack.use((0,nL.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Rp.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,eL.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,tL.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(xc(this.config,{httpAuthSchemeParametersProvider:JN,identityProviderConfigProvider:async m=>new Ri({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Ic(this.config))}destroy(){super.destroy()}}});var iL,yt,Tp=b(()=>{iL=C(fe()),yt=class t extends iL.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var Z9,Su,vu,wu,bu,Ru,Au,eX,Cu,Tu,xu,Pu,Iu,oL=b(()=>{Tp();Z9={KMS_ACCESS_DENIED:"KMS_AccessDeniedException"},Su=class t extends yt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},vu=class t extends yt{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});f(this,"name","AuthorizationPendingException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},wu=class t extends yt{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},bu=class t extends yt{constructor(r){super({name:"InternalServerException",$fault:"server",...r});f(this,"name","InternalServerException");f(this,"$fault","server");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Ru=class t extends yt{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});f(this,"name","InvalidClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Au=class t extends yt{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});f(this,"name","InvalidGrantException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},eX={KMS_DISABLED_KEY:"KMS_DisabledException",KMS_INVALID_KEY_USAGE:"KMS_InvalidKeyUsageException",KMS_INVALID_STATE:"KMS_InvalidStateException",KMS_KEY_NOT_FOUND:"KMS_NotFoundException"},Cu=class t extends yt{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");f(this,"error");f(this,"reason");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.reason=r.reason,this.error_description=r.error_description}},Tu=class t extends yt{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});f(this,"name","InvalidScopeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},xu=class t extends yt{constructor(r){super({name:"SlowDownException",$fault:"client",...r});f(this,"name","SlowDownException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Pu=class t extends yt{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});f(this,"name","UnauthorizedClientException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}},Iu=class t extends yt{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});f(this,"name","UnsupportedGrantTypeException");f(this,"$fault","client");f(this,"error");f(this,"error_description");Object.setPrototypeOf(this,t.prototype),this.error=r.error,this.error_description=r.error_description}}});var vv=b(()=>{oL()});var tX,rX,nX,sX,iX,oX,aX,cX,uX,lX,dX,fX,pX,hX,mX,gX,yX,EX,_X,SX,_n,vX,wX,bX,RX,AX,tt,CX,Kr,TX,xX,Xr,PX,aL,cL,IX,OX,NX,uL,DX,Ce,LX,kX,MX,qX,lL,$X,FX,UX,BX,jX,HX,VX,WX,zX,GX,KX,XX,QX,YX,dL,fL=b(()=>{$e();vv();Tp();tX="AccessDeniedException",rX="AuthorizationPendingException",nX="AccessToken",sX="ClientSecret",iX="CreateToken",oX="CreateTokenRequest",aX="CreateTokenResponse",cX="CodeVerifier",uX="ExpiredTokenException",lX="InvalidClientException",dX="InvalidGrantException",fX="InvalidRequestException",pX="InternalServerException",hX="InvalidScopeException",mX="IdToken",gX="RefreshToken",yX="SlowDownException",EX="UnauthorizedClientException",_X="UnsupportedGrantTypeException",SX="accessToken",_n="client",vX="clientId",wX="clientSecret",bX="codeVerifier",RX="code",AX="deviceCode",tt="error",CX="expiresIn",Kr="error_description",TX="grantType",xX="http",Xr="httpError",PX="idToken",aL="reason",cL="refreshToken",IX="redirectUri",OX="scope",NX="server",uL="smithy.ts.sdk.synthetic.com.amazonaws.ssooidc",DX="tokenType",Ce="com.amazonaws.ssooidc",LX=[0,Ce,nX,8,0],kX=[0,Ce,sX,8,0],MX=[0,Ce,cX,8,0],qX=[0,Ce,mX,8,0],lL=[0,Ce,gX,8,0],$X=[-3,Ce,tX,{[tt]:_n,[Xr]:400},[tt,aL,Kr],[0,0,0]];_e.for(Ce).registerError($X,Su);FX=[-3,Ce,rX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(FX,vu);UX=[3,Ce,oX,0,[vX,wX,TX,AX,RX,cL,OX,IX,bX],[0,[()=>kX,0],0,0,0,[()=>lL,0],64,0,[()=>MX,0]]],BX=[3,Ce,aX,0,[SX,DX,CX,cL,PX],[[()=>LX,0],0,1,[()=>lL,0],[()=>qX,0]]],jX=[-3,Ce,uX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(jX,wu);HX=[-3,Ce,pX,{[tt]:NX,[Xr]:500},[tt,Kr],[0,0]];_e.for(Ce).registerError(HX,bu);VX=[-3,Ce,lX,{[tt]:_n,[Xr]:401},[tt,Kr],[0,0]];_e.for(Ce).registerError(VX,Ru);WX=[-3,Ce,dX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(WX,Au);zX=[-3,Ce,fX,{[tt]:_n,[Xr]:400},[tt,aL,Kr],[0,0,0]];_e.for(Ce).registerError(zX,Cu);GX=[-3,Ce,hX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(GX,Tu);KX=[-3,Ce,yX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(KX,xu);XX=[-3,Ce,EX,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(XX,Pu);QX=[-3,Ce,_X,{[tt]:_n,[Xr]:400},[tt,Kr],[0,0]];_e.for(Ce).registerError(QX,Iu);YX=[-3,uL,"SSOOIDCServiceException",0,[],[]];_e.for(uL).registerError(YX,yt);dL=[9,Ce,iX,{[xX]:["POST","/token",200]},()=>UX,()=>BX]});var pL,wv,Ou,bv=b(()=>{pL=C(Vn()),wv=C(fe());dv();fL();Ou=class extends wv.Command.classBuilder().ep(rD).m(function(e,r,n,s){return[(0,pL.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").sc(dL).build(){}});var hL,JX,xp,mL=b(()=>{hL=C(fe());bv();Sv();JX={CreateTokenCommand:Ou},xp=class extends _u{};(0,hL.createAggregatedClient)(JX,xp)});var gL=b(()=>{bv()});var Rv={};Tt(Rv,{$Command:()=>wv.Command,AccessDeniedException:()=>Su,AccessDeniedExceptionReason:()=>Z9,AuthorizationPendingException:()=>vu,CreateTokenCommand:()=>Ou,ExpiredTokenException:()=>wu,InternalServerException:()=>bu,InvalidClientException:()=>Ru,InvalidGrantException:()=>Au,InvalidRequestException:()=>Cu,InvalidRequestExceptionReason:()=>eX,InvalidScopeException:()=>Tu,SSOOIDC:()=>xp,SSOOIDCClient:()=>_u,SSOOIDCServiceException:()=>yt,SlowDownException:()=>xu,UnauthorizedClientException:()=>Pu,UnsupportedGrantTypeException:()=>Iu,__Client:()=>_v.Client});var Av=b(()=>{Sv();mL();gL();vv();Tp()});var SL=_(Du=>{"use strict";var ZX=(zr(),le(Ts)),eQ=(C_(),le(NP)),gr=Wt(),Nu=Bn(),tQ=require("fs"),rQ=({logger:t,signingName:e}={})=>async()=>{if(t?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!e)throw new gr.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:t});let r=eQ.getBearerTokenEnvKey(e);if(!(r in process.env))throw new gr.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:t});let n={token:process.env[r]};return ZX.setTokenFeature(n,"BEARER_SERVICE_ENV_VARS","3"),n},nQ=5*60*1e3,Cv="To refresh this SSO session run 'aws sso login' with the corresponding profile.",sQ=async(t,e={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>(Av(),Rv)),n=i=>e.clientConfig?.[i]??e.parentClientConfig?.[i];return new r(Object.assign({},e.clientConfig??{},{region:t??e.clientConfig?.region,logger:n("logger"),userAgentAppId:n("userAgentAppId")}))},iQ=async(t,e,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>(Av(),Rv));return(await sQ(e,r)).send(new n({clientId:t.clientId,clientSecret:t.clientSecret,refreshToken:t.refreshToken,grantType:"refresh_token"}))},yL=t=>{if(t.expiration&&t.expiration.getTime()<Date.now())throw new gr.TokenProviderError(`Token is expired. ${Cv}`,!1)},Li=(t,e,r=!1)=>{if(typeof e>"u")throw new gr.TokenProviderError(`Value not present for '${t}' in SSO Token${r?". Cannot refresh":""}. ${Cv}`,!1)},{writeFile:oQ}=tQ.promises,aQ=(t,e)=>{let r=Nu.getSSOTokenFilepath(t),n=JSON.stringify(e,null,2);return oQ(r,n)},EL=new Date(0),_L=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await Nu.parseKnownFiles(r),s=Nu.getProfileName({profile:r.profile??e?.profile}),i=n[s];if(i){if(!i.sso_session)throw new gr.TokenProviderError(`Profile '${s}' is missing required property 'sso_session'.`)}else throw new gr.TokenProviderError(`Profile '${s}' could not be found in shared credentials file.`,!1);let o=i.sso_session,c=(await Nu.loadSsoSessionData(r))[o];if(!c)throw new gr.TokenProviderError(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let E of["sso_start_url","sso_region"])if(!c[E])throw new gr.TokenProviderError(`Sso session '${o}' is missing required property '${E}'.`,!1);c.sso_start_url;let u=c.sso_region,l;try{l=await Nu.getSSOTokenFromFile(o)}catch{throw new gr.TokenProviderError(`The SSO session token associated with profile=${s} was not found or is invalid. ${Cv}`,!1)}Li("accessToken",l.accessToken),Li("expiresAt",l.expiresAt);let{accessToken:d,expiresAt:m}=l,g={token:d,expiration:new Date(m)};if(g.expiration.getTime()-Date.now()>nQ)return g;if(Date.now()-EL.getTime()<30*1e3)return yL(g),g;Li("clientId",l.clientId,!0),Li("clientSecret",l.clientSecret,!0),Li("refreshToken",l.refreshToken,!0);try{EL.setTime(Date.now());let E=await iQ(l,u,r);Li("accessToken",E.accessToken),Li("expiresIn",E.expiresIn);let w=new Date(Date.now()+E.expiresIn*1e3);try{await aQ(o,{...l,accessToken:E.accessToken,expiresAt:w.toISOString(),refreshToken:E.refreshToken})}catch{}return{token:E.accessToken,expiration:w}}catch{return yL(g),g}},cQ=({token:t,logger:e})=>async()=>{if(e?.debug("@aws-sdk/token-providers - fromStatic"),!t||!t.token)throw new gr.TokenProviderError("Please pass a valid token to fromStatic",!1);return t},uQ=(t={})=>gr.memoize(gr.chain(_L(t),async()=>{throw new gr.TokenProviderError("Could not load token from any providers",!1)}),e=>e.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,e=>e.expiration!==void 0);Du.fromEnvSigningName=rQ;Du.fromSso=_L;Du.fromStatic=cQ;Du.nodeProvider=uQ});var xv=_(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.resolveHttpAuthSchemeConfig=Gs.defaultSSOHttpAuthSchemeProvider=Gs.defaultSSOHttpAuthSchemeParametersProvider=void 0;var lQ=(Ot(),le(Un)),Tv=Bt(),dQ=async(t,e,r)=>({operation:(0,Tv.getSmithyContext)(e).operation,region:await(0,Tv.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Gs.defaultSSOHttpAuthSchemeParametersProvider=dQ;function fQ(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function Pp(t){return{schemeId:"smithy.api#noAuth"}}var pQ=t=>{let e=[];switch(t.operation){case"GetRoleCredentials":{e.push(Pp(t));break}case"ListAccountRoles":{e.push(Pp(t));break}case"ListAccounts":{e.push(Pp(t));break}case"Logout":{e.push(Pp(t));break}default:e.push(fQ(t))}return e};Gs.defaultSSOHttpAuthSchemeProvider=pQ;var hQ=t=>{let e=(0,lQ.resolveAwsSdkSigV4Config)(t);return Object.assign(e,{authSchemePreference:(0,Tv.normalizeProvider)(t.authSchemePreference??[])})};Gs.resolveHttpAuthSchemeConfig=hQ});var vL=_((BOe,mQ)=>{mQ.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.929.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.928.0","@aws-sdk/middleware-host-header":"3.922.0","@aws-sdk/middleware-logger":"3.922.0","@aws-sdk/middleware-recursion-detection":"3.922.0","@aws-sdk/middleware-user-agent":"3.928.0","@aws-sdk/region-config-resolver":"3.925.0","@aws-sdk/types":"3.922.0","@aws-sdk/util-endpoints":"3.922.0","@aws-sdk/util-user-agent-browser":"3.922.0","@aws-sdk/util-user-agent-node":"3.928.0","@smithy/config-resolver":"^4.4.2","@smithy/core":"^3.17.2","@smithy/fetch-http-handler":"^5.3.5","@smithy/hash-node":"^4.2.4","@smithy/invalid-dependency":"^4.2.4","@smithy/middleware-content-length":"^4.2.4","@smithy/middleware-endpoint":"^4.3.6","@smithy/middleware-retry":"^4.4.6","@smithy/middleware-serde":"^4.2.4","@smithy/middleware-stack":"^4.2.4","@smithy/node-config-provider":"^4.3.4","@smithy/node-http-handler":"^4.4.4","@smithy/protocol-http":"^5.3.4","@smithy/smithy-client":"^4.9.2","@smithy/types":"^4.8.1","@smithy/url-parser":"^4.2.4","@smithy/util-base64":"^4.3.0","@smithy/util-body-length-browser":"^4.2.0","@smithy/util-body-length-node":"^4.2.1","@smithy/util-defaults-mode-browser":"^4.3.5","@smithy/util-defaults-mode-node":"^4.2.8","@smithy/util-endpoints":"^3.2.4","@smithy/util-middleware":"^4.2.4","@smithy/util-retry":"^4.2.4","@smithy/util-utf8":"^4.2.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var ML=_(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.ruleSet=void 0;var NL="required",Tr="fn",xr="argv",ha="ref",wL=!0,bL="isSet",Lu="booleanEquals",fa="error",pa="endpoint",Kn="tree",Pv="PartitionResult",Iv="getAttr",RL={[NL]:!1,type:"string"},AL={[NL]:!0,default:!1,type:"boolean"},CL={[ha]:"Endpoint"},DL={[Tr]:Lu,[xr]:[{[ha]:"UseFIPS"},!0]},LL={[Tr]:Lu,[xr]:[{[ha]:"UseDualStack"},!0]},Cr={},TL={[Tr]:Iv,[xr]:[{[ha]:Pv},"supportsFIPS"]},kL={[ha]:Pv},xL={[Tr]:Lu,[xr]:[!0,{[Tr]:Iv,[xr]:[kL,"supportsDualStack"]}]},PL=[DL],IL=[LL],OL=[{[ha]:"Region"}],gQ={version:"1.0",parameters:{Region:RL,UseDualStack:AL,UseFIPS:AL,Endpoint:RL},rules:[{conditions:[{[Tr]:bL,[xr]:[CL]}],rules:[{conditions:PL,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:fa},{conditions:IL,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:fa},{endpoint:{url:CL,properties:Cr,headers:Cr},type:pa}],type:Kn},{conditions:[{[Tr]:bL,[xr]:OL}],rules:[{conditions:[{[Tr]:"aws.partition",[xr]:OL,assign:Pv}],rules:[{conditions:[DL,LL],rules:[{conditions:[{[Tr]:Lu,[xr]:[wL,TL]},xL],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Cr,headers:Cr},type:pa}],type:Kn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:fa}],type:Kn},{conditions:PL,rules:[{conditions:[{[Tr]:Lu,[xr]:[TL,wL]}],rules:[{conditions:[{[Tr]:"stringEquals",[xr]:[{[Tr]:Iv,[xr]:[kL,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Cr,headers:Cr},type:pa},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Cr,headers:Cr},type:pa}],type:Kn},{error:"FIPS is enabled but this partition does not support FIPS",type:fa}],type:Kn},{conditions:IL,rules:[{conditions:[xL],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Cr,headers:Cr},type:pa}],type:Kn},{error:"DualStack is enabled but this partition does not support DualStack",type:fa}],type:Kn},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Cr,headers:Cr},type:pa}],type:Kn}],type:Kn},{error:"Invalid Configuration: Missing Region",type:fa}]};Ip.ruleSet=gQ});var qL=_(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.defaultEndpointResolver=void 0;var yQ=Lo(),Ov=Ti(),EQ=ML(),_Q=new Ov.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),SQ=(t,e={})=>_Q.get(t,()=>(0,Ov.resolveEndpoint)(EQ.ruleSet,{endpointParams:t,logger:e.logger}));Op.defaultEndpointResolver=SQ;Ov.customEndpointFunctions.aws=yQ.awsEndpointFunctions});var UL=_(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.getRuntimeConfig=void 0;var vQ=(Ot(),le(Un)),wQ=(ru(),le(lS)),bQ=(sr(),le(Ai)),RQ=fe(),AQ=As(),$L=vt(),FL=St(),CQ=xv(),TQ=qL(),xQ=t=>({apiVersion:"2019-06-10",base64Decoder:t?.base64Decoder??$L.fromBase64,base64Encoder:t?.base64Encoder??$L.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??TQ.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??CQ.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new vQ.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new bQ.NoAuthSigner}],logger:t?.logger??new RQ.NoOpLogger,protocol:t?.protocol??new wQ.AwsRestJsonProtocol({defaultNamespace:"com.amazonaws.sso"}),serviceId:t?.serviceId??"SSO",urlParser:t?.urlParser??AQ.parseUrl,utf8Decoder:t?.utf8Decoder??FL.fromUtf8,utf8Encoder:t?.utf8Encoder??FL.toUtf8});Np.getRuntimeConfig=xQ});var WL=_(Lp=>{"use strict";Object.defineProperty(Lp,"__esModule",{value:!0});Lp.getRuntimeConfig=void 0;var PQ=(Hc(),le(jc)),IQ=PQ.__importDefault(vL()),BL=(Ot(),le(Un)),jL=pu(),Dp=wr(),OQ=hu(),HL=Wn(),ki=jn(),VL=yi(),NQ=mu(),DQ=ta(),LQ=UL(),kQ=fe(),MQ=yu(),qQ=fe(),$Q=t=>{(0,qQ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,MQ.resolveDefaultsModeConfig)(t),r=()=>e().then(kQ.loadConfigsForDefaultMode),n=(0,LQ.getRuntimeConfig)(t);(0,BL.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,ki.loadConfig)(BL.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??NQ.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,jL.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:IQ.default.version}),maxAttempts:t?.maxAttempts??(0,ki.loadConfig)(HL.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,ki.loadConfig)(Dp.NODE_REGION_CONFIG_OPTIONS,{...Dp.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:VL.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,ki.loadConfig)({...HL.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||DQ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??OQ.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??VL.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,ki.loadConfig)(Dp.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,ki.loadConfig)(Dp.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,ki.loadConfig)(jL.NODE_APP_ID_CONFIG_OPTIONS,s)}};Lp.getRuntimeConfig=$Q});var p1=_(Dt=>{"use strict";var zL=bc(),FQ=Rc(),UQ=Cc(),GL=Jo(),BQ=wr(),ku=(sr(),le(Ai)),ga=($e(),le(Ud)),jQ=nu(),$u=Vn(),KL=Wn(),Qr=fe(),XL=xv(),HQ=WL(),QL=da(),YL=Oe(),VQ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),$p={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},WQ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},zQ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),GQ=(t,e)=>{let r=Object.assign(QL.getAwsRegionExtensionConfiguration(t),Qr.getDefaultExtensionConfiguration(t),YL.getHttpHandlerExtensionConfiguration(t),WQ(t));return e.forEach(n=>n.configure(r)),Object.assign(t,QL.resolveAwsRegionExtensionConfiguration(r),Qr.resolveDefaultRuntimeConfig(r),YL.resolveHttpHandlerRuntimeConfig(r),zQ(r))},ma=class extends Qr.Client{constructor(...[r]){let n=HQ.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=VQ(n),i=GL.resolveUserAgentConfig(s),o=KL.resolveRetryConfig(i),a=BQ.resolveRegionConfig(o),c=zL.resolveHostHeaderConfig(a),u=$u.resolveEndpointConfig(c),l=XL.resolveHttpAuthSchemeConfig(u),d=GQ(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(ga.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(GL.getUserAgentPlugin(this.config)),this.middlewareStack.use(KL.getRetryPlugin(this.config)),this.middlewareStack.use(jQ.getContentLengthPlugin(this.config)),this.middlewareStack.use(zL.getHostHeaderPlugin(this.config)),this.middlewareStack.use(FQ.getLoggerPlugin(this.config)),this.middlewareStack.use(UQ.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(ku.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:XL.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new ku.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(ku.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},ya=class JL extends Qr.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,JL.prototype)}},ZL=class e1 extends ya{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});f(this,"name","InvalidRequestException");f(this,"$fault","client");Object.setPrototypeOf(this,e1.prototype)}},t1=class r1 extends ya{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,r1.prototype)}},n1=class s1 extends ya{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});f(this,"name","TooManyRequestsException");f(this,"$fault","client");Object.setPrototypeOf(this,s1.prototype)}},i1=class o1 extends ya{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});f(this,"name","UnauthorizedException");f(this,"$fault","client");Object.setPrototypeOf(this,o1.prototype)}},KQ="AccountInfo",XQ="AccountListType",QQ="AccessTokenType",YQ="GetRoleCredentials",JQ="GetRoleCredentialsRequest",ZQ="GetRoleCredentialsResponse",eY="InvalidRequestException",tY="Logout",rY="ListAccounts",nY="ListAccountsRequest",sY="ListAccountRolesRequest",iY="ListAccountRolesResponse",oY="ListAccountsResponse",aY="ListAccountRoles",cY="LogoutRequest",uY="RoleCredentials",lY="RoleInfo",dY="RoleListType",fY="ResourceNotFoundException",pY="SecretAccessKeyType",hY="SessionTokenType",mY="TooManyRequestsException",gY="UnauthorizedException",Fp="accountId",yY="accessKeyId",EY="accountList",_Y="accountName",Up="accessToken",a1="account_id",Bp="client",jp="error",SY="emailAddress",vY="expiration",Hp="http",Vp="httpError",Wp="httpHeader",Mi="httpQuery",zp="message",c1="maxResults",u1="max_result",Gp="nextToken",l1="next_token",wY="roleCredentials",bY="roleList",d1="roleName",RY="role_name",f1="smithy.ts.sdk.synthetic.com.amazonaws.sso",AY="secretAccessKey",CY="sessionToken",Kp="x-amz-sso_bearer_token",Me="com.amazonaws.sso",Xp=[0,Me,QQ,8,0],TY=[0,Me,pY,8,0],xY=[0,Me,hY,8,0],PY=[3,Me,KQ,0,[Fp,_Y,SY],[0,0,0]],IY=[3,Me,JQ,0,[d1,Fp,Up],[[0,{[Mi]:RY}],[0,{[Mi]:a1}],[()=>Xp,{[Wp]:Kp}]]],OY=[3,Me,ZQ,0,[wY],[[()=>FY,0]]],NY=[-3,Me,eY,{[jp]:Bp,[Vp]:400},[zp],[0]];ga.TypeRegistry.for(Me).registerError(NY,ZL);var DY=[3,Me,sY,0,[Gp,c1,Up,Fp],[[0,{[Mi]:l1}],[1,{[Mi]:u1}],[()=>Xp,{[Wp]:Kp}],[0,{[Mi]:a1}]]],LY=[3,Me,iY,0,[Gp,bY],[0,()=>zY]],kY=[3,Me,nY,0,[Gp,c1,Up],[[0,{[Mi]:l1}],[1,{[Mi]:u1}],[()=>Xp,{[Wp]:Kp}]]],MY=[3,Me,oY,0,[Gp,EY],[0,()=>WY]],qY=[3,Me,cY,0,[Up],[[()=>Xp,{[Wp]:Kp}]]],$Y=[-3,Me,fY,{[jp]:Bp,[Vp]:404},[zp],[0]];ga.TypeRegistry.for(Me).registerError($Y,t1);var FY=[3,Me,uY,0,[yY,AY,CY,vY],[0,[()=>TY,0],[()=>xY,0],1]],UY=[3,Me,lY,0,[d1,Fp],[0,0]],BY=[-3,Me,mY,{[jp]:Bp,[Vp]:429},[zp],[0]];ga.TypeRegistry.for(Me).registerError(BY,n1);var jY=[-3,Me,gY,{[jp]:Bp,[Vp]:401},[zp],[0]];ga.TypeRegistry.for(Me).registerError(jY,i1);var HY="unit",VY=[-3,f1,"SSOServiceException",0,[],[]];ga.TypeRegistry.for(f1).registerError(VY,ya);var WY=[1,Me,XQ,0,()=>PY],zY=[1,Me,dY,0,()=>UY],GY=[9,Me,YQ,{[Hp]:["GET","/federation/credentials",200]},()=>IY,()=>OY],KY=[9,Me,aY,{[Hp]:["GET","/assignment/roles",200]},()=>DY,()=>LY],XY=[9,Me,rY,{[Hp]:["GET","/assignment/accounts",200]},()=>kY,()=>MY],QY=[9,Me,tY,{[Hp]:["POST","/logout",200]},()=>qY,()=>HY],kp=class extends Qr.Command.classBuilder().ep($p).m(function(e,r,n,s){return[$u.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").sc(GY).build(){},Mu=class extends Qr.Command.classBuilder().ep($p).m(function(e,r,n,s){return[$u.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").sc(KY).build(){},qu=class extends Qr.Command.classBuilder().ep($p).m(function(e,r,n,s){return[$u.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").sc(XY).build(){},Mp=class extends Qr.Command.classBuilder().ep($p).m(function(e,r,n,s){return[$u.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").sc(QY).build(){},YY={GetRoleCredentialsCommand:kp,ListAccountRolesCommand:Mu,ListAccountsCommand:qu,LogoutCommand:Mp},qp=class extends ma{};Qr.createAggregatedClient(YY,qp);var JY=ku.createPaginator(ma,Mu,"nextToken","nextToken","maxResults"),ZY=ku.createPaginator(ma,qu,"nextToken","nextToken","maxResults");Object.defineProperty(Dt,"$Command",{enumerable:!0,get:function(){return Qr.Command}});Object.defineProperty(Dt,"__Client",{enumerable:!0,get:function(){return Qr.Client}});Dt.GetRoleCredentialsCommand=kp;Dt.InvalidRequestException=ZL;Dt.ListAccountRolesCommand=Mu;Dt.ListAccountsCommand=qu;Dt.LogoutCommand=Mp;Dt.ResourceNotFoundException=t1;Dt.SSO=qp;Dt.SSOClient=ma;Dt.SSOServiceException=ya;Dt.TooManyRequestsException=n1;Dt.UnauthorizedException=i1;Dt.paginateListAccountRoles=JY;Dt.paginateListAccounts=ZY});var m1=_(Nv=>{"use strict";var h1=p1();Object.defineProperty(Nv,"GetRoleCredentialsCommand",{enumerable:!0,get:function(){return h1.GetRoleCredentialsCommand}});Object.defineProperty(Nv,"SSOClient",{enumerable:!0,get:function(){return h1.SSOClient}})});var Dv=_(Yp=>{"use strict";var Yr=Wt(),Qp=Bn(),g1=(zr(),le(Ts)),e7=SL(),E1=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),Fu=!1,y1=async({ssoStartUrl:t,ssoSession:e,ssoAccountId:r,ssoRegion:n,ssoRoleName:s,ssoClient:i,clientConfig:o,parentClientConfig:a,profile:c,filepath:u,configFilepath:l,ignoreCache:d,logger:m})=>{let g,E="To refresh this SSO session run aws sso login with the corresponding profile.";if(e)try{let rt=await e7.fromSso({profile:c,filepath:u,configFilepath:l,ignoreCache:d})();g={accessToken:rt.token,expiresAt:new Date(rt.expiration).toISOString()}}catch(rt){throw new Yr.CredentialsProviderError(rt.message,{tryNextLink:Fu,logger:m})}else try{g=await Qp.getSSOTokenFromFile(t)}catch{throw new Yr.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${E}`,{tryNextLink:Fu,logger:m})}if(new Date(g.expiresAt).getTime()-Date.now()<=0)throw new Yr.CredentialsProviderError(`The SSO session associated with this profile has expired. ${E}`,{tryNextLink:Fu,logger:m});let{accessToken:w}=g,{SSOClient:x,GetRoleCredentialsCommand:T}=await Promise.resolve().then(function(){return m1()}),O=i||new x(Object.assign({},o??{},{logger:o?.logger??a?.logger,region:o?.region??n,userAgentAppId:o?.userAgentAppId??a?.userAgentAppId})),M;try{M=await O.send(new T({accountId:r,roleName:s,accessToken:w}))}catch(rt){throw new Yr.CredentialsProviderError(rt,{tryNextLink:Fu,logger:m})}let{roleCredentials:{accessKeyId:U,secretAccessKey:W,sessionToken:ye,expiration:at,credentialScope:he,accountId:oe}={}}=M;if(!U||!W||!ye||!at)throw new Yr.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Fu,logger:m});let Ie={accessKeyId:U,secretAccessKey:W,sessionToken:ye,expiration:new Date(at),...he&&{credentialScope:he},...oe&&{accountId:oe}};return e?g1.setCredentialFeature(Ie,"CREDENTIALS_SSO","s"):g1.setCredentialFeature(Ie,"CREDENTIALS_SSO_LEGACY","u"),Ie},_1=(t,e)=>{let{sso_start_url:r,sso_account_id:n,sso_region:s,sso_role_name:i}=t;if(!r||!n||!s||!i)throw new Yr.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(t).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:e});return t},t7=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t,{ssoClient:a}=t,c=Qp.getProfileName({profile:t.profile??e?.profile});if(!r&&!n&&!s&&!i&&!o){let l=(await Qp.parseKnownFiles(t))[c];if(!l)throw new Yr.CredentialsProviderError(`Profile ${c} was not found.`,{logger:t.logger});if(!E1(l))throw new Yr.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:t.logger});if(l?.sso_session){let T=(await Qp.loadSsoSessionData(t))[l.sso_session],O=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(s&&s!==T.sso_region)throw new Yr.CredentialsProviderError("Conflicting SSO region"+O,{tryNextLink:!1,logger:t.logger});if(r&&r!==T.sso_start_url)throw new Yr.CredentialsProviderError("Conflicting SSO start_url"+O,{tryNextLink:!1,logger:t.logger});l.sso_region=T.sso_region,l.sso_start_url=T.sso_start_url}let{sso_start_url:d,sso_account_id:m,sso_region:g,sso_role_name:E,sso_session:w}=_1(l,t.logger);return y1({ssoStartUrl:d,ssoSession:w,ssoAccountId:m,ssoRegion:g,ssoRoleName:E,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}else{if(!r||!n||!s||!i)throw new Yr.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:t.logger});return y1({ssoStartUrl:r,ssoSession:o,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoClient:a,clientConfig:t.clientConfig,parentClientConfig:t.parentClientConfig,profile:c,filepath:t.filepath,configFilepath:t.configFilepath,ignoreCache:t.ignoreCache,logger:t.logger})}};Yp.fromSSO=t7;Yp.isSsoProfile=E1;Yp.validateSsoProfile=_1});function r7(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:t.region},propertiesExtractor:(e,r)=>({signingProperties:{config:e,context:r}})}}function n7(t){return{schemeId:"smithy.api#noAuth"}}var Uu,S1,v1,s7,w1,Lv=b(()=>{Ot();Uu=C(Bt());Bu();S1=async(t,e,r)=>({operation:(0,Uu.getSmithyContext)(e).operation,region:await(0,Uu.normalizeProvider)(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});v1=t=>{let e=[];switch(t.operation){case"AssumeRoleWithWebIdentity":{e.push(n7(t));break}default:e.push(r7(t))}return e},s7=t=>Object.assign(t,{stsClientCtor:Sn}),w1=t=>{let e=s7(t),r=Ii(e);return Object.assign(r,{authSchemePreference:(0,Uu.normalizeProvider)(t.authSchemePreference??[])})}});var b1,Jp,Zp=b(()=>{b1=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Jp={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var L1,ie,Se,ve,Xs,Ks,bt,k1,M1,q1,He,R1,vn,Ea,Mv,A1,kv,$1,C1,Rt,T1,F1,U1,Lt,yr,x1,B1,j1,P1,H1,I1,O1,N1,D1,i7,V1,W1=b(()=>{L1="required",ie="type",Se="fn",ve="argv",Xs="ref",Ks="booleanEquals",bt="stringEquals",k1="sigv4",M1="sts",q1="us-east-1",He="endpoint",R1="https://sts.{Region}.{PartitionResult#dnsSuffix}",vn="tree",Ea="error",Mv="getAttr",A1={[L1]:!1,[ie]:"string"},kv={[L1]:!0,default:!1,[ie]:"boolean"},$1={[Xs]:"Endpoint"},C1={[Se]:"isSet",[ve]:[{[Xs]:"Region"}]},Rt={[Xs]:"Region"},T1={[Se]:"aws.partition",[ve]:[Rt],assign:"PartitionResult"},F1={[Xs]:"UseFIPS"},U1={[Xs]:"UseDualStack"},Lt={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:k1,signingName:M1,signingRegion:q1}]},headers:{}},yr={},x1={conditions:[{[Se]:bt,[ve]:[Rt,"aws-global"]}],[He]:Lt,[ie]:He},B1={[Se]:Ks,[ve]:[F1,!0]},j1={[Se]:Ks,[ve]:[U1,!0]},P1={[Se]:Mv,[ve]:[{[Xs]:"PartitionResult"},"supportsFIPS"]},H1={[Xs]:"PartitionResult"},I1={[Se]:Ks,[ve]:[!0,{[Se]:Mv,[ve]:[H1,"supportsDualStack"]}]},O1=[{[Se]:"isSet",[ve]:[$1]}],N1=[B1],D1=[j1],i7={version:"1.0",parameters:{Region:A1,UseDualStack:kv,UseFIPS:kv,Endpoint:A1,UseGlobalEndpoint:kv},rules:[{conditions:[{[Se]:Ks,[ve]:[{[Xs]:"UseGlobalEndpoint"},!0]},{[Se]:"not",[ve]:O1},C1,T1,{[Se]:Ks,[ve]:[F1,!1]},{[Se]:Ks,[ve]:[U1,!1]}],rules:[{conditions:[{[Se]:bt,[ve]:[Rt,"ap-northeast-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-south-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-southeast-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"ap-southeast-2"]}],endpoint:Lt,[ie]:He},x1,{conditions:[{[Se]:bt,[ve]:[Rt,"ca-central-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-central-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-north-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-2"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"eu-west-3"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"sa-east-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,q1]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-east-2"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-west-1"]}],endpoint:Lt,[ie]:He},{conditions:[{[Se]:bt,[ve]:[Rt,"us-west-2"]}],endpoint:Lt,[ie]:He},{endpoint:{url:R1,properties:{authSchemes:[{name:k1,signingName:M1,signingRegion:"{Region}"}]},headers:yr},[ie]:He}],[ie]:vn},{conditions:O1,rules:[{conditions:N1,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[ie]:Ea},{conditions:D1,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[ie]:Ea},{endpoint:{url:$1,properties:yr,headers:yr},[ie]:He}],[ie]:vn},{conditions:[C1],rules:[{conditions:[T1],rules:[{conditions:[B1,j1],rules:[{conditions:[{[Se]:Ks,[ve]:[!0,P1]},I1],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:vn},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[ie]:Ea}],[ie]:vn},{conditions:N1,rules:[{conditions:[{[Se]:Ks,[ve]:[P1,!0]}],rules:[{conditions:[{[Se]:bt,[ve]:[{[Se]:Mv,[ve]:[H1,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:yr,headers:yr},[ie]:He},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:vn},{error:"FIPS is enabled but this partition does not support FIPS",[ie]:Ea}],[ie]:vn},{conditions:D1,rules:[{conditions:[I1],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:yr,headers:yr},[ie]:He}],[ie]:vn},{error:"DualStack is enabled but this partition does not support DualStack",[ie]:Ea}],[ie]:vn},x1,{endpoint:{url:R1,properties:yr,headers:yr},[ie]:He}],[ie]:vn}],[ie]:vn},{error:"Invalid Configuration: Missing Region",[ie]:Ea}]},V1=i7});var z1,_a,o7,G1,K1=b(()=>{z1=C(Lo()),_a=C(Ti());W1();o7=new _a.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),G1=(t,e={})=>o7.get(t,()=>(0,_a.resolveEndpoint)(V1,{endpointParams:t,logger:e.logger}));_a.customEndpointFunctions.aws=z1.awsEndpointFunctions});var X1,Q1,eh,th,Y1,J1=b(()=>{Ot();sr();X1=C(fe()),Q1=C(As()),eh=C(vt()),th=C(St());Lv();K1();Y1=t=>({apiVersion:"2011-06-15",base64Decoder:t?.base64Decoder??eh.fromBase64,base64Encoder:t?.base64Encoder??eh.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??G1,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??v1,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new ir},{schemeId:"smithy.api#noAuth",identityProvider:e=>e.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ln}],logger:t?.logger??new X1.NoOpLogger,serviceId:t?.serviceId??"STS",urlParser:t?.urlParser??Q1.parseUrl,utf8Decoder:t?.utf8Decoder??th.fromUtf8,utf8Encoder:t?.utf8Encoder??th.toUtf8})});var rh,Ys,Z1,nh,Qs,sh,ek,tk,rk,nk,sk,ik,ok=b(()=>{fv();Ot();rh=C(pu()),Ys=C(wr());sr();Z1=C(hu()),nh=C(Wn()),Qs=C(jn()),sh=C(yi()),ek=C(mu()),tk=C(ta());J1();rk=C(fe()),nk=C(yu()),sk=C(fe()),ik=t=>{(0,sk.emitWarningIfUnsupportedVersion)(process.version);let e=(0,nk.resolveDefaultsModeConfig)(t),r=()=>e().then(rk.loadConfigsForDefaultMode),n=Y1(t);ko(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Qs.loadConfig)($o,s),bodyLengthChecker:t?.bodyLengthChecker??ek.calculateBodyLength,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,rh.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:mp.version}),httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:i=>i.getIdentityProvider("aws.auth#sigv4")||(async o=>await t.credentialDefaultProvider(o?.__config||{})()),signer:new ir},{schemeId:"smithy.api#noAuth",identityProvider:i=>i.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Ln}],maxAttempts:t?.maxAttempts??(0,Qs.loadConfig)(nh.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Qs.loadConfig)(Ys.NODE_REGION_CONFIG_OPTIONS,{...Ys.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:sh.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Qs.loadConfig)({...nh.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||tk.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??Z1.Hash.bind(null,"sha256"),streamCollector:t?.streamCollector??sh.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Qs.loadConfig)(Ys.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Qs.loadConfig)(Ys.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Qs.loadConfig)(rh.NODE_APP_ID_CONFIG_OPTIONS,s)}}});var ak,ck,uk=b(()=>{ak=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},ck=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()})});var ih,oh,ah,lk,dk=b(()=>{ih=C(da()),oh=C(Oe()),ah=C(fe());uk();lk=(t,e)=>{let r=Object.assign((0,ih.getAwsRegionExtensionConfiguration)(t),(0,ah.getDefaultExtensionConfiguration)(t),(0,oh.getHttpHandlerExtensionConfiguration)(t),ak(t));return e.forEach(n=>n.configure(r)),Object.assign(t,(0,ih.resolveAwsRegionExtensionConfiguration)(r),(0,ah.resolveDefaultRuntimeConfig)(r),(0,oh.resolveHttpHandlerRuntimeConfig)(r),ck(r))}});var ch,fk,pk,uh,hk,mk,gk,lh,qv,Sn,Bu=b(()=>{ch=C(bc()),fk=C(Rc()),pk=C(Cc()),uh=C(Jo()),hk=C(wr());sr();mk=C(nu()),gk=C(Vn()),lh=C(Wn()),qv=C(fe());Lv();Zp();ok();dk();Sn=class extends qv.Client{constructor(...[r]){let n=ik(r||{});super(n);f(this,"config");this.initConfig=n;let s=b1(n),i=(0,uh.resolveUserAgentConfig)(s),o=(0,lh.resolveRetryConfig)(i),a=(0,hk.resolveRegionConfig)(o),c=(0,ch.resolveHostHeaderConfig)(a),u=(0,gk.resolveEndpointConfig)(c),l=w1(u),d=lk(l,r?.extensions||[]);this.config=d,this.middlewareStack.use((0,uh.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,lh.getRetryPlugin)(this.config)),this.middlewareStack.use((0,mk.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,ch.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,fk.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,pk.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(xc(this.config,{httpAuthSchemeParametersProvider:S1,identityProviderConfigProvider:async m=>new Ri({"aws.auth#sigv4":m.credentials})})),this.middlewareStack.use(Ic(this.config))}destroy(){super.destroy()}}});var yk,ar,dh=b(()=>{yk=C(fe()),ar=class t extends yk.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}}});var $v,Fv,Uv,ju,Hu,Vu,Wu,zu,Gu,Bv,jv,Ku,Xu=b(()=>{$v=C(fe());dh();Fv=t=>({...t,...t.SecretAccessKey&&{SecretAccessKey:$v.SENSITIVE_STRING}}),Uv=t=>({...t,...t.Credentials&&{Credentials:Fv(t.Credentials)}}),ju=class t extends ar{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});f(this,"name","ExpiredTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Hu=class t extends ar{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});f(this,"name","MalformedPolicyDocumentException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Vu=class t extends ar{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});f(this,"name","PackedPolicyTooLargeException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Wu=class t extends ar{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});f(this,"name","RegionDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},zu=class t extends ar{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});f(this,"name","IDPRejectedClaimException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Gu=class t extends ar{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});f(this,"name","InvalidIdentityTokenException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}},Bv=t=>({...t,...t.WebIdentityToken&&{WebIdentityToken:$v.SENSITIVE_STRING}}),jv=t=>({...t,...t.Credentials&&{Credentials:Fv(t.Credentials)}}),Ku=class t extends ar{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});f(this,"name","IDPCommunicationErrorException");f(this,"$fault","client");Object.setPrototypeOf(this,t.prototype)}}});var Ek,ue,_k,Sk,vk,wk,bk,a7,c7,u7,l7,d7,f7,p7,h7,m7,Rk,g7,y7,E7,_7,S7,v7,Ak,w7,b7,Ck,R7,A7,C7,T7,x7,P7,I7,Qn,O7,Tk,xk,Pk,Ik,Hv,N7,Vv,Sa,D7,Wv,zv,va,Gv,wa,Kv,Xv,Qv,ba,Ra,Yv,Jv,Zv,Aa,ew,Ca,Ta,tw,rw,Xn,nw,sw,iw,ow,aw,Ok,cw,uw,lw,st,Nk,L7,dw=b(()=>{Ot();Ek=C(Oe()),ue=C(fe());Xu();dh();_k=async(t,e)=>{let r=xk,n;return n=Nk({...h7(t,e),[Ik]:N7,[Ok]:Pk}),Tk(e,r,"/",void 0,n)},Sk=async(t,e)=>{let r=xk,n;return n=Nk({...m7(t,e),[Ik]:D7,[Ok]:Pk}),Tk(e,r,"/",void 0,n)},vk=async(t,e)=>{if(t.statusCode>=300)return bk(t,e);let r=await Ko(t.body,e),n={};return n=w7(r.AssumeRoleResult,e),{$metadata:Qn(t),...n}},wk=async(t,e)=>{if(t.statusCode>=300)return bk(t,e);let r=await Ko(t.body,e),n={};return n=b7(r.AssumeRoleWithWebIdentityResult,e),{$metadata:Qn(t),...n}},bk=async(t,e)=>{let r={...t,body:await kf(t.body,e)},n=L7(t,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await a7(r,e);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await d7(r,e);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await f7(r,e);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await p7(r,e);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await c7(r,e);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await u7(r,e);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await l7(r,e);default:let s=r.body;return O7({output:t,parsedBody:s.Error,errorCode:n})}},a7=async(t,e)=>{let r=t.body,n=R7(r.Error,e),s=new ju({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},c7=async(t,e)=>{let r=t.body,n=A7(r.Error,e),s=new Ku({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},u7=async(t,e)=>{let r=t.body,n=C7(r.Error,e),s=new zu({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},l7=async(t,e)=>{let r=t.body,n=T7(r.Error,e),s=new Gu({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},d7=async(t,e)=>{let r=t.body,n=x7(r.Error,e),s=new Hu({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},f7=async(t,e)=>{let r=t.body,n=P7(r.Error,e),s=new Vu({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},p7=async(t,e)=>{let r=t.body,n=I7(r.Error,e),s=new Wu({$metadata:Qn(t),...n});return(0,ue.decorateServiceException)(s,r)},h7=(t,e)=>{let r={};if(t[Ca]!=null&&(r[Ca]=t[Ca]),t[Ta]!=null&&(r[Ta]=t[Ta]),t[Ra]!=null){let n=Rk(t[Ra],e);t[Ra]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}if(t[ba]!=null&&(r[ba]=t[ba]),t[wa]!=null&&(r[wa]=t[wa]),t[iw]!=null){let n=v7(t[iw],e);t[iw]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([s,i])=>{let o=`Tags.${s}`;r[o]=i})}if(t[aw]!=null){let n=S7(t[aw],e);t[aw]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([s,i])=>{let o=`TransitiveTagKeys.${s}`;r[o]=i})}if(t[Xv]!=null&&(r[Xv]=t[Xv]),t[nw]!=null&&(r[nw]=t[nw]),t[ow]!=null&&(r[ow]=t[ow]),t[Xn]!=null&&(r[Xn]=t[Xn]),t[Jv]!=null){let n=E7(t[Jv],e);t[Jv]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([s,i])=>{let o=`ProvidedContexts.${s}`;r[o]=i})}return r},m7=(t,e)=>{let r={};if(t[Ca]!=null&&(r[Ca]=t[Ca]),t[Ta]!=null&&(r[Ta]=t[Ta]),t[uw]!=null&&(r[uw]=t[uw]),t[Zv]!=null&&(r[Zv]=t[Zv]),t[Ra]!=null){let n=Rk(t[Ra],e);t[Ra]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([s,i])=>{let o=`PolicyArns.${s}`;r[o]=i})}return t[ba]!=null&&(r[ba]=t[ba]),t[wa]!=null&&(r[wa]=t[wa]),r},Rk=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=g7(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},g7=(t,e)=>{let r={};return t[lw]!=null&&(r[lw]=t[lw]),r},y7=(t,e)=>{let r={};return t[Yv]!=null&&(r[Yv]=t[Yv]),t[Gv]!=null&&(r[Gv]=t[Gv]),r},E7=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=y7(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},_7=(t,e)=>{let r={};return t[Qv]!=null&&(r[Qv]=t[Qv]),t[cw]!=null&&(r[cw]=t[cw]),r},S7=(t,e)=>{let r={},n=1;for(let s of t)s!==null&&(r[`member.${n}`]=s,n++);return r},v7=(t,e)=>{let r={},n=1;for(let s of t){if(s===null)continue;let i=_7(s,e);Object.entries(i).forEach(([o,a])=>{r[`member.${n}.${o}`]=a}),n++}return r},Ak=(t,e)=>{let r={};return t[Vv]!=null&&(r[Vv]=(0,ue.expectString)(t[Vv])),t[Wv]!=null&&(r[Wv]=(0,ue.expectString)(t[Wv])),r},w7=(t,e)=>{let r={};return t[va]!=null&&(r[va]=Ck(t[va],e)),t[Sa]!=null&&(r[Sa]=Ak(t[Sa],e)),t[Aa]!=null&&(r[Aa]=(0,ue.strictParseInt32)(t[Aa])),t[Xn]!=null&&(r[Xn]=(0,ue.expectString)(t[Xn])),r},b7=(t,e)=>{let r={};return t[va]!=null&&(r[va]=Ck(t[va],e)),t[rw]!=null&&(r[rw]=(0,ue.expectString)(t[rw])),t[Sa]!=null&&(r[Sa]=Ak(t[Sa],e)),t[Aa]!=null&&(r[Aa]=(0,ue.strictParseInt32)(t[Aa])),t[ew]!=null&&(r[ew]=(0,ue.expectString)(t[ew])),t[zv]!=null&&(r[zv]=(0,ue.expectString)(t[zv])),t[Xn]!=null&&(r[Xn]=(0,ue.expectString)(t[Xn])),r},Ck=(t,e)=>{let r={};return t[Hv]!=null&&(r[Hv]=(0,ue.expectString)(t[Hv])),t[tw]!=null&&(r[tw]=(0,ue.expectString)(t[tw])),t[sw]!=null&&(r[sw]=(0,ue.expectString)(t[sw])),t[Kv]!=null&&(r[Kv]=(0,ue.expectNonNull)((0,ue.parseRfc3339DateTimeWithOffset)(t[Kv]))),r},R7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},A7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},C7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},T7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},x7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},P7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},I7=(t,e)=>{let r={};return t[st]!=null&&(r[st]=(0,ue.expectString)(t[st])),r},Qn=t=>({httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}),O7=(0,ue.withBaseException)(ar),Tk=async(t,e,r,n,s)=>{let{hostname:i,protocol:o="https",port:a,path:c}=await t.endpoint(),u={protocol:o,hostname:i,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:e};return n!==void 0&&(u.hostname=n),s!==void 0&&(u.body=s),new Ek.HttpRequest(u)},xk={"content-type":"application/x-www-form-urlencoded"},Pk="2011-06-15",Ik="Action",Hv="AccessKeyId",N7="AssumeRole",Vv="AssumedRoleId",Sa="AssumedRoleUser",D7="AssumeRoleWithWebIdentity",Wv="Arn",zv="Audience",va="Credentials",Gv="ContextAssertion",wa="DurationSeconds",Kv="Expiration",Xv="ExternalId",Qv="Key",ba="Policy",Ra="PolicyArns",Yv="ProviderArn",Jv="ProvidedContexts",Zv="ProviderId",Aa="PackedPolicySize",ew="Provider",Ca="RoleArn",Ta="RoleSessionName",tw="SecretAccessKey",rw="SubjectFromWebIdentityToken",Xn="SourceIdentity",nw="SerialNumber",sw="SessionToken",iw="Tags",ow="TokenCode",aw="TransitiveTagKeys",Ok="Version",cw="Value",uw="WebIdentityToken",lw="arn",st="message",Nk=t=>Object.entries(t).map(([e,r])=>(0,ue.extendedEncodeURIComponent)(e)+"="+(0,ue.extendedEncodeURIComponent)(r)).join("&"),L7=(t,e)=>{if(e.Error?.Code!==void 0)return e.Error.Code;if(t.statusCode==404)return"NotFound"}});var Dk,Lk,kk,qi,fh=b(()=>{Dk=C(Vn()),Lk=C(Pc()),kk=C(fe());Zp();Xu();dw();qi=class extends kk.Command.classBuilder().ep(Jp).m(function(e,r,n,s){return[(0,Lk.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Dk.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Uv).ser(_k).de(vk).build(){}});var Mk,qk,$k,$i,ph=b(()=>{Mk=C(Vn()),qk=C(Pc()),$k=C(fe());Zp();Xu();dw();$i=class extends $k.Command.classBuilder().ep(Jp).m(function(e,r,n,s){return[(0,qk.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Mk.getEndpointPlugin)(n,e.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Bv,jv).ser(Sk).de(wk).build(){}});var Fk,k7,hh,Uk=b(()=>{Fk=C(fe());fh();ph();Bu();k7={AssumeRoleCommand:qi,AssumeRoleWithWebIdentityCommand:$i},hh=class extends Sn{};(0,Fk.createAggregatedClient)(k7,hh)});var Bk=b(()=>{fh();ph()});var jk=b(()=>{Xu()});var Hk,Vk,Wk,zk,Gk,Kk,Xk=b(()=>{zr();Hk=C(da());fh();ph();Vk=t=>{if(typeof t?.Arn=="string"){let e=t.Arn.split(":");if(e.length>4&&e[4]!=="")return e[4]}},Wk=async(t,e,r,n={})=>{let s=typeof t=="function"?await t():t,i=typeof e=="function"?await e():e,o=await(0,Hk.stsRegionDefaultResolver)(n)();return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (credential provider clientConfig)`,`${i} (contextual client)`,`${o} (STS default: AWS_REGION, profile region, or us-east-1)`),s??i??o},zk=(t,e)=>{let r,n;return async(s,i)=>{if(n=s,!r){let{logger:l=t?.parentClientConfig?.logger,profile:d=t?.parentClientConfig?.profile,region:m,requestHandler:g=t?.parentClientConfig?.requestHandler,credentialProviderLogger:E,userAgentAppId:w=t?.parentClientConfig?.userAgentAppId}=t,x=await Wk(m,t?.parentClientConfig?.region,E,{logger:l,profile:d}),T=!Kk(g);r=new e({...t,userAgentAppId:w,profile:d,credentialDefaultProvider:()=>async()=>n,region:x,requestHandler:T?g:void 0,logger:l})}let{Credentials:o,AssumedRoleUser:a}=await r.send(new qi(i));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${i.RoleArn}`);let c=Vk(a),u={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...c&&{accountId:c}};return Cs(u,"CREDENTIALS_STS_ASSUME_ROLE","i"),u}},Gk=(t,e)=>{let r;return async n=>{if(!r){let{logger:c=t?.parentClientConfig?.logger,profile:u=t?.parentClientConfig?.profile,region:l,requestHandler:d=t?.parentClientConfig?.requestHandler,credentialProviderLogger:m,userAgentAppId:g=t?.parentClientConfig?.userAgentAppId}=t,E=await Wk(l,t?.parentClientConfig?.region,m,{logger:c,profile:u}),w=!Kk(d);r=new e({...t,userAgentAppId:g,profile:u,region:E,requestHandler:w?d:void 0,logger:c})}let{Credentials:s,AssumedRoleUser:i}=await r.send(new $i(n));if(!s||!s.AccessKeyId||!s.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let o=Vk(i),a={accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,sessionToken:s.SessionToken,expiration:s.Expiration,...s.CredentialScope&&{credentialScope:s.CredentialScope},...o&&{accountId:o}};return o&&Cs(a,"RESOLVED_ACCOUNT_ID","T"),Cs(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},Kk=t=>t?.metadata?.handlerProtocol==="h2"});var Qk,Yk,Jk,M7,Zk=b(()=>{Xk();Bu();Qk=(t,e)=>e?class extends t{constructor(n){super(n);for(let s of e)this.middlewareStack.use(s)}}:t,Yk=(t={},e)=>zk(t,Qk(Sn,e)),Jk=(t={},e)=>Gk(t,Qk(Sn,e)),M7=t=>e=>t({roleAssumer:Yk(e),roleAssumerWithWebIdentity:Jk(e),...e})});var fw={};Tt(fw,{AssumeRoleCommand:()=>qi,AssumeRoleResponseFilterSensitiveLog:()=>Uv,AssumeRoleWithWebIdentityCommand:()=>$i,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Bv,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>jv,CredentialsFilterSensitiveLog:()=>Fv,ExpiredTokenException:()=>ju,IDPCommunicationErrorException:()=>Ku,IDPRejectedClaimException:()=>zu,InvalidIdentityTokenException:()=>Gu,MalformedPolicyDocumentException:()=>Hu,PackedPolicyTooLargeException:()=>Vu,RegionDisabledException:()=>Wu,STS:()=>hh,STSClient:()=>Sn,STSServiceException:()=>ar,__Client:()=>qv.Client,decorateDefaultCredentialProvider:()=>M7,getDefaultRoleAssumer:()=>Yk,getDefaultRoleAssumerWithWebIdentity:()=>Jk});var pw=b(()=>{Bu();Uk();Bk();jk();Zk();dh()});var gw=_(eM=>{"use strict";var mw=Bn(),hw=Wt(),q7=require("child_process"),$7=require("util"),F7=(zr(),le(Ts)),U7=(t,e,r)=>{if(e.Version!==1)throw Error(`Profile ${t} credential_process did not return Version 1.`);if(e.AccessKeyId===void 0||e.SecretAccessKey===void 0)throw Error(`Profile ${t} credential_process returned invalid credentials.`);if(e.Expiration){let i=new Date;if(new Date(e.Expiration)<i)throw Error(`Profile ${t} credential_process returned expired credentials.`)}let n=e.AccountId;!n&&r?.[t]?.aws_account_id&&(n=r[t].aws_account_id);let s={accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,...e.SessionToken&&{sessionToken:e.SessionToken},...e.Expiration&&{expiration:new Date(e.Expiration)},...e.CredentialScope&&{credentialScope:e.CredentialScope},...n&&{accountId:n}};return F7.setCredentialFeature(s,"CREDENTIALS_PROCESS","w"),s},B7=async(t,e,r)=>{let n=e[t];if(e[t]){let s=n.credential_process;if(s!==void 0){let i=$7.promisify(mw.externalDataInterceptor?.getTokenRecord?.().exec??q7.exec);try{let{stdout:o}=await i(s),a;try{a=JSON.parse(o.trim())}catch{throw Error(`Profile ${t} credential_process returned invalid JSON.`)}return U7(t,a,e)}catch(o){throw new hw.CredentialsProviderError(o.message,{logger:r})}}else throw new hw.CredentialsProviderError(`Profile ${t} did not contain credential_process.`,{logger:r})}else throw new hw.CredentialsProviderError(`Profile ${t} could not be found in shared credentials file.`,{logger:r})},j7=(t={})=>async({callerClientConfig:e}={})=>{t.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await mw.parseKnownFiles(t);return B7(mw.getProfileName({profile:t.profile??e?.profile}),r,t.logger)};eM.fromProcess=j7});var yw=_(wn=>{"use strict";var H7=wn&&wn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),V7=wn&&wn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),W7=wn&&wn.__importStar||function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&H7(r,e,n[s]);return V7(r,e),r}}();Object.defineProperty(wn,"__esModule",{value:!0});wn.fromWebToken=void 0;var z7=t=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:s,providerId:i,policyArns:o,policy:a,durationSeconds:c}=t,{roleAssumerWithWebIdentity:u}=t;if(!u){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>W7((pw(),le(fw))));u=l({...t.clientConfig,credentialProviderLogger:t.logger,parentClientConfig:{...e?.callerClientConfig,...t.parentClientConfig}},t.clientPlugins)}return u({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:s,ProviderId:i,PolicyArns:o,Policy:a,DurationSeconds:c})};wn.fromWebToken=z7});var rM=_(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});mh.fromTokenFile=void 0;var G7=(zr(),le(Ts)),K7=Wt(),X7=Bn(),Q7=require("fs"),Y7=yw(),tM="AWS_WEB_IDENTITY_TOKEN_FILE",J7="AWS_ROLE_ARN",Z7="AWS_ROLE_SESSION_NAME",eJ=(t={})=>async e=>{t.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let r=t?.webIdentityTokenFile??process.env[tM],n=t?.roleArn??process.env[J7],s=t?.roleSessionName??process.env[Z7];if(!r||!n)throw new K7.CredentialsProviderError("Web identity configuration not specified",{logger:t.logger});let i=await(0,Y7.fromWebToken)({...t,webIdentityToken:X7.externalDataInterceptor?.getTokenRecord?.()[r]??(0,Q7.readFileSync)(r,{encoding:"ascii"}),roleArn:n,roleSessionName:s})(e);return r===process.env[tM]&&(0,G7.setCredentialFeature)(i,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),i};mh.fromTokenFile=eJ});var Ew=_(Qu=>{"use strict";var nM=rM(),sM=yw();Object.keys(nM).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Qu,t)&&Object.defineProperty(Qu,t,{enumerable:!0,get:function(){return nM[t]}})});Object.keys(sM).forEach(function(t){t!=="default"&&!Object.prototype.hasOwnProperty.call(Qu,t)&&Object.defineProperty(Qu,t,{enumerable:!0,get:function(){return sM[t]}})})});var lM=_(uM=>{"use strict";var Sw=Bn(),Yu=Wt(),Js=(zr(),le(Ts)),tJ=(t,e,r)=>{let n={EcsContainer:async s=>{let{fromHttp:i}=await Promise.resolve().then(()=>C(uv())),{fromContainerMetadata:o}=await Promise.resolve().then(()=>C(du()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>Yu.chain(i(s??{}),o(s))().then(_w)},Ec2InstanceMetadata:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:i}=await Promise.resolve().then(()=>C(du()));return async()=>i(s)().then(_w)},Environment:async s=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:i}=await Promise.resolve().then(()=>C(tv()));return async()=>i(s)().then(_w)}};if(t in n)return n[t];throw new Yu.CredentialsProviderError(`Unsupported credential source in profile ${e}. Got ${t}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},_w=t=>Js.setCredentialFeature(t,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),rJ=(t,{profile:e="default",logger:r}={})=>!!t&&typeof t=="object"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1&&["undefined","string"].indexOf(typeof t.external_id)>-1&&["undefined","string"].indexOf(typeof t.mfa_serial)>-1&&(nJ(t,{profile:e,logger:r})||sJ(t,{profile:e,logger:r})),nJ=(t,{profile:e,logger:r})=>{let n=typeof t.source_profile=="string"&&typeof t.credential_source>"u";return n&&r?.debug?.(`    ${e} isAssumeRoleWithSourceProfile source_profile=${t.source_profile}`),n},sJ=(t,{profile:e,logger:r})=>{let n=typeof t.credential_source=="string"&&typeof t.source_profile>"u";return n&&r?.debug?.(`    ${e} isCredentialSourceProfile credential_source=${t.credential_source}`),n},iJ=async(t,e,r,n={},s)=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let i=e[t],{source_profile:o,region:a}=i;if(!r.roleAssumer){let{getDefaultRoleAssumer:u}=await Promise.resolve().then(()=>(pw(),fw));r.roleAssumer=u({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:a??r?.parentClientConfig?.region}},r.clientPlugins)}if(o&&o in n)throw new Yu.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${Sw.getProfileName(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${o?`source_profile=[${o}]`:`profile=[${t}]`}`);let c=o?s(o,e,r,{...n,[o]:!0},iM(e[o]??{})):(await tJ(i.credential_source,t,r.logger)(r))();if(iM(i))return c.then(u=>Js.setCredentialFeature(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let u={RoleArn:i.role_arn,RoleSessionName:i.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:i.external_id,DurationSeconds:parseInt(i.duration_seconds||"3600",10)},{mfa_serial:l}=i;if(l){if(!r.mfaCodeProvider)throw new Yu.CredentialsProviderError(`Profile ${t} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});u.SerialNumber=l,u.TokenCode=await r.mfaCodeProvider(l)}let d=await c;return r.roleAssumer(d,u).then(m=>Js.setCredentialFeature(m,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},iM=t=>!t.role_arn&&!!t.credential_source,oJ=t=>!!t&&typeof t=="object"&&typeof t.credential_process=="string",aJ=async(t,e)=>Promise.resolve().then(()=>C(gw())).then(({fromProcess:r})=>r({...t,profile:e})().then(n=>Js.setCredentialFeature(n,"CREDENTIALS_PROFILE_PROCESS","v"))),cJ=async(t,e,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>C(Dv()));return n({profile:t,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(s=>e.sso_session?Js.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO","r"):Js.setCredentialFeature(s,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},uJ=t=>t&&(typeof t.sso_start_url=="string"||typeof t.sso_account_id=="string"||typeof t.sso_session=="string"||typeof t.sso_region=="string"||typeof t.sso_role_name=="string"),oM=t=>!!t&&typeof t=="object"&&typeof t.aws_access_key_id=="string"&&typeof t.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof t.aws_session_token)>-1&&["undefined","string"].indexOf(typeof t.aws_account_id)>-1,aM=async(t,e)=>{e?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:t.aws_access_key_id,secretAccessKey:t.aws_secret_access_key,sessionToken:t.aws_session_token,...t.aws_credential_scope&&{credentialScope:t.aws_credential_scope},...t.aws_account_id&&{accountId:t.aws_account_id}};return Js.setCredentialFeature(r,"CREDENTIALS_PROFILE","n")},lJ=t=>!!t&&typeof t=="object"&&typeof t.web_identity_token_file=="string"&&typeof t.role_arn=="string"&&["undefined","string"].indexOf(typeof t.role_session_name)>-1,dJ=async(t,e)=>Promise.resolve().then(()=>C(Ew())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:t.web_identity_token_file,roleArn:t.role_arn,roleSessionName:t.role_session_name,roleAssumerWithWebIdentity:e.roleAssumerWithWebIdentity,logger:e.logger,parentClientConfig:e.parentClientConfig})().then(n=>Js.setCredentialFeature(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),cM=async(t,e,r,n={},s=!1)=>{let i=e[t];if(Object.keys(n).length>0&&oM(i))return aM(i,r);if(s||rJ(i,{profile:t,logger:r.logger}))return iJ(t,e,r,n,cM);if(oM(i))return aM(i,r);if(lJ(i))return dJ(i,r);if(oJ(i))return aJ(r,t);if(uJ(i))return await cJ(t,i,r);throw new Yu.CredentialsProviderError(`Could not resolve credentials using profile: [${t}] in configuration/credentials file(s).`,{logger:r.logger})},fJ=(t={})=>async({callerClientConfig:e}={})=>{let r={...t,parentClientConfig:{...e,...t.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await Sw.parseKnownFiles(r);return cM(Sw.getProfileName({profile:t.profile??e?.profile}),n,r)};uM.fromIni=fJ});var hM=_(gh=>{"use strict";var vw=tv(),Ju=Wt(),pJ=Bn(),dM="AWS_EC2_METADATA_DISABLED",hJ=async t=>{let{ENV_CMDS_FULL_URI:e,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:s}=await Promise.resolve().then(()=>C(du()));if(process.env[r]||process.env[e]){t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:i}=await Promise.resolve().then(()=>C(uv()));return Ju.chain(i(t),n(t))}return process.env[dM]&&process.env[dM]!=="false"?async()=>{throw new Ju.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:t.logger})}:(t.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(t))};function mJ(t,e){let r=gJ(t),n,s,i,o=async a=>{if(a?.forceRefresh)return await r(a);if(i?.expiration&&i?.expiration?.getTime()<Date.now()&&(i=void 0),n)await n;else if(!i||e?.(i))if(i)s||(s=r(a).then(c=>{i=c,s=void 0}));else return n=r(a).then(c=>{i=c,n=void 0}),o(a);return i};return o}var gJ=t=>async e=>{let r;for(let n of t)try{return await n(e)}catch(s){if(r=s,s?.tryNextLink)continue;throw s}throw r},fM=!1,yJ=(t={})=>mJ([async()=>{if(t.profile??process.env[pJ.ENV_PROFILE])throw process.env[vw.ENV_KEY]&&process.env[vw.ENV_SECRET]&&(fM||((t.logger?.warn&&t.logger?.constructor?.name!=="NoOpLogger"?t.logger.warn.bind(t.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),fM=!0)),new Ju.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:t.logger,tryNextLink:!0});return t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),vw.fromEnv(t)()},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:s,ssoRoleName:i,ssoSession:o}=t;if(!r&&!n&&!s&&!i&&!o)throw new Ju.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:t.logger});let{fromSSO:a}=await Promise.resolve().then(()=>C(Dv()));return a(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:r}=await Promise.resolve().then(()=>C(lM()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:r}=await Promise.resolve().then(()=>C(gw()));return r(t)(e)},async e=>{t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:r}=await Promise.resolve().then(()=>C(Ew()));return r(t)(e)},async()=>(t.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await hJ(t))()),async()=>{throw new Ju.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:t.logger})}],pM),EJ=t=>t?.expiration!==void 0,pM=t=>t?.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5;gh.credentialsTreatedAsExpired=pM;gh.credentialsWillNeedRefresh=EJ;gh.defaultProvider=yJ});var EM=_(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});yh.getRuntimeConfig=void 0;var mM=(Ot(),le(Un)),_J=(ru(),le(lS)),SJ=MS(),vJ=fe(),wJ=As(),gM=vt(),yM=St(),bJ=ev(),RJ=ZS(),AJ=t=>({apiVersion:"2015-10-07",base64Decoder:t?.base64Decoder??gM.fromBase64,base64Encoder:t?.base64Encoder??gM.toBase64,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??RJ.defaultEndpointResolver,extensions:t?.extensions??[],httpAuthSchemeProvider:t?.httpAuthSchemeProvider??bJ.defaultEventBridgeHttpAuthSchemeProvider,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new mM.AwsSdkSigV4Signer},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new mM.AwsSdkSigV4ASigner}],logger:t?.logger??new vJ.NoOpLogger,protocol:t?.protocol??new _J.AwsJson1_1Protocol({defaultNamespace:"com.amazonaws.eventbridge",serviceTarget:"AWSEvents",awsQueryCompatible:!1}),serviceId:t?.serviceId??"EventBridge",signerConstructor:t?.signerConstructor??SJ.SignatureV4MultiRegion,urlParser:t?.urlParser??wJ.parseUrl,utf8Decoder:t?.utf8Decoder??yM.fromUtf8,utf8Encoder:t?.utf8Encoder??yM.toUtf8});yh.getRuntimeConfig=AJ});var wM=_(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.getRuntimeConfig=void 0;var CJ=(Hc(),le(jc)),TJ=CJ.__importDefault(IN()),ww=(Ot(),le(Un)),xJ=hM(),_M=pu(),Eh=wr(),PJ=hu(),SM=Wn(),Zs=jn(),vM=yi(),IJ=mu(),OJ=ta(),NJ=EM(),DJ=fe(),LJ=yu(),kJ=fe(),MJ=t=>{(0,kJ.emitWarningIfUnsupportedVersion)(process.version);let e=(0,LJ.resolveDefaultsModeConfig)(t),r=()=>e().then(DJ.loadConfigsForDefaultMode),n=(0,NJ.getRuntimeConfig)(t);(0,ww.emitWarningIfUnsupportedVersion)(process.version);let s={profile:t?.profile,logger:n.logger};return{...n,...t,runtime:"node",defaultsMode:e,authSchemePreference:t?.authSchemePreference??(0,Zs.loadConfig)(ww.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,s),bodyLengthChecker:t?.bodyLengthChecker??IJ.calculateBodyLength,credentialDefaultProvider:t?.credentialDefaultProvider??xJ.defaultProvider,defaultUserAgentProvider:t?.defaultUserAgentProvider??(0,_M.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:TJ.default.version}),maxAttempts:t?.maxAttempts??(0,Zs.loadConfig)(SM.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,t),region:t?.region??(0,Zs.loadConfig)(Eh.NODE_REGION_CONFIG_OPTIONS,{...Eh.NODE_REGION_CONFIG_FILE_OPTIONS,...s}),requestHandler:vM.NodeHttpHandler.create(t?.requestHandler??r),retryMode:t?.retryMode??(0,Zs.loadConfig)({...SM.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||OJ.DEFAULT_RETRY_MODE},t),sha256:t?.sha256??PJ.Hash.bind(null,"sha256"),sigv4aSigningRegionSet:t?.sigv4aSigningRegionSet??(0,Zs.loadConfig)(ww.NODE_SIGV4A_CONFIG_OPTIONS,s),streamCollector:t?.streamCollector??vM.streamCollector,useDualstackEndpoint:t?.useDualstackEndpoint??(0,Zs.loadConfig)(Eh.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,s),useFipsEndpoint:t?.useFipsEndpoint??(0,Zs.loadConfig)(Eh.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,s),userAgentAppId:t?.userAgentAppId??(0,Zs.loadConfig)(_M.NODE_APP_ID_CONFIG_OPTIONS,s)}};_h.getRuntimeConfig=MJ});var s$=_(L=>{"use strict";var bM=bc(),qJ=Rc(),$J=Cc(),RM=Jo(),FJ=wr(),bw=(sr(),le(Ai)),Kt=($e(),le(Ud)),UJ=nu(),z=Vn(),AM=Wn(),H=fe(),CM=ev(),BJ=wM(),TM=da(),xM=Oe(),jJ=t=>Object.assign(t,{useDualstackEndpoint:t.useDualstackEndpoint??!1,useFipsEndpoint:t.useFipsEndpoint??!1,defaultSigningName:"events"}),G={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},HJ=t=>{let e=t.httpAuthSchemes,r=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(s){let i=e.findIndex(o=>o.schemeId===s.schemeId);i===-1?e.push(s):e.splice(i,1,s)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(s){r=s},httpAuthSchemeProvider(){return r},setCredentials(s){n=s},credentials(){return n}}},VJ=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),WJ=(t,e)=>{let r=Object.assign(TM.getAwsRegionExtensionConfiguration(t),H.getDefaultExtensionConfiguration(t),xM.getHttpHandlerExtensionConfiguration(t),HJ(t));return e.forEach(n=>n.configure(r)),Object.assign(t,TM.resolveAwsRegionExtensionConfiguration(r),H.resolveDefaultRuntimeConfig(r),xM.resolveHttpHandlerRuntimeConfig(r),VJ(r))},Sh=class extends H.Client{constructor(...[r]){let n=BJ.getRuntimeConfig(r||{});super(n);f(this,"config");this.initConfig=n;let s=jJ(n),i=RM.resolveUserAgentConfig(s),o=AM.resolveRetryConfig(i),a=FJ.resolveRegionConfig(o),c=bM.resolveHostHeaderConfig(a),u=z.resolveEndpointConfig(c),l=CM.resolveHttpAuthSchemeConfig(u),d=WJ(l,r?.extensions||[]);this.config=d,this.middlewareStack.use(Kt.getSchemaSerdePlugin(this.config)),this.middlewareStack.use(RM.getUserAgentPlugin(this.config)),this.middlewareStack.use(AM.getRetryPlugin(this.config)),this.middlewareStack.use(UJ.getContentLengthPlugin(this.config)),this.middlewareStack.use(bM.getHostHeaderPlugin(this.config)),this.middlewareStack.use(qJ.getLoggerPlugin(this.config)),this.middlewareStack.use($J.getRecursionDetectionPlugin(this.config)),this.middlewareStack.use(bw.getHttpAuthSchemeEndpointRuleSetPlugin(this.config,{httpAuthSchemeParametersProvider:CM.defaultEventBridgeHttpAuthSchemeParametersProvider,identityProviderConfigProvider:async m=>new bw.DefaultIdentityProviderConfig({"aws.auth#sigv4":m.credentials,"aws.auth#sigv4a":m.credentials})})),this.middlewareStack.use(bw.getHttpSigningPlugin(this.config))}destroy(){super.destroy()}},Xt=class PM extends H.ServiceException{constructor(e){super(e),Object.setPrototypeOf(this,PM.prototype)}},IM=class OM extends Xt{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});f(this,"name","AccessDeniedException");f(this,"$fault","client");Object.setPrototypeOf(this,OM.prototype)}},NM=class DM extends Xt{constructor(r){super({name:"ConcurrentModificationException",$fault:"client",...r});f(this,"name","ConcurrentModificationException");f(this,"$fault","client");Object.setPrototypeOf(this,DM.prototype)}},LM=class kM extends Xt{constructor(r){super({name:"InternalException",$fault:"server",...r});f(this,"name","InternalException");f(this,"$fault","server");Object.setPrototypeOf(this,kM.prototype)}},MM=class qM extends Xt{constructor(r){super({name:"InvalidStateException",$fault:"client",...r});f(this,"name","InvalidStateException");f(this,"$fault","client");Object.setPrototypeOf(this,qM.prototype)}},$M=class FM extends Xt{constructor(r){super({name:"OperationDisabledException",$fault:"client",...r});f(this,"name","OperationDisabledException");f(this,"$fault","client");Object.setPrototypeOf(this,FM.prototype)}},UM=class BM extends Xt{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});f(this,"name","ResourceNotFoundException");f(this,"$fault","client");Object.setPrototypeOf(this,BM.prototype)}},zJ={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},GJ={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",OPTIONS:"OPTIONS",PATCH:"PATCH",POST:"POST",PUT:"PUT"},KJ={CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DISABLED:"DISABLED",ENABLED:"ENABLED",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},XJ={DISABLED:"DISABLED",ENABLED:"ENABLED"},QJ={CANCELLED:"CANCELLED",CANCELLING:"CANCELLING",COMPLETED:"COMPLETED",FAILED:"FAILED",RUNNING:"RUNNING",STARTING:"STARTING"},jM=class HM extends Xt{constructor(r){super({name:"IllegalStatusException",$fault:"client",...r});f(this,"name","IllegalStatusException");f(this,"$fault","client");Object.setPrototypeOf(this,HM.prototype)}},VM=class WM extends Xt{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});f(this,"name","LimitExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,WM.prototype)}},zM=class GM extends Xt{constructor(r){super({name:"ResourceAlreadyExistsException",$fault:"client",...r});f(this,"name","ResourceAlreadyExistsException");f(this,"$fault","client");Object.setPrototypeOf(this,GM.prototype)}},KM=class XM extends Xt{constructor(r){super({name:"InvalidEventPatternException",$fault:"client",...r});f(this,"name","InvalidEventPatternException");f(this,"$fault","client");Object.setPrototypeOf(this,XM.prototype)}},YJ={API_KEY:"API_KEY",BASIC:"BASIC",OAUTH_CLIENT_CREDENTIALS:"OAUTH_CLIENT_CREDENTIALS"},JJ={GET:"GET",POST:"POST",PUT:"PUT"},ZJ={ACTIVE:"ACTIVE",AUTHORIZED:"AUTHORIZED",AUTHORIZING:"AUTHORIZING",CREATING:"CREATING",DEAUTHORIZED:"DEAUTHORIZED",DEAUTHORIZING:"DEAUTHORIZING",DELETING:"DELETING",FAILED_CONNECTIVITY:"FAILED_CONNECTIVITY",UPDATING:"UPDATING"},QM=class YM extends Xt{constructor(r){super({name:"ThrottlingException",$fault:"client",...r});f(this,"name","ThrottlingException");f(this,"$fault","client");Object.setPrototypeOf(this,YM.prototype)}},eZ={DISABLED:"DISABLED",ENABLED:"ENABLED"},tZ={ACTIVE:"ACTIVE",CREATE_FAILED:"CREATE_FAILED",CREATING:"CREATING",DELETE_FAILED:"DELETE_FAILED",DELETING:"DELETING",UPDATE_FAILED:"UPDATE_FAILED",UPDATING:"UPDATING"},rZ={FULL:"FULL",NONE:"NONE"},nZ={ERROR:"ERROR",INFO:"INFO",OFF:"OFF",TRACE:"TRACE"},JM=class ZM extends Xt{constructor(r){super({name:"ManagedRuleException",$fault:"client",...r});f(this,"name","ManagedRuleException");f(this,"$fault","client");Object.setPrototypeOf(this,ZM.prototype)}},sZ={ACTIVE:"ACTIVE",DELETED:"DELETED",PENDING:"PENDING"},iZ={DISABLED:"DISABLED",ENABLED:"ENABLED",ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS:"ENABLED_WITH_ALL_CLOUDTRAIL_MANAGEMENT_EVENTS"},oZ={EC2:"EC2",EXTERNAL:"EXTERNAL",FARGATE:"FARGATE"},aZ={DISTINCT_INSTANCE:"distinctInstance",MEMBER_OF:"memberOf"},cZ={BINPACK:"binpack",RANDOM:"random",SPREAD:"spread"},uZ={TASK_DEFINITION:"TASK_DEFINITION"},eq=class tq extends Xt{constructor(r){super({name:"PolicyLengthExceededException",$fault:"client",...r});f(this,"name","PolicyLengthExceededException");f(this,"$fault","client");Object.setPrototypeOf(this,tq.prototype)}},lZ="Archive",Rw="ArchiveArn",dZ="ApiDestination",Am="ApiDestinationArn",fZ="AccessDeniedException",pZ="ApiDestinationResponseList",Cm="ApiDestinationState",hZ="ApiDestinations",Aw="AuthorizationEndpoint",mZ="ActivateEventSource",gZ="ActivateEventSourceRequest",yZ="AuthHeaderParametersSensitive",Cw="ApiKeyAuthParameters",Tw="ApiKeyName",rq="ApiKeyValue",xa="ArchiveName",EZ="ArrayProperties",_Z="AssignPublicIp",xw="AuthParameters",SZ="ArchiveResponseList",nq="AppSyncParameters",Tm="AuthorizationType",vZ="AwsVpcConfiguration",Pw="Account",wZ="Action",kt="Arn",bZ="Archives",RZ="Attempts",AZ="BatchArrayProperties",Iw="BasicAuthParameters",sq="BatchParameters",CZ="BodyParameters",TZ="BatchRetryStrategy",iq="Condition",Jr="ConnectionArn",xZ="CreateApiDestination",PZ="CreateApiDestinationRequest",IZ="CreateApiDestinationResponse",OZ="ConnectionApiKeyAuthResponseParameters",NZ="CreateArchiveRequest",DZ="ConnectionAuthResponseParameters",LZ="CreateArchiveResponse",kZ="CreateArchive",Ow="CreatedBy",MZ="ConnectionBasicAuthResponseParameters",qZ="ConnectionBodyParameter",$Z="ConnectionBodyParametersList",FZ="CreateConnection",UZ="CreateConnectionApiKeyAuthRequestParameters",BZ="CreateConnectionAuthRequestParameters",jZ="CreateConnectionBasicAuthRequestParameters",HZ="CreateConnectionOAuthClientRequestParameters",VZ="CreateConnectionOAuthRequestParameters",WZ="CreateConnectionRequest",zZ="CreateConnectionResponse",GZ="CreateEndpoint",KZ="CreateEventBus",XZ="CreateEventBusRequest",QZ="CreateEventBusResponse",YZ="CreateEndpointRequest",JZ="CreateEndpointResponse",ZZ="ConnectionHeaderParameter",eee="ConnectionHeaderParametersList",tee="ConnectionHttpParameters",Nw="ClientID",ree="ConcurrentModificationException",nee="ConnectionOAuthClientResponseParameters",see="ConnectionOAuthResponseParameters",Dw="ConnectivityParameters",iee="CreatePartnerEventSource",oee="CreatePartnerEventSourceRequest",aee="CreatePartnerEventSourceResponse",oq="CapacityProviderStrategy",cee="CapacityProviderStrategyItem",Lw="ClientParameters",uee="ConnectionQueryStringParameter",lee="ConnectionQueryStringParametersList",dee="CancelReplay",fee="ConnectivityResourceConfigurationArn",pee="ConnectionResponseList",hee="ConnectivityResourceParameters",mee="CancelReplayRequest",gee="CancelReplayResponse",Fi="ConnectionState",aq="ClientSecret",it="CreationTime",yee="Connection",Eee="Connections",Ve="Description",_ee="DeleteArchive",See="DeleteApiDestination",vee="DeleteApiDestinationRequest",wee="DeleteApiDestinationResponse",bee="DescribeApiDestinationRequest",Ree="DescribeApiDestinationResponse",Aee="DescribeApiDestination",Cee="DeleteArchiveRequest",Tee="DeleteArchiveResponse",xee="DescribeArchiveRequest",Pee="DescribeArchiveResponse",Iee="DescribeArchive",Oee="DeauthorizeConnection",Nee="DescribeConnectionConnectivityParameters",Dee="DeauthorizeConnectionRequest",Lee="DescribeConnectionResourceParameters",kee="DeauthorizeConnectionResponse",Mee="DeleteConnectionRequest",qee="DeleteConnectionResponse",$ee="DescribeConnectionRequest",Fee="DescribeConnectionResponse",Uee="DeleteConnection",Bee="DescribeConnection",jee="DeleteEndpoint",Hee="DeleteEventBus",Vee="DeleteEventBusRequest",Wee="DescribeEventBusRequest",zee="DescribeEventBusResponse",Gee="DescribeEventBus",Kee="DeleteEndpointRequest",Xee="DeleteEndpointResponse",Qee="DescribeEndpointRequest",Yee="DescribeEndpointResponse",Jee="DeactivateEventSource",Zee="DeactivateEventSourceRequest",ete="DescribeEventSourceRequest",tte="DescribeEventSourceResponse",rte="DescribeEventSource",nte="DescribeEndpoint",Ui="DeadLetterConfig",ste="DeletePartnerEventSource",ite="DeletePartnerEventSourceRequest",ote="DescribePartnerEventSourceRequest",ate="DescribePartnerEventSourceResponse",cte="DescribePartnerEventSource",ute="DeleteRule",lte="DeleteRuleRequest",dte="DescribeReplayRequest",fte="DescribeReplayResponse",pte="DescribeRuleRequest",hte="DescribeRuleResponse",mte="DisableRuleRequest",gte="DescribeReplay",yte="DescribeRule",Ete="DisableRule",cq="DetailType",_te="DbUser",Ste="Database",uq="Destination",lq="Detail",vte="Endpoint",Bi="EventBuses",dq="EventBusArn",wte="EventBusList",Qt="EventBusName",bte="EventBus",fq="EventCount",xm="ErrorCode",Rte="EndpointEventBus",Ate="EndpointEventBusList",Cte="EnableExecuteCommand",Tte="EnableECSManagedTags",kw="EventEndTime",Pm="EndpointId",pq="EventId",xte="EndpointList",hq="EventLastReplayedTime",Im="ErrorMessage",ji="EventPattern",mq="EcsParameters",Pte="EnableRule",Ite="EnableRuleRequest",Ote="EventSource",Yn="EventSourceArn",Nte="EventSourceList",gq="EventSourceName",Mw="EventStartTime",Dte="EventSources",qw="ExpirationTime",$w="EndpointUrl",Lte="Endpoints",Om="Entries",kte="Event",yq="Force",Mte="FilterArns",Eq="FailoverConfig",_q="FailedEntries",Nm="FailedEntryCount",qte="Group",Sq="GraphQLOperation",$te="HealthCheck",Hi="HttpMethod",vq="HeaderParameters",wq="HttpParameters",bq="HomeRegion",Fte="HeaderValueSensitive",Ute="Ids",Fw="InvocationConnectivityParameters",Bte="IncludeDetail",Dm="InvocationEndpoint",jte="InvalidEventPatternException",Hte="InternalException",Uw="InvocationHttpParameters",Vte="InputPath",Wte="InputPathsMap",Lm="InvocationRateLimitPerSecond",zte="IllegalStatusException",Gte="InvalidStateException",Rq="InputTransformer",Kte="InputTemplate",Bw="IsValueSecret",Xte="Id",Qte="Input",Yte="JobDefinition",Jte="JobName",Pa="Key",Zr="KmsKeyIdentifier",Aq="KinesisParameters",en="Limit",Zte="ListArchives",ere="ListApiDestinations",tre="ListApiDestinationsRequest",rre="ListApiDestinationsResponse",nre="ListArchivesRequest",sre="ListArchivesResponse",Zu="LastAuthorizedTime",Ia="LogConfig",ire="ListConnectionsRequest",ore="ListConnectionsResponse",are="ListConnections",cre="ListEndpoints",ure="ListEventBuses",lre="ListEventBusesRequest",dre="ListEventBusesResponse",fre="LimitExceededException",pre="ListEndpointsRequest",hre="ListEndpointsResponse",mre="ListEventSources",gre="ListEventSourcesRequest",yre="ListEventSourcesResponse",cr="LastModifiedTime",Ere="ListPartnerEventSources",_re="ListPartnerEventSourceAccounts",Sre="ListPartnerEventSourceAccountsRequest",vre="ListPartnerEventSourceAccountsResponse",wre="ListPartnerEventSourcesRequest",bre="ListPartnerEventSourcesResponse",Rre="ListReplays",Are="ListRuleNamesByTarget",Cre="ListRuleNamesByTargetRequest",Tre="ListRuleNamesByTargetResponse",xre="ListReplaysRequest",Pre="ListReplaysResponse",Ire="ListRulesRequest",Ore="ListRulesResponse",Nre="ListRules",Dre="LaunchType",Lre="ListTargetsByRule",kre="ListTargetsByRuleRequest",Mre="ListTargetsByRuleResponse",qre="ListTagsForResource",$re="ListTagsForResourceRequest",Fre="ListTagsForResourceResponse",Ure="Level",Cq="ManagedBy",Bre="MaximumEventAgeInSeconds",jre="MessageGroupId",Hre="MaxResults",Vre="MaximumRetryAttempts",Wre="ManagedRuleException",ee="Name",Tq="NetworkConfiguration",Jn="NamePrefix",We="NextToken",jw="OAuthHttpParameters",Hw="OAuthParameters",zre="OperationDisabledException",xq="Password",Pq="PlacementConstraints",Gre="PlacementConstraint",Kre="PutEvents",Xre="PutEventsRequest",Qre="PutEventsRequestEntry",Yre="PutEventsRequestEntryList",Jre="PutEventsResultEntryList",Zre="PutEventsResultEntry",ene="PutEventsResponse",tne="PartnerEventSources",rne="PartnerEventSourceAccounts",nne="PartnerEventSourceAccountList",sne="PartnerEventSourceAccount",ine="PartnerEventSourceList",one="PartnerEventSource",ane="PartitionKeyPath",cne="PolicyLengthExceededException",une="PutPermission",lne="PutPartnerEvents",dne="PutPartnerEventsRequest",fne="PutPartnerEventsRequestEntry",pne="PutPartnerEventsRequestEntryList",hne="PutPartnerEventsResultEntryList",mne="PutPartnerEventsResultEntry",gne="PutPartnerEventsResponse",yne="PipelineParameterList",Ene="PutPermissionRequest",_ne="PathParameterValues",Sne="PutRule",vne="PutRuleRequest",wne="PutRuleResponse",Iq="PlacementStrategy",bne="PlacementStrategies",Rne="PropagateTags",Ane="PutTargetsRequest",Cne="PutTargetsResultEntry",Tne="PutTargetsResultEntryList",xne="PutTargetsResponse",Pne="PutTargets",Ine="PlatformVersion",Vw="Policy",Oq="Primary",One="Principal",Nq="QueryStringParameters",Nne="QueryStringValueSensitive",Dne="Replays",Ww="ReplayArn",Lne="ResourceAssociationArn",kne="ResourceAlreadyExistsException",Mne="RemoveAllPermissions",zw="ResourceARN",bn="RoleArn",qne="RuleArn",Vi="RoutingConfig",Dq="ResourceConfigurationArn",Lq="RunCommandParameters",kq="RunCommandTargets",$ne="RunCommandTarget",Wi="ReplicationConfig",km="RetentionDays",Mq="RedshiftDataParameters",Fne="ReplayDestination",qq="ReplayEndTime",Une="ReferenceId",Bne="ReplayList",el="ReplayName",jne="ResourceNotFoundException",Hne="RuleNames",$q="ResourceParameters",Vne="RemovePermissionRequest",Fq="RetryPolicy",Wne="RemovePermission",zne="RuleResponseList",Gne="RetryStrategy",Gw="ReplayStartTime",Kne="RemoveTargets",Xne="RemoveTargetsRequest",Qne="RemoveTargetsResultEntry",Yne="RemoveTargetsResultEntryList",Jne="RemoveTargetsResponse",Uq="Resources",Zne="Replay",ese="Result",tse="Route",rse="Rules",Mm="Rule",Bq="Sql",nse="SecretArn",jq="SizeBytes",Kw="ScheduleExpression",sse="SecurityGroups",Hq="StatementId",ise="SecretManagerArn",ose="SageMakerPipelineParameter",ase="SageMakerPipelineParameterList",Vq="SageMakerPipelineParameters",cse="StatementName",Wq="SqsParameters",Pr="StateReason",use="StartReplayRequest",lse="StartReplayResponse",dse="StartReplay",fse="SensitiveString",zq="Secondary",pse="Size",Gq="Source",Kq="Sqls",ot="State",hse="Subnets",mse="Type",gse="TargetArn",yse="TaskCount",Ese="TaskDefinitionArn",_se="ThrottlingException",Sse="TestEventPattern",vse="TestEventPatternRequest",wse="TestEventPatternResponse",bse="TraceHeader",Xq="TargetId",Rse="TagKeys",Ase="TagList",Cse="TargetList",Tse="TagResource",xse="TagResourceRequest",Pse="TagResourceResponse",tl="Tags",Ise="Tag",Qq="Targets",Ose="Target",Yq="Time",Xw="Username",Nse="UpdateArchive",Dse="UpdateApiDestination",Lse="UpdateApiDestinationRequest",kse="UpdateApiDestinationResponse",Mse="UpdateArchiveRequest",qse="UpdateArchiveResponse",$se="UpdateConnection",Fse="UpdateConnectionApiKeyAuthRequestParameters",Use="UpdateConnectionAuthRequestParameters",Bse="UpdateConnectionBasicAuthRequestParameters",jse="UpdateConnectionOAuthClientRequestParameters",Hse="UpdateConnectionOAuthRequestParameters",Vse="UpdateConnectionRequest",Wse="UpdateConnectionResponse",zse="UpdateEndpoint",Gse="UpdateEventBus",Kse="UpdateEventBusRequest",Xse="UpdateEventBusResponse",Qse="UpdateEndpointRequest",Yse="UpdateEndpointResponse",Jse="UntagResource",Zse="UntagResourceRequest",eie="UntagResourceResponse",Oa="Value",tie="Values",rie="WithEvent",nie="awsvpcConfiguration",sie="base",Ir="client",iie="capacityProvider",Er="error",oie="expression",aie="field",_r="message",cie="server",Jq="smithy.ts.sdk.synthetic.com.amazonaws.eventbridge",Zq="type",uie="weight",y="com.amazonaws.eventbridge",Na=[0,y,yZ,8,0],lie=[0,y,Sq,8,0],die=[0,y,Fte,8,0],fie=[0,y,Nne,8,0],pie=[0,y,fse,8,0],e$=[0,y,Bq,8,0],hie=[-3,y,fZ,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(hie,IM);var mie=[3,y,gZ,0,[ee],[0]],gie=[3,y,dZ,0,[Am,ee,Cm,Jr,Dm,Hi,Lm,it,cr],[0,0,0,0,0,0,1,4,4]],yie=[3,y,nq,0,[Sq],[[()=>lie,0]]],Eie=[3,y,lZ,0,[xa,Yn,ot,Pr,km,jq,fq,it],[0,0,0,0,1,1,1,4]],_ie=[3,y,vZ,0,[hse,sse,_Z],[64,64,0]],Sie=[3,y,AZ,0,[pse],[1]],vie=[3,y,sq,0,[Yte,Jte,EZ,Gne],[0,0,()=>Sie,()=>wie]],wie=[3,y,TZ,0,[RZ],[1]],bie=[3,y,mee,0,[el],[0]],Rie=[3,y,gee,0,[Ww,ot,Pr],[0,0,0]],Aie=[3,y,cee,0,[iie,uie,sie],[0,1,1]],Cie=[-3,y,ree,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Cie,NM);var Tie=[3,y,iq,0,[mse,Pa,Oa],[0,0,0]],xie=[3,y,yee,0,[Jr,ee,Fi,Pr,Tm,it,cr,Zu],[0,0,0,0,0,4,4,4]],Pie=[3,y,OZ,0,[Tw],[0]],Iie=[3,y,DZ,0,[Iw,Hw,Cw,Uw,Dw],[()=>Oie,[()=>kie,0],()=>Pie,[()=>Da,0],()=>t$]],Oie=[3,y,MZ,0,[Xw],[0]],Nie=[3,y,qZ,0,[Pa,Oa,Bw],[0,[()=>pie,0],2]],Die=[3,y,ZZ,0,[Pa,Oa,Bw],[0,[()=>die,0],2]],Da=[3,y,tee,0,[vq,Nq,CZ],[[()=>$ce,0],[()=>Fce,0],[()=>qce,0]]],Lie=[3,y,nee,0,[Nw],[0]],kie=[3,y,see,0,[Lw,Aw,Hi,jw],[()=>Lie,0,0,[()=>Da,0]]],Mie=[3,y,uee,0,[Pa,Oa,Bw],[0,[()=>fie,0],2]],qie=[3,y,fee,0,[Dq],[0]],qm=[3,y,hee,0,[$q],[()=>qie]],$ie=[3,y,PZ,0,[ee,Ve,Jr,Dm,Hi,Lm],[0,0,0,0,0,1]],Fie=[3,y,IZ,0,[Am,Cm,it,cr],[0,0,4,4]],Uie=[3,y,NZ,0,[xa,Yn,Ve,ji,km,Zr],[0,0,0,0,1,0]],Bie=[3,y,LZ,0,[Rw,ot,Pr,it],[0,0,0,4]],jie=[3,y,UZ,0,[Tw,rq],[0,[()=>Na,0]]],Hie=[3,y,BZ,0,[Iw,Hw,Cw,Uw,Dw],[[()=>Vie,0],[()=>zie,0],[()=>jie,0],[()=>Da,0],()=>qm]],Vie=[3,y,jZ,0,[Xw,xq],[0,[()=>Na,0]]],Wie=[3,y,HZ,0,[Nw,aq],[0,[()=>Na,0]]],zie=[3,y,VZ,0,[Lw,Aw,Hi,jw],[[()=>Wie,0],0,0,[()=>Da,0]]],Gie=[3,y,WZ,0,[ee,Ve,Tm,xw,Fw,Zr],[0,0,0,[()=>Hie,0],()=>qm,0]],Kie=[3,y,zZ,0,[Jr,Fi,it,cr],[0,0,4,4]],Xie=[3,y,YZ,0,[ee,Ve,Vi,Wi,Bi,bn],[0,0,()=>Ma,()=>ka,()=>qa,0]],Qie=[3,y,JZ,0,[ee,kt,Vi,Wi,Bi,bn,ot],[0,0,()=>Ma,()=>ka,()=>qa,0,0]],Yie=[3,y,XZ,0,[ee,gq,Ve,Zr,Ui,Ia,tl],[0,0,0,0,()=>La,()=>rl,()=>nl]],Jie=[3,y,QZ,0,[dq,Ve,Zr,Ui,Ia],[0,0,0,()=>La,()=>rl]],Zie=[3,y,oee,0,[ee,Pw],[0,0]],eoe=[3,y,aee,0,[Yn],[0]],toe=[3,y,Zee,0,[ee],[0]],La=[3,y,Ui,0,[kt],[0]],roe=[3,y,Dee,0,[ee],[0]],noe=[3,y,kee,0,[Jr,Fi,it,cr,Zu],[0,0,4,4,4]],soe=[3,y,vee,0,[ee],[0]],ioe=[3,y,wee,0,[],[]],ooe=[3,y,Cee,0,[xa],[0]],aoe=[3,y,Tee,0,[],[]],coe=[3,y,Mee,0,[ee],[0]],uoe=[3,y,qee,0,[Jr,Fi,it,cr,Zu],[0,0,4,4,4]],loe=[3,y,Kee,0,[ee],[0]],doe=[3,y,Xee,0,[],[]],foe=[3,y,Vee,0,[ee],[0]],poe=[3,y,ite,0,[ee,Pw],[0,0]],hoe=[3,y,lte,0,[ee,Qt,yq],[0,0,2]],moe=[3,y,bee,0,[ee],[0]],goe=[3,y,Ree,0,[Am,ee,Ve,Cm,Jr,Dm,Hi,Lm,it,cr],[0,0,0,0,0,0,0,1,4,4]],yoe=[3,y,xee,0,[xa],[0]],Eoe=[3,y,Pee,0,[Rw,xa,Yn,Ve,ji,ot,Pr,Zr,km,jq,fq,it],[0,0,0,0,0,0,0,0,1,1,1,4]],t$=[3,y,Nee,0,[$q],[()=>Soe]],_oe=[3,y,$ee,0,[ee],[0]],Soe=[3,y,Lee,0,[Dq,Lne],[0,0]],voe=[3,y,Fee,0,[Jr,ee,Ve,Fw,Fi,Pr,Tm,nse,Zr,xw,it,cr,Zu],[0,0,0,()=>t$,0,0,0,0,0,[()=>Iie,0],4,4,4]],woe=[3,y,Qee,0,[ee,bq],[0,0]],boe=[3,y,Yee,0,[ee,Ve,kt,Vi,Wi,Bi,bn,Pm,$w,ot,Pr,it,cr],[0,0,0,()=>Ma,()=>ka,()=>qa,0,0,0,0,0,4,4]],Roe=[3,y,Wee,0,[ee],[0]],Aoe=[3,y,zee,0,[ee,kt,Ve,Zr,Ui,Vw,Ia,it,cr],[0,0,0,0,()=>La,0,()=>rl,4,4]],Coe=[3,y,ete,0,[ee],[0]],Toe=[3,y,tte,0,[kt,Ow,it,qw,ee,ot],[0,0,4,4,0,0]],xoe=[3,y,ote,0,[ee],[0]],Poe=[3,y,ate,0,[kt,ee],[0,0]],Ioe=[3,y,dte,0,[el],[0]],Ooe=[3,y,fte,0,[el,Ww,Ve,ot,Pr,Yn,uq,Mw,kw,hq,Gw,qq],[0,0,0,0,0,0,()=>r$,4,4,4,4,4]],Noe=[3,y,pte,0,[ee,Qt],[0,0]],Doe=[3,y,hte,0,[ee,kt,ji,Kw,ot,Ve,bn,Cq,Qt,Ow],[0,0,0,0,0,0,0,0,0,0]],Loe=[3,y,mte,0,[ee,Qt],[0,0]],koe=[3,y,mq,0,[Ese,yse,Dre,Tq,Ine,qte,oq,Tte,Cte,Pq,Iq,Rne,Une,tl],[0,1,0,()=>bae,0,0,()=>Mce,2,2,()=>zce,()=>Gce,0,0,()=>nl]],Moe=[3,y,Ite,0,[ee,Qt],[0,0]],qoe=[3,y,vte,0,[ee,Ve,kt,Vi,Wi,Bi,bn,Pm,$w,ot,Pr,it,cr],[0,0,0,()=>Ma,()=>ka,()=>qa,0,0,0,0,0,4,4]],$oe=[3,y,Rte,0,[dq],[0]],Foe=[3,y,bte,0,[ee,kt,Ve,Vw,it,cr],[0,0,0,0,4,4]],Uoe=[3,y,Ote,0,[kt,Ow,it,qw,ee,ot],[0,0,4,4,0,0]],Boe=[3,y,Eq,0,[Oq,zq],[()=>Iae,()=>ice]],joe=[3,y,wq,0,[_ne,vq,Nq],[64,128,128]],Hoe=[-3,y,zte,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Hoe,jM);var Voe=[3,y,Rq,0,[Wte,Kte],[128,0]],Woe=[-3,y,Hte,{[Er]:cie},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Woe,LM);var zoe=[-3,y,jte,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(zoe,KM);var Goe=[-3,y,Gte,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Goe,MM);var Koe=[3,y,Aq,0,[ane],[0]],Xoe=[-3,y,fre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Xoe,VM);var Qoe=[3,y,tre,0,[Jn,Jr,We,en],[0,0,0,1]],Yoe=[3,y,rre,0,[hZ,We],[()=>Lce,0]],Joe=[3,y,nre,0,[Jn,Yn,ot,We,en],[0,0,0,0,1]],Zoe=[3,y,sre,0,[bZ,We],[()=>kce,0]],eae=[3,y,ire,0,[Jn,Fi,We,en],[0,0,0,1]],tae=[3,y,ore,0,[Eee,We],[()=>Uce,0]],rae=[3,y,pre,0,[Jn,bq,We,Hre],[0,0,0,1]],nae=[3,y,hre,0,[Lte,We],[()=>Bce,0]],sae=[3,y,lre,0,[Jn,We,en],[0,0,1]],iae=[3,y,dre,0,[Bi,We],[()=>jce,0]],oae=[3,y,gre,0,[Jn,We,en],[0,0,1]],aae=[3,y,yre,0,[Dte,We],[()=>Hce,0]],cae=[3,y,Sre,0,[gq,We,en],[0,0,1]],uae=[3,y,vre,0,[rne,We],[()=>Vce,0]],lae=[3,y,wre,0,[Jn,We,en],[0,0,1]],dae=[3,y,bre,0,[tne,We],[()=>Wce,0]],fae=[3,y,xre,0,[Jn,ot,Yn,We,en],[0,0,0,0,1]],pae=[3,y,Pre,0,[Dne,We],[()=>eue,0]],hae=[3,y,Cre,0,[gse,Qt,We,en],[0,0,0,1]],mae=[3,y,Tre,0,[Hne,We],[64,0]],gae=[3,y,Ire,0,[Jn,Qt,We,en],[0,0,0,1]],yae=[3,y,Ore,0,[rse,We],[()=>tue,0]],Eae=[3,y,$re,0,[zw],[0]],_ae=[3,y,Fre,0,[tl],[()=>nl]],Sae=[3,y,kre,0,[Mm,Qt,We,en],[0,0,0,1]],vae=[3,y,Mre,0,[Qq,We],[[()=>n$,0],0]],rl=[3,y,Ia,0,[Bte,Ure],[0,0]],wae=[-3,y,Wre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(wae,JM);var bae=[3,y,Tq,0,[nie],[()=>_ie]],Rae=[-3,y,zre,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Rae,$M);var Aae=[3,y,one,0,[kt,ee],[0,0]],Cae=[3,y,sne,0,[Pw,it,qw,ot],[0,4,4,0]],Tae=[3,y,Gre,0,[Zq,oie],[0,0]],xae=[3,y,Iq,0,[Zq,aie],[0,0]],Pae=[-3,y,cne,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Pae,eq);var Iae=[3,y,Oq,0,[$te],[0]],Oae=[3,y,Xre,0,[Om,Pm],[()=>Kce,0]],Nae=[3,y,Qre,0,[Yq,Gq,Uq,cq,lq,Qt,bse],[4,0,64,0,0,0,0]],Dae=[3,y,ene,0,[Nm,Om],[1,()=>Xce]],Lae=[3,y,Zre,0,[pq,xm,Im],[0,0,0]],kae=[3,y,dne,0,[Om],[()=>Qce]],Mae=[3,y,fne,0,[Yq,Gq,Uq,cq,lq],[4,0,64,0,0]],qae=[3,y,gne,0,[Nm,Om],[1,()=>Yce]],$ae=[3,y,mne,0,[pq,xm,Im],[0,0,0]],Fae=[3,y,Ene,0,[Qt,wZ,One,Hq,iq,Vw],[0,0,0,0,()=>Tie,0]],Uae=[3,y,vne,0,[ee,Kw,ji,ot,Ve,bn,tl,Qt],[0,0,0,0,0,0,()=>nl,0]],Bae=[3,y,wne,0,[qne],[0]],jae=[3,y,Ane,0,[Mm,Qt,Qq],[0,0,[()=>n$,0]]],Hae=[3,y,xne,0,[Nm,_q],[1,()=>Jce]],Vae=[3,y,Cne,0,[Xq,xm,Im],[0,0,0]],Wae=[3,y,Mq,0,[ise,Ste,_te,Bq,cse,rie,Kq],[0,0,0,[()=>e$,0],0,2,[()=>sue,0]]],zae=[3,y,Vne,0,[Hq,Mne,Qt],[0,2,0]],Gae=[3,y,Xne,0,[Mm,Qt,Ute,yq],[0,0,64,2]],Kae=[3,y,Jne,0,[Nm,_q],[1,()=>Zce]],Xae=[3,y,Qne,0,[Xq,xm,Im],[0,0,0]],Qae=[3,y,Zne,0,[el,Yn,ot,Pr,Mw,kw,hq,Gw,qq],[0,0,0,0,4,4,4,4,4]],r$=[3,y,Fne,0,[kt,Mte],[0,64]],ka=[3,y,Wi,0,[ot],[0]],Yae=[-3,y,kne,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Yae,zM);var Jae=[-3,y,jne,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(Jae,UM);var Zae=[3,y,Fq,0,[Vre,Bre],[1,1]],Ma=[3,y,Vi,0,[Eq],[()=>Boe]],ece=[3,y,Mm,0,[ee,kt,ji,ot,Ve,Kw,bn,Cq,Qt],[0,0,0,0,0,0,0,0,0]],tce=[3,y,Lq,0,[kq],[()=>rue]],rce=[3,y,$ne,0,[Pa,tie],[0,64]],nce=[3,y,ose,0,[ee,Oa],[0,0]],sce=[3,y,Vq,0,[yne],[()=>nue]],ice=[3,y,zq,0,[tse],[0]],oce=[3,y,Wq,0,[jre],[0]],ace=[3,y,use,0,[el,Ve,Yn,Mw,kw,uq],[0,0,0,4,4,()=>r$]],cce=[3,y,lse,0,[Ww,ot,Pr,Gw],[0,0,0,4]],uce=[3,y,Ise,0,[Pa,Oa],[0,0]],lce=[3,y,xse,0,[zw,tl],[0,()=>nl]],dce=[3,y,Pse,0,[],[]],fce=[3,y,Ose,0,[Xte,kt,bn,Qte,Vte,Rq,Aq,Lq,mq,sq,Wq,wq,Mq,Vq,Ui,Fq,nq],[0,0,0,0,0,()=>Voe,()=>Koe,()=>tce,()=>koe,()=>vie,()=>oce,()=>joe,[()=>Wae,0],()=>sce,()=>La,()=>Zae,[()=>yie,0]]],pce=[3,y,vse,0,[ji,kte],[0,0]],hce=[3,y,wse,0,[ese],[2]],mce=[-3,y,_se,{[Er]:Ir},[_r],[0]];Kt.TypeRegistry.for(y).registerError(mce,QM);var gce=[3,y,Zse,0,[zw,Rse],[0,64]],yce=[3,y,eie,0,[],[]],Ece=[3,y,Lse,0,[ee,Ve,Jr,Dm,Hi,Lm],[0,0,0,0,0,1]],_ce=[3,y,kse,0,[Am,Cm,it,cr],[0,0,4,4]],Sce=[3,y,Mse,0,[xa,Ve,ji,km,Zr],[0,0,0,1,0]],vce=[3,y,qse,0,[Rw,ot,Pr,it],[0,0,0,4]],wce=[3,y,Fse,0,[Tw,rq],[0,[()=>Na,0]]],bce=[3,y,Use,0,[Iw,Hw,Cw,Uw,Dw],[[()=>Rce,0],[()=>Cce,0],[()=>wce,0],[()=>Da,0],()=>qm]],Rce=[3,y,Bse,0,[Xw,xq],[0,[()=>Na,0]]],Ace=[3,y,jse,0,[Nw,aq],[0,[()=>Na,0]]],Cce=[3,y,Hse,0,[Lw,Aw,Hi,jw],[[()=>Ace,0],0,0,[()=>Da,0]]],Tce=[3,y,Vse,0,[ee,Ve,Tm,xw,Fw,Zr],[0,0,0,[()=>bce,0],()=>qm,0]],xce=[3,y,Wse,0,[Jr,Fi,it,cr,Zu],[0,0,4,4,4]],Pce=[3,y,Qse,0,[ee,Ve,Vi,Wi,Bi,bn],[0,0,()=>Ma,()=>ka,()=>qa,0]],Ice=[3,y,Yse,0,[ee,kt,Vi,Wi,Bi,bn,Pm,$w,ot],[0,0,()=>Ma,()=>ka,()=>qa,0,0,0,0]],Oce=[3,y,Kse,0,[ee,Zr,Ve,Ui,Ia],[0,0,0,()=>La,()=>rl]],Nce=[3,y,Xse,0,[kt,ee,Zr,Ve,Ui,Ia],[0,0,0,0,()=>La,()=>rl]],Zn="unit",Dce=[-3,Jq,"EventBridgeServiceException",0,[],[]];Kt.TypeRegistry.for(Jq).registerError(Dce,Xt);var Lce=[1,y,pZ,0,()=>gie],kce=[1,y,SZ,0,()=>Eie],Mce=[1,y,oq,0,()=>Aie],qce=[1,y,$Z,0,[()=>Nie,0]],$ce=[1,y,eee,0,[()=>Die,0]],Fce=[1,y,lee,0,[()=>Mie,0]],Uce=[1,y,pee,0,()=>xie],qa=[1,y,Ate,0,()=>$oe],Bce=[1,y,xte,0,()=>qoe],jce=[1,y,wte,0,()=>Foe],Hce=[1,y,Nte,0,()=>Uoe],Vce=[1,y,nne,0,()=>Cae],Wce=[1,y,ine,0,()=>Aae],zce=[1,y,Pq,0,()=>Tae],Gce=[1,y,bne,0,()=>xae],Kce=[1,y,Yre,0,()=>Nae],Xce=[1,y,Jre,0,()=>Lae],Qce=[1,y,pne,0,()=>Mae],Yce=[1,y,hne,0,()=>$ae],Jce=[1,y,Tne,0,()=>Vae],Zce=[1,y,Yne,0,()=>Xae],eue=[1,y,Bne,0,()=>Qae],tue=[1,y,zne,0,()=>ece],rue=[1,y,kq,0,()=>rce],nue=[1,y,ase,0,()=>nce],sue=[1,y,Kq,8,[()=>e$,0]],nl=[1,y,Ase,0,()=>uce],n$=[1,y,Cse,0,[()=>fce,0]],iue=[9,y,mZ,0,()=>mie,()=>Zn],oue=[9,y,dee,0,()=>bie,()=>Rie],aue=[9,y,xZ,0,()=>$ie,()=>Fie],cue=[9,y,kZ,0,()=>Uie,()=>Bie],uue=[9,y,FZ,0,()=>Gie,()=>Kie],lue=[9,y,GZ,0,()=>Xie,()=>Qie],due=[9,y,KZ,0,()=>Yie,()=>Jie],fue=[9,y,iee,0,()=>Zie,()=>eoe],pue=[9,y,Jee,0,()=>toe,()=>Zn],hue=[9,y,Oee,0,()=>roe,()=>noe],mue=[9,y,See,0,()=>soe,()=>ioe],gue=[9,y,_ee,0,()=>ooe,()=>aoe],yue=[9,y,Uee,0,()=>coe,()=>uoe],Eue=[9,y,jee,0,()=>loe,()=>doe],_ue=[9,y,Hee,0,()=>foe,()=>Zn],Sue=[9,y,ste,0,()=>poe,()=>Zn],vue=[9,y,ute,0,()=>hoe,()=>Zn],wue=[9,y,Aee,0,()=>moe,()=>goe],bue=[9,y,Iee,0,()=>yoe,()=>Eoe],Rue=[9,y,Bee,0,()=>_oe,()=>voe],Aue=[9,y,nte,0,()=>woe,()=>boe],Cue=[9,y,Gee,0,()=>Roe,()=>Aoe],Tue=[9,y,rte,0,()=>Coe,()=>Toe],xue=[9,y,cte,0,()=>xoe,()=>Poe],Pue=[9,y,gte,0,()=>Ioe,()=>Ooe],Iue=[9,y,yte,0,()=>Noe,()=>Doe],Oue=[9,y,Ete,0,()=>Loe,()=>Zn],Nue=[9,y,Pte,0,()=>Moe,()=>Zn],Due=[9,y,ere,0,()=>Qoe,()=>Yoe],Lue=[9,y,Zte,0,()=>Joe,()=>Zoe],kue=[9,y,are,0,()=>eae,()=>tae],Mue=[9,y,cre,0,()=>rae,()=>nae],que=[9,y,ure,0,()=>sae,()=>iae],$ue=[9,y,mre,0,()=>oae,()=>aae],Fue=[9,y,_re,0,()=>cae,()=>uae],Uue=[9,y,Ere,0,()=>lae,()=>dae],Bue=[9,y,Rre,0,()=>fae,()=>pae],jue=[9,y,Are,0,()=>hae,()=>mae],Hue=[9,y,Nre,0,()=>gae,()=>yae],Vue=[9,y,qre,0,()=>Eae,()=>_ae],Wue=[9,y,Lre,0,()=>Sae,()=>vae],zue=[9,y,Kre,0,()=>Oae,()=>Dae],Gue=[9,y,lne,0,()=>kae,()=>qae],Kue=[9,y,une,0,()=>Fae,()=>Zn],Xue=[9,y,Sne,0,()=>Uae,()=>Bae],Que=[9,y,Pne,0,()=>jae,()=>Hae],Yue=[9,y,Wne,0,()=>zae,()=>Zn],Jue=[9,y,Kne,0,()=>Gae,()=>Kae],Zue=[9,y,dse,0,()=>ace,()=>cce],ele=[9,y,Tse,0,()=>lce,()=>dce],tle=[9,y,Sse,0,()=>pce,()=>hce],rle=[9,y,Jse,0,()=>gce,()=>yce],nle=[9,y,Dse,0,()=>Ece,()=>_ce],sle=[9,y,Nse,0,()=>Sce,()=>vce],ile=[9,y,$se,0,()=>Tce,()=>xce],ole=[9,y,zse,0,()=>Pce,()=>Ice],ale=[9,y,Gse,0,()=>Oce,()=>Nce],vh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ActivateEventSource",{}).n("EventBridgeClient","ActivateEventSourceCommand").sc(iue).build(){},wh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CancelReplay",{}).n("EventBridgeClient","CancelReplayCommand").sc(oue).build(){},bh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateApiDestination",{}).n("EventBridgeClient","CreateApiDestinationCommand").sc(aue).build(){},Rh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateArchive",{}).n("EventBridgeClient","CreateArchiveCommand").sc(cue).build(){},Ah=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateConnection",{}).n("EventBridgeClient","CreateConnectionCommand").sc(uue).build(){},Ch=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEndpoint",{}).n("EventBridgeClient","CreateEndpointCommand").sc(lue).build(){},Th=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreateEventBus",{}).n("EventBridgeClient","CreateEventBusCommand").sc(due).build(){},xh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","CreatePartnerEventSource",{}).n("EventBridgeClient","CreatePartnerEventSourceCommand").sc(fue).build(){},Ph=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeactivateEventSource",{}).n("EventBridgeClient","DeactivateEventSourceCommand").sc(pue).build(){},Ih=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeauthorizeConnection",{}).n("EventBridgeClient","DeauthorizeConnectionCommand").sc(hue).build(){},Oh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteApiDestination",{}).n("EventBridgeClient","DeleteApiDestinationCommand").sc(mue).build(){},Nh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteArchive",{}).n("EventBridgeClient","DeleteArchiveCommand").sc(gue).build(){},Dh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteConnection",{}).n("EventBridgeClient","DeleteConnectionCommand").sc(yue).build(){},Lh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEndpoint",{}).n("EventBridgeClient","DeleteEndpointCommand").sc(Eue).build(){},kh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteEventBus",{}).n("EventBridgeClient","DeleteEventBusCommand").sc(_ue).build(){},Mh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeletePartnerEventSource",{}).n("EventBridgeClient","DeletePartnerEventSourceCommand").sc(Sue).build(){},qh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DeleteRule",{}).n("EventBridgeClient","DeleteRuleCommand").sc(vue).build(){},$h=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeApiDestination",{}).n("EventBridgeClient","DescribeApiDestinationCommand").sc(wue).build(){},Fh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeArchive",{}).n("EventBridgeClient","DescribeArchiveCommand").sc(bue).build(){},Uh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeConnection",{}).n("EventBridgeClient","DescribeConnectionCommand").sc(Rue).build(){},Bh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEndpoint",{}).n("EventBridgeClient","DescribeEndpointCommand").sc(Aue).build(){},jh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventBus",{}).n("EventBridgeClient","DescribeEventBusCommand").sc(Cue).build(){},Hh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeEventSource",{}).n("EventBridgeClient","DescribeEventSourceCommand").sc(Tue).build(){},Vh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribePartnerEventSource",{}).n("EventBridgeClient","DescribePartnerEventSourceCommand").sc(xue).build(){},Wh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeReplay",{}).n("EventBridgeClient","DescribeReplayCommand").sc(Pue).build(){},zh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DescribeRule",{}).n("EventBridgeClient","DescribeRuleCommand").sc(Iue).build(){},Gh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","DisableRule",{}).n("EventBridgeClient","DisableRuleCommand").sc(Oue).build(){},Kh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","EnableRule",{}).n("EventBridgeClient","EnableRuleCommand").sc(Nue).build(){},Xh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListApiDestinations",{}).n("EventBridgeClient","ListApiDestinationsCommand").sc(Due).build(){},Qh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListArchives",{}).n("EventBridgeClient","ListArchivesCommand").sc(Lue).build(){},Yh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListConnections",{}).n("EventBridgeClient","ListConnectionsCommand").sc(kue).build(){},Jh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEndpoints",{}).n("EventBridgeClient","ListEndpointsCommand").sc(Mue).build(){},Zh=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventBuses",{}).n("EventBridgeClient","ListEventBusesCommand").sc(que).build(){},em=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListEventSources",{}).n("EventBridgeClient","ListEventSourcesCommand").sc($ue).build(){},tm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSourceAccounts",{}).n("EventBridgeClient","ListPartnerEventSourceAccountsCommand").sc(Fue).build(){},rm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListPartnerEventSources",{}).n("EventBridgeClient","ListPartnerEventSourcesCommand").sc(Uue).build(){},nm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListReplays",{}).n("EventBridgeClient","ListReplaysCommand").sc(Bue).build(){},sm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRuleNamesByTarget",{}).n("EventBridgeClient","ListRuleNamesByTargetCommand").sc(jue).build(){},im=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListRules",{}).n("EventBridgeClient","ListRulesCommand").sc(Hue).build(){},om=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTagsForResource",{}).n("EventBridgeClient","ListTagsForResourceCommand").sc(Vue).build(){},am=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","ListTargetsByRule",{}).n("EventBridgeClient","ListTargetsByRuleCommand").sc(Wue).build(){},cm=class extends H.Command.classBuilder().ep({...G,EndpointId:{type:"contextParams",name:"EndpointId"}}).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutEvents",{}).n("EventBridgeClient","PutEventsCommand").sc(zue).build(){},um=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPartnerEvents",{}).n("EventBridgeClient","PutPartnerEventsCommand").sc(Gue).build(){},lm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutPermission",{}).n("EventBridgeClient","PutPermissionCommand").sc(Kue).build(){},dm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutRule",{}).n("EventBridgeClient","PutRuleCommand").sc(Xue).build(){},fm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","PutTargets",{}).n("EventBridgeClient","PutTargetsCommand").sc(Que).build(){},pm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemovePermission",{}).n("EventBridgeClient","RemovePermissionCommand").sc(Yue).build(){},hm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","RemoveTargets",{}).n("EventBridgeClient","RemoveTargetsCommand").sc(Jue).build(){},mm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","StartReplay",{}).n("EventBridgeClient","StartReplayCommand").sc(Zue).build(){},gm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TagResource",{}).n("EventBridgeClient","TagResourceCommand").sc(ele).build(){},ym=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","TestEventPattern",{}).n("EventBridgeClient","TestEventPatternCommand").sc(tle).build(){},Em=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UntagResource",{}).n("EventBridgeClient","UntagResourceCommand").sc(rle).build(){},_m=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateApiDestination",{}).n("EventBridgeClient","UpdateApiDestinationCommand").sc(nle).build(){},Sm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateArchive",{}).n("EventBridgeClient","UpdateArchiveCommand").sc(sle).build(){},vm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateConnection",{}).n("EventBridgeClient","UpdateConnectionCommand").sc(ile).build(){},wm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEndpoint",{}).n("EventBridgeClient","UpdateEndpointCommand").sc(ole).build(){},bm=class extends H.Command.classBuilder().ep(G).m(function(e,r,n,s){return[z.getEndpointPlugin(n,e.getEndpointParameterInstructions())]}).s("AWSEvents","UpdateEventBus",{}).n("EventBridgeClient","UpdateEventBusCommand").sc(ale).build(){},cle={ActivateEventSourceCommand:vh,CancelReplayCommand:wh,CreateApiDestinationCommand:bh,CreateArchiveCommand:Rh,CreateConnectionCommand:Ah,CreateEndpointCommand:Ch,CreateEventBusCommand:Th,CreatePartnerEventSourceCommand:xh,DeactivateEventSourceCommand:Ph,DeauthorizeConnectionCommand:Ih,DeleteApiDestinationCommand:Oh,DeleteArchiveCommand:Nh,DeleteConnectionCommand:Dh,DeleteEndpointCommand:Lh,DeleteEventBusCommand:kh,DeletePartnerEventSourceCommand:Mh,DeleteRuleCommand:qh,DescribeApiDestinationCommand:$h,DescribeArchiveCommand:Fh,DescribeConnectionCommand:Uh,DescribeEndpointCommand:Bh,DescribeEventBusCommand:jh,DescribeEventSourceCommand:Hh,DescribePartnerEventSourceCommand:Vh,DescribeReplayCommand:Wh,DescribeRuleCommand:zh,DisableRuleCommand:Gh,EnableRuleCommand:Kh,ListApiDestinationsCommand:Xh,ListArchivesCommand:Qh,ListConnectionsCommand:Yh,ListEndpointsCommand:Jh,ListEventBusesCommand:Zh,ListEventSourcesCommand:em,ListPartnerEventSourceAccountsCommand:tm,ListPartnerEventSourcesCommand:rm,ListReplaysCommand:nm,ListRuleNamesByTargetCommand:sm,ListRulesCommand:im,ListTagsForResourceCommand:om,ListTargetsByRuleCommand:am,PutEventsCommand:cm,PutPartnerEventsCommand:um,PutPermissionCommand:lm,PutRuleCommand:dm,PutTargetsCommand:fm,RemovePermissionCommand:pm,RemoveTargetsCommand:hm,StartReplayCommand:mm,TagResourceCommand:gm,TestEventPatternCommand:ym,UntagResourceCommand:Em,UpdateApiDestinationCommand:_m,UpdateArchiveCommand:Sm,UpdateConnectionCommand:vm,UpdateEndpointCommand:wm,UpdateEventBusCommand:bm},Rm=class extends Sh{};H.createAggregatedClient(cle,Rm);Object.defineProperty(L,"$Command",{enumerable:!0,get:function(){return H.Command}});Object.defineProperty(L,"__Client",{enumerable:!0,get:function(){return H.Client}});L.AccessDeniedException=IM;L.ActivateEventSourceCommand=vh;L.ApiDestinationHttpMethod=GJ;L.ApiDestinationState=zJ;L.ArchiveState=KJ;L.AssignPublicIp=XJ;L.CancelReplayCommand=wh;L.ConcurrentModificationException=NM;L.ConnectionAuthorizationType=YJ;L.ConnectionOAuthHttpMethod=JJ;L.ConnectionState=ZJ;L.CreateApiDestinationCommand=bh;L.CreateArchiveCommand=Rh;L.CreateConnectionCommand=Ah;L.CreateEndpointCommand=Ch;L.CreateEventBusCommand=Th;L.CreatePartnerEventSourceCommand=xh;L.DeactivateEventSourceCommand=Ph;L.DeauthorizeConnectionCommand=Ih;L.DeleteApiDestinationCommand=Oh;L.DeleteArchiveCommand=Nh;L.DeleteConnectionCommand=Dh;L.DeleteEndpointCommand=Lh;L.DeleteEventBusCommand=kh;L.DeletePartnerEventSourceCommand=Mh;L.DeleteRuleCommand=qh;L.DescribeApiDestinationCommand=$h;L.DescribeArchiveCommand=Fh;L.DescribeConnectionCommand=Uh;L.DescribeEndpointCommand=Bh;L.DescribeEventBusCommand=jh;L.DescribeEventSourceCommand=Hh;L.DescribePartnerEventSourceCommand=Vh;L.DescribeReplayCommand=Wh;L.DescribeRuleCommand=zh;L.DisableRuleCommand=Gh;L.EnableRuleCommand=Kh;L.EndpointState=tZ;L.EventBridge=Rm;L.EventBridgeClient=Sh;L.EventBridgeServiceException=Xt;L.EventSourceState=sZ;L.IllegalStatusException=jM;L.IncludeDetail=rZ;L.InternalException=LM;L.InvalidEventPatternException=KM;L.InvalidStateException=MM;L.LaunchType=oZ;L.Level=nZ;L.LimitExceededException=VM;L.ListApiDestinationsCommand=Xh;L.ListArchivesCommand=Qh;L.ListConnectionsCommand=Yh;L.ListEndpointsCommand=Jh;L.ListEventBusesCommand=Zh;L.ListEventSourcesCommand=em;L.ListPartnerEventSourceAccountsCommand=tm;L.ListPartnerEventSourcesCommand=rm;L.ListReplaysCommand=nm;L.ListRuleNamesByTargetCommand=sm;L.ListRulesCommand=im;L.ListTagsForResourceCommand=om;L.ListTargetsByRuleCommand=am;L.ManagedRuleException=JM;L.OperationDisabledException=$M;L.PlacementConstraintType=aZ;L.PlacementStrategyType=cZ;L.PolicyLengthExceededException=eq;L.PropagateTags=uZ;L.PutEventsCommand=cm;L.PutPartnerEventsCommand=um;L.PutPermissionCommand=lm;L.PutRuleCommand=dm;L.PutTargetsCommand=fm;L.RemovePermissionCommand=pm;L.RemoveTargetsCommand=hm;L.ReplayState=QJ;L.ReplicationState=eZ;L.ResourceAlreadyExistsException=zM;L.ResourceNotFoundException=UM;L.RuleState=iZ;L.StartReplayCommand=mm;L.TagResourceCommand=gm;L.TestEventPatternCommand=ym;L.ThrottlingException=QM;L.UntagResourceCommand=Em;L.UpdateApiDestinationCommand=_m;L.UpdateArchiveCommand=Sm;L.UpdateConnectionCommand=vm;L.UpdateEndpointCommand=wm;L.UpdateEventBusCommand=bm});var cb=_((ol,$a)=>{var dle=200,R$="__lodash_hash_undefined__",fle=800,ple=16,A$=9007199254740991,C$="[object Arguments]",hle="[object Array]",mle="[object AsyncFunction]",gle="[object Boolean]",yle="[object Date]",Ele="[object Error]",T$="[object Function]",_le="[object GeneratorFunction]",Sle="[object Map]",vle="[object Number]",wle="[object Null]",x$="[object Object]",ble="[object Proxy]",Rle="[object RegExp]",Ale="[object Set]",Cle="[object String]",Tle="[object Undefined]",xle="[object WeakMap]",Ple="[object ArrayBuffer]",Ile="[object DataView]",Ole="[object Float32Array]",Nle="[object Float64Array]",Dle="[object Int8Array]",Lle="[object Int16Array]",kle="[object Int32Array]",Mle="[object Uint8Array]",qle="[object Uint8ClampedArray]",$le="[object Uint16Array]",Fle="[object Uint32Array]",Ule=/[\\^$.*+?()[\]{}|]/g,Ble=/^\[object .+?Constructor\]$/,jle=/^(?:0|[1-9]\d*)$/,Fe={};Fe[Ole]=Fe[Nle]=Fe[Dle]=Fe[Lle]=Fe[kle]=Fe[Mle]=Fe[qle]=Fe[$le]=Fe[Fle]=!0;Fe[C$]=Fe[hle]=Fe[Ple]=Fe[gle]=Fe[Ile]=Fe[yle]=Fe[Ele]=Fe[T$]=Fe[Sle]=Fe[vle]=Fe[x$]=Fe[Rle]=Fe[Ale]=Fe[Cle]=Fe[xle]=!1;var P$=typeof global=="object"&&global&&global.Object===Object&&global,Hle=typeof self=="object"&&self&&self.Object===Object&&self,ul=P$||Hle||Function("return this")(),I$=typeof ol=="object"&&ol&&!ol.nodeType&&ol,al=I$&&typeof $a=="object"&&$a&&!$a.nodeType&&$a,O$=al&&al.exports===I$,Jw=O$&&P$.process,m$=function(){try{var t=al&&al.require&&al.require("util").types;return t||Jw&&Jw.binding&&Jw.binding("util")}catch{}}(),g$=m$&&m$.isTypedArray;function Vle(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Wle(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function zle(t){return function(e){return t(e)}}function Gle(t,e){return t?.[e]}function Kle(t,e){return function(r){return t(e(r))}}var Xle=Array.prototype,Qle=Function.prototype,jm=Object.prototype,Zw=ul["__core-js_shared__"],Hm=Qle.toString,ts=jm.hasOwnProperty,y$=function(){var t=/[^.]+$/.exec(Zw&&Zw.keys&&Zw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),N$=jm.toString,Yle=Hm.call(Object),Jle=RegExp("^"+Hm.call(ts).replace(Ule,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Um=O$?ul.Buffer:void 0,E$=ul.Symbol,_$=ul.Uint8Array,S$=Um?Um.allocUnsafe:void 0,D$=Kle(Object.getPrototypeOf,Object),v$=Object.create,Zle=jm.propertyIsEnumerable,ede=Xle.splice,zi=E$?E$.toStringTag:void 0,Bm=function(){try{var t=ib(Object,"defineProperty");return t({},"",{}),t}catch{}}(),tde=Um?Um.isBuffer:void 0,w$=Math.max,rde=Date.now,L$=ib(ul,"Map"),cl=ib(Object,"create"),nde=function(){function t(){}return function(e){if(!Ki(e))return{};if(v$)return v$(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();function Gi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function sde(){this.__data__=cl?cl(null):{},this.size=0}function ide(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function ode(t){var e=this.__data__;if(cl){var r=e[t];return r===R$?void 0:r}return ts.call(e,t)?e[t]:void 0}function ade(t){var e=this.__data__;return cl?e[t]!==void 0:ts.call(e,t)}function cde(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=cl&&e===void 0?R$:e,this}Gi.prototype.clear=sde;Gi.prototype.delete=ide;Gi.prototype.get=ode;Gi.prototype.has=ade;Gi.prototype.set=cde;function rs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ude(){this.__data__=[],this.size=0}function lde(t){var e=this.__data__,r=Vm(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ede.call(e,r,1),--this.size,!0}function dde(t){var e=this.__data__,r=Vm(e,t);return r<0?void 0:e[r][1]}function fde(t){return Vm(this.__data__,t)>-1}function pde(t,e){var r=this.__data__,n=Vm(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}rs.prototype.clear=ude;rs.prototype.delete=lde;rs.prototype.get=dde;rs.prototype.has=fde;rs.prototype.set=pde;function Fa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function hde(){this.size=0,this.__data__={hash:new Gi,map:new(L$||rs),string:new Gi}}function mde(t){var e=zm(this,t).delete(t);return this.size-=e?1:0,e}function gde(t){return zm(this,t).get(t)}function yde(t){return zm(this,t).has(t)}function Ede(t,e){var r=zm(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}Fa.prototype.clear=hde;Fa.prototype.delete=mde;Fa.prototype.get=gde;Fa.prototype.has=yde;Fa.prototype.set=Ede;function Ua(t){var e=this.__data__=new rs(t);this.size=e.size}function _de(){this.__data__=new rs,this.size=0}function Sde(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function vde(t){return this.__data__.get(t)}function wde(t){return this.__data__.has(t)}function bde(t,e){var r=this.__data__;if(r instanceof rs){var n=r.__data__;if(!L$||n.length<dle-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fa(n)}return r.set(t,e),this.size=r.size,this}Ua.prototype.clear=_de;Ua.prototype.delete=Sde;Ua.prototype.get=vde;Ua.prototype.has=wde;Ua.prototype.set=bde;function Rde(t,e){var r=nb(t),n=!r&&rb(t),s=!r&&!n&&$$(t),i=!r&&!n&&!s&&U$(t),o=r||n||s||i,a=o?Wle(t.length,String):[],c=a.length;for(var u in t)(e||ts.call(t,u))&&!(o&&(u=="length"||s&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||M$(u,c)))&&a.push(u);return a}function eb(t,e,r){(r!==void 0&&!Gm(t[e],r)||r===void 0&&!(e in t))&&sb(t,e,r)}function Ade(t,e,r){var n=t[e];(!(ts.call(t,e)&&Gm(n,r))||r===void 0&&!(e in t))&&sb(t,e,r)}function Vm(t,e){for(var r=t.length;r--;)if(Gm(t[r][0],e))return r;return-1}function sb(t,e,r){e=="__proto__"&&Bm?Bm(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Cde=Fde();function Wm(t){return t==null?t===void 0?Tle:wle:zi&&zi in Object(t)?Ude(t):zde(t)}function b$(t){return ll(t)&&Wm(t)==C$}function Tde(t){if(!Ki(t)||Vde(t))return!1;var e=ab(t)?Jle:Ble;return e.test(Qde(t))}function xde(t){return ll(t)&&F$(t.length)&&!!Fe[Wm(t)]}function Pde(t){if(!Ki(t))return Wde(t);var e=q$(t),r=[];for(var n in t)n=="constructor"&&(e||!ts.call(t,n))||r.push(n);return r}function k$(t,e,r,n,s){t!==e&&Cde(e,function(i,o){if(s||(s=new Ua),Ki(i))Ide(t,e,o,r,k$,n,s);else{var a=n?n(tb(t,o),i,o+"",t,e,s):void 0;a===void 0&&(a=i),eb(t,o,a)}},B$)}function Ide(t,e,r,n,s,i,o){var a=tb(t,r),c=tb(e,r),u=o.get(c);if(u){eb(t,r,u);return}var l=i?i(a,c,r+"",t,e,o):void 0,d=l===void 0;if(d){var m=nb(c),g=!m&&$$(c),E=!m&&!g&&U$(c);l=c,m||g||E?nb(a)?l=a:Yde(a)?l=Mde(a):g?(d=!1,l=Dde(c,!0)):E?(d=!1,l=kde(c,!0)):l=[]:Jde(c)||rb(c)?(l=a,rb(a)?l=Zde(a):(!Ki(a)||ab(a))&&(l=Bde(c))):d=!1}d&&(o.set(c,l),s(l,c,n,i,o),o.delete(c)),eb(t,r,l)}function Ode(t,e){return Kde(Gde(t,e,j$),t+"")}var Nde=Bm?function(t,e){return Bm(t,"toString",{configurable:!0,enumerable:!1,value:tfe(e),writable:!0})}:j$;function Dde(t,e){if(e)return t.slice();var r=t.length,n=S$?S$(r):new t.constructor(r);return t.copy(n),n}function Lde(t){var e=new t.constructor(t.byteLength);return new _$(e).set(new _$(t)),e}function kde(t,e){var r=e?Lde(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Mde(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function qde(t,e,r,n){var s=!r;r||(r={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=n?n(r[a],t[a],a,r,t):void 0;c===void 0&&(c=t[a]),s?sb(r,a,c):Ade(r,a,c)}return r}function $de(t){return Ode(function(e,r){var n=-1,s=r.length,i=s>1?r[s-1]:void 0,o=s>2?r[2]:void 0;for(i=t.length>3&&typeof i=="function"?(s--,i):void 0,o&&jde(r[0],r[1],o)&&(i=s<3?void 0:i,s=1),e=Object(e);++n<s;){var a=r[n];a&&t(e,a,n,i)}return e})}function Fde(t){return function(e,r,n){for(var s=-1,i=Object(e),o=n(e),a=o.length;a--;){var c=o[t?a:++s];if(r(i[c],c,i)===!1)break}return e}}function zm(t,e){var r=t.__data__;return Hde(e)?r[typeof e=="string"?"string":"hash"]:r.map}function ib(t,e){var r=Gle(t,e);return Tde(r)?r:void 0}function Ude(t){var e=ts.call(t,zi),r=t[zi];try{t[zi]=void 0;var n=!0}catch{}var s=N$.call(t);return n&&(e?t[zi]=r:delete t[zi]),s}function Bde(t){return typeof t.constructor=="function"&&!q$(t)?nde(D$(t)):{}}function M$(t,e){var r=typeof t;return e=e??A$,!!e&&(r=="number"||r!="symbol"&&jle.test(t))&&t>-1&&t%1==0&&t<e}function jde(t,e,r){if(!Ki(r))return!1;var n=typeof e;return(n=="number"?ob(r)&&M$(e,r.length):n=="string"&&e in r)?Gm(r[e],t):!1}function Hde(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Vde(t){return!!y$&&y$ in t}function q$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||jm;return t===r}function Wde(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function zde(t){return N$.call(t)}function Gde(t,e,r){return e=w$(e===void 0?t.length-1:e,0),function(){for(var n=arguments,s=-1,i=w$(n.length-e,0),o=Array(i);++s<i;)o[s]=n[e+s];s=-1;for(var a=Array(e+1);++s<e;)a[s]=n[s];return a[e]=r(o),Vle(t,this,a)}}function tb(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var Kde=Xde(Nde);function Xde(t){var e=0,r=0;return function(){var n=rde(),s=ple-(n-r);if(r=n,s>0){if(++e>=fle)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Qde(t){if(t!=null){try{return Hm.call(t)}catch{}try{return t+""}catch{}}return""}function Gm(t,e){return t===e||t!==t&&e!==e}var rb=b$(function(){return arguments}())?b$:function(t){return ll(t)&&ts.call(t,"callee")&&!Zle.call(t,"callee")},nb=Array.isArray;function ob(t){return t!=null&&F$(t.length)&&!ab(t)}function Yde(t){return ll(t)&&ob(t)}var $$=tde||rfe;function ab(t){if(!Ki(t))return!1;var e=Wm(t);return e==T$||e==_le||e==mle||e==ble}function F$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=A$}function Ki(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ll(t){return t!=null&&typeof t=="object"}function Jde(t){if(!ll(t)||Wm(t)!=x$)return!1;var e=D$(t);if(e===null)return!0;var r=ts.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Hm.call(r)==Yle}var U$=g$?zle(g$):xde;function Zde(t){return qde(t,B$(t))}function B$(t){return ob(t)?Rde(t,!0):Pde(t)}var efe=$de(function(t,e,r){k$(t,e,r)});function tfe(t){return function(){return t}}function j$(t){return t}function rfe(){return!1}$a.exports=efe});var iF,oF=b(()=>{iF="ffffffff-ffff-ffff-ffff-ffffffffffff"});var aF,cF=b(()=>{aF="00000000-0000-0000-0000-000000000000"});var uF,lF=b(()=>{uF=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});function ofe(t){return typeof t=="string"&&uF.test(t)}var ri,yl=b(()=>{lF();ri=ofe});function afe(t){if(!ri(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var ni,El=b(()=>{yl();ni=afe});function Yt(t,e=0){return(At[t[e+0]]+At[t[e+1]]+At[t[e+2]]+At[t[e+3]]+"-"+At[t[e+4]]+At[t[e+5]]+"-"+At[t[e+6]]+At[t[e+7]]+"-"+At[t[e+8]]+At[t[e+9]]+"-"+At[t[e+10]]+At[t[e+11]]+At[t[e+12]]+At[t[e+13]]+At[t[e+14]]+At[t[e+15]]).toLowerCase()}function cfe(t,e=0){let r=Yt(t,e);if(!ri(r))throw TypeError("Stringified UUID is invalid");return r}var At,dF,ss=b(()=>{yl();At=[];for(let t=0;t<256;++t)At.push((t+256).toString(16).slice(1));dF=cfe});function Zi(){return Jm>Zm.length-16&&(fF.default.randomFillSync(Zm),Jm=0),Zm.slice(Jm,Jm+=16)}var fF,Zm,Jm,eg=b(()=>{fF=C(require("crypto")),Zm=new Uint8Array(256),Jm=Zm.length});function ufe(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node,o=t.clockseq;if(t._v6||(i||(i=Eb),o==null&&(o=tg)),i==null||o==null){let m=t.random||(t.rng||Zi)();i==null&&(i=[m[0],m[1],m[2],m[3],m[4],m[5]],!Eb&&!t._v6&&(i[0]|=1,Eb=i)),o==null&&(o=(m[6]<<8|m[7])&16383,tg===void 0&&!t._v6&&(tg=o))}let a=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:Sb+1,u=a-_b+(c-Sb)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||a>_b)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_b=a,Sb=c,tg=o,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let d=a/4294967296*1e4&268435455;s[n++]=d>>>8&255,s[n++]=d&255,s[n++]=d>>>24&15|16,s[n++]=d>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let m=0;m<6;++m)s[n+m]=i[m];return e||Yt(s)}var Eb,tg,_b,Sb,rg,vb=b(()=>{eg();ss();_b=0,Sb=0;rg=ufe});function _l(t){let e=typeof t=="string"?ni(t):t,r=lfe(e);return typeof t=="string"?Yt(r):r}function lfe(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var wb=b(()=>{El();ss()});function dfe(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function Sl(t,e,r){function n(s,i,o,a){var c;if(typeof s=="string"&&(s=dfe(s)),typeof i=="string"&&(i=ni(i)),((c=i)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let l=0;l<16;++l)o[a+l]=u[l];return o}return Yt(u)}try{n.name=t}catch{}return n.DNS=ffe,n.URL=pfe,n}var ffe,pfe,bb=b(()=>{ss();El();ffe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",pfe="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function hfe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),pF.default.createHash("md5").update(t).digest()}var pF,hF,mF=b(()=>{pF=C(require("crypto"));hF=hfe});var mfe,gF,yF=b(()=>{bb();mF();mfe=Sl("v3",48,hF),gF=mfe});var EF,Rb,_F=b(()=>{EF=C(require("crypto")),Rb={randomUUID:EF.default.randomUUID}});function gfe(t,e,r){if(Rb.randomUUID&&!e&&!t)return Rb.randomUUID();t=t||{};let n=t.random||(t.rng||Zi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return Yt(n)}var Or,SF=b(()=>{_F();eg();ss();Or=gfe});function yfe(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),vF.default.createHash("sha1").update(t).digest()}var vF,wF,bF=b(()=>{vF=C(require("crypto"));wF=yfe});var Efe,RF,AF=b(()=>{bb();bF();Efe=Sl("v5",80,wF),RF=Efe});function Ab(t={},e,r=0){let n=rg({...t,_v6:!0},new Uint8Array(16));if(n=_l(n),e){for(let s=0;s<16;s++)e[r+s]=n[s];return e}return Yt(n)}var CF=b(()=>{ss();vb();wb()});function Cb(t){let e=typeof t=="string"?ni(t):t,r=_fe(e);return typeof t=="string"?Yt(r):r}function _fe(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}var TF=b(()=>{El();ss()});function Sfe(t,e,r){t=t||{};let n=e&&r||0,s=e||new Uint8Array(16),i=t.random||(t.rng||Zi)(),o=t.msecs!==void 0?t.msecs:Date.now(),a=t.seq!==void 0?t.seq:null,c=PF,u=xF;return o>nn&&t.msecs===void 0&&(nn=o,a!==null&&(c=null,u=null)),a!==null&&(a>2147483647&&(a=2147483647),c=a>>>19&4095,u=a&524287),(c===null||u===null)&&(c=i[6]&127,c=c<<8|i[7],u=i[8]&63,u=u<<8|i[9],u=u<<5|i[10]>>>3),o+1e4>nn&&a===null?++u>524287&&(u=0,++c>4095&&(c=0,nn++)):nn=o,PF=c,xF=u,s[n++]=nn/1099511627776&255,s[n++]=nn/4294967296&255,s[n++]=nn/16777216&255,s[n++]=nn/65536&255,s[n++]=nn/256&255,s[n++]=nn&255,s[n++]=c>>>4&15|112,s[n++]=c&255,s[n++]=u>>>13&63|128,s[n++]=u>>>5&255,s[n++]=u<<3&255|i[10]&7,s[n++]=i[11],s[n++]=i[12],s[n++]=i[13],s[n++]=i[14],s[n++]=i[15],e||Yt(s)}var xF,PF,nn,IF,OF=b(()=>{eg();ss();xF=null,PF=null,nn=0;IF=Sfe});function vfe(t){if(!ri(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var NF,DF=b(()=>{yl();NF=vfe});var Tb={};Tt(Tb,{MAX:()=>iF,NIL:()=>aF,parse:()=>ni,stringify:()=>dF,v1:()=>rg,v1ToV6:()=>_l,v3:()=>gF,v4:()=>Or,v5:()=>RF,v6:()=>Ab,v6ToV1:()=>Cb,v7:()=>IF,validate:()=>ri,version:()=>NF});var eo=b(()=>{oF();cF();El();ss();vb();wb();yF();SF();AF();CF();TF();OF();yl();DF()});var $F=_((C1e,qF)=>{"use strict";function xb(t){return typeof t=="function"}var Jt=console.error.bind(console);function vl(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function wl(t){t&&t.logger&&(xb(t.logger)?Jt=t.logger:Jt("new logger isn't a function, not replacing"))}function kF(t,e,r){if(!t||!t[e]){Jt("no original function "+e+" to wrap");return}if(!r){Jt("no wrapper function"),Jt(new Error().stack);return}if(!xb(t[e])||!xb(r)){Jt("original object and wrapper must be functions");return}var n=t[e],s=r(n,e);return vl(s,"__original",n),vl(s,"__unwrap",function(){t[e]===s&&vl(t,e,n)}),vl(s,"__wrapped",!0),vl(t,e,s),s}function wfe(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{Jt("must provide one or more modules to patch"),Jt(new Error().stack);return}if(!(e&&Array.isArray(e))){Jt("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(s){kF(n,s,r)})})}function MF(t,e){if(!t||!t[e]){Jt("no function to unwrap."),Jt(new Error().stack);return}if(!t[e].__unwrap)Jt("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function bfe(t,e){if(t)Array.isArray(t)||(t=[t]);else{Jt("must provide one or more modules to patch"),Jt(new Error().stack);return}if(!(e&&Array.isArray(e))){Jt("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){MF(r,n)})})}wl.wrap=kF;wl.massWrap=wfe;wl.unwrap=MF;wl.massUnwrap=bfe;qF.exports=wl});var HF=_((T1e,jF)=>{"use strict";var UF=$F(),Ga=UF.wrap,ng=UF.unwrap,os="wrap@before";function sg(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function Rfe(t,e){for(var r=e.length,n=0;n<r;n++){var s=e[n],i=t[os];if(typeof i=="function")i(s);else if(Array.isArray(i))for(var o=i.length,a=0;a<o;a++)i[a](s)}}function BF(t,e){var r;return r=t._events&&t._events[e],Array.isArray(r)||(r?r=[r]:r=[]),r}function Afe(t,e,r){var n=BF(t,e),s=n.filter(function(i){return r.indexOf(i)===-1});s.length>0&&Rfe(t,s)}function FF(t,e){if(t){var r=t;if(typeof t=="function")r=e(t);else if(Array.isArray(t)){r=[];for(var n=0;n<t.length;n++)r[n]=e(t[n])}return r}}jF.exports=function(e,r,n){if(!e||!e.on||!e.addListener||!e.removeListener||!e.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function s(o){return function(c,u){var l=BF(this,c).slice();try{var d=o.call(this,c,u);return Afe(this,c,l),d}finally{this.on.__wrapped||Ga(this,"on",s),this.addListener.__wrapped||Ga(this,"addListener",s)}}}function i(o){return function(c){if(!this._events||!this._events[c])return o.apply(this,arguments);var u=this._events[c];function l(d){return function(){this._events[c]=u;try{return d.apply(this,arguments)}finally{u=this._events[c],this._events[c]=FF(u,n)}}}Ga(this,"removeListener",l);try{return this._events[c]=FF(u,n),o.apply(this,arguments)}finally{ng(this,"removeListener"),this._events[c]=u}}}e[os]?typeof e[os]=="function"?sg(e,os,[e[os],r]):Array.isArray(e[os])&&e[os].push(r):sg(e,os,r),e.__wrapped||(Ga(e,"addListener",s),Ga(e,"on",s),Ga(e,"emit",i),sg(e,"__unwrap",function(){ng(e,"addListener"),ng(e,"on"),ng(e,"emit"),delete e[os],delete e.__wrapped}),sg(e,"__wrapped",!0))}});var GF=_((x1e,zF)=>{"use strict";var be=require("util"),as=require("assert"),Cfe=HF(),Ue=require("async_hooks"),bl="cls@contexts",Rl="error@context",Ye=process.env.DEBUG_CLS_HOOKED,we=-1;zF.exports={getNamespace:VF,createNamespace:Tfe,destroyNamespace:WF,reset:xfe,ERROR_SYMBOL:Rl};function Nr(t){this.name=t,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Nr.prototype.set=function(e,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[e]=r,Ye){let n=" ".repeat(this._indent<0?0:this._indent);ze(n+"CONTEXT-SET KEY:"+e+"="+r+" in ns:"+this.name+" currentUid:"+we+" active:"+be.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Nr.prototype.get=function(e){if(!this.active){if(Ye){let r=Ue.currentId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);ze(`${s}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);ze(s+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+we+" active:"+be.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),ze(`${s}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${be.inspect(this.active)}`)}return this.active[e]};Nr.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=we,Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);ze(`${s}CONTEXT-CREATED Context: (${this.name}) currentUid:${we} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${be.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e};Nr.prototype.run=function(e){let r=this.createContext();this.enter(r);try{if(Ye){let n=Ue.triggerAsyncId(),s=Ue.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);ze(`${i}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} context:${be.inspect(r)}`)}return e(r),r}catch(n){throw n&&(n[Rl]=r),n}finally{if(Ye){let n=Ue.triggerAsyncId(),s=Ue.executionAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);ze(`${i}CONTEXT-RUN END: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${s} len:${this._set.length} ${be.inspect(r)}`)}this.exit(r)}};Nr.prototype.runAndReturn=function(e){let r;return this.run(function(n){r=e(n)}),r};Nr.prototype.runPromise=function(e){let r=this.createContext();this.enter(r);let n=e(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return Ye&&ze("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),n.then(s=>(Ye&&ze("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),this.exit(r),s)).catch(s=>{throw s[Rl]=r,Ye&&ze("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+we+" len:"+this._set.length+" "+be.inspect(r)),this.exit(r),s})};Nr.prototype.bind=function(e,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return e.apply(this,arguments)}catch(i){throw i&&(i[Rl]=r),i}finally{n.exit(r)}}};Nr.prototype.enter=function(e){if(as.ok(e,"context must be provided for entering"),Ye){let r=Ue.executionAsyncId(),n=Ue.triggerAsyncId(),s=" ".repeat(this._indent<0?0:this._indent);ze(`${s}CONTEXT-ENTER: (${this.name}) currentUid:${we} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${be.inspect(e)}`)}this._set.push(this.active),this.active=e};Nr.prototype.exit=function(e){if(as.ok(e,"context must be provided for exiting"),Ye){let n=Ue.executionAsyncId(),s=Ue.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);ze(`${i}CONTEXT-EXIT: (${this.name}) currentUid:${we} triggerId:${s} asyncHooksCurrentId:${n} len:${this._set.length} ${be.inspect(e)}`)}if(this.active===e){as.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(e);r<0?(Ye&&ze("??ERROR?? context exiting but not entered - ignoring: "+be.inspect(e)),as.ok(r>=0,`context not currently entered; can't exit. 
`+be.inspect(this)+`
`+be.inspect(e))):(as.ok(r,"can't remove top context"),this._set.splice(r,1))};Nr.prototype.bindEmitter=function(e){as.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function s(o){o&&(o[bl]||(o[bl]=Object.create(null)),o[bl][n]={namespace:r,context:r.active})}function i(o){if(!(o&&o[bl]))return o;let a=o,c=o[bl];return Object.keys(c).forEach(function(u){let l=c[u];a=l.namespace.bind(a,l.context)}),a}Cfe(e,s,i)};Nr.prototype.fromException=function(e){return e[Rl]};function VF(t){return process.namespaces[t]}function Tfe(t){as.ok(t,"namespace must be given a name."),Ye&&ze(`NS-CREATING NAMESPACE (${t})`);let e=new Nr(t);return e.id=we,Ue.createHook({init(n,s,i,o){if(we=Ue.executionAsyncId(),e.active){if(e._contexts.set(n,e.active),Ye){let a=" ".repeat(e._indent<0?0:e._indent);ze(`${a}INIT [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(we===0){let a=Ue.triggerAsyncId(),c=e._contexts.get(a);if(c){if(e._contexts.set(n,c),Ye){let u=" ".repeat(e._indent<0?0:e._indent);ze(`${u}INIT USING CONTEXT FROM TRIGGERID [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${a} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}else if(Ye){let u=" ".repeat(e._indent<0?0:e._indent);ze(`${u}INIT MISSING CONTEXT [${s}] (${t}) asyncId:${n} currentUid:${we} triggerId:${a} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}}if(Ye&&s==="PROMISE"){ze(be.inspect(o,{showHidden:!0}));let a=o.parentId,c=" ".repeat(e._indent<0?0:e._indent);ze(`${c}INIT RESOURCE-PROMISE [${s}] (${t}) parentId:${a} asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} resource:${o}`)}},before(n){we=Ue.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(we),s){if(Ye){let i=Ue.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);ze(`${o}BEFORE (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`),e._indent+=2}e.enter(s)}else if(Ye){let i=Ue.triggerAsyncId(),o=" ".repeat(e._indent<0?0:e._indent);ze(`${o}BEFORE MISSING CONTEXT (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${be.inspect(e._contexts,{showHidden:!0,depth:2,colors:!0})}`),e._indent+=2}},after(n){we=Ue.executionAsyncId();let s;if(s=e._contexts.get(n)||e._contexts.get(we),s){if(Ye){let i=Ue.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);ze(`${o}AFTER (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`)}e.exit(s)}else if(Ye){let i=Ue.triggerAsyncId();e._indent-=2;let o=" ".repeat(e._indent<0?0:e._indent);ze(`${o}AFTER MISSING CONTEXT (${t}) asyncId:${n} currentUid:${we} triggerId:${i} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(s)}`)}},destroy(n){if(we=Ue.executionAsyncId(),Ye){let s=Ue.triggerAsyncId(),i=" ".repeat(e._indent<0?0:e._indent);ze(`${i}DESTROY (${t}) currentUid:${we} asyncId:${n} triggerId:${s} active:${be.inspect(e.active,{showHidden:!0,depth:2,colors:!0})} context:${be.inspect(e._contexts.get(we))}`)}e._contexts.delete(n)}}).enable(),process.namespaces[t]=e,e}function WF(t){let e=VF(t);as.ok(e,`can't delete nonexistent namespace! "`+t+'"'),as.ok(e.id,"don't assign to process.namespaces directly! "+be.inspect(e)),process.namespaces[t]=null}function xfe(){process.namespaces&&Object.keys(process.namespaces).forEach(function(t){WF(t)}),process.namespaces=Object.create(null)}process.namespaces={};function ze(...t){Ye&&process._rawDebug(`${be.format(...t)}`)}});var Ge=_((P1e,QF)=>{"use strict";var Pb=["debug","info","warn","error","silent"],KF=Pb.indexOf("error"),Pfe=Ife(process.env.AWS_XRAY_DEBUG_MODE?"debug":process.env.AWS_XRAY_LOG_LEVEL),XF={error:ig("error"),info:ig("info"),warn:ig("warn"),debug:ig("debug")};function ig(t){var e=Pb.indexOf(t),r=console[t]||console.log||(()=>{});return e>=Pfe?(n,s)=>{(n||s)&&r(Dfe(t,n,s))}:()=>{}}function Ife(t){if(t){var e=t.toLowerCase(),r=Pb.indexOf(e);return r>=0?r:KF}return KF}function Ofe(t){var e=-t.getTimezoneOffset(),r=e>=0?"+":"-",n=function(s){var i=Math.floor(Math.abs(s));return(i<10?"0":"")+i};return new Date(t.getTime()+e*60*1e3).toISOString().replace(/T/," ").replace(/Z/," ")+r+n(e/60)+":"+n(e%60)}function Nfe(){return process.env.LAMBDA_TASK_ROOT!==void 0}function Dfe(t,e,r){var n=[];Nfe()||(n.push(Ofe(new Date)),n.push(`[${t.toUpperCase()}]`)),e&&n.push(e);var s=n.join(" "),i=Lfe(r);return[s,i].filter(o=>o.length>0).join(`
  `)}function Lfe(t){return t?typeof t=="string"?t:JSON.stringify(t):""}var kfe={setLogger:function(e){XF=e},getLogger:function(){return XF}};QF.exports=kfe});var Ib=_((I1e,JF)=>{"use strict";var Mfe=require("crypto");function YF(t,e){this.init(t,e)}YF.prototype.init=function(e,r){var n=typeof e=="string"||e instanceof String?{message:e,name:""}:e;if(this.message=n.message,this.type=n.name,this.stack=[],this.remote=!!r,this.id=Mfe.randomBytes(8).toString("hex"),n.stack){var s=n.stack.split(`
`);s.shift(),s.forEach(i=>{var o=i.trim().replace(/\(|\)/g,"");o=o.substring(o.indexOf(" ")+1);var a=o.lastIndexOf(" ")>=0?o.slice(0,o.lastIndexOf(" ")):null,c=Array.isArray(a)&&!a.length?o:o.slice(o.lastIndexOf(" ")+1);c=c.split(":");var u={path:c[0],line:parseInt(c[1]),label:a||"anonymous"};this.stack.push(u)},this)}};JF.exports=YF});var eU=_((O1e,ZF)=>{ZF.exports=qfe;function qfe(t){var e=!1,r=null,n=null,s=null;return o;function i(a){s&&Ufe(s,a),e=!1,s=n;var c=r;if(r=null,n=null,!c||!c.length){if(!s||!s.length){s=null;return}c||(c=[])}e=!0,t(c,i)}function o(a,c){e?(r||(r=[],n=[]),$fe(r,a),c&&n.push(c)):(c&&(s=[c]),e=!0,t(Array.isArray(a)?a:[a],i))}}function $fe(t,e){Array.isArray(e)?Ffe(t,e):t.push(e)}function Ffe(t,e){for(var r=0;r<e.length;r++)t.push(e[r])}function Ufe(t,e){for(var r=0;r<t.length;r++)t[r](e)}});var og=_((N1e,nU)=>{"use strict";var tU=Ge(),sn={udp_ip:"127.0.0.1",udp_port:2e3,tcp_ip:"127.0.0.1",tcp_port:2e3,setDaemonAddress:function(e){process.env.AWS_XRAY_DAEMON_ADDRESS?tU.getLogger().warn("Ignoring call to setDaemonAddress as AWS_XRAY_DAEMON_ADDRESS is set. The current daemon address will not be changed."):(rU(e),tU.getLogger().info("Configured daemon address to "+e+"."))}},rU=function(e){if(e.indexOf(":")===-1)throw new Error("Invalid Daemon Address. You must specify an ip and port.");var r=e.split(" ");if(r.length===1){if(e.indexOf("udp")>-1||e.indexOf("tcp")>-1)throw new Error("Invalid Daemon Address. You must specify both tcp and udp addresses.");var n=e.split(":");if(!n[0])throw new Error("Invalid Daemon Address. You must specify an ip.");sn.udp_ip=n[0],sn.tcp_ip=n[0],sn.udp_port=n[1],sn.tcp_port=n[1]}else if(r.length===2){var s=r[0].split(":"),i=r[1].split(":"),o={};if(o[s[0]]=s,o[i[0]]=i,sn.udp_ip=o.udp[1],sn.udp_port=parseInt(o.udp[2]),sn.tcp_ip=o.tcp[1],sn.tcp_port=parseInt(o.tcp[2]),!sn.udp_port||!sn.tcp_port)throw new Error("Invalid Daemon Address. You must specify port number.")}};process.env.AWS_XRAY_DAEMON_ADDRESS&&rU(process.env.AWS_XRAY_DAEMON_ADDRESS);nU.exports=sn});var cg=_((D1e,uU)=>{"use strict";var oU=require("dgram"),Bfe=eU(),ag=Ge(),sU='{"format":"json","version":1}',iU=`
`;function jfe(t,e){var r=oU.createSocket("udp4");aU(r,t,0,function(){try{r.close()}finally{e()}})}function aU(t,e,r,n){if(r>=e.length){n();return}Hfe(t,e[r],function(){aU(t,e,r+1,n)})}function Hfe(t,e,r){var n=e.msg,s=e.offset,i=e.length,o=e.port,a=e.address,c=e.callback;t.send(n,s,i,o,a,function(u){try{c(u)}finally{r()}})}function cU(){this.batchSend=Bfe(jfe)}cU.prototype.send=function(t,e,r,n,s,i){var o={msg:t,offset:e,length:r,port:n,address:s,callback:i};this.batchSend(o)};var Vfe={daemonConfig:og(),format:function(e){return sU+iU+e.toString()},send:function(e){this.socket||(this.useBatchingTemporarySocket?this.socket=new cU:this.socket=oU.createSocket("udp4").unref());var r=this.socket,n=e.format(),s=sU+iU+n,i=Buffer.from(s),o='{"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}',a=e.type==="subsegment"?"Subsegment":"Segment";r.send(i,0,i.length,this.daemonConfig.udp_port,this.daemonConfig.udp_ip,function(c){c?c.code==="EMSGSIZE"?ag.getLogger().error(a+" too large to send: "+o+" ("+i.length+" bytes)."):ag.getLogger().error("Error occured sending segment: ",c):(ag.getLogger().debug(a+' sent: {"trace_id:"'+e.trace_id+'","id":"'+e.id+'"}'),ag.getLogger().debug("UDP message sent: "+e))})},setDaemonAddress:function(e){this.daemonConfig.setDaemonAddress(e)},getIp:function(){return this.daemonConfig.udp_ip},getPort:function(){return this.daemonConfig.udp_port},disableReusableSocket:function(){this.useBatchingTemporarySocket=!0}};uU.exports=Vfe});var lg=_((L1e,lU)=>{"use strict";var Wfe=require("crypto"),ug=Ge(),Ob=class t{constructor(e,r){this.version=1,this.timestamp=e||Math.round(new Date().getTime()/1e3).toString(16),this.id=r||Wfe.randomBytes(12).toString("hex")}static Invalid(){return new t("00000000","000000000000000000000000")}static FromString(e){let r="-";var n=new t,s,i;if(!e||typeof e!="string")return ug.getLogger().error("Empty or non-string trace ID provided"),n;let o=e.trim().split(r);return o.length!==3?(ug.getLogger().error("Unrecognized trace ID format"),n):(s=parseInt(o[0]),isNaN(s)||s<1?(ug.getLogger().error("Trace ID version must be positive integer"),n):(i=parseInt(o[1],16).toString(16),i==="NaN"?(ug.getLogger().error("Trace ID timestamp must be a hex-encoded value"),n):(i=i.padStart(8,"0"),n.version=s,n.timestamp=i,n.id=o[2],n)))}toString(){return`${this.version.toString()}-${this.timestamp}-${this.id}`}};lU.exports=Ob});var Mt=_((k1e,dU)=>{"use strict";var zfe=require("crypto"),Al=Ge(),Gfe=lg(),Nb={getCauseTypeFromHttpStatus:function(e){var r=e.toString();if(r.match(/^[4][0-9]{2}$/)!==null)return"error";if(r.match(/^[5][0-9]{2}$/)!==null)return"fault"},stripQueryStringFromPath:function(e){return e?e.split("?")[0]:""},wildcardMatch:function(e,r){if(e===void 0||r===void 0)return!1;if(e.length===1&&e.charAt(0)==="*")return!0;var n=e.length,s=r.length,i=e.indexOf("*");if(e=e.toLowerCase(),r=r.toLowerCase(),i===-1||i===n-1){var o=function(){for(var m=0,g=0;g<n;g++){var E=e.charAt(g);if(E==="*")return!0;if(E==="?"){if(m===s)return!1;m++}else{if(m>=s||E!=r.charAt(m))return!1;m++}}return m===s};return o()}var a=[];a[0]=!0;for(var c=0;c<n;c++){var u,l=e.charAt(c);if(l!="*")for(u=s-1;u>=0;u--)a[u+1]=!!a[u]&&(l==="?"||l===r.charAt(u));else{for(u=0;u<=s&&!a[u];)u++;for(u;u<=s;u++)a[u]=!0}a[0]=a[0]&&l==="*"}return a[s]},LambdaUtils:{validTraceData:function(t){var e=!1;if(t){var r=Nb.processTraceData(t);e=!!(r&&r.root&&r.parent&&r.sampled)}return e},populateTraceData:function(t,e){Al.getLogger().debug("Lambda trace data found: "+e);let r=Nb.processTraceData(e);var n=!1;return r?r.root&&!r.parent&&!r.sampled?(t.noOp=!0,n=!0):!r.root||!r.parent||!r.sampled?Al.getLogger().error("_X_AMZN_TRACE_ID is missing required information"):n=!0:(r={},Al.getLogger().error("_X_AMZN_TRACE_ID is empty or has an invalid format")),t.trace_id=Gfe.FromString(r.root).toString(),t.id=r.parent||zfe.randomBytes(8).toString("hex"),r.root&&t.trace_id!==r.root&&(Al.getLogger().error("_X_AMZN_TRACE_ID contains invalid trace ID"),n=!1),parseInt(r.sampled)?delete t.notTraced:t.notTraced=!0,r.data&&(t.additionalTraceData=r.data),Al.getLogger().debug("Segment started: "+JSON.stringify(r)),n}},processTraceData:function(e){var r={},n={},s=["root","parent","sampled","self"],i=256;return typeof e=="string"&&e&&(e.split(";").forEach(function(o){if(o){var a=o.split("=");if(a[0]&&a[1]){let c=a[0].trim(),u=a[1].trim(),l=c.toLowerCase(),d=s.indexOf(l)!==-1;d?r[l]=u:!d&&i-(l.length+u.length)>=0&&(n[c]=u,i-=c.length+u.length)}}}),r.data=n),r},objectWithoutProperties:function(e,r,n){r=Array.isArray(r)?r:[],n=typeof n=="boolean"?n:!1;var s=n?Object.create(Object.getPrototypeOf(e)):{};for(var i in e)r.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=e[i]);return s},safeParseInt:t=>!t||isNaN(t)?0:parseInt(t)};dU.exports=Nb});var si=_((M1e,hU)=>{"use strict";var{safeParseInt:fU}=Mt(),pU=Ge(),Kfe=100,Db={streamingThreshold:Kfe,getCurrentTime:function(){return Date.now()/1e3},setOrigin:function(e){this.origin=e},setPluginData:function(e){this.pluginData=e},setSDKData:function(e){this.sdkData=e},setServiceData:function(e){this.serviceData=e},setStreamingThreshold:function(e){isFinite(e)&&e>=0?(Db.streamingThreshold=e,pU.getLogger().debug("Subsegment streaming threshold set to: "+e)):pU.getLogger().error("Invalid threshold: "+e+". Must be a whole number >= 0.")},getStreamingThreshold:function(){return Db.streamingThreshold},getHttpResponseData:t=>{let e={};if(!t)return e;let r=fU(t.statusCode);return r!==0&&(e.status=r),t.headers&&t.headers["content-length"]&&(e.content_length=fU(t.headers["content-length"])),e},getJsonStringifyReplacer:()=>(t,e)=>typeof e=="bigint"?e.toString():e};hU.exports=Db});var yU=_((q1e,gU)=>{"use strict";var{getHttpResponseData:Xfe}=si(),{stripQueryStringFromPath:Qfe}=Mt();function mU(t,e,r){this.init(t,e,r)}mU.prototype.init=function(e,r,n){this.request={url:e.agent&&e.agent.protocol?e.agent.protocol+"//"+(e.host||e.getHeader("host"))+Qfe(e.path):"",method:e.method||""},n&&(this.request.traced=!0),r&&(this.response=Xfe(r))};gU.exports=mU});var Cl=_(($1e,EU)=>{"use strict";var Yfe=require("crypto"),Jfe=Ib(),Zfe=yU(),epe=cg(),dg=si(),tpe=Mt(),cs=Ge();function Re(t){this.init(t)}Re.prototype.init=function(e){if(typeof e!="string")throw new Error("Subsegment name must be of type string.");this.id=Yfe.randomBytes(8).toString("hex"),this.name=e,this.start_time=dg.getCurrentTime(),this.in_progress=!0,this.counter=0,this.notTraced=!1};Re.prototype.addNewSubsegment=function(e){let r=new Re(e);return this.addSubsegment(r),r};Re.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};Re.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new Re(e);return this.addSubsegment(r),r.notTraced=!0,r};Re.prototype.addSubsegment=function(t){if(!(t instanceof Re))throw new Error("Failed to add subsegment:"+t+' to subsegment "'+this.name+'".  Not a subsegment.');this.subsegments===void 0&&(this.subsegments=[]),t.segment=this.segment,t.parent=this,t.notTraced=t.parent.notTraced,t.noOp=t.parent.noOp,t.end_time===void 0&&this.incrementCounter(t.counter),this.subsegments.push(t)};Re.prototype.removeSubsegment=function(e){if(!(e instanceof Re))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};Re.prototype.addAttribute=function(e,r){this[e]=r};Re.prototype.addPrecursorId=function(t){typeof t!="string"&&cs.getLogger().error("Failed to add id:"+t+" to subsegment "+this.name+".  Precursor Ids must be of type string."),this.precursor_ids===void 0&&(this.precursor_ids=[]),this.precursor_ids.push(t)};Re.prototype.addAnnotation=function(t,e){if(typeof e!="boolean"&&typeof e!="string"&&!isFinite(e)){cs.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof t!="string"){cs.getLogger().error("Failed to add annotation key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[t]=e};Re.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){cs.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){cs.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to subsegment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};Re.prototype.addSqlData=function(e){this.sql=e};Re.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){cs.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.segment&&this.segment.exception){if(e===this.segment.exception.ex){this.fault=!0,this.cause={id:this.segment.exception.cause,exceptions:[]};return}delete this.segment.exception}this.segment&&(this.segment.exception={ex:e,cause:this.id}),this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.unshift(new Jfe(e,r))};Re.prototype.addRemoteRequestData=function(e,r,n){this.http=new Zfe(e,r,n),"traced"in this.http.request&&(this.traced=this.http.request.traced,delete this.http.request.traced)};Re.prototype.addFaultFlag=function(){this.fault=!0};Re.prototype.addErrorFlag=function(){this.error=!0};Re.prototype.addThrottleFlag=function(){this.throttle=!0};Re.prototype.close=function(e,r){var n=this.segment;this.end_time=dg.getCurrentTime(),delete this.in_progress,e&&this.addError(e,r),this.parent&&this.parent.decrementCounter(),n&&n.counter>dg.getStreamingThreshold()&&this.streamSubsegments()&&this.parent&&this.parent.removeSubsegment(this)};Re.prototype.incrementCounter=function(e){this.counter=e?this.counter+e+1:this.counter+1,this.parent&&this.parent.incrementCounter(e)};Re.prototype.decrementCounter=function(){this.counter--,this.parent&&this.parent.decrementCounter()};Re.prototype.isClosed=function(){return!this.in_progress};Re.prototype.flush=function(){if(!this.parent||!this.segment){cs.getLogger().error("Failed to flush subsegment: "+this.name+". Subsegment must be added to a segment chain to flush.");return}this.segment.trace_id?this.segment.notTraced!==!0&&!this.notTraced?epe.send(this):cs.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is marked as not sampled."):cs.getLogger().debug("Ignoring flush on subsegment "+this.id+". Associated segment is missing a trace ID.")};Re.prototype.streamSubsegments=function(){if(this.isClosed()&&this.counter<=0)return this.flush(),!0;if(this.subsegments&&this.subsegments.length>0){var e=[];this.subsegments.forEach(function(r){r.streamSubsegments()||e.push(r)}),this.subsegments=e}};Re.prototype.format=function(){return this.type="subsegment",this.parent&&(this.parent_id=this.parent.id),this.segment&&(this.trace_id=this.segment.trace_id),this.serialize()};Re.prototype.toString=function(){return this.serialize()};Re.prototype.toJSON=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=tpe.objectWithoutProperties(this,e,!1);return r};Re.prototype.serialize=function(e){return JSON.stringify(e??this,dg.getJsonStringifyReplacer())};EU.exports=Re});var Tl=_((F1e,vU)=>{"use strict";var rpe=require("crypto"),npe=Ib(),spe=cg(),Dr=si(),fg=Cl(),_U=lg(),SU=Mt(),ii=Ge();function qe(t,e,r){this.init(t,e,r)}qe.prototype.init=function(e,r,n){if(typeof e!="string")throw new Error("Segment name must be of type string.");var s;r&&typeof r=="string"?s=_U.FromString(r):s=new _U;var i=rpe.randomBytes(8).toString("hex"),o=Dr.getCurrentTime();this.trace_id=s.toString(),this.id=i,this.start_time=o,this.name=e||"",this.in_progress=!0,this.counter=0,n&&(this.parent_id=n),Dr.serviceData&&this.setServiceData(Dr.serviceData),Dr.pluginData&&this.addPluginData(Dr.pluginData),Dr.origin&&(this.origin=Dr.origin),Dr.sdkData&&this.setSDKData(Dr.sdkData)};qe.prototype.addIncomingRequestData=function(e){this.http=e};qe.prototype.addAnnotation=function(e,r){if(typeof r!="boolean"&&typeof r!="string"&&!isFinite(r)){ii.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Value must be of type string, number or boolean.");return}if(typeof e!="string"){ii.getLogger().error("Failed to add annotation key: "+e+" value: "+r+" to subsegment "+this.name+". Key must be of type string.");return}this.annotations===void 0&&(this.annotations={}),this.annotations[e]=r};qe.prototype.setUser=function(t){typeof t!="string"&&ii.getLogger().error("Set user: "+t+" failed. User IDs must be of type string."),this.user=t};qe.prototype.addMetadata=function(t,e,r){if(typeof t!="string"){ii.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Key must be of type string.");return}if(r&&typeof r!="string"){ii.getLogger().error("Failed to add metadata key: "+t+" value: "+e+" to segment "+this.name+". Namespace must be of type string.");return}var n=r||"default";this.metadata||(this.metadata={}),this.metadata[n]||(this.metadata[n]={}),n!=="__proto__"&&(this.metadata[n][t]=e??"")};qe.prototype.setSDKData=function(e){if(!e){ii.getLogger().error("Add SDK data: "+e+" failed.Must not be empty.");return}this.aws||(this.aws={}),this.aws.xray=e};qe.prototype.setMatchedSamplingRule=function(e){this.aws&&(this.aws=JSON.parse(JSON.stringify(this.aws))),this.aws&&this.aws.xray?this.aws.xray.rule_name=e:this.aws={xray:{rule_name:e}}};qe.prototype.setServiceData=function(e){if(!e){ii.getLogger().error("Add service data: "+e+" failed.Must not be empty.");return}this.service=e};qe.prototype.addPluginData=function(e){this.aws===void 0&&(this.aws={}),Object.assign(this.aws,e)};qe.prototype.addNewSubsegment=function(e){var r=new fg(e);return this.addSubsegment(r),r};qe.prototype.addSubsegmentWithoutSampling=function(e){this.addSubsegment(e),e.notTraced=!0};qe.prototype.addNewSubsegmentWithoutSampling=function(e){let r=new fg(e);return this.addSubsegment(r),r.notTraced=!0,r};qe.prototype.addSubsegment=function(e){if(!(e instanceof fg))throw new Error("Cannot add subsegment: "+e+". Not a subsegment.");this.subsegments===void 0&&(this.subsegments=[]),e.segment=this,e.parent=this,e.notTraced=e.parent.notTraced,e.noOp=e.parent.noOp,this.subsegments.push(e),e.end_time||this.incrementCounter(e.counter)};qe.prototype.removeSubsegment=function(e){if(!(e instanceof fg))throw new Error("Failed to remove subsegment:"+e+' from subsegment "'+this.name+'".  Not a subsegment.');if(this.subsegments!==void 0){var r=this.subsegments.indexOf(e);r>=0&&this.subsegments.splice(r,1)}};qe.prototype.addError=function(e,r){if(e==null||typeof e!="object"&&typeof e!="string"){ii.getLogger().error("Failed to add error:"+e+' to subsegment "'+this.name+'".  Not an object or string literal.');return}if(this.addFaultFlag(),this.exception){if(e===this.exception.ex){this.cause={id:this.exception.cause},delete this.exception;return}delete this.exception}this.cause===void 0&&(this.cause={working_directory:process.cwd(),exceptions:[]}),this.cause.exceptions.push(new npe(e,r))};qe.prototype.addFaultFlag=function(){this.fault=!0};qe.prototype.addErrorFlag=function(){this.error=!0};qe.prototype.addThrottleFlag=function(){this.throttle=!0};qe.prototype.isClosed=function(){return!this.in_progress};qe.prototype.incrementCounter=function(e){if(this.counter=e?this.counter+e+1:this.counter+1,this.counter>Dr.streamingThreshold&&this.subsegments&&this.subsegments.length>0){var r=[];this.subsegments.forEach(function(n){n.streamSubsegments()||r.push(n)}),this.subsegments=r}};qe.prototype.decrementCounter=function(){this.counter--,this.counter<=0&&this.isClosed()&&this.flush()};qe.prototype.close=function(t,e){this.end_time||(this.end_time=Dr.getCurrentTime()),t!==void 0&&this.addError(t,e),delete this.in_progress,delete this.exception,this.counter<=0&&this.flush()};qe.prototype.flush=function(){if(this.notTraced!==!0){delete this.exception;var e=SU.objectWithoutProperties(this,["counter","notTraced"],!0);spe.send(e)}};qe.prototype.format=function(){var e=["segment","parent","counter"];(this.subsegments==null||this.subsegments.length===0)&&e.push("subsegments");var r=SU.objectWithoutProperties(this,e,!1);return this.serialize(r)};qe.prototype.toString=function(){return this.serialize()};qe.prototype.serialize=function(e){return JSON.stringify(e??this,Dr.getJsonStringifyReplacer())};vU.exports=qe});var ai=_((U1e,AU)=>{"use strict";var xl=GF(),on=Ge(),Lb=Tl(),wU=Cl(),us=!0,oi="AWSXRay",bU="segment",RU=!1,qt={CONTEXT_MISSING_STRATEGY:{RUNTIME_ERROR:{contextMissing:function(e){throw new Error(e)}},LOG_ERROR:{contextMissing:function(e){var r=new Error(e);on.getLogger().error(r.stack)}},IGNORE_ERROR:{contextMissing:function(){}}},contextMissingStrategy:{},resolveManualSegmentParams:function(e){if(e&&!qt.isAutomaticMode()){var r=e.XRaySegment||e.XraySegment,n=e.Segment,s=null;return r&&(r instanceof Lb||r instanceof wU)?(s=r,delete e.XRaySegment,delete e.XraySegment):n&&(n instanceof Lb||n instanceof wU)&&(s=n,delete e.Segment),s}},getNamespace:function(){return xl.getNamespace(oi)||xl.createNamespace(oi)},resolveSegment:function(e){if(us)return this.getSegment();if(e&&!us)return e;!e&&!us&&qt.contextMissingStrategy.contextMissing("No sub/segment specified. A sub/segment must be provided for manual mode.")},getSegment:function(){if(us){var e=qt.getNamespace(oi).get(bU);return e?e instanceof Lb&&process.env.LAMBDA_TASK_ROOT&&e.facade==!0&&e.resolveLambdaTraceData():qt.contextMissingStrategy.contextMissing("Failed to get the current sub/segment from the context."),e}else qt.contextMissingStrategy.contextMissing("Cannot get sub/segment from context. Not supported in manual mode.")},setSegment:function(e){us?qt.getNamespace(oi).set(bU,e)||on.getLogger().warn("Failed to set the current sub/segment on the context."):qt.contextMissingStrategy.contextMissing("Cannot set sub/segment on context. Not supported in manual mode.")},isAutomaticMode:function(){return us},enableAutomaticMode:function(){us=!0,qt.getNamespace(oi),on.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to automatic mode.")},enableManualMode:function(){us=!1,xl.getNamespace(oi)&&xl.destroyNamespace(oi),on.getLogger().debug("Overriding AWS X-Ray SDK mode. Set to manual mode.")},setContextMissingStrategy:function(e){if(RU)on.getLogger().warn("Ignoring call to setContextMissingStrategy as AWS_XRAY_CONTEXT_MISSING is set. The current context missing strategy will not be changed.");else if(typeof e=="string"){var r=qt.CONTEXT_MISSING_STRATEGY[e.toUpperCase()];if(r)qt.contextMissingStrategy.contextMissing=r.contextMissing,process.env.AWS_XRAY_CONTEXT_MISSING?on.getLogger().debug("AWS_XRAY_CONTEXT_MISSING is set. Configured context missing strategy to "+process.env.AWS_XRAY_CONTEXT_MISSING+"."):on.getLogger().debug("Configured context missing strategy to: "+e);else throw new Error("Invalid context missing strategy: "+e+". Valid values are "+Object.keys(qt.CONTEXT_MISSING_STRATEGY)+".")}else if(typeof e=="function")qt.contextMissingStrategy.contextMissing=e,on.getLogger().info("Configured custom context missing strategy to function: "+e.name);else throw new Error("Context missing strategy must be either a string or a custom function.")}};process.env.AWS_XRAY_MANUAL_MODE?(us=!1,on.getLogger().debug("Starting the AWS X-Ray SDK in manual mode.")):(xl.createNamespace(oi),on.getLogger().debug("Starting the AWS X-Ray SDK in automatic mode (default)."));process.env.AWS_XRAY_CONTEXT_MISSING?(qt.setContextMissingStrategy(process.env.AWS_XRAY_CONTEXT_MISSING),RU=!0):(qt.contextMissingStrategy.contextMissing=qt.CONTEXT_MISSING_STRATEGY.LOG_ERROR.contextMissing,on.getLogger().debug("Using default context missing strategy: LOG_ERROR"));AU.exports=qt});var Mb=_((B1e,CU)=>{"use strict";var{getHttpResponseData:ipe}=si();function kb(t){this.init(t)}kb.prototype.init=function(e){var r=!!e.headers["x-forwarded-for"],n;e.connection&&(n=(e.connection.secure||e.connection.encrypted?"https://":"http://")+((e.headers.host||"")+(e.url||""))),this.request={method:e.method||"",user_agent:e.headers["user-agent"]||"",client_ip:ope(e)||"",url:n||""},r&&(this.request.x_forwarded_for=r)};var ope=function(e){var r;return e.headers["x-forwarded-for"]?r=(e.headers["x-forwarded-for"]||"").split(",")[0]:e.connection&&e.connection.remoteAddress?r=e.connection.remoteAddress:e.socket&&e.socket.remoteAddress?r=e.socket.remoteAddress:e.connection&&e.connection.socket&&e.connection.socket.remoteAddress&&(r=e.connection.socket.remoteAddress),r};kb.prototype.close=function(e){this.response=ipe(e)};CU.exports=kb});var xU=_((j1e,TU)=>{"use strict";function qb(t,e){this.init(t,e)}qb.prototype.init=function(e,r){if(this.usedThisSecond=0,typeof e=="number"&&e%1===0&&e>=0)this.fixedTarget=e;else throw new Error('Error in sampling file. Rule attribute "fixed_target" must be a non-negative integer.');if(typeof r=="number"&&r>=0&&r<=1)this.fallbackRate=r;else throw new Error('Error in sampling file. Rule attribute "rate" must be a number between 0 and 1 inclusive.')};qb.prototype.isSampled=function(){var e=Math.round(new Date().getTime()/1e3);return e!==this.thisSecond&&(this.usedThisSecond=0,this.thisSecond=e),this.usedThisSecond>=this.fixedTarget?Math.random()<this.fallbackRate:(this.usedThisSecond++,!0)};TU.exports=qb});var PU=_((H1e,ape)=>{ape.exports={default:{fixed_target:1,rate:.05},version:2}});var Fb=_((V1e,LU)=>{"use strict";var cpe=require("fs"),IU=xU(),$b=Mt(),upe=PU(),pg=Ge(),NU={shouldSample:function(e){var r=e.host,n=e.httpMethod,s=e.urlPath,i="{ http_method: "+n+", host: "+r+", url_path: "+s+" }",o;return this.rules.some(function(a){if(a.default||r==null||$b.wildcardMatch(a.host,r)&&(n==null||$b.wildcardMatch(a.http_method,n))&&(s==null||$b.wildcardMatch(a.url_path,s)))return o=a.reservoir,pg.getLogger().debug("Local sampling rule match found for "+i+". Matched "+(a.default?"default":"{ http_method: "+a.http_method+", host: "+a.host+", url_path: "+a.url_path+" }")+". Using fixed_target: "+o.fixedTarget+" and rate: "+o.fallbackRate+"."),!0}),o?o.isSampled():(pg.getLogger().debug("No sampling rule matched for "+i),!1)},setLocalRules:function(e){e?typeof e=="string"?(pg.getLogger().info("Using custom sampling rules file: "+e),this.rules=OU(JSON.parse(cpe.readFileSync(e,"utf8")))):(pg.getLogger().info("Using custom sampling rules source."),this.rules=OU(e)):this.rules=DU(upe)}},OU=function(e){if(!e.version)throw new Error('Error in sampling file. Missing "version" attribute.');if(e.version===1||e.version===2)return DU(e);throw new Error('Error in sampling file. Unknown version "'+e.version+'".')},DU=function(e){var r,n=[];if(e.default){var s=[];for(var i in e.default){if(i!=="fixed_target"&&i!=="rate")throw new Error("Error in sampling file. Invalid attribute for default: "+i+'. Valid attributes for default are "fixed_target" and "rate".');if(typeof e.default[i]!="number")throw new Error("Error in sampling file. Default "+i+" must be a number.")}if(typeof e.default.fixed_target>"u"&&s.push("fixed_target"),typeof e.default.rate>"u"&&s.push("rate"),s.length!==0)throw new Error("Error in sampling file. Missing required attributes for default: "+s+".");r={default:!0,reservoir:new IU(e.default.fixed_target,e.default.rate)}}else throw new Error('Error in sampling file. Expecting "default" object to be defined with attributes "fixed_target" and "rate".');return Array.isArray(e.rules)&&e.rules.forEach(function(o){var a={},c;e.version===2&&(c={host:1,http_method:1,url_path:1,fixed_target:1,rate:1}),e.version===1&&(c={service_name:1,http_method:1,url_path:1,fixed_target:1,rate:1});for(var u in o){var l=o[u];if(!c[u]&&u!="description")throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" has invalid attribute: "+u+".");if(u!="description"&&!l&&l!==0)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+' attribute "'+u+'" has invalid value: '+l+".");e.version===2&&(a[u]=l),e.version===1&&u==="service_name"?a.host=l:a[u]=l,delete c[u]}if(Object.keys(c).length!==0&&c.constructor===Object)throw new Error("Error in sampling file. Rule "+JSON.stringify(o)+" is missing required attributes: "+Object.keys(c)+".");var d=a;d.reservoir=new IU(o.fixed_target,o.rate),n.push(d)}),n.push(r),n};NU.setLocalRules();LU.exports=NU});var MU=_((W1e,kU)=>{"use strict";function Ka(){this.init()}Ka.prototype.init=function(){this.quota=null,this.TTL=null,this.takenThisSec=0,this.borrowedThisSec=0,this.reportInterval=1,this.reportElapsed=0};Ka.prototype.borrowOrTake=function(e,r){if(this.adjustThisSec(e),this.quota>=0&&this.TTL>=e)return this.takenThisSec>=this.quota?!1:(this.takenThisSec++,"take");if(r)return this.borrowedThisSec>=1?!1:(this.borrowedThisSec++,"borrow")};Ka.prototype.adjustThisSec=function(e){e!==this.thisSec&&(this.takenThisSec=0,this.borrowedThisSec=0,this.thisSec=e)};Ka.prototype.loadNewQuota=function(e,r,n){e&&(this.quota=e),r&&(this.TTL=r),n&&(this.reportInterval=n/10)};Ka.prototype.timeToReport=function(){return this.reportElapsed+1>=this.reportInterval?(this.reportElapsed=0,!0):(this.reportElapsed+=1,!1)};kU.exports=Ka});var $U=_((z1e,qU)=>{"use strict";var Pl=Mt(),lpe=MU();function Et(t,e,r,n,s,i,o,a,c){this.init(t,e,r,n,s,i,o,a,c)}Et.prototype.init=function(e,r,n,s,i,o,a,c,u){this.name=e,this.priority=r,this.rate=n,this.host=i,this.httpMethod=o,this.urlPath=a,this.serviceName=c,this.serviceType=u,this.reservoir=new lpe,this.borrow=!!s,this.resetStatistics()};Et.prototype.match=function(e){var r=e.host,n=e.httpMethod,s=e.serviceName,i=e.urlPath,o=e.serviceType;return this.isDefault()||(!r||Pl.wildcardMatch(this.host,r))&&(!n||Pl.wildcardMatch(this.httpMethod,n))&&(!s||Pl.wildcardMatch(this.serviceName,s))&&(!i||Pl.wildcardMatch(this.urlPath,i))&&(!o||Pl.wildcardMatch(this.serviceType,o))};Et.prototype.snapshotStatistics=function(){var e={requestCount:this.requestCount,borrowCount:this.borrowCount,sampledCount:this.sampledCount};return this.resetStatistics(),e};Et.prototype.merge=function(e){this.reservoir=e.reservoir,this.requestCount=e.requestCount,this.borrowCount=e.borrowCount,this.sampledCount=e.sampledCount,e=null};Et.prototype.isDefault=function(){return this.name==="Default"};Et.prototype.incrementRequestCount=function(){this.requestCount++};Et.prototype.incrementBorrowCount=function(){this.borrowCount++};Et.prototype.incrementSampledCount=function(){this.sampledCount++};Et.prototype.setRate=function(e){this.rate=e};Et.prototype.getRate=function(){return this.rate};Et.prototype.getName=function(){return this.name};Et.prototype.getPriority=function(){return this.priority};Et.prototype.getReservoir=function(){return this.reservoir};Et.prototype.resetStatistics=function(){this.requestCount=0,this.borrowCount=0,this.sampledCount=0};Et.prototype.canBorrow=function(){return this.borrow};Et.prototype.everMatched=function(){return this.requestCount>0};Et.prototype.timeToReport=function(){return this.reservoir.timeToReport()};qU.exports=Et});var Ub=_((G1e,jU)=>{"use strict";var dpe=require("crypto"),fpe=Ge(),ppe=$U(),hg=og(),hpe=require("util"),mpe=require("http"),UU={clientId:dpe.randomBytes(12).toString("hex"),samplingRulesPath:"/GetSamplingRules",samplingTargetsPath:"/SamplingTargets",logger:fpe,httpClient:mpe,fetchSamplingRules:function(e){let r="{}",n=FU(this.samplingRulesPath,r.length),i=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(n,o=>{var a="";o.on("data",c=>{a+=c}),o.on("error",c=>{e(c)}),o.on("end",()=>{var c;try{c=JSON.parse(a)}catch(l){e(l);return}if(!c){e(new Error("AWS X-Ray GetSamplingRules API returned empty response"));return}var u=ype(c);e(null,u)})});i.on("error",()=>{e(new Error(`Failed to connect to X-Ray daemon at ${n.hostname}:${n.port} to get sampling rules.`))}),i.write(r),i.end()},fetchTargets:function(e,r){let n=JSON.stringify(gpe(e)),s=FU(this.samplingTargetsPath,n.length),o=(this.httpClient.__request?this.httpClient.__request:this.httpClient.request)(s,a=>{var c="";a.on("data",u=>{c+=u}),a.on("error",u=>{r(u)}),a.on("end",()=>{var u;try{u=JSON.parse(c)}catch(m){r(m);return}if(!u||typeof u.LastRuleModification!="number"){r(new Error("AWS X-Ray SamplingTargets API returned invalid response"));return}var l=Epe(u),d=BU(u.LastRuleModification);r(null,l,d)})});o.on("error",()=>{r(new Error(`Failed to connect to X-Ray daemon at ${s.hostname}:${s.port} to get sampling targets.`))}),o.write(n),o.end()}},gpe=function(e){var r=[],n=Math.floor(new Date().getTime()/1e3);return e.forEach(function(s){var i=s.snapshotStatistics(),o={RuleName:s.getName(),ClientID:UU.clientId,RequestCount:i.requestCount,BorrowCount:i.borrowCount,SampledCount:i.sampledCount,Timestamp:n};r.push(o)}),{SamplingStatisticsDocuments:r}},ype=function(e){var r=[],n=e.SamplingRuleRecords||[];return n.forEach(function(s){if(s=s.SamplingRule,_pe(s)){var i=new ppe(s.RuleName,s.Priority,s.FixedRate,s.ReservoirSize,s.Host,s.HTTPMethod,s.URLPath,s.ServiceName,s.ServiceType);r.push(i)}}),r},Epe=function(e){var r=e.SamplingTargetDocuments||[],n={};return r.forEach(function(s){var i={rate:s.FixedRate,quota:s.ReservoirQuota,TTL:BU(s.ReservoirQuotaTTL),interval:s.Interval};n[s.RuleName]=i}),n},_pe=function(e){return e.Version===1&&e.ResourceARN==="*"&&e.Attributes&&Object.keys(e.Attributes).length===0&&e.ServiceType&&e.RuleName&&e.Priority&&typeof e.FixedRate=="number"},BU=function(e){return new Date(e).getTime()/1e3},FU=function(e,r){return{hostname:hg.tcp_ip,port:hg.tcp_port,method:"POST",path:e,headers:{"Content-Type":"application/json","Content-Length":r,Host:hpe.format("%s:%d",hg.tcp_ip,hg.tcp_port)}}};jU.exports=UU});var mg=_((K1e,HU)=>{"use strict";var Spe=3600,Bb={rules:[],lastUpdated:null,getMatchedRule:function(e,r){if(vpe(r))return null;var n;return this.rules.forEach(function(s){!n&&s.match(e)&&(n=s),s.isDefault()&&!n&&(n=s)}),n},loadRules:function(e){var r={};this.rules.forEach(function(n){r[n.getName()]=n}),this.rules=e,this.rules.forEach(function(n){var s=r[n.getName()];s&&n.merge(s)}),this.rules.sort(function(n,s){var i=n.getPriority()-s.getPriority();return i!==0?i:n.getName()>s.getName()?1:-1})},loadTargets:function(e){this.rules.forEach(function(r){var n=e[r.getName()];n&&(r.getReservoir().loadNewQuota(n.quota,n.TTL,n.interval),r.setRate(n.rate))})},getRules:function(){return this.rules},timestamp:function(e){this.lastUpdated=e},getLastUpdated:function(){return this.lastUpdated}},vpe=function(e){return Bb.getLastUpdated()?e>Bb.getLastUpdated()+Spe:!0};HU.exports=Bb});var Hb=_((X1e,GU)=>{"use strict";var jb=Ge(),wpe=Ub(),VU=mg(),bpe=5*60*1e3,Rpe={start:function(){this.poller&&clearInterval(this.poller),WU(!1),this.poller=setInterval(WU,bpe),this.poller.unref()}},WU=function(e){if(e=typeof e>"u"?!0:e,e){var r=Cpe();setTimeout(zU,r)}else zU()},zU=function(){try{Ape()}catch(e){jb.getLogger().warn("Encountered unexpected exception when fetching sampling rules: "+e)}},Ape=function(){var e=Math.floor(new Date().getTime()/1e3);wpe.fetchSamplingRules(function(r,n){r?jb.getLogger().warn("Failed to retrieve sampling rules from X-Ray service:",r):n.length!==0&&(VU.loadRules(n),VU.timestamp(e),jb.getLogger().info("Successfully refreshed centralized sampling rule cache."))})},Cpe=function(){return Math.random()*5};GU.exports=Rpe});var YU=_((Q1e,QU)=>{"use strict";var Tpe=Hb(),xpe=Ub(),Vb=mg(),gg=Ge(),KU=10*1e3,XU={interval:KU,start:function(){this.poller=setInterval(Ppe,KU+Npe()),this.poller.unref()}},Ppe=function(){try{Ipe()}catch(e){gg.getLogger().warn("Encountered unexpected exception when fetching sampling targets: "+e)}},Ipe=function(){var e=Ope();e&&e.length>0&&xpe.fetchTargets(e,function(r,n,s){if(r){gg.getLogger().warn("Failed to retrieve sampling targets from X-Ray service:",r);return}Vb.loadTargets(n),s>Vb.getLastUpdated()&&(gg.getLogger().info("Performing out-of-band sampling rule polling to fetch updated rules."),Tpe.start()),gg.getLogger().info("Successfully reported rule statistics to get new sampling quota.")})},Ope=function(){var e=Vb.getRules(),r=[];return e.forEach(function(n){n.everMatched()&&n.timeToReport()&&r.push(n)}),r},Npe=function(){return Math.random()/XU.interval};QU.exports=XU});var ZU=_((Y1e,JU)=>{"use strict";var Wb=Ge(),Dpe=require("util"),Lpe=si(),kpe={localSampler:Fb(),rulePoller:Hb(),targetPoller:YU(),ruleCache:mg(),started:!1,shouldSample:function(e){try{this.started||this.start(),e.serviceType||(e.serviceType=Lpe.origin);var r=Math.floor(new Date().getTime()/1e3),n=this.ruleCache.getMatchedRule(e,r);return n?(Wb.getLogger().debug(Dpe.format("Rule %s is matched.",n.getName())),Mpe(n,r)):(Wb.getLogger().info("No effective centralized sampling rule match. Fallback to local rules."),this.localSampler.shouldSample(e))}catch(s){Wb.getLogger().error("Unhandled exception by the SDK during making sampling decisions: "+s)}},setLocalRules:function(e){this.localSampler.setLocalRules(e)},start:function(){this.started||(this.rulePoller.start(),this.targetPoller.start(),this.started=!0)}},Mpe=function(e,r){e.incrementRequestCount();var n=e.getReservoir(),s=!0,i=n.borrowOrTake(r,e.canBorrow());return i==="borrow"?e.incrementBorrowCount():i==="take"||Math.random()<=e.getRate()?e.incrementSampledCount():s=!1,s?e.getName():!1};JU.exports=kpe});var Gb=_((J1e,eB)=>{"use strict";var qpe=Tl(),$pe=Mb(),Fpe=Ge(),Upe=Mt(),Bpe=Mt().wildcardMatch,jpe=Mt().processTraceData,zb="x-amzn-trace-id",Hpe=!!process.env.AWS_XRAY_TRACING_NAME,Vpe={defaultName:process.env.AWS_XRAY_TRACING_NAME,dynamicNaming:!1,hostPattern:null,sampler:ZU(),enableDynamicNaming:function(t){if(this.dynamicNaming=!0,t&&typeof t!="string")throw new Error("Host pattern must be a string.");this.hostPattern=t||null},processHeaders:function(e){var r={};return e&&e.headers&&e.headers[zb]&&(r=jpe(e.headers[zb])),r},resolveName:function(e){var r;return this.dynamicNaming&&e?r=this.hostPattern?Bpe(this.hostPattern,e)?e:this.defaultName:e:r=this.defaultName,r},resolveSampling:function(e,r,n){var s;if(e.sampled==="1")s=!0;else if(e.sampled==="0")s=!1;else{var i={host:n.req.headers.host,httpMethod:n.req.method,urlPath:n.req.url,serviceName:r.name};s=this.sampler.shouldSample(i),(s instanceof String||typeof s=="string")&&(r.setMatchedSamplingRule(s),s=!0)}e.sampled==="?"&&n.header&&n.header(zb,"Root="+e.root+";Sampled="+(s?"1":"0")),s||(r.notTraced=!0)},setDefaultName:function(e){Hpe||(this.defaultName=e)},disableCentralizedSampling:function(){this.sampler=Fb()},setSamplingRules:function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local sampling rules file, or supply an object containing the rules.");this.sampler.setLocalRules(e)},middlewareLog:function(e,r,n){Fpe.getLogger().debug(e+": { url: "+r+", name: "+n.name+", trace_id: "+n.trace_id+", id: "+n.id+", sampled: "+!n.notTraced+" }")},traceRequestResponseCycle:function(e,r){var n=this.processHeaders(e),s=this.resolveName(e.headers.host),i=new qpe(s,n.root,n.parent);r.req||(r.req=e),this.resolveSampling(n,i,r),i.addIncomingRequestData(new $pe(e)),this.middlewareLog("Starting middleware segment",e.url,i);var o=this.middlewareLog,a=!1,c=function(){if(a)return;a=!0,r.statusCode===429&&i.addThrottleFlag();let u=Upe.getCauseTypeFromHttpStatus(r.statusCode);u&&(i[u]=!0),i.http.close(r),i.close(),o("Closed middleware segment successfully",e.url,i)};return r.on("finish",c),r.on("close",c),i}};eB.exports=Vpe});var tB=_(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.InvokeStore=void 0;var Wpe=require("async_hooks"),Kb=process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="1"||process.env.AWS_LAMBDA_NODEJS_NO_GLOBAL_AWSLAMBDA==="true";Kb||(globalThis.awslambda=globalThis.awslambda||{});var zpe={REQUEST_ID:Symbol("_AWS_LAMBDA_REQUEST_ID"),X_RAY_TRACE_ID:Symbol("_AWS_LAMBDA_X_RAY_TRACE_ID")},Il=class{static run(e,r){return this.storage.run({...e},r)}static getContext(){return this.storage.getStore()}static get(e){return this.storage.getStore()?.[e]}static set(e,r){if(this.isProtectedKey(e))throw new Error("Cannot modify protected Lambda context field");let n=this.storage.getStore();n&&(n[e]=r)}static getRequestId(){return this.get(this.PROTECTED_KEYS.REQUEST_ID)??"-"}static getXRayTraceId(){return this.get(this.PROTECTED_KEYS.X_RAY_TRACE_ID)}static hasContext(){return this.storage.getStore()!==void 0}static isProtectedKey(e){return e===this.PROTECTED_KEYS.REQUEST_ID||e===this.PROTECTED_KEYS.X_RAY_TRACE_ID}};f(Il,"storage",new Wpe.AsyncLocalStorage),f(Il,"PROTECTED_KEYS",zpe);var yg;!Kb&&globalThis.awslambda?.InvokeStore?yg=globalThis.awslambda.InvokeStore:(yg=Il,!Kb&&globalThis.awslambda&&(globalThis.awslambda.InvokeStore=yg));Eg.InvokeStore=yg});var sB=_((tke,nB)=>{"use strict";var _g=ai(),Gpe=Gb(),Xb=Mt().LambdaUtils,Kpe=Tl(),Xpe=cg(),Qpe=si(),Yb=Ge(),rB=lg(),{InvokeStore:Ype}=tB(),Qb=null;nB.exports.init=function(){_g.enableManualMode=function(){Yb.getLogger().warn("AWS Lambda does not support AWS X-Ray manual mode.")},Xpe.disableReusableSocket(),Qpe.setStreamingThreshold(0),Yb.getLogger().info("Disabling centralized sampling in Lambda environment."),Gpe.disableCentralizedSampling();var e=_g.getNamespace();e.enter(e.createContext()),_g.setSegment(Jpe())};var Jpe=function(){var e=new Kpe("facade"),r=["addNewSubsegment","addSubsegment","removeSubsegment","toString","addSubsegmentWithoutSampling","addNewSubsegmentWithoutSampling"],n=["incrementCounter","decrementCounter","isClosed","close","format","flush"],s=process.env._X_AMZN_TRACE_ID;for(var i in e)typeof e[i]=="function"&&r.indexOf(i)===-1&&(n.indexOf(i)===-1?e[i]=function(){var o=i;return function(){Yb.getLogger().warn('Function "'+o+'" cannot be called on an AWS Lambda segment. Please use a subsegment to record data.')}}():e[i]=function(){});return e.trace_id=rB.Invalid().toString(),e.isClosed=function(){return!0},e.in_progress=!1,e.counter=1,e.notTraced=!0,e.facade=!0,e.reset=function(){this.trace_id=rB.Invalid().toString(),this.id="00000000",delete this.subsegments,this.notTraced=!0},e.resolveLambdaTraceData=function(){let a=Ype.getXRayTraceId(),c=process.env._X_AMZN_TRACE_ID;var u=a??c;u?u!=Qb&&(this.reset(),Xb.populateTraceData(e,u)&&(Qb=u)):(this.reset(),_g.contextMissingStrategy.contextMissing("Missing AWS Lambda trace data for X-Ray. Ensure Active Tracing is enabled and no subsegments are created outside the function handler."))},Xb.validTraceData(s)&&Xb.populateTraceData(e,s)&&(Qb=s),e}});var iB=_((rke,Zpe)=>{Zpe.exports={name:"aws-xray-sdk-core",version:"3.11.0",description:"AWS X-Ray SDK for Javascript",author:"Amazon Web Services",contributors:["Sandra McMullen <mcmuls@amazon.com>","William Armiros <armiros@amazon.com>","Moritz Onken <onken@netcubed.de>"],files:["dist/lib/**/*","LICENSE","README.md"],main:"dist/lib/index.js",types:"dist/lib/index.d.ts",engines:{node:">= 14.x"},directories:{test:"test"},"//":"@types/cls-hooked is exposed in API so must be in dependencies, not devDependencies",dependencies:{"@aws-sdk/types":"^3.4.1","@aws/lambda-invoke-store":"^0.0.1","@smithy/service-error-classification":"^2.0.4","@types/cls-hooked":"^4.3.3","atomic-batcher":"^1.0.2","cls-hooked":"^4.2.2",semver:"^7.5.3"},scripts:{prepare:"npm run compile",compile:"tsc && npm run copy-lib && npm run copy-test","copy-lib":"find lib -type f \\( -name '*.d.ts' -o -name '*.json' \\) | xargs -I % ../../scripts/cp-with-structure.sh % dist","copy-test":"find test -name '*.json' | xargs -I % ../../scripts/cp-with-structure.sh % dist",lint:"eslint .","lint:fix":"eslint . --fix",test:"npm run compile && mocha --recursive ./dist/test/ -R spec && tsd && mocha --recursive ./dist/test_async/ -R spec","test-d":"tsd","test-async":"npm run compile && mocha --recursive ./dist/test_async/ -R spec",clean:"rm -rf dist && rm -rf node_modules",testcov:"nyc npm run test",reportcov:"nyc report --reporter=text-lcov > coverage.lcov"},keywords:["amazon","api","aws","core","xray","x-ray","x ray"],license:"Apache-2.0",repository:"https://github.com/aws/aws-xray-sdk-node/tree/master/packages/core",gitHead:"4e6f43ed3c4686418c2139d4b86ab5513e0ca8ed"}});var cB=_((nke,aB)=>{"use strict";var Jb=require("http"),oB={METADATA_TIMEOUT:1e3,getPluginMetadata:function(t,e){var s=5,i=function(){var o=Jb.__request?Jb.__request:Jb.request,a=o(t,function(c){var u="";c.on("data",function(l){u+=l}),c.on("end",function(){if(this.statusCode===200||this.statusCode===300){try{u=JSON.parse(u)}catch(l){e(l);return}e(null,u)}else s>0&&Math.floor(this.statusCode/100)===5?(s--,setTimeout(i,250)):e(new Error(`Failed to retrieve metadata with options: ${t}`))})});a.on("error",function(c){e(c)}),a.on("timeout",function(){a.abort()}),a.setTimeout(oB.METADATA_TIMEOUT),a.end()};i()}};aB.exports=oB});var pB=_((ske,fB)=>{"use strict";var lB=cB(),uB=Ge(),Zb=require("http"),ehe={getData:function(t){let e="/latest/dynamic/instance-identity/document";function r(n){let s=dB(e,"GET",n?{"X-aws-ec2-metadata-token":n}:{});lB.getPluginMetadata(s,function(i,o){if(i||!o){uB.getLogger().error("Error loading EC2 plugin metadata: ",i?i.toString():"Could not retrieve data from IMDS."),t();return}let a={ec2:{instance_id:o.instanceId,availability_zone:o.availabilityZone,instance_size:o.instanceType,ami_id:o.imageId}};t(a)})}the(function(n){n===null&&uB.getLogger().debug("EC2Plugin failed to get token from IMDSv2. Falling back to IMDSv1."),r(n)})},originName:"AWS::EC2::Instance"};function the(t){let e=Zb.__request?Zb.__request:Zb.request,s=dB("/latest/api/token","PUT",{"X-aws-ec2-metadata-token-ttl-seconds":60}),i=e(s,function(o){let a="";o.on("data",function(c){a+=c}),o.on("end",function(){this.statusCode===200||this.statusCode===300?t(a):t(null)})});i.on("error",function(){t(null)}),i.on("timeout",function(){i.abort(),t(null)}),i.setTimeout(lB.METADATA_TIMEOUT),i.end()}function dB(t,e,r){return e||(e="GET"),r||(r={}),{host:"169.254.169.254",path:t,method:e,headers:r}}fB.exports=ehe});var mB=_((ike,hB)=>{"use strict";var rhe=require("os"),nhe={getData:function(t){t({ecs:{container:rhe.hostname()}})},originName:"AWS::ECS::Container"};hB.exports=nhe});var yB=_((oke,gB)=>{"use strict";var she=require("fs"),ihe=Ge(),ohe="/var/elasticbeanstalk/xray/environment.conf",ahe={getData:function(t){she.readFile(ohe,"utf8",function(e,r){if(e)ihe.getLogger().error("Error loading Elastic Beanstalk plugin:",e.stack),t();else{var n=JSON.parse(r),s={elastic_beanstalk:{environment:n.environment_name,version_label:n.version_label,deployment_id:n.deployment_id}};t(s)}})},originName:"AWS::ElasticBeanstalk::Environment"};gB.exports=ahe});var EB=_((ake,che)=>{che.exports={services:{dynamodb:{operations:{batchGetItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity"]},batchWriteItem:{request_descriptors:{RequestItems:{get_keys:!0,rename_to:"table_names"}},response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},createTable:{request_parameters:["GlobalSecondaryIndexes","LocalSecondaryIndexes","ProvisionedThroughput","TableName"]},deleteItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},deleteTable:{request_parameters:["TableName"]},describeTable:{request_parameters:["TableName"]},getItem:{request_parameters:["ConsistentRead","ProjectionExpression","TableName"],response_parameters:["ConsumedCapacity"]},listTables:{request_parameters:["ExclusiveStartTableName","Limit"],response_descriptors:{TableNames:{list:!0,get_count:!0,rename_to:"table_count"}}},putItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},query:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","ScanIndexForward","Select","TableName"],response_parameters:["ConsumedCapacity"]},scan:{request_parameters:["AttributesToGet","ConsistentRead","IndexName","Limit","ProjectionExpression","Segment","Select","TableName","TotalSegments"],response_parameters:["ConsumedCapacity","Count","ScannedCount"]},updateItem:{request_parameters:["TableName"],response_parameters:["ConsumedCapacity","ItemCollectionMetrics"]},updateTable:{request_parameters:["AttributeDefinitions","GlobalSecondaryIndexUpdates","ProvisionedThroughput","TableName"]}}},sqs:{operations:{addPermission:{request_parameters:["Label","QueueUrl"]},changeMessageVisibility:{request_parameters:["QueueUrl","VisibilityTimeout"]},changeMessageVisibilityBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},createQueue:{request_parameters:["Attributes","QueueName"]},deleteMessage:{request_parameters:["QueueUrl"]},deleteMessageBatch:{request_parameters:["QueueUrl"],response_parameters:["Failed"]},deleteQueue:{request_parameters:["QueueUrl"]},getQueueAttributes:{request_parameters:["QueueUrl"],response_parameters:["Attributes"]},getQueueUrl:{request_parameters:["QueueName","QueueOwnerAWSAccountId"],response_parameters:["QueueUrl"]},listDeadLetterSourceQueues:{request_parameters:["QueueUrl"],response_parameters:["QueueUrls"]},listQueues:{request_parameters:["QueueNamePrefix"],response_descriptors:{QueueUrls:{list:!0,get_count:!0,rename_to:"queue_count"}}},purgeQueue:{request_parameters:["QueueUrl"]},receiveMessage:{request_parameters:["AttributeNames","MaxNumberOfMessages","MessageAttributeNames","QueueUrl","VisibilityTimeout","WaitTimeSeconds"],response_descriptors:{Messages:{list:!0,get_count:!0,rename_to:"message_count"}}},removePermission:{request_parameters:["QueueUrl"]},sendMessage:{request_parameters:["DelaySeconds","QueueUrl"],request_descriptors:{MessageAttributes:{get_keys:!0,rename_to:"message_attribute_names"}},response_parameters:["MessageId"]},sendMessageBatch:{request_parameters:["QueueUrl"],request_descriptors:{Entries:{list:!0,get_count:!0,rename_to:"message_count"}},response_descriptors:{Failed:{list:!0,get_count:!0,rename_to:"failed_count"},Successful:{list:!0,get_count:!0,rename_to:"successful_count"}}},setQueueAttributes:{request_parameters:["QueueUrl"],request_descriptors:{Attributes:{get_keys:!0,rename_to:"attribute_names"}}}}},sns:{operations:{publish:{request_parameters:["TopicArn"]},publishBatch:{request_parameters:["TopicArn"]}}},lambda:{operations:{invoke:{request_parameters:["FunctionName","InvocationType","LogType","Qualifier"],response_parameters:["FunctionError","StatusCode"]},invokeAsync:{request_parameters:["FunctionName"],response_parameters:["Status"]}}},s3:{operations:{abortMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},completeMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},copyObject:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},createMultipartUpload:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},deleteObjects:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLocation:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},getObjectTorrent:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headBucket:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},headObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketAnalyticsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketInventoryConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listBucketMetricsConfigurations:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listMultipartUploads:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectVersions:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjects:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listObjectsV2:{request_parameters:["Prefix"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},listParts:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAccelerateConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAcl:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketAnalyticsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketCors:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketEncryption:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketInventoryConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycle:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLifecycleConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketLogging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketMetricsConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotification:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketNotificationConfiguration:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketPolicy:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketReplication:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketRequestPayment:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketTagging:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketVersioning:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putBucketWebsite:{request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObject:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectAcl:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},putObjectTagging:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},restoreObject:{request_parameters:["Key","VersionId"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPart:{request_parameters:["Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}},uploadPartCopy:{request_parameters:["CopySource","Key"],request_descriptors:{Bucket:{rename_to:"bucket_name"}}}}},sagemakerruntime:{operations:{invokeEndpoint:{request_parameters:["EndpointName"]}}}}}});var RB=_((cke,bB)=>{"use strict";var vB=require("fs"),Xa=Ge(),uhe=EB(),Sg={REQ_DESC:"request_descriptors",REQ_PARAMS:"request_parameters",RES_DESC:"response_descriptors",RES_PARAMS:"response_parameters"};function wg(t){this.init(t)}wg.prototype.init=function(e){e?typeof e=="string"?(Xa.getLogger().info("Using custom AWS whitelist file: "+e),this.services=vg(JSON.parse(vB.readFileSync(e,"utf8")))):(Xa.getLogger().info("Using custom AWS whitelist source."),this.services=vg(e)):this.services=uhe.services};wg.prototype.append=function(e){var r={};typeof e=="string"?(Xa.getLogger().info("Appending AWS whitelist with custom file: "+e),r=vg(JSON.parse(vB.readFileSync(e,"utf8")))):(Xa.getLogger().info("Appending AWS whitelist with a custom source."),r=vg(e));for(var n in r)this.services[n]=r[n]};wg.prototype.capture=function(e,r){var n=r.request.operation,s=this.services[e]!==void 0?this.services[e].operations[n]:null;if(s===null){Xa.getLogger().debug('Call "'+e+"."+n+'" is not whitelisted for additional data capturing. Ignoring.');return}var i={};for(var o in s){var a=s[o];o===Sg.REQ_PARAMS?_B(a,r.request.params,i):o===Sg.REQ_DESC?SB(a,r.request.params,i):o===Sg.RES_PARAMS?r.data&&_B(a,r.data,i):o===Sg.RES_DESC?r.data&&SB(a,r.data,i):Xa.getLogger().error('Unknown parameter type "'+o+'". Must be "request_descriptors", "response_descriptors", "request_parameters" or "response_parameters".')}return i};function _B(t,e,r){t.forEach(function(n){if(typeof e[n]<"u"){var s=wB(n);this[s]=e[n]}},r)}function SB(t,e,r){for(var n in t){var s=t[n];if(typeof e[n]<"u"){var i;if(s.list&&s.get_count?i=e[n]?e[n].length:0:i=s.get_keys===!0?Object.keys(e[n]):e[n],typeof s.rename_to=="string")r[s.rename_to]=i;else{var o=wB(n);r[o]=i}}}}function wB(t){return t==="IPAddress"?"ip_address":t.split(/(?=[A-Z])/).join("_").toLowerCase()}function vg(t){var e=t;if(e.services===void 0)throw new Error('Document formatting is incorrect. Expecting "services" param.');return e.services}bB.exports=wg});var Ol=_((uke,bg)=>{"use strict";var AB=RB(),e0=new AB;function t0(t,e){this.init(t,e)}t0.prototype.init=function(e,r){this.operation=fhe(e.request.operation)||"",e&&e.request&&e.request.httpRequest&&e.request.httpRequest.region&&(this.region=e.request.httpRequest.region),e&&e.requestId&&(this.request_id=e.requestId),this.retries=e.retryCount||0,e.extendedRequestId&&r&&r.toLowerCase()==="s3"&&(this.id_2=e.extendedRequestId),r&&this.addData(e0.capture(r.toLowerCase(),e))};t0.prototype.addData=function(e){for(var r in e)this[r]=e[r]};var lhe=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");e0=new AB(e)},dhe=function(e){if(!e||e instanceof String||!(typeof e=="string"||e instanceof Object))throw new Error("Please specify a path to the local whitelist file, or supply a whitelist source object.");e0.append(e)};function fhe(t){if(t)return t.charAt(0).toUpperCase()+t.slice(1)}bg.exports=t0;bg.exports.appendAWSWhitelist=dhe;bg.exports.setAWSWhitelist=lhe});var Ag=_((lke,Rg)=>{"use strict";var to=ai(),Nl=Ge(),CB=function(e,r,n){r0(e,r);var s,i,o=to.resolveSegment(n);if(!o)return Nl.getLogger().warn("Failed to capture function."),r();s=o.addNewSubsegment(e),i=TB(r,s);try{let a=i(s);return s.close(),a}catch(a){throw s.close(a),a}},phe=function(e,r,n){r0(e,r);var s,i,o=to.resolveSegment(n);if(!o)return Nl.getLogger().warn("Failed to capture async function."),r();s=o.addNewSubsegment(e),i=TB(r,s);try{return i(s)}catch(a){throw s.close(a),a}},hhe=function(e,r,n){r0(e,r);var s=to.resolveSegment(n);return s?(s.incrementCounter(),function(){var i=to.resolveSegment(n),o=Array.prototype.slice.call(arguments);CB(e,r.bind.apply(r,[null].concat(o)),i),s.decrementCounter()}.bind(this)):(Nl.getLogger().warn("Failed to capture callback function."),r)};function TB(t,e){var r;if(to.isAutomaticMode()){var n=to.getNamespace(),s=function(){var i;return n.run(function(){to.setSegment(e),i=t(e)}),i};r=s}else r=t;return r}function r0(t,e){var r;if(!t||typeof t!="string")throw r='Param "name" must be a non-empty string.',Nl.getLogger().error(r),new Error(r);if(typeof e!="function")throw r='Param "fcn" must be a function.',Nl.getLogger().error(r),new Error(r)}Rg.exports.captureFunc=CB;Rg.exports.captureAsyncFunc=phe;Rg.exports.captureCallbackFunc=hhe});var Dl=_((dke,xB)=>{"use strict";var mhe="2.0.0",ghe=Number.MAX_SAFE_INTEGER||9007199254740991,yhe=16,Ehe=250,_he=["major","premajor","minor","preminor","patch","prepatch","prerelease"];xB.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:yhe,MAX_SAFE_BUILD_LENGTH:Ehe,MAX_SAFE_INTEGER:ghe,RELEASE_TYPES:_he,SEMVER_SPEC_VERSION:mhe,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Ll=_((fke,PB)=>{"use strict";var She=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};PB.exports=She});var Qa=_((An,IB)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:n0,MAX_SAFE_BUILD_LENGTH:vhe,MAX_LENGTH:whe}=Dl(),bhe=Ll();An=IB.exports={};var Rhe=An.re=[],Ahe=An.safeRe=[],B=An.src=[],Che=An.safeSrc=[],j=An.t={},The=0,s0="[a-zA-Z0-9-]",xhe=[["\\s",1],["\\d",whe],[s0,vhe]],Phe=t=>{for(let[e,r]of xhe)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},ne=(t,e,r)=>{let n=Phe(e),s=The++;bhe(t,s,e),j[t]=s,B[s]=e,Che[s]=n,Rhe[s]=new RegExp(e,r?"g":void 0),Ahe[s]=new RegExp(n,r?"g":void 0)};ne("NUMERICIDENTIFIER","0|[1-9]\\d*");ne("NUMERICIDENTIFIERLOOSE","\\d+");ne("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${s0}*`);ne("MAINVERSION",`(${B[j.NUMERICIDENTIFIER]})\\.(${B[j.NUMERICIDENTIFIER]})\\.(${B[j.NUMERICIDENTIFIER]})`);ne("MAINVERSIONLOOSE",`(${B[j.NUMERICIDENTIFIERLOOSE]})\\.(${B[j.NUMERICIDENTIFIERLOOSE]})\\.(${B[j.NUMERICIDENTIFIERLOOSE]})`);ne("PRERELEASEIDENTIFIER",`(?:${B[j.NONNUMERICIDENTIFIER]}|${B[j.NUMERICIDENTIFIER]})`);ne("PRERELEASEIDENTIFIERLOOSE",`(?:${B[j.NONNUMERICIDENTIFIER]}|${B[j.NUMERICIDENTIFIERLOOSE]})`);ne("PRERELEASE",`(?:-(${B[j.PRERELEASEIDENTIFIER]}(?:\\.${B[j.PRERELEASEIDENTIFIER]})*))`);ne("PRERELEASELOOSE",`(?:-?(${B[j.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${B[j.PRERELEASEIDENTIFIERLOOSE]})*))`);ne("BUILDIDENTIFIER",`${s0}+`);ne("BUILD",`(?:\\+(${B[j.BUILDIDENTIFIER]}(?:\\.${B[j.BUILDIDENTIFIER]})*))`);ne("FULLPLAIN",`v?${B[j.MAINVERSION]}${B[j.PRERELEASE]}?${B[j.BUILD]}?`);ne("FULL",`^${B[j.FULLPLAIN]}$`);ne("LOOSEPLAIN",`[v=\\s]*${B[j.MAINVERSIONLOOSE]}${B[j.PRERELEASELOOSE]}?${B[j.BUILD]}?`);ne("LOOSE",`^${B[j.LOOSEPLAIN]}$`);ne("GTLT","((?:<|>)?=?)");ne("XRANGEIDENTIFIERLOOSE",`${B[j.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);ne("XRANGEIDENTIFIER",`${B[j.NUMERICIDENTIFIER]}|x|X|\\*`);ne("XRANGEPLAIN",`[v=\\s]*(${B[j.XRANGEIDENTIFIER]})(?:\\.(${B[j.XRANGEIDENTIFIER]})(?:\\.(${B[j.XRANGEIDENTIFIER]})(?:${B[j.PRERELEASE]})?${B[j.BUILD]}?)?)?`);ne("XRANGEPLAINLOOSE",`[v=\\s]*(${B[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[j.XRANGEIDENTIFIERLOOSE]})(?:\\.(${B[j.XRANGEIDENTIFIERLOOSE]})(?:${B[j.PRERELEASELOOSE]})?${B[j.BUILD]}?)?)?`);ne("XRANGE",`^${B[j.GTLT]}\\s*${B[j.XRANGEPLAIN]}$`);ne("XRANGELOOSE",`^${B[j.GTLT]}\\s*${B[j.XRANGEPLAINLOOSE]}$`);ne("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n0}})(?:\\.(\\d{1,${n0}}))?(?:\\.(\\d{1,${n0}}))?`);ne("COERCE",`${B[j.COERCEPLAIN]}(?:$|[^\\d])`);ne("COERCEFULL",B[j.COERCEPLAIN]+`(?:${B[j.PRERELEASE]})?(?:${B[j.BUILD]})?(?:$|[^\\d])`);ne("COERCERTL",B[j.COERCE],!0);ne("COERCERTLFULL",B[j.COERCEFULL],!0);ne("LONETILDE","(?:~>?)");ne("TILDETRIM",`(\\s*)${B[j.LONETILDE]}\\s+`,!0);An.tildeTrimReplace="$1~";ne("TILDE",`^${B[j.LONETILDE]}${B[j.XRANGEPLAIN]}$`);ne("TILDELOOSE",`^${B[j.LONETILDE]}${B[j.XRANGEPLAINLOOSE]}$`);ne("LONECARET","(?:\\^)");ne("CARETTRIM",`(\\s*)${B[j.LONECARET]}\\s+`,!0);An.caretTrimReplace="$1^";ne("CARET",`^${B[j.LONECARET]}${B[j.XRANGEPLAIN]}$`);ne("CARETLOOSE",`^${B[j.LONECARET]}${B[j.XRANGEPLAINLOOSE]}$`);ne("COMPARATORLOOSE",`^${B[j.GTLT]}\\s*(${B[j.LOOSEPLAIN]})$|^$`);ne("COMPARATOR",`^${B[j.GTLT]}\\s*(${B[j.FULLPLAIN]})$|^$`);ne("COMPARATORTRIM",`(\\s*)${B[j.GTLT]}\\s*(${B[j.LOOSEPLAIN]}|${B[j.XRANGEPLAIN]})`,!0);An.comparatorTrimReplace="$1$2$3";ne("HYPHENRANGE",`^\\s*(${B[j.XRANGEPLAIN]})\\s+-\\s+(${B[j.XRANGEPLAIN]})\\s*$`);ne("HYPHENRANGELOOSE",`^\\s*(${B[j.XRANGEPLAINLOOSE]})\\s+-\\s+(${B[j.XRANGEPLAINLOOSE]})\\s*$`);ne("STAR","(<|>)?=?\\s*\\*");ne("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");ne("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var Cg=_((pke,OB)=>{"use strict";var Ihe=Object.freeze({loose:!0}),Ohe=Object.freeze({}),Nhe=t=>t?typeof t!="object"?Ihe:t:Ohe;OB.exports=Nhe});var i0=_((hke,LB)=>{"use strict";var NB=/^[0-9]+$/,DB=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=NB.test(t),n=NB.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},Dhe=(t,e)=>DB(e,t);LB.exports={compareIdentifiers:DB,rcompareIdentifiers:Dhe}});var $t=_((mke,MB)=>{"use strict";var Tg=Ll(),{MAX_LENGTH:kB,MAX_SAFE_INTEGER:xg}=Dl(),{safeRe:Pg,t:Ig}=Qa(),Lhe=Cg(),{compareIdentifiers:o0}=i0(),a0=class t{constructor(e,r){if(r=Lhe(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>kB)throw new TypeError(`version is longer than ${kB} characters`);Tg("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?Pg[Ig.LOOSE]:Pg[Ig.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>xg||this.major<0)throw new TypeError("Invalid major version");if(this.minor>xg||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>xg||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<xg)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Tg("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=e.prerelease[r];if(Tg("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return o0(n,s)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],s=e.build[r];if(Tg("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return o0(n,s)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?Pg[Ig.PRERELEASELOOSE]:Pg[Ig.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),o0(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};MB.exports=a0});var ro=_((gke,$B)=>{"use strict";var qB=$t(),khe=(t,e,r=!1)=>{if(t instanceof qB)return t;try{return new qB(t,e)}catch(n){if(!r)return null;throw n}};$B.exports=khe});var UB=_((yke,FB)=>{"use strict";var Mhe=ro(),qhe=(t,e)=>{let r=Mhe(t,e);return r?r.version:null};FB.exports=qhe});var jB=_((Eke,BB)=>{"use strict";var $he=ro(),Fhe=(t,e)=>{let r=$he(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};BB.exports=Fhe});var WB=_((_ke,VB)=>{"use strict";var HB=$t(),Uhe=(t,e,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new HB(t instanceof HB?t.version:t,r).inc(e,n,s).version}catch{return null}};VB.exports=Uhe});var KB=_((Ske,GB)=>{"use strict";var zB=ro(),Bhe=(t,e)=>{let r=zB(t,null,!0),n=zB(e,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=c?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};GB.exports=Bhe});var QB=_((vke,XB)=>{"use strict";var jhe=$t(),Hhe=(t,e)=>new jhe(t,e).major;XB.exports=Hhe});var JB=_((wke,YB)=>{"use strict";var Vhe=$t(),Whe=(t,e)=>new Vhe(t,e).minor;YB.exports=Whe});var e2=_((bke,ZB)=>{"use strict";var zhe=$t(),Ghe=(t,e)=>new zhe(t,e).patch;ZB.exports=Ghe});var r2=_((Rke,t2)=>{"use strict";var Khe=ro(),Xhe=(t,e)=>{let r=Khe(t,e);return r&&r.prerelease.length?r.prerelease:null};t2.exports=Xhe});var Lr=_((Ake,s2)=>{"use strict";var n2=$t(),Qhe=(t,e,r)=>new n2(t,r).compare(new n2(e,r));s2.exports=Qhe});var o2=_((Cke,i2)=>{"use strict";var Yhe=Lr(),Jhe=(t,e,r)=>Yhe(e,t,r);i2.exports=Jhe});var c2=_((Tke,a2)=>{"use strict";var Zhe=Lr(),eme=(t,e)=>Zhe(t,e,!0);a2.exports=eme});var Og=_((xke,l2)=>{"use strict";var u2=$t(),tme=(t,e,r)=>{let n=new u2(t,r),s=new u2(e,r);return n.compare(s)||n.compareBuild(s)};l2.exports=tme});var f2=_((Pke,d2)=>{"use strict";var rme=Og(),nme=(t,e)=>t.sort((r,n)=>rme(r,n,e));d2.exports=nme});var h2=_((Ike,p2)=>{"use strict";var sme=Og(),ime=(t,e)=>t.sort((r,n)=>sme(n,r,e));p2.exports=ime});var kl=_((Oke,m2)=>{"use strict";var ome=Lr(),ame=(t,e,r)=>ome(t,e,r)>0;m2.exports=ame});var Ng=_((Nke,g2)=>{"use strict";var cme=Lr(),ume=(t,e,r)=>cme(t,e,r)<0;g2.exports=ume});var c0=_((Dke,y2)=>{"use strict";var lme=Lr(),dme=(t,e,r)=>lme(t,e,r)===0;y2.exports=dme});var u0=_((Lke,E2)=>{"use strict";var fme=Lr(),pme=(t,e,r)=>fme(t,e,r)!==0;E2.exports=pme});var Dg=_((kke,_2)=>{"use strict";var hme=Lr(),mme=(t,e,r)=>hme(t,e,r)>=0;_2.exports=mme});var Lg=_((Mke,S2)=>{"use strict";var gme=Lr(),yme=(t,e,r)=>gme(t,e,r)<=0;S2.exports=yme});var l0=_((qke,v2)=>{"use strict";var Eme=c0(),_me=u0(),Sme=kl(),vme=Dg(),wme=Ng(),bme=Lg(),Rme=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Eme(t,r,n);case"!=":return _me(t,r,n);case">":return Sme(t,r,n);case">=":return vme(t,r,n);case"<":return wme(t,r,n);case"<=":return bme(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};v2.exports=Rme});var b2=_(($ke,w2)=>{"use strict";var Ame=$t(),Cme=ro(),{safeRe:kg,t:Mg}=Qa(),Tme=(t,e)=>{if(t instanceof Ame)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?kg[Mg.COERCEFULL]:kg[Mg.COERCE]);else{let c=e.includePrerelease?kg[Mg.COERCERTLFULL]:kg[Mg.COERCERTL],u;for(;(u=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return Cme(`${n}.${s}.${i}${o}${a}`,e)};w2.exports=Tme});var A2=_((Fke,R2)=>{"use strict";var d0=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(e,r)}return this}};R2.exports=d0});var kr=_((Uke,P2)=>{"use strict";var xme=/\s+/g,f0=class t{constructor(e,r){if(r=Ime(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof p0)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(xme," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!T2(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&qme(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&kme)|(this.options.loose&&Mme))+":"+e,s=C2.get(n);if(s)return s;let i=this.options.loose,o=i?Zt[Ft.HYPHENRANGELOOSE]:Zt[Ft.HYPHENRANGE];e=e.replace(o,Gme(this.options.includePrerelease)),Be("hyphen replace",e),e=e.replace(Zt[Ft.COMPARATORTRIM],Nme),Be("comparator trim",e),e=e.replace(Zt[Ft.TILDETRIM],Dme),Be("tilde trim",e),e=e.replace(Zt[Ft.CARETTRIM],Lme),Be("caret trim",e);let a=e.split(" ").map(d=>$me(d,this.options)).join(" ").split(/\s+/).map(d=>zme(d,this.options));i&&(a=a.filter(d=>(Be("loose invalid filter",d,this.options),!!d.match(Zt[Ft.COMPARATORLOOSE])))),Be("range list",a);let c=new Map,u=a.map(d=>new p0(d,this.options));for(let d of u){if(T2(d))return[d];c.set(d.value,d)}c.size>1&&c.has("")&&c.delete("");let l=[...c.values()];return C2.set(n,l),l}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>x2(n,r)&&e.set.some(s=>x2(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new Ome(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(Kme(this.set[r],e,this.options))return!0;return!1}};P2.exports=f0;var Pme=A2(),C2=new Pme,Ime=Cg(),p0=Ml(),Be=Ll(),Ome=$t(),{safeRe:Zt,t:Ft,comparatorTrimReplace:Nme,tildeTrimReplace:Dme,caretTrimReplace:Lme}=Qa(),{FLAG_INCLUDE_PRERELEASE:kme,FLAG_LOOSE:Mme}=Dl(),T2=t=>t.value==="<0.0.0-0",qme=t=>t.value==="",x2=(t,e)=>{let r=!0,n=t.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,e)),s=n.pop();return r},$me=(t,e)=>(t=t.replace(Zt[Ft.BUILD],""),Be("comp",t,e),t=Bme(t,e),Be("caret",t),t=Fme(t,e),Be("tildes",t),t=Hme(t,e),Be("xrange",t),t=Wme(t,e),Be("stars",t),t),er=t=>!t||t.toLowerCase()==="x"||t==="*",Fme=(t,e)=>t.trim().split(/\s+/).map(r=>Ume(r,e)).join(" "),Ume=(t,e)=>{let r=e.loose?Zt[Ft.TILDELOOSE]:Zt[Ft.TILDE];return t.replace(r,(n,s,i,o,a)=>{Be("tilde",t,n,s,i,o,a);let c;return er(s)?c="":er(i)?c=`>=${s}.0.0 <${+s+1}.0.0-0`:er(o)?c=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Be("replaceTilde pr",a),c=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):c=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Be("tilde return",c),c})},Bme=(t,e)=>t.trim().split(/\s+/).map(r=>jme(r,e)).join(" "),jme=(t,e)=>{Be("caret",t,e);let r=e.loose?Zt[Ft.CARETLOOSE]:Zt[Ft.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(s,i,o,a,c)=>{Be("caret",t,s,i,o,a,c);let u;return er(i)?u="":er(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:er(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:c?(Be("replaceCaret pr",c),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${c} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${c} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${c} <${+i+1}.0.0-0`):(Be("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Be("caret return",u),u})},Hme=(t,e)=>(Be("replaceXRanges",t,e),t.split(/\s+/).map(r=>Vme(r,e)).join(" ")),Vme=(t,e)=>{t=t.trim();let r=e.loose?Zt[Ft.XRANGELOOSE]:Zt[Ft.XRANGE];return t.replace(r,(n,s,i,o,a,c)=>{Be("xRange",t,n,s,i,o,a,c);let u=er(i),l=u||er(o),d=l||er(a),m=d;return s==="="&&m&&(s=""),c=e.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&m?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(c="-0"),n=`${s+i}.${o}.${a}${c}`):l?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${c} <${i}.${+o+1}.0-0`),Be("xRange return",n),n})},Wme=(t,e)=>(Be("replaceStars",t,e),t.trim().replace(Zt[Ft.STAR],"")),zme=(t,e)=>(Be("replaceGTE0",t,e),t.trim().replace(Zt[e.includePrerelease?Ft.GTE0PRE:Ft.GTE0],"")),Gme=t=>(e,r,n,s,i,o,a,c,u,l,d,m)=>(er(n)?r="":er(s)?r=`>=${n}.0.0${t?"-0":""}`:er(i)?r=`>=${n}.${s}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,er(u)?c="":er(l)?c=`<${+u+1}.0.0-0`:er(d)?c=`<${u}.${+l+1}.0-0`:m?c=`<=${u}.${l}.${d}-${m}`:t?c=`<${u}.${l}.${+d+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),Kme=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Be(t[n].semver),t[n].semver!==p0.ANY&&t[n].semver.prerelease.length>0){let s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}});var Ml=_((Bke,k2)=>{"use strict";var ql=Symbol("SemVer ANY"),g0=class t{static get ANY(){return ql}constructor(e,r){if(r=I2(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),m0("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===ql?this.value="":this.value=this.operator+this.semver.version,m0("comp",this)}parse(e){let r=this.options.loose?O2[N2.COMPARATORLOOSE]:O2[N2.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new D2(n[2],this.options.loose):this.semver=ql}toString(){return this.value}test(e){if(m0("Comparator.test",e,this.options.loose),this.semver===ql||e===ql)return!0;if(typeof e=="string")try{e=new D2(e,this.options)}catch{return!1}return h0(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new L2(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new L2(this.value,r).test(e.semver):(r=I2(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||h0(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||h0(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};k2.exports=g0;var I2=Cg(),{safeRe:O2,t:N2}=Qa(),h0=l0(),m0=Ll(),D2=$t(),L2=kr()});var $l=_((jke,M2)=>{"use strict";var Xme=kr(),Qme=(t,e,r)=>{try{e=new Xme(e,r)}catch{return!1}return e.test(t)};M2.exports=Qme});var $2=_((Hke,q2)=>{"use strict";var Yme=kr(),Jme=(t,e)=>new Yme(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));q2.exports=Jme});var U2=_((Vke,F2)=>{"use strict";var Zme=$t(),ege=kr(),tge=(t,e,r)=>{let n=null,s=null,i=null;try{i=new ege(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Zme(n,r))}),n};F2.exports=tge});var j2=_((Wke,B2)=>{"use strict";var rge=$t(),nge=kr(),sge=(t,e,r)=>{let n=null,s=null,i=null;try{i=new nge(e,r)}catch{return null}return t.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new rge(n,r))}),n};B2.exports=sge});var W2=_((zke,V2)=>{"use strict";var y0=$t(),ige=kr(),H2=kl(),oge=(t,e)=>{t=new ige(t,e);let r=new y0("0.0.0");if(t.test(r)||(r=new y0("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let s=t.set[n],i=null;s.forEach(o=>{let a=new y0(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||H2(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||H2(r,i))&&(r=i)}return r&&t.test(r)?r:null};V2.exports=oge});var G2=_((Gke,z2)=>{"use strict";var age=kr(),cge=(t,e)=>{try{return new age(t,e).range||"*"}catch{return null}};z2.exports=cge});var qg=_((Kke,Y2)=>{"use strict";var uge=$t(),Q2=Ml(),{ANY:lge}=Q2,dge=kr(),fge=$l(),K2=kl(),X2=Ng(),pge=Lg(),hge=Dg(),mge=(t,e,r,n)=>{t=new uge(t,n),e=new dge(e,n);let s,i,o,a,c;switch(r){case">":s=K2,i=pge,o=X2,a=">",c=">=";break;case"<":s=X2,i=hge,o=K2,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fge(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],d=null,m=null;if(l.forEach(g=>{g.semver===lge&&(g=new Q2(">=0.0.0")),d=d||g,m=m||g,s(g.semver,d.semver,n)?d=g:o(g.semver,m.semver,n)&&(m=g)}),d.operator===a||d.operator===c||(!m.operator||m.operator===a)&&i(t,m.semver))return!1;if(m.operator===c&&o(t,m.semver))return!1}return!0};Y2.exports=mge});var Z2=_((Xke,J2)=>{"use strict";var gge=qg(),yge=(t,e,r)=>gge(t,e,">",r);J2.exports=yge});var tj=_((Qke,ej)=>{"use strict";var Ege=qg(),_ge=(t,e,r)=>Ege(t,e,"<",r);ej.exports=_ge});var sj=_((Yke,nj)=>{"use strict";var rj=kr(),Sge=(t,e,r)=>(t=new rj(t,r),e=new rj(e,r),t.intersects(e,r));nj.exports=Sge});var oj=_((Jke,ij)=>{"use strict";var vge=$l(),wge=Lr();ij.exports=(t,e,r)=>{let n=[],s=null,i=null,o=t.sort((l,d)=>wge(l,d,r));for(let l of o)vge(l,e,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var fj=_((Zke,dj)=>{"use strict";var aj=kr(),_0=Ml(),{ANY:E0}=_0,Fl=$l(),S0=Lr(),bge=(t,e,r={})=>{if(t===e)return!0;t=new aj(t,r),e=new aj(e,r);let n=!1;e:for(let s of t.set){for(let i of e.set){let o=Age(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Rge=[new _0(">=0.0.0-0")],cj=[new _0(">=0.0.0")],Age=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===E0){if(e.length===1&&e[0].semver===E0)return!0;r.includePrerelease?t=Rge:t=cj}if(e.length===1&&e[0].semver===E0){if(r.includePrerelease)return!0;e=cj}let n=new Set,s,i;for(let g of t)g.operator===">"||g.operator===">="?s=uj(s,g,r):g.operator==="<"||g.operator==="<="?i=lj(i,g,r):n.add(g.semver);if(n.size>1)return null;let o;if(s&&i){if(o=S0(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let g of n){if(s&&!Fl(g,String(s),r)||i&&!Fl(g,String(i),r))return null;for(let E of e)if(!Fl(g,String(E),r))return!1;return!0}let a,c,u,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,m=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let g of e){if(l=l||g.operator===">"||g.operator===">=",u=u||g.operator==="<"||g.operator==="<=",s){if(m&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===m.major&&g.semver.minor===m.minor&&g.semver.patch===m.patch&&(m=!1),g.operator===">"||g.operator===">="){if(a=uj(s,g,r),a===g&&a!==s)return!1}else if(s.operator===">="&&!Fl(s.semver,String(g),r))return!1}if(i){if(d&&g.semver.prerelease&&g.semver.prerelease.length&&g.semver.major===d.major&&g.semver.minor===d.minor&&g.semver.patch===d.patch&&(d=!1),g.operator==="<"||g.operator==="<="){if(c=lj(i,g,r),c===g&&c!==i)return!1}else if(i.operator==="<="&&!Fl(i.semver,String(g),r))return!1}if(!g.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&l&&!s&&o!==0||m||d)},uj=(t,e,r)=>{if(!t)return e;let n=S0(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},lj=(t,e,r)=>{if(!t)return e;let n=S0(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};dj.exports=bge});var gj=_((eMe,mj)=>{"use strict";var v0=Qa(),pj=Dl(),Cge=$t(),hj=i0(),Tge=ro(),xge=UB(),Pge=jB(),Ige=WB(),Oge=KB(),Nge=QB(),Dge=JB(),Lge=e2(),kge=r2(),Mge=Lr(),qge=o2(),$ge=c2(),Fge=Og(),Uge=f2(),Bge=h2(),jge=kl(),Hge=Ng(),Vge=c0(),Wge=u0(),zge=Dg(),Gge=Lg(),Kge=l0(),Xge=b2(),Qge=Ml(),Yge=kr(),Jge=$l(),Zge=$2(),eye=U2(),tye=j2(),rye=W2(),nye=G2(),sye=qg(),iye=Z2(),oye=tj(),aye=sj(),cye=oj(),uye=fj();mj.exports={parse:Tge,valid:xge,clean:Pge,inc:Ige,diff:Oge,major:Nge,minor:Dge,patch:Lge,prerelease:kge,compare:Mge,rcompare:qge,compareLoose:$ge,compareBuild:Fge,sort:Uge,rsort:Bge,gt:jge,lt:Hge,eq:Vge,neq:Wge,gte:zge,lte:Gge,cmp:Kge,coerce:Xge,Comparator:Qge,Range:Yge,satisfies:Jge,toComparators:Zge,maxSatisfying:eye,minSatisfying:tye,minVersion:rye,validRange:nye,outside:sye,gtr:iye,ltr:oye,intersects:aye,simplifyRange:cye,subset:uye,SemVer:Cge,re:v0.re,src:v0.src,tokens:v0.t,SEMVER_SPEC_VERSION:pj.SEMVER_SPEC_VERSION,RELEASE_TYPES:pj.RELEASE_TYPES,compareIdentifiers:hj.compareIdentifiers,rcompareIdentifiers:hj.rcompareIdentifiers}});var b0=_((tMe,w0)=>{"use strict";var lye=gj(),dye=Ol(),Ya=ai(),yj=Mt(),Ej=Ge(),_j="2.7.15",fye=function(){return!1},pye=function(e){if(!lye.gte(e.VERSION,_j))throw new Error("AWS SDK version "+_j+" or greater required.");for(var r in e)if(e[r].serviceIdentifier){var n=e[r];n.prototype.customizeRequests(Sj)}return e},hye=function(e){return e.customizeRequests(Sj),e};function Sj(t){var e=Ya.resolveSegment(Ya.resolveManualSegmentParams(t.params));if(!e){var r=this.serviceIdentifier+"."+t.operation;return Ya.isAutomaticMode()?Ej.getLogger().info("Call "+r+" is missing the sub/segment context for automatic mode. Ignoring."):Ej.getLogger().info("Call "+r+' requires a segment object on the request params as "XRaySegment" for tracing in manual mode. Ignoring.'),t}var n=this.throttledError||fye,s=new Error().stack;let i;e.notTraced?i=e.addNewSubsegmentWithoutSampling(this.serviceIdentifier):i=e.addNewSubsegment(this.serviceIdentifier);var o=e.segment?e.segment.trace_id:e.trace_id;let a=e.segment?e.segment.additionalTraceData:e.additionalTraceData;var c=function(l){if(e.noOp)return;let d="Root="+o+";Parent="+i.id+";Sampled="+(i.notTraced?"0":"1");if(a!=null)for(let[m,g]of Object.entries(a))d+=";"+m+"="+g;l.httpRequest.headers["X-Amzn-Trace-Id"]=d},u=function(l){i.addAttribute("namespace","aws"),i.addAttribute("aws",new dye(l,i.name));var d=l.httpResponse;if(d&&(i.addAttribute("http",new vj(d)),(d.statusCode===429||l.error&&n(l.error))&&i.addThrottleFlag()),l.error){var m={message:l.error.message,name:l.error.code,stack:s};d&&d.statusCode?(yj.getCauseTypeFromHttpStatus(d.statusCode)=="error"&&i.addErrorFlag(),i.close(m,!0)):i.close(m)}else{if(d&&d.statusCode){var g=yj.getCauseTypeFromHttpStatus(d.statusCode);g&&(i[g]=!0)}i.close()}};t.on("beforePresign",function(l){e.removeSubsegment(i),e.decrementCounter(),l.removeListener("build",c),l.removeListener("complete",u)}),t.on("build",c).on("complete",u),t.__send||(t.__send=t.send,t.send=function(l){if(Ya.isAutomaticMode()){var d=Ya.getNamespace();d.run(function(){Ya.setSegment(i),t.__send(l)})}else t.__send(l)})}function vj(t){this.init(t)}vj.prototype.init=function(e){this.response={status:e.statusCode||""},e.headers&&e.headers["content-length"]&&(this.response.content_length=e.headers["content-length"])};w0.exports.captureAWSClient=hye;w0.exports.captureAWS=pye});var Cj=_((rMe,Aj)=>{var $g=Object.defineProperty,mye=Object.getOwnPropertyDescriptor,gye=Object.getOwnPropertyNames,yye=Object.prototype.hasOwnProperty,Ja=(t,e)=>$g(t,"name",{value:e,configurable:!0}),Eye=(t,e)=>{for(var r in e)$g(t,r,{get:e[r],enumerable:!0})},_ye=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of gye(e))!yye.call(t,s)&&s!==r&&$g(t,s,{get:()=>e[s],enumerable:!(n=mye(e,s))||n.enumerable});return t},Sye=t=>_ye($g({},"__esModule",{value:!0}),t),wj={};Eye(wj,{isClockSkewCorrectedError:()=>bj,isClockSkewError:()=>Tye,isRetryableByTrait:()=>Cye,isServerError:()=>Pye,isThrottlingError:()=>xye,isTransientError:()=>Rj});Aj.exports=Sye(wj);var vye=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],wye=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],bye=["TimeoutError","RequestTimeout","RequestTimeoutException"],Rye=[500,502,503,504],Aye=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Cye=Ja(t=>t.$retryable!==void 0,"isRetryableByTrait"),Tye=Ja(t=>vye.includes(t.name),"isClockSkewError"),bj=Ja(t=>{var e;return(e=t.$metadata)==null?void 0:e.clockSkewCorrected},"isClockSkewCorrectedError"),xye=Ja(t=>{var e,r;return((e=t.$metadata)==null?void 0:e.httpStatusCode)===429||wye.includes(t.name)||((r=t.$retryable)==null?void 0:r.throttling)==!0},"isThrottlingError"),Rj=Ja(t=>{var e;return bj(t)||bye.includes(t.name)||Aye.includes(t?.code||"")||Rye.includes(((e=t.$metadata)==null?void 0:e.httpStatusCode)||0)},"isTransientError"),Pye=Ja(t=>{var e;if(((e=t.$metadata)==null?void 0:e.httpStatusCode)!==void 0){let r=t.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Rj(t)}return!1},"isServerError")});var Nj=_(Za=>{"use strict";var Ij=Za&&Za.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});Za.captureAWSClient=void 0;var Iye=Cj(),Oye=Ij(Ol()),Nye=require("querystring"),Dye=Ij(Cl()),R0=ai(),Tj=Ge(),{safeParseInt:Fg}=Mt(),Lye=Mt(),Oj="XRaySDKInstrumentation",xj=async(t,e,r,n,s,i)=>{var o,a,c;let{extendedRequestId:u,requestId:l,httpStatusCode:d,attempts:m}=((o=s?.output)===null||o===void 0?void 0:o.$metadata)||i?.$metadata,g=new Oye.default({extendedRequestId:u,requestId:l,retryCount:m,data:s?.output,request:{operation:e,params:n,httpRequest:{region:r,statusCode:d}}},t),E={};return d&&(E.response={},E.response.status=d),!((a=s?.response)===null||a===void 0)&&a.headers&&((c=s?.response)===null||c===void 0?void 0:c.headers["content-length"])!==void 0&&(E.response||(E.response={}),E.response.content_length=Fg(s.response.headers["content-length"])),[g,E]};function Pj(t,e,r){var n,s,i;(r&&(0,Iye.isThrottlingError)(r)||Fg((n=t.response)===null||n===void 0?void 0:n.status)===429||Fg((s=r?.$metadata)===null||s===void 0?void 0:s.httpStatusCode)===429)&&e.addThrottleFlag();let o=(0,Lye.getCauseTypeFromHttpStatus)(Fg((i=t.response)===null||i===void 0?void 0:i.status));o==="fault"?e.addFaultFlag():o==="error"&&e.addErrorFlag()}var kye=(t,e)=>(r,n)=>async s=>{var i;let o=R0.isAutomaticMode()?R0.resolveSegment():e,{clientName:a,commandName:c}=n,u=(i=s?.input)!==null&&i!==void 0?i:{},l=c.slice(0,-7),d=l.charAt(0).toLowerCase()+l.slice(1),m=a.slice(0,-6);if(!o){let O=m+"."+d;return R0.isAutomaticMode()?Tj.getLogger().info("Call "+O+" is missing the sub/segment context for automatic mode. Ignoring."):Tj.getLogger().info("Call "+O+" requires a segment object passed to captureAWSv3Client for tracing in manual mode. Ignoring."),r(s)}let g;o.notTraced?g=o.addNewSubsegmentWithoutSampling(m):g=o.addNewSubsegment(m),g.addAttribute("namespace","aws");let E=o instanceof Dye.default?o.segment:o,w=E.segment?E.segment.additionalTraceData:E.additionalTraceData,x=(0,Nye.stringify)({Root:E.trace_id,Parent:g.id,Sampled:g.notTraced?"0":"1"},";");if(w!=null)for(let[O,M]of Object.entries(w))x+=";"+O+"="+M;o.noOp||(s.request.headers["X-Amzn-Trace-Id"]=x);let T;try{if(T=await r(s),!T)throw new Error("Failed to get response from instrumented AWS Client.");let[O,M]=await xj(m,d,await t.region(),u,T,null);return g.addAttribute("aws",O),g.addAttribute("http",M),Pj(M,g),g.close(),T}catch(O){if(O.$metadata){let[U,W]=await xj(m,d,await t.region(),u,null,O);g.addAttribute("aws",U),g.addAttribute("http",W),Pj(W,g,O)}let M={message:O.message,name:O.name,stack:O.stack||new Error().stack};throw g.close(M,!0),O}},Mye={name:Oj,step:"build"},qye=(t,e)=>({applyToStack:r=>{r.add(kye(t,e),Mye)}});function $ye(t,e){return t.middlewareStack.remove(Oj),t.middlewareStack.use(qye(t.config,e)),t}Za.captureAWSClient=$ye});var C0=_((sMe,A0)=>{"use strict";var Dj=require("url"),ec=ai(),Ug=Mt(),Lj=Ge(),Fye=require("events"),Uye=function(e,r,n){e.__request||kj(e,r,n)},Bye=function(e,r,n){if(e.__request)return e;var s={};return Object.keys(e).forEach(function(i){s[i]=e[i]}),kj(s,r,n),s};function kj(t,e,r){function n(o,...a){let c,u,l,d,m=a[0];if(typeof a[1]=="object"?(l=!0,d=typeof m=="string"?new Dj.URL(m):m,c=a[1],u=a[2]):(l=!1,c=m,u=a[1]),!c||c.headers&&c.headers["X-Amzn-Trace-Id"])return o(...a);typeof c=="string"&&(c=new Dj.URL(c)),l||(d=c);let g=ec.resolveSegment(ec.resolveManualSegmentParams(c)),E=c.hostname||c.host||d.hostname||d.host||"Unknown host";if(!g){let U="[ host: "+E;return U=c.method?U+", method: "+c.method:U,U+=", path: "+(d.pathname||Ug.stripQueryStringFromPath(c.path))+" ]",ec.isAutomaticMode()?Lj.getLogger().info("Options for request "+U+" is missing the sub/segment context for automatic mode. Ignoring."):Lj.getLogger().info("Options for request "+U+' requires a segment object on the options params as "XRaySegment" for tracing in manual mode. Ignoring.'),o(...a)}let w;g.notTraced?w=g.addNewSubsegmentWithoutSampling(E):w=g.addNewSubsegment(E);let x=g.segment?g.segment:g;w.namespace="remote",c.headers||(c.headers={}),g.noOp||(c.headers["X-Amzn-Trace-Id"]="Root="+x.trace_id+";Parent="+w.id+";Sampled="+(w.notTraced?"0":"1"));let T=function(W){if(r&&r(w,this,null,W),w.http&&w.http.response)Ug.getCauseTypeFromHttpStatus(w.http.response.status)==="error"&&w.addErrorFlag(),w.close(W,!0);else{let ye=W.code!=="ECONNREFUSED";w.addRemoteRequestData(this,null,ye&&e),w.close(W)}},O=Ug.objectWithoutProperties(c,["Segment"],!0),M=o(...l?[m,O]:[c],function(U){U.on("end",function(){r&&r(w,this.req,U),U.statusCode===429&&w.addThrottleFlag();let W=Ug.getCauseTypeFromHttpStatus(U.statusCode);W&&(w[W]=!0),w.addRemoteRequestData(U.req,U,!!e),w.close()}),typeof u=="function"?ec.isAutomaticMode()?ec.getNamespace().run(function(){ec.setSegment(w),u(U)}):u(U):U.req&&U.req.listenerCount("response")===0&&U.resume()});return M.on(Fye.errorMonitor||"error",T),M}t.__request=t.request;function s(...o){return n(t.__request,...o)}t.__get=t.get;function i(...o){return n(t.__get,...o)}Object.defineProperties(t,{request:{value:s,configurable:!0,enumerable:!0,writable:!0},get:{value:i,configurable:!0,enumerable:!0,writable:!0}})}A0.exports.captureHTTPsGlobal=Uye;A0.exports.captureHTTPs=Bye});var Fj=_((iMe,T0)=>{"use strict";var Ul=ai(),Bg=Symbol("original then"),jg=Symbol("original catch");function qj(t){let e=t.prototype.then;e[Bg]||(t.prototype.then=function(n,s){if(Ul.isAutomaticMode()&&Mj()){let i=Ul.getNamespace();n=n&&i.bind(n),s=s&&i.bind(s)}return e.call(this,n,s)},t.prototype.then[Bg]=e);let r=t.prototype.catch;r&&!r[jg]&&(t.prototype.catch=function(n){if(Ul.isAutomaticMode()&&Mj()){let s=Ul.getNamespace();n=n&&s.bind(n)}return r.call(this,n)},t.prototype.catch[jg]=r)}function jye(t){let e=t.prototype.then;e[Bg]&&(t.prototype.then=e[Bg]);let r=t.prototype.catch;r&&r[jg]&&(t.prototype.catch=r[jg])}function Mj(){try{return Ul.getSegment()}catch{return}}function $j(){qj(Promise)}function Hye(){jye(Promise)}$j.patchThirdPartyPromise=qj;T0.exports.capturePromise=$j;T0.exports.uncapturePromise=Hye});var jj=_((oMe,Bj)=>{"use strict";function Uj(t,e,r,n,s){this.init(t,e,r,n,s)}Uj.prototype.init=function(e,r,n,s,i){e&&(this.database_version=e),r&&(this.driver_version=r),i&&(this.preparation=i),this.url=s,this.user=n};Bj.exports=Uj});var Wj=_((aMe,Vj)=>{"use strict";var ls=ai(),x0=Ge(),tc=si(),Vye=Mt(),Wye=sB(),jl={};try{jl=iB()}catch(t){x0.getLogger().debug("Failed to load SDK data:",t)}var Bl="unknown",Hj={plugins:{EC2Plugin:pB(),ECSPlugin:mB(),ElasticBeanstalkPlugin:yB()},config:function(t){var e={};t.forEach(function(r){r.getData(function(n){if(n)for(var s in n)e[s]=n[s]}),tc.setOrigin(r.originName),tc.setPluginData(e)})},setAWSWhitelist:Ol().setAWSWhitelist,appendAWSWhitelist:Ol().appendAWSWhitelist,setStreamingThreshold:tc.setStreamingThreshold,setLogger:x0.setLogger,getLogger:x0.getLogger,setDaemonAddress:og().setDaemonAddress,captureFunc:Ag().captureFunc,captureAsyncFunc:Ag().captureAsyncFunc,captureCallbackFunc:Ag().captureCallbackFunc,captureAWS:b0().captureAWS,captureAWSClient:b0().captureAWSClient,captureAWSv3Client:Nj().captureAWSClient,captureHTTPs:C0().captureHTTPs,captureHTTPsGlobal:C0().captureHTTPsGlobal,capturePromise:Fj().capturePromise,utils:Vye,database:{SqlData:jj()},middleware:Gb(),getNamespace:ls.getNamespace,resolveSegment:ls.resolveSegment,resolveManualSegmentParams:ls.resolveManualSegmentParams,getSegment:ls.getSegment,setSegment:ls.setSegment,isAutomaticMode:ls.isAutomaticMode,enableAutomaticMode:ls.enableAutomaticMode,enableManualMode:ls.enableManualMode,setContextMissingStrategy:ls.setContextMissingStrategy,Segment:Tl(),Subsegment:Cl(),SegmentUtils:tc};Hj.middleware.IncomingRequestData=Mb(),function(){var t={runtime:process.release&&process.release.name?process.release.name:Bl,runtime_version:process.version,version:process.env.npm_package_version||Bl,name:process.env.npm_package_name||Bl},e={sdk:"X-Ray for Node.js",sdk_version:jl.version?jl.version:Bl,package:jl.name?jl.name:Bl};tc.setSDKData(e),tc.setServiceData(t),process.env.LAMBDA_TASK_ROOT&&Wye.init()}();Vj.exports=Hj});var P0=_((cMe,zj)=>{"use strict";zj.exports=Wj()});var D0=_(oH=>{"use strict";oH.parse=function(t,e){return new N0(t,e).parse()};var N0=class t{constructor(e,r){this.source=e,this.transform=r||fEe,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return e==="\\"?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var r;(this.recorded.length>0||e)&&(r=this.recorded.join(""),r==="NULL"&&!e&&(r=null),r!==null&&(r=this.transform(r)),this.entries.push(r),this.recorded=[])}consumeDimensions(){if(this.source[0]==="[")for(;!this.isEof();){var e=this.nextCharacter();if(e.value==="=")break}}parse(e){var r,n,s;for(this.consumeDimensions();!this.isEof();)if(r=this.nextCharacter(),r.value==="{"&&!s)this.dimension++,this.dimension>1&&(n=new t(this.source.substr(this.position-1),this.transform),this.entries.push(n.parse(!0)),this.position+=n.position-2);else if(r.value==="}"&&!s){if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else r.value==='"'&&!r.escaped?(s&&this.newEntry(!0),s=!s):r.value===","&&!s?this.newEntry():this.record(r.value);if(this.dimension!==0)throw new Error("array dimension not balanced");return this.entries}};function fEe(t){return t}});var L0=_((PMe,aH)=>{var pEe=D0();aH.exports={create:function(t,e){return{parse:function(){return pEe.parse(t,e)}}}}});var lH=_((IMe,uH)=>{"use strict";var hEe=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,mEe=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,gEe=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,yEe=/^-?infinity$/;uH.exports=function(e){if(yEe.test(e))return Number(e.replace("i","I"));var r=hEe.exec(e);if(!r)return EEe(e)||null;var n=!!r[8],s=parseInt(r[1],10);n&&(s=cH(s));var i=parseInt(r[2],10)-1,o=r[3],a=parseInt(r[4],10),c=parseInt(r[5],10),u=parseInt(r[6],10),l=r[7];l=l?1e3*parseFloat(l):0;var d,m=_Ee(e);return m!=null?(d=new Date(Date.UTC(s,i,o,a,c,u,l)),k0(s)&&d.setUTCFullYear(s),m!==0&&d.setTime(d.getTime()-m)):(d=new Date(s,i,o,a,c,u,l),k0(s)&&d.setFullYear(s)),d};function EEe(t){var e=mEe.exec(t);if(e){var r=parseInt(e[1],10),n=!!e[4];n&&(r=cH(r));var s=parseInt(e[2],10)-1,i=e[3],o=new Date(r,s,i);return k0(r)&&o.setFullYear(r),o}}function _Ee(t){if(t.endsWith("+00"))return 0;var e=gEe.exec(t.split(" ")[1]);if(e){var r=e[1];if(r==="Z")return 0;var n=r==="-"?-1:1,s=parseInt(e[2],10)*3600+parseInt(e[3]||0,10)*60+parseInt(e[4]||0,10);return s*n*1e3}}function cH(t){return-(t-1)}function k0(t){return t>=0&&t<100}});var fH=_((OMe,dH)=>{dH.exports=vEe;var SEe=Object.prototype.hasOwnProperty;function vEe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)SEe.call(r,n)&&(t[n]=r[n])}return t}});var mH=_((NMe,hH)=>{"use strict";var wEe=fH();hH.exports=rc;function rc(t){if(!(this instanceof rc))return new rc(t);wEe(this,LEe(t))}var bEe=["seconds","minutes","hours","days","months","years"];rc.prototype.toPostgres=function(){var t=bEe.filter(this.hasOwnProperty,this);return this.milliseconds&&t.indexOf("seconds")<0&&t.push("seconds"),t.length===0?"0":t.map(function(e){var r=this[e]||0;return e==="seconds"&&this.milliseconds&&(r=(r+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),r+" "+e},this).join(" ")};var REe={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},AEe=["years","months","days"],CEe=["hours","minutes","seconds"];rc.prototype.toISOString=rc.prototype.toISO=function(){var t=AEe.map(r,this).join(""),e=CEe.map(r,this).join("");return"P"+t+"T"+e;function r(n){var s=this[n]||0;return n==="seconds"&&this.milliseconds&&(s=(s+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),s+REe[n]}};var M0="([+-]?\\d+)",TEe=M0+"\\s+years?",xEe=M0+"\\s+mons?",PEe=M0+"\\s+days?",IEe="([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?",OEe=new RegExp([TEe,xEe,PEe,IEe].map(function(t){return"("+t+")?"}).join("\\s*")),pH={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},NEe=["hours","minutes","seconds","milliseconds"];function DEe(t){var e=t+"000000".slice(t.length);return parseInt(e,10)/1e3}function LEe(t){if(!t)return{};var e=OEe.exec(t),r=e[8]==="-";return Object.keys(pH).reduce(function(n,s){var i=pH[s],o=e[i];return!o||(o=s==="milliseconds"?DEe(o):parseInt(o,10),!o)||(r&&~NEe.indexOf(s)&&(o*=-1),n[s]=o),n},{})}});var yH=_((DMe,gH)=>{"use strict";gH.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var r="",n=0;n<e.length;)if(e[n]!=="\\")r+=e[n],++n;else if(/[0-7]{3}/.test(e.substr(n+1,3)))r+=String.fromCharCode(parseInt(e.substr(n+1,3),8)),n+=4;else{for(var s=1;n+s<e.length&&e[n+s]==="\\";)s++;for(var i=0;i<Math.floor(s/2);++i)r+="\\";n+=Math.floor(s/2)*2}return new Buffer(r,"binary")}});var RH=_((LMe,bH)=>{var Wl=D0(),zl=L0(),Kg=lH(),_H=mH(),SH=yH();function Xg(t){return function(r){return r===null?r:t(r)}}function vH(t){return t===null?t:t==="TRUE"||t==="t"||t==="true"||t==="y"||t==="yes"||t==="on"||t==="1"}function kEe(t){return t?Wl.parse(t,vH):null}function MEe(t){return parseInt(t,10)}function q0(t){return t?Wl.parse(t,Xg(MEe)):null}function qEe(t){return t?Wl.parse(t,Xg(function(e){return wH(e).trim()})):null}var $Ee=function(t){if(!t)return null;var e=zl.create(t,function(r){return r!==null&&(r=B0(r)),r});return e.parse()},$0=function(t){if(!t)return null;var e=zl.create(t,function(r){return r!==null&&(r=parseFloat(r)),r});return e.parse()},Mr=function(t){if(!t)return null;var e=zl.create(t);return e.parse()},F0=function(t){if(!t)return null;var e=zl.create(t,function(r){return r!==null&&(r=Kg(r)),r});return e.parse()},FEe=function(t){if(!t)return null;var e=zl.create(t,function(r){return r!==null&&(r=_H(r)),r});return e.parse()},UEe=function(t){return t?Wl.parse(t,Xg(SH)):null},U0=function(t){return parseInt(t,10)},wH=function(t){var e=String(t);return/^\d+$/.test(e)?e:t},EH=function(t){return t?Wl.parse(t,Xg(JSON.parse)):null},B0=function(t){return t[0]!=="("?null:(t=t.substring(1,t.length-1).split(","),{x:parseFloat(t[0]),y:parseFloat(t[1])})},BEe=function(t){if(t[0]!=="<"&&t[1]!=="(")return null;for(var e="(",r="",n=!1,s=2;s<t.length-1;s++){if(n||(e+=t[s]),t[s]===")"){n=!0;continue}else if(!n)continue;t[s]!==","&&(r+=t[s])}var i=B0(e);return i.radius=parseFloat(r),i},jEe=function(t){t(20,wH),t(21,U0),t(23,U0),t(26,U0),t(700,parseFloat),t(701,parseFloat),t(16,vH),t(1082,Kg),t(1114,Kg),t(1184,Kg),t(600,B0),t(651,Mr),t(718,BEe),t(1e3,kEe),t(1001,UEe),t(1005,q0),t(1007,q0),t(1028,q0),t(1016,qEe),t(1017,$Ee),t(1021,$0),t(1022,$0),t(1231,$0),t(1014,Mr),t(1015,Mr),t(1008,Mr),t(1009,Mr),t(1040,Mr),t(1041,Mr),t(1115,F0),t(1182,F0),t(1185,F0),t(1186,_H),t(1187,FEe),t(17,SH),t(114,JSON.parse.bind(JSON)),t(3802,JSON.parse.bind(JSON)),t(199,EH),t(3807,EH),t(3907,Mr),t(2951,Mr),t(791,Mr),t(1183,Mr),t(1270,Mr)};bH.exports={init:jEe}});var CH=_((kMe,AH)=>{"use strict";var ur=1e6;function HEe(t){var e=t.readInt32BE(0),r=t.readUInt32BE(4),n="";e<0&&(e=~e+(r===0),r=~r+1>>>0,n="-");var s="",i,o,a,c,u,l;{if(i=e%ur,e=e/ur>>>0,o=4294967296*i+r,r=o/ur>>>0,a=""+(o-ur*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%ur,e=e/ur>>>0,o=4294967296*i+r,r=o/ur>>>0,a=""+(o-ur*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}{if(i=e%ur,e=e/ur>>>0,o=4294967296*i+r,r=o/ur>>>0,a=""+(o-ur*r),r===0&&e===0)return n+a+s;for(c="",u=6-a.length,l=0;l<u;l++)c+="0";s=c+a+s}return i=e%ur,o=4294967296*i+r,a=""+o%ur,n+a+s}AH.exports=HEe});var OH=_((MMe,IH)=>{var VEe=CH(),Je=function(t,e,r,n,s){r=r||0,n=n||!1,s=s||function(g,E,w){return g*Math.pow(2,w)+E};var i=r>>3,o=function(g){return n?~g&255:g},a=255,c=8-r%8;e<c&&(a=255<<8-e&255,c=e),r&&(a=a>>r%8);var u=0;r%8+e>=8&&(u=s(0,o(t[i])&a,c));for(var l=e+r>>3,d=i+1;d<l;d++)u=s(u,o(t[d]),8);var m=(e+r)%8;return m>0&&(u=s(u,o(t[l])>>8-m,m)),u},PH=function(t,e,r){var n=Math.pow(2,r-1)-1,s=Je(t,1),i=Je(t,r,1);if(i===0)return 0;var o=1,a=function(u,l,d){u===0&&(u=1);for(var m=1;m<=d;m++)o/=2,(l&1<<d-m)>0&&(u+=o);return u},c=Je(t,e,r+1,!1,a);return i==Math.pow(2,r+1)-1?c===0?s===0?1/0:-1/0:NaN:(s===0?1:-1)*Math.pow(2,i-n)*c},WEe=function(t){return Je(t,1)==1?-1*(Je(t,15,1,!0)+1):Je(t,15,1)},TH=function(t){return Je(t,1)==1?-1*(Je(t,31,1,!0)+1):Je(t,31,1)},zEe=function(t){return PH(t,23,8)},GEe=function(t){return PH(t,52,11)},KEe=function(t){var e=Je(t,16,32);if(e==49152)return NaN;for(var r=Math.pow(1e4,Je(t,16,16)),n=0,s=[],i=Je(t,16),o=0;o<i;o++)n+=Je(t,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,Je(t,16,48));return(e===0?1:-1)*Math.round(n*a)/a},xH=function(t,e){var r=Je(e,1),n=Je(e,63,1),s=new Date((r===0?1:-1)*n/1e3+9466848e5);return t||s.setTime(s.getTime()+s.getTimezoneOffset()*6e4),s.usec=n%1e3,s.getMicroSeconds=function(){return this.usec},s.setMicroSeconds=function(i){this.usec=i},s.getUTCMicroSeconds=function(){return this.usec},s},Gl=function(t){for(var e=Je(t,32),r=Je(t,32,32),n=Je(t,32,64),s=96,i=[],o=0;o<e;o++)i[o]=Je(t,32,s),s+=32,s+=32;var a=function(u){var l=Je(t,32,s);if(s+=32,l==4294967295)return null;var d;if(u==23||u==20)return d=Je(t,l*8,s),s+=l*8,d;if(u==25)return d=t.toString(this.encoding,s>>3,(s+=l<<3)>>3),d;console.log("ERROR: ElementType not implemented: "+u)},c=function(u,l){var d=[],m;if(u.length>1){var g=u.shift();for(m=0;m<g;m++)d[m]=c(u,l);u.unshift(g)}else for(m=0;m<u[0];m++)d[m]=a(l);return d};return c(i,n)},XEe=function(t){return t.toString("utf8")},QEe=function(t){return t===null?null:Je(t,8)>0},YEe=function(t){t(20,VEe),t(21,WEe),t(23,TH),t(26,TH),t(1700,KEe),t(700,zEe),t(701,GEe),t(16,QEe),t(1114,xH.bind(null,!1)),t(1184,xH.bind(null,!0)),t(1e3,Gl),t(1007,Gl),t(1016,Gl),t(1008,Gl),t(1009,Gl),t(25,XEe)};IH.exports={init:YEe}});var DH=_((qMe,NH)=>{NH.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}});var Ql=_(Xl=>{var JEe=RH(),ZEe=OH(),e_e=L0(),t_e=DH();Xl.getTypeParser=r_e;Xl.setTypeParser=n_e;Xl.arrayParser=e_e;Xl.builtins=t_e;var Kl={text:{},binary:{}};function LH(t){return String(t)}function r_e(t,e){return e=e||"text",Kl[e]&&Kl[e][t]||LH}function n_e(t,e,r){typeof e=="function"&&(r=e,e="text"),Kl[e][t]=r}JEe.init(function(t,e){Kl.text[t]=e});ZEe.init(function(t,e){Kl.binary[t]=e})});var Yl=_((FMe,j0)=>{"use strict";j0.exports={host:"localhost",user:process.platform==="win32"?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var nc=Ql(),s_e=nc.getTypeParser(20,"text"),i_e=nc.getTypeParser(1016,"text");j0.exports.__defineSetter__("parseInt8",function(t){nc.setTypeParser(20,"text",t?nc.getTypeParser(23,"text"):s_e),nc.setTypeParser(1016,"text",t?nc.getTypeParser(1007,"text"):i_e)})});var sc=_((UMe,qH)=>{"use strict";var o_e=Yl(),kH=require("util"),{isDate:a_e}=kH.types||kH;function c_e(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function MH(t){let e="{";for(let r=0;r<t.length;r++)if(r>0&&(e=e+","),t[r]===null||typeof t[r]>"u")e=e+"NULL";else if(Array.isArray(t[r]))e=e+MH(t[r]);else if(ArrayBuffer.isView(t[r])){let n=t[r];if(!(n instanceof Buffer)){let s=Buffer.from(n.buffer,n.byteOffset,n.byteLength);s.length===n.byteLength?n=s:n=s.slice(n.byteOffset,n.byteOffset+n.byteLength)}e+="\\\\x"+n.toString("hex")}else e+=c_e(Qg(t[r]));return e=e+"}",e}var Qg=function(t,e){if(t==null)return null;if(typeof t=="object"){if(t instanceof Buffer)return t;if(ArrayBuffer.isView(t)){let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return r.length===t.byteLength?r:r.slice(t.byteOffset,t.byteOffset+t.byteLength)}return a_e(t)?o_e.parseInputDatesAsUTC?d_e(t):l_e(t):Array.isArray(t)?MH(t):u_e(t,e)}return t.toString()};function u_e(t,e){if(t&&typeof t.toPostgres=="function"){if(e=e||[],e.indexOf(t)!==-1)throw new Error('circular reference detected while preparing "'+t+'" for query');return e.push(t),Qg(t.toPostgres(Qg),e)}return JSON.stringify(t)}function l_e(t){let e=-t.getTimezoneOffset(),r=t.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);let s=String(r).padStart(4,"0")+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")+"T"+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")+":"+String(t.getSeconds()).padStart(2,"0")+"."+String(t.getMilliseconds()).padStart(3,"0");return e<0?(s+="-",e*=-1):s+="+",s+=String(Math.floor(e/60)).padStart(2,"0")+":"+String(e%60).padStart(2,"0"),n&&(s+=" BC"),s}function d_e(t){let e=t.getUTCFullYear(),r=e<1;r&&(e=Math.abs(e)+1);let n=String(e).padStart(4,"0")+"-"+String(t.getUTCMonth()+1).padStart(2,"0")+"-"+String(t.getUTCDate()).padStart(2,"0")+"T"+String(t.getUTCHours()).padStart(2,"0")+":"+String(t.getUTCMinutes()).padStart(2,"0")+":"+String(t.getUTCSeconds()).padStart(2,"0")+"."+String(t.getUTCMilliseconds()).padStart(3,"0");return n+="+00:00",r&&(n+=" BC"),n}function f_e(t,e,r){return t=typeof t=="string"?{text:t}:t,e&&(typeof e=="function"?t.callback=e:t.values=e),r&&(t.callback=r),t}var p_e=function(t){return'"'+t.replace(/"/g,'""')+'"'},h_e=function(t){let e=!1,r="'";if(t==null||typeof t!="string")return"''";for(let n=0;n<t.length;n++){let s=t[n];s==="'"?r+=s+s:s==="\\"?(r+=s+s,e=!0):r+=s}return r+="'",e===!0&&(r=" E"+r),r};qH.exports={prepareValue:function(e){return Qg(e)},normalizeQueryConfig:f_e,escapeIdentifier:p_e,escapeLiteral:h_e}});var FH=_((BMe,$H)=>{"use strict";var ic=require("crypto");function H0(t){return ic.createHash("md5").update(t,"utf-8").digest("hex")}function m_e(t,e,r){let n=H0(e+t);return"md5"+H0(Buffer.concat([Buffer.from(n),r]))}function g_e(t){return ic.createHash("sha256").update(t).digest()}function y_e(t,e){return t=t.replace(/(\D)-/,"$1"),ic.createHash(t).update(e).digest()}function E_e(t,e){return ic.createHmac("sha256",t).update(e).digest()}async function __e(t,e,r){return ic.pbkdf2Sync(t,e,r,32,"sha256")}$H.exports={postgresMd5PasswordHash:m_e,randomBytes:ic.randomBytes,deriveKey:__e,sha256:g_e,hashByName:y_e,hmacSha256:E_e,md5:H0}});var HH=_((jMe,jH)=>{var UH=require("crypto");jH.exports={postgresMd5PasswordHash:v_e,randomBytes:S_e,deriveKey:A_e,sha256:w_e,hashByName:b_e,hmacSha256:R_e,md5:V0};var BH=UH.webcrypto||globalThis.crypto,so=BH.subtle,W0=new TextEncoder;function S_e(t){return BH.getRandomValues(Buffer.alloc(t))}async function V0(t){try{return UH.createHash("md5").update(t,"utf-8").digest("hex")}catch{let r=typeof t=="string"?W0.encode(t):t,n=await so.digest("MD5",r);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}}async function v_e(t,e,r){let n=await V0(e+t);return"md5"+await V0(Buffer.concat([Buffer.from(n),r]))}async function w_e(t){return await so.digest("SHA-256",t)}async function b_e(t,e){return await so.digest(t,e)}async function R_e(t,e){let r=await so.importKey("raw",t,{name:"HMAC",hash:"SHA-256"},!1,["sign"]);return await so.sign("HMAC",r,W0.encode(e))}async function A_e(t,e,r){let n=await so.importKey("raw",W0.encode(t),"PBKDF2",!1,["deriveBits"]),s={name:"PBKDF2",hash:"SHA-256",salt:e,iterations:r};return await so.deriveBits(s,n,32*8,["deriveBits"])}});var G0=_((HMe,z0)=>{"use strict";var C_e=parseInt(process.versions&&process.versions.node&&process.versions.node.split(".")[0])<15;C_e?z0.exports=FH():z0.exports=HH()});var zH=_((VMe,WH)=>{function io(t,e){return new Error("SASL channel binding: "+t+" when parsing public certificate "+e.toString("base64"))}function K0(t,e){let r=t[e++];if(r<128)return{length:r,index:e};let n=r&127;if(n>4)throw io("bad length",t);r=0;for(let s=0;s<n;s++)r=r<<8|t[e++];return{length:r,index:e}}function VH(t,e){if(t[e++]!==6)throw io("non-OID data",t);let{length:r,index:n}=K0(t,e);e=n;let s=e+r,i=t[e++],o=(i/40>>0)+"."+i%40;for(;e<s;){let a=0;for(;e<s;){let c=t[e++];if(a=a<<7|c&127,c<128)break}o+="."+a}return{oid:o,index:e}}function Jl(t,e){if(t[e++]!==48)throw io("non-sequence data",t);return K0(t,e)}function T_e(t,e){e===void 0&&(e=0),e=Jl(t,e).index;let{length:r,index:n}=Jl(t,e);e=n+r,e=Jl(t,e).index;let{oid:s,index:i}=VH(t,e);switch(s){case"1.2.840.113549.1.1.4":return"MD5";case"1.2.840.113549.1.1.5":return"SHA-1";case"1.2.840.113549.1.1.11":return"SHA-256";case"1.2.840.113549.1.1.12":return"SHA-384";case"1.2.840.113549.1.1.13":return"SHA-512";case"1.2.840.113549.1.1.14":return"SHA-224";case"1.2.840.113549.1.1.15":return"SHA512-224";case"1.2.840.113549.1.1.16":return"SHA512-256";case"1.2.840.10045.4.1":return"SHA-1";case"1.2.840.10045.4.3.1":return"SHA-224";case"1.2.840.10045.4.3.2":return"SHA-256";case"1.2.840.10045.4.3.3":return"SHA-384";case"1.2.840.10045.4.3.4":return"SHA-512";case"1.2.840.113549.1.1.10":{if(e=i,e=Jl(t,e).index,t[e++]!==160)throw io("non-tag data",t);e=K0(t,e).index,e=Jl(t,e).index;let{oid:o}=VH(t,e);switch(o){case"1.2.840.113549.2.5":return"MD5";case"1.3.14.3.2.26":return"SHA-1";case"2.16.840.1.101.3.4.2.1":return"SHA-256";case"2.16.840.1.101.3.4.2.2":return"SHA-384";case"2.16.840.1.101.3.4.2.3":return"SHA-512"}throw io("unknown hash OID "+o,t)}case"1.3.101.110":case"1.3.101.112":return"SHA-512";case"1.3.101.111":case"1.3.101.113":throw io("Ed448 certificate channel binding is not currently supported by Postgres")}throw io("unknown OID "+s,t)}WH.exports={signatureAlgorithmHashFromCertificate:T_e}});var QH=_((WMe,XH)=>{"use strict";var ci=G0(),{signatureAlgorithmHashFromCertificate:x_e}=zH();function P_e(t,e){let r=["SCRAM-SHA-256"];e&&r.unshift("SCRAM-SHA-256-PLUS");let n=r.find(o=>t.includes(o));if(!n)throw new Error("SASL: Only mechanism(s) "+r.join(" and ")+" are supported");if(n==="SCRAM-SHA-256-PLUS"&&typeof e.getPeerCertificate!="function")throw new Error("SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate");let s=ci.randomBytes(18).toString("base64");return{mechanism:n,clientNonce:s,response:(n==="SCRAM-SHA-256-PLUS"?"p=tls-server-end-point":e?"y":"n")+",,n=*,r="+s,message:"SASLInitialResponse"}}async function I_e(t,e,r,n){if(t.message!=="SASLInitialResponse")throw new Error("SASL: Last message was not SASLInitialResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if(e==="")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string");if(typeof r!="string")throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");let s=D_e(r);if(s.nonce.startsWith(t.clientNonce)){if(s.nonce.length===t.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");let i="n=*,r="+t.clientNonce,o="r="+s.nonce+",s="+s.salt+",i="+s.iteration,a=n?"eSws":"biws";if(t.mechanism==="SCRAM-SHA-256-PLUS"){let O=n.getPeerCertificate().raw,M=x_e(O);(M==="MD5"||M==="SHA-1")&&(M="SHA-256");let U=await ci.hashByName(M,O);a=Buffer.concat([Buffer.from("p=tls-server-end-point,,"),Buffer.from(U)]).toString("base64")}let c="c="+a+",r="+s.nonce,u=i+","+o+","+c,l=Buffer.from(s.salt,"base64"),d=await ci.deriveKey(e,l,s.iteration),m=await ci.hmacSha256(d,"Client Key"),g=await ci.sha256(m),E=await ci.hmacSha256(g,u),w=k_e(Buffer.from(m),Buffer.from(E)).toString("base64"),x=await ci.hmacSha256(d,"Server Key"),T=await ci.hmacSha256(x,u);t.message="SASLResponse",t.serverSignature=Buffer.from(T).toString("base64"),t.response=c+",p="+w}function O_e(t,e){if(t.message!=="SASLResponse")throw new Error("SASL: Last message was not SASLResponse");if(typeof e!="string")throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");let{serverSignature:r}=L_e(e);if(r!==t.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}function N_e(t){if(typeof t!="string")throw new TypeError("SASL: text must be a string");return t.split("").map((e,r)=>t.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}function GH(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function KH(t){if(typeof t!="string")throw new TypeError("SASL: attribute pairs text must be a string");return new Map(t.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");let r=e[0],n=e.substring(2);return[r,n]}))}function D_e(t){let e=KH(t),r=e.get("r");if(r){if(!N_e(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");let n=e.get("s");if(n){if(!GH(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");let s=e.get("i");if(s){if(!/^[1-9][0-9]*$/.test(s))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count")}else throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");let i=parseInt(s,10);return{nonce:r,salt:n,iteration:i}}function L_e(t){let r=KH(t).get("v");if(r){if(!GH(r))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64")}else throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");return{serverSignature:r}}function k_e(t,e){if(!Buffer.isBuffer(t))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(e))throw new TypeError("second argument must be a Buffer");if(t.length!==e.length)throw new Error("Buffer lengths must match");if(t.length===0)throw new Error("Buffers cannot be empty");return Buffer.from(t.map((r,n)=>t[n]^e[n]))}XH.exports={startSession:P_e,continueSession:I_e,finalizeSession:O_e}});var Jg=_((zMe,YH)=>{"use strict";var M_e=Ql();function Yg(t){this._types=t||M_e,this.text={},this.binary={}}Yg.prototype.getOverrides=function(t){switch(t){case"text":return this.text;case"binary":return this.binary;default:return{}}};Yg.prototype.setTypeParser=function(t,e,r){typeof e=="function"&&(r=e,e="text"),this.getOverrides(e)[t]=r};Yg.prototype.getTypeParser=function(t,e){return e=e||"text",this.getOverrides(e)[t]||this._types.getTypeParser(t,e)};YH.exports=Yg});var e4=_((GMe,ZH)=>{"use strict";function oc(t,e={}){if(t.charAt(0)==="/"){let c=t.split(" ");return{host:c[0],database:c[1]}}let r={},n,s=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(t)&&(t=encodeURI(t).replace(/%25(\d\d)/g,"%$1"));try{try{n=new URL(t,"postgres://base")}catch{n=new URL(t.replace("@/","@___DUMMY___/"),"postgres://base"),s=!0}}catch(c){c.input&&(c.input="*****REDACTED*****")}for(let c of n.searchParams.entries())r[c[0]]=c[1];if(r.user=r.user||decodeURIComponent(n.username),r.password=r.password||decodeURIComponent(n.password),n.protocol=="socket:")return r.host=decodeURI(n.pathname),r.database=n.searchParams.get("db"),r.client_encoding=n.searchParams.get("encoding"),r;let i=s?"":n.hostname;r.host?i&&/^%2f/i.test(i)&&(n.pathname=i+n.pathname):r.host=decodeURIComponent(i),r.port||(r.port=n.port);let o=n.pathname.slice(1)||null;r.database=o?decodeURI(o):null,(r.ssl==="true"||r.ssl==="1")&&(r.ssl=!0),r.ssl==="0"&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={});let a=r.sslcert||r.sslkey||r.sslrootcert?require("fs"):null;if(r.sslcert&&(r.ssl.cert=a.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=a.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=a.readFileSync(r.sslrootcert).toString()),e.useLibpqCompat&&r.uselibpqcompat)throw new Error("Both useLibpqCompat and uselibpqcompat are set. Please use only one of them.");if(r.uselibpqcompat==="true"||e.useLibpqCompat)switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":{r.ssl.rejectUnauthorized=!1;break}case"require":{r.sslrootcert?r.ssl.checkServerIdentity=function(){}:r.ssl.rejectUnauthorized=!1;break}case"verify-ca":{if(!r.ssl.ca)throw new Error("SECURITY WARNING: Using sslmode=verify-ca requires specifying a CA with sslrootcert. If a public CA is used, verify-ca allows connections to a server that somebody else may have registered with the CA, making you vulnerable to Man-in-the-Middle attacks. Either specify a custom CA certificate with sslrootcert parameter or use sslmode=verify-full for proper security.");r.ssl.checkServerIdentity=function(){};break}case"verify-full":break}else switch(r.sslmode){case"disable":{r.ssl=!1;break}case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":{r.ssl.rejectUnauthorized=!1;break}}return r}function q_e(t){return Object.entries(t).reduce((r,[n,s])=>(s!=null&&(r[n]=s),r),{})}function JH(t){return Object.entries(t).reduce((r,[n,s])=>{if(n==="ssl"){let i=s;typeof i=="boolean"&&(r[n]=i),typeof i=="object"&&(r[n]=q_e(i))}else if(s!=null)if(n==="port"){if(s!==""){let i=parseInt(s,10);if(isNaN(i))throw new Error(`Invalid ${n}: ${s}`);r[n]=i}}else r[n]=s;return r},{})}function $_e(t){return JH(oc(t))}ZH.exports=oc;oc.parse=oc;oc.toClientConfig=JH;oc.parseIntoClientConfig=$_e});var Q0=_((KMe,n4)=>{"use strict";var F_e=require("dns"),r4=Yl(),t4=e4().parse,tr=function(t,e,r){return r===void 0?r=process.env["PG"+t.toUpperCase()]:r===!1||(r=process.env[r]),e[t]||r||r4[t]},U_e=function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return r4.ssl},ac=function(t){return"'"+(""+t).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},qr=function(t,e,r){let n=e[r];n!=null&&t.push(r+"="+ac(n))},X0=class{constructor(e){e=typeof e=="string"?t4(e):e||{},e.connectionString&&(e=Object.assign({},e,t4(e.connectionString))),this.user=tr("user",e),this.database=tr("database",e),this.database===void 0&&(this.database=this.user),this.port=parseInt(tr("port",e),10),this.host=tr("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:tr("password",e)}),this.binary=tr("binary",e),this.options=tr("options",e),this.ssl=typeof e.ssl>"u"?U_e():e.ssl,typeof this.ssl=="string"&&this.ssl==="true"&&(this.ssl=!0),this.ssl==="no-verify"&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=tr("client_encoding",e),this.replication=tr("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=tr("application_name",e,"PGAPPNAME"),this.fallback_application_name=tr("fallback_application_name",e,!1),this.statement_timeout=tr("statement_timeout",e,!1),this.lock_timeout=tr("lock_timeout",e,!1),this.idle_in_transaction_session_timeout=tr("idle_in_transaction_session_timeout",e,!1),this.query_timeout=tr("query_timeout",e,!1),e.connectionTimeoutMillis===void 0?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),e.keepAlive===!1?this.keepalives=0:e.keepAlive===!0&&(this.keepalives=1),typeof e.keepAliveInitialDelayMillis=="number"&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){let r=[];qr(r,this,"user"),qr(r,this,"password"),qr(r,this,"port"),qr(r,this,"application_name"),qr(r,this,"fallback_application_name"),qr(r,this,"connect_timeout"),qr(r,this,"options");let n=typeof this.ssl=="object"?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(qr(r,n,"sslmode"),qr(r,n,"sslca"),qr(r,n,"sslkey"),qr(r,n,"sslcert"),qr(r,n,"sslrootcert"),this.database&&r.push("dbname="+ac(this.database)),this.replication&&r.push("replication="+ac(this.replication)),this.host&&r.push("host="+ac(this.host)),this.isDomainSocket)return e(null,r.join(" "));this.client_encoding&&r.push("client_encoding="+ac(this.client_encoding)),F_e.lookup(this.host,function(s,i){return s?e(s,null):(r.push("hostaddr="+ac(i)),e(null,r.join(" ")))})}};n4.exports=X0});var J0=_((XMe,i4)=>{"use strict";var B_e=Ql(),s4=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/,Y0=class{constructor(e,r){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=r,this.RowCtor=null,this.rowAsArray=e==="array",this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(e){let r;e.text?r=s4.exec(e.text):r=s4.exec(e.command),r&&(this.command=r[1],r[3]?(this.oid=parseInt(r[2],10),this.rowCount=parseInt(r[3],10)):r[2]&&(this.rowCount=parseInt(r[2],10)))}_parseRowAsArray(e){let r=new Array(e.length);for(let n=0,s=e.length;n<s;n++){let i=e[n];i!==null?r[n]=this._parsers[n](i):r[n]=null}return r}parseRow(e){let r={...this._prebuiltEmptyResultObject};for(let n=0,s=e.length;n<s;n++){let i=e[n],o=this.fields[n].name;if(i!==null){let a=this.fields[n].format==="binary"?Buffer.from(i):i;r[o]=this._parsers[n](a)}else r[o]=null}return r}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));let r={};for(let n=0;n<e.length;n++){let s=e[n];r[s.name]=null,this._types?this._parsers[n]=this._types.getTypeParser(s.dataTypeID,s.format||"text"):this._parsers[n]=B_e.getTypeParser(s.dataTypeID,s.format||"text")}this._prebuiltEmptyResultObject={...r}}};i4.exports=Y0});var u4=_((QMe,c4)=>{"use strict";var{EventEmitter:j_e}=require("events"),o4=J0(),a4=sc(),Z0=class extends j_e{constructor(e,r,n){super(),e=a4.normalizeQueryConfig(e,r,n),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.queryMode=e.queryMode,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new o4(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return this.queryMode==="extended"||this.name||this.rows?!0:!this.text||!this.values?!1:this.values.length>0}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new o4(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let r;if(!this._canceledDueToError){try{r=this._result.parseRow(e.fields)}catch(n){this._canceledDueToError=n;return}this.emit("row",r,this._result),this._accumulateRows&&this._result.addRow(r)}}handleCommandComplete(e,r){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&r.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,r){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);if(this.callback)try{this.callback(null,this._results)}catch(r){process.nextTick(()=>{throw r})}this.emit("end",this._results)}submit(e){if(typeof this.text!="string"&&typeof this.name!="string")return new Error("A query must have either text or a name. Supplying neither is unsupported.");let r=e.parsedStatements[this.name];if(this.text&&r&&this.text!==r)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error("Query values must be an array");if(this.requiresPreparation()){e.stream.cork&&e.stream.cork();try{this.prepare(e)}finally{e.stream.uncork&&e.stream.uncork()}}else e.query(this.text);return null}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,r){e.execute({portal:this.portal,rows:r}),r?e.flush():e.sync()}prepare(e){this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:a4.prepareValue})}catch(r){this.handleError(r,e);return}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,r){}};c4.exports=Z0});var hR=_(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.NoticeMessage=te.DataRowMessage=te.CommandCompleteMessage=te.ReadyForQueryMessage=te.NotificationResponseMessage=te.BackendKeyDataMessage=te.AuthenticationMD5Password=te.ParameterStatusMessage=te.ParameterDescriptionMessage=te.RowDescriptionMessage=te.Field=te.CopyResponse=te.CopyDataMessage=te.DatabaseError=te.copyDone=te.emptyQuery=te.replicationStart=te.portalSuspended=te.noData=te.closeComplete=te.bindComplete=te.parseComplete=void 0;te.parseComplete={name:"parseComplete",length:5};te.bindComplete={name:"bindComplete",length:5};te.closeComplete={name:"closeComplete",length:5};te.noData={name:"noData",length:5};te.portalSuspended={name:"portalSuspended",length:5};te.replicationStart={name:"replicationStart",length:4};te.emptyQuery={name:"emptyQuery",length:4};te.copyDone={name:"copyDone",length:4};var eR=class extends Error{constructor(e,r,n){super(e),this.length=r,this.name=n}};te.DatabaseError=eR;var tR=class{constructor(e,r){this.length=e,this.chunk=r,this.name="copyData"}};te.CopyDataMessage=tR;var rR=class{constructor(e,r,n,s){this.length=e,this.name=r,this.binary=n,this.columnTypes=new Array(s)}};te.CopyResponse=rR;var nR=class{constructor(e,r,n,s,i,o,a){this.name=e,this.tableID=r,this.columnID=n,this.dataTypeID=s,this.dataTypeSize=i,this.dataTypeModifier=o,this.format=a}};te.Field=nR;var sR=class{constructor(e,r){this.length=e,this.fieldCount=r,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};te.RowDescriptionMessage=sR;var iR=class{constructor(e,r){this.length=e,this.parameterCount=r,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};te.ParameterDescriptionMessage=iR;var oR=class{constructor(e,r,n){this.length=e,this.parameterName=r,this.parameterValue=n,this.name="parameterStatus"}};te.ParameterStatusMessage=oR;var aR=class{constructor(e,r){this.length=e,this.salt=r,this.name="authenticationMD5Password"}};te.AuthenticationMD5Password=aR;var cR=class{constructor(e,r,n){this.length=e,this.processID=r,this.secretKey=n,this.name="backendKeyData"}};te.BackendKeyDataMessage=cR;var uR=class{constructor(e,r,n,s){this.length=e,this.processId=r,this.channel=n,this.payload=s,this.name="notification"}};te.NotificationResponseMessage=uR;var lR=class{constructor(e,r){this.length=e,this.status=r,this.name="readyForQuery"}};te.ReadyForQueryMessage=lR;var dR=class{constructor(e,r){this.length=e,this.text=r,this.name="commandComplete"}};te.CommandCompleteMessage=dR;var fR=class{constructor(e,r){this.length=e,this.fields=r,this.name="dataRow",this.fieldCount=r.length}};te.DataRowMessage=fR;var pR=class{constructor(e,r){this.length=e,this.message=r,this.name="notice"}};te.NoticeMessage=pR});var l4=_(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.Writer=void 0;var mR=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){let n=this.buffer,s=n.length+(n.length>>1)+e;this.buffer=Buffer.allocUnsafe(s),n.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(!e)this.ensure(1);else{let r=Buffer.byteLength(e);this.ensure(r+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=r}return this.buffer[this.offset++]=0,this}addString(e=""){let r=Buffer.byteLength(e);return this.ensure(r),this.buffer.write(e,this.offset),this.offset+=r,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;let r=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(r,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){let r=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),r}};Zg.Writer=mR});var f4=_(ty=>{"use strict";Object.defineProperty(ty,"__esModule",{value:!0});ty.serialize=void 0;var gR=l4(),Ke=new gR.Writer,H_e=t=>{Ke.addInt16(3).addInt16(0);for(let n of Object.keys(t))Ke.addCString(n).addCString(t[n]);Ke.addCString("client_encoding").addCString("UTF8");let e=Ke.addCString("").flush(),r=e.length+4;return new gR.Writer().addInt32(r).add(e).flush()},V_e=()=>{let t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},W_e=t=>Ke.addCString(t).flush(112),z_e=function(t,e){return Ke.addCString(t).addInt32(Buffer.byteLength(e)).addString(e),Ke.flush(112)},G_e=function(t){return Ke.addString(t).flush(112)},K_e=t=>Ke.addCString(t).flush(81),d4=[],X_e=t=>{let e=t.name||"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let r=t.types||d4,n=r.length,s=Ke.addCString(e).addCString(t.text).addInt16(n);for(let i=0;i<n;i++)s.addInt32(r[i]);return Ke.flush(80)},cc=new gR.Writer,Q_e=function(t,e){for(let r=0;r<t.length;r++){let n=e?e(t[r],r):t[r];n==null?(Ke.addInt16(0),cc.addInt32(-1)):n instanceof Buffer?(Ke.addInt16(1),cc.addInt32(n.length),cc.add(n)):(Ke.addInt16(0),cc.addInt32(Buffer.byteLength(n)),cc.addString(n))}},Y_e=(t={})=>{let e=t.portal||"",r=t.statement||"",n=t.binary||!1,s=t.values||d4,i=s.length;return Ke.addCString(e).addCString(r),Ke.addInt16(i),Q_e(s,t.valueMapper),Ke.addInt16(i),Ke.add(cc.flush()),Ke.addInt16(1),Ke.addInt16(n?1:0),Ke.flush(66)},J_e=Buffer.from([69,0,0,0,9,0,0,0,0,0]),Z_e=t=>{if(!t||!t.portal&&!t.rows)return J_e;let e=t.portal||"",r=t.rows||0,n=Buffer.byteLength(e),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(e,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},eSe=(t,e)=>{let r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(t,8),r.writeInt32BE(e,12),r},yR=(t,e)=>{let n=4+Buffer.byteLength(e)+1,s=Buffer.allocUnsafe(1+n);return s[0]=t,s.writeInt32BE(n,1),s.write(e,5,"utf-8"),s[n]=0,s},tSe=Ke.addCString("P").flush(68),rSe=Ke.addCString("S").flush(68),nSe=t=>t.name?yR(68,`${t.type}${t.name||""}`):t.type==="P"?tSe:rSe,sSe=t=>{let e=`${t.type}${t.name||""}`;return yR(67,e)},iSe=t=>Ke.add(t).flush(100),oSe=t=>yR(102,t),ey=t=>Buffer.from([t,0,0,0,4]),aSe=ey(72),cSe=ey(83),uSe=ey(88),lSe=ey(99),dSe={startup:H_e,password:W_e,requestSsl:V_e,sendSASLInitialResponseMessage:z_e,sendSCRAMClientFinalMessage:G_e,query:K_e,parse:X_e,bind:Y_e,execute:Z_e,describe:nSe,close:sSe,flush:()=>aSe,sync:()=>cSe,end:()=>uSe,copyData:iSe,copyDone:()=>lSe,copyFail:oSe,cancel:eSe};ty.serialize=dSe});var p4=_(ry=>{"use strict";Object.defineProperty(ry,"__esModule",{value:!0});ry.BufferReader=void 0;var fSe=Buffer.allocUnsafe(0),ER=class{constructor(e=0){this.offset=e,this.buffer=fSe,this.encoding="utf-8"}setBuffer(e,r){this.offset=e,this.buffer=r}int16(){let e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){let e=this.buffer[this.offset];return this.offset++,e}int32(){let e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}uint32(){let e=this.buffer.readUInt32BE(this.offset);return this.offset+=4,e}string(e){let r=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,r}cstring(){let e=this.offset,r=e;for(;this.buffer[r++]!==0;);return this.offset=r,this.buffer.toString(this.encoding,e,r-1)}bytes(e){let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}};ry.BufferReader=ER});var g4=_(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.Parser=void 0;var Ze=hR(),pSe=p4(),_R=1,hSe=4,h4=_R+hSe,m4=Buffer.allocUnsafe(0),SR=class{constructor(e){if(this.buffer=m4,this.bufferLength=0,this.bufferOffset=0,this.reader=new pSe.BufferReader,e?.mode==="binary")throw new Error("Binary mode not supported yet");this.mode=e?.mode||"text"}parse(e,r){this.mergeBuffer(e);let n=this.bufferOffset+this.bufferLength,s=this.bufferOffset;for(;s+h4<=n;){let i=this.buffer[s],o=this.buffer.readUInt32BE(s+_R),a=_R+o;if(a+s<=n){let c=this.handlePacket(s+h4,i,o,this.buffer);r(c),s+=a}else break}s===n?(this.buffer=m4,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=n-s,this.bufferOffset=s)}mergeBuffer(e){if(this.bufferLength>0){let r=this.bufferLength+e.byteLength;if(r+this.bufferOffset>this.buffer.byteLength){let s;if(r<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)s=this.buffer;else{let i=this.buffer.byteLength*2;for(;r>=i;)i*=2;s=Buffer.allocUnsafe(i)}this.buffer.copy(s,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=s,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=r}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,r,n,s){switch(r){case 50:return Ze.bindComplete;case 49:return Ze.parseComplete;case 51:return Ze.closeComplete;case 110:return Ze.noData;case 115:return Ze.portalSuspended;case 99:return Ze.copyDone;case 87:return Ze.replicationStart;case 73:return Ze.emptyQuery;case 68:return this.parseDataRowMessage(e,n,s);case 67:return this.parseCommandCompleteMessage(e,n,s);case 90:return this.parseReadyForQueryMessage(e,n,s);case 65:return this.parseNotificationMessage(e,n,s);case 82:return this.parseAuthenticationResponse(e,n,s);case 83:return this.parseParameterStatusMessage(e,n,s);case 75:return this.parseBackendKeyData(e,n,s);case 69:return this.parseErrorMessage(e,n,s,"error");case 78:return this.parseErrorMessage(e,n,s,"notice");case 84:return this.parseRowDescriptionMessage(e,n,s);case 116:return this.parseParameterDescriptionMessage(e,n,s);case 71:return this.parseCopyInMessage(e,n,s);case 72:return this.parseCopyOutMessage(e,n,s);case 100:return this.parseCopyData(e,n,s);default:return new Ze.DatabaseError("received invalid response: "+r.toString(16),n,"error")}}parseReadyForQueryMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.string(1);return new Ze.ReadyForQueryMessage(r,s)}parseCommandCompleteMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring();return new Ze.CommandCompleteMessage(r,s)}parseCopyData(e,r,n){let s=n.slice(e,e+(r-4));return new Ze.CopyDataMessage(r,s)}parseCopyInMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyInResponse")}parseCopyOutMessage(e,r,n){return this.parseCopyMessage(e,r,n,"copyOutResponse")}parseCopyMessage(e,r,n,s){this.reader.setBuffer(e,n);let i=this.reader.byte()!==0,o=this.reader.int16(),a=new Ze.CopyResponse(r,s,i,o);for(let c=0;c<o;c++)a.columnTypes[c]=this.reader.int16();return a}parseNotificationMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new Ze.NotificationResponseMessage(r,s,i,o)}parseRowDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ze.RowDescriptionMessage(r,s);for(let o=0;o<s;o++)i.fields[o]=this.parseField();return i}parseField(){let e=this.reader.cstring(),r=this.reader.uint32(),n=this.reader.int16(),s=this.reader.uint32(),i=this.reader.int16(),o=this.reader.int32(),a=this.reader.int16()===0?"text":"binary";return new Ze.Field(e,r,n,s,i,o,a)}parseParameterDescriptionMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Ze.ParameterDescriptionMessage(r,s);for(let o=0;o<s;o++)i.dataTypeIDs[o]=this.reader.int32();return i}parseDataRowMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int16(),i=new Array(s);for(let o=0;o<s;o++){let a=this.reader.int32();i[o]=a===-1?null:this.reader.string(a)}return new Ze.DataRowMessage(r,i)}parseParameterStatusMessage(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.cstring(),i=this.reader.cstring();return new Ze.ParameterStatusMessage(r,s,i)}parseBackendKeyData(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i=this.reader.int32();return new Ze.BackendKeyDataMessage(r,s,i)}parseAuthenticationResponse(e,r,n){this.reader.setBuffer(e,n);let s=this.reader.int32(),i={name:"authenticationOk",length:r};switch(s){case 0:break;case 3:i.length===8&&(i.name="authenticationCleartextPassword");break;case 5:if(i.length===12){i.name="authenticationMD5Password";let o=this.reader.bytes(4);return new Ze.AuthenticationMD5Password(r,o)}break;case 10:{i.name="authenticationSASL",i.mechanisms=[];let o;do o=this.reader.cstring(),o&&i.mechanisms.push(o);while(o)}break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(r-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(r-8);break;default:throw new Error("Unknown authenticationOk message type "+s)}return i}parseErrorMessage(e,r,n,s){this.reader.setBuffer(e,n);let i={},o=this.reader.string(1);for(;o!=="\0";)i[o]=this.reader.cstring(),o=this.reader.string(1);let a=i.M,c=s==="notice"?new Ze.NoticeMessage(r,a):new Ze.DatabaseError(a,r,s);return c.severity=i.S,c.code=i.C,c.detail=i.D,c.hint=i.H,c.position=i.P,c.internalPosition=i.p,c.internalQuery=i.q,c.where=i.W,c.schema=i.s,c.table=i.t,c.column=i.c,c.dataType=i.d,c.constraint=i.n,c.file=i.F,c.line=i.L,c.routine=i.R,c}};ny.Parser=SR});var vR=_(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.DatabaseError=ui.serialize=ui.parse=void 0;var mSe=hR();Object.defineProperty(ui,"DatabaseError",{enumerable:!0,get:function(){return mSe.DatabaseError}});var gSe=f4();Object.defineProperty(ui,"serialize",{enumerable:!0,get:function(){return gSe.serialize}});var ySe=g4();function ESe(t,e){let r=new ySe.Parser;return t.on("data",n=>r.parse(n,e)),new Promise(n=>t.on("end",()=>n()))}ui.parse=ESe});var y4=_(wR=>{"use strict";Object.defineProperty(wR,"__esModule",{value:!0});wR.default={}});var _4=_((sqe,E4)=>{var{getStream:_Se,getSecureStream:SSe}=RSe();E4.exports={getStream:_Se,getSecureStream:SSe};function vSe(){function t(r){let n=require("net");return new n.Socket}function e(r){return require("tls").connect(r)}return{getStream:t,getSecureStream:e}}function wSe(){function t(r){let{CloudflareSocket:n}=y4();return new n(r)}function e(r){return r.socket.startTls(r),r.socket}return{getStream:t,getSecureStream:e}}function bSe(){if(typeof navigator=="object"&&navigator!==null&&typeof navigator.userAgent=="string")return navigator.userAgent==="Cloudflare-Workers";if(typeof Response=="function"){let t=new Response(null,{cf:{thing:!0}});if(typeof t.cf=="object"&&t.cf!==null&&t.cf.thing)return!0}return!1}function RSe(){return bSe()?wSe():vSe()}});var RR=_((iqe,S4)=>{"use strict";var ASe=require("events").EventEmitter,{parse:CSe,serialize:_t}=vR(),{getStream:TSe,getSecureStream:xSe}=_4(),PSe=_t.flush(),ISe=_t.sync(),OSe=_t.end(),bR=class extends ASe{constructor(e){super(),e=e||{},this.stream=e.stream||TSe(e.ssl),typeof this.stream=="function"&&(this.stream=this.stream(e)),this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;let r=this;this.on("newListener",function(n){n==="message"&&(r._emitMessage=!0)})}connect(e,r){let n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,r),this.stream.once("connect",function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit("connect")});let s=function(i){n._ending&&(i.code==="ECONNRESET"||i.code==="EPIPE")||n.emit("error",i)};if(this.stream.on("error",s),this.stream.on("close",function(){n.emit("end")}),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",function(i){switch(i.toString("utf8")){case"S":break;case"N":return n.stream.end(),n.emit("error",new Error("The server does not support SSL connections"));default:return n.stream.end(),n.emit("error",new Error("There was an error establishing an SSL connection"))}let a={socket:n.stream};n.ssl!==!0&&(Object.assign(a,n.ssl),"key"in n.ssl&&(a.key=n.ssl.key));let c=require("net");c.isIP&&c.isIP(r)===0&&(a.servername=r);try{n.stream=xSe(a)}catch(u){return n.emit("error",u)}n.attachListeners(n.stream),n.stream.on("error",s),n.emit("sslconnect")})}attachListeners(e){CSe(e,r=>{let n=r.name==="error"?"errorMessage":r.name;this._emitMessage&&this.emit("message",r),this.emit(n,r)})}requestSsl(){this.stream.write(_t.requestSsl())}startup(e){this.stream.write(_t.startup(e))}cancel(e,r){this._send(_t.cancel(e,r))}password(e){this._send(_t.password(e))}sendSASLInitialResponseMessage(e,r){this._send(_t.sendSASLInitialResponseMessage(e,r))}sendSCRAMClientFinalMessage(e){this._send(_t.sendSCRAMClientFinalMessage(e))}_send(e){return this.stream.writable?this.stream.write(e):!1}query(e){this._send(_t.query(e))}parse(e){this._send(_t.parse(e))}bind(e){this._send(_t.bind(e))}execute(e){this._send(_t.execute(e))}flush(){this.stream.writable&&this.stream.write(PSe)}sync(){this._ending=!0,this._send(ISe)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,!this._connecting||!this.stream.writable){this.stream.end();return}return this.stream.write(OSe,()=>{this.stream.end()})}close(e){this._send(_t.close(e))}describe(e){this._send(_t.describe(e))}sendCopyFromChunk(e){this._send(_t.copyData(e))}endCopyFrom(){this._send(_t.copyDone())}sendCopyFail(e){this._send(_t.copyFail(e))}};S4.exports=bR});var R4=_((oqe,b4)=>{"use strict";var{Transform:NSe}=require("stream"),{StringDecoder:DSe}=require("string_decoder"),li=Symbol("last"),sy=Symbol("decoder");function LSe(t,e,r){let n;if(this.overflow){if(n=this[sy].write(t).split(this.matcher),n.length===1)return r();n.shift(),this.overflow=!1}else this[li]+=this[sy].write(t),n=this[li].split(this.matcher);this[li]=n.pop();for(let s=0;s<n.length;s++)try{w4(this,this.mapper(n[s]))}catch(i){return r(i)}if(this.overflow=this[li].length>this.maxLength,this.overflow&&!this.skipOverflow){r(new Error("maximum buffer reached"));return}r()}function kSe(t){if(this[li]+=this[sy].end(),this[li])try{w4(this,this.mapper(this[li]))}catch(e){return t(e)}t()}function w4(t,e){e!==void 0&&t.push(e)}function v4(t){return t}function MSe(t,e,r){switch(t=t||/\r?\n/,e=e||v4,r=r||{},arguments.length){case 1:typeof t=="function"?(e=t,t=/\r?\n/):typeof t=="object"&&!(t instanceof RegExp)&&!t[Symbol.split]&&(r=t,t=/\r?\n/);break;case 2:typeof t=="function"?(r=e,e=t,t=/\r?\n/):typeof e=="object"&&(r=e,e=v4)}r=Object.assign({},r),r.autoDestroy=!0,r.transform=LSe,r.flush=kSe,r.readableObjectMode=!0;let n=new NSe(r);return n[li]="",n[sy]=new DSe("utf8"),n.matcher=t,n.mapper=e,n.maxLength=r.maxLength,n.skipOverflow=r.skipOverflow||!1,n.overflow=!1,n._destroy=function(s,i){this._writableState.errorEmitted=!1,i(s)},n}b4.exports=MSe});var T4=_((aqe,ds)=>{"use strict";var A4=require("path"),qSe=require("stream").Stream,$Se=R4(),C4=require("util"),FSe=5432,iy=process.platform==="win32",Zl=process.stderr,USe=56,BSe=7,jSe=61440,HSe=32768;function VSe(t){return(t&jSe)==HSe}var uc=["host","port","database","user","password"],AR=uc.length,WSe=uc[AR-1];function CR(){var t=Zl instanceof qSe&&Zl.writable===!0;if(t){var e=Array.prototype.slice.call(arguments).concat(`
`);Zl.write(C4.format.apply(C4,e))}}Object.defineProperty(ds.exports,"isWin",{get:function(){return iy},set:function(t){iy=t}});ds.exports.warnTo=function(t){var e=Zl;return Zl=t,e};ds.exports.getFileName=function(t){var e=t||process.env,r=e.PGPASSFILE||(iy?A4.join(e.APPDATA||"./","postgresql","pgpass.conf"):A4.join(e.HOME||"./",".pgpass"));return r};ds.exports.usePgPass=function(t,e){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:iy?!0:(e=e||"<unkn>",VSe(t.mode)?t.mode&(USe|BSe)?(CR('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',e),!1):!0:(CR('WARNING: password file "%s" is not a plain file',e),!1))};var zSe=ds.exports.match=function(t,e){return uc.slice(0,-1).reduce(function(r,n,s){return s==1&&Number(t[n]||FSe)===Number(e[n])?r&&!0:r&&(e[n]==="*"||e[n]===t[n])},!0)};ds.exports.getPassword=function(t,e,r){var n,s=e.pipe($Se());function i(c){var u=GSe(c);u&&KSe(u)&&zSe(t,u)&&(n=u[WSe],s.end())}var o=function(){e.destroy(),r(n)},a=function(c){e.destroy(),CR("WARNING: error on reading file: %s",c),r(void 0)};e.on("error",a),s.on("data",i).on("end",o).on("error",a)};var GSe=ds.exports.parseLine=function(t){if(t.length<11||t.match(/^\s+#/))return null;for(var e="",r="",n=0,s=0,i=0,o={},a=!1,c=function(l,d,m){var g=t.substring(d,m);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),o[uc[l]]=g},u=0;u<t.length-1;u+=1){if(e=t.charAt(u+1),r=t.charAt(u),a=n==AR-1,a){c(n,s);break}u>=0&&e==":"&&r!=="\\"&&(c(n,s,u+1),s=u+2,n+=1)}return o=Object.keys(o).length===AR?o:null,o},KSe=ds.exports.isValidEntry=function(t){for(var e={0:function(o){return o.length>0},1:function(o){return o==="*"?!0:(o=Number(o),isFinite(o)&&o>0&&o<9007199254740992&&Math.floor(o)===o)},2:function(o){return o.length>0},3:function(o){return o.length>0},4:function(o){return o.length>0}},r=0;r<uc.length;r+=1){var n=e[r],s=t[uc[r]]||"",i=n(s);if(!i)return!1}return!0}});var P4=_((uqe,TR)=>{"use strict";var cqe=require("path"),x4=require("fs"),oy=T4();TR.exports=function(t,e){var r=oy.getFileName();x4.stat(r,function(n,s){if(n||!oy.usePgPass(s,r))return e(void 0);var i=x4.createReadStream(r);oy.getPassword(t,i,e)})};TR.exports.warnTo=oy.warnTo});var D4=_((lqe,N4)=>{"use strict";var XSe=require("events").EventEmitter,I4=sc(),xR=QH(),QSe=Jg(),YSe=Q0(),O4=u4(),JSe=Yl(),ZSe=RR(),eve=G0(),ay=class extends XSe{constructor(e){super(),this.connectionParameters=new YSe(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=e||{};this._Promise=r.Promise||global.Promise,this._types=new QSe(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new ZSe({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||JSe.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(e){let r=n=>{process.nextTick(()=>{n.handleError(e,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(e){let r=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){let s=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(s)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{n._ending=!0,n.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){r.ssl?n.requestSsl():n.startup(r.getStartupConf())}),n.on("sslconnect",function(){n.startup(r.getStartupConf())}),this._attachListeners(n),n.once("end",()=>{let s=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(s),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(s):this._handleErrorEvent(s):this._connectionError||this._handleErrorEvent(s)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(e){this._connect(e);return}return new this._Promise((r,n)=>{this._connect(s=>{s?n(s):r()})})}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(n=>{if(n!==void 0){if(typeof n!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()}).catch(n=>{r.emit("error",n)});else if(this.password!==null)e();else try{P4()(this.connectionParameters,s=>{s!==void 0&&(this.connectionParameters.password=this.password=s),e()})}catch(n){this.emit("error",n)}}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(async()=>{try{let r=await eve.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(e){this._checkPgPass(()=>{try{this.saslSession=xR.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(e){try{await xR.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(e){try{xR.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);let r=this.activeQuery;if(!r){this._handleErrorEvent(e);return}this.activeQuery=null,r.handleError(e,this.connection)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let e=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(e);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){let e=this.connectionParameters,r={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(r.application_name=n),e.replication&&(r.replication=""+e.replication),e.statement_timeout&&(r.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(r.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(r.options=e.options),r}cancel(e,r){if(e.activeQuery===r){let n=this.connection;this.host&&this.host.indexOf("/")===0?n.connect(this.host+"/.s.PGSQL."+this.port):n.connect(this.port,this.host),n.on("connect",function(){n.cancel(e.processID,e.secretKey)})}else e.queryQueue.indexOf(r)!==-1&&e.queryQueue.splice(e.queryQueue.indexOf(r),1)}setTypeParser(e,r,n){return this._types.setTypeParser(e,r,n)}getTypeParser(e,r){return this._types.getTypeParser(e,r)}escapeIdentifier(e){return I4.escapeIdentifier(e)}escapeLiteral(e){return I4.escapeLiteral(e)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,r,n){let s,i,o,a,c;if(e==null)throw new TypeError("Client was passed a null or undefined query");return typeof e.submit=="function"?(o=e.query_timeout||this.connectionParameters.query_timeout,i=s=e,typeof r=="function"&&(s.callback=s.callback||r)):(o=e.query_timeout||this.connectionParameters.query_timeout,s=new O4(e,r,n),s.callback||(i=new this._Promise((u,l)=>{s.callback=(d,m)=>d?l(d):u(m)}).catch(u=>{throw Error.captureStackTrace(u),u}))),o&&(c=s.callback,a=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{s.handleError(u,this.connection)}),c(u),s.callback=()=>{};let l=this.queryQueue.indexOf(s);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},o),s.callback=(u,l)=>{clearTimeout(a),c(u,l)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{s.handleError(new Error("Client was closed and is not queryable"),this.connection)}),i):(this.queryQueue.push(s),this._pulseQueryQueue(),i):(process.nextTick(()=>{s.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),i)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended)if(e)e();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),e)this.connection.once("end",e);else return new this._Promise(r=>{this.connection.once("end",r)})}};ay.Query=O4;N4.exports=ay});var q4=_((dqe,M4)=>{"use strict";var tve=require("events").EventEmitter,L4=function(){},k4=(t,e)=>{let r=t.findIndex(e);return r===-1?void 0:t.splice(r,1)[0]},PR=class{constructor(e,r,n){this.client=e,this.idleListener=r,this.timeoutId=n}},lc=class{constructor(e){this.callback=e}};function rve(){throw new Error("Release called on client which has already been released to the pool.")}function cy(t,e){if(e)return{callback:e,result:void 0};let r,n,s=function(o,a){o?r(o):n(a)},i=new t(function(o,a){n=o,r=a}).catch(o=>{throw Error.captureStackTrace(o),o});return{callback:s,result:i}}function nve(t,e){return function r(n){n.client=e,e.removeListener("error",r),e.on("error",()=>{t.log("additional client error after disconnection due to error",n)}),t._remove(e),t.emit("error",n,e)}}var IR=class extends tve{constructor(e,r){super(),this.options=Object.assign({},e),e!=null&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),e!=null&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||OR().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let e=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let n=r.client;n.ref&&n.ref();let s=r.idleListener;return this._acquireClient(n,e,s,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e,r){let n=k4(this._idle,i=>i.client===e);n!==void 0&&clearTimeout(n.timeoutId),this._clients=this._clients.filter(i=>i!==e);let s=this;e.end(()=>{s.emit("remove",e),typeof r=="function"&&r()})}connect(e){if(this.ending){let s=new Error("Cannot use a pool after calling end on the pool");return e?e(s):this.Promise.reject(s)}let r=cy(this.Promise,e),n=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new lc(r.callback)),n;let s=(a,c,u)=>{clearTimeout(o),r.callback(a,c,u)},i=new lc(s),o=setTimeout(()=>{k4(this._pendingQueue,a=>a.callback===s),i.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return o.unref&&o.unref(),this._pendingQueue.push(i),n}return this.newClient(new lc(r.callback)),n}newClient(e){let r=new this.Client(this.options);this._clients.push(r);let n=nve(this,r);this.log("checking client timeout");let s,i=!1;this.options.connectionTimeoutMillis&&(s=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(o=>{if(s&&clearTimeout(s),r.on("error",n),o)this.log("client failed to connect",o),this._clients=this._clients.filter(a=>a!==r),i&&(o=new Error("Connection terminated due to connection timeout",{cause:o})),this._pulseQueue(),e.timedOut||e.callback(o,void 0,L4);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let a=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new lc((u,l,d)=>d()),n,!1)},this.options.maxLifetimeSeconds*1e3);a.unref(),r.once("end",()=>clearTimeout(a))}return this._acquireClient(r,e,n,!0)}})}_acquireClient(e,r,n,s){s&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,n),e.removeListener("error",n),r.timedOut?s&&this.options.verify?this.options.verify(e,e.release):e.release():s&&this.options.verify?this.options.verify(e,i=>{if(i)return e.release(i),r.callback(i,void 0,L4);r.callback(void 0,e,e.release)}):r.callback(void 0,e,e.release)}_releaseOnce(e,r){let n=!1;return s=>{n&&rve(),n=!0,this._release(e,r,s)}}_release(e,r,n){if(e.on("error",r),e._poolUseCount=(e._poolUseCount||0)+1,this.emit("release",n,e),n||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e,this._pulseQueue.bind(this));if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e,this._pulseQueue.bind(this));let i;this.options.idleTimeoutMillis&&this._isAboveMin()&&(i=setTimeout(()=>{this.log("remove idle client"),this._remove(e,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&i.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new PR(e,r,i)),this._pulseQueue()}query(e,r,n){if(typeof e=="function"){let i=cy(this.Promise,e);return setImmediate(function(){return i.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),i.result}typeof r=="function"&&(n=r,r=void 0);let s=cy(this.Promise,n);return n=s.callback,this.connect((i,o)=>{if(i)return n(i);let a=!1,c=u=>{a||(a=!0,o.release(u),n(u))};o.once("error",c),this.log("dispatching query");try{o.query(e,r,(u,l)=>{if(this.log("query dispatched"),o.removeListener("error",c),!a)return a=!0,o.release(u),u?n(u):n(void 0,l)})}catch(u){return o.release(u),n(u)}}),s.result}end(e){if(this.log("ending"),this.ending){let n=new Error("Called end on pool more than once");return e?e(n):this.Promise.reject(n)}this.ending=!0;let r=cy(this.Promise,e);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,r)=>e+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};M4.exports=IR});var U4=_((fqe,F4)=>{"use strict";var $4=require("events").EventEmitter,sve=require("util"),NR=sc(),dc=F4.exports=function(t,e,r){$4.call(this),t=NR.normalizeQueryConfig(t,e,r),this.text=t.text,this.values=t.values,this.name=t.name,this.queryMode=t.queryMode,this.callback=t.callback,this.state="new",this._arrayMode=t.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(n){n==="row"&&(this._emitRowEvents=!0)}.bind(this))};sve.inherits(dc,$4);var ive={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};dc.prototype.handleError=function(t){let e=this.native.pq.resultErrorFields();if(e)for(let r in e){let n=ive[r]||r;t[n]=e[r]}this.callback?this.callback(t):this.emit("error",t),this.state="error"};dc.prototype.then=function(t,e){return this._getPromise().then(t,e)};dc.prototype.catch=function(t){return this._getPromise().catch(t)};dc.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(t,e){this._once("end",t),this._once("error",e)}.bind(this)),this._promise)};dc.prototype.submit=function(t){this.state="running";let e=this;this.native=t.native,t.native.arrayMode=this._arrayMode;let r=function(n,s,i){if(t.native.arrayMode=!1,setImmediate(function(){e.emit("_done")}),n)return e.handleError(n);e._emitRowEvents&&(i.length>1?s.forEach((o,a)=>{o.forEach(c=>{e.emit("row",c,i[a])})}):s.forEach(function(o){e.emit("row",o,i)})),e.state="end",e.emit("end",i),e.callback&&e.callback(null,i)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let n=(this.values||[]).map(NR.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){let s=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(s)}return t.native.execute(this.name,n,r)}return t.native.prepare(this.name,this.text,n.length,function(s){return s?r(s):(t.namedQueries[e.name]=e.text,e.native.execute(e.name,n,r))})}else if(this.values){if(!Array.isArray(this.values)){let s=new Error("Query values must be an array");return r(s)}let n=this.values.map(NR.prepareValue);t.native.query(this.text,n,r)}else this.queryMode==="extended"?t.native.query(this.text,[],r):t.native.query(this.text,r)}});var W4=_((pqe,V4)=>{"use strict";var B4;try{B4=require("pg-native")}catch(t){throw t}var ove=Jg(),j4=require("events").EventEmitter,ave=require("util"),cve=Q0(),H4=U4(),lr=V4.exports=function(t){j4.call(this),t=t||{},this._Promise=t.Promise||global.Promise,this._types=new ove(t.types),this.native=new B4({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let e=this.connectionParameters=new cve(t);t.nativeConnectionString&&(e.nativeConnectionString=t.nativeConnectionString),this.user=e.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),this.database=e.database,this.host=e.host,this.port=e.port,this.namedQueries={}};lr.Query=H4;ave.inherits(lr,j4);lr.prototype._errorAllQueries=function(t){let e=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(t)})};this._hasActiveQuery()&&(e(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(e),this._queryQueue.length=0};lr.prototype._connect=function(t){let e=this;if(this._connecting){process.nextTick(()=>t(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,n){if(e.connectionParameters.nativeConnectionString&&(n=e.connectionParameters.nativeConnectionString),r)return t(r);e.native.connect(n,function(s){if(s)return e.native.end(),t(s);e._connected=!0,e.native.on("error",function(i){e._queryable=!1,e._errorAllQueries(i),e.emit("error",i)}),e.native.on("notification",function(i){e.emit("notification",{channel:i.relname,payload:i.extra})}),e.emit("connect"),e._pulseQueryQueue(!0),t()})})};lr.prototype.connect=function(t){if(t){this._connect(t);return}return new this._Promise((e,r)=>{this._connect(n=>{n?r(n):e()})})};lr.prototype.query=function(t,e,r){let n,s,i,o,a;if(t==null)throw new TypeError("Client was passed a null or undefined query");if(typeof t.submit=="function")i=t.query_timeout||this.connectionParameters.query_timeout,s=n=t,typeof e=="function"&&(t.callback=e);else if(i=t.query_timeout||this.connectionParameters.query_timeout,n=new H4(t,e,r),!n.callback){let c,u;s=new this._Promise((l,d)=>{c=l,u=d}).catch(l=>{throw Error.captureStackTrace(l),l}),n.callback=(l,d)=>l?u(l):c(d)}return i&&(a=n.callback,o=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{n.handleError(c,this.connection)}),a(c),n.callback=()=>{};let u=this._queryQueue.indexOf(n);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},i),n.callback=(c,u)=>{clearTimeout(o),a(c,u)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)};lr.prototype.end=function(t){let e=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,t));let r;return t||(r=new this._Promise(function(n,s){t=i=>i?s(i):n()})),this.native.end(function(){e._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{e.emit("end"),t&&t()})}),r};lr.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};lr.prototype._pulseQueryQueue=function(t){if(!this._connected||this._hasActiveQuery())return;let e=this._queryQueue.shift();if(!e){t||this.emit("drain");return}this._activeQuery=e,e.submit(this);let r=this;e.once("_done",function(){r._pulseQueryQueue()})};lr.prototype.cancel=function(t){this._activeQuery===t?this.native.cancel(function(){}):this._queryQueue.indexOf(t)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(t),1)};lr.prototype.ref=function(){};lr.prototype.unref=function(){};lr.prototype.setTypeParser=function(t,e,r){return this._types.setTypeParser(t,e,r)};lr.prototype.getTypeParser=function(t,e){return this._types.getTypeParser(t,e)}});var DR=_((hqe,z4)=>{"use strict";z4.exports=W4()});var OR=_((gqe,ed)=>{"use strict";var uve=D4(),lve=Yl(),dve=RR(),fve=J0(),pve=sc(),hve=q4(),mve=Jg(),{DatabaseError:gve}=vR(),{escapeIdentifier:yve,escapeLiteral:Eve}=sc(),_ve=t=>class extends hve{constructor(r){super(r,t)}},LR=function(t){this.defaults=lve,this.Client=t,this.Query=this.Client.Query,this.Pool=_ve(this.Client),this._pools=[],this.Connection=dve,this.types=Ql(),this.DatabaseError=gve,this.TypeOverrides=mve,this.escapeIdentifier=yve,this.escapeLiteral=Eve,this.Result=fve,this.utils=pve};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?ed.exports=new LR(DR()):(ed.exports=new LR(uve),Object.defineProperty(ed.exports,"native",{configurable:!0,enumerable:!1,get(){let t=null;try{t=new LR(DR())}catch(e){if(e.code!=="MODULE_NOT_FOUND")throw e}return Object.defineProperty(ed.exports,"native",{value:t}),t}}))});var Zwe={};Tt(Zwe,{handler:()=>$we});module.exports=le(Zwe);var sd=C(s$());var Gg=require("aws-sdk");var Qw={PRETTY:4,COMPACT:0};var Pe={TRACE:6,DEBUG:8,INFO:12,WARN:16,ERROR:20,CRITICAL:24,SILENT:28},i$=["level","message","sampling_rate","service","timestamp"],o$="Uncaught error detected, flushing log buffer before exit";var a$="POWERTOOLS_DEV",c$="POWERTOOLS_SERVICE_NAME",u$="_X_AMZN_TRACE_ID";var ut=({key:t,defaultValue:e,errorMessage:r})=>{let n=process.env[t];if(n===void 0){if(e!==void 0)return e;throw r?new Error(r):new Error(`Environment variable ${t} is required`)}return n.trim()},l$=({key:t,defaultValue:e,errorMessage:r})=>{let n=ut({key:t,defaultValue:String(e),errorMessage:r}),s=Number(n);if(Number.isNaN(s))throw new TypeError(`Environment variable ${t} must be a number`);return s},ule=new Set(["1","y","yes","t","true","on"]),lle=new Set(["0","n","no","f","false","off"]),Yw=({key:t,defaultValue:e,errorMessage:r,extendedParsing:n})=>{let i=ut({key:t,defaultValue:String(e),errorMessage:r}).toLowerCase();if(n){if(ule.has(i))return!0;if(lle.has(i))return!1}if(i!=="true"&&i!=="false")throw new Error(`Environment variable ${t} must be a boolean`);return i==="true"},sl=()=>{try{return Yw({key:a$,extendedParsing:!0})}catch{return!1}},d$=()=>ut({key:c$,defaultValue:""}),f$=()=>{let t=ut({key:u$,defaultValue:""});if(t==="")return;if(!t.includes("="))return{Root:t};let e={};for(let r of t.split(";")){let[n,s]=r.split("=");e[n]=s}return e},p$=()=>f$()?.Sampled==="1",es=()=>f$()?.Root;var $m,Fm,h$,il=class{constructor(){Le(this,Fm);Le(this,$m,e=>{let r="2-digit",n=Intl.supportedValuesOf("timeZone").includes(e)?e:"UTC";return new Intl.DateTimeFormat("en",{hourCycle:"h23",year:"numeric",month:r,day:r,hour:r,minute:r,second:r,timeZone:n})})}formatError(e){let{name:r,message:n,stack:s,cause:i,...o}=e,a={name:r,location:this.getCodeLocation(e.stack),message:n,stack:sl()&&typeof s=="string"?s?.split(`
`):s,cause:i instanceof Error?this.formatError(i):i};for(let c in e)typeof c=="string"&&!["name","message","stack","cause"].includes(c)&&(a[c]=o[c]);return a}formatTimestamp(e){let r="UTC",n=ut({key:"TZ",defaultValue:""});return n&&!n.includes(r)?je(this,Fm,h$).call(this,e,n):e.toISOString()}getCodeLocation(e){if(!e)return"";let r=e.split(`
`),n=/\(([^()]*?):(\d+?):(\d+?)\)\\?$/;for(let s of r){let i=n.exec(s);if(Array.isArray(i))return`${i[1]}:${Number(i[2])}`}return""}};$m=new WeakMap,Fm=new WeakSet,h$=function(e,r){let{year:n,month:s,day:i,hour:o,minute:a,second:c}=k(this,$m).call(this,r).formatToParts(e).reduce((x,T)=>(x[T.type]=T.value,x),{}),u=`${n}-${s}-${i}T${o}:${a}:${c}`,l=-e.getTimezoneOffset(),d=l>=0?"+":"-",m=Math.abs(Math.floor(l/60)).toString().padStart(2,"0"),g=Math.abs(l%60).toString().padStart(2,"0"),E=e.getMilliseconds().toString().padStart(3,"0"),w=`${d}${m}:${g}`;return`${u}.${E}${w}`};var H$=C(cb(),1);var Ba=class{constructor(e){f(this,"attributes",{});this.setAttributes(e.attributes)}addAttributes(e){return(0,H$.default)(this.attributes,e),this}getAttributes(){return this.attributes}prepareForPrint(){this.attributes=this.removeEmptyKeys(this.getAttributes())}removeEmptyKeys(e){let r={};for(let n in e)e[n]!==void 0&&e[n]!==""&&e[n]!==null&&(r[n]=e[n]);return r}setAttributes(e){this.attributes=e}};var J$=require("console"),Z$=require("crypto");var ei="2.28.1";var ub=process.env.AWS_EXECUTION_ENV||"NA",nfe={relation:"after",toMiddleware:"getUserAgentMiddleware",name:"addPowertoolsToUserAgent",tags:["POWERTOOLS","USER_AGENT"]},V$=t=>typeof t=="object"&&t!==null&&"send"in t&&typeof t.send=="function"&&"config"in t&&t.config!==void 0&&typeof t.config=="object"&&t.config!==null&&"middlewareStack"in t&&t.middlewareStack!==void 0&&typeof t.middlewareStack=="object"&&t.middlewareStack!==null&&"identify"in t.middlewareStack&&typeof t.middlewareStack.identify=="function"&&"addRelativeTo"in t.middlewareStack&&typeof t.middlewareStack.addRelativeTo=="function",sfe=t=>e=>async r=>{let n=r.request.headers["user-agent"]||"";if(n.includes("PT/NO-OP")){let s=n.replace("PT/NO-OP",`PT/${t}/${ei} PTEnv/${ub}`);return r.request.headers["user-agent"]=s,await e(r)}return n.includes("PT/")?await e(r):(r.request.headers["user-agent"]=n===""?`PT/${t}/${ei} PTEnv/${ub}`:`${n} PT/${t}/${ei} PTEnv/${ub}`,await e(r))},ife=t=>{let e=!1;for(let r of t)r.includes("addPowertoolsToUserAgent")&&(e=!0);return e},lb=(t,e)=>{try{if(V$(t)){if(ife(t.middlewareStack.identify()))return;t.middlewareStack.addRelativeTo(sfe(e),nfe)}else throw new Error("The client provided does not match the expected interface")}catch(r){console.warn("Failed to add user agent middleware",r)}};var Km="powertools-for-aws",W$=`${Km}.tracer`,z$=`${Km}.metrics`,G$=`${Km}.logger`,K$=`${Km}.idempotency`;var db=t=>typeof t=="string";var X$=t=>Object.is(t,null),fb=t=>X$(t)||Object.is(t,void 0);var ja,Xi=class{constructor(){Le(this,ja);f(this,"coldStart",!0);f(this,"defaultServiceName","service_undefined");pt(this,ja,this.getInitializationType()),k(this,ja)!=="on-demand"&&(this.coldStart=!1)}getInitializationType(){let e=process.env.AWS_LAMBDA_INITIALIZATION_TYPE?.trim();return e==="on-demand"?"on-demand":e==="provisioned-concurrency"?"provisioned-concurrency":"unknown"}getColdStart(){return k(this,ja)!=="on-demand"?!1:this.coldStart?(this.coldStart=!1,!0):!1}isValidServiceName(e){return typeof e=="string"&&e.trim().length>0}};ja=new WeakMap;var Q$=process.env.AWS_EXECUTION_ENV||"NA";process.env.AWS_SDK_UA_APP_ID?process.env.AWS_SDK_UA_APP_ID=`${process.env.AWS_SDK_UA_APP_ID}/PT/NO-OP/${ei}/PTEnv/${Q$}`:process.env.AWS_SDK_UA_APP_ID=`PT/NO-OP/${ei}/PTEnv/${Q$}`;var dl=C(cb(),1);var Ha,Xm=class extends il{constructor(r){super();Le(this,Ha);pt(this,Ha,r?.logRecordOrder)}formatAttributes(r,n){let s={level:r.logLevel,message:r.message,timestamp:this.formatTimestamp(r.timestamp),service:r.serviceName,cold_start:r.lambdaContext?.coldStart,function_arn:r.lambdaContext?.invokedFunctionArn,function_memory_size:r.lambdaContext?.memoryLimitInMB,function_name:r.lambdaContext?.functionName,function_request_id:r.lambdaContext?.awsRequestId,sampling_rate:r.sampleRateValue,xray_trace_id:r.xRayTraceId};if(k(this,Ha)===void 0)return new Ba({attributes:s}).addAttributes(n);let i={};for(let a of k(this,Ha))a in s&&!(a in i)?i[a]=s[a]:a in n&&!(a in i)&&(i[a]=n[a]);for(let a in s)a in i||(i[a]=s[a]);for(let a in n)a in i||(i[a]=n[a]);return new Ba({attributes:i})}};Ha=new WeakMap;var pb=class{constructor(e,r){f(this,"value");f(this,"logLevel");f(this,"byteSize");if(!db(e))throw new Error("Value should be a string");this.value=e,this.logLevel=r,this.byteSize=Buffer.byteLength(e)}},hb=class extends Set{constructor(){super(...arguments);f(this,"currentBytesSize",0);f(this,"hasEvictedLog",!1)}add(r){return this.currentBytesSize+=r.byteSize,super.add(r),this}delete(r){let n=super.delete(r);return n&&(this.currentBytesSize-=r.byteSize),n}clear(){super.clear(),this.currentBytesSize=0}shift(){let r=this.values().next().value;return r&&this.delete(r),r}},Qi,Va,Ym,Y$,Qm=class extends Map{constructor({maxBytesSize:r,onBufferOverflow:n}){super();Le(this,Ym);Le(this,Qi);Le(this,Va);pt(this,Qi,r),pt(this,Va,n)}setItem(r,n,s){let i=new pb(n,s);if(i.byteSize>k(this,Qi))throw new Error("Item too big");let o=this.get(r)||new hb;return o.currentBytesSize+i.byteSize>=k(this,Qi)&&(je(this,Ym,Y$).call(this,o,i),k(this,Va)&&k(this,Va).call(this)),o.add(i),super.set(r,o),this}};Qi=new WeakMap,Va=new WeakMap,Ym=new WeakSet,Y$=function(r,n){for(;r.currentBytesSize+n.byteSize>=k(this,Qi);)r.shift(),r.hasEvictedLog=!0};var tn,Wa,ml,rn,ti,Yi,ft,Rn,Ji,ns,gl,De,fl,mb,eF,tF,rF,nF,gb,pl,sF,yb=class yb extends Xi{constructor(r={}){super();Le(this,De);f(this,"console");f(this,"customConfigService");f(this,"logEvent",!1);f(this,"logFormatter");f(this,"logIndentation",Qw.COMPACT);f(this,"logLevel",Pe.INFO);Le(this,tn);f(this,"persistentLogAttributes",{});f(this,"powertoolsLogData",{sampleRateValue:0});f(this,"temporaryLogAttributes",{});Le(this,Wa,[]);Le(this,ml,!1);Le(this,rn,new Map);Le(this,ti,Pe.INFO);Le(this,Yi);Le(this,ft,{enabled:!1,flushOnErrorLog:!0,maxBytes:20480,bufferAtVerbosity:Pe.DEBUG});Le(this,Rn);Le(this,Ji);Le(this,ns,{sampleRateValue:0,refreshedTimes:0});Le(this,gl,new Map);let{customConfigService:n,...s}=r;this.customConfigService=n||void 0,this.setOptions(s),pt(this,ml,!0);for(let[i,o]of k(this,Wa))this.printLog(i,this.createAndPopulateLogItem(...o));pt(this,Wa,[])}get level(){return this.logLevel}addContext(r){this.addToPowertoolsLogData({lambdaContext:{invokedFunctionArn:r.invokedFunctionArn,coldStart:this.getColdStart(),awsRequestId:r.awsRequestId,memoryLimitInMB:r.memoryLimitInMB,functionName:r.functionName,functionVersion:r.functionVersion}})}addPersistentLogAttributes(r){this.appendPersistentKeys(r)}appendKeys(r){je(this,De,mb).call(this,r,"temp")}appendPersistentKeys(r){je(this,De,mb).call(this,r,"persistent")}createChild(r={}){let n=this.createLogger((0,dl.default)({},{logLevel:this.getLevelName(),serviceName:this.powertoolsLogData.serviceName,sampleRateValue:k(this,ns).sampleRateValue,logFormatter:this.getLogFormatter(),customConfigService:this.getCustomConfigService(),environment:this.powertoolsLogData.environment,persistentLogAttributes:this.persistentLogAttributes,jsonReplacerFn:k(this,Yi),correlationIdSearchFn:k(this,Ji),...k(this,ft).enabled&&{logBufferOptions:{maxBytes:k(this,ft).maxBytes,bufferAtVerbosity:this.getLogLevelNameFromNumber(k(this,ft).bufferAtVerbosity),flushOnErrorLog:k(this,ft).flushOnErrorLog}}},r));return this.powertoolsLogData.lambdaContext&&n.addContext(this.powertoolsLogData.lambdaContext),this.temporaryLogAttributes&&n.appendKeys(this.temporaryLogAttributes),n}critical(r,...n){this.processLogItem(Pe.CRITICAL,r,n)}debug(r,...n){this.processLogItem(Pe.DEBUG,r,n)}error(r,...n){k(this,ft).enabled&&k(this,ft).flushOnErrorLog&&this.flushBuffer(),this.processLogItem(Pe.ERROR,r,n)}getLevelName(){return this.getLogLevelNameFromNumber(this.logLevel)}getLogEvent(){return this.logEvent}getPersistentLogAttributes(){return this.persistentLogAttributes}info(r,...n){this.processLogItem(Pe.INFO,r,n)}injectLambdaContext(r){return(n,s,i)=>{let o=i.value,a=this;i.value=async function(...c){a.refreshSampleRateCalculation(),a.addContext(c[1]),a.logEventIfEnabled(c[0],r?.logEvent),r?.correlationIdPath&&a.setCorrelationId(c[0],r?.correlationIdPath);try{return await o.apply(this,c)}catch(u){throw r?.flushBufferOnUncaughtError&&(a.flushBuffer(),a.error({message:o$,error:u})),u}finally{(r?.clearState||r?.resetKeys)&&a.resetKeys(),a.clearBuffer()}}}}static injectLambdaContextAfterOrOnError(r,n,s){s&&(s.clearState||s?.resetKeys)&&r.resetKeys()}static injectLambdaContextBefore(r,n,s,i){r.addContext(s),r.logEventIfEnabled(n,i?.logEvent)}logEventIfEnabled(r,n){this.shouldLogEvent(n)&&this.info("Lambda invocation event",{event:r})}refreshSampleRateCalculation(){if(k(this,ns).refreshedTimes===0){k(this,ns).refreshedTimes++;return}je(this,De,gb).call(this)&&this.logLevel>Pe.TRACE?(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate")):this.setLogLevel(this.getLogLevelNameFromNumber(k(this,ti)))}removeKeys(r){for(let n of r)this.temporaryLogAttributes[n]=void 0,this.persistentLogAttributes[n]?k(this,rn).set(n,"persistent"):k(this,rn).delete(n)}removePersistentKeys(r){for(let n of r)this.persistentLogAttributes[n]=void 0,this.temporaryLogAttributes[n]?k(this,rn).set(n,"temp"):k(this,rn).delete(n)}removePersistentLogAttributes(r){this.removePersistentKeys(r)}resetKeys(){for(let r of Object.keys(this.temporaryLogAttributes))this.persistentLogAttributes[r]?k(this,rn).set(r,"persistent"):k(this,rn).delete(r);this.temporaryLogAttributes={}}setLogLevel(r){if(!this.awsLogLevelShortCircuit(r))if(this.isValidLogLevel(r))this.logLevel=Pe[r];else throw new Error(`Invalid log level: ${r}`)}setPersistentLogAttributes(r){this.persistentLogAttributes=r}shouldLogEvent(r){return typeof r=="boolean"?r:this.getLogEvent()}trace(r,...n){this.processLogItem(Pe.TRACE,r,n)}warn(r,...n){this.processLogItem(Pe.WARN,r,n)}createLogger(r){return new yb(r)}getJsonReplacer(){let r=new WeakSet;return(n,s)=>{var o;let i=s;if(k(this,Yi)&&(i=(o=k(this,Yi))==null?void 0:o.call(this,n,i)),i instanceof Error&&(i=this.getLogFormatter().formatError(i)),typeof i=="bigint")return i.toString();if(typeof i=="object"&&i!==null){if(r.has(i))return;r.add(i)}return i}}addToPowertoolsLogData(r){(0,dl.default)(this.powertoolsLogData,r)}awsLogLevelShortCircuit(r){return k(this,tn)!==void 0?(this.logLevel=Pe[k(this,tn)],this.isValidLogLevel(r)&&this.logLevel>Pe[r]&&je(this,De,fl).call(this,`Current log level (${r}) does not match AWS Lambda Advanced Logging Controls minimum log level (${k(this,tn)}). This can lead to data loss, consider adjusting them.`),!0):!1}createAndPopulateLogItem(r,n,s){let i={logLevel:this.getLogLevelNameFromNumber(r),timestamp:new Date,xRayTraceId:es(),...this.getPowertoolsLogData(),message:""},o=je(this,De,eF).call(this);return je(this,De,tF).call(this,n,i,o),je(this,De,rF).call(this,s,o),this.getLogFormatter().formatAttributes(i,o)}getCustomConfigService(){return this.customConfigService}getLogFormatter(){return this.logFormatter}getLogLevelNameFromNumber(r){let n;for(let[s,i]of Object.entries(Pe))if(i===r){n=s;break}return n}getPowertoolsLogData(){return this.powertoolsLogData}isValidLogLevel(r){return typeof r=="string"&&r in Pe}isValidSampleRate(r){return typeof r=="number"&&0<=r&&r<=1}printLog(r,n){n.prepareForPrint();let s=r===Pe.CRITICAL?"error":this.getLogLevelNameFromNumber(r).toLowerCase();this.console[s](JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation))}processLogItem(r,n,s){let i=es();if(i!==void 0&&this.shouldBufferLog(i,r)){try{this.bufferLogItem(i,this.createAndPopulateLogItem(r,n,s),r)}catch(o){this.printLog(Pe.WARN,this.createAndPopulateLogItem(Pe.WARN,`Unable to buffer log: ${o.message}`,[o])),this.printLog(r,this.createAndPopulateLogItem(r,n,s))}return}r>=this.logLevel&&(k(this,ml)?this.printLog(r,this.createAndPopulateLogItem(r,n,s)):k(this,Wa).push([r,[r,n,s]]))}setConsole(){sl()?this.console=console:this.console=new J$.Console({stdout:process.stdout,stderr:process.stderr}),this.console.trace=(r,...n)=>{this.console.log(r,...n)}}setInitialLogLevel(r){let n=r?.toUpperCase();if(this.awsLogLevelShortCircuit(n)){pt(this,ti,this.logLevel);return}if(this.isValidLogLevel(n)){this.logLevel=Pe[n],pt(this,ti,this.logLevel);return}let s=this.getCustomConfigService()?.getLogLevel()?.toUpperCase();if(this.isValidLogLevel(s)){this.logLevel=Pe[s],pt(this,ti,this.logLevel);return}let i=ut({key:"POWERTOOLS_LOG_LEVEL",defaultValue:""}),o=ut({key:"LOG_LEVEL",defaultValue:""}),a=i!==""?i:o;this.isValidLogLevel(a)&&(this.logLevel=Pe[a],pt(this,ti,this.logLevel))}setInitialSampleRate(r){let n=r,s=this.getCustomConfigService()?.getSampleRateValue(),i=l$({key:"POWERTOOLS_LOGGER_SAMPLE_RATE",defaultValue:0});for(let o of[n,s,i])if(this.isValidSampleRate(o)){k(this,ns).sampleRateValue=o,this.powertoolsLogData.sampleRateValue=o,je(this,De,gb).call(this)&&this.logLevel>Pe.TRACE&&(this.setLogLevel("DEBUG"),this.debug("Setting log level to DEBUG due to sampling rate"));break}}setLogEvent(){this.logEvent=Yw({key:"POWERTOOLS_LOGGER_LOG_EVENT",defaultValue:!1})}setLogFormatter(r,n){this.logFormatter=r??new Xm({logRecordOrder:n})}setLogIndentation(){sl()&&(this.logIndentation=Qw.PRETTY)}setOptions(r){let{logLevel:n,serviceName:s,sampleRateValue:i,logFormatter:o,persistentKeys:a,persistentLogAttributes:c,environment:u,jsonReplacerFn:l,logRecordOrder:d,logBufferOptions:m,correlationIdSearchFn:g}=r;c&&Object.keys(c).length>0&&a&&Object.keys(a).length>0&&this.warn("Both persistentLogAttributes and persistentKeys options were provided. Using persistentKeys as persistentLogAttributes is deprecated and will be removed in future releases"),this.setPowertoolsLogData(s,u,a||c);let E=ut({key:"AWS_LAMBDA_LOG_LEVEL",defaultValue:""}),w=E==="FATAL"?"CRITICAL":E;return this.isValidLogLevel(w)&&pt(this,tn,w),this.setLogEvent(),this.setInitialLogLevel(n),this.setInitialSampleRate(i),this.setLogFormatter(o,d),this.setConsole(),this.setLogIndentation(),pt(this,Yi,l),je(this,De,sF).call(this,m),pt(this,Ji,g),this}setPowertoolsLogData(r,n,s){this.addToPowertoolsLogData({awsRegion:ut({key:"AWS_REGION",defaultValue:""}),environment:n||this.getCustomConfigService()?.getCurrentEnvironment()||ut({key:"ENVIRONMENT",defaultValue:""}),serviceName:r||this.getCustomConfigService()?.getServiceName()||ut({key:"POWERTOOLS_SERVICE_NAME",defaultValue:""})||this.defaultServiceName}),s&&this.appendPersistentKeys(s)}bufferLogItem(r,n,s){n.prepareForPrint(),k(this,Rn)?.has(r)===!1&&k(this,Rn)?.clear(),k(this,Rn)?.setItem(r,JSON.stringify(n.getAttributes(),this.getJsonReplacer(),this.logIndentation),s)}flushBuffer(){let r=es();if(r===void 0)return;let n=k(this,Rn)?.get(r);if(n!==void 0){for(let s of n){let i=this.getLogLevelNameFromNumber(s.logLevel).toLowerCase();this.console[i](s.value)}n.hasEvictedLog&&this.printLog(Pe.WARN,this.createAndPopulateLogItem(Pe.WARN,"Some logs are not displayed because they were evicted from the buffer. Increase buffer size to store more logs in the buffer",[])),k(this,tn)!==void 0&&Pe[k(this,tn)]>k(this,ft).bufferAtVerbosity&&je(this,De,fl).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Some logs might be missing."),k(this,Rn)?.delete(r)}}clearBuffer(){let r=es();r!==void 0&&k(this,Rn)?.delete(r)}shouldBufferLog(r,n){return k(this,ft).enabled&&r!==void 0&&n<=k(this,ft).bufferAtVerbosity}setCorrelationId(r,n){if(typeof n=="string"){if(!k(this,Ji)){je(this,De,fl).call(this,"correlationIdPath is set but no search function was provided. The correlation ID will not be added to the log attributes.");return}let s=k(this,Ji).call(this,n,r);s&&this.appendKeys({correlation_id:s});return}this.appendKeys({correlation_id:r})}getCorrelationId(){return this.temporaryLogAttributes.correlation_id}};tn=new WeakMap,Wa=new WeakMap,ml=new WeakMap,rn=new WeakMap,ti=new WeakMap,Yi=new WeakMap,ft=new WeakMap,Rn=new WeakMap,Ji=new WeakMap,ns=new WeakMap,gl=new WeakMap,De=new WeakSet,fl=function(r){k(this,gl).has(r)||(k(this,gl).set(r,!0),this.warn(r))},mb=function(r,n){for(let s of Object.keys(r))je(this,De,pl).call(this,s)===!1&&k(this,rn).set(s,n);n==="temp"?(0,dl.default)(this.temporaryLogAttributes,r):(0,dl.default)(this.persistentLogAttributes,r)},eF=function(){let r={};for(let[n,s]of k(this,rn))je(this,De,pl).call(this,n)||(r[n]=s==="persistent"?this.persistentLogAttributes[n]:this.temporaryLogAttributes[n]);return r},tF=function(r,n,s){if(typeof r=="string"){n.message=r;return}let{message:i,...o}=r;n.message=i;for(let[a,c]of Object.entries(o))je(this,De,pl).call(this,a)||(s[a]=c)},rF=function(r,n){for(let s of r)fb(s)||(s instanceof Error?n.error=s:typeof s=="string"?n.extra=s:je(this,De,nF).call(this,s,n))},nF=function(r,n){for(let[s,i]of Object.entries(r))je(this,De,pl).call(this,s)||(n[s]=i)},gb=function(){return k(this,ns).sampleRateValue&&(0,Z$.randomInt)(0,100)/100<=k(this,ns).sampleRateValue},pl=function(r){return i$.includes(r)?(this.warn(`The key "${r}" is a reserved key and will be dropped.`),!0):!1},sF=function(r){if(r===void 0||(k(this,ft).enabled=r?.enabled!==!1,k(this,ft).enabled===!1))return;r?.maxBytes!==void 0&&(k(this,ft).maxBytes=r.maxBytes),pt(this,Rn,new Qm({maxBytesSize:k(this,ft).maxBytes})),r?.flushOnErrorLog===!1&&(k(this,ft).flushOnErrorLog=!1);let n=r?.bufferAtVerbosity?.toUpperCase();this.isValidLogLevel(n)&&(k(this,ft).bufferAtVerbosity=Pe[n]),k(this,tn)!==void 0&&Pe[k(this,tn)]>k(this,ft).bufferAtVerbosity&&je(this,De,fl).call(this,"Advanced Loggging Controls (ALC) Log Level is less verbose than Log Buffering Log Level. Buffered logs will be filtered by ALC")};var hl=yb;eo();var za=class t{constructor(e,r){this.logger=new hl({serviceName:e||process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",logLevel:process.env.LOG_LEVEL||"INFO",sampleRateValue:.1}),this.context={traceId:r?.traceId||Or(),...r},this.context.agent&&this.logger.appendKeys({agent:this.context.agent}),this.context.leadId&&this.logger.appendKeys({leadId:this.context.leadId}),this.context.tenantId&&this.logger.appendKeys({tenantId:this.context.tenantId})}getTraceId(){return this.context.traceId||""}setTraceId(e){this.context.traceId=e}getContext(){return{...this.context}}updateContext(e){this.context={...this.context,...e};let r={};e.agent&&(r.agent=e.agent),e.leadId&&(r.leadId=e.leadId),e.tenantId&&(r.tenantId=e.tenantId),e.campaignId&&(r.campaignId=e.campaignId),Object.keys(r).length>0&&this.logger.appendKeys(r)}info(e,r){this.logger.info(e,{trace_id:this.context.traceId,...r})}warn(e,r){this.logger.warn(e,{trace_id:this.context.traceId,...r})}error(e,r,n){let s=r?{error:{name:r.name,message:r.message,stack:r.stack}}:{};this.logger.error(e,{trace_id:this.context.traceId,...s,...n})}debug(e,r){this.logger.debug(e,{trace_id:this.context.traceId,...r})}appendKeys(e){this.logger.appendKeys(e)}removeKeys(e){this.logger.removeKeys(e)}createChild(e){return new t(process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service",{...this.context,...e})}logCustomMetric(e,r,n){this.info(`Custom metric: ${e}`,{metric:e,value:r,...n})}logApiRequest(e,r,n){this.info(`API Request: ${e} ${r}`,{method:e,path:r,...n})}finishOperation(e,r){e?this.info("Operation completed successfully",r):this.error("Operation failed",void 0,r)}};function LF(t,e){return new za(t,e)}var is=new za;eo();var tH=C(P0(),1);var Jj=C(P0(),1),Hg=require("diagnostics_channel"),Zj=C(require("http"),1),eH=C(require("https"),1);var I0=require("url"),Gj=new TextDecoder,Kj=(t,e)=>{let r=-1;for(let n=0;n<t.length;n+=2)if(Gj.decode(t[n]).toLowerCase()===e){r=n;break}return r===-1?null:Gj.decode(t[r+1])},O0=t=>t!==void 0&&"http"in t&&"parent"in t&&"namespace"in t&&t.namespace==="remote",Xj=t=>{if(typeof t.origin=="string")return new I0.URL(`${t.origin}${t.path||""}`);if(t.origin instanceof I0.URL)return t.origin.pathname=t.path||"",t.origin};var{captureAWS:zye,captureAWSClient:Gye,captureAWSv3Client:Kye,captureAsyncFunc:Xye,captureFunc:Qye,captureHTTPsGlobal:Qj,getNamespace:Yye,getSegment:Jye,setSegment:Zye,Segment:Yj,setContextMissingStrategy:eEe,setDaemonAddress:tEe,setLogger:rEe}=Jj.default,Vg=class{captureAWS(e){return zye(e)}captureAWSClient(e){return Gye(e)}captureAWSv3Client(e){return lb(e,"tracer"),Kye(e)}captureAsyncFunc(e,r,n){return Xye(e,r)}captureFunc(e,r,n){return Qye(e,r)}captureHTTPsGlobal(){Qj(Zj.default),Qj(eH.default)}getNamespace(){return Yye()}getSegment(){return Jye()}instrumentFetch(){let e=s=>{let{request:i}=s,o=i.method;if(o==="CONNECT")return;let a=this.getSegment(),c=Xj(i);if(a&&c){let u=a.addNewSubsegment(c.hostname);u.addAttribute("namespace","remote"),i.addHeader("X-Amzn-Trace-Id",`Root=${es()};Parent=${u.id};Sampled=${u.notTraced?"0":"1"}`),u.http={request:{url:`${c.protocol}//${c.hostname}${c.pathname}`,method:o}},this.setSegment(u)}},r=s=>{let{response:i}=s,o=this.getSegment();if(O0(o)){let a=i.statusCode,c=Kj(i.headers,"content-length");o.http={...o.http,response:{status:a,...c&&{content_length:Number.parseInt(c,10)}}},a===429&&o.addThrottleFlag(),a>=400&&a<500?o.addErrorFlag():a>=500&&a<600&&o.addFaultFlag(),o.close(),this.setSegment(o.parent)}},n=s=>{let{error:i}=s,o=this.getSegment();O0(o)&&(o.addErrorFlag(),i instanceof Error&&o.addError(i,!0),o.close(),this.setSegment(o.parent))};(0,Hg.subscribe)("undici:request:create",e),(0,Hg.subscribe)("undici:request:headers",r),(0,Hg.subscribe)("undici:request:error",n)}putAnnotation(e,r){let n=this.getSegment();if(n===void 0){console.warn("No active segment or subsegment found, skipping annotation");return}if(n instanceof Yj){console.warn("You cannot annotate the main segment in a Lambda execution environment");return}n.addAnnotation(e,r)}putMetadata(e,r,n){let s=this.getSegment();if(s===void 0){console.warn("No active segment or subsegment found, skipping metadata addition");return}if(s instanceof Yj){console.warn("You cannot add metadata to the main segment in a Lambda execution environment");return}s.addMetadata(e,r,n)}setContextMissingStrategy(e){eEe(e)}setDaemonAddress(e){tEe(e)}setLogger(e){rEe(e)}setSegment(e){Zye(e)}};(process.env.AWS_XRAY_CONTEXT_MISSING===""||process.env.AWS_XRAY_CONTEXT_MISSING===void 0)&&(process.env.AWS_XRAY_CONTEXT_MISSING="IGNORE_ERROR");var{Subsegment:nEe}=tH.default,lt,Wg,rH,Hl=class extends Xi{constructor(r={}){super();Le(this,Wg);f(this,"provider");f(this,"captureError",!0);f(this,"captureHTTPsRequests",!0);f(this,"captureResponse",!0);f(this,"customConfigService");Le(this,lt,{awsExecutionEnv:"",samLocal:"",captureError:"",captureHTTPsRequests:"",captureResponse:"",tracingEnabled:"",serviceName:""});f(this,"serviceName");f(this,"tracingEnabled",!0);je(this,Wg,rH).call(this),this.setOptions(r),this.provider=new Vg,this.isTracingEnabled()&&this.captureHTTPsRequests&&(this.provider.captureHTTPsGlobal(),this.provider.instrumentFetch()),this.isTracingEnabled()||this.provider.setContextMissingStrategy(()=>({}))}addErrorAsMetadata(r,n){if(!this.isTracingEnabled())return;let s=this.getSegment();if(s!==void 0){if(!this.captureError){s.addErrorFlag();return}s.addError(r,n||!1)}}addResponseAsMetadata(r,n){r===void 0||!this.captureResponse||!this.isTracingEnabled()||this.putMetadata(`${n} response`,r)}addServiceNameAnnotation(){this.isTracingEnabled()&&this.putAnnotation("Service",this.serviceName)}annotateColdStart(){this.isTracingEnabled()&&this.putAnnotation("ColdStart",this.getColdStart())}captureAWS(r){return this.isTracingEnabled()?this.provider.captureAWS(r):r}captureAWSClient(r){if(!this.isTracingEnabled())return r;try{return this.provider.captureAWSClient(r)}catch(n){try{return this.provider.captureAWSClient(r.service),r}catch{throw n}}}captureAWSv3Client(r){return this.isTracingEnabled()?this.provider.captureAWSv3Client(r):r}captureLambdaHandler(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){return a.isTracingEnabled()?a.provider.captureAsyncFunc(`## ${process.env._HANDLER}`,async u=>{a.annotateColdStart(),a.addServiceNameAnnotation();let l;try{l=await o.apply(this,c),(r?.captureResponse??!0)&&a.addResponseAsMetadata(l,process.env._HANDLER)}catch(d){throw a.addErrorAsMetadata(d),d}finally{try{u?.close()}catch(d){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",u?.name,d)}}return l}):o.apply(this,c)},i}}captureMethod(r){return(n,s,i)=>{let o=i.value,a=this;return i.value=function(...c){if(!a.isTracingEnabled())return o.apply(this,[...c]);let u=String(s),l=r?.subSegmentName?r.subSegmentName:`### ${u}`;return a.provider.captureAsyncFunc(l,async d=>{let m;try{m=await o.apply(this,[...c]),(r?.captureResponse??!0)&&a.addResponseAsMetadata(m,u)}catch(g){throw a.addErrorAsMetadata(g),g}finally{try{d?.close()}catch(g){console.warn("Failed to close or serialize segment %s. We are catching the error but data might be lost.",d?.name,g)}}return m})},i}}getRootXrayTraceId(){return es()}getSegment(){if(!this.isTracingEnabled())return new nEe("## Dummy segment");let r=this.provider.getSegment();return r===void 0&&console.warn("Failed to get the current sub/segment from the context, this is likely because you are not using the Tracer in a Lambda function."),r}isTraceSampled(){return this.isTracingEnabled()?p$():!1}isTracingEnabled(){return this.tracingEnabled}putAnnotation(r,n){this.isTracingEnabled()&&this.provider.putAnnotation(r,n)}putMetadata(r,n,s){this.isTracingEnabled()&&this.provider.putMetadata(r,n,s||this.serviceName)}setSegment(r){this.isTracingEnabled()&&this.provider.setSegment(r)}getCustomConfigService(){return this.customConfigService}isAmplifyCli(){return k(this,lt).awsExecutionEnv==="AWS_Lambda_amplify-mock"}isLambdaExecutionEnv(){return k(this,lt).awsExecutionEnv!==""}isLambdaSamCli(){return k(this,lt).samLocal!==""}setCaptureError(){let r=this.getCustomConfigService()?.getTracingCaptureError();if(r!==void 0&&r.toLowerCase()==="false"){this.captureError=!1;return}if(k(this,lt).captureError.toLowerCase()==="false"){this.captureError=!1;return}}setCaptureHTTPsRequests(r){if(r!==void 0&&!r){this.captureHTTPsRequests=!1;return}let n=this.getCustomConfigService()?.getCaptureHTTPsRequests();if(n!==void 0&&n.toLowerCase()==="false"){this.captureHTTPsRequests=!1;return}k(this,lt).captureHTTPsRequests.toLowerCase()==="false"&&(this.captureHTTPsRequests=!1)}setCaptureResponse(){let r=this.getCustomConfigService()?.getTracingCaptureResponse();if(r!==void 0&&r.toLowerCase()==="false"){this.captureResponse=!1;return}if(k(this,lt).captureResponse.toLowerCase()==="false"){this.captureResponse=!1;return}}setCustomConfigService(r){this.customConfigService=r||void 0}setOptions(r){let{enabled:n,serviceName:s,captureHTTPsRequests:i,customConfigService:o}=r;return this.setCustomConfigService(o),this.setTracingEnabled(n),this.setCaptureResponse(),this.setCaptureError(),this.setServiceName(s),this.setCaptureHTTPsRequests(i),this}setServiceName(r){if(r!==void 0&&this.isValidServiceName(r)){this.serviceName=r;return}let n=this.getCustomConfigService()?.getServiceName();if(n!==void 0&&this.isValidServiceName(n)){this.serviceName=n;return}if(k(this,lt).serviceName!==void 0&&this.isValidServiceName(k(this,lt).serviceName)){this.serviceName=k(this,lt).serviceName;return}this.serviceName=this.defaultServiceName}setTracingEnabled(r){if(r!==void 0&&!r){this.tracingEnabled=r;return}let n=this.getCustomConfigService()?.getTracingEnabled();if(n!==void 0&&n.toLowerCase()==="false"){this.tracingEnabled=!1;return}if(k(this,lt).tracingEnabled.toLowerCase()==="false"){this.tracingEnabled=!1;return}(this.isAmplifyCli()||this.isLambdaSamCli()||!this.isLambdaExecutionEnv())&&(this.tracingEnabled=!1)}};lt=new WeakMap,Wg=new WeakSet,rH=function(){k(this,lt).awsExecutionEnv=ut({key:"AWS_EXECUTION_ENV",defaultValue:""}),k(this,lt).samLocal=ut({key:"AWS_SAM_LOCAL",defaultValue:""}),k(this,lt).captureError=ut({key:"POWERTOOLS_TRACER_CAPTURE_ERROR",defaultValue:""}),k(this,lt).captureHTTPsRequests=ut({key:"POWERTOOLS_TRACER_CAPTURE_HTTPS_REQUESTS",defaultValue:""}),k(this,lt).captureResponse=ut({key:"POWERTOOLS_TRACER_CAPTURE_RESPONSE",defaultValue:""}),k(this,lt).tracingEnabled=ut({key:"POWERTOOLS_TRACE_ENABLED",defaultValue:""}),k(this,lt).serviceName=d$()};var sEe=new Hl({serviceName:process.env.POWERTOOLS_SERVICE_NAME||"fibonacci-service"});function Vl(){try{return sEe.getSegment()}catch(t){console.warn("Failed to get X-Ray segment:",t);return}}function iEe(t,e,r){try{let n=Vl();if(!n)return;let s=n.addNewSubsegment(t);if(e)for(let[i,o]of Object.entries(e))o!==void 0&&s.addAnnotation(i,o);if(r)for(let[i,o]of Object.entries(r))s.addMetadata(i,o);return s}catch(n){console.warn("Failed to create X-Ray subsegment:",n);return}}function nH(t,e="success",r){if(t)try{t.addAnnotation("status",e),r&&(t.addError(r),t.addMetadata("error",{name:r.name,message:r.message,stack:r.stack})),t.close()}catch(n){console.warn("Failed to close X-Ray subsegment:",n)}}async function oEe(t,e,r,n){let s=iEe(t,r,n);try{let i=await e();return nH(s,"success"),i}catch(i){throw nH(s,"error",i),i}}function no(t){try{let e=Vl();if(!e)return;for(let[r,n]of Object.entries(t))n!==void 0&&e.addAnnotation(r,n)}catch(e){console.warn("Failed to add X-Ray annotations:",e)}}function zg(t,e){try{let r=Vl();if(!r)return;if(e)r.addMetadata(e,t);else for(let[n,s]of Object.entries(t))r.addMetadata(n,s)}catch(r){console.warn("Failed to add X-Ray metadata:",r)}}async function sH(t,e,r){return oEe(`DB:${t}`,e,{operation:"database"},{queryParams:r})}var aEe=new Gg.SQS,cEe=new Gg.SNS;function uEe(t){let e=t.message.toLowerCase(),r=t.name.toLowerCase(),n=t.code,s=["timeout","econnrefused","econnreset","etimedout","enotfound","network","connection","throttl","rate limit","429","503","504","too many requests","service unavailable","gateway timeout"];for(let a of s)if(e.includes(a)||r.includes(a)||n===a)return{type:"transient",shouldRetry:!0,shouldAlert:!1};let i=["unauthorized","forbidden","access denied","authentication","security","corruption","integrity","out of memory","disk full","database corruption"];for(let a of i)if(e.includes(a)||r.includes(a))return{type:"critical",shouldRetry:!1,shouldAlert:!0};let o=["validation","invalid","not found","404","400","bad request","malformed","schema","parse error"];for(let a of o)if(e.includes(a)||r.includes(a)||n===a)return{type:"permanent",shouldRetry:!1,shouldAlert:!1};return{type:"permanent",shouldRetry:!1,shouldAlert:!1}}async function lEe(t,e,r,n){let s=process.env.DLQ_URL;if(!s){console.warn("DLQ_URL not configured, skipping DLQ send");return}try{let i={originalEvent:t,error:{name:e.name,message:e.message,stack:e.stack},traceId:r,context:{functionName:n.functionName,functionVersion:n.functionVersion,requestId:n.awsRequestId,timestamp:new Date().toISOString()}};await aEe.sendMessage({QueueUrl:s,MessageBody:JSON.stringify(i),MessageAttributes:{traceId:{DataType:"String",StringValue:r},errorType:{DataType:"String",StringValue:e.name}}}).promise(),console.log("Message sent to DLQ",{traceId:r,dlqUrl:s})}catch(i){console.error("Failed to send message to DLQ",i)}}async function dEe(t,e,r,n){let s=process.env.ALERT_TOPIC_ARN;if(!s){console.warn("ALERT_TOPIC_ARN not configured, skipping alert");return}try{let i={severity:"CRITICAL",service:r.functionName,error:{name:t.name,message:t.message,stack:t.stack},traceId:e,timestamp:new Date().toISOString(),requestId:r.awsRequestId,event:JSON.stringify(n).substring(0,500)};await cEe.publish({TopicArn:s,Subject:`\u{1F6A8} CRITICAL ERROR: ${r.functionName}`,Message:JSON.stringify(i,null,2),MessageAttributes:{severity:{DataType:"String",StringValue:"CRITICAL"},service:{DataType:"String",StringValue:r.functionName}}}).promise(),console.log("Critical alert sent",{traceId:e,alertTopicArn:s})}catch(i){console.error("Failed to send alert",i)}}function iH(t){return async(e,r)=>{let n=Or(),s=LF(r.functionName,{traceId:n}),i=Vl();no({traceId:n,functionName:r.functionName,requestId:r.awsRequestId});try{s.info("Processing event",{functionName:r.functionName});let o=await t(e,r,s);return no({status:"success"}),s.info("Event processed successfully"),o}catch(o){let a=o,c=uEe(a);throw no({status:"error",errorType:c.type,errorName:a.name}),zg({error:{name:a.name,message:a.message,stack:a.stack,classification:c.type}},"error"),i&&i.addError(a),s.error("Event processing failed",a,{errorType:c.type}),c.shouldRetry||await lEe(e,a,n,r),c.shouldAlert&&await dEe(a,n,r,e),a}}}var $r=C(OR(),1),yqe=$r.default.Client,G4=$r.default.Pool,Eqe=$r.default.Connection,_qe=$r.default.types,Sqe=$r.default.Query,vqe=$r.default.DatabaseError,wqe=$r.default.escapeIdentifier,bqe=$r.default.escapeLiteral,Rqe=$r.default.Result,Aqe=$r.default.TypeOverrides,Cqe=$r.default.defaults;var K4=require("aws-sdk");var Fr=new za("database"),Sve=new K4.SecretsManager,kR=class{constructor(e){this.pool=null;this.credentials=null;this.secretArn=e||process.env.DB_SECRET_ARN||""}async getCredentials(){if(this.credentials)return this.credentials;try{Fr.info("Fetching database credentials from Secrets Manager",{secretArn:this.secretArn});let e=await Sve.getSecretValue({SecretId:this.secretArn}).promise();if(!e.SecretString)throw new Error("Secret string is empty");let r=JSON.parse(e.SecretString);return this.credentials={username:r.username,password:r.password,host:r.host,port:r.port||5432,dbname:r.dbname||"fibonacci"},Fr.info("Database credentials fetched successfully"),this.credentials}catch(e){throw Fr.error("Failed to fetch database credentials",e),e}}async initializePool(){if(this.pool)return this.pool;let e=await this.getCredentials();return Fr.info("Initializing database connection pool",{host:e.host,port:e.port,database:e.dbname}),this.pool=new G4({user:e.username,password:e.password,host:e.host,port:e.port,database:e.dbname,max:10,idleTimeoutMillis:3e4,connectionTimeoutMillis:1e4,ssl:{rejectUnauthorized:!1}}),this.pool.on("error",r=>{Fr.error("Unexpected error on idle database client",r)}),Fr.info("Database connection pool initialized"),this.pool}async getPool(){return await this.initializePool()}async close(){this.pool&&(Fr.info("Closing database connection pool"),await this.pool.end(),this.pool=null,this.credentials=null)}},X4=new kR;async function fc(t,e,r=3){let n=t.trim().split(" ")[0].toUpperCase();return sH(n,async()=>{let s=await X4.getPool(),i=null;for(let o=1;o<=r;o++)try{Fr.debug("Executing database query",{attempt:o,query:t.substring(0,100),paramCount:e?.length||0}),zg({query:t.substring(0,200),paramCount:e?.length||0,attempt:o},"database");let a=Date.now(),c=await s.query(t,e),u=Date.now()-a;return no({dbOperation:n,dbRowCount:c.rowCount||0,dbDuration:u}),Fr.debug("Query executed successfully",{rowCount:c.rowCount,duration:u}),c}catch(a){if(i=a,Fr.warn(`Query failed on attempt ${o}`,{attempt:o,maxRetries:r,error:i.message}),!vve(i)||o===r)throw no({dbOperation:n,dbError:i.name}),Fr.error("Query failed permanently",i,{query:t.substring(0,100),attempts:o}),i;let u=Math.pow(2,o)*100;Fr.debug(`Retrying query after ${u}ms`),await wve(u)}throw i||new Error("Query failed after retries")},{operation:n,paramCount:e?.length||0})}async function MR(){return await X4.getPool()}function vve(t){let e=["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","57P03","53300","08006","08003"],r=t.message.toLowerCase(),n=t.code;return e.includes(n)||r.includes("connection")||r.includes("timeout")||r.includes("econnrefused")}function wve(t){return new Promise(e=>setTimeout(e,t))}eo();var cn={};Tt(cn,{BRAND:()=>Kve,DIRTY:()=>oo,EMPTY_PATH:()=>Cve,INVALID:()=>Y,NEVER:()=>Nwe,OK:()=>Ut,ParseStatus:()=>Ct,Schema:()=>ce,ZodAny:()=>pi,ZodArray:()=>ms,ZodBigInt:()=>co,ZodBoolean:()=>uo,ZodBranded:()=>rd,ZodCatch:()=>vo,ZodDate:()=>lo,ZodDefault:()=>So,ZodDiscriminatedUnion:()=>dy,ZodEffects:()=>jr,ZodEnum:()=>Eo,ZodError:()=>dr,ZodFirstPartyTypeKind:()=>J,ZodFunction:()=>py,ZodIntersection:()=>mo,ZodIssueCode:()=>D,ZodLazy:()=>go,ZodLiteral:()=>yo,ZodMap:()=>Ec,ZodNaN:()=>Sc,ZodNativeEnum:()=>_o,ZodNever:()=>an,ZodNull:()=>po,ZodNullable:()=>xn,ZodNumber:()=>ao,ZodObject:()=>fr,ZodOptional:()=>Ur,ZodParsedType:()=>F,ZodPipeline:()=>nd,ZodPromise:()=>hi,ZodReadonly:()=>wo,ZodRecord:()=>fy,ZodSchema:()=>ce,ZodSet:()=>_c,ZodString:()=>fi,ZodSymbol:()=>gc,ZodTransformer:()=>jr,ZodTuple:()=>Tn,ZodType:()=>ce,ZodUndefined:()=>fo,ZodUnion:()=>ho,ZodUnknown:()=>hs,ZodVoid:()=>yc,addIssueToContext:()=>q,any:()=>nwe,array:()=>awe,bigint:()=>Jve,boolean:()=>o3,coerce:()=>Owe,custom:()=>n3,date:()=>Zve,datetimeRegex:()=>t3,defaultErrorMap:()=>fs,discriminatedUnion:()=>dwe,effect:()=>bwe,enum:()=>Swe,function:()=>ywe,getErrorMap:()=>pc,getParsedType:()=>Cn,instanceof:()=>Qve,intersection:()=>fwe,isAborted:()=>uy,isAsync:()=>hc,isDirty:()=>ly,isValid:()=>di,late:()=>Xve,lazy:()=>Ewe,literal:()=>_we,makeIssue:()=>td,map:()=>mwe,nan:()=>Yve,nativeEnum:()=>vwe,never:()=>iwe,null:()=>rwe,nullable:()=>Awe,number:()=>i3,object:()=>cwe,objectUtil:()=>qR,oboolean:()=>Iwe,onumber:()=>Pwe,optional:()=>Rwe,ostring:()=>xwe,pipeline:()=>Twe,preprocess:()=>Cwe,promise:()=>wwe,quotelessJson:()=>bve,record:()=>hwe,set:()=>gwe,setErrorMap:()=>Ave,strictObject:()=>uwe,string:()=>s3,symbol:()=>ewe,transformer:()=>bwe,tuple:()=>pwe,undefined:()=>twe,union:()=>lwe,unknown:()=>swe,util:()=>pe,void:()=>owe});var pe;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{let i={};for(let o of s)i[o]=o;return i},t.getValidEnumValues=s=>{let i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(let a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{let i=[];for(let o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(let o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(pe||(pe={}));var qR;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(qR||(qR={}));var F=pe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Cn=t=>{switch(typeof t){case"undefined":return F.undefined;case"string":return F.string;case"number":return Number.isNaN(t)?F.nan:F.number;case"boolean":return F.boolean;case"function":return F.function;case"bigint":return F.bigint;case"symbol":return F.symbol;case"object":return Array.isArray(t)?F.array:t===null?F.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?F.promise:typeof Map<"u"&&t instanceof Map?F.map:typeof Set<"u"&&t instanceof Set?F.set:typeof Date<"u"&&t instanceof Date?F.date:F.object;default:return F.unknown}};var D=pe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bve=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(let o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let a=n,c=0;for(;c<o.path.length;){let u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(r(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let s of this.issues)if(s.path.length>0){let i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};dr.create=t=>new dr(t);var Rve=(t,e)=>{let r;switch(t.code){case D.invalid_type:t.received===F.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case D.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,pe.jsonStringifyReplacer)}`;break;case D.unrecognized_keys:r=`Unrecognized key(s) in object: ${pe.joinValues(t.keys,", ")}`;break;case D.invalid_union:r="Invalid input";break;case D.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${pe.joinValues(t.options)}`;break;case D.invalid_enum_value:r=`Invalid enum value. Expected ${pe.joinValues(t.options)}, received '${t.received}'`;break;case D.invalid_arguments:r="Invalid function arguments";break;case D.invalid_return_type:r="Invalid function return type";break;case D.invalid_date:r="Invalid date";break;case D.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:pe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case D.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case D.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case D.custom:r="Invalid input";break;case D.invalid_intersection_types:r="Intersection results could not be merged";break;case D.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case D.not_finite:r="Number must be finite";break;default:r=e.defaultError,pe.assertNever(t)}return{message:r}},fs=Rve;var Q4=fs;function Ave(t){Q4=t}function pc(){return Q4}var td=t=>{let{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="",c=n.filter(u=>!!u).slice().reverse();for(let u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}},Cve=[];function q(t,e){let r=pc(),n=td({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===fs?void 0:fs].filter(s=>!!s)});t.common.issues.push(n)}var Ct=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let s of r){if(s.status==="aborted")return Y;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let s of r){let i=await s.key,o=await s.value;n.push({key:i,value:o})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let s of r){let{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Y;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}},Y=Object.freeze({status:"aborted"}),oo=t=>({status:"dirty",value:t}),Ut=t=>({status:"valid",value:t}),uy=t=>t.status==="aborted",ly=t=>t.status==="dirty",di=t=>t.status==="valid",hc=t=>typeof Promise<"u"&&t instanceof Promise;var V;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(V||(V={}));var Br=class{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Y4=(t,e)=>{if(di(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new dr(t.common.issues);return this._error=r,this._error}}};function se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{let{message:c}=t;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??r??a.defaultError}},description:s}}var ce=class{get description(){return this._def.description}_getType(e){return Cn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Cn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ct,ctx:{common:e.parent.common,data:e.data,parsedType:Cn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(hc(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cn(e)},s=this._parseSync({data:e,path:n.path,parent:n});return Y4(n,s)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cn(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return di(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>di(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Cn(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(hc(s)?s:Promise.resolve(s));return Y4(n,i)}refine(e,r){let n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{let o=e(s),a=()=>i.addIssue({code:D.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new jr({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ur.create(this,this._def)}nullable(){return xn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ms.create(this)}promise(){return hi.create(this,this._def)}or(e){return ho.create([this,e],this._def)}and(e){return mo.create(this,e,this._def)}transform(e){return new jr({...se(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new So({...se(this._def),innerType:this,defaultValue:r,typeName:J.ZodDefault})}brand(){return new rd({typeName:J.ZodBranded,type:this,...se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new vo({...se(this._def),innerType:this,catchValue:r,typeName:J.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return nd.create(this,e)}readonly(){return wo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Tve=/^c[^\s-]{8,}$/i,xve=/^[0-9a-z]+$/,Pve=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Ive=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Ove=/^[a-z0-9_-]{21}$/i,Nve=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Dve=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Lve=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,kve="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",$R,Mve=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qve=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,$ve=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Fve=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Uve=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Bve=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Z4="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jve=new RegExp(`^${Z4}$`);function e3(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Hve(t){return new RegExp(`^${e3(t)}$`)}function t3(t){let e=`${Z4}T${e3(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Vve(t,e){return!!((e==="v4"||!e)&&Mve.test(t)||(e==="v6"||!e)&&$ve.test(t))}function Wve(t,e){if(!Nve.test(t))return!1;try{let[r]=t.split(".");if(!r)return!1;let n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function zve(t,e){return!!((e==="v4"||!e)&&qve.test(t)||(e==="v6"||!e)&&Fve.test(t))}var fi=class t extends ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==F.string){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.string,received:i.parsedType}),Y}let n=new Ct,s;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){let o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?q(s,{code:D.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&q(s,{code:D.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Lve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"email",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")$R||($R=new RegExp(kve,"u")),$R.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"emoji",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Ive.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"uuid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Ove.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"nanoid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Tve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")xve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cuid2",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")Pve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ulid",code:D.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),q(s,{validation:"url",code:D.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"regex",code:D.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?t3(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?jve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Hve(i).test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{code:D.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Dve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"duration",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Vve(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"ip",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?Wve(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"jwt",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?zve(e.data,i.version)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"cidr",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Uve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"base64",code:D.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Bve.test(e.data)||(s=this._getOrReturnCtx(e,s),q(s,{validation:"base64url",code:D.invalid_string,message:i.message}),n.dirty()):pe.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:D.invalid_string,...V.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...V.errToObj(e)})}url(e){return this._addCheck({kind:"url",...V.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...V.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...V.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...V.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...V.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...V.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...V.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...V.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...V.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...V.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...V.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...V.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...V.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...V.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...V.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...V.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...V.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...V.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...V.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...V.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...V.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...V.errToObj(r)})}nonempty(e){return this.min(1,V.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};fi.create=t=>new fi({checks:[],typeName:J.ZodString,coerce:t?.coerce??!1,...se(t)});function Gve(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}var ao=class t extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==F.number){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.number,received:i.parsedType}),Y}let n,s=new Ct;for(let i of this._def.checks)i.kind==="int"?pe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:D.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Gve(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_finite,message:i.message}),s.dirty()):pe.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,V.toString(r))}gt(e,r){return this.setLimit("min",e,!1,V.toString(r))}lte(e,r){return this.setLimit("max",e,!0,V.toString(r))}lt(e,r){return this.setLimit("max",e,!1,V.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:V.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:V.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:V.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:V.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:V.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:V.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ao.create=t=>new ao({checks:[],typeName:J.ZodNumber,coerce:t?.coerce||!1,...se(t)});var co=class t extends ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==F.bigint)return this._getInvalidInput(e);let n,s=new Ct;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),q(n,{code:D.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):pe.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return q(r,{code:D.invalid_type,expected:F.bigint,received:r.parsedType}),Y}gte(e,r){return this.setLimit("min",e,!0,V.toString(r))}gt(e,r){return this.setLimit("min",e,!1,V.toString(r))}lte(e,r){return this.setLimit("max",e,!0,V.toString(r))}lt(e,r){return this.setLimit("max",e,!1,V.toString(r))}setLimit(e,r,n,s){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:V.toString(s)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:V.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:V.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:V.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:V.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:V.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};co.create=t=>new co({checks:[],typeName:J.ZodBigInt,coerce:t?.coerce??!1,...se(t)});var uo=class extends ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==F.boolean){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.boolean,received:n.parsedType}),Y}return Ut(e.data)}};uo.create=t=>new uo({typeName:J.ZodBoolean,coerce:t?.coerce||!1,...se(t)});var lo=class t extends ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==F.date){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_type,expected:F.date,received:i.parsedType}),Y}if(Number.isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return q(i,{code:D.invalid_date}),Y}let n=new Ct,s;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),q(s,{code:D.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):pe.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:V.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:V.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};lo.create=t=>new lo({checks:[],coerce:t?.coerce||!1,typeName:J.ZodDate,...se(t)});var gc=class extends ce{_parse(e){if(this._getType(e)!==F.symbol){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.symbol,received:n.parsedType}),Y}return Ut(e.data)}};gc.create=t=>new gc({typeName:J.ZodSymbol,...se(t)});var fo=class extends ce{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.undefined,received:n.parsedType}),Y}return Ut(e.data)}};fo.create=t=>new fo({typeName:J.ZodUndefined,...se(t)});var po=class extends ce{_parse(e){if(this._getType(e)!==F.null){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.null,received:n.parsedType}),Y}return Ut(e.data)}};po.create=t=>new po({typeName:J.ZodNull,...se(t)});var pi=class extends ce{constructor(){super(...arguments),this._any=!0}_parse(e){return Ut(e.data)}};pi.create=t=>new pi({typeName:J.ZodAny,...se(t)});var hs=class extends ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ut(e.data)}};hs.create=t=>new hs({typeName:J.ZodUnknown,...se(t)});var an=class extends ce{_parse(e){let r=this._getOrReturnCtx(e);return q(r,{code:D.invalid_type,expected:F.never,received:r.parsedType}),Y}};an.create=t=>new an({typeName:J.ZodNever,...se(t)});var yc=class extends ce{_parse(e){if(this._getType(e)!==F.undefined){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.void,received:n.parsedType}),Y}return Ut(e.data)}};yc.create=t=>new yc({typeName:J.ZodVoid,...se(t)});var ms=class t extends ce{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==F.array)return q(r,{code:D.invalid_type,expected:F.array,received:r.parsedType}),Y;if(s.exactLength!==null){let o=r.data.length>s.exactLength.value,a=r.data.length<s.exactLength.value;(o||a)&&(q(r,{code:o?D.too_big:D.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(q(r,{code:D.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(q(r,{code:D.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,a)=>s.type._parseAsync(new Br(r,o,r.path,a)))).then(o=>Ct.mergeArray(n,o));let i=[...r.data].map((o,a)=>s.type._parseSync(new Br(r,o,r.path,a)));return Ct.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:V.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:V.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:V.toString(r)}})}nonempty(e){return this.min(1,e)}};ms.create=(t,e)=>new ms({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...se(e)});function mc(t){if(t instanceof fr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Ur.create(mc(n))}return new fr({...t._def,shape:()=>e})}else return t instanceof ms?new ms({...t._def,type:mc(t.element)}):t instanceof Ur?Ur.create(mc(t.unwrap())):t instanceof xn?xn.create(mc(t.unwrap())):t instanceof Tn?Tn.create(t.items.map(e=>mc(e))):t}var fr=class t extends ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=pe.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==F.object){let u=this._getOrReturnCtx(e);return q(u,{code:D.invalid_type,expected:F.object,received:u.parsedType}),Y}let{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof an&&this._def.unknownKeys==="strip"))for(let u in s.data)o.includes(u)||a.push(u);let c=[];for(let u of o){let l=i[u],d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Br(s,d,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof an){let u=this._def.unknownKeys;if(u==="passthrough")for(let l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(q(s,{code:D.unrecognized_keys,keys:a}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let l of a){let d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Br(s,d,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{let u=[];for(let l of c){let d=await l.key,m=await l.value;u.push({key:d,value:m,alwaysSet:l.alwaysSet})}return u}).then(u=>Ct.mergeObjectSync(n,u)):Ct.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return V.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:V.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of pe.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of pe.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return mc(this)}partial(e){let r={};for(let n of pe.objectKeys(this.shape)){let s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of pe.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof Ur;)i=i._def.innerType;r[n]=i}return new t({...this._def,shape:()=>r})}keyof(){return r3(pe.objectKeys(this.shape))}};fr.create=(t,e)=>new fr({shape:()=>t,unknownKeys:"strip",catchall:an.create(),typeName:J.ZodObject,...se(e)});fr.strictCreate=(t,e)=>new fr({shape:()=>t,unknownKeys:"strict",catchall:an.create(),typeName:J.ZodObject,...se(e)});fr.lazycreate=(t,e)=>new fr({shape:t,unknownKeys:"strip",catchall:an.create(),typeName:J.ZodObject,...se(e)});var ho=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(let a of i)if(a.result.status==="valid")return a.result;for(let a of i)if(a.result.status==="dirty")return r.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(a=>new dr(a.ctx.common.issues));return q(r,{code:D.invalid_union,unionErrors:o}),Y}if(r.common.async)return Promise.all(n.map(async i=>{let o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i,o=[];for(let c of n){let u={...r,common:{...r.common,issues:[]},parent:null},l=c._parseSync({data:r.data,path:r.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let a=o.map(c=>new dr(c));return q(r,{code:D.invalid_union,unionErrors:a}),Y}}get options(){return this._def.options}};ho.create=(t,e)=>new ho({options:t,typeName:J.ZodUnion,...se(e)});var ps=t=>t instanceof go?ps(t.schema):t instanceof jr?ps(t.innerType()):t instanceof yo?[t.value]:t instanceof Eo?t.options:t instanceof _o?pe.objectValues(t.enum):t instanceof So?ps(t._def.innerType):t instanceof fo?[void 0]:t instanceof po?[null]:t instanceof Ur?[void 0,...ps(t.unwrap())]:t instanceof xn?[null,...ps(t.unwrap())]:t instanceof rd||t instanceof wo?ps(t.unwrap()):t instanceof vo?ps(t._def.innerType):[],dy=class t extends ce{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.object)return q(r,{code:D.invalid_type,expected:F.object,received:r.parsedType}),Y;let n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(q(r,{code:D.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Y)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let s=new Map;for(let i of r){let o=ps(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new t({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...se(n)})}};function FR(t,e){let r=Cn(t),n=Cn(e);if(t===e)return{valid:!0,data:t};if(r===F.object&&n===F.object){let s=pe.objectKeys(e),i=pe.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(let a of i){let c=FR(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(r===F.array&&n===F.array){if(t.length!==e.length)return{valid:!1};let s=[];for(let i=0;i<t.length;i++){let o=t[i],a=e[i],c=FR(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return r===F.date&&n===F.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var mo=class extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(uy(i)||uy(o))return Y;let a=FR(i.value,o.value);return a.valid?((ly(i)||ly(o))&&r.dirty(),{status:r.value,value:a.data}):(q(n,{code:D.invalid_intersection_types}),Y)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};mo.create=(t,e,r)=>new mo({left:t,right:e,typeName:J.ZodIntersection,...se(r)});var Tn=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.array)return q(n,{code:D.invalid_type,expected:F.array,received:n.parsedType}),Y;if(n.data.length<this._def.items.length)return q(n,{code:D.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Y;!this._def.rest&&n.data.length>this._def.items.length&&(q(n,{code:D.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...n.data].map((o,a)=>{let c=this._def.items[a]||this._def.rest;return c?c._parse(new Br(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ct.mergeArray(r,o)):Ct.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Tn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Tn({items:t,typeName:J.ZodTuple,rest:null,...se(e)})};var fy=class t extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.object)return q(n,{code:D.invalid_type,expected:F.object,received:n.parsedType}),Y;let s=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)s.push({key:i._parse(new Br(n,a,n.path,a)),value:o._parse(new Br(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Ct.mergeObjectAsync(r,s):Ct.mergeObjectSync(r,s)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ce?new t({keyType:e,valueType:r,typeName:J.ZodRecord,...se(n)}):new t({keyType:fi.create(),valueType:e,typeName:J.ZodRecord,...se(r)})}},Ec=class extends ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.map)return q(n,{code:D.invalid_type,expected:F.map,received:n.parsedType}),Y;let s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],u)=>({key:s._parse(new Br(n,a,n.path,[u,"key"])),value:i._parse(new Br(n,c,n.path,[u,"value"]))}));if(n.common.async){let a=new Map;return Promise.resolve().then(async()=>{for(let c of o){let u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return Y;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}})}else{let a=new Map;for(let c of o){let u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return Y;(u.status==="dirty"||l.status==="dirty")&&r.dirty(),a.set(u.value,l.value)}return{status:r.value,value:a}}}};Ec.create=(t,e,r)=>new Ec({valueType:e,keyType:t,typeName:J.ZodMap,...se(r)});var _c=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==F.set)return q(n,{code:D.invalid_type,expected:F.set,received:n.parsedType}),Y;let s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(q(n,{code:D.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(q(n,{code:D.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());let i=this._def.valueType;function o(c){let u=new Set;for(let l of c){if(l.status==="aborted")return Y;l.status==="dirty"&&r.dirty(),u.add(l.value)}return{status:r.value,value:u}}let a=[...n.data.values()].map((c,u)=>i._parse(new Br(n,c,n.path,u)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,r){return new t({...this._def,minSize:{value:e,message:V.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:V.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};_c.create=(t,e)=>new _c({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...se(e)});var py=class t extends ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.function)return q(r,{code:D.invalid_type,expected:F.function,received:r.parsedType}),Y;function n(a,c){return td({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,pc(),fs].filter(u=>!!u),issueData:{code:D.invalid_arguments,argumentsError:c}})}function s(a,c){return td({data:a,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,pc(),fs].filter(u=>!!u),issueData:{code:D.invalid_return_type,returnTypeError:c}})}let i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof hi){let a=this;return Ut(async function(...c){let u=new dr([]),l=await a._def.args.parseAsync(c,i).catch(g=>{throw u.addIssue(n(c,g)),u}),d=await Reflect.apply(o,this,l);return await a._def.returns._def.type.parseAsync(d,i).catch(g=>{throw u.addIssue(s(d,g)),u})})}else{let a=this;return Ut(function(...c){let u=a._def.args.safeParse(c,i);if(!u.success)throw new dr([n(c,u.error)]);let l=Reflect.apply(o,this,u.data),d=a._def.returns.safeParse(l,i);if(!d.success)throw new dr([s(l,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Tn.create(e).rest(hs.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Tn.create([]).rest(hs.create()),returns:r||hs.create(),typeName:J.ZodFunction,...se(n)})}},go=class extends ce{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};go.create=(t,e)=>new go({getter:t,typeName:J.ZodLazy,...se(e)});var yo=class extends ce{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return q(r,{received:r.data,code:D.invalid_literal,expected:this._def.value}),Y}return{status:"valid",value:e.data}}get value(){return this._def.value}};yo.create=(t,e)=>new yo({value:t,typeName:J.ZodLiteral,...se(e)});function r3(t,e){return new Eo({values:t,typeName:J.ZodEnum,...se(e)})}var Eo=class t extends ce{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return q(r,{expected:pe.joinValues(n),received:r.parsedType,code:D.invalid_type}),Y}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return q(r,{received:r.data,code:D.invalid_enum_value,options:n}),Y}return Ut(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Eo.create=r3;var _o=class extends ce{_parse(e){let r=pe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==F.string&&n.parsedType!==F.number){let s=pe.objectValues(r);return q(n,{expected:pe.joinValues(s),received:n.parsedType,code:D.invalid_type}),Y}if(this._cache||(this._cache=new Set(pe.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let s=pe.objectValues(r);return q(n,{received:n.data,code:D.invalid_enum_value,options:s}),Y}return Ut(e.data)}get enum(){return this._def.values}};_o.create=(t,e)=>new _o({values:t,typeName:J.ZodNativeEnum,...se(e)});var hi=class extends ce{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==F.promise&&r.common.async===!1)return q(r,{code:D.invalid_type,expected:F.promise,received:r.parsedType}),Y;let n=r.parsedType===F.promise?r.data:Promise.resolve(r.data);return Ut(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}};hi.create=(t,e)=>new hi({type:t,typeName:J.ZodPromise,...se(e)});var jr=class extends ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{q(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){let o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(r.value==="aborted")return Y;let c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?Y:c.status==="dirty"?oo(c.value):r.value==="dirty"?oo(c.value):c});{if(r.value==="aborted")return Y;let a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?Y:a.status==="dirty"?oo(a.value):r.value==="dirty"?oo(a.value):a}}if(s.type==="refinement"){let o=a=>{let c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),o(a.value),{status:r.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?Y:(a.status==="dirty"&&r.dirty(),o(a.value).then(()=>({status:r.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!di(o))return Y;let a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>di(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:r.value,value:a})):Y);pe.assertNever(s)}};jr.create=(t,e,r)=>new jr({schema:t,typeName:J.ZodEffects,effect:e,...se(r)});jr.createWithPreprocess=(t,e,r)=>new jr({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...se(r)});var Ur=class extends ce{_parse(e){return this._getType(e)===F.undefined?Ut(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ur.create=(t,e)=>new Ur({innerType:t,typeName:J.ZodOptional,...se(e)});var xn=class extends ce{_parse(e){return this._getType(e)===F.null?Ut(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};xn.create=(t,e)=>new xn({innerType:t,typeName:J.ZodNullable,...se(e)});var So=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===F.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};So.create=(t,e)=>new So({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...se(e)});var vo=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hc(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new dr(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};vo.create=(t,e)=>new vo({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...se(e)});var Sc=class extends ce{_parse(e){if(this._getType(e)!==F.nan){let n=this._getOrReturnCtx(e);return q(n,{code:D.invalid_type,expected:F.nan,received:n.parsedType}),Y}return{status:"valid",value:e.data}}};Sc.create=t=>new Sc({typeName:J.ZodNaN,...se(t)});var Kve=Symbol("zod_brand"),rd=class extends ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},nd=class t extends ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Y:i.status==="dirty"?(r.dirty(),oo(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{let s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?Y:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:J.ZodPipeline})}},wo=class extends ce{_parse(e){let r=this._def.innerType._parse(e),n=s=>(di(s)&&(s.value=Object.freeze(s.value)),s);return hc(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}};wo.create=(t,e)=>new wo({innerType:t,typeName:J.ZodReadonly,...se(e)});function J4(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function n3(t,e={},r){return t?pi.create().superRefine((n,s)=>{let i=t(n);if(i instanceof Promise)return i.then(o=>{if(!o){let a=J4(e,n),c=a.fatal??r??!0;s.addIssue({code:"custom",...a,fatal:c})}});if(!i){let o=J4(e,n),a=o.fatal??r??!0;s.addIssue({code:"custom",...o,fatal:a})}}):pi.create()}var Xve={object:fr.lazycreate},J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));var Qve=(t,e={message:`Input not instance of ${t.name}`})=>n3(r=>r instanceof t,e),s3=fi.create,i3=ao.create,Yve=Sc.create,Jve=co.create,o3=uo.create,Zve=lo.create,ewe=gc.create,twe=fo.create,rwe=po.create,nwe=pi.create,swe=hs.create,iwe=an.create,owe=yc.create,awe=ms.create,cwe=fr.create,uwe=fr.strictCreate,lwe=ho.create,dwe=dy.create,fwe=mo.create,pwe=Tn.create,hwe=fy.create,mwe=Ec.create,gwe=_c.create,ywe=py.create,Ewe=go.create,_we=yo.create,Swe=Eo.create,vwe=_o.create,wwe=hi.create,bwe=jr.create,Rwe=Ur.create,Awe=xn.create,Cwe=jr.createWithPreprocess,Twe=nd.create,xwe=()=>s3().optional(),Pwe=()=>i3().optional(),Iwe=()=>o3().optional(),Owe={string:t=>fi.create({...t,coerce:!0}),number:t=>ao.create({...t,coerce:!0}),boolean:t=>uo.create({...t,coerce:!0}),bigint:t=>co.create({...t,coerce:!0}),date:t=>lo.create({...t,coerce:!0})};var Nwe=Y;var{v4:a3}=(eo(),le(Tb)),pr=class extends Error{constructor(r,n,s,i,o,a=!1){super(r);this.code=n;this.server=s;this.method=i;this.traceId=o;this.isRetryable=a;this.name="MCPError"}},UR=class extends pr{constructor(e,r,n,s){super(`MCP call timed out after ${s}ms`,"MCP_TIMEOUT",e,r,n,!0),this.name="MCPTimeoutError"}},BR=class extends pr{constructor(e,r,n,s){super(`Network error during MCP call: ${s.message}`,"MCP_NETWORK_ERROR",e,r,n,!0),this.name="MCPNetworkError"}};var jR=class{info(e,r){console.log(JSON.stringify({level:"INFO",message:e,...r}))}warn(e,r){console.warn(JSON.stringify({level:"WARN",message:e,...r}))}error(e,r,n){console.error(JSON.stringify({level:"ERROR",message:e,error:{name:r.name,message:r.message,stack:r.stack},...n}))}debug(e,r){console.debug(JSON.stringify({level:"DEBUG",message:e,...r}))}},hy=class{constructor(e={}){this.timeout=e.timeout??3e4,this.maxRetries=e.maxRetries??3,this.initialRetryDelay=e.initialRetryDelay??1e3,this.maxRetryDelay=e.maxRetryDelay??3e4,this.logger=e.logger??new jR}async call(e,r,n={}){let s=a3(),i=Date.now();this.logger.info("MCP call initiated",{traceId:s,server:e,method:r,params:this.sanitizeParams(n)});let o=null;for(let a=1;a<=this.maxRetries;a++)try{let c=await this.executeCall(e,r,n,s,a),u=Date.now()-i;return this.logger.info("MCP call succeeded",{traceId:s,server:e,method:r,attempt:a,duration:u}),c}catch(c){let u=Date.now()-i;if(c instanceof pr){if(o=c,this.logger.warn("MCP call failed",{traceId:s,server:e,method:r,attempt:a,maxRetries:this.maxRetries,duration:u,error:c.message,code:c.code,isRetryable:c.isRetryable}),!c.isRetryable)throw this.logger.error("MCP call failed with non-retryable error",c,{traceId:s,server:e,method:r}),c;if(a===this.maxRetries)break;let l=this.calculateRetryDelay(a);this.logger.debug("Retrying MCP call after delay",{traceId:s,server:e,method:r,attempt:a,nextAttempt:a+1,delayMs:l}),await this.sleep(l)}else{let l=new pr(`Unexpected error during MCP call: ${c}`,"MCP_UNEXPECTED_ERROR",e,r,s,!1);throw this.logger.error("MCP call failed with unexpected error",l,{traceId:s,server:e,method:r,originalError:c}),l}}throw this.logger.error("MCP call failed after all retries",o,{traceId:s,server:e,method:r,attempts:this.maxRetries}),o}async listTools(e){let r=a3();this.logger.info("Listing MCP tools",{traceId:r,server:e});try{let n=await this.executeListTools(e,r);return this.logger.info("MCP tools listed successfully",{traceId:r,server:e,toolCount:n.length}),n}catch(n){throw this.logger.error("Failed to list MCP tools",n,{traceId:r,server:e}),n}}async executeCall(e,r,n,s,i){let o=new AbortController,a=global.setTimeout(()=>o.abort(),this.timeout);try{let c=await this.simulateMCPCall(e,r,n,o.signal);return global.clearTimeout(a),c}catch(c){throw global.clearTimeout(a),c instanceof Error&&c.name==="AbortError"?new UR(e,r,s,this.timeout):this.isNetworkError(c)?new BR(e,r,s,c):c}}async executeListTools(e,r){return[]}async simulateMCPCall(e,r,n,s){return new Promise((i,o)=>{if(s.aborted){o(new Error("AbortError"));return}s.addEventListener("abort",()=>{o(new Error("AbortError"))}),global.setTimeout(()=>{i({})},100)})}calculateRetryDelay(e){let r=this.initialRetryDelay*Math.pow(2,e-1),n=r*.25*(Math.random()*2-1),s=r+n;return Math.min(s,this.maxRetryDelay)}sleep(e){return new Promise(r=>global.setTimeout(r,e))}isNetworkError(e){return e instanceof Error?["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND","ENETUNREACH"].some(n=>e.message.includes(n)):!1}sanitizeParams(e){let r=["password","token","apiKey","secret","authorization"],n={...e};for(let s of Object.keys(n))r.some(i=>s.toLowerCase().includes(i))&&(n[s]="***REDACTED***");return n}};var{v4:gs}=(eo(),le(Tb)),Dwe=require("aws-sdk"),HR=class{constructor(e){this.secondWindow=[];this.minuteWindow=[];this.hourWindow=[];this.messagesPerSecond=e.messagesPerSecond,this.messagesPerMinute=e.messagesPerMinute,this.messagesPerHour=e.messagesPerHour}async checkAndRecord(){let e=Date.now();return this.cleanupWindows(e),this.secondWindow.length>=this.messagesPerSecond||this.minuteWindow.length>=this.messagesPerMinute||this.hourWindow.length>=this.messagesPerHour?!1:(this.secondWindow.push(e),this.minuteWindow.push(e),this.hourWindow.push(e),!0)}async waitForSlot(){for(;!await this.checkAndRecord();)await this.sleep(100)}cleanupWindows(e){let r=e-1e3,n=e-6e4,s=e-36e5;this.secondWindow=this.secondWindow.filter(i=>i>r),this.minuteWindow=this.minuteWindow.filter(i=>i>n),this.hourWindow=this.hourWindow.filter(i=>i>s)}sleep(e){return new Promise(r=>setTimeout(r,e))}},VR=class{constructor(e={}){this.apiKey=null;this.apiKeyExpiry=0;this.idempotencyCache=new Map;this.mcpClient=new hy(e),this.secretName=e.secretName??"fibonacci/mcp/whatsapp",this.apiEndpoint=e.apiEndpoint??"https://graph.facebook.com/v18.0",this.logger=e.logger??this.mcpClient.logger,this.rateLimiter=new HR(e.rateLimit??{messagesPerSecond:80,messagesPerMinute:1e3,messagesPerHour:1e4}),this.secretsManager=new Dwe.SecretsManager({region:process.env.AWS_REGION??"us-east-1"})}async sendMessage(e){let r=gs(),n=Date.now();this.validateSendMessageParams(e);let s=e.idempotencyKey??this.generateIdempotencyKey(e);this.logger.info("WhatsApp sendMessage initiated",{traceId:r,to:this.maskPhoneNumber(e.to),idempotencyKey:s});let i=this.idempotencyCache.get(s);if(i)return this.logger.info("WhatsApp sendMessage returned from cache (idempotent)",{traceId:r,idempotencyKey:s,messageId:i.messageId}),i;try{await this.rateLimiter.waitForSlot();let o=await this.getApiKey(),a=await this.sendWhatsAppMessage(e,o,s,r);if(this.idempotencyCache.set(s,a),this.idempotencyCache.size>1e4){let u=this.idempotencyCache.keys().next().value;u&&this.idempotencyCache.delete(u)}let c=Date.now()-n;return this.logger.info("WhatsApp sendMessage succeeded",{traceId:r,messageId:a.messageId,status:a.status,duration:c}),a}catch(o){let a=Date.now()-n;throw this.logger.error("WhatsApp sendMessage failed",o,{traceId:r,to:this.maskPhoneNumber(e.to),duration:a}),o}}async getMessageStatus(e){let r=gs(),n=Date.now();this.logger.info("WhatsApp getMessageStatus initiated",{traceId:r,messageId:e});try{let s=await this.getApiKey(),i=await this.fetchMessageStatus(e,s,r),o=Date.now()-n;return this.logger.info("WhatsApp getMessageStatus succeeded",{traceId:r,messageId:e,status:i.status,duration:o}),i}catch(s){let i=Date.now()-n;throw this.logger.error("WhatsApp getMessageStatus failed",s,{traceId:r,messageId:e,duration:i}),s}}async getApiKey(){let e=Date.now();if(this.apiKey&&e<this.apiKeyExpiry)return this.apiKey;try{this.logger.debug("Fetching WhatsApp API key from Secrets Manager",{secretName:this.secretName});let r=await this.secretsManager.getSecretValue({SecretId:this.secretName}).promise();if(!r.SecretString)throw new Error("Secret value is empty");let n=JSON.parse(r.SecretString);if(this.apiKey=n.apiKey,!this.apiKey)throw new Error("apiKey not found in secret");return this.apiKeyExpiry=e+3e5,this.logger.debug("WhatsApp API key fetched successfully"),this.apiKey}catch(r){throw this.logger.error("Failed to fetch WhatsApp API key",r,{secretName:this.secretName}),new pr(`Failed to fetch API key from Secrets Manager: ${r}`,"WHATSAPP_AUTH_ERROR","whatsapp","getApiKey",gs(),!1)}}async sendWhatsAppMessage(e,r,n,s){let i={messaging_product:"whatsapp",recipient_type:"individual",to:e.to,type:"text",text:{body:e.message}};try{return{messageId:(await this.makeHttpRequest("POST",`${this.apiEndpoint}/messages`,i,{Authorization:`Bearer ${r}`,"Content-Type":"application/json","X-Idempotency-Key":n,"X-Trace-Id":s})).messages?.[0]?.id??gs(),status:"sent",timestamp:new Date().toISOString()}}catch(o){throw new pr(`WhatsApp API error: ${o}`,"WHATSAPP_API_ERROR","whatsapp","sendMessage",s,this.isRetryableError(o))}}async fetchMessageStatus(e,r,n){try{let s=await this.makeHttpRequest("GET",`${this.apiEndpoint}/messages/${e}`,null,{Authorization:`Bearer ${r}`,"X-Trace-Id":n});return{messageId:e,status:this.mapWhatsAppStatus(s.status),timestamp:s.timestamp??new Date().toISOString(),errorCode:s.error?.code,errorMessage:s.error?.message}}catch(s){throw new pr(`WhatsApp API error: ${s}`,"WHATSAPP_API_ERROR","whatsapp","getMessageStatus",n,this.isRetryableError(s))}}async makeHttpRequest(e,r,n,s){return this.logger.debug("Making HTTP request to WhatsApp API",{method:e,url:r.replace(/\/\d+\//g,"/****/")}),new Promise(i=>{setTimeout(()=>{i(e==="POST"?{messages:[{id:gs()}]}:{status:"delivered",timestamp:new Date().toISOString()})},100)})}validateSendMessageParams(e){if(!e.to)throw new pr("Missing required parameter: to","WHATSAPP_INVALID_PARAMS","whatsapp","sendMessage",gs(),!1);if(!e.message)throw new pr("Missing required parameter: message","WHATSAPP_INVALID_PARAMS","whatsapp","sendMessage",gs(),!1);if(!e.to.startsWith("+"))throw new pr("Phone number must be in international format (e.g., +5511987654321)","WHATSAPP_INVALID_PHONE","whatsapp","sendMessage",gs(),!1);if(e.message.length>4096)throw new pr("Message exceeds maximum length of 4096 characters","WHATSAPP_MESSAGE_TOO_LONG","whatsapp","sendMessage",gs(),!1)}generateIdempotencyKey(e){let r=`${e.to}:${e.message}`,n=0;for(let s=0;s<r.length;s++){let i=r.charCodeAt(s);n=(n<<5)-n+i,n=n&n}return`whatsapp-${Math.abs(n)}-${Date.now()}`}mapWhatsAppStatus(e){return{queued:"queued",sent:"sent",delivered:"delivered",read:"read",failed:"failed"}[e.toLowerCase()]??"sent"}isRetryableError(e){return!!(e instanceof Error&&["ECONNREFUSED","ECONNRESET","ETIMEDOUT","ENOTFOUND"].some(n=>e.message.includes(n))||e.statusCode>=500&&e.statusCode<600||e.statusCode===429)}maskPhoneNumber(e){if(e.length<=7)return e;let r=e.substring(0,3),n=e.substring(e.length-4),s="*".repeat(e.length-7);return`${r}${s}${n}`}};function c3(t){return new VR(t)}eo();async function u3(t,e){let r=Or();try{is.info("Validating LGPD consent",{traceId:r,leadId:e});let n=await t.query("SELECT consent_given FROM nigredo_leads.leads WHERE id = $1",[e]);if(n.rows.length===0)return is.warn("Lead not found for consent validation",{traceId:r,leadId:e}),!1;let s=n.rows[0].consent_given;return is.info("Consent validation result",{traceId:r,leadId:e,consentGiven:s}),s}catch(n){throw is.error("Error validating consent",n,{traceId:r,leadId:e}),n}}async function l3(t,e,r="Solicita\xE7\xE3o do lead"){let n=Or(),s=[];try{is.info("Starting descadastro process",{traceId:n,leadId:e,reason:r}),await t.query("BEGIN");let i=await t.query(`SELECT id, telefone, email, empresa, contato
       FROM nigredo_leads.leads
       WHERE id = $1`,[e]);if(i.rows.length===0)return await t.query("ROLLBACK"),{success:!1,leadId:e,message:"Lead not found",actionsPerformed:s};let o=i.rows[0];await t.query(`UPDATE nigredo_leads.leads
       SET status = 'descadastrado',
           metadata = jsonb_set(
             COALESCE(metadata, '{}'::jsonb),
             '{descadastro}',
             $1::jsonb
           ),
           updated_at = NOW()
       WHERE id = $2`,[JSON.stringify({date:new Date().toISOString(),reason:r,trace_id:n}),e]),s.push("Lead marked as descadastrado");let a=await t.query(`UPDATE nigredo_leads.agendamentos
       SET status = 'cancelado',
           updated_at = NOW()
       WHERE lead_id = $1 
         AND data_hora > NOW()
         AND status NOT IN ('cancelado', 'realizado')
       RETURNING id`,[e]);a.rows.length>0&&s.push(`${a.rows.length} future appointment(s) cancelled`),await t.query(`INSERT INTO nigredo_leads.blocklist (lead_id, telefone, email, reason, created_at)
       VALUES ($1, $2, $3, $4, NOW())
       ON CONFLICT DO NOTHING`,[e,o.telefone,o.email,r]),s.push("Added to blocklist");try{await t.query(`INSERT INTO alquimista_platform.audit_logs 
         (trace_id, agent_id, action_type, lead_id, result, metadata, created_at)
         VALUES ($1, $2, $3, $4, $5, $6, NOW())`,[n,"lgpd-compliance","descadastro",e,"success",JSON.stringify({reason:r,empresa:o.empresa,contato:o.contato,actionsPerformed:s})]),s.push("Audit log registered")}catch(c){is.warn("Failed to register audit log",{traceId:n,error:c})}return await t.query("COMMIT"),is.info("Descadastro completed successfully",{traceId:n,leadId:e,actionsPerformed:s}),{success:!0,leadId:e,message:"Descadastro realizado com sucesso. Seus dados foram removidos conforme LGPD.",actionsPerformed:s}}catch(i){return await t.query("ROLLBACK"),is.error("Error during descadastro",i,{traceId:n,leadId:e}),{success:!1,leadId:e,message:"Erro ao processar descadastro",actionsPerformed:s}}}var p3=require("aws-sdk"),Lwe=new p3.Lambda,kwe=new p3.BedrockRuntime({region:process.env.AWS_REGION||"us-east-1"}),h3=new sd.EventBridgeClient({}),WR=process.env.EVENT_BUS_NAME||"fibonacci-bus-dev",Mwe=process.env.SENTIMENT_LAMBDA_ARN||"",zR=c3({timeout:3e4,maxRetries:3}),qwe=cn.object({from:cn.string().min(1,"From is required"),message:cn.string().min(1,"Message is required"),channel:cn.enum(["whatsapp","email"]),messageId:cn.string().optional(),timestamp:cn.string().optional(),metadata:cn.record(cn.any()).optional()}),$we=iH(async(t,e,r)=>{let n=Or();r.setTraceId(n),r.info("Agente de Atendimento iniciado",{functionName:e.functionName});try{let s=Fwe(t,r);r.info("Webhook recebido",{from:s.from,channel:s.channel,messageLength:s.message.length});let i=await Uwe(s,r);if(!i)return r.warn("Lead n\xE3o encontrado",{from:s.from,channel:s.channel}),{statusCode:404,body:JSON.stringify({message:"Lead not found",traceId:n})};r.updateContext({leadId:i.id,tenantId:i.tenantId}),r.info("Lead identificado",{empresa:i.empresa});let o=await MR();if(!await u3(o,i.id))return r.warn("Lead sem consentimento LGPD",{leadId:i.id,empresa:i.empresa}),i.telefone&&s.channel==="whatsapp"&&await zR.sendMessage({to:i.telefone,message:"Ol\xE1! Para continuar nossa conversa, precisamos do seu consentimento para processar seus dados conforme a LGPD. Voc\xEA autoriza? Responda SIM para continuar.",idempotencyKey:`consent-request-${i.id}-${Date.now()}`}),{statusCode:200,body:JSON.stringify({message:"Consent required",leadId:i.id,traceId:n})};let c=await Bwe(i.id,r);r.info("Hist\xF3rico consultado",{interactionCount:c.length}),await f3(i.id,"recebido",s.channel,s.message,null,null,n,r,s.metadata);let u=await jwe(s.message,r,n);if(r.info("Sentimento analisado",{leadId:i.id,sentiment:u.sentiment,score:u.score,shouldBlock:u.shouldBlock,traceId:n}),u.shouldBlock)return await Hwe(i,u.blockReason||"Descadastro solicitado",r,n),{statusCode:200,body:JSON.stringify({message:"Descadastro processed",leadId:i.id,traceId:n})};let l=await Vwe(i,c,s.message,u,r,n);r.info("Resposta gerada",{leadId:i.id,tone:l.tone,nextAction:l.nextAction,confidence:l.confidence,traceId:n});let d=Xwe(l.message,r);return await Qwe(i,d,s.channel,r,n),await f3(i.id,"enviado",s.channel,d,u.sentiment,u.score,n,r,{tone:l.tone,nextAction:l.nextAction,confidence:l.confidence}),await Ywe(i.id,u,l,r),await Jwe(i,l,u,n,r),r.info("Agente de Atendimento conclu\xEDdo",{leadId:i.id,nextAction:l.nextAction,traceId:n}),{statusCode:200,body:JSON.stringify({message:"Message processed successfully",leadId:i.id,nextAction:l.nextAction,traceId:n})}}catch(s){return r.error("Erro ao processar webhook",s,{traceId:n}),{statusCode:500,body:JSON.stringify({message:"Internal server error",error:s.message,traceId:n})}}});function Fwe(t,e){if(e.debug("Parsing webhook payload"),!t.body)throw new Error("Missing request body");let r=JSON.parse(t.body),n=qwe.safeParse(r);if(!n.success)throw e.error("Invalid webhook payload",new Error("Validation failed"),{errors:n.error.errors}),new Error(`Invalid payload: ${n.error.errors.map(s=>s.message).join(", ")}`);return n.data}async function Uwe(t,e){e.debug("Identificando lead",{from:t.from,channel:t.channel});try{let r;if(t.channel==="whatsapp"?r=await fc(`SELECT 
          id, tenant_id, empresa, contato, telefone, email, status, segmento, metadata
        FROM nigredo_leads.leads
        WHERE telefone = $1
        ORDER BY updated_at DESC
        LIMIT 1`,[t.from]):r=await fc(`SELECT 
          id, tenant_id, empresa, contato, telefone, email, status, segmento, metadata
        FROM nigredo_leads.leads
        WHERE email = $1
        ORDER BY updated_at DESC
        LIMIT 1`,[t.from]),r.rows.length===0)return null;let n=r.rows[0];return{id:n.id,tenantId:n.tenant_id,empresa:n.empresa,contato:n.contato,telefone:n.telefone,email:n.email,status:n.status,segmento:n.segmento,metadata:n.metadata||{}}}catch(r){throw e.error("Erro ao identificar lead",r),r}}async function Bwe(t,e){e.debug("Consultando hist\xF3rico de intera\xE7\xF5es",{leadId:t});try{let n=(await fc(`SELECT 
        id, lead_id, tipo, canal, mensagem, sentimento, intensidade, created_at, metadata
      FROM nigredo_leads.interacoes
      WHERE lead_id = $1
      ORDER BY created_at DESC
      LIMIT 10`,[t])).rows.map(s=>({id:s.id,leadId:s.lead_id,tipo:s.tipo,canal:s.canal,mensagem:s.mensagem,sentimento:s.sentimento,intensidade:s.intensidade,createdAt:new Date(s.created_at),metadata:s.metadata||{}}));return e.debug("Hist\xF3rico consultado",{leadId:t,count:n.length}),n}catch(r){throw e.error("Erro ao consultar hist\xF3rico",r,{leadId:t}),r}}async function jwe(t,e,r){e.debug("Analisando sentimento",{messageLength:t.length,traceId:r});try{let n={FunctionName:Mwe,InvocationType:"RequestResponse",Payload:JSON.stringify({text:t,language:"pt"})},s=await Lwe.invoke(n).promise();if(!s.Payload)throw new Error("Empty response from Sentiment Agent");let i=JSON.parse(s.Payload.toString()),a={POSITIVE:"positivo",NEUTRAL:"neutro",NEGATIVE:"negativo",MIXED:"negativo"}[i.sentiment]||"neutro";a==="negativo"&&i.score>80&&(a="irritado");let c={sentiment:a,score:i.score,shouldBlock:i.shouldBlock||!1,blockReason:i.blockReason};return e.debug("Sentimento analisado",{sentiment:c.sentiment,score:c.score,shouldBlock:c.shouldBlock,traceId:r}),c}catch(n){return e.error("Erro ao analisar sentimento",n,{traceId:r}),{sentiment:"neutro",score:50,shouldBlock:!1}}}async function Hwe(t,e,r,n){r.info("Processando descadastro via LGPD module",{leadId:t.id,reason:e,traceId:n});try{let s=await MR(),i=await l3(s,t.id,e);if(!i.success)throw new Error(`Descadastro failed: ${i.message}`);r.info("Descadastro processado com sucesso",{leadId:t.id,actionsPerformed:i.actionsPerformed,traceId:n});let o=i.message;t.telefone&&await zR.sendMessage({to:t.telefone,message:o,idempotencyKey:`descadastro-${t.id}-${Date.now()}`}),await h3.send(new sd.PutEventsCommand({Entries:[{Source:"nigredo.atendimento",DetailType:"atendimento.descadastro",Detail:JSON.stringify({leadId:t.id,tenantId:t.tenantId,reason:e,actionsPerformed:i.actionsPerformed,traceId:n,timestamp:new Date().toISOString()}),EventBusName:WR}]}))}catch(s){throw r.error("Erro ao processar descadastro",s,{leadId:t.id,traceId:n}),s}}async function Vwe(t,e,r,n,s,i){s.debug("Gerando resposta com LLM",{leadId:t.id,sentiment:n.sentiment,traceId:i});try{let o=d3(n.sentiment),a=Wwe(t,e,r,o);s.debug("Prompt constru\xEDdo",{leadId:t.id,promptLength:a.length,tone:o,traceId:i});let l={modelId:"anthropic.claude-3-haiku-20240307-v1:0",contentType:"application/json",accept:"application/json",body:JSON.stringify({anthropic_version:"bedrock-2023-05-31",max_tokens:500,temperature:.7,messages:[{role:"user",content:a}]})},d=await kwe.invokeModel(l).promise();if(!d.body)throw new Error("Empty response from Bedrock");let g=JSON.parse(d.body.toString()).content[0].text,E=zwe(g,n,e),w=Gwe(n.score,e.length);return s.debug("Resposta gerada com sucesso",{leadId:t.id,messageLength:g.length,nextAction:E,confidence:w,traceId:i}),{message:g,tone:o,nextAction:E,confidence:w}}catch(o){return s.error("Erro ao gerar resposta com LLM",o,{leadId:t.id,traceId:i}),{message:Kwe(n.sentiment),tone:d3(n.sentiment),nextAction:"nutricao",confidence:50}}}function d3(t){return{positivo:"entusiasmado e proativo",neutro:"profissional e informativo",negativo:"emp\xE1tico e compreensivo",irritado:"calmo, respeitoso e conciliador"}[t]||"profissional e informativo"}function Wwe(t,e,r,n){let s=e.slice(0,5).reverse().map(o=>`${o.tipo==="enviado"?"Voc\xEA":t.contato}: ${o.mensagem}`).join(`
`);return`Voc\xEA \xE9 um consultor comercial profissional representando uma empresa de tecnologia.

CONTEXTO DO LEAD:
- Empresa: ${t.empresa}
- Contato: ${t.contato}
- Segmento: ${t.segmento||"N\xE3o especificado"}

HIST\xD3RICO DE CONVERSAS:
${s||"Primeira intera\xE7\xE3o"}

\xDALTIMA MENSAGEM DO LEAD:
"${r}"

INSTRU\xC7\xD5ES:
1. Responda de forma ${n}
2. Mantenha postura profissional e consultiva
3. N\xC3O mencione que voc\xEA \xE9 um rob\xF4 ou IA
4. Foque em entender as necessidades do lead
5. Seja conciso (m\xE1ximo 3 par\xE1grafos)
6. Use linguagem natural e brasileira
7. Se o lead demonstrar interesse, sugira agendar uma conversa
8. Se o lead tiver obje\xE7\xF5es, seja emp\xE1tico e ofere\xE7a valor

POL\xCDTICAS DA MARCA:
- Sempre respeite o tempo do lead
- N\xE3o seja insistente ou agressivo
- Foque em resolver problemas, n\xE3o em vender
- Use emojis com modera\xE7\xE3o (m\xE1ximo 2 por mensagem)

Gere uma resposta apropriada:`}function zwe(t,e,r){let n=t.toLowerCase();return["agendar","reuni\xE3o","conversar","ligar","call","meeting","hor\xE1rio","disponibilidade"].some(i=>n.includes(i))?"agendamento":e.sentiment==="irritado"?"escalate_human":e.sentiment==="negativo"&&r.length>3?"descarte":e.sentiment==="positivo"&&r.length>=2?"agendamento":"nutricao"}function Gwe(t,e){let r=t;return e>=3&&(r=Math.min(100,r+10)),e>=5&&(r=Math.min(100,r+10)),Math.round(r)}function Kwe(t){let e={positivo:"Que \xF3timo! Fico feliz em poder ajudar. Podemos agendar uma conversa para discutir como podemos apoiar sua empresa?",neutro:"Obrigado pela sua mensagem. Estou aqui para ajudar. Poderia me contar um pouco mais sobre o que voc\xEA est\xE1 buscando?",negativo:"Entendo sua preocupa\xE7\xE3o. Estamos aqui para ajudar da melhor forma poss\xEDvel. Poderia me contar mais sobre o que n\xE3o est\xE1 funcionando para voc\xEA?",irritado:"Pe\xE7o desculpas se causamos algum inc\xF4modo. Sua satisfa\xE7\xE3o \xE9 muito importante para n\xF3s. Como posso ajudar a resolver isso?"};return e[t]||e.neutro}function Xwe(t,e){e.debug("Validando resposta contra pol\xEDticas da marca");let r=t,n=["intelig\xEAncia artificial","ia","rob\xF4","bot","automa\xE7\xE3o","sistema automatizado","assistente virtual"];for(let o of n){let a=new RegExp(o,"gi");a.test(r)&&(e.warn("Resposta cont\xE9m men\xE7\xE3o a AI/bot, removendo",{keyword:o}),r=r.replace(a,"nossa equipe"))}let s=/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F1E0}-\u{1F1FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,i=r.match(s)||[];if(i.length>2){e.warn("Resposta cont\xE9m muitos emojis, limitando",{count:i.length});let o=0;r=r.replace(s,a=>(o++,o<=2?a:""))}return r.length>1e3&&(e.warn("Resposta muito longa, truncando",{originalLength:r.length}),r=r.substring(0,997)+"..."),r.trim()}async function Qwe(t,e,r,n,s){n.debug("Enviando resposta",{leadId:t.id,channel:r,messageLength:e.length,traceId:s});try{if(r==="whatsapp"&&t.telefone){let i=`atendimento-${t.id}-${Date.now()}`,o=await zR.sendMessage({to:t.telefone,message:e,idempotencyKey:i});n.info("Resposta enviada via WhatsApp",{leadId:t.id,messageId:o.messageId,status:o.status,traceId:s})}else if(r==="email"&&t.email)n.info("Resposta enviada via Email (simulado)",{leadId:t.id,traceId:s});else throw new Error(`Canal n\xE3o suportado ou lead sem contato: ${r}`)}catch(i){throw n.error("Erro ao enviar resposta",i,{leadId:t.id,channel:r,traceId:s}),i}}async function f3(t,e,r,n,s,i,o,a,c){a.debug("Registrando intera\xE7\xE3o",{leadId:t,tipo:e,canal:r,traceId:o});try{await fc(`INSERT INTO nigredo_leads.interacoes (
        id, lead_id, tipo, canal, mensagem, sentimento, intensidade,
        trace_id, metadata, created_at
      ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, NOW())`,[Or(),t,e,r,n.substring(0,1e3),s,i,o,JSON.stringify(c||{})]),a.debug("Intera\xE7\xE3o registrada",{leadId:t,tipo:e,traceId:o})}catch(u){throw a.error("Erro ao registrar intera\xE7\xE3o",u,{leadId:t,traceId:o}),u}}async function Ywe(t,e,r,n){n.debug("Atualizando status do lead",{leadId:t,nextAction:r.nextAction});try{let s="respondeu";r.nextAction==="agendamento"?s="interessado":r.nextAction==="descarte"&&(s="descartado"),await fc(`UPDATE nigredo_leads.leads
      SET 
        status = $1,
        metadata = jsonb_set(
          jsonb_set(
            jsonb_set(metadata, '{ultimoAtendimento}', to_jsonb(NOW()::text)),
            '{ultimoSentimento}', to_jsonb($2::text)
          ),
          '{proximoPasso}', to_jsonb($3::text)
        ),
        updated_at = NOW()
      WHERE id = $4`,[s,e.sentiment,r.nextAction,t]),n.debug("Status do lead atualizado",{leadId:t,newStatus:s})}catch(s){throw n.error("Erro ao atualizar status do lead",s,{leadId:t}),s}}async function Jwe(t,e,r,n,s){s.debug("Publicando evento",{leadId:t.id,nextAction:e.nextAction,traceId:n});try{let i="atendimento.completed";e.nextAction==="agendamento"?i="atendimento.schedule_requested":e.nextAction==="escalate_human"?i="atendimento.escalate_human":e.nextAction==="descarte"&&(i="atendimento.disqualified");let o=new sd.PutEventsCommand({Entries:[{Source:"nigredo.atendimento",DetailType:i,Detail:JSON.stringify({leadId:t.id,tenantId:t.tenantId,empresa:t.empresa,nextAction:e.nextAction,sentiment:r.sentiment,sentimentScore:r.score,confidence:e.confidence,tone:e.tone,metadata:{contato:t.contato,segmento:t.segmento},traceId:n,timestamp:new Date().toISOString()}),EventBusName:WR}]}),a=await h3.send(o);s.info("Evento publicado",{eventBusName:WR,detailType:i,leadId:t.id,failedEntryCount:a.FailedEntryCount||0,traceId:n}),a.FailedEntryCount&&a.FailedEntryCount>0&&s.error("Falha ao publicar evento",new Error("EventBridge failed"),{failedEntries:a.Entries,traceId:n})}catch(i){throw s.error("Erro ao publicar evento no EventBridge",i,{traceId:n}),i}}0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
